var en=Object.defineProperty;var tn=(a,s,d)=>s in a?en(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d;var $t=(a,s,d)=>(tn(a,typeof s!="symbol"?s+"":s,d),d);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))m(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&m(x)}).observe(document,{childList:!0,subtree:!0});function d(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function m(f){if(f.ep)return;f.ep=!0;const g=d(f);fetch(f.href,g)}})();function makeMap(a,s){const d=Object.create(null),m=a.split(",");for(let f=0;f<m.length;f++)d[m[f]]=!0;return s?f=>!!d[f.toLowerCase()]:f=>!!d[f]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),isModelListener=a=>a.startsWith("onUpdate:"),extend$3=Object.assign,remove=(a,s)=>{const d=a.indexOf(s);d>-1&&a.splice(d,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$2=(a,s)=>hasOwnProperty$1.call(a,s),isArray$1=Array.isArray,isMap=a=>toTypeString(a)==="[object Map]",isSet=a=>toTypeString(a)==="[object Set]",isDate=a=>toTypeString(a)==="[object Date]",isFunction=a=>typeof a=="function",isString=a=>typeof a=="string",isSymbol=a=>typeof a=="symbol",isObject=a=>a!==null&&typeof a=="object",isPromise=a=>(isObject(a)||isFunction(a))&&isFunction(a.then)&&isFunction(a.catch),objectToString$1=Object.prototype.toString,toTypeString=a=>objectToString$1.call(a),toRawType=a=>toTypeString(a).slice(8,-1),isPlainObject=a=>toTypeString(a)==="[object Object]",isIntegerKey=a=>isString(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=a=>{const s=Object.create(null);return d=>s[d]||(s[d]=a(d))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(a=>a.replace(camelizeRE,(s,d)=>d?d.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(a=>a.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(a=>a.charAt(0).toUpperCase()+a.slice(1)),toHandlerKey=cacheStringFunction(a=>a?`on${capitalize(a)}`:""),hasChanged=(a,s)=>!Object.is(a,s),invokeArrayFns=(a,s)=>{for(let d=0;d<a.length;d++)a[d](s)},def=(a,s,d)=>{Object.defineProperty(a,s,{configurable:!0,enumerable:!1,value:d})},looseToNumber=a=>{const s=parseFloat(a);return isNaN(s)?a:s};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(a){if(isArray$1(a)){const s={};for(let d=0;d<a.length;d++){const m=a[d],f=isString(m)?parseStringStyle(m):normalizeStyle(m);if(f)for(const g in f)s[g]=f[g]}return s}else if(isString(a)||isObject(a))return a}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(a){const s={};return a.replace(styleCommentRE,"").split(listDelimiterRE).forEach(d=>{if(d){const m=d.split(propertyDelimiterRE);m.length>1&&(s[m[0].trim()]=m[1].trim())}}),s}function normalizeClass(a){let s="";if(isString(a))s=a;else if(isArray$1(a))for(let d=0;d<a.length;d++){const m=normalizeClass(a[d]);m&&(s+=m+" ")}else if(isObject(a))for(const d in a)a[d]&&(s+=d+" ");return s.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(a){return!!a||a===""}function looseCompareArrays(a,s){if(a.length!==s.length)return!1;let d=!0;for(let m=0;d&&m<a.length;m++)d=looseEqual(a[m],s[m]);return d}function looseEqual(a,s){if(a===s)return!0;let d=isDate(a),m=isDate(s);if(d||m)return d&&m?a.getTime()===s.getTime():!1;if(d=isSymbol(a),m=isSymbol(s),d||m)return a===s;if(d=isArray$1(a),m=isArray$1(s),d||m)return d&&m?looseCompareArrays(a,s):!1;if(d=isObject(a),m=isObject(s),d||m){if(!d||!m)return!1;const f=Object.keys(a).length,g=Object.keys(s).length;if(f!==g)return!1;for(const x in a){const w=a.hasOwnProperty(x),C=s.hasOwnProperty(x);if(w&&!C||!w&&C||!looseEqual(a[x],s[x]))return!1}}return String(a)===String(s)}function looseIndexOf(a,s){return a.findIndex(d=>looseEqual(d,s))}const toDisplayString=a=>isString(a)?a:a==null?"":isArray$1(a)||isObject(a)&&(a.toString===objectToString$1||!isFunction(a.toString))?JSON.stringify(a,replacer,2):String(a),replacer=(a,s)=>s&&s.__v_isRef?replacer(a,s.value):isMap(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((d,[m,f],g)=>(d[stringifySymbol(m,g)+" =>"]=f,d),{})}:isSet(s)?{[`Set(${s.size})`]:[...s.values()].map(d=>stringifySymbol(d))}:isSymbol(s)?stringifySymbol(s):isObject(s)&&!isArray$1(s)&&!isPlainObject(s)?String(s):s,stringifySymbol=(a,s="")=>{var d;return isSymbol(a)?`Symbol(${(d=a.description)!=null?d:s})`:a};let activeEffectScope;class EffectScope{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!s&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const d=activeEffectScope;try{return activeEffectScope=this,s()}finally{activeEffectScope=d}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(s){if(this._active){let d,m;for(d=0,m=this.effects.length;d<m;d++)this.effects[d].stop();for(d=0,m=this.cleanups.length;d<m;d++)this.cleanups[d]();if(this.scopes)for(d=0,m=this.scopes.length;d<m;d++)this.scopes[d].stop(!0);if(!this.detached&&this.parent&&!s){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(a,s=activeEffectScope){s&&s.active&&s.effects.push(a)}function getCurrentScope(){return activeEffectScope}const createDep=a=>{const s=new Set(a);return s.w=0,s.n=0,s},wasTracked=a=>(a.w&trackOpBit)>0,newTracked=a=>(a.n&trackOpBit)>0,initDepMarkers=({deps:a})=>{if(a.length)for(let s=0;s<a.length;s++)a[s].w|=trackOpBit},finalizeDepMarkers=a=>{const{deps:s}=a;if(s.length){let d=0;for(let m=0;m<s.length;m++){const f=s[m];wasTracked(f)&&!newTracked(f)?f.delete(a):s[d++]=f,f.w&=~trackOpBit,f.n&=~trackOpBit}s.length=d}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(s,d=null,m){this.fn=s,this.scheduler=d,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,m)}run(){if(!this.active)return this.fn();let s=activeEffect,d=shouldTrack;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=d,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(a){const{deps:s}=a;if(s.length){for(let d=0;d<s.length;d++)s[d].delete(a);s.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const a=trackStack.pop();shouldTrack=a===void 0?!0:a}function track(a,s,d){if(shouldTrack&&activeEffect){let m=targetMap.get(a);m||targetMap.set(a,m=new Map);let f=m.get(d);f||m.set(d,f=createDep()),trackEffects(f)}}function trackEffects(a,s){let d=!1;effectTrackDepth<=maxMarkerBits?newTracked(a)||(a.n|=trackOpBit,d=!wasTracked(a)):d=!a.has(activeEffect),d&&(a.add(activeEffect),activeEffect.deps.push(a))}function trigger(a,s,d,m,f,g){const x=targetMap.get(a);if(!x)return;let w=[];if(s==="clear")w=[...x.values()];else if(d==="length"&&isArray$1(a)){const C=Number(m);x.forEach((A,_)=>{(_==="length"||!isSymbol(_)&&_>=C)&&w.push(A)})}else switch(d!==void 0&&w.push(x.get(d)),s){case"add":isArray$1(a)?isIntegerKey(d)&&w.push(x.get("length")):(w.push(x.get(ITERATE_KEY)),isMap(a)&&w.push(x.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(a)||(w.push(x.get(ITERATE_KEY)),isMap(a)&&w.push(x.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(a)&&w.push(x.get(ITERATE_KEY));break}if(w.length===1)w[0]&&triggerEffects(w[0]);else{const C=[];for(const A of w)A&&C.push(...A);triggerEffects(createDep(C))}}function triggerEffects(a,s){const d=isArray$1(a)?a:[...a];for(const m of d)m.computed&&triggerEffect(m);for(const m of d)m.computed||triggerEffect(m)}function triggerEffect(a,s){(a!==activeEffect||a.allowRecurse)&&(a.scheduler?a.scheduler():a.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const a={};return["includes","indexOf","lastIndexOf"].forEach(s=>{a[s]=function(...d){const m=toRaw(this);for(let g=0,x=this.length;g<x;g++)track(m,"get",g+"");const f=m[s](...d);return f===-1||f===!1?m[s](...d.map(toRaw)):f}}),["push","pop","shift","unshift","splice"].forEach(s=>{a[s]=function(...d){pauseTracking();const m=toRaw(this)[s].apply(this,d);return resetTracking(),m}}),a}function hasOwnProperty(a){const s=toRaw(this);return track(s,"has",a),s.hasOwnProperty(a)}class BaseReactiveHandler{constructor(s=!1,d=!1){this._isReadonly=s,this._shallow=d}get(s,d,m){const f=this._isReadonly,g=this._shallow;if(d==="__v_isReactive")return!f;if(d==="__v_isReadonly")return f;if(d==="__v_isShallow")return g;if(d==="__v_raw")return m===(f?g?shallowReadonlyMap:readonlyMap:g?shallowReactiveMap:reactiveMap).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(m)?s:void 0;const x=isArray$1(s);if(!f){if(x&&hasOwn$2(arrayInstrumentations,d))return Reflect.get(arrayInstrumentations,d,m);if(d==="hasOwnProperty")return hasOwnProperty}const w=Reflect.get(s,d,m);return(isSymbol(d)?builtInSymbols.has(d):isNonTrackableKeys(d))||(f||track(s,"get",d),g)?w:isRef(w)?x&&isIntegerKey(d)?w:w.value:isObject(w)?f?readonly(w):reactive(w):w}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(s=!1){super(!1,s)}set(s,d,m,f){let g=s[d];if(!this._shallow){const C=isReadonly(g);if(!isShallow(m)&&!isReadonly(m)&&(g=toRaw(g),m=toRaw(m)),!isArray$1(s)&&isRef(g)&&!isRef(m))return C?!1:(g.value=m,!0)}const x=isArray$1(s)&&isIntegerKey(d)?Number(d)<s.length:hasOwn$2(s,d),w=Reflect.set(s,d,m,f);return s===toRaw(f)&&(x?hasChanged(m,g)&&trigger(s,"set",d,m):trigger(s,"add",d,m)),w}deleteProperty(s,d){const m=hasOwn$2(s,d);s[d];const f=Reflect.deleteProperty(s,d);return f&&m&&trigger(s,"delete",d,void 0),f}has(s,d){const m=Reflect.has(s,d);return(!isSymbol(d)||!builtInSymbols.has(d))&&track(s,"has",d),m}ownKeys(s){return track(s,"iterate",isArray$1(s)?"length":ITERATE_KEY),Reflect.ownKeys(s)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(s=!1){super(!0,s)}set(s,d){return!0}deleteProperty(s,d){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=a=>a,getProto=a=>Reflect.getPrototypeOf(a);function get(a,s,d=!1,m=!1){a=a.__v_raw;const f=toRaw(a),g=toRaw(s);d||(hasChanged(s,g)&&track(f,"get",s),track(f,"get",g));const{has:x}=getProto(f),w=m?toShallow:d?toReadonly:toReactive;if(x.call(f,s))return w(a.get(s));if(x.call(f,g))return w(a.get(g));a!==f&&a.get(s)}function has(a,s=!1){const d=this.__v_raw,m=toRaw(d),f=toRaw(a);return s||(hasChanged(a,f)&&track(m,"has",a),track(m,"has",f)),a===f?d.has(a):d.has(a)||d.has(f)}function size(a,s=!1){return a=a.__v_raw,!s&&track(toRaw(a),"iterate",ITERATE_KEY),Reflect.get(a,"size",a)}function add$1(a){a=toRaw(a);const s=toRaw(this);return getProto(s).has.call(s,a)||(s.add(a),trigger(s,"add",a,a)),this}function set(a,s){s=toRaw(s);const d=toRaw(this),{has:m,get:f}=getProto(d);let g=m.call(d,a);g||(a=toRaw(a),g=m.call(d,a));const x=f.call(d,a);return d.set(a,s),g?hasChanged(s,x)&&trigger(d,"set",a,s):trigger(d,"add",a,s),this}function deleteEntry(a){const s=toRaw(this),{has:d,get:m}=getProto(s);let f=d.call(s,a);f||(a=toRaw(a),f=d.call(s,a)),m&&m.call(s,a);const g=s.delete(a);return f&&trigger(s,"delete",a,void 0),g}function clear(){const a=toRaw(this),s=a.size!==0,d=a.clear();return s&&trigger(a,"clear",void 0,void 0),d}function createForEach(a,s){return function(m,f){const g=this,x=g.__v_raw,w=toRaw(x),C=s?toShallow:a?toReadonly:toReactive;return!a&&track(w,"iterate",ITERATE_KEY),x.forEach((A,_)=>m.call(f,C(A),C(_),g))}}function createIterableMethod(a,s,d){return function(...m){const f=this.__v_raw,g=toRaw(f),x=isMap(g),w=a==="entries"||a===Symbol.iterator&&x,C=a==="keys"&&x,A=f[a](...m),_=d?toShallow:s?toReadonly:toReactive;return!s&&track(g,"iterate",C?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:M,done:P}=A.next();return P?{value:M,done:P}:{value:w?[_(M[0]),_(M[1])]:_(M),done:P}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(a){return function(...s){return a==="delete"?!1:a==="clear"?void 0:this}}function createInstrumentations(){const a={get(g){return get(this,g)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},s={get(g){return get(this,g,!1,!0)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},d={get(g){return get(this,g,!0)},get size(){return size(this,!0)},has(g){return has.call(this,g,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},m={get(g){return get(this,g,!0,!0)},get size(){return size(this,!0)},has(g){return has.call(this,g,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{a[g]=createIterableMethod(g,!1,!1),d[g]=createIterableMethod(g,!0,!1),s[g]=createIterableMethod(g,!1,!0),m[g]=createIterableMethod(g,!0,!0)}),[a,d,s,m]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(a,s){const d=s?a?shallowReadonlyInstrumentations:shallowInstrumentations:a?readonlyInstrumentations:mutableInstrumentations;return(m,f,g)=>f==="__v_isReactive"?!a:f==="__v_isReadonly"?a:f==="__v_raw"?m:Reflect.get(hasOwn$2(d,f)&&f in m?d:m,f,g)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(a){return a.__v_skip||!Object.isExtensible(a)?0:targetTypeMap(toRawType(a))}function reactive(a){return isReadonly(a)?a:createReactiveObject(a,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(a){return createReactiveObject(a,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(a){return createReactiveObject(a,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(a,s,d,m,f){if(!isObject(a)||a.__v_raw&&!(s&&a.__v_isReactive))return a;const g=f.get(a);if(g)return g;const x=getTargetType(a);if(x===0)return a;const w=new Proxy(a,x===2?m:d);return f.set(a,w),w}function isReactive(a){return isReadonly(a)?isReactive(a.__v_raw):!!(a&&a.__v_isReactive)}function isReadonly(a){return!!(a&&a.__v_isReadonly)}function isShallow(a){return!!(a&&a.__v_isShallow)}function isProxy(a){return isReactive(a)||isReadonly(a)}function toRaw(a){const s=a&&a.__v_raw;return s?toRaw(s):a}function markRaw(a){return def(a,"__v_skip",!0),a}const toReactive=a=>isObject(a)?reactive(a):a,toReadonly=a=>isObject(a)?readonly(a):a;function trackRefValue(a){shouldTrack&&activeEffect&&(a=toRaw(a),trackEffects(a.dep||(a.dep=createDep())))}function triggerRefValue(a,s){a=toRaw(a);const d=a.dep;d&&triggerEffects(d)}function isRef(a){return!!(a&&a.__v_isRef===!0)}function ref(a){return createRef(a,!1)}function createRef(a,s){return isRef(a)?a:new RefImpl(a,s)}class RefImpl{constructor(s,d){this.__v_isShallow=d,this.dep=void 0,this.__v_isRef=!0,this._rawValue=d?s:toRaw(s),this._value=d?s:toReactive(s)}get value(){return trackRefValue(this),this._value}set value(s){const d=this.__v_isShallow||isShallow(s)||isReadonly(s);s=d?s:toRaw(s),hasChanged(s,this._rawValue)&&(this._rawValue=s,this._value=d?s:toReactive(s),triggerRefValue(this))}}function unref(a){return isRef(a)?a.value:a}const shallowUnwrapHandlers={get:(a,s,d)=>unref(Reflect.get(a,s,d)),set:(a,s,d,m)=>{const f=a[s];return isRef(f)&&!isRef(d)?(f.value=d,!0):Reflect.set(a,s,d,m)}};function proxyRefs(a){return isReactive(a)?a:new Proxy(a,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(s,d,m,f){this._setter=d,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(s,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!f,this.__v_isReadonly=m}get value(){const s=toRaw(this);return trackRefValue(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function computed$1(a,s,d=!1){let m,f;const g=isFunction(a);return g?(m=a,f=NOOP):(m=a.get,f=a.set),new ComputedRefImpl(m,f,g||!f,d)}function warn(a,...s){}function callWithErrorHandling(a,s,d,m){let f;try{f=m?a(...m):a()}catch(g){handleError(g,s,d)}return f}function callWithAsyncErrorHandling(a,s,d,m){if(isFunction(a)){const g=callWithErrorHandling(a,s,d,m);return g&&isPromise(g)&&g.catch(x=>{handleError(x,s,d)}),g}const f=[];for(let g=0;g<a.length;g++)f.push(callWithAsyncErrorHandling(a[g],s,d,m));return f}function handleError(a,s,d,m=!0){const f=s?s.vnode:null;if(s){let g=s.parent;const x=s.proxy,w=d;for(;g;){const A=g.ec;if(A){for(let _=0;_<A.length;_++)if(A[_](a,x,w)===!1)return}g=g.parent}const C=s.appContext.config.errorHandler;if(C){callWithErrorHandling(C,null,10,[a,x,w]);return}}logError(a,d,f,m)}function logError(a,s,d,m=!0){console.error(a)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(a){const s=currentFlushPromise||resolvedPromise;return a?s.then(this?a.bind(this):a):s}function findInsertionIndex(a){let s=flushIndex+1,d=queue.length;for(;s<d;){const m=s+d>>>1,f=queue[m],g=getId(f);g<a||g===a&&f.pre?s=m+1:d=m}return s}function queueJob(a){(!queue.length||!queue.includes(a,isFlushing&&a.allowRecurse?flushIndex+1:flushIndex))&&(a.id==null?queue.push(a):queue.splice(findInsertionIndex(a.id),0,a),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(a){const s=queue.indexOf(a);s>flushIndex&&queue.splice(s,1)}function queuePostFlushCb(a){isArray$1(a)?pendingPostFlushCbs.push(...a):(!activePostFlushCbs||!activePostFlushCbs.includes(a,a.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(a),queueFlush()}function flushPreFlushCbs(a,s,d=isFlushing?flushIndex+1:0){for(;d<queue.length;d++){const m=queue[d];if(m&&m.pre){if(a&&m.id!==a.uid)continue;queue.splice(d,1),d--,m()}}}function flushPostFlushCbs(a){if(pendingPostFlushCbs.length){const s=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...s);return}for(activePostFlushCbs=s,activePostFlushCbs.sort((d,m)=>getId(d)-getId(m)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=a=>a.id==null?1/0:a.id,comparator=(a,s)=>{const d=getId(a)-getId(s);if(d===0){if(a.pre&&!s.pre)return-1;if(s.pre&&!a.pre)return 1}return d};function flushJobs(a){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(a,s,...d){if(a.isUnmounted)return;const m=a.vnode.props||EMPTY_OBJ;let f=d;const g=s.startsWith("update:"),x=g&&s.slice(7);if(x&&x in m){const _=`${x==="modelValue"?"model":x}Modifiers`,{number:M,trim:P}=m[_]||EMPTY_OBJ;P&&(f=d.map(E=>isString(E)?E.trim():E)),M&&(f=d.map(looseToNumber))}let w,C=m[w=toHandlerKey(s)]||m[w=toHandlerKey(camelize(s))];!C&&g&&(C=m[w=toHandlerKey(hyphenate(s))]),C&&callWithAsyncErrorHandling(C,a,6,f);const A=m[w+"Once"];if(A){if(!a.emitted)a.emitted={};else if(a.emitted[w])return;a.emitted[w]=!0,callWithAsyncErrorHandling(A,a,6,f)}}function normalizeEmitsOptions(a,s,d=!1){const m=s.emitsCache,f=m.get(a);if(f!==void 0)return f;const g=a.emits;let x={},w=!1;if(!isFunction(a)){const C=A=>{const _=normalizeEmitsOptions(A,s,!0);_&&(w=!0,extend$3(x,_))};!d&&s.mixins.length&&s.mixins.forEach(C),a.extends&&C(a.extends),a.mixins&&a.mixins.forEach(C)}return!g&&!w?(isObject(a)&&m.set(a,null),null):(isArray$1(g)?g.forEach(C=>x[C]=null):extend$3(x,g),isObject(a)&&m.set(a,x),x)}function isEmitListener(a,s){return!a||!isOn(s)?!1:(s=s.slice(2).replace(/Once$/,""),hasOwn$2(a,s[0].toLowerCase()+s.slice(1))||hasOwn$2(a,hyphenate(s))||hasOwn$2(a,s))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(a){const s=currentRenderingInstance;return currentRenderingInstance=a,currentScopeId=a&&a.type.__scopeId||null,s}function withCtx(a,s=currentRenderingInstance,d){if(!s||a._n)return a;const m=(...f)=>{m._d&&setBlockTracking(-1);const g=setCurrentRenderingInstance(s);let x;try{x=a(...f)}finally{setCurrentRenderingInstance(g),m._d&&setBlockTracking(1)}return x};return m._n=!0,m._c=!0,m._d=!0,m}function markAttrsAccessed(){}function renderComponentRoot(a){const{type:s,vnode:d,proxy:m,withProxy:f,props:g,propsOptions:[x],slots:w,attrs:C,emit:A,render:_,renderCache:M,data:P,setupState:E,ctx:R,inheritAttrs:B}=a;let z,F;const I=setCurrentRenderingInstance(a);try{if(d.shapeFlag&4){const W=f||m,G=W;z=normalizeVNode(_.call(G,W,M,g,E,P,R)),F=C}else{const W=s;z=normalizeVNode(W.length>1?W(g,{attrs:C,slots:w,emit:A}):W(g,null)),F=s.props?C:getFunctionalFallthrough(C)}}catch(W){blockStack.length=0,handleError(W,a,1),z=createVNode(Comment)}let L=z;if(F&&B!==!1){const W=Object.keys(F),{shapeFlag:G}=L;W.length&&G&7&&(x&&W.some(isModelListener)&&(F=filterModelListeners(F,x)),L=cloneVNode(L,F))}return d.dirs&&(L=cloneVNode(L),L.dirs=L.dirs?L.dirs.concat(d.dirs):d.dirs),d.transition&&(L.transition=d.transition),z=L,setCurrentRenderingInstance(I),z}const getFunctionalFallthrough=a=>{let s;for(const d in a)(d==="class"||d==="style"||isOn(d))&&((s||(s={}))[d]=a[d]);return s},filterModelListeners=(a,s)=>{const d={};for(const m in a)(!isModelListener(m)||!(m.slice(9)in s))&&(d[m]=a[m]);return d};function shouldUpdateComponent(a,s,d){const{props:m,children:f,component:g}=a,{props:x,children:w,patchFlag:C}=s,A=g.emitsOptions;if(s.dirs||s.transition)return!0;if(d&&C>=0){if(C&1024)return!0;if(C&16)return m?hasPropsChanged(m,x,A):!!x;if(C&8){const _=s.dynamicProps;for(let M=0;M<_.length;M++){const P=_[M];if(x[P]!==m[P]&&!isEmitListener(A,P))return!0}}}else return(f||w)&&(!w||!w.$stable)?!0:m===x?!1:m?x?hasPropsChanged(m,x,A):!0:!!x;return!1}function hasPropsChanged(a,s,d){const m=Object.keys(s);if(m.length!==Object.keys(a).length)return!0;for(let f=0;f<m.length;f++){const g=m[f];if(s[g]!==a[g]&&!isEmitListener(d,g))return!0}return!1}function updateHOCHostEl({vnode:a,parent:s},d){for(;s&&s.subTree===a;)(a=s.vnode).el=d,s=s.parent}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=a=>a.__isSuspense;function queueEffectWithSuspense(a,s){s&&s.pendingBranch?isArray$1(a)?s.effects.push(...a):s.effects.push(a):queuePostFlushCb(a)}function watchEffect(a,s){return doWatch(a,null,s)}const INITIAL_WATCHER_VALUE={};function watch(a,s,d){return doWatch(a,s,d)}function doWatch(a,s,{immediate:d,deep:m,flush:f,onTrack:g,onTrigger:x}=EMPTY_OBJ){var w;const C=getCurrentScope()===((w=currentInstance)==null?void 0:w.scope)?currentInstance:null;let A,_=!1,M=!1;if(isRef(a)?(A=()=>a.value,_=isShallow(a)):isReactive(a)?(A=()=>a,m=!0):isArray$1(a)?(M=!0,_=a.some(W=>isReactive(W)||isShallow(W)),A=()=>a.map(W=>{if(isRef(W))return W.value;if(isReactive(W))return traverse(W);if(isFunction(W))return callWithErrorHandling(W,C,2)})):isFunction(a)?s?A=()=>callWithErrorHandling(a,C,2):A=()=>{if(!(C&&C.isUnmounted))return P&&P(),callWithAsyncErrorHandling(a,C,3,[E])}:A=NOOP,s&&m){const W=A;A=()=>traverse(W())}let P,E=W=>{P=I.onStop=()=>{callWithErrorHandling(W,C,4),P=I.onStop=void 0}},R;if(isInSSRComponentSetup)if(E=NOOP,s?d&&callWithAsyncErrorHandling(s,C,3,[A(),M?[]:void 0,E]):A(),f==="sync"){const W=useSSRContext();R=W.__watcherHandles||(W.__watcherHandles=[])}else return NOOP;let B=M?new Array(a.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const z=()=>{if(I.active)if(s){const W=I.run();(m||_||(M?W.some((G,q)=>hasChanged(G,B[q])):hasChanged(W,B)))&&(P&&P(),callWithAsyncErrorHandling(s,C,3,[W,B===INITIAL_WATCHER_VALUE?void 0:M&&B[0]===INITIAL_WATCHER_VALUE?[]:B,E]),B=W)}else I.run()};z.allowRecurse=!!s;let F;f==="sync"?F=z:f==="post"?F=()=>queuePostRenderEffect(z,C&&C.suspense):(z.pre=!0,C&&(z.id=C.uid),F=()=>queueJob(z));const I=new ReactiveEffect(A,F);s?d?z():B=I.run():f==="post"?queuePostRenderEffect(I.run.bind(I),C&&C.suspense):I.run();const L=()=>{I.stop(),C&&C.scope&&remove(C.scope.effects,I)};return R&&R.push(L),L}function instanceWatch(a,s,d){const m=this.proxy,f=isString(a)?a.includes(".")?createPathGetter(m,a):()=>m[a]:a.bind(m,m);let g;isFunction(s)?g=s:(g=s.handler,d=s);const x=currentInstance;setCurrentInstance(this);const w=doWatch(f,g.bind(m),d);return x?setCurrentInstance(x):unsetCurrentInstance(),w}function createPathGetter(a,s){const d=s.split(".");return()=>{let m=a;for(let f=0;f<d.length&&m;f++)m=m[d[f]];return m}}function traverse(a,s){if(!isObject(a)||a.__v_skip||(s=s||new Set,s.has(a)))return a;if(s.add(a),isRef(a))traverse(a.value,s);else if(isArray$1(a))for(let d=0;d<a.length;d++)traverse(a[d],s);else if(isSet(a)||isMap(a))a.forEach(d=>{traverse(d,s)});else if(isPlainObject(a))for(const d in a)traverse(a[d],s);return a}function withDirectives(a,s){const d=currentRenderingInstance;if(d===null)return a;const m=getExposeProxy(d)||d.proxy,f=a.dirs||(a.dirs=[]);for(let g=0;g<s.length;g++){let[x,w,C,A=EMPTY_OBJ]=s[g];x&&(isFunction(x)&&(x={mounted:x,updated:x}),x.deep&&traverse(w),f.push({dir:x,instance:m,value:w,oldValue:void 0,arg:C,modifiers:A}))}return a}function invokeDirectiveHook(a,s,d,m){const f=a.dirs,g=s&&s.dirs;for(let x=0;x<f.length;x++){const w=f[x];g&&(w.oldValue=g[x].value);let C=w.dir[m];C&&(pauseTracking(),callWithAsyncErrorHandling(C,d,8,[a.el,w,a,s]),resetTracking())}}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(a,s){return isFunction(a)?extend$3({name:a.name},s,{setup:a}):a}const isAsyncWrapper=a=>!!a.type.__asyncLoader,isKeepAlive=a=>a.type.__isKeepAlive;function onActivated(a,s){registerKeepAliveHook(a,"a",s)}function onDeactivated(a,s){registerKeepAliveHook(a,"da",s)}function registerKeepAliveHook(a,s,d=currentInstance){const m=a.__wdc||(a.__wdc=()=>{let f=d;for(;f;){if(f.isDeactivated)return;f=f.parent}return a()});if(injectHook(s,m,d),d){let f=d.parent;for(;f&&f.parent;)isKeepAlive(f.parent.vnode)&&injectToKeepAliveRoot(m,s,d,f),f=f.parent}}function injectToKeepAliveRoot(a,s,d,m){const f=injectHook(s,a,m,!0);onUnmounted(()=>{remove(m[s],f)},d)}function injectHook(a,s,d=currentInstance,m=!1){if(d){const f=d[a]||(d[a]=[]),g=s.__weh||(s.__weh=(...x)=>{if(d.isUnmounted)return;pauseTracking(),setCurrentInstance(d);const w=callWithAsyncErrorHandling(s,d,a,x);return unsetCurrentInstance(),resetTracking(),w});return m?f.unshift(g):f.push(g),g}}const createHook=a=>(s,d=currentInstance)=>(!isInSSRComponentSetup||a==="sp")&&injectHook(a,(...m)=>s(...m),d),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(a,s=currentInstance){injectHook("ec",a,s)}function renderList(a,s,d,m){let f;const g=d&&d[m];if(isArray$1(a)||isString(a)){f=new Array(a.length);for(let x=0,w=a.length;x<w;x++)f[x]=s(a[x],x,void 0,g&&g[x])}else if(typeof a=="number"){f=new Array(a);for(let x=0;x<a;x++)f[x]=s(x+1,x,void 0,g&&g[x])}else if(isObject(a))if(a[Symbol.iterator])f=Array.from(a,(x,w)=>s(x,w,void 0,g&&g[w]));else{const x=Object.keys(a);f=new Array(x.length);for(let w=0,C=x.length;w<C;w++){const A=x[w];f[w]=s(a[A],A,w,g&&g[w])}}else f=[];return d&&(d[m]=f),f}const getPublicInstance=a=>a?isStatefulComponent(a)?getExposeProxy(a)||a.proxy:getPublicInstance(a.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>getPublicInstance(a.parent),$root:a=>getPublicInstance(a.root),$emit:a=>a.emit,$options:a=>resolveMergedOptions(a),$forceUpdate:a=>a.f||(a.f=()=>queueJob(a.update)),$nextTick:a=>a.n||(a.n=nextTick.bind(a.proxy)),$watch:a=>instanceWatch.bind(a)}),hasSetupBinding=(a,s)=>a!==EMPTY_OBJ&&!a.__isScriptSetup&&hasOwn$2(a,s),PublicInstanceProxyHandlers={get({_:a},s){const{ctx:d,setupState:m,data:f,props:g,accessCache:x,type:w,appContext:C}=a;let A;if(s[0]!=="$"){const E=x[s];if(E!==void 0)switch(E){case 1:return m[s];case 2:return f[s];case 4:return d[s];case 3:return g[s]}else{if(hasSetupBinding(m,s))return x[s]=1,m[s];if(f!==EMPTY_OBJ&&hasOwn$2(f,s))return x[s]=2,f[s];if((A=a.propsOptions[0])&&hasOwn$2(A,s))return x[s]=3,g[s];if(d!==EMPTY_OBJ&&hasOwn$2(d,s))return x[s]=4,d[s];shouldCacheAccess&&(x[s]=0)}}const _=publicPropertiesMap[s];let M,P;if(_)return s==="$attrs"&&track(a,"get",s),_(a);if((M=w.__cssModules)&&(M=M[s]))return M;if(d!==EMPTY_OBJ&&hasOwn$2(d,s))return x[s]=4,d[s];if(P=C.config.globalProperties,hasOwn$2(P,s))return P[s]},set({_:a},s,d){const{data:m,setupState:f,ctx:g}=a;return hasSetupBinding(f,s)?(f[s]=d,!0):m!==EMPTY_OBJ&&hasOwn$2(m,s)?(m[s]=d,!0):hasOwn$2(a.props,s)||s[0]==="$"&&s.slice(1)in a?!1:(g[s]=d,!0)},has({_:{data:a,setupState:s,accessCache:d,ctx:m,appContext:f,propsOptions:g}},x){let w;return!!d[x]||a!==EMPTY_OBJ&&hasOwn$2(a,x)||hasSetupBinding(s,x)||(w=g[0])&&hasOwn$2(w,x)||hasOwn$2(m,x)||hasOwn$2(publicPropertiesMap,x)||hasOwn$2(f.config.globalProperties,x)},defineProperty(a,s,d){return d.get!=null?a._.accessCache[s]=0:hasOwn$2(d,"value")&&this.set(a,s,d.value,null),Reflect.defineProperty(a,s,d)}};function normalizePropsOrEmits(a){return isArray$1(a)?a.reduce((s,d)=>(s[d]=null,s),{}):a}let shouldCacheAccess=!0;function applyOptions(a){const s=resolveMergedOptions(a),d=a.proxy,m=a.ctx;shouldCacheAccess=!1,s.beforeCreate&&callHook(s.beforeCreate,a,"bc");const{data:f,computed:g,methods:x,watch:w,provide:C,inject:A,created:_,beforeMount:M,mounted:P,beforeUpdate:E,updated:R,activated:B,deactivated:z,beforeDestroy:F,beforeUnmount:I,destroyed:L,unmounted:W,render:G,renderTracked:q,renderTriggered:K,errorCaptured:Z,serverPrefetch:J,expose:te,inheritAttrs:Q,components:me,directives:Xe,filters:Ve}=s;if(A&&resolveInjections(A,m,null),x)for(const et in x){const je=x[et];isFunction(je)&&(m[et]=je.bind(d))}if(f){const et=f.call(d,d);isObject(et)&&(a.data=reactive(et))}if(shouldCacheAccess=!0,g)for(const et in g){const je=g[et],Ke=isFunction(je)?je.bind(d,d):isFunction(je.get)?je.get.bind(d,d):NOOP,Je=!isFunction(je)&&isFunction(je.set)?je.set.bind(d):NOOP,at=computed({get:Ke,set:Je});Object.defineProperty(m,et,{enumerable:!0,configurable:!0,get:()=>at.value,set:nt=>at.value=nt})}if(w)for(const et in w)createWatcher(w[et],m,d,et);if(C){const et=isFunction(C)?C.call(d):C;Reflect.ownKeys(et).forEach(je=>{provide(je,et[je])})}_&&callHook(_,a,"c");function qe(et,je){isArray$1(je)?je.forEach(Ke=>et(Ke.bind(d))):je&&et(je.bind(d))}if(qe(onBeforeMount,M),qe(onMounted,P),qe(onBeforeUpdate,E),qe(onUpdated,R),qe(onActivated,B),qe(onDeactivated,z),qe(onErrorCaptured,Z),qe(onRenderTracked,q),qe(onRenderTriggered,K),qe(onBeforeUnmount,I),qe(onUnmounted,W),qe(onServerPrefetch,J),isArray$1(te))if(te.length){const et=a.exposed||(a.exposed={});te.forEach(je=>{Object.defineProperty(et,je,{get:()=>d[je],set:Ke=>d[je]=Ke})})}else a.exposed||(a.exposed={});G&&a.render===NOOP&&(a.render=G),Q!=null&&(a.inheritAttrs=Q),me&&(a.components=me),Xe&&(a.directives=Xe)}function resolveInjections(a,s,d=NOOP){isArray$1(a)&&(a=normalizeInject(a));for(const m in a){const f=a[m];let g;isObject(f)?"default"in f?g=inject(f.from||m,f.default,!0):g=inject(f.from||m):g=inject(f),isRef(g)?Object.defineProperty(s,m,{enumerable:!0,configurable:!0,get:()=>g.value,set:x=>g.value=x}):s[m]=g}}function callHook(a,s,d){callWithAsyncErrorHandling(isArray$1(a)?a.map(m=>m.bind(s.proxy)):a.bind(s.proxy),s,d)}function createWatcher(a,s,d,m){const f=m.includes(".")?createPathGetter(d,m):()=>d[m];if(isString(a)){const g=s[a];isFunction(g)&&watch(f,g)}else if(isFunction(a))watch(f,a.bind(d));else if(isObject(a))if(isArray$1(a))a.forEach(g=>createWatcher(g,s,d,m));else{const g=isFunction(a.handler)?a.handler.bind(d):s[a.handler];isFunction(g)&&watch(f,g,a)}}function resolveMergedOptions(a){const s=a.type,{mixins:d,extends:m}=s,{mixins:f,optionsCache:g,config:{optionMergeStrategies:x}}=a.appContext,w=g.get(s);let C;return w?C=w:!f.length&&!d&&!m?C=s:(C={},f.length&&f.forEach(A=>mergeOptions(C,A,x,!0)),mergeOptions(C,s,x)),isObject(s)&&g.set(s,C),C}function mergeOptions(a,s,d,m=!1){const{mixins:f,extends:g}=s;g&&mergeOptions(a,g,d,!0),f&&f.forEach(x=>mergeOptions(a,x,d,!0));for(const x in s)if(!(m&&x==="expose")){const w=internalOptionMergeStrats[x]||d&&d[x];a[x]=w?w(a[x],s[x]):s[x]}return a}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(a,s){return s?a?function(){return extend$3(isFunction(a)?a.call(this,this):a,isFunction(s)?s.call(this,this):s)}:s:a}function mergeInject(a,s){return mergeObjectOptions(normalizeInject(a),normalizeInject(s))}function normalizeInject(a){if(isArray$1(a)){const s={};for(let d=0;d<a.length;d++)s[a[d]]=a[d];return s}return a}function mergeAsArray(a,s){return a?[...new Set([].concat(a,s))]:s}function mergeObjectOptions(a,s){return a?extend$3(Object.create(null),a,s):s}function mergeEmitsOrPropsOptions(a,s){return a?isArray$1(a)&&isArray$1(s)?[...new Set([...a,...s])]:extend$3(Object.create(null),normalizePropsOrEmits(a),normalizePropsOrEmits(s??{})):s}function mergeWatchOptions(a,s){if(!a)return s;if(!s)return a;const d=extend$3(Object.create(null),a);for(const m in s)d[m]=mergeAsArray(a[m],s[m]);return d}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(a,s){return function(m,f=null){isFunction(m)||(m=extend$3({},m)),f!=null&&!isObject(f)&&(f=null);const g=createAppContext(),x=new WeakSet;let w=!1;const C=g.app={_uid:uid$1++,_component:m,_props:f,_container:null,_context:g,_instance:null,version,get config(){return g.config},set config(A){},use(A,..._){return x.has(A)||(A&&isFunction(A.install)?(x.add(A),A.install(C,..._)):isFunction(A)&&(x.add(A),A(C,..._))),C},mixin(A){return g.mixins.includes(A)||g.mixins.push(A),C},component(A,_){return _?(g.components[A]=_,C):g.components[A]},directive(A,_){return _?(g.directives[A]=_,C):g.directives[A]},mount(A,_,M){if(!w){const P=createVNode(m,f);return P.appContext=g,_&&s?s(P,A):a(P,A,M),w=!0,C._container=A,A.__vue_app__=C,getExposeProxy(P.component)||P.component.proxy}},unmount(){w&&(a(null,C._container),delete C._container.__vue_app__)},provide(A,_){return g.provides[A]=_,C},runWithContext(A){currentApp=C;try{return A()}finally{currentApp=null}}};return C}}let currentApp=null;function provide(a,s){if(currentInstance){let d=currentInstance.provides;const m=currentInstance.parent&&currentInstance.parent.provides;m===d&&(d=currentInstance.provides=Object.create(m)),d[a]=s}}function inject(a,s,d=!1){const m=currentInstance||currentRenderingInstance;if(m||currentApp){const f=m?m.parent==null?m.vnode.appContext&&m.vnode.appContext.provides:m.parent.provides:currentApp._context.provides;if(f&&a in f)return f[a];if(arguments.length>1)return d&&isFunction(s)?s.call(m&&m.proxy):s}}function initProps(a,s,d,m=!1){const f={},g={};def(g,InternalObjectKey,1),a.propsDefaults=Object.create(null),setFullProps(a,s,f,g);for(const x in a.propsOptions[0])x in f||(f[x]=void 0);d?a.props=m?f:shallowReactive(f):a.type.props?a.props=f:a.props=g,a.attrs=g}function updateProps(a,s,d,m){const{props:f,attrs:g,vnode:{patchFlag:x}}=a,w=toRaw(f),[C]=a.propsOptions;let A=!1;if((m||x>0)&&!(x&16)){if(x&8){const _=a.vnode.dynamicProps;for(let M=0;M<_.length;M++){let P=_[M];if(isEmitListener(a.emitsOptions,P))continue;const E=s[P];if(C)if(hasOwn$2(g,P))E!==g[P]&&(g[P]=E,A=!0);else{const R=camelize(P);f[R]=resolvePropValue(C,w,R,E,a,!1)}else E!==g[P]&&(g[P]=E,A=!0)}}}else{setFullProps(a,s,f,g)&&(A=!0);let _;for(const M in w)(!s||!hasOwn$2(s,M)&&((_=hyphenate(M))===M||!hasOwn$2(s,_)))&&(C?d&&(d[M]!==void 0||d[_]!==void 0)&&(f[M]=resolvePropValue(C,w,M,void 0,a,!0)):delete f[M]);if(g!==w)for(const M in g)(!s||!hasOwn$2(s,M))&&(delete g[M],A=!0)}A&&trigger(a,"set","$attrs")}function setFullProps(a,s,d,m){const[f,g]=a.propsOptions;let x=!1,w;if(s)for(let C in s){if(isReservedProp(C))continue;const A=s[C];let _;f&&hasOwn$2(f,_=camelize(C))?!g||!g.includes(_)?d[_]=A:(w||(w={}))[_]=A:isEmitListener(a.emitsOptions,C)||(!(C in m)||A!==m[C])&&(m[C]=A,x=!0)}if(g){const C=toRaw(d),A=w||EMPTY_OBJ;for(let _=0;_<g.length;_++){const M=g[_];d[M]=resolvePropValue(f,C,M,A[M],a,!hasOwn$2(A,M))}}return x}function resolvePropValue(a,s,d,m,f,g){const x=a[d];if(x!=null){const w=hasOwn$2(x,"default");if(w&&m===void 0){const C=x.default;if(x.type!==Function&&!x.skipFactory&&isFunction(C)){const{propsDefaults:A}=f;d in A?m=A[d]:(setCurrentInstance(f),m=A[d]=C.call(null,s),unsetCurrentInstance())}else m=C}x[0]&&(g&&!w?m=!1:x[1]&&(m===""||m===hyphenate(d))&&(m=!0))}return m}function normalizePropsOptions(a,s,d=!1){const m=s.propsCache,f=m.get(a);if(f)return f;const g=a.props,x={},w=[];let C=!1;if(!isFunction(a)){const _=M=>{C=!0;const[P,E]=normalizePropsOptions(M,s,!0);extend$3(x,P),E&&w.push(...E)};!d&&s.mixins.length&&s.mixins.forEach(_),a.extends&&_(a.extends),a.mixins&&a.mixins.forEach(_)}if(!g&&!C)return isObject(a)&&m.set(a,EMPTY_ARR),EMPTY_ARR;if(isArray$1(g))for(let _=0;_<g.length;_++){const M=camelize(g[_]);validatePropName(M)&&(x[M]=EMPTY_OBJ)}else if(g)for(const _ in g){const M=camelize(_);if(validatePropName(M)){const P=g[_],E=x[M]=isArray$1(P)||isFunction(P)?{type:P}:extend$3({},P);if(E){const R=getTypeIndex(Boolean,E.type),B=getTypeIndex(String,E.type);E[0]=R>-1,E[1]=B<0||R<B,(R>-1||hasOwn$2(E,"default"))&&w.push(M)}}}const A=[x,w];return isObject(a)&&m.set(a,A),A}function validatePropName(a){return a[0]!=="$"}function getType$1(a){const s=a&&a.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:a===null?"null":""}function isSameType(a,s){return getType$1(a)===getType$1(s)}function getTypeIndex(a,s){return isArray$1(s)?s.findIndex(d=>isSameType(d,a)):isFunction(s)&&isSameType(s,a)?0:-1}const isInternalKey=a=>a[0]==="_"||a==="$stable",normalizeSlotValue=a=>isArray$1(a)?a.map(normalizeVNode):[normalizeVNode(a)],normalizeSlot=(a,s,d)=>{if(s._n)return s;const m=withCtx((...f)=>normalizeSlotValue(s(...f)),d);return m._c=!1,m},normalizeObjectSlots=(a,s,d)=>{const m=a._ctx;for(const f in a){if(isInternalKey(f))continue;const g=a[f];if(isFunction(g))s[f]=normalizeSlot(f,g,m);else if(g!=null){const x=normalizeSlotValue(g);s[f]=()=>x}}},normalizeVNodeSlots=(a,s)=>{const d=normalizeSlotValue(s);a.slots.default=()=>d},initSlots=(a,s)=>{if(a.vnode.shapeFlag&32){const d=s._;d?(a.slots=toRaw(s),def(s,"_",d)):normalizeObjectSlots(s,a.slots={})}else a.slots={},s&&normalizeVNodeSlots(a,s);def(a.slots,InternalObjectKey,1)},updateSlots=(a,s,d)=>{const{vnode:m,slots:f}=a;let g=!0,x=EMPTY_OBJ;if(m.shapeFlag&32){const w=s._;w?d&&w===1?g=!1:(extend$3(f,s),!d&&w===1&&delete f._):(g=!s.$stable,normalizeObjectSlots(s,f)),x=s}else s&&(normalizeVNodeSlots(a,s),x={default:1});if(g)for(const w in f)!isInternalKey(w)&&x[w]==null&&delete f[w]};function setRef(a,s,d,m,f=!1){if(isArray$1(a)){a.forEach((P,E)=>setRef(P,s&&(isArray$1(s)?s[E]:s),d,m,f));return}if(isAsyncWrapper(m)&&!f)return;const g=m.shapeFlag&4?getExposeProxy(m.component)||m.component.proxy:m.el,x=f?null:g,{i:w,r:C}=a,A=s&&s.r,_=w.refs===EMPTY_OBJ?w.refs={}:w.refs,M=w.setupState;if(A!=null&&A!==C&&(isString(A)?(_[A]=null,hasOwn$2(M,A)&&(M[A]=null)):isRef(A)&&(A.value=null)),isFunction(C))callWithErrorHandling(C,w,12,[x,_]);else{const P=isString(C),E=isRef(C);if(P||E){const R=()=>{if(a.f){const B=P?hasOwn$2(M,C)?M[C]:_[C]:C.value;f?isArray$1(B)&&remove(B,g):isArray$1(B)?B.includes(g)||B.push(g):P?(_[C]=[g],hasOwn$2(M,C)&&(M[C]=_[C])):(C.value=[g],a.k&&(_[a.k]=C.value))}else P?(_[C]=x,hasOwn$2(M,C)&&(M[C]=x)):E&&(C.value=x,a.k&&(_[a.k]=x))};x?(R.id=-1,queuePostRenderEffect(R,d)):R()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(a){return baseCreateRenderer(a)}function baseCreateRenderer(a,s){const d=getGlobalThis();d.__VUE__=!0;const{insert:m,remove:f,patchProp:g,createElement:x,createText:w,createComment:C,setText:A,setElementText:_,parentNode:M,nextSibling:P,setScopeId:E=NOOP,insertStaticContent:R}=a,B=(be,we,ze,Ze=null,Qe=null,st=null,lt=!1,ot=null,ut=!!we.dynamicChildren)=>{if(be===we)return;be&&!isSameVNodeType(be,we)&&(Ze=yt(be),nt(be,Qe,st,!0),be=null),we.patchFlag===-2&&(ut=!1,we.dynamicChildren=null);const{type:gt,ref:vt,shapeFlag:xt}=we;switch(gt){case Text:z(be,we,ze,Ze);break;case Comment:F(be,we,ze,Ze);break;case Static:be==null&&I(we,ze,Ze,lt);break;case Fragment:me(be,we,ze,Ze,Qe,st,lt,ot,ut);break;default:xt&1?G(be,we,ze,Ze,Qe,st,lt,ot,ut):xt&6?Xe(be,we,ze,Ze,Qe,st,lt,ot,ut):(xt&64||xt&128)&&gt.process(be,we,ze,Ze,Qe,st,lt,ot,ut,ft)}vt!=null&&Qe&&setRef(vt,be&&be.ref,st,we||be,!we)},z=(be,we,ze,Ze)=>{if(be==null)m(we.el=w(we.children),ze,Ze);else{const Qe=we.el=be.el;we.children!==be.children&&A(Qe,we.children)}},F=(be,we,ze,Ze)=>{be==null?m(we.el=C(we.children||""),ze,Ze):we.el=be.el},I=(be,we,ze,Ze)=>{[be.el,be.anchor]=R(be.children,we,ze,Ze,be.el,be.anchor)},L=({el:be,anchor:we},ze,Ze)=>{let Qe;for(;be&&be!==we;)Qe=P(be),m(be,ze,Ze),be=Qe;m(we,ze,Ze)},W=({el:be,anchor:we})=>{let ze;for(;be&&be!==we;)ze=P(be),f(be),be=ze;f(we)},G=(be,we,ze,Ze,Qe,st,lt,ot,ut)=>{lt=lt||we.type==="svg",be==null?q(we,ze,Ze,Qe,st,lt,ot,ut):J(be,we,Qe,st,lt,ot,ut)},q=(be,we,ze,Ze,Qe,st,lt,ot)=>{let ut,gt;const{type:vt,props:xt,shapeFlag:Pt,transition:bt,dirs:Dt}=be;if(ut=be.el=x(be.type,st,xt&&xt.is,xt),Pt&8?_(ut,be.children):Pt&16&&Z(be.children,ut,null,Ze,Qe,st&&vt!=="foreignObject",lt,ot),Dt&&invokeDirectiveHook(be,null,Ze,"created"),K(ut,be,be.scopeId,lt,Ze),xt){for(const Et in xt)Et!=="value"&&!isReservedProp(Et)&&g(ut,Et,null,xt[Et],st,be.children,Ze,Qe,ht);"value"in xt&&g(ut,"value",null,xt.value),(gt=xt.onVnodeBeforeMount)&&invokeVNodeHook(gt,Ze,be)}Dt&&invokeDirectiveHook(be,null,Ze,"beforeMount");const tt=needTransition(Qe,bt);tt&&bt.beforeEnter(ut),m(ut,we,ze),((gt=xt&&xt.onVnodeMounted)||tt||Dt)&&queuePostRenderEffect(()=>{gt&&invokeVNodeHook(gt,Ze,be),tt&&bt.enter(ut),Dt&&invokeDirectiveHook(be,null,Ze,"mounted")},Qe)},K=(be,we,ze,Ze,Qe)=>{if(ze&&E(be,ze),Ze)for(let st=0;st<Ze.length;st++)E(be,Ze[st]);if(Qe){let st=Qe.subTree;if(we===st){const lt=Qe.vnode;K(be,lt,lt.scopeId,lt.slotScopeIds,Qe.parent)}}},Z=(be,we,ze,Ze,Qe,st,lt,ot,ut=0)=>{for(let gt=ut;gt<be.length;gt++){const vt=be[gt]=ot?cloneIfMounted(be[gt]):normalizeVNode(be[gt]);B(null,vt,we,ze,Ze,Qe,st,lt,ot)}},J=(be,we,ze,Ze,Qe,st,lt)=>{const ot=we.el=be.el;let{patchFlag:ut,dynamicChildren:gt,dirs:vt}=we;ut|=be.patchFlag&16;const xt=be.props||EMPTY_OBJ,Pt=we.props||EMPTY_OBJ;let bt;ze&&toggleRecurse(ze,!1),(bt=Pt.onVnodeBeforeUpdate)&&invokeVNodeHook(bt,ze,we,be),vt&&invokeDirectiveHook(we,be,ze,"beforeUpdate"),ze&&toggleRecurse(ze,!0);const Dt=Qe&&we.type!=="foreignObject";if(gt?te(be.dynamicChildren,gt,ot,ze,Ze,Dt,st):lt||je(be,we,ot,null,ze,Ze,Dt,st,!1),ut>0){if(ut&16)Q(ot,we,xt,Pt,ze,Ze,Qe);else if(ut&2&&xt.class!==Pt.class&&g(ot,"class",null,Pt.class,Qe),ut&4&&g(ot,"style",xt.style,Pt.style,Qe),ut&8){const tt=we.dynamicProps;for(let Et=0;Et<tt.length;Et++){const Ct=tt[Et],Mt=xt[Ct],dt=Pt[Ct];(dt!==Mt||Ct==="value")&&g(ot,Ct,Mt,dt,Qe,be.children,ze,Ze,ht)}}ut&1&&be.children!==we.children&&_(ot,we.children)}else!lt&&gt==null&&Q(ot,we,xt,Pt,ze,Ze,Qe);((bt=Pt.onVnodeUpdated)||vt)&&queuePostRenderEffect(()=>{bt&&invokeVNodeHook(bt,ze,we,be),vt&&invokeDirectiveHook(we,be,ze,"updated")},Ze)},te=(be,we,ze,Ze,Qe,st,lt)=>{for(let ot=0;ot<we.length;ot++){const ut=be[ot],gt=we[ot],vt=ut.el&&(ut.type===Fragment||!isSameVNodeType(ut,gt)||ut.shapeFlag&70)?M(ut.el):ze;B(ut,gt,vt,null,Ze,Qe,st,lt,!0)}},Q=(be,we,ze,Ze,Qe,st,lt)=>{if(ze!==Ze){if(ze!==EMPTY_OBJ)for(const ot in ze)!isReservedProp(ot)&&!(ot in Ze)&&g(be,ot,ze[ot],null,lt,we.children,Qe,st,ht);for(const ot in Ze){if(isReservedProp(ot))continue;const ut=Ze[ot],gt=ze[ot];ut!==gt&&ot!=="value"&&g(be,ot,gt,ut,lt,we.children,Qe,st,ht)}"value"in Ze&&g(be,"value",ze.value,Ze.value)}},me=(be,we,ze,Ze,Qe,st,lt,ot,ut)=>{const gt=we.el=be?be.el:w(""),vt=we.anchor=be?be.anchor:w("");let{patchFlag:xt,dynamicChildren:Pt,slotScopeIds:bt}=we;bt&&(ot=ot?ot.concat(bt):bt),be==null?(m(gt,ze,Ze),m(vt,ze,Ze),Z(we.children,ze,vt,Qe,st,lt,ot,ut)):xt>0&&xt&64&&Pt&&be.dynamicChildren?(te(be.dynamicChildren,Pt,ze,Qe,st,lt,ot),(we.key!=null||Qe&&we===Qe.subTree)&&traverseStaticChildren(be,we,!0)):je(be,we,ze,vt,Qe,st,lt,ot,ut)},Xe=(be,we,ze,Ze,Qe,st,lt,ot,ut)=>{we.slotScopeIds=ot,be==null?we.shapeFlag&512?Qe.ctx.activate(we,ze,Ze,lt,ut):Ve(we,ze,Ze,Qe,st,lt,ut):Ye(be,we,ut)},Ve=(be,we,ze,Ze,Qe,st,lt)=>{const ot=be.component=createComponentInstance(be,Ze,Qe);if(isKeepAlive(be)&&(ot.ctx.renderer=ft),setupComponent(ot),ot.asyncDep){if(Qe&&Qe.registerDep(ot,qe),!be.el){const ut=ot.subTree=createVNode(Comment);F(null,ut,we,ze)}return}qe(ot,be,we,ze,Qe,st,lt)},Ye=(be,we,ze)=>{const Ze=we.component=be.component;if(shouldUpdateComponent(be,we,ze))if(Ze.asyncDep&&!Ze.asyncResolved){et(Ze,we,ze);return}else Ze.next=we,invalidateJob(Ze.update),Ze.update();else we.el=be.el,Ze.vnode=we},qe=(be,we,ze,Ze,Qe,st,lt)=>{const ot=()=>{if(be.isMounted){let{next:vt,bu:xt,u:Pt,parent:bt,vnode:Dt}=be,tt=vt,Et;toggleRecurse(be,!1),vt?(vt.el=Dt.el,et(be,vt,lt)):vt=Dt,xt&&invokeArrayFns(xt),(Et=vt.props&&vt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Et,bt,vt,Dt),toggleRecurse(be,!0);const Ct=renderComponentRoot(be),Mt=be.subTree;be.subTree=Ct,B(Mt,Ct,M(Mt.el),yt(Mt),be,Qe,st),vt.el=Ct.el,tt===null&&updateHOCHostEl(be,Ct.el),Pt&&queuePostRenderEffect(Pt,Qe),(Et=vt.props&&vt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Et,bt,vt,Dt),Qe)}else{let vt;const{el:xt,props:Pt}=we,{bm:bt,m:Dt,parent:tt}=be,Et=isAsyncWrapper(we);if(toggleRecurse(be,!1),bt&&invokeArrayFns(bt),!Et&&(vt=Pt&&Pt.onVnodeBeforeMount)&&invokeVNodeHook(vt,tt,we),toggleRecurse(be,!0),xt&&le){const Ct=()=>{be.subTree=renderComponentRoot(be),le(xt,be.subTree,be,Qe,null)};Et?we.type.__asyncLoader().then(()=>!be.isUnmounted&&Ct()):Ct()}else{const Ct=be.subTree=renderComponentRoot(be);B(null,Ct,ze,Ze,be,Qe,st),we.el=Ct.el}if(Dt&&queuePostRenderEffect(Dt,Qe),!Et&&(vt=Pt&&Pt.onVnodeMounted)){const Ct=we;queuePostRenderEffect(()=>invokeVNodeHook(vt,tt,Ct),Qe)}(we.shapeFlag&256||tt&&isAsyncWrapper(tt.vnode)&&tt.vnode.shapeFlag&256)&&be.a&&queuePostRenderEffect(be.a,Qe),be.isMounted=!0,we=ze=Ze=null}},ut=be.effect=new ReactiveEffect(ot,()=>queueJob(gt),be.scope),gt=be.update=()=>ut.run();gt.id=be.uid,toggleRecurse(be,!0),gt()},et=(be,we,ze)=>{we.component=be;const Ze=be.vnode.props;be.vnode=we,be.next=null,updateProps(be,we.props,Ze,ze),updateSlots(be,we.children,ze),pauseTracking(),flushPreFlushCbs(be),resetTracking()},je=(be,we,ze,Ze,Qe,st,lt,ot,ut=!1)=>{const gt=be&&be.children,vt=be?be.shapeFlag:0,xt=we.children,{patchFlag:Pt,shapeFlag:bt}=we;if(Pt>0){if(Pt&128){Je(gt,xt,ze,Ze,Qe,st,lt,ot,ut);return}else if(Pt&256){Ke(gt,xt,ze,Ze,Qe,st,lt,ot,ut);return}}bt&8?(vt&16&&ht(gt,Qe,st),xt!==gt&&_(ze,xt)):vt&16?bt&16?Je(gt,xt,ze,Ze,Qe,st,lt,ot,ut):ht(gt,Qe,st,!0):(vt&8&&_(ze,""),bt&16&&Z(xt,ze,Ze,Qe,st,lt,ot,ut))},Ke=(be,we,ze,Ze,Qe,st,lt,ot,ut)=>{be=be||EMPTY_ARR,we=we||EMPTY_ARR;const gt=be.length,vt=we.length,xt=Math.min(gt,vt);let Pt;for(Pt=0;Pt<xt;Pt++){const bt=we[Pt]=ut?cloneIfMounted(we[Pt]):normalizeVNode(we[Pt]);B(be[Pt],bt,ze,null,Qe,st,lt,ot,ut)}gt>vt?ht(be,Qe,st,!0,!1,xt):Z(we,ze,Ze,Qe,st,lt,ot,ut,xt)},Je=(be,we,ze,Ze,Qe,st,lt,ot,ut)=>{let gt=0;const vt=we.length;let xt=be.length-1,Pt=vt-1;for(;gt<=xt&&gt<=Pt;){const bt=be[gt],Dt=we[gt]=ut?cloneIfMounted(we[gt]):normalizeVNode(we[gt]);if(isSameVNodeType(bt,Dt))B(bt,Dt,ze,null,Qe,st,lt,ot,ut);else break;gt++}for(;gt<=xt&&gt<=Pt;){const bt=be[xt],Dt=we[Pt]=ut?cloneIfMounted(we[Pt]):normalizeVNode(we[Pt]);if(isSameVNodeType(bt,Dt))B(bt,Dt,ze,null,Qe,st,lt,ot,ut);else break;xt--,Pt--}if(gt>xt){if(gt<=Pt){const bt=Pt+1,Dt=bt<vt?we[bt].el:Ze;for(;gt<=Pt;)B(null,we[gt]=ut?cloneIfMounted(we[gt]):normalizeVNode(we[gt]),ze,Dt,Qe,st,lt,ot,ut),gt++}}else if(gt>Pt)for(;gt<=xt;)nt(be[gt],Qe,st,!0),gt++;else{const bt=gt,Dt=gt,tt=new Map;for(gt=Dt;gt<=Pt;gt++){const Rt=we[gt]=ut?cloneIfMounted(we[gt]):normalizeVNode(we[gt]);Rt.key!=null&&tt.set(Rt.key,gt)}let Et,Ct=0;const Mt=Pt-Dt+1;let dt=!1,At=0;const Tt=new Array(Mt);for(gt=0;gt<Mt;gt++)Tt[gt]=0;for(gt=bt;gt<=xt;gt++){const Rt=be[gt];if(Ct>=Mt){nt(Rt,Qe,st,!0);continue}let Ft;if(Rt.key!=null)Ft=tt.get(Rt.key);else for(Et=Dt;Et<=Pt;Et++)if(Tt[Et-Dt]===0&&isSameVNodeType(Rt,we[Et])){Ft=Et;break}Ft===void 0?nt(Rt,Qe,st,!0):(Tt[Ft-Dt]=gt+1,Ft>=At?At=Ft:dt=!0,B(Rt,we[Ft],ze,null,Qe,st,lt,ot,ut),Ct++)}const kt=dt?getSequence(Tt):EMPTY_ARR;for(Et=kt.length-1,gt=Mt-1;gt>=0;gt--){const Rt=Dt+gt,Ft=we[Rt],It=Rt+1<vt?we[Rt+1].el:Ze;Tt[gt]===0?B(null,Ft,ze,It,Qe,st,lt,ot,ut):dt&&(Et<0||gt!==kt[Et]?at(Ft,ze,It,2):Et--)}}},at=(be,we,ze,Ze,Qe=null)=>{const{el:st,type:lt,transition:ot,children:ut,shapeFlag:gt}=be;if(gt&6){at(be.component.subTree,we,ze,Ze);return}if(gt&128){be.suspense.move(we,ze,Ze);return}if(gt&64){lt.move(be,we,ze,ft);return}if(lt===Fragment){m(st,we,ze);for(let xt=0;xt<ut.length;xt++)at(ut[xt],we,ze,Ze);m(be.anchor,we,ze);return}if(lt===Static){L(be,we,ze);return}if(Ze!==2&&gt&1&&ot)if(Ze===0)ot.beforeEnter(st),m(st,we,ze),queuePostRenderEffect(()=>ot.enter(st),Qe);else{const{leave:xt,delayLeave:Pt,afterLeave:bt}=ot,Dt=()=>m(st,we,ze),tt=()=>{xt(st,()=>{Dt(),bt&&bt()})};Pt?Pt(st,Dt,tt):tt()}else m(st,we,ze)},nt=(be,we,ze,Ze=!1,Qe=!1)=>{const{type:st,props:lt,ref:ot,children:ut,dynamicChildren:gt,shapeFlag:vt,patchFlag:xt,dirs:Pt}=be;if(ot!=null&&setRef(ot,null,ze,be,!0),vt&256){we.ctx.deactivate(be);return}const bt=vt&1&&Pt,Dt=!isAsyncWrapper(be);let tt;if(Dt&&(tt=lt&&lt.onVnodeBeforeUnmount)&&invokeVNodeHook(tt,we,be),vt&6)rt(be.component,ze,Ze);else{if(vt&128){be.suspense.unmount(ze,Ze);return}bt&&invokeDirectiveHook(be,null,we,"beforeUnmount"),vt&64?be.type.remove(be,we,ze,Qe,ft,Ze):gt&&(st!==Fragment||xt>0&&xt&64)?ht(gt,we,ze,!1,!0):(st===Fragment&&xt&384||!Qe&&vt&16)&&ht(ut,we,ze),Ze&&ct(be)}(Dt&&(tt=lt&&lt.onVnodeUnmounted)||bt)&&queuePostRenderEffect(()=>{tt&&invokeVNodeHook(tt,we,be),bt&&invokeDirectiveHook(be,null,we,"unmounted")},ze)},ct=be=>{const{type:we,el:ze,anchor:Ze,transition:Qe}=be;if(we===Fragment){pt(ze,Ze);return}if(we===Static){W(be);return}const st=()=>{f(ze),Qe&&!Qe.persisted&&Qe.afterLeave&&Qe.afterLeave()};if(be.shapeFlag&1&&Qe&&!Qe.persisted){const{leave:lt,delayLeave:ot}=Qe,ut=()=>lt(ze,st);ot?ot(be.el,st,ut):ut()}else st()},pt=(be,we)=>{let ze;for(;be!==we;)ze=P(be),f(be),be=ze;f(we)},rt=(be,we,ze)=>{const{bum:Ze,scope:Qe,update:st,subTree:lt,um:ot}=be;Ze&&invokeArrayFns(Ze),Qe.stop(),st&&(st.active=!1,nt(lt,be,we,ze)),ot&&queuePostRenderEffect(ot,we),queuePostRenderEffect(()=>{be.isUnmounted=!0},we),we&&we.pendingBranch&&!we.isUnmounted&&be.asyncDep&&!be.asyncResolved&&be.suspenseId===we.pendingId&&(we.deps--,we.deps===0&&we.resolve())},ht=(be,we,ze,Ze=!1,Qe=!1,st=0)=>{for(let lt=st;lt<be.length;lt++)nt(be[lt],we,ze,Ze,Qe)},yt=be=>be.shapeFlag&6?yt(be.component.subTree):be.shapeFlag&128?be.suspense.next():P(be.anchor||be.el),wt=(be,we,ze)=>{be==null?we._vnode&&nt(we._vnode,null,null,!0):B(we._vnode||null,be,we,null,null,null,ze),flushPreFlushCbs(),flushPostFlushCbs(),we._vnode=be},ft={p:B,um:nt,m:at,r:ct,mt:Ve,mc:Z,pc:je,pbc:te,n:yt,o:a};let He,le;return s&&([He,le]=s(ft)),{render:wt,hydrate:He,createApp:createAppAPI(wt,He)}}function toggleRecurse({effect:a,update:s},d){a.allowRecurse=s.allowRecurse=d}function needTransition(a,s){return(!a||a&&!a.pendingBranch)&&s&&!s.persisted}function traverseStaticChildren(a,s,d=!1){const m=a.children,f=s.children;if(isArray$1(m)&&isArray$1(f))for(let g=0;g<m.length;g++){const x=m[g];let w=f[g];w.shapeFlag&1&&!w.dynamicChildren&&((w.patchFlag<=0||w.patchFlag===32)&&(w=f[g]=cloneIfMounted(f[g]),w.el=x.el),d||traverseStaticChildren(x,w)),w.type===Text&&(w.el=x.el)}}function getSequence(a){const s=a.slice(),d=[0];let m,f,g,x,w;const C=a.length;for(m=0;m<C;m++){const A=a[m];if(A!==0){if(f=d[d.length-1],a[f]<A){s[m]=f,d.push(m);continue}for(g=0,x=d.length-1;g<x;)w=g+x>>1,a[d[w]]<A?g=w+1:x=w;A<a[d[g]]&&(g>0&&(s[m]=d[g-1]),d[g]=m)}}for(g=d.length,x=d[g-1];g-- >0;)d[g]=x,x=s[x];return d}const isTeleport=a=>a.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(a=!1){blockStack.push(currentBlock=a?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(a){isBlockTreeEnabled+=a}function setupBlock(a){return a.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(a),a}function createElementBlock(a,s,d,m,f,g){return setupBlock(createBaseVNode(a,s,d,m,f,g,!0))}function createBlock(a,s,d,m,f){return setupBlock(createVNode(a,s,d,m,f,!0))}function isVNode(a){return a?a.__v_isVNode===!0:!1}function isSameVNodeType(a,s){return a.type===s.type&&a.key===s.key}const InternalObjectKey="__vInternal",normalizeKey=({key:a})=>a??null,normalizeRef=({ref:a,ref_key:s,ref_for:d})=>(typeof a=="number"&&(a=""+a),a!=null?isString(a)||isRef(a)||isFunction(a)?{i:currentRenderingInstance,r:a,k:s,f:!!d}:a:null);function createBaseVNode(a,s=null,d=null,m=0,f=null,g=a===Fragment?0:1,x=!1,w=!1){const C={__v_isVNode:!0,__v_skip:!0,type:a,props:s,key:s&&normalizeKey(s),ref:s&&normalizeRef(s),scopeId:currentScopeId,slotScopeIds:null,children:d,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:m,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return w?(normalizeChildren(C,d),g&128&&a.normalize(C)):d&&(C.shapeFlag|=isString(d)?8:16),isBlockTreeEnabled>0&&!x&&currentBlock&&(C.patchFlag>0||g&6)&&C.patchFlag!==32&&currentBlock.push(C),C}const createVNode=_createVNode;function _createVNode(a,s=null,d=null,m=0,f=null,g=!1){if((!a||a===NULL_DYNAMIC_COMPONENT)&&(a=Comment),isVNode(a)){const w=cloneVNode(a,s,!0);return d&&normalizeChildren(w,d),isBlockTreeEnabled>0&&!g&&currentBlock&&(w.shapeFlag&6?currentBlock[currentBlock.indexOf(a)]=w:currentBlock.push(w)),w.patchFlag|=-2,w}if(isClassComponent(a)&&(a=a.__vccOpts),s){s=guardReactiveProps(s);let{class:w,style:C}=s;w&&!isString(w)&&(s.class=normalizeClass(w)),isObject(C)&&(isProxy(C)&&!isArray$1(C)&&(C=extend$3({},C)),s.style=normalizeStyle(C))}const x=isString(a)?1:isSuspense(a)?128:isTeleport(a)?64:isObject(a)?4:isFunction(a)?2:0;return createBaseVNode(a,s,d,m,f,x,g,!0)}function guardReactiveProps(a){return a?isProxy(a)||InternalObjectKey in a?extend$3({},a):a:null}function cloneVNode(a,s,d=!1){const{props:m,ref:f,patchFlag:g,children:x}=a,w=s?mergeProps(m||{},s):m;return{__v_isVNode:!0,__v_skip:!0,type:a.type,props:w,key:w&&normalizeKey(w),ref:s&&s.ref?d&&f?isArray$1(f)?f.concat(normalizeRef(s)):[f,normalizeRef(s)]:normalizeRef(s):f,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:x,target:a.target,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:s&&a.type!==Fragment?g===-1?16:g|16:g,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:a.transition,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&cloneVNode(a.ssContent),ssFallback:a.ssFallback&&cloneVNode(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce}}function createTextVNode(a=" ",s=0){return createVNode(Text,null,a,s)}function createCommentVNode(a="",s=!1){return s?(openBlock(),createBlock(Comment,null,a)):createVNode(Comment,null,a)}function normalizeVNode(a){return a==null||typeof a=="boolean"?createVNode(Comment):isArray$1(a)?createVNode(Fragment,null,a.slice()):typeof a=="object"?cloneIfMounted(a):createVNode(Text,null,String(a))}function cloneIfMounted(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:cloneVNode(a)}function normalizeChildren(a,s){let d=0;const{shapeFlag:m}=a;if(s==null)s=null;else if(isArray$1(s))d=16;else if(typeof s=="object")if(m&65){const f=s.default;f&&(f._c&&(f._d=!1),normalizeChildren(a,f()),f._c&&(f._d=!0));return}else{d=32;const f=s._;!f&&!(InternalObjectKey in s)?s._ctx=currentRenderingInstance:f===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?s._=1:(s._=2,a.patchFlag|=1024))}else isFunction(s)?(s={default:s,_ctx:currentRenderingInstance},d=32):(s=String(s),m&64?(d=16,s=[createTextVNode(s)]):d=8);a.children=s,a.shapeFlag|=d}function mergeProps(...a){const s={};for(let d=0;d<a.length;d++){const m=a[d];for(const f in m)if(f==="class")s.class!==m.class&&(s.class=normalizeClass([s.class,m.class]));else if(f==="style")s.style=normalizeStyle([s.style,m.style]);else if(isOn(f)){const g=s[f],x=m[f];x&&g!==x&&!(isArray$1(g)&&g.includes(x))&&(s[f]=g?[].concat(g,x):x)}else f!==""&&(s[f]=m[f])}return s}function invokeVNodeHook(a,s,d,m=null){callWithAsyncErrorHandling(a,s,7,[d,m])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(a,s,d){const m=a.type,f=(s?s.appContext:a.appContext)||emptyAppContext,g={uid:uid++,vnode:a,type:m,parent:s,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(f.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(m,f),emitsOptions:normalizeEmitsOptions(m,f),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:m.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:d,suspenseId:d?d.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=s?s.root:g,g.emit=emit.bind(null,g),a.ce&&a.ce(g),g}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(a=>currentInstance=a),internalSetCurrentInstance=a=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(s=>s(a)):globalCurrentInstanceSetters[0](a)};const setCurrentInstance=a=>{internalSetCurrentInstance(a),a.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(a){return a.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(a,s=!1){isInSSRComponentSetup=s;const{props:d,children:m}=a.vnode,f=isStatefulComponent(a);initProps(a,d,f,s),initSlots(a,m);const g=f?setupStatefulComponent(a,s):void 0;return isInSSRComponentSetup=!1,g}function setupStatefulComponent(a,s){const d=a.type;a.accessCache=Object.create(null),a.proxy=markRaw(new Proxy(a.ctx,PublicInstanceProxyHandlers));const{setup:m}=d;if(m){const f=a.setupContext=m.length>1?createSetupContext(a):null;setCurrentInstance(a),pauseTracking();const g=callWithErrorHandling(m,a,0,[a.props,f]);if(resetTracking(),unsetCurrentInstance(),isPromise(g)){if(g.then(unsetCurrentInstance,unsetCurrentInstance),s)return g.then(x=>{handleSetupResult(a,x,s)}).catch(x=>{handleError(x,a,0)});a.asyncDep=g}else handleSetupResult(a,g,s)}else finishComponentSetup(a,s)}function handleSetupResult(a,s,d){isFunction(s)?a.type.__ssrInlineRender?a.ssrRender=s:a.render=s:isObject(s)&&(a.setupState=proxyRefs(s)),finishComponentSetup(a,d)}let compile;function finishComponentSetup(a,s,d){const m=a.type;if(!a.render){if(!s&&compile&&!m.render){const f=m.template||resolveMergedOptions(a).template;if(f){const{isCustomElement:g,compilerOptions:x}=a.appContext.config,{delimiters:w,compilerOptions:C}=m,A=extend$3(extend$3({isCustomElement:g,delimiters:w},x),C);m.render=compile(f,A)}}a.render=m.render||NOOP}{setCurrentInstance(a),pauseTracking();try{applyOptions(a)}finally{resetTracking(),unsetCurrentInstance()}}}function getAttrsProxy(a){return a.attrsProxy||(a.attrsProxy=new Proxy(a.attrs,{get(s,d){return track(a,"get","$attrs"),s[d]}}))}function createSetupContext(a){const s=d=>{a.exposed=d||{}};return{get attrs(){return getAttrsProxy(a)},slots:a.slots,emit:a.emit,expose:s}}function getExposeProxy(a){if(a.exposed)return a.exposeProxy||(a.exposeProxy=new Proxy(proxyRefs(markRaw(a.exposed)),{get(s,d){if(d in s)return s[d];if(d in publicPropertiesMap)return publicPropertiesMap[d](a)},has(s,d){return d in s||d in publicPropertiesMap}}))}function isClassComponent(a){return isFunction(a)&&"__vccOpts"in a}const computed=(a,s)=>computed$1(a,s,isInSSRComponentSetup);function h(a,s,d){const m=arguments.length;return m===2?isObject(s)&&!isArray$1(s)?isVNode(s)?createVNode(a,null,[s]):createVNode(a,s):createVNode(a,null,s):(m>3?d=Array.prototype.slice.call(arguments,2):m===3&&isVNode(d)&&(d=[d]),createVNode(a,s,d))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.13",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(a,s,d)=>{s.insertBefore(a,d||null)},remove:a=>{const s=a.parentNode;s&&s.removeChild(a)},createElement:(a,s,d,m)=>{const f=s?doc.createElementNS(svgNS,a):doc.createElement(a,d?{is:d}:void 0);return a==="select"&&m&&m.multiple!=null&&f.setAttribute("multiple",m.multiple),f},createText:a=>doc.createTextNode(a),createComment:a=>doc.createComment(a),setText:(a,s)=>{a.nodeValue=s},setElementText:(a,s)=>{a.textContent=s},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>doc.querySelector(a),setScopeId(a,s){a.setAttribute(s,"")},insertStaticContent(a,s,d,m,f,g){const x=d?d.previousSibling:s.lastChild;if(f&&(f===g||f.nextSibling))for(;s.insertBefore(f.cloneNode(!0),d),!(f===g||!(f=f.nextSibling)););else{templateContainer.innerHTML=m?`<svg>${a}</svg>`:a;const w=templateContainer.content;if(m){const C=w.firstChild;for(;C.firstChild;)w.appendChild(C.firstChild);w.removeChild(C)}s.insertBefore(w,d)}return[x?x.nextSibling:s.firstChild,d?d.previousSibling:s.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(a,s,d){const m=a[vtcKey];m&&(s=(s?[s,...m]:[...m]).join(" ")),s==null?a.removeAttribute("class"):d?a.setAttribute("class",s):a.className=s}const vShowOldKey=Symbol("_vod"),CSS_VAR_TEXT=Symbol("");function patchStyle(a,s,d){const m=a.style,f=isString(d);if(d&&!f){if(s&&!isString(s))for(const g in s)d[g]==null&&setStyle(m,g,"");for(const g in d)setStyle(m,g,d[g])}else{const g=m.display;if(f){if(s!==d){const x=m[CSS_VAR_TEXT];x&&(d+=";"+x),m.cssText=d}}else s&&a.removeAttribute("style");vShowOldKey in a&&(m.display=g)}}const importantRE=/\s*!important$/;function setStyle(a,s,d){if(isArray$1(d))d.forEach(m=>setStyle(a,s,m));else if(d==null&&(d=""),s.startsWith("--"))a.setProperty(s,d);else{const m=autoPrefix(a,s);importantRE.test(d)?a.setProperty(hyphenate(m),d.replace(importantRE,""),"important"):a[m]=d}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(a,s){const d=prefixCache[s];if(d)return d;let m=camelize(s);if(m!=="filter"&&m in a)return prefixCache[s]=m;m=capitalize(m);for(let f=0;f<prefixes.length;f++){const g=prefixes[f]+m;if(g in a)return prefixCache[s]=g}return s}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(a,s,d,m,f){if(m&&s.startsWith("xlink:"))d==null?a.removeAttributeNS(xlinkNS,s.slice(6,s.length)):a.setAttributeNS(xlinkNS,s,d);else{const g=isSpecialBooleanAttr(s);d==null||g&&!includeBooleanAttr(d)?a.removeAttribute(s):a.setAttribute(s,g?"":d)}}function patchDOMProp(a,s,d,m,f,g,x){if(s==="innerHTML"||s==="textContent"){m&&x(m,f,g),a[s]=d??"";return}const w=a.tagName;if(s==="value"&&w!=="PROGRESS"&&!w.includes("-")){a._value=d;const A=w==="OPTION"?a.getAttribute("value"):a.value,_=d??"";A!==_&&(a.value=_),d==null&&a.removeAttribute(s);return}let C=!1;if(d===""||d==null){const A=typeof a[s];A==="boolean"?d=includeBooleanAttr(d):d==null&&A==="string"?(d="",C=!0):A==="number"&&(d=0,C=!0)}try{a[s]=d}catch{}C&&a.removeAttribute(s)}function addEventListener(a,s,d,m){a.addEventListener(s,d,m)}function removeEventListener(a,s,d,m){a.removeEventListener(s,d,m)}const veiKey=Symbol("_vei");function patchEvent(a,s,d,m,f=null){const g=a[veiKey]||(a[veiKey]={}),x=g[s];if(m&&x)x.value=m;else{const[w,C]=parseName(s);if(m){const A=g[s]=createInvoker(m,f);addEventListener(a,w,A,C)}else x&&(removeEventListener(a,w,x,C),g[s]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(a){let s;if(optionsModifierRE.test(a)){s={};let m;for(;m=a.match(optionsModifierRE);)a=a.slice(0,a.length-m[0].length),s[m[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):hyphenate(a.slice(2)),s]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(a,s){const d=m=>{if(!m._vts)m._vts=Date.now();else if(m._vts<=d.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(m,d.value),s,5,[m])};return d.value=a,d.attached=getNow(),d}function patchStopImmediatePropagation(a,s){if(isArray$1(s)){const d=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{d.call(a),a._stopped=!0},s.map(m=>f=>!f._stopped&&m&&m(f))}else return s}const isNativeOn=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,patchProp=(a,s,d,m,f=!1,g,x,w,C)=>{s==="class"?patchClass(a,m,f):s==="style"?patchStyle(a,d,m):isOn(s)?isModelListener(s)||patchEvent(a,s,d,m,x):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):shouldSetAsProp(a,s,m,f))?patchDOMProp(a,s,m,g,x,w,C):(s==="true-value"?a._trueValue=m:s==="false-value"&&(a._falseValue=m),patchAttr(a,s,m,f))};function shouldSetAsProp(a,s,d,m){if(m)return!!(s==="innerHTML"||s==="textContent"||s in a&&isNativeOn(s)&&isFunction(d));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&a.tagName==="INPUT"||s==="type"&&a.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const f=a.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return isNativeOn(s)&&isString(d)?!1:s in a}const getModelAssigner=a=>{const s=a.props["onUpdate:modelValue"]||!1;return isArray$1(s)?d=>invokeArrayFns(s,d):s};function onCompositionStart(a){a.target.composing=!0}function onCompositionEnd(a){const s=a.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(a,{modifiers:{lazy:s,trim:d,number:m}},f){a[assignKey]=getModelAssigner(f);const g=m||f.props&&f.props.type==="number";addEventListener(a,s?"change":"input",x=>{if(x.target.composing)return;let w=a.value;d&&(w=w.trim()),g&&(w=looseToNumber(w)),a[assignKey](w)}),d&&addEventListener(a,"change",()=>{a.value=a.value.trim()}),s||(addEventListener(a,"compositionstart",onCompositionStart),addEventListener(a,"compositionend",onCompositionEnd),addEventListener(a,"change",onCompositionEnd))},mounted(a,{value:s}){a.value=s??""},beforeUpdate(a,{value:s,modifiers:{lazy:d,trim:m,number:f}},g){if(a[assignKey]=getModelAssigner(g),a.composing)return;const x=f||a.type==="number"?looseToNumber(a.value):a.value,w=s??"";x!==w&&(document.activeElement===a&&a.type!=="range"&&(d||m&&a.value.trim()===w)||(a.value=w))}},vModelCheckbox={deep:!0,created(a,s,d){a[assignKey]=getModelAssigner(d),addEventListener(a,"change",()=>{const m=a._modelValue,f=getValue(a),g=a.checked,x=a[assignKey];if(isArray$1(m)){const w=looseIndexOf(m,f),C=w!==-1;if(g&&!C)x(m.concat(f));else if(!g&&C){const A=[...m];A.splice(w,1),x(A)}}else if(isSet(m)){const w=new Set(m);g?w.add(f):w.delete(f),x(w)}else x(getCheckboxValue(a,g))})},mounted:setChecked,beforeUpdate(a,s,d){a[assignKey]=getModelAssigner(d),setChecked(a,s,d)}};function setChecked(a,{value:s,oldValue:d},m){a._modelValue=s,isArray$1(s)?a.checked=looseIndexOf(s,m.props.value)>-1:isSet(s)?a.checked=s.has(m.props.value):s!==d&&(a.checked=looseEqual(s,getCheckboxValue(a,!0)))}function getValue(a){return"_value"in a?a._value:a.value}function getCheckboxValue(a,s){const d=s?"_trueValue":"_falseValue";return d in a?a[d]:s}const rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...a)=>{const s=ensureRenderer().createApp(...a),{mount:d}=s;return s.mount=m=>{const f=normalizeContainer(m);if(!f)return;const g=s._component;!isFunction(g)&&!g.render&&!g.template&&(g.template=f.innerHTML),f.innerHTML="";const x=d(f,!1,f instanceof SVGElement);return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),x},s};function normalizeContainer(a){return isString(a)?document.querySelector(a):a}var Ge=Object.defineProperty,We=(a,s,d)=>s in a?Ge(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d,D=(a,s,d)=>(We(a,typeof s!="symbol"?s+"":s,d),d),Le=(a,s,d)=>{if(!s.has(a))throw TypeError("Cannot "+d)},Wt=(a,s,d)=>(Le(a,s,"read from private field"),d?d.call(a):s.get(a)),Be=(a,s,d)=>{if(s.has(a))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(a):s.set(a,d)},ve=(a,s,d,m)=>(Le(a,s,"write to private field"),m?m.call(a,d):s.set(a,d),d),Ue=(a,s,d)=>(Le(a,s,"access private method"),d),DayOfWeek=(a=>(a[a.Sunday=0]="Sunday",a[a.Monday=1]="Monday",a[a.Tuesday=2]="Tuesday",a[a.Wednesday=3]="Wednesday",a[a.Thursday=4]="Thursday",a[a.Friday=5]="Friday",a[a.Saturday=6]="Saturday",a))(DayOfWeek||{});function groupBy(a,s){return groupBy2(a,d=>d[s])}function groupBy2(a,s){return a.reduce((d,m)=>{const f=s(m);let g=d.get(f);return g?g.push(m):(g=[m],d.set(f,g)),d},new Map)}function indexOfAny(a,s,d=0){for(let m=d;m<a.length;m++)if(s.includes(a[m]))return m;return-1}function sortArray(a,s){const d=(m,f,g,x)=>m[g]>f[g]?x.toUpperCase()=="DESC"?-1:1:m[g]<f[g]?x.toUpperCase()=="DESC"?1:-1:0;return[...a].sort((m,f)=>{for(const g of s){const x=d(m,f,g[0],g[1]);if(x!==0)return x}return 0})}function create2DArray(a,s,d){const m=Array(a);for(let f=0;f<a;f++)m[f]=new Array(s),d!==void 0&&m[f].fill(d);return m}function arrayRemoveFirst(a,s){const d=a.indexOf(s);return d>-1?(a.splice(d,1),!0):!1}function arrayRemoveIf(a,s){let d=0;for(let m=a.length-1;m>=0;m--)s(a[m])&&(a.splice(m,1),d++);return d}function pushMany(a,s){for(let d=0;d<s.length;d++)a.push(s[d])}function getReversedCopy(a){if(!a||a.length===0)return[];const s=[];return pushMany(s,a),s.reverse()}function maxValueOfArray(a,...s){let d=0;return a.length>=1e5?d=a.reduce(function(m,f){return Math.max(m,f)}):d=Math.max.apply(null,a),!s||s.length===0?d:Math.max(d,...s)}function minValueOfArray(a,...s){let d=0;return a.length>=1e5?d=a.reduce(function(m,f){return Math.min(m,f)}):d=Math.min.apply(null,a),!s||s.length===0?d:Math.min(d,...s)}function getEnumName(a,s){return a[s]}function getEnumKeys(a){return Object.keys(a).filter(s=>typeof a[s]!="number").map(s=>Number(s))}const DateTime_MaxValue=new Date(9999,11,31,23,59,59,999),DateTime_MinValue=new Date(1,0,1,0,0,0,0);DateTime_MinValue.setUTCFullYear(1);DateTime_MinValue.setUTCMonth(0);DateTime_MinValue.setUTCDate(1);DateTime_MinValue.setUTCHours(0);DateTime_MinValue.setUTCMinutes(0);DateTime_MinValue.setUTCSeconds(0);DateTime_MinValue.setUTCMilliseconds(0);function formatTimeSpan(a,s){let d="";if(s.includes("d")&&(d+=a.days.toString().padStart(2,"0")+":"),s.includes("hh")&&(d+=a.hours.toString().padStart(2,"0")+":"),s.includes("mm")&&(d+=a.minutes.toString().padStart(2,"0")+":"),s.includes("ss")&&(d+=a.seconds.toString().padStart(2,"0")),!d)throw new Error("Invalid format");return d}var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var s=a.default;if(typeof s=="function"){var d=function m(){return this instanceof m?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};d.prototype=s.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(a).forEach(function(m){var f=Object.getOwnPropertyDescriptor(a,m);Object.defineProperty(d,m,f.get?f:{enumerable:!0,get:function(){return a[m]}})}),d}var dayjs_min$1={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal$1,function(){var d=1e3,m=6e4,f=36e5,g="millisecond",x="second",w="minute",C="hour",A="day",_="week",M="month",P="quarter",E="year",R="date",B="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ve){var Ye=["th","st","nd","rd"],qe=Ve%100;return"["+Ve+(Ye[(qe-20)%10]||Ye[qe]||Ye[0])+"]"}},L=function(Ve,Ye,qe){var et=String(Ve);return!et||et.length>=Ye?Ve:""+Array(Ye+1-et.length).join(qe)+Ve},W={s:L,z:function(Ve){var Ye=-Ve.utcOffset(),qe=Math.abs(Ye),et=Math.floor(qe/60),je=qe%60;return(Ye<=0?"+":"-")+L(et,2,"0")+":"+L(je,2,"0")},m:function Ve(Ye,qe){if(Ye.date()<qe.date())return-Ve(qe,Ye);var et=12*(qe.year()-Ye.year())+(qe.month()-Ye.month()),je=Ye.clone().add(et,M),Ke=qe-je<0,Je=Ye.clone().add(et+(Ke?-1:1),M);return+(-(et+(qe-je)/(Ke?je-Je:Je-je))||0)},a:function(Ve){return Ve<0?Math.ceil(Ve)||0:Math.floor(Ve)},p:function(Ve){return{M,y:E,w:_,d:A,D:R,h:C,m:w,s:x,ms:g,Q:P}[Ve]||String(Ve||"").toLowerCase().replace(/s$/,"")},u:function(Ve){return Ve===void 0}},G="en",q={};q[G]=I;var K="$isDayjsObject",Z=function(Ve){return Ve instanceof me||!(!Ve||!Ve[K])},J=function Ve(Ye,qe,et){var je;if(!Ye)return G;if(typeof Ye=="string"){var Ke=Ye.toLowerCase();q[Ke]&&(je=Ke),qe&&(q[Ke]=qe,je=Ke);var Je=Ye.split("-");if(!je&&Je.length>1)return Ve(Je[0])}else{var at=Ye.name;q[at]=Ye,je=at}return!et&&je&&(G=je),je||!et&&G},te=function(Ve,Ye){if(Z(Ve))return Ve.clone();var qe=typeof Ye=="object"?Ye:{};return qe.date=Ve,qe.args=arguments,new me(qe)},Q=W;Q.l=J,Q.i=Z,Q.w=function(Ve,Ye){return te(Ve,{locale:Ye.$L,utc:Ye.$u,x:Ye.$x,$offset:Ye.$offset})};var me=function(){function Ve(qe){this.$L=J(qe.locale,null,!0),this.parse(qe),this.$x=this.$x||qe.x||{},this[K]=!0}var Ye=Ve.prototype;return Ye.parse=function(qe){this.$d=function(et){var je=et.date,Ke=et.utc;if(je===null)return new Date(NaN);if(Q.u(je))return new Date;if(je instanceof Date)return new Date(je);if(typeof je=="string"&&!/Z$/i.test(je)){var Je=je.match(z);if(Je){var at=Je[2]-1||0,nt=(Je[7]||"0").substring(0,3);return Ke?new Date(Date.UTC(Je[1],at,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,nt)):new Date(Je[1],at,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,nt)}}return new Date(je)}(qe),this.init()},Ye.init=function(){var qe=this.$d;this.$y=qe.getFullYear(),this.$M=qe.getMonth(),this.$D=qe.getDate(),this.$W=qe.getDay(),this.$H=qe.getHours(),this.$m=qe.getMinutes(),this.$s=qe.getSeconds(),this.$ms=qe.getMilliseconds()},Ye.$utils=function(){return Q},Ye.isValid=function(){return this.$d.toString()!==B},Ye.isSame=function(qe,et){var je=te(qe);return this.startOf(et)<=je&&je<=this.endOf(et)},Ye.isAfter=function(qe,et){return te(qe)<this.startOf(et)},Ye.isBefore=function(qe,et){return this.endOf(et)<te(qe)},Ye.$g=function(qe,et,je){return Q.u(qe)?this[et]:this.set(je,qe)},Ye.unix=function(){return Math.floor(this.valueOf()/1e3)},Ye.valueOf=function(){return this.$d.getTime()},Ye.startOf=function(qe,et){var je=this,Ke=!!Q.u(et)||et,Je=Q.p(qe),at=function(ft,He){var le=Q.w(je.$u?Date.UTC(je.$y,He,ft):new Date(je.$y,He,ft),je);return Ke?le:le.endOf(A)},nt=function(ft,He){return Q.w(je.toDate()[ft].apply(je.toDate("s"),(Ke?[0,0,0,0]:[23,59,59,999]).slice(He)),je)},ct=this.$W,pt=this.$M,rt=this.$D,ht="set"+(this.$u?"UTC":"");switch(Je){case E:return Ke?at(1,0):at(31,11);case M:return Ke?at(1,pt):at(0,pt+1);case _:var yt=this.$locale().weekStart||0,wt=(ct<yt?ct+7:ct)-yt;return at(Ke?rt-wt:rt+(6-wt),pt);case A:case R:return nt(ht+"Hours",0);case C:return nt(ht+"Minutes",1);case w:return nt(ht+"Seconds",2);case x:return nt(ht+"Milliseconds",3);default:return this.clone()}},Ye.endOf=function(qe){return this.startOf(qe,!1)},Ye.$set=function(qe,et){var je,Ke=Q.p(qe),Je="set"+(this.$u?"UTC":""),at=(je={},je[A]=Je+"Date",je[R]=Je+"Date",je[M]=Je+"Month",je[E]=Je+"FullYear",je[C]=Je+"Hours",je[w]=Je+"Minutes",je[x]=Je+"Seconds",je[g]=Je+"Milliseconds",je)[Ke],nt=Ke===A?this.$D+(et-this.$W):et;if(Ke===M||Ke===E){var ct=this.clone().set(R,1);ct.$d[at](nt),ct.init(),this.$d=ct.set(R,Math.min(this.$D,ct.daysInMonth())).$d}else at&&this.$d[at](nt);return this.init(),this},Ye.set=function(qe,et){return this.clone().$set(qe,et)},Ye.get=function(qe){return this[Q.p(qe)]()},Ye.add=function(qe,et){var je,Ke=this;qe=Number(qe);var Je=Q.p(et),at=function(pt){var rt=te(Ke);return Q.w(rt.date(rt.date()+Math.round(pt*qe)),Ke)};if(Je===M)return this.set(M,this.$M+qe);if(Je===E)return this.set(E,this.$y+qe);if(Je===A)return at(1);if(Je===_)return at(7);var nt=(je={},je[w]=m,je[C]=f,je[x]=d,je)[Je]||1,ct=this.$d.getTime()+qe*nt;return Q.w(ct,this)},Ye.subtract=function(qe,et){return this.add(-1*qe,et)},Ye.format=function(qe){var et=this,je=this.$locale();if(!this.isValid())return je.invalidDate||B;var Ke=qe||"YYYY-MM-DDTHH:mm:ssZ",Je=Q.z(this),at=this.$H,nt=this.$m,ct=this.$M,pt=je.weekdays,rt=je.months,ht=je.meridiem,yt=function(He,le,be,we){return He&&(He[le]||He(et,Ke))||be[le].slice(0,we)},wt=function(He){return Q.s(at%12||12,He,"0")},ft=ht||function(He,le,be){var we=He<12?"AM":"PM";return be?we.toLowerCase():we};return Ke.replace(F,function(He,le){return le||function(be){switch(be){case"YY":return String(et.$y).slice(-2);case"YYYY":return Q.s(et.$y,4,"0");case"M":return ct+1;case"MM":return Q.s(ct+1,2,"0");case"MMM":return yt(je.monthsShort,ct,rt,3);case"MMMM":return yt(rt,ct);case"D":return et.$D;case"DD":return Q.s(et.$D,2,"0");case"d":return String(et.$W);case"dd":return yt(je.weekdaysMin,et.$W,pt,2);case"ddd":return yt(je.weekdaysShort,et.$W,pt,3);case"dddd":return pt[et.$W];case"H":return String(at);case"HH":return Q.s(at,2,"0");case"h":return wt(1);case"hh":return wt(2);case"a":return ft(at,nt,!0);case"A":return ft(at,nt,!1);case"m":return String(nt);case"mm":return Q.s(nt,2,"0");case"s":return String(et.$s);case"ss":return Q.s(et.$s,2,"0");case"SSS":return Q.s(et.$ms,3,"0");case"Z":return Je}return null}(He)||Je.replace(":","")})},Ye.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ye.diff=function(qe,et,je){var Ke,Je=this,at=Q.p(et),nt=te(qe),ct=(nt.utcOffset()-this.utcOffset())*m,pt=this-nt,rt=function(){return Q.m(Je,nt)};switch(at){case E:Ke=rt()/12;break;case M:Ke=rt();break;case P:Ke=rt()/3;break;case _:Ke=(pt-ct)/6048e5;break;case A:Ke=(pt-ct)/864e5;break;case C:Ke=pt/f;break;case w:Ke=pt/m;break;case x:Ke=pt/d;break;default:Ke=pt}return je?Ke:Q.a(Ke)},Ye.daysInMonth=function(){return this.endOf(M).$D},Ye.$locale=function(){return q[this.$L]},Ye.locale=function(qe,et){if(!qe)return this.$L;var je=this.clone(),Ke=J(qe,et,!0);return Ke&&(je.$L=Ke),je},Ye.clone=function(){return Q.w(this.$d,this)},Ye.toDate=function(){return new Date(this.valueOf())},Ye.toJSON=function(){return this.isValid()?this.toISOString():null},Ye.toISOString=function(){return this.$d.toISOString()},Ye.toString=function(){return this.$d.toUTCString()},Ve}(),Xe=me.prototype;return te.prototype=Xe,[["$ms",g],["$s",x],["$m",w],["$H",C],["$W",A],["$M",M],["$y",E],["$D",R]].forEach(function(Ve){Xe[Ve[1]]=function(Ye){return this.$g(Ye,Ve[0],Ve[1])}}),te.extend=function(Ve,Ye){return Ve.$i||(Ve(Ye,me,te),Ve.$i=!0),te},te.locale=J,te.isDayjs=Z,te.unix=function(Ve){return te(1e3*Ve)},te.en=q[G],te.Ls=q,te.p={},te})})(dayjs_min$1);var dayjs_minExports$1=dayjs_min$1.exports;const dayjs$1=getDefaultExportFromCjs$1(dayjs_minExports$1);var utc$1={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal$1,function(){var d="minute",m=/[+-]\d\d(?::?\d\d)?/g,f=/([+-]|\d\d)/g;return function(g,x,w){var C=x.prototype;w.utc=function(B){var z={date:B,utc:!0,args:arguments};return new x(z)},C.utc=function(B){var z=w(this.toDate(),{locale:this.$L,utc:!0});return B?z.add(this.utcOffset(),d):z},C.local=function(){return w(this.toDate(),{locale:this.$L,utc:!1})};var A=C.parse;C.parse=function(B){B.utc&&(this.$u=!0),this.$utils().u(B.$offset)||(this.$offset=B.$offset),A.call(this,B)};var _=C.init;C.init=function(){if(this.$u){var B=this.$d;this.$y=B.getUTCFullYear(),this.$M=B.getUTCMonth(),this.$D=B.getUTCDate(),this.$W=B.getUTCDay(),this.$H=B.getUTCHours(),this.$m=B.getUTCMinutes(),this.$s=B.getUTCSeconds(),this.$ms=B.getUTCMilliseconds()}else _.call(this)};var M=C.utcOffset;C.utcOffset=function(B,z){var F=this.$utils().u;if(F(B))return this.$u?0:F(this.$offset)?M.call(this):this.$offset;if(typeof B=="string"&&(B=function(G){G===void 0&&(G="");var q=G.match(m);if(!q)return null;var K=(""+q[0]).match(f)||["-",0,0],Z=K[0],J=60*+K[1]+ +K[2];return J===0?0:Z==="+"?J:-J}(B),B===null))return this;var I=Math.abs(B)<=16?60*B:B,L=this;if(z)return L.$offset=I,L.$u=B===0,L;if(B!==0){var W=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(L=this.local().add(I+W,d)).$offset=I,L.$x.$localOffset=W}else L=this.utc();return L};var P=C.format;C.format=function(B){var z=B||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return P.call(this,z)},C.valueOf=function(){var B=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*B},C.isUTC=function(){return!!this.$u},C.toISOString=function(){return this.toDate().toISOString()},C.toString=function(){return this.toDate().toUTCString()};var E=C.toDate;C.toDate=function(B){return B==="s"&&this.$offset?w(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():E.call(this)};var R=C.diff;C.diff=function(B,z,F){if(B&&this.$u===B.$u)return R.call(this,B,z,F);var I=this.local(),L=w(B).local();return R.call(I,L,z,F)}}})})(utc$1);var utcExports=utc$1.exports;const utc=getDefaultExportFromCjs$1(utcExports);var timezone$1={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal$1,function(){var d={year:0,month:1,day:2,hour:3,minute:4,second:5},m={};return function(f,g,x){var w,C=function(P,E,R){R===void 0&&(R={});var B=new Date(P),z=function(F,I){I===void 0&&(I={});var L=I.timeZoneName||"short",W=F+"|"+L,G=m[W];return G||(G=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:F,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:L}),m[W]=G),G}(E,R);return z.formatToParts(B)},A=function(P,E){for(var R=C(P,E),B=[],z=0;z<R.length;z+=1){var F=R[z],I=F.type,L=F.value,W=d[I];W>=0&&(B[W]=parseInt(L,10))}var G=B[3],q=G===24?0:G,K=B[0]+"-"+B[1]+"-"+B[2]+" "+q+":"+B[4]+":"+B[5]+":000",Z=+P;return(x.utc(K).valueOf()-(Z-=Z%1e3))/6e4},_=g.prototype;_.tz=function(P,E){P===void 0&&(P=w);var R=this.utcOffset(),B=this.toDate(),z=B.toLocaleString("en-US",{timeZone:P}),F=Math.round((B-new Date(z))/1e3/60),I=x(z,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(B.getTimezoneOffset()/15)-F,!0);if(E){var L=I.utcOffset();I=I.add(R-L,"minute")}return I.$x.$timezone=P,I},_.offsetName=function(P){var E=this.$x.$timezone||x.tz.guess(),R=C(this.valueOf(),E,{timeZoneName:P}).find(function(B){return B.type.toLowerCase()==="timezonename"});return R&&R.value};var M=_.startOf;_.startOf=function(P,E){if(!this.$x||!this.$x.$timezone)return M.call(this,P,E);var R=x(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return M.call(R,P,E).tz(this.$x.$timezone,!0)},x.tz=function(P,E,R){var B=R&&E,z=R||E||w,F=A(+x(),z);if(typeof P!="string")return x(P).tz(z);var I=function(q,K,Z){var J=q-60*K*1e3,te=A(J,Z);if(K===te)return[J,K];var Q=A(J-=60*(te-K)*1e3,Z);return te===Q?[J,te]:[q-60*Math.min(te,Q)*1e3,Math.max(te,Q)]}(x.utc(P,B).valueOf(),F,z),L=I[0],W=I[1],G=x(L).utcOffset(W);return G.$x.$timezone=z,G},x.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},x.tz.setDefault=function(P){w=P}}})})(timezone$1);var timezoneExports=timezone$1.exports;const timezone=getDefaultExportFromCjs$1(timezoneExports);function getDateService(){return DefaultDateService}dayjs$1.extend(utc);dayjs$1.extend(timezone);const DefaultDateService={format:(a,s)=>dayjs$1(a).format(s),convertTime:(a,s)=>dayjs$1(a).tz(s).toDate(),addYears:(a,s)=>dayjs$1(a).add(s,"year").toDate(),addMonths:(a,s)=>dayjs$1(a).add(s,"month").toDate(),addTimespan:(a,s)=>{let d=dayjs$1(a);return s.days&&(d=d.add(s.days,"day")),s.hours&&(d=d.add(s.hours,"hour")),s.minutes&&(d=d.add(s.minutes,"minute")),s.seconds&&(d=d.add(s.seconds,"second")),s.milliseconds&&(d=d.add(s.milliseconds,"millisecond")),d.toDate()},dayOfWeek:a=>dayjs$1(a).day(),diff:(a,s)=>{const d=dayjs$1(a).diff(dayjs$1(s));return TimeSpan.fromMilliseconds(d)}},bitMethods={getBit(a){return this.data[getSlot(a)]&1<<getShift(a)?1:0},setBit(a){this.data[getSlot(a)]|=1<<getShift(a)},clearBit(a){this.data[getSlot(a)]&=~(1<<getShift(a))},toggleBit(a){this.data[getSlot(a)]^=1<<getShift(a)},getBitXY(a,s){return a>=this.width||s>=this.height?0:this.getBit(s*this.width+a)},setBitXY(a,s){this.setBit(s*this.width+a)},clearBitXY(a,s){this.clearBit(s*this.width+a)},toggleBitXY(a,s){this.toggleBit(s*this.width+a)}};function getSlot(a){return a>>3}function getShift(a){return 7-(a&7)}function setBitMethods(a){for(const s in bitMethods)a.prototype[s]=bitMethods[s]}function checkProcessable(a,s={}){let{bitDepth:d,alpha:m,colorModel:f,components:g,channels:x}=s;if(typeof a!="string"||a.length===0)throw new TypeError("processName must be a string");if(d&&(Array.isArray(d)||(d=[d]),!d.includes(this.bitDepth)))throw new TypeError(`The process: ${a} can only be applied if bit depth is in: ${d}`);if(m&&(Array.isArray(m)||(m=[m]),!m.includes(this.alpha)))throw new TypeError(`The process: ${a} can only be applied if alpha is in: ${m}`);if(f&&(Array.isArray(f)||(f=[f]),!f.includes(this.colorModel)))throw new TypeError(`The process: ${a} can only be applied if color model is in: ${f}`);if(g&&(Array.isArray(g)||(g=[g]),!g.includes(this.components))){let w=`The process: ${a} can only be applied if the number of components is in: ${g}`;throw g.length===1&&g[0]===1?new TypeError(`${w}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(w)}if(x&&(Array.isArray(x)||(x=[x]),!x.includes(this.channels)))throw new TypeError(`The process: ${a} can only be applied if the number of channels is in: ${x}`)}function createBlob(a,s){a=a||[],s=s||{},typeof s=="string"&&(s={type:s});try{return new Blob(a,s)}catch(g){if(g.name!=="TypeError")throw g;for(var d=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,m=new d,f=0;f<a.length;f+=1)m.append(a[f]);return m.getBlob(s.type)}}function dataURLToBlob(a){var s=a.match(/data:([^;]+)/)[1],d=a.replace(/^[^,]+,/,""),m=binaryStringToArrayBuffer(atob(d));return createBlob([m],{type:s})}function canvasToBlob(a,s,d){return typeof a.toBlob=="function"?new Promise(function(m){a.toBlob(m,s,d)}):Promise.resolve(dataURLToBlob(a.toDataURL(s,d)))}function binaryStringToArrayBuffer(a){for(var s=a.length,d=new ArrayBuffer(s),m=new Uint8Array(d),f=-1;++f<s;)m[f]=a.charCodeAt(f);return d}(function(a){if(a.TextEncoder&&a.TextDecoder)return!1;function s(m="utf-8"){if(m!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${m}') is invalid.`)}Object.defineProperty(s.prototype,"encoding",{value:"utf-8"}),s.prototype.encode=function(m,f={stream:!1}){if(f.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let g=0;const x=m.length;let w=0,C=Math.max(32,x+(x>>1)+7),A=new Uint8Array(C>>3<<3);for(;g<x;){let _=m.charCodeAt(g++);if(_>=55296&&_<=56319){if(g<x){const M=m.charCodeAt(g);(M&64512)===56320&&(++g,_=((_&1023)<<10)+(M&1023)+65536)}if(_>=55296&&_<=56319)continue}if(w+4>A.length){C+=8,C*=1+g/m.length*2,C=C>>3<<3;const M=new Uint8Array(C);M.set(A),A=M}if(_&4294967168)if(!(_&4294965248))A[w++]=_>>6&31|192;else if(!(_&4294901760))A[w++]=_>>12&15|224,A[w++]=_>>6&63|128;else if(!(_&4292870144))A[w++]=_>>18&7|240,A[w++]=_>>12&63|128,A[w++]=_>>6&63|128;else continue;else{A[w++]=_;continue}A[w++]=_&63|128}return A.slice(0,w)};function d(m="utf-8",f={fatal:!1}){if(m!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${m}') is invalid.`);if(f.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(d.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(d.prototype,"fatal",{value:!1}),Object.defineProperty(d.prototype,"ignoreBOM",{value:!1}),d.prototype.decode=function(m,f={stream:!1}){if(f.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const g=new Uint8Array(m);let x=0;const w=g.length,C=[];for(;x<w;){const A=g[x++];if(A===0)break;if(!(A&128))C.push(A);else if((A&224)===192){const _=g[x++]&63;C.push((A&31)<<6|_)}else if((A&240)===224){const _=g[x++]&63,M=g[x++]&63;C.push((A&31)<<12|_<<6|M)}else if((A&248)===240){const _=g[x++]&63,M=g[x++]&63,P=g[x++]&63;let E=(A&7)<<18|_<<12|M<<6|P;E>65535&&(E-=65536,C.push(E>>>10&1023|55296),E=56320|E&1023),C.push(E)}}return String.fromCharCode.apply(null,C)},a.TextEncoder=s,a.TextDecoder=d})(typeof window<"u"?window:typeof self<"u"?self:void 0);function decode$5(a,s="utf8"){return new TextDecoder(s).decode(a)}const encoder$1=new TextEncoder;function encode$3(a){return encoder$1.encode(a)}const defaultByteLength$1=1024*8,hostBigEndian=(()=>{const a=new Uint8Array(4),s=new Uint32Array(a.buffer);return!((s[0]=1)&a[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};let IOBuffer$4=class Fi{constructor(s=defaultByteLength$1,d={}){let m=!1;typeof s=="number"?s=new ArrayBuffer(s):(m=!0,this.lastWrittenByte=s.byteLength);const f=d.offset?d.offset>>>0:0,g=s.byteLength-f;let x=f;(ArrayBuffer.isView(s)||s instanceof Fi)&&(s.byteLength!==s.buffer.byteLength&&(x=s.byteOffset+f),s=s.buffer),m?this.lastWrittenByte=g:this.lastWrittenByte=0,this.buffer=s,this.length=g,this.byteLength=g,this.byteOffset=x,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,x,g),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const d=(this.offset+s)*2,m=new Uint8Array(d);m.set(new Uint8Array(this.buffer)),this.buffer=m.buffer,this.length=this.byteLength=d,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,d){const m=typedArrays[d].BYTES_PER_ELEMENT*s,f=this.byteOffset+this.offset,g=this.buffer.slice(f,f+m);if(this.littleEndian===hostBigEndian&&d!=="uint8"&&d!=="int8"){const w=new Uint8Array(this.buffer.slice(f,f+m));w.reverse();const C=new typedArrays[d](w.buffer);return this.offset+=m,C.reverse(),C}const x=new typedArrays[d](g);return this.offset+=m,x}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let d="";for(let m=0;m<s;m++)d+=this.readChar();return d}readUtf8(s=1){return decode$5(this.readBytes(s))}decodeText(s=1,d="utf-8"){return decode$5(this.readBytes(s),d)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let d=0;d<s.length;d++)this._data.setUint8(this.offset++,s[d]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let d=0;d<s.length;d++)this.writeUint8(s.charCodeAt(d));return this}writeUtf8(s){return this.writeBytes(encode$3(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};const IOBuffer$5=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer:IOBuffer$4},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(IOBuffer$5);var constants$4={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}};const{IOBuffer:IOBuffer$3}=require$$0$3,constants$3=constants$4,tableLeft=[];for(let a=0;a<=8;a++)tableLeft.push(255<<a);class BMPEncoder extends IOBuffer$3{constructor(s){if(s.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!s.height||!s.width)throw new Error("ImageData width and height are required");super(s.data),this.width=s.width,this.height=s.height,this.bitDepth=s.bitDepth,this.channels=s.channels,this.components=s.components}encode(){this.encoded=new IOBuffer$3,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const s=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(s),this.encoded.toArray()}writePixelArray(){let s=this.encoded;const d=Math.floor((this.bitDepth*this.width+31)/32)*4,m=Math.ceil(this.bitDepth*this.width/8),f=d-m,g=this.bitDepth*this.width%8,x=g===0?0:8-g,w=d*this.height;let C,A,_=0,M=0,P=8;s.mark(),A=this.readUint8();for(let E=this.height-1;E>=0;E--){const R=E===0;s.reset(),s.skip(E*d);for(let B=0;B<m;B++){const z=B===m-1;M<=x&&z?(s.writeByte(A<<M),(x===0||x===M)&&!R&&(C=A,A=this.readByte())):M===0?(C=A,A=this.readUint8(),s.writeByte(C)):(C=A,A=this.readUint8(),s.writeByte(C<<M&tableLeft[M]|A>>P)),z&&(_+=g||0,s.skip(f),M=_%8,P=8-M)}}d>m&&(s.reset(),s.skip(w-1),s.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(s){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(s)}writeBitmapV5Header(){const s=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(constants$3.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(s).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(constants$3.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(constants$3.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}var BMPEncoder_1=BMPEncoder;const Encoder=BMPEncoder_1;var encode$2=function(a){return new Encoder(a).encode()};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(a){let s=a.length;for(;--s>=0;)a[s]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(a,s,d,m,f){this.static_tree=a,this.extra_bits=s,this.extra_base=d,this.elems=m,this.max_length=f,this.has_stree=a&&a.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(a,s){this.dyn_tree=a,this.max_code=0,this.stat_desc=s}const d_code=a=>a<256?_dist_code[a]:_dist_code[256+(a>>>7)],put_short=(a,s)=>{a.pending_buf[a.pending++]=s&255,a.pending_buf[a.pending++]=s>>>8&255},send_bits=(a,s,d)=>{a.bi_valid>Buf_size-d?(a.bi_buf|=s<<a.bi_valid&65535,put_short(a,a.bi_buf),a.bi_buf=s>>Buf_size-a.bi_valid,a.bi_valid+=d-Buf_size):(a.bi_buf|=s<<a.bi_valid&65535,a.bi_valid+=d)},send_code=(a,s,d)=>{send_bits(a,d[s*2],d[s*2+1])},bi_reverse=(a,s)=>{let d=0;do d|=a&1,a>>>=1,d<<=1;while(--s>0);return d>>>1},bi_flush=a=>{a.bi_valid===16?(put_short(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},gen_bitlen=(a,s)=>{const d=s.dyn_tree,m=s.max_code,f=s.stat_desc.static_tree,g=s.stat_desc.has_stree,x=s.stat_desc.extra_bits,w=s.stat_desc.extra_base,C=s.stat_desc.max_length;let A,_,M,P,E,R,B=0;for(P=0;P<=MAX_BITS$1;P++)a.bl_count[P]=0;for(d[a.heap[a.heap_max]*2+1]=0,A=a.heap_max+1;A<HEAP_SIZE$1;A++)_=a.heap[A],P=d[d[_*2+1]*2+1]+1,P>C&&(P=C,B++),d[_*2+1]=P,!(_>m)&&(a.bl_count[P]++,E=0,_>=w&&(E=x[_-w]),R=d[_*2],a.opt_len+=R*(P+E),g&&(a.static_len+=R*(f[_*2+1]+E)));if(B!==0){do{for(P=C-1;a.bl_count[P]===0;)P--;a.bl_count[P]--,a.bl_count[P+1]+=2,a.bl_count[C]--,B-=2}while(B>0);for(P=C;P!==0;P--)for(_=a.bl_count[P];_!==0;)M=a.heap[--A],!(M>m)&&(d[M*2+1]!==P&&(a.opt_len+=(P-d[M*2+1])*d[M*2],d[M*2+1]=P),_--)}},gen_codes=(a,s,d)=>{const m=new Array(MAX_BITS$1+1);let f=0,g,x;for(g=1;g<=MAX_BITS$1;g++)f=f+d[g-1]<<1,m[g]=f;for(x=0;x<=s;x++){let w=a[x*2+1];w!==0&&(a[x*2]=bi_reverse(m[w]++,w))}},tr_static_init=()=>{let a,s,d,m,f;const g=new Array(MAX_BITS$1+1);for(d=0,m=0;m<LENGTH_CODES$1-1;m++)for(base_length[m]=d,a=0;a<1<<extra_lbits[m];a++)_length_code[d++]=m;for(_length_code[d-1]=m,f=0,m=0;m<16;m++)for(base_dist[m]=f,a=0;a<1<<extra_dbits[m];a++)_dist_code[f++]=m;for(f>>=7;m<D_CODES$1;m++)for(base_dist[m]=f<<7,a=0;a<1<<extra_dbits[m]-7;a++)_dist_code[256+f++]=m;for(s=0;s<=MAX_BITS$1;s++)g[s]=0;for(a=0;a<=143;)static_ltree[a*2+1]=8,a++,g[8]++;for(;a<=255;)static_ltree[a*2+1]=9,a++,g[9]++;for(;a<=279;)static_ltree[a*2+1]=7,a++,g[7]++;for(;a<=287;)static_ltree[a*2+1]=8,a++,g[8]++;for(gen_codes(static_ltree,L_CODES$1+1,g),a=0;a<D_CODES$1;a++)static_dtree[a*2+1]=5,static_dtree[a*2]=bi_reverse(a,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=a=>{let s;for(s=0;s<L_CODES$1;s++)a.dyn_ltree[s*2]=0;for(s=0;s<D_CODES$1;s++)a.dyn_dtree[s*2]=0;for(s=0;s<BL_CODES$1;s++)a.bl_tree[s*2]=0;a.dyn_ltree[END_BLOCK*2]=1,a.opt_len=a.static_len=0,a.sym_next=a.matches=0},bi_windup=a=>{a.bi_valid>8?put_short(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},smaller=(a,s,d,m)=>{const f=s*2,g=d*2;return a[f]<a[g]||a[f]===a[g]&&m[s]<=m[d]},pqdownheap=(a,s,d)=>{const m=a.heap[d];let f=d<<1;for(;f<=a.heap_len&&(f<a.heap_len&&smaller(s,a.heap[f+1],a.heap[f],a.depth)&&f++,!smaller(s,m,a.heap[f],a.depth));)a.heap[d]=a.heap[f],d=f,f<<=1;a.heap[d]=m},compress_block=(a,s,d)=>{let m,f,g=0,x,w;if(a.sym_next!==0)do m=a.pending_buf[a.sym_buf+g++]&255,m+=(a.pending_buf[a.sym_buf+g++]&255)<<8,f=a.pending_buf[a.sym_buf+g++],m===0?send_code(a,f,s):(x=_length_code[f],send_code(a,x+LITERALS$1+1,s),w=extra_lbits[x],w!==0&&(f-=base_length[x],send_bits(a,f,w)),m--,x=d_code(m),send_code(a,x,d),w=extra_dbits[x],w!==0&&(m-=base_dist[x],send_bits(a,m,w)));while(g<a.sym_next);send_code(a,END_BLOCK,s)},build_tree=(a,s)=>{const d=s.dyn_tree,m=s.stat_desc.static_tree,f=s.stat_desc.has_stree,g=s.stat_desc.elems;let x,w,C=-1,A;for(a.heap_len=0,a.heap_max=HEAP_SIZE$1,x=0;x<g;x++)d[x*2]!==0?(a.heap[++a.heap_len]=C=x,a.depth[x]=0):d[x*2+1]=0;for(;a.heap_len<2;)A=a.heap[++a.heap_len]=C<2?++C:0,d[A*2]=1,a.depth[A]=0,a.opt_len--,f&&(a.static_len-=m[A*2+1]);for(s.max_code=C,x=a.heap_len>>1;x>=1;x--)pqdownheap(a,d,x);A=g;do x=a.heap[1],a.heap[1]=a.heap[a.heap_len--],pqdownheap(a,d,1),w=a.heap[1],a.heap[--a.heap_max]=x,a.heap[--a.heap_max]=w,d[A*2]=d[x*2]+d[w*2],a.depth[A]=(a.depth[x]>=a.depth[w]?a.depth[x]:a.depth[w])+1,d[x*2+1]=d[w*2+1]=A,a.heap[1]=A++,pqdownheap(a,d,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],gen_bitlen(a,s),gen_codes(d,C,a.bl_count)},scan_tree=(a,s,d)=>{let m,f=-1,g,x=s[0*2+1],w=0,C=7,A=4;for(x===0&&(C=138,A=3),s[(d+1)*2+1]=65535,m=0;m<=d;m++)g=x,x=s[(m+1)*2+1],!(++w<C&&g===x)&&(w<A?a.bl_tree[g*2]+=w:g!==0?(g!==f&&a.bl_tree[g*2]++,a.bl_tree[REP_3_6*2]++):w<=10?a.bl_tree[REPZ_3_10*2]++:a.bl_tree[REPZ_11_138*2]++,w=0,f=g,x===0?(C=138,A=3):g===x?(C=6,A=3):(C=7,A=4))},send_tree=(a,s,d)=>{let m,f=-1,g,x=s[0*2+1],w=0,C=7,A=4;for(x===0&&(C=138,A=3),m=0;m<=d;m++)if(g=x,x=s[(m+1)*2+1],!(++w<C&&g===x)){if(w<A)do send_code(a,g,a.bl_tree);while(--w!==0);else g!==0?(g!==f&&(send_code(a,g,a.bl_tree),w--),send_code(a,REP_3_6,a.bl_tree),send_bits(a,w-3,2)):w<=10?(send_code(a,REPZ_3_10,a.bl_tree),send_bits(a,w-3,3)):(send_code(a,REPZ_11_138,a.bl_tree),send_bits(a,w-11,7));w=0,f=g,x===0?(C=138,A=3):g===x?(C=6,A=3):(C=7,A=4)}},build_bl_tree=a=>{let s;for(scan_tree(a,a.dyn_ltree,a.l_desc.max_code),scan_tree(a,a.dyn_dtree,a.d_desc.max_code),build_tree(a,a.bl_desc),s=BL_CODES$1-1;s>=3&&a.bl_tree[bl_order[s]*2+1]===0;s--);return a.opt_len+=3*(s+1)+5+5+4,s},send_all_trees=(a,s,d,m)=>{let f;for(send_bits(a,s-257,5),send_bits(a,d-1,5),send_bits(a,m-4,4),f=0;f<m;f++)send_bits(a,a.bl_tree[bl_order[f]*2+1],3);send_tree(a,a.dyn_ltree,s-1),send_tree(a,a.dyn_dtree,d-1)},detect_data_type=a=>{let s=4093624447,d;for(d=0;d<=31;d++,s>>>=1)if(s&1&&a.dyn_ltree[d*2]!==0)return Z_BINARY;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return Z_TEXT;for(d=32;d<LITERALS$1;d++)if(a.dyn_ltree[d*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=a=>{static_init_done||(tr_static_init(),static_init_done=!0),a.l_desc=new TreeDesc(a.dyn_ltree,static_l_desc),a.d_desc=new TreeDesc(a.dyn_dtree,static_d_desc),a.bl_desc=new TreeDesc(a.bl_tree,static_bl_desc),a.bi_buf=0,a.bi_valid=0,init_block(a)},_tr_stored_block$1=(a,s,d,m)=>{send_bits(a,(STORED_BLOCK<<1)+(m?1:0),3),bi_windup(a),put_short(a,d),put_short(a,~d),d&&a.pending_buf.set(a.window.subarray(s,s+d),a.pending),a.pending+=d},_tr_align$1=a=>{send_bits(a,STATIC_TREES<<1,3),send_code(a,END_BLOCK,static_ltree),bi_flush(a)},_tr_flush_block$1=(a,s,d,m)=>{let f,g,x=0;a.level>0?(a.strm.data_type===Z_UNKNOWN$1&&(a.strm.data_type=detect_data_type(a)),build_tree(a,a.l_desc),build_tree(a,a.d_desc),x=build_bl_tree(a),f=a.opt_len+3+7>>>3,g=a.static_len+3+7>>>3,g<=f&&(f=g)):f=g=d+5,d+4<=f&&s!==-1?_tr_stored_block$1(a,s,d,m):a.strategy===Z_FIXED$1||g===f?(send_bits(a,(STATIC_TREES<<1)+(m?1:0),3),compress_block(a,static_ltree,static_dtree)):(send_bits(a,(DYN_TREES<<1)+(m?1:0),3),send_all_trees(a,a.l_desc.max_code+1,a.d_desc.max_code+1,x+1),compress_block(a,a.dyn_ltree,a.dyn_dtree)),init_block(a),m&&bi_windup(a)},_tr_tally$1=(a,s,d)=>(a.pending_buf[a.sym_buf+a.sym_next++]=s,a.pending_buf[a.sym_buf+a.sym_next++]=s>>8,a.pending_buf[a.sym_buf+a.sym_next++]=d,s===0?a.dyn_ltree[d*2]++:(a.matches++,s--,a.dyn_ltree[(_length_code[d]+LITERALS$1+1)*2]++,a.dyn_dtree[d_code(s)*2]++),a.sym_next===a.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(a,s,d,m)=>{let f=a&65535|0,g=a>>>16&65535|0,x=0;for(;d!==0;){x=d>2e3?2e3:d,d-=x;do f=f+s[m++]|0,g=g+f|0;while(--x);f%=65521,g%=65521}return f|g<<16|0};var adler32_1=adler32;const makeTable=()=>{let a,s=[];for(var d=0;d<256;d++){a=d;for(var m=0;m<8;m++)a=a&1?3988292384^a>>>1:a>>>1;s[d]=a}return s},crcTable$1=new Uint32Array(makeTable()),crc32=(a,s,d,m)=>{const f=crcTable$1,g=m+d;a^=-1;for(let x=m;x<g;x++)a=a>>>8^f[(a^s[x])&255];return a^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(a,s)=>(a.msg=messages[s],s),rank=a=>a*2-(a>4?9:0),zero=a=>{let s=a.length;for(;--s>=0;)a[s]=0},slide_hash=a=>{let s,d,m,f=a.w_size;s=a.hash_size,m=s;do d=a.head[--m],a.head[m]=d>=f?d-f:0;while(--s);s=f,m=s;do d=a.prev[--m],a.prev[m]=d>=f?d-f:0;while(--s)};let HASH_ZLIB=(a,s,d)=>(s<<a.hash_shift^d)&a.hash_mask,HASH=HASH_ZLIB;const flush_pending=a=>{const s=a.state;let d=s.pending;d>a.avail_out&&(d=a.avail_out),d!==0&&(a.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+d),a.next_out),a.next_out+=d,s.pending_out+=d,a.total_out+=d,a.avail_out-=d,s.pending-=d,s.pending===0&&(s.pending_out=0))},flush_block_only=(a,s)=>{_tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,s),a.block_start=a.strstart,flush_pending(a.strm)},put_byte=(a,s)=>{a.pending_buf[a.pending++]=s},putShortMSB=(a,s)=>{a.pending_buf[a.pending++]=s>>>8&255,a.pending_buf[a.pending++]=s&255},read_buf=(a,s,d,m)=>{let f=a.avail_in;return f>m&&(f=m),f===0?0:(a.avail_in-=f,s.set(a.input.subarray(a.next_in,a.next_in+f),d),a.state.wrap===1?a.adler=adler32_1(a.adler,s,f,d):a.state.wrap===2&&(a.adler=crc32_1(a.adler,s,f,d)),a.next_in+=f,a.total_in+=f,f)},longest_match=(a,s)=>{let d=a.max_chain_length,m=a.strstart,f,g,x=a.prev_length,w=a.nice_match;const C=a.strstart>a.w_size-MIN_LOOKAHEAD?a.strstart-(a.w_size-MIN_LOOKAHEAD):0,A=a.window,_=a.w_mask,M=a.prev,P=a.strstart+MAX_MATCH;let E=A[m+x-1],R=A[m+x];a.prev_length>=a.good_match&&(d>>=2),w>a.lookahead&&(w=a.lookahead);do if(f=s,!(A[f+x]!==R||A[f+x-1]!==E||A[f]!==A[m]||A[++f]!==A[m+1])){m+=2,f++;do;while(A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&A[++m]===A[++f]&&m<P);if(g=MAX_MATCH-(P-m),m=P-MAX_MATCH,g>x){if(a.match_start=s,x=g,g>=w)break;E=A[m+x-1],R=A[m+x]}}while((s=M[s&_])>C&&--d!==0);return x<=a.lookahead?x:a.lookahead},fill_window=a=>{const s=a.w_size;let d,m,f;do{if(m=a.window_size-a.lookahead-a.strstart,a.strstart>=s+(s-MIN_LOOKAHEAD)&&(a.window.set(a.window.subarray(s,s+s-m),0),a.match_start-=s,a.strstart-=s,a.block_start-=s,a.insert>a.strstart&&(a.insert=a.strstart),slide_hash(a),m+=s),a.strm.avail_in===0)break;if(d=read_buf(a.strm,a.window,a.strstart+a.lookahead,m),a.lookahead+=d,a.lookahead+a.insert>=MIN_MATCH)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=HASH(a,a.ins_h,a.window[f+1]);a.insert&&(a.ins_h=HASH(a,a.ins_h,a.window[f+MIN_MATCH-1]),a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<MIN_MATCH)););}while(a.lookahead<MIN_LOOKAHEAD&&a.strm.avail_in!==0)},deflate_stored=(a,s)=>{let d=a.pending_buf_size-5>a.w_size?a.w_size:a.pending_buf_size-5,m,f,g,x=0,w=a.strm.avail_in;do{if(m=65535,g=a.bi_valid+42>>3,a.strm.avail_out<g||(g=a.strm.avail_out-g,f=a.strstart-a.block_start,m>f+a.strm.avail_in&&(m=f+a.strm.avail_in),m>g&&(m=g),m<d&&(m===0&&s!==Z_FINISH$3||s===Z_NO_FLUSH$2||m!==f+a.strm.avail_in)))break;x=s===Z_FINISH$3&&m===f+a.strm.avail_in?1:0,_tr_stored_block(a,0,0,x),a.pending_buf[a.pending-4]=m,a.pending_buf[a.pending-3]=m>>8,a.pending_buf[a.pending-2]=~m,a.pending_buf[a.pending-1]=~m>>8,flush_pending(a.strm),f&&(f>m&&(f=m),a.strm.output.set(a.window.subarray(a.block_start,a.block_start+f),a.strm.next_out),a.strm.next_out+=f,a.strm.avail_out-=f,a.strm.total_out+=f,a.block_start+=f,m-=f),m&&(read_buf(a.strm,a.strm.output,a.strm.next_out,m),a.strm.next_out+=m,a.strm.avail_out-=m,a.strm.total_out+=m)}while(x===0);return w-=a.strm.avail_in,w&&(w>=a.w_size?(a.matches=2,a.window.set(a.strm.input.subarray(a.strm.next_in-a.w_size,a.strm.next_in),0),a.strstart=a.w_size,a.insert=a.strstart):(a.window_size-a.strstart<=w&&(a.strstart-=a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+a.strstart),0),a.matches<2&&a.matches++,a.insert>a.strstart&&(a.insert=a.strstart)),a.window.set(a.strm.input.subarray(a.strm.next_in-w,a.strm.next_in),a.strstart),a.strstart+=w,a.insert+=w>a.w_size-a.insert?a.w_size-a.insert:w),a.block_start=a.strstart),a.high_water<a.strstart&&(a.high_water=a.strstart),x?BS_FINISH_DONE:s!==Z_NO_FLUSH$2&&s!==Z_FINISH$3&&a.strm.avail_in===0&&a.strstart===a.block_start?BS_BLOCK_DONE:(g=a.window_size-a.strstart,a.strm.avail_in>g&&a.block_start>=a.w_size&&(a.block_start-=a.w_size,a.strstart-=a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+a.strstart),0),a.matches<2&&a.matches++,g+=a.w_size,a.insert>a.strstart&&(a.insert=a.strstart)),g>a.strm.avail_in&&(g=a.strm.avail_in),g&&(read_buf(a.strm,a.window,a.strstart,g),a.strstart+=g,a.insert+=g>a.w_size-a.insert?a.w_size-a.insert:g),a.high_water<a.strstart&&(a.high_water=a.strstart),g=a.bi_valid+42>>3,g=a.pending_buf_size-g>65535?65535:a.pending_buf_size-g,d=g>a.w_size?a.w_size:g,f=a.strstart-a.block_start,(f>=d||(f||s===Z_FINISH$3)&&s!==Z_NO_FLUSH$2&&a.strm.avail_in===0&&f<=g)&&(m=f>g?g:f,x=s===Z_FINISH$3&&a.strm.avail_in===0&&m===f?1:0,_tr_stored_block(a,a.block_start,m,x),a.block_start+=m,flush_pending(a.strm)),x?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(a,s)=>{let d,m;for(;;){if(a.lookahead<MIN_LOOKAHEAD){if(fill_window(a),a.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH$2)return BS_NEED_MORE;if(a.lookahead===0)break}if(d=0,a.lookahead>=MIN_MATCH&&(a.ins_h=HASH(a,a.ins_h,a.window[a.strstart+MIN_MATCH-1]),d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),d!==0&&a.strstart-d<=a.w_size-MIN_LOOKAHEAD&&(a.match_length=longest_match(a,d)),a.match_length>=MIN_MATCH)if(m=_tr_tally(a,a.strstart-a.match_start,a.match_length-MIN_MATCH),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=MIN_MATCH){a.match_length--;do a.strstart++,a.ins_h=HASH(a,a.ins_h,a.window[a.strstart+MIN_MATCH-1]),d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=HASH(a,a.ins_h,a.window[a.strstart+1]);else m=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(m&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=a.strstart<MIN_MATCH-1?a.strstart:MIN_MATCH-1,s===Z_FINISH$3?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.sym_next&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(a,s)=>{let d,m,f;for(;;){if(a.lookahead<MIN_LOOKAHEAD){if(fill_window(a),a.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH$2)return BS_NEED_MORE;if(a.lookahead===0)break}if(d=0,a.lookahead>=MIN_MATCH&&(a.ins_h=HASH(a,a.ins_h,a.window[a.strstart+MIN_MATCH-1]),d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=MIN_MATCH-1,d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-MIN_LOOKAHEAD&&(a.match_length=longest_match(a,d),a.match_length<=5&&(a.strategy===Z_FILTERED||a.match_length===MIN_MATCH&&a.strstart-a.match_start>4096)&&(a.match_length=MIN_MATCH-1)),a.prev_length>=MIN_MATCH&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-MIN_MATCH,m=_tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-MIN_MATCH),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=HASH(a,a.ins_h,a.window[a.strstart+MIN_MATCH-1]),d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=MIN_MATCH-1,a.strstart++,m&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}else if(a.match_available){if(m=_tr_tally(a,0,a.window[a.strstart-1]),m&&flush_block_only(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return BS_NEED_MORE}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(m=_tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<MIN_MATCH-1?a.strstart:MIN_MATCH-1,s===Z_FINISH$3?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.sym_next&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(a,s)=>{let d,m,f,g;const x=a.window;for(;;){if(a.lookahead<=MAX_MATCH){if(fill_window(a),a.lookahead<=MAX_MATCH&&s===Z_NO_FLUSH$2)return BS_NEED_MORE;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=MIN_MATCH&&a.strstart>0&&(f=a.strstart-1,m=x[f],m===x[++f]&&m===x[++f]&&m===x[++f])){g=a.strstart+MAX_MATCH;do;while(m===x[++f]&&m===x[++f]&&m===x[++f]&&m===x[++f]&&m===x[++f]&&m===x[++f]&&m===x[++f]&&m===x[++f]&&f<g);a.match_length=MAX_MATCH-(g-f),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=MIN_MATCH?(d=_tr_tally(a,1,a.match_length-MIN_MATCH),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),d&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=0,s===Z_FINISH$3?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.sym_next&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(a,s)=>{let d;for(;;){if(a.lookahead===0&&(fill_window(a),a.lookahead===0)){if(s===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(a.match_length=0,d=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,d&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=0,s===Z_FINISH$3?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.sym_next&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(a,s,d,m,f){this.good_length=a,this.max_lazy=s,this.nice_length=d,this.max_chain=m,this.func=f}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=a=>{a.window_size=2*a.w_size,zero(a.head),a.max_lazy_match=configuration_table[a.level].max_lazy,a.good_match=configuration_table[a.level].good_length,a.nice_match=configuration_table[a.level].nice_length,a.max_chain_length=configuration_table[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=MIN_MATCH-1,a.match_available=0,a.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=a=>{if(!a)return 1;const s=a.state;return!s||s.strm!==a||s.status!==INIT_STATE&&s.status!==GZIP_STATE&&s.status!==EXTRA_STATE&&s.status!==NAME_STATE&&s.status!==COMMENT_STATE&&s.status!==HCRC_STATE&&s.status!==BUSY_STATE&&s.status!==FINISH_STATE?1:0},deflateResetKeep=a=>{if(deflateStateCheck(a))return err(a,Z_STREAM_ERROR$2);a.total_in=a.total_out=0,a.data_type=Z_UNKNOWN;const s=a.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap===2?GZIP_STATE:s.wrap?INIT_STATE:BUSY_STATE,a.adler=s.wrap===2?0:1,s.last_flush=-2,_tr_init(s),Z_OK$3},deflateReset=a=>{const s=deflateResetKeep(a);return s===Z_OK$3&&lm_init(a.state),s},deflateSetHeader=(a,s)=>deflateStateCheck(a)||a.state.wrap!==2?Z_STREAM_ERROR$2:(a.state.gzhead=s,Z_OK$3),deflateInit2=(a,s,d,m,f,g)=>{if(!a)return Z_STREAM_ERROR$2;let x=1;if(s===Z_DEFAULT_COMPRESSION$1&&(s=6),m<0?(x=0,m=-m):m>15&&(x=2,m-=16),f<1||f>MAX_MEM_LEVEL||d!==Z_DEFLATED$2||m<8||m>15||s<0||s>9||g<0||g>Z_FIXED||m===8&&x!==1)return err(a,Z_STREAM_ERROR$2);m===8&&(m=9);const w=new DeflateState;return a.state=w,w.strm=a,w.status=INIT_STATE,w.wrap=x,w.gzhead=null,w.w_bits=m,w.w_size=1<<w.w_bits,w.w_mask=w.w_size-1,w.hash_bits=f+7,w.hash_size=1<<w.hash_bits,w.hash_mask=w.hash_size-1,w.hash_shift=~~((w.hash_bits+MIN_MATCH-1)/MIN_MATCH),w.window=new Uint8Array(w.w_size*2),w.head=new Uint16Array(w.hash_size),w.prev=new Uint16Array(w.w_size),w.lit_bufsize=1<<f+6,w.pending_buf_size=w.lit_bufsize*4,w.pending_buf=new Uint8Array(w.pending_buf_size),w.sym_buf=w.lit_bufsize,w.sym_end=(w.lit_bufsize-1)*3,w.level=s,w.strategy=g,w.method=d,deflateReset(a)},deflateInit=(a,s)=>deflateInit2(a,s,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(a,s)=>{if(deflateStateCheck(a)||s>Z_BLOCK$1||s<0)return a?err(a,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const d=a.state;if(!a.output||a.avail_in!==0&&!a.input||d.status===FINISH_STATE&&s!==Z_FINISH$3)return err(a,a.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const m=d.last_flush;if(d.last_flush=s,d.pending!==0){if(flush_pending(a),a.avail_out===0)return d.last_flush=-1,Z_OK$3}else if(a.avail_in===0&&rank(s)<=rank(m)&&s!==Z_FINISH$3)return err(a,Z_BUF_ERROR$1);if(d.status===FINISH_STATE&&a.avail_in!==0)return err(a,Z_BUF_ERROR$1);if(d.status===INIT_STATE&&d.wrap===0&&(d.status=BUSY_STATE),d.status===INIT_STATE){let f=Z_DEFLATED$2+(d.w_bits-8<<4)<<8,g=-1;if(d.strategy>=Z_HUFFMAN_ONLY||d.level<2?g=0:d.level<6?g=1:d.level===6?g=2:g=3,f|=g<<6,d.strstart!==0&&(f|=PRESET_DICT),f+=31-f%31,putShortMSB(d,f),d.strstart!==0&&(putShortMSB(d,a.adler>>>16),putShortMSB(d,a.adler&65535)),a.adler=1,d.status=BUSY_STATE,flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3}if(d.status===GZIP_STATE){if(a.adler=0,put_byte(d,31),put_byte(d,139),put_byte(d,8),d.gzhead)put_byte(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),put_byte(d,d.gzhead.time&255),put_byte(d,d.gzhead.time>>8&255),put_byte(d,d.gzhead.time>>16&255),put_byte(d,d.gzhead.time>>24&255),put_byte(d,d.level===9?2:d.strategy>=Z_HUFFMAN_ONLY||d.level<2?4:0),put_byte(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(put_byte(d,d.gzhead.extra.length&255),put_byte(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=EXTRA_STATE;else if(put_byte(d,0),put_byte(d,0),put_byte(d,0),put_byte(d,0),put_byte(d,0),put_byte(d,d.level===9?2:d.strategy>=Z_HUFFMAN_ONLY||d.level<2?4:0),put_byte(d,OS_CODE),d.status=BUSY_STATE,flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3}if(d.status===EXTRA_STATE){if(d.gzhead.extra){let f=d.pending,g=(d.gzhead.extra.length&65535)-d.gzindex;for(;d.pending+g>d.pending_buf_size;){let w=d.pending_buf_size-d.pending;if(d.pending_buf.set(d.gzhead.extra.subarray(d.gzindex,d.gzindex+w),d.pending),d.pending=d.pending_buf_size,d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f)),d.gzindex+=w,flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3;f=0,g-=w}let x=new Uint8Array(d.gzhead.extra);d.pending_buf.set(x.subarray(d.gzindex,d.gzindex+g),d.pending),d.pending+=g,d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f)),d.gzindex=0}d.status=NAME_STATE}if(d.status===NAME_STATE){if(d.gzhead.name){let f=d.pending,g;do{if(d.pending===d.pending_buf_size){if(d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f)),flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3;f=0}d.gzindex<d.gzhead.name.length?g=d.gzhead.name.charCodeAt(d.gzindex++)&255:g=0,put_byte(d,g)}while(g!==0);d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f)),d.gzindex=0}d.status=COMMENT_STATE}if(d.status===COMMENT_STATE){if(d.gzhead.comment){let f=d.pending,g;do{if(d.pending===d.pending_buf_size){if(d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f)),flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3;f=0}d.gzindex<d.gzhead.comment.length?g=d.gzhead.comment.charCodeAt(d.gzindex++)&255:g=0,put_byte(d,g)}while(g!==0);d.gzhead.hcrc&&d.pending>f&&(a.adler=crc32_1(a.adler,d.pending_buf,d.pending-f,f))}d.status=HCRC_STATE}if(d.status===HCRC_STATE){if(d.gzhead.hcrc){if(d.pending+2>d.pending_buf_size&&(flush_pending(a),d.pending!==0))return d.last_flush=-1,Z_OK$3;put_byte(d,a.adler&255),put_byte(d,a.adler>>8&255),a.adler=0}if(d.status=BUSY_STATE,flush_pending(a),d.pending!==0)return d.last_flush=-1,Z_OK$3}if(a.avail_in!==0||d.lookahead!==0||s!==Z_NO_FLUSH$2&&d.status!==FINISH_STATE){let f=d.level===0?deflate_stored(d,s):d.strategy===Z_HUFFMAN_ONLY?deflate_huff(d,s):d.strategy===Z_RLE?deflate_rle(d,s):configuration_table[d.level].func(d,s);if((f===BS_FINISH_STARTED||f===BS_FINISH_DONE)&&(d.status=FINISH_STATE),f===BS_NEED_MORE||f===BS_FINISH_STARTED)return a.avail_out===0&&(d.last_flush=-1),Z_OK$3;if(f===BS_BLOCK_DONE&&(s===Z_PARTIAL_FLUSH?_tr_align(d):s!==Z_BLOCK$1&&(_tr_stored_block(d,0,0,!1),s===Z_FULL_FLUSH$1&&(zero(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),flush_pending(a),a.avail_out===0))return d.last_flush=-1,Z_OK$3}return s!==Z_FINISH$3?Z_OK$3:d.wrap<=0?Z_STREAM_END$3:(d.wrap===2?(put_byte(d,a.adler&255),put_byte(d,a.adler>>8&255),put_byte(d,a.adler>>16&255),put_byte(d,a.adler>>24&255),put_byte(d,a.total_in&255),put_byte(d,a.total_in>>8&255),put_byte(d,a.total_in>>16&255),put_byte(d,a.total_in>>24&255)):(putShortMSB(d,a.adler>>>16),putShortMSB(d,a.adler&65535)),flush_pending(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=a=>{if(deflateStateCheck(a))return Z_STREAM_ERROR$2;const s=a.state.status;return a.state=null,s===BUSY_STATE?err(a,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(a,s)=>{let d=s.length;if(deflateStateCheck(a))return Z_STREAM_ERROR$2;const m=a.state,f=m.wrap;if(f===2||f===1&&m.status!==INIT_STATE||m.lookahead)return Z_STREAM_ERROR$2;if(f===1&&(a.adler=adler32_1(a.adler,s,d,0)),m.wrap=0,d>=m.w_size){f===0&&(zero(m.head),m.strstart=0,m.block_start=0,m.insert=0);let C=new Uint8Array(m.w_size);C.set(s.subarray(d-m.w_size,d),0),s=C,d=m.w_size}const g=a.avail_in,x=a.next_in,w=a.input;for(a.avail_in=d,a.next_in=0,a.input=s,fill_window(m);m.lookahead>=MIN_MATCH;){let C=m.strstart,A=m.lookahead-(MIN_MATCH-1);do m.ins_h=HASH(m,m.ins_h,m.window[C+MIN_MATCH-1]),m.prev[C&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=C,C++;while(--A);m.strstart=C,m.lookahead=MIN_MATCH-1,fill_window(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=MIN_MATCH-1,m.match_available=0,a.next_in=x,a.input=w,a.avail_in=g,m.wrap=f,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(a,s)=>Object.prototype.hasOwnProperty.call(a,s);var assign=function(a){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const d=s.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(const m in d)_has(d,m)&&(a[m]=d[m])}}return a},flattenChunks=a=>{let s=0;for(let m=0,f=a.length;m<f;m++)s+=a[m].length;const d=new Uint8Array(s);for(let m=0,f=0,g=a.length;m<g;m++){let x=a[m];d.set(x,f),f+=x.length}return d},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let a=0;a<256;a++)_utf8len[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let s,d,m,f,g,x=a.length,w=0;for(f=0;f<x;f++)d=a.charCodeAt(f),(d&64512)===55296&&f+1<x&&(m=a.charCodeAt(f+1),(m&64512)===56320&&(d=65536+(d-55296<<10)+(m-56320),f++)),w+=d<128?1:d<2048?2:d<65536?3:4;for(s=new Uint8Array(w),g=0,f=0;g<w;f++)d=a.charCodeAt(f),(d&64512)===55296&&f+1<x&&(m=a.charCodeAt(f+1),(m&64512)===56320&&(d=65536+(d-55296<<10)+(m-56320),f++)),d<128?s[g++]=d:d<2048?(s[g++]=192|d>>>6,s[g++]=128|d&63):d<65536?(s[g++]=224|d>>>12,s[g++]=128|d>>>6&63,s[g++]=128|d&63):(s[g++]=240|d>>>18,s[g++]=128|d>>>12&63,s[g++]=128|d>>>6&63,s[g++]=128|d&63);return s};const buf2binstring=(a,s)=>{if(s<65534&&a.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let d="";for(let m=0;m<s;m++)d+=String.fromCharCode(a[m]);return d};var buf2string=(a,s)=>{const d=s||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,s));let m,f;const g=new Array(d*2);for(f=0,m=0;m<d;){let x=a[m++];if(x<128){g[f++]=x;continue}let w=_utf8len[x];if(w>4){g[f++]=65533,m+=w-1;continue}for(x&=w===2?31:w===3?15:7;w>1&&m<d;)x=x<<6|a[m++]&63,w--;if(w>1){g[f++]=65533;continue}x<65536?g[f++]=x:(x-=65536,g[f++]=55296|x>>10&1023,g[f++]=56320|x&1023)}return buf2binstring(g,f)},utf8border=(a,s)=>{s=s||a.length,s>a.length&&(s=a.length);let d=s-1;for(;d>=0&&(a[d]&192)===128;)d--;return d<0||d===0?s:d+_utf8len[a[d]]>s?d:s},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(a){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},a||{});let s=this.options;s.raw&&s.windowBits>0?s.windowBits=-s.windowBits:s.gzip&&s.windowBits>0&&s.windowBits<16&&(s.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let d=deflate_1$2.deflateInit2(this.strm,s.level,s.method,s.windowBits,s.memLevel,s.strategy);if(d!==Z_OK$2)throw new Error(messages[d]);if(s.header&&deflate_1$2.deflateSetHeader(this.strm,s.header),s.dictionary){let m;if(typeof s.dictionary=="string"?m=strings.string2buf(s.dictionary):toString$1$1.call(s.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(s.dictionary):m=s.dictionary,d=deflate_1$2.deflateSetDictionary(this.strm,m),d!==Z_OK$2)throw new Error(messages[d]);this._dict_set=!0}}Deflate$1.prototype.push=function(a,s){const d=this.strm,m=this.options.chunkSize;let f,g;if(this.ended)return!1;for(s===~~s?g=s:g=s===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof a=="string"?d.input=strings.string2buf(a):toString$1$1.call(a)==="[object ArrayBuffer]"?d.input=new Uint8Array(a):d.input=a,d.next_in=0,d.avail_in=d.input.length;;){if(d.avail_out===0&&(d.output=new Uint8Array(m),d.next_out=0,d.avail_out=m),(g===Z_SYNC_FLUSH||g===Z_FULL_FLUSH)&&d.avail_out<=6){this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;continue}if(f=deflate_1$2.deflate(d,g),f===Z_STREAM_END$2)return d.next_out>0&&this.onData(d.output.subarray(0,d.next_out)),f=deflate_1$2.deflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===Z_OK$2;if(d.avail_out===0){this.onData(d.output);continue}if(g>0&&d.next_out>0){this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;continue}if(d.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(a){this.chunks.push(a)};Deflate$1.prototype.onEnd=function(a){a===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function deflate$1(a,s){const d=new Deflate$1(s);if(d.push(a,!0),d.err)throw d.msg||messages[d.err];return d.result}function deflateRaw$1(a,s){return s=s||{},s.raw=!0,deflate$1(a,s)}function gzip$1(a,s){return s=s||{},s.gzip=!0,deflate$1(a,s)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(a,s){let d,m,f,g,x,w,C,A,_,M,P,E,R,B,z,F,I,L,W,G,q,K,Z,J;const te=a.state;d=a.next_in,Z=a.input,m=d+(a.avail_in-5),f=a.next_out,J=a.output,g=f-(s-a.avail_out),x=f+(a.avail_out-257),w=te.dmax,C=te.wsize,A=te.whave,_=te.wnext,M=te.window,P=te.hold,E=te.bits,R=te.lencode,B=te.distcode,z=(1<<te.lenbits)-1,F=(1<<te.distbits)-1;e:do{E<15&&(P+=Z[d++]<<E,E+=8,P+=Z[d++]<<E,E+=8),I=R[P&z];t:for(;;){if(L=I>>>24,P>>>=L,E-=L,L=I>>>16&255,L===0)J[f++]=I&65535;else if(L&16){W=I&65535,L&=15,L&&(E<L&&(P+=Z[d++]<<E,E+=8),W+=P&(1<<L)-1,P>>>=L,E-=L),E<15&&(P+=Z[d++]<<E,E+=8,P+=Z[d++]<<E,E+=8),I=B[P&F];i:for(;;){if(L=I>>>24,P>>>=L,E-=L,L=I>>>16&255,L&16){if(G=I&65535,L&=15,E<L&&(P+=Z[d++]<<E,E+=8,E<L&&(P+=Z[d++]<<E,E+=8)),G+=P&(1<<L)-1,G>w){a.msg="invalid distance too far back",te.mode=BAD$1;break e}if(P>>>=L,E-=L,L=f-g,G>L){if(L=G-L,L>A&&te.sane){a.msg="invalid distance too far back",te.mode=BAD$1;break e}if(q=0,K=M,_===0){if(q+=C-L,L<W){W-=L;do J[f++]=M[q++];while(--L);q=f-G,K=J}}else if(_<L){if(q+=C+_-L,L-=_,L<W){W-=L;do J[f++]=M[q++];while(--L);if(q=0,_<W){L=_,W-=L;do J[f++]=M[q++];while(--L);q=f-G,K=J}}}else if(q+=_-L,L<W){W-=L;do J[f++]=M[q++];while(--L);q=f-G,K=J}for(;W>2;)J[f++]=K[q++],J[f++]=K[q++],J[f++]=K[q++],W-=3;W&&(J[f++]=K[q++],W>1&&(J[f++]=K[q++]))}else{q=f-G;do J[f++]=J[q++],J[f++]=J[q++],J[f++]=J[q++],W-=3;while(W>2);W&&(J[f++]=J[q++],W>1&&(J[f++]=J[q++]))}}else if(L&64){a.msg="invalid distance code",te.mode=BAD$1;break e}else{I=B[(I&65535)+(P&(1<<L)-1)];continue i}break}}else if(L&64)if(L&32){te.mode=TYPE$1;break e}else{a.msg="invalid literal/length code",te.mode=BAD$1;break e}else{I=R[(I&65535)+(P&(1<<L)-1)];continue t}break}}while(d<m&&f<x);W=E>>3,d-=W,E-=W<<3,P&=(1<<E)-1,a.next_in=d,a.next_out=f,a.avail_in=d<m?5+(m-d):5-(d-m),a.avail_out=f<x?257+(x-f):257-(f-x),te.hold=P,te.bits=E};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(a,s,d,m,f,g,x,w)=>{const C=w.bits;let A=0,_=0,M=0,P=0,E=0,R=0,B=0,z=0,F=0,I=0,L,W,G,q,K,Z=null,J;const te=new Uint16Array(MAXBITS+1),Q=new Uint16Array(MAXBITS+1);let me=null,Xe,Ve,Ye;for(A=0;A<=MAXBITS;A++)te[A]=0;for(_=0;_<m;_++)te[s[d+_]]++;for(E=C,P=MAXBITS;P>=1&&te[P]===0;P--);if(E>P&&(E=P),P===0)return f[g++]=1<<24|64<<16|0,f[g++]=1<<24|64<<16|0,w.bits=1,0;for(M=1;M<P&&te[M]===0;M++);for(E<M&&(E=M),z=1,A=1;A<=MAXBITS;A++)if(z<<=1,z-=te[A],z<0)return-1;if(z>0&&(a===CODES$1||P!==1))return-1;for(Q[1]=0,A=1;A<MAXBITS;A++)Q[A+1]=Q[A]+te[A];for(_=0;_<m;_++)s[d+_]!==0&&(x[Q[s[d+_]]++]=_);if(a===CODES$1?(Z=me=x,J=20):a===LENS$1?(Z=lbase,me=lext,J=257):(Z=dbase,me=dext,J=0),I=0,_=0,A=M,K=g,R=E,B=0,G=-1,F=1<<E,q=F-1,a===LENS$1&&F>ENOUGH_LENS$1||a===DISTS$1&&F>ENOUGH_DISTS$1)return 1;for(;;){Xe=A-B,x[_]+1<J?(Ve=0,Ye=x[_]):x[_]>=J?(Ve=me[x[_]-J],Ye=Z[x[_]-J]):(Ve=96,Ye=0),L=1<<A-B,W=1<<R,M=W;do W-=L,f[K+(I>>B)+W]=Xe<<24|Ve<<16|Ye|0;while(W!==0);for(L=1<<A-1;I&L;)L>>=1;if(L!==0?(I&=L-1,I+=L):I=0,_++,--te[A]===0){if(A===P)break;A=s[d+x[_]]}if(A>E&&(I&q)!==G){for(B===0&&(B=E),K+=M,R=A-B,z=1<<R;R+B<P&&(z-=te[R+B],!(z<=0));)R++,z<<=1;if(F+=1<<R,a===LENS$1&&F>ENOUGH_LENS$1||a===DISTS$1&&F>ENOUGH_DISTS$1)return 1;G=I&q,f[G]=E<<24|R<<16|K-g|0}}return I!==0&&(f[K+I]=A-B<<24|64<<16|0),w.bits=E,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=a=>(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=a=>{if(!a)return 1;const s=a.state;return!s||s.strm!==a||s.mode<HEAD||s.mode>SYNC?1:0},inflateResetKeep=a=>{if(inflateStateCheck(a))return Z_STREAM_ERROR$1;const s=a.state;return a.total_in=a.total_out=s.total=0,a.msg="",s.wrap&&(a.adler=s.wrap&1),s.mode=HEAD,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(ENOUGH_LENS),s.distcode=s.distdyn=new Int32Array(ENOUGH_DISTS),s.sane=1,s.back=-1,Z_OK$1},inflateReset=a=>{if(inflateStateCheck(a))return Z_STREAM_ERROR$1;const s=a.state;return s.wsize=0,s.whave=0,s.wnext=0,inflateResetKeep(a)},inflateReset2=(a,s)=>{let d;if(inflateStateCheck(a))return Z_STREAM_ERROR$1;const m=a.state;return s<0?(d=0,s=-s):(d=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?Z_STREAM_ERROR$1:(m.window!==null&&m.wbits!==s&&(m.window=null),m.wrap=d,m.wbits=s,inflateReset(a))},inflateInit2=(a,s)=>{if(!a)return Z_STREAM_ERROR$1;const d=new InflateState;a.state=d,d.strm=a,d.window=null,d.mode=HEAD;const m=inflateReset2(a,s);return m!==Z_OK$1&&(a.state=null),m},inflateInit=a=>inflateInit2(a,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=a=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let s=0;for(;s<144;)a.lens[s++]=8;for(;s<256;)a.lens[s++]=9;for(;s<280;)a.lens[s++]=7;for(;s<288;)a.lens[s++]=8;for(inftrees(LENS,a.lens,0,288,lenfix,0,a.work,{bits:9}),s=0;s<32;)a.lens[s++]=5;inftrees(DISTS,a.lens,0,32,distfix,0,a.work,{bits:5}),virgin=!1}a.lencode=lenfix,a.lenbits=9,a.distcode=distfix,a.distbits=5},updatewindow=(a,s,d,m)=>{let f;const g=a.state;return g.window===null&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new Uint8Array(g.wsize)),m>=g.wsize?(g.window.set(s.subarray(d-g.wsize,d),0),g.wnext=0,g.whave=g.wsize):(f=g.wsize-g.wnext,f>m&&(f=m),g.window.set(s.subarray(d-m,d-m+f),g.wnext),m-=f,m?(g.window.set(s.subarray(d-m,d),0),g.wnext=m,g.whave=g.wsize):(g.wnext+=f,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=f))),0},inflate$2=(a,s)=>{let d,m,f,g,x,w,C,A,_,M,P,E,R,B,z=0,F,I,L,W,G,q,K,Z;const J=new Uint8Array(4);let te,Q;const me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(a)||!a.output||!a.input&&a.avail_in!==0)return Z_STREAM_ERROR$1;d=a.state,d.mode===TYPE&&(d.mode=TYPEDO),x=a.next_out,f=a.output,C=a.avail_out,g=a.next_in,m=a.input,w=a.avail_in,A=d.hold,_=d.bits,M=w,P=C,Z=Z_OK$1;e:for(;;)switch(d.mode){case HEAD:if(d.wrap===0){d.mode=TYPEDO;break}for(;_<16;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(d.wrap&2&&A===35615){d.wbits===0&&(d.wbits=15),d.check=0,J[0]=A&255,J[1]=A>>>8&255,d.check=crc32_1(d.check,J,2,0),A=0,_=0,d.mode=FLAGS;break}if(d.head&&(d.head.done=!1),!(d.wrap&1)||(((A&255)<<8)+(A>>8))%31){a.msg="incorrect header check",d.mode=BAD;break}if((A&15)!==Z_DEFLATED){a.msg="unknown compression method",d.mode=BAD;break}if(A>>>=4,_-=4,K=(A&15)+8,d.wbits===0&&(d.wbits=K),K>15||K>d.wbits){a.msg="invalid window size",d.mode=BAD;break}d.dmax=1<<d.wbits,d.flags=0,a.adler=d.check=1,d.mode=A&512?DICTID:TYPE,A=0,_=0;break;case FLAGS:for(;_<16;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(d.flags=A,(d.flags&255)!==Z_DEFLATED){a.msg="unknown compression method",d.mode=BAD;break}if(d.flags&57344){a.msg="unknown header flags set",d.mode=BAD;break}d.head&&(d.head.text=A>>8&1),d.flags&512&&d.wrap&4&&(J[0]=A&255,J[1]=A>>>8&255,d.check=crc32_1(d.check,J,2,0)),A=0,_=0,d.mode=TIME;case TIME:for(;_<32;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.head&&(d.head.time=A),d.flags&512&&d.wrap&4&&(J[0]=A&255,J[1]=A>>>8&255,J[2]=A>>>16&255,J[3]=A>>>24&255,d.check=crc32_1(d.check,J,4,0)),A=0,_=0,d.mode=OS;case OS:for(;_<16;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.head&&(d.head.xflags=A&255,d.head.os=A>>8),d.flags&512&&d.wrap&4&&(J[0]=A&255,J[1]=A>>>8&255,d.check=crc32_1(d.check,J,2,0)),A=0,_=0,d.mode=EXLEN;case EXLEN:if(d.flags&1024){for(;_<16;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.length=A,d.head&&(d.head.extra_len=A),d.flags&512&&d.wrap&4&&(J[0]=A&255,J[1]=A>>>8&255,d.check=crc32_1(d.check,J,2,0)),A=0,_=0}else d.head&&(d.head.extra=null);d.mode=EXTRA;case EXTRA:if(d.flags&1024&&(E=d.length,E>w&&(E=w),E&&(d.head&&(K=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Uint8Array(d.head.extra_len)),d.head.extra.set(m.subarray(g,g+E),K)),d.flags&512&&d.wrap&4&&(d.check=crc32_1(d.check,m,E,g)),w-=E,g+=E,d.length-=E),d.length))break e;d.length=0,d.mode=NAME;case NAME:if(d.flags&2048){if(w===0)break e;E=0;do K=m[g+E++],d.head&&K&&d.length<65536&&(d.head.name+=String.fromCharCode(K));while(K&&E<w);if(d.flags&512&&d.wrap&4&&(d.check=crc32_1(d.check,m,E,g)),w-=E,g+=E,K)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=COMMENT;case COMMENT:if(d.flags&4096){if(w===0)break e;E=0;do K=m[g+E++],d.head&&K&&d.length<65536&&(d.head.comment+=String.fromCharCode(K));while(K&&E<w);if(d.flags&512&&d.wrap&4&&(d.check=crc32_1(d.check,m,E,g)),w-=E,g+=E,K)break e}else d.head&&(d.head.comment=null);d.mode=HCRC;case HCRC:if(d.flags&512){for(;_<16;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(d.wrap&4&&A!==(d.check&65535)){a.msg="header crc mismatch",d.mode=BAD;break}A=0,_=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),a.adler=d.check=0,d.mode=TYPE;break;case DICTID:for(;_<32;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}a.adler=d.check=zswap32(A),A=0,_=0,d.mode=DICT;case DICT:if(d.havedict===0)return a.next_out=x,a.avail_out=C,a.next_in=g,a.avail_in=w,d.hold=A,d.bits=_,Z_NEED_DICT$1;a.adler=d.check=1,d.mode=TYPE;case TYPE:if(s===Z_BLOCK||s===Z_TREES)break e;case TYPEDO:if(d.last){A>>>=_&7,_-=_&7,d.mode=CHECK;break}for(;_<3;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}switch(d.last=A&1,A>>>=1,_-=1,A&3){case 0:d.mode=STORED;break;case 1:if(fixedtables(d),d.mode=LEN_,s===Z_TREES){A>>>=2,_-=2;break e}break;case 2:d.mode=TABLE;break;case 3:a.msg="invalid block type",d.mode=BAD}A>>>=2,_-=2;break;case STORED:for(A>>>=_&7,_-=_&7;_<32;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if((A&65535)!==(A>>>16^65535)){a.msg="invalid stored block lengths",d.mode=BAD;break}if(d.length=A&65535,A=0,_=0,d.mode=COPY_,s===Z_TREES)break e;case COPY_:d.mode=COPY;case COPY:if(E=d.length,E){if(E>w&&(E=w),E>C&&(E=C),E===0)break e;f.set(m.subarray(g,g+E),x),w-=E,g+=E,C-=E,x+=E,d.length-=E;break}d.mode=TYPE;break;case TABLE:for(;_<14;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(d.nlen=(A&31)+257,A>>>=5,_-=5,d.ndist=(A&31)+1,A>>>=5,_-=5,d.ncode=(A&15)+4,A>>>=4,_-=4,d.nlen>286||d.ndist>30){a.msg="too many length or distance symbols",d.mode=BAD;break}d.have=0,d.mode=LENLENS;case LENLENS:for(;d.have<d.ncode;){for(;_<3;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.lens[me[d.have++]]=A&7,A>>>=3,_-=3}for(;d.have<19;)d.lens[me[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,te={bits:d.lenbits},Z=inftrees(CODES,d.lens,0,19,d.lencode,0,d.work,te),d.lenbits=te.bits,Z){a.msg="invalid code lengths set",d.mode=BAD;break}d.have=0,d.mode=CODELENS;case CODELENS:for(;d.have<d.nlen+d.ndist;){for(;z=d.lencode[A&(1<<d.lenbits)-1],F=z>>>24,I=z>>>16&255,L=z&65535,!(F<=_);){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(L<16)A>>>=F,_-=F,d.lens[d.have++]=L;else{if(L===16){for(Q=F+2;_<Q;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(A>>>=F,_-=F,d.have===0){a.msg="invalid bit length repeat",d.mode=BAD;break}K=d.lens[d.have-1],E=3+(A&3),A>>>=2,_-=2}else if(L===17){for(Q=F+3;_<Q;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}A>>>=F,_-=F,K=0,E=3+(A&7),A>>>=3,_-=3}else{for(Q=F+7;_<Q;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}A>>>=F,_-=F,K=0,E=11+(A&127),A>>>=7,_-=7}if(d.have+E>d.nlen+d.ndist){a.msg="invalid bit length repeat",d.mode=BAD;break}for(;E--;)d.lens[d.have++]=K}}if(d.mode===BAD)break;if(d.lens[256]===0){a.msg="invalid code -- missing end-of-block",d.mode=BAD;break}if(d.lenbits=9,te={bits:d.lenbits},Z=inftrees(LENS,d.lens,0,d.nlen,d.lencode,0,d.work,te),d.lenbits=te.bits,Z){a.msg="invalid literal/lengths set",d.mode=BAD;break}if(d.distbits=6,d.distcode=d.distdyn,te={bits:d.distbits},Z=inftrees(DISTS,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,te),d.distbits=te.bits,Z){a.msg="invalid distances set",d.mode=BAD;break}if(d.mode=LEN_,s===Z_TREES)break e;case LEN_:d.mode=LEN;case LEN:if(w>=6&&C>=258){a.next_out=x,a.avail_out=C,a.next_in=g,a.avail_in=w,d.hold=A,d.bits=_,inffast(a,P),x=a.next_out,f=a.output,C=a.avail_out,g=a.next_in,m=a.input,w=a.avail_in,A=d.hold,_=d.bits,d.mode===TYPE&&(d.back=-1);break}for(d.back=0;z=d.lencode[A&(1<<d.lenbits)-1],F=z>>>24,I=z>>>16&255,L=z&65535,!(F<=_);){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(I&&!(I&240)){for(W=F,G=I,q=L;z=d.lencode[q+((A&(1<<W+G)-1)>>W)],F=z>>>24,I=z>>>16&255,L=z&65535,!(W+F<=_);){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}A>>>=W,_-=W,d.back+=W}if(A>>>=F,_-=F,d.back+=F,d.length=L,I===0){d.mode=LIT;break}if(I&32){d.back=-1,d.mode=TYPE;break}if(I&64){a.msg="invalid literal/length code",d.mode=BAD;break}d.extra=I&15,d.mode=LENEXT;case LENEXT:if(d.extra){for(Q=d.extra;_<Q;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.length+=A&(1<<d.extra)-1,A>>>=d.extra,_-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=DIST;case DIST:for(;z=d.distcode[A&(1<<d.distbits)-1],F=z>>>24,I=z>>>16&255,L=z&65535,!(F<=_);){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(!(I&240)){for(W=F,G=I,q=L;z=d.distcode[q+((A&(1<<W+G)-1)>>W)],F=z>>>24,I=z>>>16&255,L=z&65535,!(W+F<=_);){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}A>>>=W,_-=W,d.back+=W}if(A>>>=F,_-=F,d.back+=F,I&64){a.msg="invalid distance code",d.mode=BAD;break}d.offset=L,d.extra=I&15,d.mode=DISTEXT;case DISTEXT:if(d.extra){for(Q=d.extra;_<Q;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}d.offset+=A&(1<<d.extra)-1,A>>>=d.extra,_-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){a.msg="invalid distance too far back",d.mode=BAD;break}d.mode=MATCH;case MATCH:if(C===0)break e;if(E=P-C,d.offset>E){if(E=d.offset-E,E>d.whave&&d.sane){a.msg="invalid distance too far back",d.mode=BAD;break}E>d.wnext?(E-=d.wnext,R=d.wsize-E):R=d.wnext-E,E>d.length&&(E=d.length),B=d.window}else B=f,R=x-d.offset,E=d.length;E>C&&(E=C),C-=E,d.length-=E;do f[x++]=B[R++];while(--E);d.length===0&&(d.mode=LEN);break;case LIT:if(C===0)break e;f[x++]=d.length,C--,d.mode=LEN;break;case CHECK:if(d.wrap){for(;_<32;){if(w===0)break e;w--,A|=m[g++]<<_,_+=8}if(P-=C,a.total_out+=P,d.total+=P,d.wrap&4&&P&&(a.adler=d.check=d.flags?crc32_1(d.check,f,P,x-P):adler32_1(d.check,f,P,x-P)),P=C,d.wrap&4&&(d.flags?A:zswap32(A))!==d.check){a.msg="incorrect data check",d.mode=BAD;break}A=0,_=0}d.mode=LENGTH;case LENGTH:if(d.wrap&&d.flags){for(;_<32;){if(w===0)break e;w--,A+=m[g++]<<_,_+=8}if(d.wrap&4&&A!==(d.total&4294967295)){a.msg="incorrect length check",d.mode=BAD;break}A=0,_=0}d.mode=DONE;case DONE:Z=Z_STREAM_END$1;break e;case BAD:Z=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return a.next_out=x,a.avail_out=C,a.next_in=g,a.avail_in=w,d.hold=A,d.bits=_,(d.wsize||P!==a.avail_out&&d.mode<BAD&&(d.mode<CHECK||s!==Z_FINISH$1))&&updatewindow(a,a.output,a.next_out,P-a.avail_out),M-=a.avail_in,P-=a.avail_out,a.total_in+=M,a.total_out+=P,d.total+=P,d.wrap&4&&P&&(a.adler=d.check=d.flags?crc32_1(d.check,f,P,a.next_out-P):adler32_1(d.check,f,P,a.next_out-P)),a.data_type=d.bits+(d.last?64:0)+(d.mode===TYPE?128:0)+(d.mode===LEN_||d.mode===COPY_?256:0),(M===0&&P===0||s===Z_FINISH$1)&&Z===Z_OK$1&&(Z=Z_BUF_ERROR),Z},inflateEnd=a=>{if(inflateStateCheck(a))return Z_STREAM_ERROR$1;let s=a.state;return s.window&&(s.window=null),a.state=null,Z_OK$1},inflateGetHeader=(a,s)=>{if(inflateStateCheck(a))return Z_STREAM_ERROR$1;const d=a.state;return d.wrap&2?(d.head=s,s.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(a,s)=>{const d=s.length;let m,f,g;return inflateStateCheck(a)||(m=a.state,m.wrap!==0&&m.mode!==DICT)?Z_STREAM_ERROR$1:m.mode===DICT&&(f=1,f=adler32_1(f,s,d,0),f!==m.check)?Z_DATA_ERROR$1:(g=updatewindow(a,s,d,d),g?(m.mode=MEM,Z_MEM_ERROR$1):(m.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(a){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},a||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(a&&a.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15||(s.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let d=inflate_1$2.inflateInit2(this.strm,s.windowBits);if(d!==Z_OK)throw new Error(messages[d]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=strings.string2buf(s.dictionary):toString$2.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(d=inflate_1$2.inflateSetDictionary(this.strm,s.dictionary),d!==Z_OK)))throw new Error(messages[d])}Inflate$1.prototype.push=function(a,s){const d=this.strm,m=this.options.chunkSize,f=this.options.dictionary;let g,x,w;if(this.ended)return!1;for(s===~~s?x=s:x=s===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(a)==="[object ArrayBuffer]"?d.input=new Uint8Array(a):d.input=a,d.next_in=0,d.avail_in=d.input.length;;){for(d.avail_out===0&&(d.output=new Uint8Array(m),d.next_out=0,d.avail_out=m),g=inflate_1$2.inflate(d,x),g===Z_NEED_DICT&&f&&(g=inflate_1$2.inflateSetDictionary(d,f),g===Z_OK?g=inflate_1$2.inflate(d,x):g===Z_DATA_ERROR&&(g=Z_NEED_DICT));d.avail_in>0&&g===Z_STREAM_END&&d.state.wrap>0&&a[d.next_in]!==0;)inflate_1$2.inflateReset(d),g=inflate_1$2.inflate(d,x);switch(g){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(g),this.ended=!0,!1}if(w=d.avail_out,d.next_out&&(d.avail_out===0||g===Z_STREAM_END))if(this.options.to==="string"){let C=strings.utf8border(d.output,d.next_out),A=d.next_out-C,_=strings.buf2string(d.output,C);d.next_out=A,d.avail_out=m-A,A&&d.output.set(d.output.subarray(C,C+A),0),this.onData(_)}else this.onData(d.output.length===d.next_out?d.output:d.output.subarray(0,d.next_out));if(!(g===Z_OK&&w===0)){if(g===Z_STREAM_END)return g=inflate_1$2.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,!0;if(d.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(a){this.chunks.push(a)};Inflate$1.prototype.onEnd=function(a){a===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function inflate$1(a,s){const d=new Inflate$1(s);if(d.push(a),d.err)throw d.msg||messages[d.err];return d.result}function inflateRaw$1(a,s){return s=s||{},s.raw=!0,inflate$1(a,s)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let a=0;a<256;a++){let s=a;for(let d=0;d<8;d++)s&1?s=3988292384^s>>>1:s=s>>>1;crcTable[a]=s}const initialCrc=4294967295;function updateCrc(a,s,d){let m=a;for(let f=0;f<d;f++)m=crcTable[(m^s[f])&255]^m>>>8;return m}function crc(a,s){return(updateCrc(initialCrc,a,s)^initialCrc)>>>0}var ColorType;(function(a){a[a.UNKNOWN=-1]="UNKNOWN",a[a.GREYSCALE=0]="GREYSCALE",a[a.TRUECOLOUR=2]="TRUECOLOUR",a[a.INDEXED_COLOUR=3]="INDEXED_COLOUR",a[a.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",a[a.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(a){a[a.UNKNOWN=-1]="UNKNOWN",a[a.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(a){a[a.UNKNOWN=-1]="UNKNOWN",a[a.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(a){a[a.UNKNOWN=-1]="UNKNOWN",a[a.NO_INTERLACE=0]="NO_INTERLACE",a[a.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer$4{constructor(s,d={}){super(s);const{checkCrc:m=!1}=d;this._checkCrc=m,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let s=0;s<pngSignature.length;s++)if(this.readUint8()!==pngSignature[s])throw new Error(`wrong PNG signature. Byte at ${s} should be ${pngSignature[s]}.`)}decodeChunk(){const s=this.readUint32(),d=this.readChars(4),m=this.offset;switch(d){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case"tEXt":this.decodetEXt(s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-m!==s)throw new Error(`Length mismatch while decoding chunk ${d}`);if(this._checkCrc){const f=this.readUint32(),g=s+4,x=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-g-4,g),g);if(x!==f)throw new Error(`CRC mismatch for chunk ${d}. Expected ${f}, found ${x}`)}else this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=checkBitDepth(this.readUint8());const d=this.readUint8();this._colorType=d;let m;switch(d){case ColorType.GREYSCALE:m=1;break;case ColorType.TRUECOLOUR:m=3;break;case ColorType.INDEXED_COLOUR:m=1;break;case ColorType.GREYSCALE_ALPHA:m=2;break;case ColorType.TRUECOLOUR_ALPHA:m=4;break;default:throw new Error(`Unknown color type: ${d}`)}if(this._png.channels=m,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const d=s/3;this._hasPalette=!0;const m=[];this._palette=m;for(let f=0;f<d;f++)m.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,s)),this.skip(s)}decodetRNS(s){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let d=0;d<s/2;d++)this._transparency[d]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let d=0;for(;d<s;d++){const m=this.readByte();this._palette[d].push(m)}for(;d<this._palette.length;d++)this._palette[d].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){let d="",m;for(;(m=this.readChar())!==NULL;)d+=m;const f=this.readUint8();if(f!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${f}`);const g=this.readBytes(s-d.length-2);this._png.iccEmbeddedProfile={name:d,profile:inflate_1(g)}}decodetEXt(s){let d="",m;for(;(m=this.readChar())!==NULL;)d+=m;this._png.text[d]=this.readChars(s-d.length-1)}decodepHYs(){const s=this.readUint32(),d=this.readUint32(),m=this.readByte();this._png.resolution={x:s,y:d,unit:m}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(s);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(s){const d=this._png.height,m=this._png.channels*this._png.depth/8,f=this._png.width*m,g=new Uint8Array(this._png.height*f);let x=empty,w=0,C,A;for(let _=0;_<d;_++){switch(C=s.subarray(w+1,w+1+f),A=g.subarray(_*f,(_+1)*f),s[w]){case 0:unfilterNone(C,A,f);break;case 1:unfilterSub(C,A,f,m);break;case 2:unfilterUp(C,A,x,f);break;case 3:unfilterAverage(C,A,x,f,m);break;case 4:unfilterPaeth(C,A,x,f,m);break;default:throw new Error(`Unsupported filter: ${s[w]}`)}x=A,w+=f+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const _=new Uint16Array(g.buffer);if(osIsLittleEndian)for(let M=0;M<_.length;M++)_[M]=swap16(_[M]);this._png.data=_}else this._png.data=g}}function unfilterNone(a,s,d){for(let m=0;m<d;m++)s[m]=a[m]}function unfilterSub(a,s,d,m){let f=0;for(;f<m;f++)s[f]=a[f];for(;f<d;f++)s[f]=a[f]+s[f-m]&255}function unfilterUp(a,s,d,m){let f=0;if(d.length===0)for(;f<m;f++)s[f]=a[f];else for(;f<m;f++)s[f]=a[f]+d[f]&255}function unfilterAverage(a,s,d,m,f){let g=0;if(d.length===0){for(;g<f;g++)s[g]=a[g];for(;g<m;g++)s[g]=a[g]+(s[g-f]>>1)&255}else{for(;g<f;g++)s[g]=a[g]+(d[g]>>1)&255;for(;g<m;g++)s[g]=a[g]+(s[g-f]+d[g]>>1)&255}}function unfilterPaeth(a,s,d,m,f){let g=0;if(d.length===0){for(;g<f;g++)s[g]=a[g];for(;g<m;g++)s[g]=a[g]+s[g-f]&255}else{for(;g<f;g++)s[g]=a[g]+d[g]&255;for(;g<m;g++)s[g]=a[g]+paethPredictor(s[g-f],d[g],d[g-f])&255}}function paethPredictor(a,s,d){const m=a+s-d,f=Math.abs(m-a),g=Math.abs(m-s),x=Math.abs(m-d);return f<=g&&f<=x?a:g<=x?s:d}function swap16(a){return(a&255)<<8|a>>8&255}function checkBitDepth(a){if(a!==1&&a!==2&&a!==4&&a!==8&&a!==16)throw new Error(`invalid bit depth: ${a}`);return a}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer$4{constructor(s,d={}){super(),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...d.zlib},this._png=this._checkData(s),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(s){this.writeUint32(s.length),this.writeChars("IDAT"),this.writeBytes(s),this.writeCrc(s.length+4)}encodeData(){const{width:s,height:d,channels:m,depth:f,data:g}=this._png,x=m*s,w=new IOBuffer$4().setBigEndian();let C=0;for(let M=0;M<d;M++)if(w.writeByte(0),f===8)C=writeDataBytes(g,w,x,C);else if(f===16)C=writeDataUint16(g,w,x,C);else throw new Error("unreachable");const A=w.toArray(),_=deflate_1(A,this._zlibOptions);this.encodeIDAT(_)}_checkData(s){const{colorType:d,channels:m,depth:f}=getColorType(s),g={width:checkInteger(s.width,"width"),height:checkInteger(s.height,"height"),channels:m,data:s.data,depth:f,text:{}};this._colorType=d;const x=g.width*g.height*m;if(g.data.length!==x)throw new RangeError(`wrong data size. Found ${g.data.length}, expected ${x}`);return g}writeCrc(s){this.writeUint32(crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-s,s),s))}}function checkInteger(a,s){if(Number.isInteger(a)&&a>0)return a;throw new TypeError(`${s} must be a positive integer`)}function getColorType(a){const{channels:s=4,depth:d=8}=a;if(s!==4&&s!==3&&s!==2&&s!==1)throw new RangeError(`unsupported number of channels: ${s}`);if(d!==8&&d!==16)throw new RangeError(`unsupported bit depth: ${d}`);const m={channels:s,depth:d,colorType:ColorType.UNKNOWN};switch(s){case 4:m.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:m.colorType=ColorType.TRUECOLOUR;break;case 1:m.colorType=ColorType.GREYSCALE;break;case 2:m.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return m}function writeDataBytes(a,s,d,m){for(let f=0;f<d;f++)s.writeByte(a[m++]);return m}function writeDataUint16(a,s,d,m){for(let f=0;f<d;f++)s.writeUint16(a[m++]);return m}var ResolutionUnitSpecifier;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(a,s){return new PngDecoder(a,s).decode()}function encodePng$1(a,s){return new PngEncoder(a,s).encode()}var encoder={exports:{}};(function(a){function s(m){var f=Math.floor,g=new Array(64),x=new Array(64),w=new Array(64),C=new Array(64),A,_,M,P,E=new Array(65535),R=new Array(65535),B=new Array(64),z=new Array(64),F=[],I=0,L=7,W=new Array(64),G=new Array(64),q=new Array(64),K=new Array(256),Z=new Array(2048),J,te=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],me=[0,1,2,3,4,5,6,7,8,9,10,11],Xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ve=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ye=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],qe=[0,1,2,3,4,5,6,7,8,9,10,11],et=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],je=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ke(ot){for(var ut=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],gt=0;gt<64;gt++){var vt=f((ut[gt]*ot+50)/100);vt<1?vt=1:vt>255&&(vt=255),g[te[gt]]=vt}for(var xt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pt=0;Pt<64;Pt++){var bt=f((xt[Pt]*ot+50)/100);bt<1?bt=1:bt>255&&(bt=255),x[te[Pt]]=bt}for(var Dt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tt=0,Et=0;Et<8;Et++)for(var Ct=0;Ct<8;Ct++)w[tt]=1/(g[te[tt]]*Dt[Et]*Dt[Ct]*8),C[tt]=1/(x[te[tt]]*Dt[Et]*Dt[Ct]*8),tt++}function Je(ot,ut){for(var gt=0,vt=0,xt=new Array,Pt=1;Pt<=16;Pt++){for(var bt=1;bt<=ot[Pt];bt++)xt[ut[vt]]=[],xt[ut[vt]][0]=gt,xt[ut[vt]][1]=Pt,vt++,gt++;gt*=2}return xt}function at(){A=Je(Q,me),_=Je(Ye,qe),M=Je(Xe,Ve),P=Je(et,je)}function nt(){for(var ot=1,ut=2,gt=1;gt<=15;gt++){for(var vt=ot;vt<ut;vt++)R[32767+vt]=gt,E[32767+vt]=[],E[32767+vt][1]=gt,E[32767+vt][0]=vt;for(var xt=-(ut-1);xt<=-ot;xt++)R[32767+xt]=gt,E[32767+xt]=[],E[32767+xt][1]=gt,E[32767+xt][0]=ut-1+xt;ot<<=1,ut<<=1}}function ct(){for(var ot=0;ot<256;ot++)Z[ot]=19595*ot,Z[ot+256>>0]=38470*ot,Z[ot+512>>0]=7471*ot+32768,Z[ot+768>>0]=-11059*ot,Z[ot+1024>>0]=-21709*ot,Z[ot+1280>>0]=32768*ot+8421375,Z[ot+1536>>0]=-27439*ot,Z[ot+1792>>0]=-5329*ot}function pt(ot){for(var ut=ot[0],gt=ot[1]-1;gt>=0;)ut&1<<gt&&(I|=1<<L),gt--,L--,L<0&&(I==255?(rt(255),rt(0)):rt(I),L=7,I=0)}function rt(ot){F.push(ot)}function ht(ot){rt(ot>>8&255),rt(ot&255)}function yt(ot,ut){var gt,vt,xt,Pt,bt,Dt,tt,Et,Ct=0,Mt,dt=8,At=64;for(Mt=0;Mt<dt;++Mt){gt=ot[Ct],vt=ot[Ct+1],xt=ot[Ct+2],Pt=ot[Ct+3],bt=ot[Ct+4],Dt=ot[Ct+5],tt=ot[Ct+6],Et=ot[Ct+7];var Tt=gt+Et,kt=gt-Et,Rt=vt+tt,Ft=vt-tt,It=xt+Dt,Vt=xt-Dt,Ut=Pt+bt,Gt=Pt-bt,Yt=Tt+Ut,jt=Tt-Ut,Kt=Rt+It,oi=Rt-It;ot[Ct]=Yt+Kt,ot[Ct+4]=Yt-Kt;var di=(oi+jt)*.707106781;ot[Ct+2]=jt+di,ot[Ct+6]=jt-di,Yt=Gt+Vt,Kt=Vt+Ft,oi=Ft+kt;var _t=(Yt-oi)*.382683433,it=.5411961*Yt+_t,mt=1.306562965*oi+_t,St=Kt*.707106781,Ot=kt+St,Nt=kt-St;ot[Ct+5]=Nt+it,ot[Ct+3]=Nt-it,ot[Ct+1]=Ot+mt,ot[Ct+7]=Ot-mt,Ct+=8}for(Ct=0,Mt=0;Mt<dt;++Mt){gt=ot[Ct],vt=ot[Ct+8],xt=ot[Ct+16],Pt=ot[Ct+24],bt=ot[Ct+32],Dt=ot[Ct+40],tt=ot[Ct+48],Et=ot[Ct+56];var Bt=gt+Et,Jt=gt-Et,qt=vt+tt,ei=vt-tt,si=xt+Dt,yi=xt-Dt,ti=Pt+bt,pi=Pt-bt,ii=Bt+ti,ai=Bt-ti,ni=qt+si,mi=qt-si;ot[Ct]=ii+ni,ot[Ct+32]=ii-ni;var fi=(mi+ai)*.707106781;ot[Ct+16]=ai+fi,ot[Ct+48]=ai-fi,ii=pi+yi,ni=yi+ei,mi=ei+Jt;var ci=(ii-mi)*.382683433,Si=.5411961*ii+ci,Ri=1.306562965*mi+ci,Ii=ni*.707106781,Ni=Jt+Ii,Bi=Jt-Ii;ot[Ct+40]=Bi+Si,ot[Ct+24]=Bi-Si,ot[Ct+8]=Ni+Ri,ot[Ct+56]=Ni-Ri,Ct++}var vi;for(Mt=0;Mt<At;++Mt)vi=ot[Mt]*ut[Mt],B[Mt]=vi>0?vi+.5|0:vi-.5|0;return B}function wt(){ht(65504),ht(16),rt(74),rt(70),rt(73),rt(70),rt(0),rt(1),rt(1),rt(0),ht(1),ht(1),rt(0),rt(0)}function ft(ot){if(ot){ht(65505),ot[0]===69&&ot[1]===120&&ot[2]===105&&ot[3]===102?ht(ot.length+2):(ht(ot.length+5+2),rt(69),rt(120),rt(105),rt(102),rt(0));for(var ut=0;ut<ot.length;ut++)rt(ot[ut])}}function He(ot,ut){ht(65472),ht(17),rt(8),ht(ut),ht(ot),rt(3),rt(1),rt(17),rt(0),rt(2),rt(17),rt(1),rt(3),rt(17),rt(1)}function le(){ht(65499),ht(132),rt(0);for(var ot=0;ot<64;ot++)rt(g[ot]);rt(1);for(var ut=0;ut<64;ut++)rt(x[ut])}function be(){ht(65476),ht(418),rt(0);for(var ot=0;ot<16;ot++)rt(Q[ot+1]);for(var ut=0;ut<=11;ut++)rt(me[ut]);rt(16);for(var gt=0;gt<16;gt++)rt(Xe[gt+1]);for(var vt=0;vt<=161;vt++)rt(Ve[vt]);rt(1);for(var xt=0;xt<16;xt++)rt(Ye[xt+1]);for(var Pt=0;Pt<=11;Pt++)rt(qe[Pt]);rt(17);for(var bt=0;bt<16;bt++)rt(et[bt+1]);for(var Dt=0;Dt<=161;Dt++)rt(je[Dt])}function we(ot){typeof ot>"u"||ot.constructor!==Array||ot.forEach(ut=>{if(typeof ut=="string"){ht(65534);var gt=ut.length;ht(gt+2);var vt;for(vt=0;vt<gt;vt++)rt(ut.charCodeAt(vt))}})}function ze(){ht(65498),ht(12),rt(3),rt(1),rt(0),rt(2),rt(17),rt(3),rt(17),rt(0),rt(63),rt(0)}function Ze(ot,ut,gt,vt,xt){for(var Pt=xt[0],bt=xt[240],Dt,tt=16,Et=63,Ct=64,Mt=yt(ot,ut),dt=0;dt<Ct;++dt)z[te[dt]]=Mt[dt];var At=z[0]-gt;gt=z[0],At==0?pt(vt[0]):(Dt=32767+At,pt(vt[R[Dt]]),pt(E[Dt]));for(var Tt=63;Tt>0&&z[Tt]==0;Tt--);if(Tt==0)return pt(Pt),gt;for(var kt=1,Rt;kt<=Tt;){for(var Ft=kt;z[kt]==0&&kt<=Tt;++kt);var It=kt-Ft;if(It>=tt){Rt=It>>4;for(var Vt=1;Vt<=Rt;++Vt)pt(bt);It=It&15}Dt=32767+z[kt],pt(xt[(It<<4)+R[Dt]]),pt(E[Dt]),kt++}return Tt!=Et&&pt(Pt),gt}function Qe(){for(var ot=String.fromCharCode,ut=0;ut<256;ut++)K[ut]=ot(ut)}this.encode=function(ot,ut){new Date().getTime(),ut&&st(ut),F=new Array,I=0,L=7,ht(65496),wt(),we(ot.comments),ft(ot.exifBuffer),le(),He(ot.width,ot.height),be(),ze();var gt=0,vt=0,xt=0;I=0,L=7,this.encode.displayName="_encode_";for(var Pt=ot.data,bt=ot.width,Dt=ot.height,tt=bt*4,Et,Ct=0,Mt,dt,At,Tt,kt,Rt,Ft,It;Ct<Dt;){for(Et=0;Et<tt;){for(Tt=tt*Ct+Et,kt=Tt,Rt=-1,Ft=0,It=0;It<64;It++)Ft=It>>3,Rt=(It&7)*4,kt=Tt+Ft*tt+Rt,Ct+Ft>=Dt&&(kt-=tt*(Ct+1+Ft-Dt)),Et+Rt>=tt&&(kt-=Et+Rt-tt+4),Mt=Pt[kt++],dt=Pt[kt++],At=Pt[kt++],W[It]=(Z[Mt]+Z[dt+256>>0]+Z[At+512>>0]>>16)-128,G[It]=(Z[Mt+768>>0]+Z[dt+1024>>0]+Z[At+1280>>0]>>16)-128,q[It]=(Z[Mt+1280>>0]+Z[dt+1536>>0]+Z[At+1792>>0]>>16)-128;gt=Ze(W,w,gt,A,M),vt=Ze(G,C,vt,_,P),xt=Ze(q,C,xt,_,P),Et+=32}Ct+=8}if(L>=0){var Vt=[];Vt[1]=L+1,Vt[0]=(1<<L+1)-1,pt(Vt)}return ht(65497),Buffer.from(F)};function st(ot){if(ot<=0&&(ot=1),ot>100&&(ot=100),J!=ot){var ut=0;ot<50?ut=Math.floor(5e3/ot):ut=Math.floor(200-ot*2),Ke(ut),J=ot}}function lt(){var ot=new Date().getTime();m||(m=50),Qe(),at(),nt(),ct(),st(m),new Date().getTime()-ot}lt()}a.exports=d;function d(m,f){typeof f>"u"&&(f=50);var g=new s(f),x=g.encode(m,f);return{data:x,width:m.width,height:m.height}}})(encoder);var encoderExports=encoder.exports,decoder={exports:{}};(function(a){var s=function(){var m=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),f=4017,g=799,x=3406,w=2276,C=1567,A=3784,_=5793,M=2896;function P(){}function E(W,G){for(var q=0,K=[],Z,J,te=16;te>0&&!W[te-1];)te--;K.push({children:[],index:0});var Q=K[0],me;for(Z=0;Z<te;Z++){for(J=0;J<W[Z];J++){for(Q=K.pop(),Q.children[Q.index]=G[q];Q.index>0;){if(K.length===0)throw new Error("Could not recreate Huffman Table");Q=K.pop()}for(Q.index++,K.push(Q);K.length<=Z;)K.push(me={children:[],index:0}),Q.children[Q.index]=me.children,Q=me;q++}Z+1<te&&(K.push(me={children:[],index:0}),Q.children[Q.index]=me.children,Q=me)}return K[0].children}function R(W,G,q,K,Z,J,te,Q,me,Xe){q.precision,q.samplesPerLine,q.scanLines;var Ve=q.mcusPerLine,Ye=q.progressive;q.maxH,q.maxV;var qe=G,et=0,je=0;function Ke(){if(je>0)return je--,et>>je&1;if(et=W[G++],et==255){var bt=W[G++];if(bt)throw new Error("unexpected marker: "+(et<<8|bt).toString(16))}return je=7,et>>>7}function Je(bt){for(var Dt=bt,tt;(tt=Ke())!==null;){if(Dt=Dt[tt],typeof Dt=="number")return Dt;if(typeof Dt!="object")throw new Error("invalid huffman sequence")}return null}function at(bt){for(var Dt=0;bt>0;){var tt=Ke();if(tt===null)return;Dt=Dt<<1|tt,bt--}return Dt}function nt(bt){var Dt=at(bt);return Dt>=1<<bt-1?Dt:Dt+(-1<<bt)+1}function ct(bt,Dt){var tt=Je(bt.huffmanTableDC),Et=tt===0?0:nt(tt);Dt[0]=bt.pred+=Et;for(var Ct=1;Ct<64;){var Mt=Je(bt.huffmanTableAC),dt=Mt&15,At=Mt>>4;if(dt===0){if(At<15)break;Ct+=16;continue}Ct+=At;var Tt=m[Ct];Dt[Tt]=nt(dt),Ct++}}function pt(bt,Dt){var tt=Je(bt.huffmanTableDC),Et=tt===0?0:nt(tt)<<me;Dt[0]=bt.pred+=Et}function rt(bt,Dt){Dt[0]|=Ke()<<me}var ht=0;function yt(bt,Dt){if(ht>0){ht--;return}for(var tt=J,Et=te;tt<=Et;){var Ct=Je(bt.huffmanTableAC),Mt=Ct&15,dt=Ct>>4;if(Mt===0){if(dt<15){ht=at(dt)+(1<<dt)-1;break}tt+=16;continue}tt+=dt;var At=m[tt];Dt[At]=nt(Mt)*(1<<me),tt++}}var wt=0,ft;function He(bt,Dt){for(var tt=J,Et=te,Ct=0;tt<=Et;){var Mt=m[tt],dt=Dt[Mt]<0?-1:1;switch(wt){case 0:var At=Je(bt.huffmanTableAC),Tt=At&15,Ct=At>>4;if(Tt===0)Ct<15?(ht=at(Ct)+(1<<Ct),wt=4):(Ct=16,wt=1);else{if(Tt!==1)throw new Error("invalid ACn encoding");ft=nt(Tt),wt=Ct?2:3}continue;case 1:case 2:Dt[Mt]?Dt[Mt]+=(Ke()<<me)*dt:(Ct--,Ct===0&&(wt=wt==2?3:0));break;case 3:Dt[Mt]?Dt[Mt]+=(Ke()<<me)*dt:(Dt[Mt]=ft<<me,wt=0);break;case 4:Dt[Mt]&&(Dt[Mt]+=(Ke()<<me)*dt);break}tt++}wt===4&&(ht--,ht===0&&(wt=0))}function le(bt,Dt,tt,Et,Ct){var Mt=tt/Ve|0,dt=tt%Ve,At=Mt*bt.v+Et,Tt=dt*bt.h+Ct;bt.blocks[At]===void 0&&Xe.tolerantDecoding||Dt(bt,bt.blocks[At][Tt])}function be(bt,Dt,tt){var Et=tt/bt.blocksPerLine|0,Ct=tt%bt.blocksPerLine;bt.blocks[Et]===void 0&&Xe.tolerantDecoding||Dt(bt,bt.blocks[Et][Ct])}var we=K.length,ze,Ze,Qe,st,lt,ot;Ye?J===0?ot=Q===0?pt:rt:ot=Q===0?yt:He:ot=ct;var ut=0,gt,vt;we==1?vt=K[0].blocksPerLine*K[0].blocksPerColumn:vt=Ve*q.mcusPerColumn,Z||(Z=vt);for(var xt,Pt;ut<vt;){for(Ze=0;Ze<we;Ze++)K[Ze].pred=0;if(ht=0,we==1)for(ze=K[0],lt=0;lt<Z;lt++)be(ze,ot,ut),ut++;else for(lt=0;lt<Z;lt++){for(Ze=0;Ze<we;Ze++)for(ze=K[Ze],xt=ze.h,Pt=ze.v,Qe=0;Qe<Pt;Qe++)for(st=0;st<xt;st++)le(ze,ot,ut,Qe,st);if(ut++,ut===vt)break}if(ut===vt)do{if(W[G]===255&&W[G+1]!==0)break;G+=1}while(G<W.length-2);if(je=0,gt=W[G]<<8|W[G+1],gt<65280)throw new Error("marker was not found");if(gt>=65488&&gt<=65495)G+=2;else break}return G-qe}function B(W,G){var q=[],K=G.blocksPerLine,Z=G.blocksPerColumn,J=K<<3,te=new Int32Array(64),Q=new Uint8Array(64);function me(at,nt,ct){var pt=G.quantizationTable,rt,ht,yt,wt,ft,He,le,be,we,ze=ct,Ze;for(Ze=0;Ze<64;Ze++)ze[Ze]=at[Ze]*pt[Ze];for(Ze=0;Ze<8;++Ze){var Qe=8*Ze;if(ze[1+Qe]==0&&ze[2+Qe]==0&&ze[3+Qe]==0&&ze[4+Qe]==0&&ze[5+Qe]==0&&ze[6+Qe]==0&&ze[7+Qe]==0){we=_*ze[0+Qe]+512>>10,ze[0+Qe]=we,ze[1+Qe]=we,ze[2+Qe]=we,ze[3+Qe]=we,ze[4+Qe]=we,ze[5+Qe]=we,ze[6+Qe]=we,ze[7+Qe]=we;continue}rt=_*ze[0+Qe]+128>>8,ht=_*ze[4+Qe]+128>>8,yt=ze[2+Qe],wt=ze[6+Qe],ft=M*(ze[1+Qe]-ze[7+Qe])+128>>8,be=M*(ze[1+Qe]+ze[7+Qe])+128>>8,He=ze[3+Qe]<<4,le=ze[5+Qe]<<4,we=rt-ht+1>>1,rt=rt+ht+1>>1,ht=we,we=yt*A+wt*C+128>>8,yt=yt*C-wt*A+128>>8,wt=we,we=ft-le+1>>1,ft=ft+le+1>>1,le=we,we=be+He+1>>1,He=be-He+1>>1,be=we,we=rt-wt+1>>1,rt=rt+wt+1>>1,wt=we,we=ht-yt+1>>1,ht=ht+yt+1>>1,yt=we,we=ft*w+be*x+2048>>12,ft=ft*x-be*w+2048>>12,be=we,we=He*g+le*f+2048>>12,He=He*f-le*g+2048>>12,le=we,ze[0+Qe]=rt+be,ze[7+Qe]=rt-be,ze[1+Qe]=ht+le,ze[6+Qe]=ht-le,ze[2+Qe]=yt+He,ze[5+Qe]=yt-He,ze[3+Qe]=wt+ft,ze[4+Qe]=wt-ft}for(Ze=0;Ze<8;++Ze){var st=Ze;if(ze[8+st]==0&&ze[16+st]==0&&ze[24+st]==0&&ze[32+st]==0&&ze[40+st]==0&&ze[48+st]==0&&ze[56+st]==0){we=_*ct[Ze+0]+8192>>14,ze[0+st]=we,ze[8+st]=we,ze[16+st]=we,ze[24+st]=we,ze[32+st]=we,ze[40+st]=we,ze[48+st]=we,ze[56+st]=we;continue}rt=_*ze[0+st]+2048>>12,ht=_*ze[32+st]+2048>>12,yt=ze[16+st],wt=ze[48+st],ft=M*(ze[8+st]-ze[56+st])+2048>>12,be=M*(ze[8+st]+ze[56+st])+2048>>12,He=ze[24+st],le=ze[40+st],we=rt-ht+1>>1,rt=rt+ht+1>>1,ht=we,we=yt*A+wt*C+2048>>12,yt=yt*C-wt*A+2048>>12,wt=we,we=ft-le+1>>1,ft=ft+le+1>>1,le=we,we=be+He+1>>1,He=be-He+1>>1,be=we,we=rt-wt+1>>1,rt=rt+wt+1>>1,wt=we,we=ht-yt+1>>1,ht=ht+yt+1>>1,yt=we,we=ft*w+be*x+2048>>12,ft=ft*x-be*w+2048>>12,be=we,we=He*g+le*f+2048>>12,He=He*f-le*g+2048>>12,le=we,ze[0+st]=rt+be,ze[56+st]=rt-be,ze[8+st]=ht+le,ze[48+st]=ht-le,ze[16+st]=yt+He,ze[40+st]=yt-He,ze[24+st]=wt+ft,ze[32+st]=wt-ft}for(Ze=0;Ze<64;++Ze){var lt=128+(ze[Ze]+8>>4);nt[Ze]=lt<0?0:lt>255?255:lt}}L(J*Z*8);for(var Xe,Ve,Ye=0;Ye<Z;Ye++){var qe=Ye<<3;for(Xe=0;Xe<8;Xe++)q.push(new Uint8Array(J));for(var et=0;et<K;et++){me(G.blocks[Ye][et],Q,te);var je=0,Ke=et<<3;for(Ve=0;Ve<8;Ve++){var Je=q[qe+Ve];for(Xe=0;Xe<8;Xe++)Je[Ke+Xe]=Q[je++]}}}return q}function z(W){return W<0?0:W>255?255:W}P.prototype={load:function(W){var G=new XMLHttpRequest;G.open("GET",W,!0),G.responseType="arraybuffer",G.onload=(function(){var q=new Uint8Array(G.response||G.mozResponseArrayBuffer);this.parse(q),this.onload&&this.onload()}).bind(this),G.send(null)},parse:function(W){var G=this.opts.maxResolutionInMP*1e3*1e3,q=0;W.length;function K(){var Mt=W[q]<<8|W[q+1];return q+=2,Mt}function Z(){var Mt=K(),dt=W.subarray(q,q+Mt-2);return q+=dt.length,dt}function J(Mt){var dt=1,At=1,Tt,kt;for(kt in Mt.components)Mt.components.hasOwnProperty(kt)&&(Tt=Mt.components[kt],dt<Tt.h&&(dt=Tt.h),At<Tt.v&&(At=Tt.v));var Rt=Math.ceil(Mt.samplesPerLine/8/dt),Ft=Math.ceil(Mt.scanLines/8/At);for(kt in Mt.components)if(Mt.components.hasOwnProperty(kt)){Tt=Mt.components[kt];var It=Math.ceil(Math.ceil(Mt.samplesPerLine/8)*Tt.h/dt),Vt=Math.ceil(Math.ceil(Mt.scanLines/8)*Tt.v/At),Ut=Rt*Tt.h,Gt=Ft*Tt.v,Yt=Gt*Ut,jt=[];L(Yt*256);for(var Kt=0;Kt<Gt;Kt++){for(var oi=[],di=0;di<Ut;di++)oi.push(new Int32Array(64));jt.push(oi)}Tt.blocksPerLine=It,Tt.blocksPerColumn=Vt,Tt.blocks=jt}Mt.maxH=dt,Mt.maxV=At,Mt.mcusPerLine=Rt,Mt.mcusPerColumn=Ft}var te=null,Q=null,me,Xe,Ve=[],Ye=[],qe=[],et=[],je=K(),Ke=-1;if(this.comments=[],je!=65496)throw new Error("SOI not found");for(je=K();je!=65497;){var Je,at;switch(je){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var nt=Z();if(je===65534){var ct=String.fromCharCode.apply(null,nt);this.comments.push(ct)}je===65504&&nt[0]===74&&nt[1]===70&&nt[2]===73&&nt[3]===70&&nt[4]===0&&(te={version:{major:nt[5],minor:nt[6]},densityUnits:nt[7],xDensity:nt[8]<<8|nt[9],yDensity:nt[10]<<8|nt[11],thumbWidth:nt[12],thumbHeight:nt[13],thumbData:nt.subarray(14,14+3*nt[12]*nt[13])}),je===65505&&nt[0]===69&&nt[1]===120&&nt[2]===105&&nt[3]===102&&nt[4]===0&&(this.exifBuffer=nt.subarray(5,nt.length)),je===65518&&nt[0]===65&&nt[1]===100&&nt[2]===111&&nt[3]===98&&nt[4]===101&&nt[5]===0&&(Q={version:nt[6],flags0:nt[7]<<8|nt[8],flags1:nt[9]<<8|nt[10],transformCode:nt[11]});break;case 65499:for(var pt=K(),rt=pt+q-2;q<rt;){var ht=W[q++];L(256);var yt=new Int32Array(64);if(ht>>4)if(ht>>4===1)for(at=0;at<64;at++){var wt=m[at];yt[wt]=K()}else throw new Error("DQT: invalid table spec");else for(at=0;at<64;at++){var wt=m[at];yt[wt]=W[q++]}Ve[ht&15]=yt}break;case 65472:case 65473:case 65474:K(),me={},me.extended=je===65473,me.progressive=je===65474,me.precision=W[q++],me.scanLines=K(),me.samplesPerLine=K(),me.components={},me.componentsOrder=[];var ft=me.scanLines*me.samplesPerLine;if(ft>G){var He=Math.ceil((ft-G)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${He}MP`)}var le=W[q++],be;for(Je=0;Je<le;Je++){be=W[q];var we=W[q+1]>>4,ze=W[q+1]&15,Ze=W[q+2];if(we<=0||ze<=0)throw new Error("Invalid sampling factor, expected values above 0");me.componentsOrder.push(be),me.components[be]={h:we,v:ze,quantizationIdx:Ze},q+=3}J(me),Ye.push(me);break;case 65476:var Qe=K();for(Je=2;Je<Qe;){var st=W[q++],lt=new Uint8Array(16),ot=0;for(at=0;at<16;at++,q++)ot+=lt[at]=W[q];L(16+ot);var ut=new Uint8Array(ot);for(at=0;at<ot;at++,q++)ut[at]=W[q];Je+=17+ot,(st>>4?qe:et)[st&15]=E(lt,ut)}break;case 65501:K(),Xe=K();break;case 65500:K(),K();break;case 65498:K();var gt=W[q++],vt=[],xt;for(Je=0;Je<gt;Je++){xt=me.components[W[q++]];var Pt=W[q++];xt.huffmanTableDC=et[Pt>>4],xt.huffmanTableAC=qe[Pt&15],vt.push(xt)}var bt=W[q++],Dt=W[q++],tt=W[q++],Et=R(W,q,me,vt,Xe,bt,Dt,tt>>4,tt&15,this.opts);q+=Et;break;case 65535:W[q]!==255&&q--;break;default:if(W[q-3]==255&&W[q-2]>=192&&W[q-2]<=254){q-=3;break}else if(je===224||je==225){if(Ke!==-1)throw new Error(`first unknown JPEG marker at offset ${Ke.toString(16)}, second unknown JPEG marker ${je.toString(16)} at offset ${(q-1).toString(16)}`);Ke=q-1;const Mt=K();if(W[q+Mt-2]===255){q+=Mt-2;break}}throw new Error("unknown JPEG marker "+je.toString(16))}je=K()}if(Ye.length!=1)throw new Error("only single frame JPEGs supported");for(var Je=0;Je<Ye.length;Je++){var Ct=Ye[Je].components;for(var at in Ct)Ct[at].quantizationTable=Ve[Ct[at].quantizationIdx],delete Ct[at].quantizationIdx}this.width=me.samplesPerLine,this.height=me.scanLines,this.jfif=te,this.adobe=Q,this.components=[];for(var Je=0;Je<me.componentsOrder.length;Je++){var xt=me.components[me.componentsOrder[Je]];this.components.push({lines:B(me,xt),scaleX:xt.h/me.maxH,scaleY:xt.v/me.maxV})}},getData:function(W,G){var q=this.width/W,K=this.height/G,Z,J,te,Q,me,Xe,Ve,Ye,qe,et,je=0,Ke,Je,at,nt,ct,pt,rt,ht,yt,wt,ft,He=W*G*this.components.length;L(He);var le=new Uint8Array(He);switch(this.components.length){case 1:for(Z=this.components[0],et=0;et<G;et++)for(me=Z.lines[0|et*Z.scaleY*K],qe=0;qe<W;qe++)Ke=me[0|qe*Z.scaleX*q],le[je++]=Ke;break;case 2:for(Z=this.components[0],J=this.components[1],et=0;et<G;et++)for(me=Z.lines[0|et*Z.scaleY*K],Xe=J.lines[0|et*J.scaleY*K],qe=0;qe<W;qe++)Ke=me[0|qe*Z.scaleX*q],le[je++]=Ke,Ke=Xe[0|qe*J.scaleX*q],le[je++]=Ke;break;case 3:for(ft=!0,this.adobe&&this.adobe.transformCode?ft=!0:typeof this.opts.colorTransform<"u"&&(ft=!!this.opts.colorTransform),Z=this.components[0],J=this.components[1],te=this.components[2],et=0;et<G;et++)for(me=Z.lines[0|et*Z.scaleY*K],Xe=J.lines[0|et*J.scaleY*K],Ve=te.lines[0|et*te.scaleY*K],qe=0;qe<W;qe++)ft?(Ke=me[0|qe*Z.scaleX*q],Je=Xe[0|qe*J.scaleX*q],at=Ve[0|qe*te.scaleX*q],ht=z(Ke+1.402*(at-128)),yt=z(Ke-.3441363*(Je-128)-.71413636*(at-128)),wt=z(Ke+1.772*(Je-128))):(ht=me[0|qe*Z.scaleX*q],yt=Xe[0|qe*J.scaleX*q],wt=Ve[0|qe*te.scaleX*q]),le[je++]=ht,le[je++]=yt,le[je++]=wt;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(ft=!1,this.adobe&&this.adobe.transformCode?ft=!0:typeof this.opts.colorTransform<"u"&&(ft=!!this.opts.colorTransform),Z=this.components[0],J=this.components[1],te=this.components[2],Q=this.components[3],et=0;et<G;et++)for(me=Z.lines[0|et*Z.scaleY*K],Xe=J.lines[0|et*J.scaleY*K],Ve=te.lines[0|et*te.scaleY*K],Ye=Q.lines[0|et*Q.scaleY*K],qe=0;qe<W;qe++)ft?(Ke=me[0|qe*Z.scaleX*q],Je=Xe[0|qe*J.scaleX*q],at=Ve[0|qe*te.scaleX*q],nt=Ye[0|qe*Q.scaleX*q],ct=255-z(Ke+1.402*(at-128)),pt=255-z(Ke-.3441363*(Je-128)-.71413636*(at-128)),rt=255-z(Ke+1.772*(Je-128))):(ct=me[0|qe*Z.scaleX*q],pt=Xe[0|qe*J.scaleX*q],rt=Ve[0|qe*te.scaleX*q],nt=Ye[0|qe*Q.scaleX*q]),le[je++]=255-ct,le[je++]=255-pt,le[je++]=255-rt,le[je++]=255-nt;break;default:throw new Error("Unsupported color mode")}return le},copyToImageData:function(W,G){var q=W.width,K=W.height,Z=W.data,J=this.getData(q,K),te=0,Q=0,me,Xe,Ve,Ye,qe,et,je,Ke,Je;switch(this.components.length){case 1:for(Xe=0;Xe<K;Xe++)for(me=0;me<q;me++)Ve=J[te++],Z[Q++]=Ve,Z[Q++]=Ve,Z[Q++]=Ve,G&&(Z[Q++]=255);break;case 3:for(Xe=0;Xe<K;Xe++)for(me=0;me<q;me++)je=J[te++],Ke=J[te++],Je=J[te++],Z[Q++]=je,Z[Q++]=Ke,Z[Q++]=Je,G&&(Z[Q++]=255);break;case 4:for(Xe=0;Xe<K;Xe++)for(me=0;me<q;me++)qe=J[te++],et=J[te++],Ve=J[te++],Ye=J[te++],je=255-z(qe*(1-Ye/255)+Ye),Ke=255-z(et*(1-Ye/255)+Ye),Je=255-z(Ve*(1-Ye/255)+Ye),Z[Q++]=je,Z[Q++]=Ke,Z[Q++]=Je,G&&(Z[Q++]=255);break;default:throw new Error("Unsupported color mode")}}};var F=0,I=0;function L(W=0){var G=F+W;if(G>I){var q=Math.ceil((G-I)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${q}MB`)}F=G}return P.resetMaxMemoryUsage=function(W){F=0,I=W},P.getBytesAllocated=function(){return F},P.requestMemoryAllocation=L,P}();a.exports=d;function d(m,f={}){var g={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},x={...g,...f},w=new Uint8Array(m),C=new s;C.opts=x,s.resetMaxMemoryUsage(x.maxMemoryUsageInMB*1024*1024),C.parse(w);var A=x.formatAsRGBA?4:3,_=C.width*C.height*A;try{s.requestMemoryAllocation(_);var M={width:C.width,height:C.height,exifBuffer:C.exifBuffer,data:x.useTArray?new Uint8Array(_):Buffer.alloc(_)};C.comments.length>0&&(M.comments=C.comments)}catch(P){throw P instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+_):P instanceof ReferenceError&&P.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):P}return C.copyToImageData(M,x.formatAsRGBA),M}})(decoder);var decoderExports=decoder.exports,encode$1=encoderExports,decode$4=decoderExports,jpegJs={encode:encode$1,decode:decode$4};let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let a=0;a<chars.length;a++)lookup[chars.charCodeAt(a)]=a;function encode(a){let s,d=a.length,m="";for(s=0;s<d;s+=3)m+=chars[a[s]>>2],m+=chars[(a[s]&3)<<4|a[s+1]>>4],m+=chars[(a[s+1]&15)<<2|a[s+2]>>6],m+=chars[a[s+2]&63];return d%3===2?m=`${m.substring(0,m.length-1)}=`:d%3===1&&(m=`${m.substring(0,m.length-2)}==`),m}function decode$3(a){let s=a.length*.75,d=a.length,m=0,f,g,x,w;a[a.length-1]==="="&&(s--,a[a.length-2]==="="&&s--);const C=new Uint8Array(s);for(let A=0;A<d;A+=4)f=lookup[a.charCodeAt(A)],g=lookup[a.charCodeAt(A+1)],x=lookup[a.charCodeAt(A+2)],w=lookup[a.charCodeAt(A+3)],C[m++]=f<<2|g>>4,C[m++]=(g&15)<<4|x>>2,C[m++]=(x&3)<<6|w&63;return C}function toBase64URL(a,s){const d=encode(a);return`data:${s};base64,${d}`}const ImageData=self.ImageData,DOMImage=self.Image;function createCanvas(a,s){let d=self.document.createElement("canvas");return d.width=a,d.height=s,d}function fetchBinary(a,{withCredentials:s=!1}={}){return new Promise(function(d,m){let f=new self.XMLHttpRequest;f.open("GET",a,!0),f.responseType="arraybuffer",f.withCredentials=s,f.onload=function(g){this.status!==200?m(g):d(this.response)},f.onerror=m,f.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(a){return a.includes("/")||(a=`image/${a}`),a}function encodeJpeg(a,s={}){const d={width:a.width,height:a.height,data:a.getRGBAData()};return jpegJs.encode(d,s.quality).data}function encodePng(a,s){const d={width:a.width,height:a.height,channels:a.channels,depth:a.bitDepth,data:a.data};return(d.depth===1||d.depth===32)&&(d.depth=8,d.channels=4,d.data=a.getRGBAData()),encodePng$1(d,s)}const exportMethods={save(a,s={}){const{useCanvas:d=!1,encoder:m=void 0}=s;let{format:f}=s;if(!f){const g=/\.(?<format>[a-zA-Z]+)$/.exec(a);g&&(f=g.groups.format.toLowerCase())}if(!f)throw new Error("file format not provided");return new Promise((g,x)=>{let w,C;switch(f.toLowerCase()){case"png":{d?w=this.getCanvas().pngStream():C=encodePng(this,m);break}case"jpg":case"jpeg":d?w=this.getCanvas().jpegStream():C=encodeJpeg(this,m);break;case"bmp":C=encode$2(this);break;default:throw new RangeError(`invalid output format: ${f}`)}if(w){let A=createWriteStream();A.on("finish",g),A.on("error",x),w.pipe(A)}else C&&writeFile()})},toDataURL(a="image/png",s={}){typeof a=="object"&&(s=a,a="image/png");const{useCanvas:d=!1,encoder:m=void 0}=s;a=getType(a);function f(g,x){const w=g(x,m);return toBase64URL(w,a)}return a==="image/bmp"?f(encode$2,this):a==="image/png"&&!d?f(encodePng,this):a==="image/jpeg"&&!d?f(encodeJpeg,this):this.getCanvas().toDataURL(a)},toBuffer(a={}){const{format:s="png",encoder:d=void 0}=a;switch(s.toLowerCase()){case"png":return encodePng(this,d);case"jpeg":case"jpg":return encodeJpeg(this,d);case"bmp":return encode$2(this);default:throw new RangeError(`invalid output format: ${s}`)}},toBase64(a="image/png",s={}){if(s.async)return this.toDataURL(a,s).then(function(d){return d.substring(d.indexOf(",")+1)});{const d=this.toDataURL(a,s);return d.substring(d.indexOf(",")+1)}},toBlob(a="image/png",s=.8){return canvasToBlob(this.getCanvas(),a,s)},getCanvas(){const a=new ImageData(this.getRGBAData({clamped:!0}),this.width,this.height);let s=createCanvas(this.width,this.height);return s.getContext("2d").putImageData(a,0,0),s}};function setExportMethods(a){for(const s in exportMethods)a.prototype[s]=exportMethods[s]}var hasOwn$1={exports:{}};const name="has-own",version$1="1.0.1",description="A safer .hasOwnProperty() - hasOwn(name, obj)",main="index.js",scripts={test:"make test"},author="Aaron Heckmann <aaron.heckmann+github@gmail.com>",license="MIT",repository={type:"git",url:"git://github.com/aheckmann/has-own.git"},homepage="https://github.com/aheckmann/has-own/",devDependencies={mocha:"^6.2.2"},require$$0$2={name,version:version$1,description,main,scripts,author,license,repository,homepage,devDependencies};(function(a,s){var d=Object.prototype.hasOwnProperty;a.exports=s=function(m,f){return d.call(f,m)},s.version=require$$0$2.version})(hasOwn$1,hasOwn$1.exports);var hasOwnExports=hasOwn$1.exports;const hasOwn=getDefaultExportFromCjs$1(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(a,s,d={}){let{inPlace:m=!1,returnThis:f=!0,partialArgs:g=[]}=d;return m?Image$1.prototype[a]=function(...x){this.computed=null;let w=s.apply(this,[...g,...x]);return f?this:w}:Image$1.prototype[a]=function(...x){return s.apply(this,[...g,...x])},Image$1}function extendProperty(a,s,d={}){let{partialArgs:m=[]}=d;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(a,this.computed))return this.computed[a];let f=s.apply(this,m);return this.computed[a]=f,f},Object.defineProperty(Image$1.prototype,a,computedPropertyDescriptor$1),Image$1}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(a={}){const{clamped:s}=a;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const d=this.width*this.height*4;let m=s?new Uint8ClampedArray(d):new Uint8Array(d);return this.bitDepth===1?fillDataFromBinary(this,m):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,m):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,m))):this.components===1?fillDataFromGrey(this,m):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,m)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,m)):fillAlpha(this,m),m}function fillDataFromBinary(a,s){for(let d=0;d<a.size;d++){const m=a.getBit(d);s[d*4]=m*255,s[d*4+1]=m*255,s[d*4+2]=m*255}}function fillDataFromGrey32(a,s){const d=a.min[0],m=a.max[0]-d;for(let f=0;f<a.size;f++){const g=Math.floor(255*(a.data[f]-d)/m);s[f*4]=g,s[f*4+1]=g,s[f*4+2]=g}}function fillDataFromRGB32(a,s){const d=Math.min(...a.min),m=Math.max(...a.max)-d;for(let f=0;f<a.size;f++){const g=Math.floor(255*(a.data[f*3]-d)/m),x=Math.floor(255*(a.data[f*3+1]-d)/m),w=Math.floor(255*(a.data[f*3+2]-d)/m);s[f*4]=g,s[f*4+1]=x,s[f*4+2]=w}}function fillDataFromGrey(a,s){for(let d=0;d<a.size;d++)s[d*4]=a.data[d*a.channels]>>>a.bitDepth-8,s[d*4+1]=a.data[d*a.channels]>>>a.bitDepth-8,s[d*4+2]=a.data[d*a.channels]>>>a.bitDepth-8}function fillDataFromRGB(a,s){for(let d=0;d<a.size;d++)s[d*4]=a.data[d*a.channels]>>>a.bitDepth-8,s[d*4+1]=a.data[d*a.channels+1]>>>a.bitDepth-8,s[d*4+2]=a.data[d*a.channels+2]>>>a.bitDepth-8}function copyAlpha(a,s){for(let d=0;d<a.size;d++)s[d*4+3]=a.data[d*a.channels+a.components]>>a.bitDepth-8}function fillAlpha(a,s){for(let d=0;d<a.size;d++)s[d*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(a){const s=kinds[a];if(!s)throw new RangeError(`invalid image kind: ${a}`);return s}const validBitDepth=[1,8,16,32];function verifyKindDefinition(a){const{components:s,alpha:d,bitDepth:m,colorModel:f}=a;if(!Number.isInteger(s)||s<=0)throw new RangeError(`invalid components: ${s}. Must be a positive integer`);if(d!==0&&d!==1&&typeof d!="boolean")throw new TypeError(`invalid alpha: ${d}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(m))throw new RangeError(`invalid bitDepth: ${m}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[f])throw new RangeError(`invalid colorModel: ${f}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(a,s,d){let m=s*a;return d===1&&(m=Math.ceil(m/8)),m}function createPixelArray(a,s,d,m,f,g){const x=m*a;let w;switch(f){case 1:w=new Uint8Array(Math.ceil(x/8));break;case 8:w=new Uint8Array(x);break;case 16:w=new Uint16Array(x);break;case 32:w=new Float32Array(x);break;default:throw new Error(`Cannot create pixel array for bit depth ${f}`)}if(d)for(let C=s;C<w.length;C+=m)w[C]=g;return w}const defaultByteLength=1024*8,charArray=[];let IOBuffer$2=class{constructor(a,s){s=s||{},a===void 0&&(a=defaultByteLength),typeof a=="number"&&(a=new ArrayBuffer(a));let d=a.byteLength;const m=s.offset?s.offset>>>0:0;a.buffer&&(d=a.byteLength-m,a.byteLength!==a.buffer.byteLength?a=a.buffer.slice(a.byteOffset+m,a.byteOffset+a.byteLength):m?a=a.buffer.slice(m):a=a.buffer),this.buffer=a,this.length=d,this.byteLength=d,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=d||defaultByteLength,this._mark=0}available(a){return a===void 0&&(a=1),this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(a){a===void 0&&(a=1),this.offset+=a}seek(a){this.offset=a}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(a){if(a===void 0&&(a=1),!this.available(a)){const s=this._increment+this._increment;this._increment=s;const d=this.length+s,m=new Uint8Array(d);m.set(new Uint8Array(this.buffer)),this.buffer=m.buffer,this.length=d,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a){a===void 0&&(a=1);for(var s=new Uint8Array(a),d=0;d<a;d++)s[d]=this.readByte();return s}readInt16(){var a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){var a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){var a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){var a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){var a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){var a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a){a===void 0&&(a=1),charArray.length=a;for(var s=0;s<a;s++)charArray[s]=this.readChar();return charArray.join("")}writeBoolean(a){this.writeUint8(a?255:0)}writeInt8(a){this.ensureAvailable(1),this._data.setInt8(this.offset++,a)}writeUint8(a){this.ensureAvailable(1),this._data.setUint8(this.offset++,a)}writeByte(a){this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(var s=0;s<a.length;s++)this._data.setUint8(this.offset++,a[s])}writeInt16(a){this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2}writeUint16(a){this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2}writeInt32(a){this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4}writeUint32(a){this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4}writeFloat32(a){this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4}writeFloat64(a){this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8}writeChar(a){this.writeUint8(a.charCodeAt(0))}writeChars(a){for(var s=0;s<a.length;s++)this.writeUint8(a.charCodeAt(s))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}};var IOBuffer_1=IOBuffer$2,src$3={};const tagsById$5={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName$5={};for(var i$2 in tagsById$5)tagsByName$5[tagsById$5[i$2]]=i$2;var standard$1={tagsById:tagsById$5,tagsByName:tagsByName$5};const tagsById$4={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$4={};for(var i$1 in tagsById$4)tagsByName$4[tagsById$4[i$1]]=i$1;var exif$1={tagsById:tagsById$4,tagsByName:tagsByName$4};const tagsById$3={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$3={};for(var i in tagsById$3)tagsByName$3[tagsById$3[i]]=i;var gps$1={tagsById:tagsById$3,tagsByName:tagsByName$3};const tags$1={standard:standard$1,exif:exif$1,gps:gps$1};let IFD$2=class{constructor(a){if(!a)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=a,this._map=null}get(a){if(typeof a=="number")return this.fields.get(a);if(typeof a=="string")return this.fields.get(tags$1[this.kind].tagsByName[a]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const s=tags$1[this.kind].tagsById;for(var a of this.fields.keys())s[a]&&(this._map[s[a]]=this.fields.get(a))}return this._map}};var ifd=IFD$2;const Ifd=ifd,dateTimeRegex$1=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;let TiffIfd$1=class extends Ifd{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var a=new Date,s=dateTimeRegex$1.exec(this.dateTime);return a.setFullYear(s[1],s[2]-1,s[3]),a.setHours(s[4],s[5],s[6]),a}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return alwaysArray$1(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return alwaysArray$1(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}};function alwaysArray$1(a){return typeof a=="number"?[a]:a}var tiffIfd=TiffIfd$1,ifdValue={},types$1=new Map([[1,[1,readByte$1]],[2,[1,readASCII$1]],[3,[2,readShort$1]],[4,[4,readLong$1]],[5,[8,readRational$1]],[6,[1,readSByte$1]],[7,[1,readByte$1]],[8,[2,readSShort$1]],[9,[4,readSLong$1]],[10,[8,readSRational$1]],[11,[4,readFloat$1]],[12,[8,readDouble$1]]]);ifdValue.getByteLength=function(a,s){return types$1.get(a)[0]*s};ifdValue.readData=function(a,s,d){return types$1.get(s)[1](a,d)};function readByte$1(a,s){if(s===1)return a.readUint8();for(var d=new Uint8Array(s),m=0;m<s;m++)d[m]=a.readUint8();return d}function readASCII$1(a,s){for(var d=[],m="",f=0;f<s;f++){var g=String.fromCharCode(a.readUint8());g==="\0"?(d.push(m),m=""):m+=g}return d.length===1?d[0]:d}function readShort$1(a,s){if(s===1)return a.readUint16();for(var d=new Uint16Array(s),m=0;m<s;m++)d[m]=a.readUint16();return d}function readLong$1(a,s){if(s===1)return a.readUint32();for(var d=new Uint32Array(s),m=0;m<s;m++)d[m]=a.readUint32();return d}function readRational$1(a,s){if(s===1)return a.readUint32()/a.readUint32();for(var d=new Array(s),m=0;m<s;m++)d[m]=a.readUint32()/a.readUint32();return d}function readSByte$1(a,s){if(s===1)return a.readInt8();for(var d=new Int8Array(s),m=0;m<s;m++)d[m]=a.readInt8();return d}function readSShort$1(a,s){if(s===1)return a.readInt16();for(var d=new Int16Array(s),m=0;m<s;m++)d[m]=a.readInt16();return d}function readSLong$1(a,s){if(s===1)return a.readInt32();for(var d=new Int32Array(s),m=0;m<s;m++)d[m]=a.readInt32();return d}function readSRational$1(a,s){if(s===1)return a.readInt32()/a.readInt32();for(var d=new Array(s),m=0;m<s;m++)d[m]=a.readInt32()/a.readInt32();return d}function readFloat$1(a,s){if(s===1)return a.readFloat32();for(var d=new Float32Array(s),m=0;m<s;m++)d[m]=a.readFloat32();return d}function readDouble$1(a,s){if(s===1)return a.readFloat64();for(var d=new Float64Array(s),m=0;m<s;m++)d[m]=a.readFloat64();return d}const IOBuffer$1=IOBuffer_1,IFD$1=ifd,TiffIFD=tiffIfd,IFDValue=ifdValue,defaultOptions$d={ignoreImageData:!1,onlyFirst:!1};let TIFFDecoder$2=class extends IOBuffer$1{constructor(a,s){super(a,s),this._nextIFD=0}decode(a){a=Object.assign({},defaultOptions$d,a);const s=[];for(this.decodeHeader();this._nextIFD;)if(s.push(this.decodeIFD(a)),a.onlyFirst)return s[0];return s}decodeHeader(){let a=this.readUint16();if(a===18761)this.setLittleEndian();else if(a===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+a.toString(16));if(a=this.readUint16(),a!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(a){this.seek(this._nextIFD);var s;a.kind?s=new IFD$1(a.kind):s=new TiffIFD;const d=this.readUint16();for(var m=0;m<d;m++)this.decodeIFDEntry(s);return a.ignoreImageData||this.decodeImageData(s),this._nextIFD=this.readUint32(),s}decodeIFDEntry(a){const s=this.offset,d=this.readUint16(),m=this.readUint16(),f=this.readUint32();if(m<1||m>12){this.skip(4);return}IFDValue.getByteLength(m,f)>4&&this.seek(this.readUint32());const g=IFDValue.readData(this,m,f);if(a.fields.set(d,g),d===34665||d===34853){let x=this.offset,w;d===34665?w="exif":d===34853&&(w="gps"),this._nextIFD=g,a[w]=this.decodeIFD({kind:w,ignoreImageData:!0}),this.offset=x}this.seek(s),this.skip(12)}decodeImageData(a){const s=a.orientation;switch(s&&s!==1&&unsupported$1("orientation",s),a.type){case 1:case 2:this.readStripData(a);break;default:unsupported$1("image type",a.type);break}}readStripData(a){const s=a.width,d=a.height,m=validateBitDepth(a.bitsPerSample),f=a.sampleFormat;let g=s*d;const x=getDataArray$1(g,1,m,f),w=a.compression,C=a.rowsPerStrip*s,A=a.stripOffsets,_=a.stripByteCounts;for(var M=0,P=0;P<A.length;P++){var E=this.getStripData(w,A[P],_[P]),R=g>C?C:g;g-=R,m===8?M=fill8bit$1(x,E,M,R):m===16?M=fill16bit$1(x,E,M,R,this.isLittleEndian()):m===32&&f===3?M=fillFloat32$1(x,E,M,R,this.isLittleEndian()):unsupported$1("bitDepth",m)}a.data=x}getStripData(a,s,d){switch(a){case 1:return new DataView(this.buffer,s,d);case 2:case 32773:return unsupported$1("Compression",a);default:throw new Error("invalid compression: "+a)}}};var tiffDecoder=TIFFDecoder$2;function getDataArray$1(a,s,d,m){return d===8?new Uint8Array(a*s):d===16?new Uint16Array(a*s):d===32&&m===3?new Float32Array(a*s):unsupported$1("bit depth / sample format",d+" / "+m)}function fill8bit$1(a,s,d,m){for(var f=0;f<m;f++)a[d++]=s.getUint8(f);return d}function fill16bit$1(a,s,d,m,f){for(var g=0;g<m*2;g+=2)a[d++]=s.getUint16(g,f);return d}function fillFloat32$1(a,s,d,m,f){for(var g=0;g<m*4;g+=4)a[d++]=s.getFloat32(g,f);return d}function unsupported$1(a,s){throw new Error("Unsupported "+a+": "+s)}function validateBitDepth(a){if(a.length){const d=a;a=d[0];for(var s=0;s<d.length;s++)d[s]!==a&&unsupported$1("bit depth",d)}return a}const TIFFDecoder$1=tiffDecoder;var decode$2=function(a,s){return new TIFFDecoder$1(a,s).decode(s)};src$3.decode=decode$2;const IOBuffer=IOBuffer_1,tiff=src$3;function decode$1(a){const s=new IOBuffer(a),d={};if(s.setBigEndian(),s.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(s.readUint16()===65505){s.readUint16();const m=s.readBytes(6);if(m[0]===69&&m[1]===120&&m[2]===105&&m[3]===102&&m[4]===0&&m[5]===0){const f=tiff.decode(s,{onlyFirst:!0,ignoreImageData:!0,offset:s.offset});d.exif=f}}return d}var decode_1=decode$1,decode=decode_1,imageType$2={exports:{}},fileType$1={exports:{}};(function(module){const toBytes=a=>[...a].map(s=>s.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(a,s=0){let d=a[s],m=1,f=0;for(;++f<8;)m*=256,d+=a[s+f]*m;return d}const fileType=a=>{if(!(a instanceof Uint8Array||a instanceof ArrayBuffer||Buffer.isBuffer(a)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof a}\``);const s=a instanceof Uint8Array?a:new Uint8Array(a);if(!(s&&s.length>1))return null;const d=(f,g)=>{g=Object.assign({offset:0},g);for(let x=0;x<f.length;x++)if(g.mask){if(f[x]!==(g.mask[x]&s[x+g.offset]))return!1}else if(f[x]!==s[x+g.offset])return!1;return!0},m=(f,g)=>d(toBytes(f),g);if(d([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(d([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(d([71,73,70]))return{ext:"gif",mime:"image/gif"};if(d([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(d([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((d([73,73,42,0])||d([77,77,0,42]))&&d([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(d([73,73,42,0])||d([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(d([66,77]))return{ext:"bmp",mime:"image/bmp"};if(d([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(d([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(d([80,75,3,4])){if(d([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(d(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(m("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(m("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(m("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const f=(C,A=0)=>C.findIndex((_,M,P)=>M>=A&&P[M]===80&&P[M+1]===75&&P[M+2]===3&&P[M+3]===4);let g=0,x=!1,w=null;do{const C=g+30;if(x||(x=d(oxmlContentTypes,{offset:C})||d(oxmlRels,{offset:C})),w||(m("word/",{offset:C})?w={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:m("ppt/",{offset:C})?w={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:m("xl/",{offset:C})&&(w={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),x&&w)return w;g=f(s,C)}while(g>=0);if(w)return w}if(d([80,75])&&(s[2]===3||s[2]===5||s[2]===7)&&(s[3]===4||s[3]===6||s[3]===8))return{ext:"zip",mime:"application/zip"};if(d([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(d([82,97,114,33,26,7])&&(s[6]===0||s[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(d([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(d([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(d([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(d([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(d([51,103,112,53])||d([0,0,0])&&d([102,116,121,112],{offset:4})&&(d([109,112,52,49],{offset:8})||d([109,112,52,50],{offset:8})||d([105,115,111,109],{offset:8})||d([105,115,111,50],{offset:8})||d([109,109,112,52],{offset:8})||d([77,52,86],{offset:8})||d([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(d([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(d([26,69,223,163])){const f=s.subarray(4,4100),g=f.findIndex((x,w,C)=>C[w]===66&&C[w+1]===130);if(g!==-1){const x=g+3,w=C=>[...C].every((A,_)=>f[x+_]===A.charCodeAt(0));if(w("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(w("webm"))return{ext:"webm",mime:"video/webm"}}}if(d([0,0,0,20,102,116,121,112,113,116,32,32])||d([102,114,101,101],{offset:4})||d([102,116,121,112,113,116,32,32],{offset:4})||d([109,100,97,116],{offset:4})||d([109,111,111,118],{offset:4})||d([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(d([82,73,70,70])){if(d([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(d([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(d([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(d([48,38,178,117,142,102,207,17,166,217])){let f=30;do{const g=readUInt64LE(s,f+16);if(d([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:f})){if(d([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:f+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(d([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:f+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}f+=g}while(f+24<=s.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(d([0,0,1,186])||d([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(d([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let f=0;f<2&&f<s.length-16;f++){if(d([73,68,51],{offset:f})||d([255,226],{offset:f,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(d([255,228],{offset:f,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(d([255,248],{offset:f,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(d([255,240],{offset:f,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(d([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(d([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(d([79,103,103,83]))return d([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:d([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:d([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:d([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:d([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(d([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(d([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(d([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(d([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(d([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(d([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((s[0]===67||s[0]===70)&&d([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(d([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(d([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(d([119,79,70,70])&&(d([0,1,0,0],{offset:4})||d([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(d([119,79,70,50])&&(d([0,1,0,0],{offset:4})||d([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(d([76,80],{offset:34})&&(d([0,0,1],{offset:8})||d([1,0,2],{offset:8})||d([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(d([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(d([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(d([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(d([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(d([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(d([37,33]))return{ext:"ps",mime:"application/postscript"};if(d([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(d([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(d([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(d([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(d([77,83,67,70])||d([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(d([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(d([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(d([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(d([31,160])||d([31,157]))return{ext:"Z",mime:"application/x-compress"};if(d([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(d([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(d([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(d([71],{offset:4})&&(d([71],{offset:192})||d([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(d([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(d([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(d([0,0,0,12,106,80,32,32,13,10,135,10])){if(d([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(d([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(d([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(d([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(d([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(m("<?xml "))return{ext:"xml",mime:"application/xml"};if(d([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(d([102,116,121,112],{offset:4})){if(d([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(d([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(d([104,101,105,99],{offset:8})||d([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(d([104,101,118,99],{offset:8})||d([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return d([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:d([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:d([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:d([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:d([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:d([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:d([212,195,178,161])||d([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const a=new stream.PassThrough,s=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{a.fileType=fileType(s)}catch(d){reject(d)}readableStream.unshift(s),stream.pipeline?resolve(stream.pipeline(readableStream,a,()=>{})):resolve(readableStream.pipe(a))})})})(fileType$1);var fileTypeExports=fileType$1.exports;const fileType=fileTypeExports,imageExts=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),imageType=a=>{const s=fileType(a);return imageExts.has(s&&s.ext)?s:null};imageType$2.exports=imageType;imageType$2.exports.default=imageType;Object.defineProperty(imageType,"minimumBytes",{value:fileType.minimumBytes});var imageTypeExports=imageType$2.exports;const imageType$1=getDefaultExportFromCjs$1(imageTypeExports);function guessStripByteCounts(a){if(a.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const s=a.rowsPerStrip*a.width*a.samplesPerPixel*(a.bitsPerSample/8);return new Array(a.stripOffsets.length).fill(s)}function applyHorizontalDifferencing8Bit(a,s,d){let m=0;for(;m<a.length;){for(let f=d;f<s*d;f+=d)for(let g=0;g<d;g++)a[m+f+g]=a[m+f+g]+a[m+f-(d-g)]&255;m+=s*d}}function applyHorizontalDifferencing16Bit(a,s,d){let m=0;for(;m<a.length;){for(let f=d;f<s*d;f+=d)for(let g=0;g<d;g++)a[m+f+g]=a[m+f+g]+a[m+f-(d-g)]&65535;m+=s*d}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let a in tagsById$2)tagsByName$2[tagsById$2[a]]=Number(a);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let a in tagsById$1)tagsByName$1[tagsById$1[a]]=Number(a);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let a in tagsById)tagsByName[tagsById[a]]=Number(a);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(s){if(!s)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=s,this._hasMap=!1,this._map={}}get(s){if(typeof s=="number")return this.fields.get(s);if(typeof s=="string")return this.fields.get(tags[this.kind].tagsByName[s]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const s=tags[this.kind].tagsById;for(let d of this.fields.keys())s[d]&&(this._map[s[d]]=this.fields.get(d));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(a,s){const d=types.get(a);if(!d)throw new Error(`type not found: ${a}`);return d[0]*s}function readData(a,s,d){const m=types.get(s);if(!m)throw new Error(`type not found: ${s}`);return m[1](a,d)}function readByte(a,s){if(s===1)return a.readUint8();let d=new Uint8Array(s);for(let m=0;m<s;m++)d[m]=a.readUint8();return d}function readASCII(a,s){let d=[],m="";for(let f=0;f<s;f++){let g=String.fromCharCode(a.readUint8());g==="\0"?(d.push(m),m=""):m+=g}return d.length===1?d[0]:d}function readShort(a,s){if(s===1)return a.readUint16();let d=new Uint16Array(s);for(let m=0;m<s;m++)d[m]=a.readUint16();return d}function readLong(a,s){if(s===1)return a.readUint32();let d=new Uint32Array(s);for(let m=0;m<s;m++)d[m]=a.readUint32();return d}function readRational(a,s){if(s===1)return a.readUint32()/a.readUint32();let d=new Array(s);for(let m=0;m<s;m++)d[m]=a.readUint32()/a.readUint32();return d}function readSByte(a,s){if(s===1)return a.readInt8();let d=new Int8Array(s);for(let m=0;m<s;m++)d[m]=a.readInt8();return d}function readSShort(a,s){if(s===1)return a.readInt16();let d=new Int16Array(s);for(let m=0;m<s;m++)d[m]=a.readInt16();return d}function readSLong(a,s){if(s===1)return a.readInt32();let d=new Int32Array(s);for(let m=0;m<s;m++)d[m]=a.readInt32();return d}function readSRational(a,s){if(s===1)return a.readInt32()/a.readInt32();let d=new Array(s);for(let m=0;m<s;m++)d[m]=a.readInt32()/a.readInt32();return d}function readFloat(a,s){if(s===1)return a.readFloat32();let d=new Float32Array(s);for(let m=0;m<s;m++)d[m]=a.readFloat32();return d}function readDouble(a,s){if(s===1)return a.readFloat64();let d=new Float64Array(s);for(let m=0;m<s;m++)d[m]=a.readFloat64();return d}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let s=0;s<256;s++)stringTable.push([s]);const a=[];for(let s=256;s<4096;s++)stringTable.push(a)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(s){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(s.buffer,s.byteOffset,s.byteLength),this.outData=new IOBuffer$4(s.byteLength),this.initializeTable()}decode(){let s=0,d=0;for(;(s=this.getNextCode())!==EOI_CODE;)if(s===CLEAR_CODE){if(this.initializeTable(),s=this.getNextCode(),s===EOI_CODE)break;this.writeString(this.stringFromCode(s)),d=s}else if(this.isInTable(s))this.writeString(this.stringFromCode(s)),this.addStringToTable(this.stringFromCode(d).concat(this.stringFromCode(s)[0])),d=s;else{const f=this.stringFromCode(d).concat(this.stringFromCode(d)[0]);this.writeString(f),this.addStringToTable(f),d=s}const m=this.outData.toArray();return new DataView(m.buffer,m.byteOffset,m.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(s){this.outData.writeBytes(s)}stringFromCode(s){return stringTable[s]}isInTable(s){return s<this.tableLength}addStringToTable(s){if(stringTable[this.tableLength++]=s,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const s=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:s}}function decompressLzw(a){return new LzwDecoder(a).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let s=new Date,d=dateTimeRegex.exec(this.dateTime);if(d===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return s.setFullYear(Number(d[1]),Number(d[2])-1,Number(d[3])),s.setHours(Number(d[4]),Number(d[5]),Number(d[6])),s}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const s=this.get("BitsPerSample");return s&&typeof s!="number"?s[0]:s}get alpha(){const s=this.extraSamples;return s?s[0]!==0:!1}get associatedAlpha(){const s=this.extraSamples;return s?s[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const s=2**this.bitsPerSample,d=this.get("ColorMap");if(!d)return;if(d.length!==3*s)throw new Error(`ColorMap size must be ${s}`);const m=[];for(let f=0;f<s;f++)m.push([d[f],d[f+s],d[f+2*s]]);return m}}function alwaysArray(a){return typeof a=="number"?[a]:a}function decompressZlib(a){const s=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),d=inflate_1(s);return new DataView(d.buffer,d.byteOffset,d.byteLength)}const defaultOptions$c={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer$4{constructor(s){super(s),this._nextIFD=0}get isMultiPage(){let s=0;for(this.decodeHeader();this._nextIFD;)if(s++,this.decodeIFD({ignoreImageData:!0},!0),s===2)return!0;if(s===1)return!1;throw unsupported("ifdCount",s)}get pageCount(){let s=0;for(this.decodeHeader();this._nextIFD;)s++,this.decodeIFD({ignoreImageData:!0},!0);if(s>0)return s;throw unsupported("ifdCount",s)}decode(s={}){s=Object.assign({},defaultOptions$c,s);const d=[];for(this.decodeHeader();this._nextIFD;)if(d.push(this.decodeIFD(s,!0)),s.onlyFirst)return[d[0]];return d}decodeHeader(){const s=this.readUint16();if(s===18761)this.setLittleEndian();else if(s===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${s.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(s,d){this.seek(this._nextIFD);let m;if(d)m=new TiffIfd;else{if(!s.kind)throw new Error("kind is missing");m=new IFD(s.kind)}const f=this.readUint16();for(let g=0;g<f;g++)this.decodeIFDEntry(m);if(!s.ignoreImageData){if(!(m instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(m)}return this._nextIFD=this.readUint32(),m}decodeIFDEntry(s){const d=this.offset,m=this.readUint16(),f=this.readUint16(),g=this.readUint32();if(f<1||f>12){this.skip(4);return}getByteLength(f,g)>4&&this.seek(this.readUint32());const x=readData(this,f,g);if(s.fields.set(m,x),m===34665||m===34853){let w=this.offset,C="exif";m===34665?C="exif":m===34853&&(C="gps"),this._nextIFD=x,s[C]=this.decodeIFD({kind:C,ignoreImageData:!0},!1),this.offset=w}this.seek(d),this.skip(12)}decodeImageData(s){const d=s.orientation;if(d&&d!==1)throw unsupported("orientation",d);switch(s.type){case 0:case 1:case 2:case 3:this.readStripData(s);break;default:throw unsupported("image type",s.type)}if(this.applyPredictor(s),this.convertAlpha(s),s.type===0){const m=s.bitsPerSample,f=Math.pow(2,m)-1;for(let g=0;g<s.data.length;g++)s.data[g]=f-s.data[g]}}readStripData(s){const d=s.width,m=s.height,f=s.bitsPerSample,g=s.sampleFormat,x=d*m*s.samplesPerPixel,w=getDataArray(x,f,g),C=s.rowsPerStrip*d*s.samplesPerPixel,A=s.stripOffsets,_=s.stripByteCounts||guessStripByteCounts(s);let M=x,P=0;for(let E=0;E<A.length;E++){let R=new DataView(this.buffer,this.byteOffset+A[E],_[E]),B=M>C?C:M;M-=B;let z=R;switch(s.compression){case 1:break;case 5:{z=decompressLzw(R);break}case 8:{z=decompressZlib(R);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",s.compression)}P=this.fillUncompressed(f,g,w,z,P,B)}s.data=w}fillUncompressed(s,d,m,f,g,x){if(s===8)return fill8bit(m,f,g,x);if(s===16)return fill16bit(m,f,g,x,this.isLittleEndian());if(s===32&&d===3)return fillFloat32(m,f,g,x,this.isLittleEndian());throw unsupported("bitDepth",s)}applyPredictor(s){const d=s.bitsPerSample;switch(s.predictor){case 1:break;case 2:{if(d===8)applyHorizontalDifferencing8Bit(s.data,s.width,s.components);else if(d===16)applyHorizontalDifferencing16Bit(s.data,s.width,s.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${d}`);break}default:throw new Error(`invalid predictor: ${s.predictor}`)}}convertAlpha(s){if(s.alpha&&s.associatedAlpha){const{data:d,components:m,maxSampleValue:f}=s;for(let g=0;g<d.length;g+=m){const x=d[g+m-1];for(let w=0;w<m-1;w++)d[g+w]=Math.round(d[g+w]*f/x)}}}}function getDataArray(a,s,d){if(s===8)return new Uint8Array(a);if(s===16)return new Uint16Array(a);if(s===32&&d===3)return new Float32Array(a);throw unsupported("bit depth / sample format",`${s} / ${d}`)}function fill8bit(a,s,d,m){for(let f=0;f<m;f++)a[d++]=s.getUint8(f);return d}function fill16bit(a,s,d,m,f){for(let g=0;g<m*2;g+=2)a[d++]=s.getUint16(g,f);return d}function fillFloat32(a,s,d,m,f){for(let g=0;g<m*4;g+=4)a[d++]=s.getFloat32(g,f);return d}function unsupported(a,s){return new Error(`Unsupported ${a}: ${s}`)}function decodeTIFF(a,s){return new TIFFDecoder(a).decode(s)}function matchAndCrop(a={}){let{algorithm:s="matchToPrevious",ignoreBorder:d=[0,0]}=a;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let m=s==="matchToPrevious",f=this[0],g=[];g[0]={position:[0,0],image:this[0]};let x=[0,0];for(let P=1;P<this.length;P++){let E=f.getBestMatch(this[P],{border:d});g[P]={position:[E[0]+x[0],E[1]+x[1]],image:this[P]},m&&(x[0]+=E[0],x[1]+=E[1],f=this[P])}let w=0,C=0,A=0,_=0;for(let P=0;P<g.length;P++){let E=g[P];E.position[0]>w&&(w=E.position[0]),E.position[0]<C&&(C=E.position[0]),E.position[1]>A&&(A=E.position[1]),E.position[1]<_&&(_=E.position[1])}C=0-C,_=0-_;for(let P=0;P<g.length;P++){let E=g[P];E.crop=E.image.crop({x:w-E.position[0],y:A-E.position[1],width:f.width-C-w,height:f.height-_-A})}let M=[];for(let P=0;P<g.length;P++)M[P]=g[P].crop;return new Stack(M)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let a=this[0].min;for(let s=1;s<this.length;s++)for(let d=0;d<a.length;d++)a[d]=Math.min(a[d],this[s].min[d]);return a}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let a=this[0].max;for(let s=1;s<this.length;s++)for(let d=0;d<a.length;d++)a[d]=Math.max(a[d],this[s].max[d]);return a}function median$2(a){let s=a.reduce((x,w)=>x+w);if(s===0)throw new Error("unreachable");let d=0,m=0,f=s/2,g;for(;;){if(a[d]>0){if(g!==void 0)return(g+d)/2;if(m+=a[d],m>f)return d;m===f&&(g=d)}d++}}function mean$2(a){let s=0,d=0;for(let m=0;m<a.length;m++)s+=a[m],d+=a[m]*m;return s===0?0:d/s}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let a=this.getHistograms({maxSlots:this[0].maxValue+1}),s=new Array(a.length);for(let d=0;d<a.length;d++){let m=a[d];s[d]=median$2(m)}return s}function histogram(a){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].getHistogram(a);for(let d=1;d<this.length;d++){let m=this[d].getHistogram(a);for(let f=0;f<s.length;f++)s[f]+=m[f]}return s}function histograms(a){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].getHistograms(a),d=s[0].length;for(let m=1;m<this.length;m++){let f=this[m].getHistograms(a);for(let g=0;g<s.length;g++)for(let x=0;x<d;x++)s[g][x]+=f[g][x]}return s}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let a=new Uint32Array(this[0].data.length);for(let m=0;m<this.length;m++){let f=this[m];for(let g=0;g<this[0].data.length;g++)a[g]+=f.data[g]}let s=Image$1.createFrom(this[0]),d=s.data;for(let m=0;m<this[0].data.length;m++)d[m]=a[m]/this.length;return s}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let a=Image$1.createFrom(this[0]);a.data.fill(0);for(const s of this)for(let d=0;d<a.data.length;d++)a.data[d]=Math.max(s.data[d],a.data[d]);return a}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let a=Image$1.createFrom(this[0]);a.data.fill(a.maxValue);for(const s of this)for(let d=0;d<a.data.length;d++)a.data[d]=Math.min(s.data[d],a.data[d]);return a}function extend$2(a){a.extendMethod("matchAndCrop",matchAndCrop),a.extendMethod("getMin",min$2),a.extendMethod("getMax",max$2),a.extendMethod("getMedian",median$1),a.extendMethod("getHistogram",histogram),a.extendMethod("getHistograms",histograms),a.extendMethod("getAverage",averageImage),a.extendMethod("getAverageImage",averageImage),a.extendMethod("getMaxImage",maxImage),a.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(s){if(Array.isArray(s)){super(s.length);for(let d=0;d<s.length;d++)this[d]=s[d]}else typeof s=="number"?super(s):super();this.computed=null}static load(s){return Promise.all(s.map(Image$1.load)).then(d=>new Stack(d))}static extendMethod(s,d,m={}){let{inPlace:f=!1,returnThis:g=!0,partialArgs:x=[]}=m;return f?Stack.prototype[s]=function(...w){this.computed=null;let C=d.apply(this,[...x,...w]);return g?this:C}:Stack.prototype[s]=function(...w){return d.apply(this,[...x,...w])},Stack}static extendProperty(s,d,m={}){let{partialArgs:f=[]}=m;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(s,this.computed))return this.computed[s];let g=d.apply(this,f);return this.computed[s]=g,g},Object.defineProperty(Stack.prototype,s,computedPropertyDescriptor),Stack}checkProcessable(s,d={}){if(typeof s!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${s} can not be applied on an empty stack`);this[0].checkProcessable(s,d);for(let m=1;m<this.length;m++){if((d.sameSize===void 0||d.sameSize)&&this[0].width!==this[m].width)throw new TypeError(`The process: ${s} can not be applied if width is not identical in all images`);if((d.sameSize===void 0||d.sameSize)&&this[0].height!==this[m].height)throw new TypeError(`The process: ${s} can not be applied if height is not identical in all images`);if((d.sameAlpha===void 0||d.sameAlpha)&&this[0].alpha!==this[m].alpha)throw new TypeError(`The process: ${s} can not be applied if alpha is not identical in all images`);if((d.sameBitDepth===void 0||d.sameBitDepth)&&this[0].bitDepth!==this[m].bitDepth)throw new TypeError(`The process: ${s} can not be applied if bitDepth is not identical in all images`);if((d.sameColorModel===void 0||d.sameColorModel)&&this[0].colorModel!==this[m].colorModel)throw new TypeError(`The process: ${s} can not be applied if colorModel is not identical in all images`);if((d.sameNumberChannels===void 0||d.sameNumberChannels)&&this[0].channels!==this[m].channels)throw new TypeError(`The process: ${s} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(a,s){if(typeof a!="function")throw new TypeError(`${a} is not a function`);let d=new Stack(this.length);for(let m=0;m<this.length;m++)d[m]=a.call(s,this[m],m,this);return d});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(a,s){if(typeof a=="string")return loadURL(a,s);if(a instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(a),void 0,s&&s.ignorePalette));if(a.buffer)return Promise.resolve(loadBinary(a,void 0,s&&s.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(a,s,d){const m=imageType$1(a);if(m)switch(m.mime){case"image/png":return loadPNG(a);case"image/jpeg":return loadJPEG(a);case"image/tiff":return loadTIFF(a,d);default:return loadGeneric(f(m.mime))}return loadGeneric(f("application/octet-stream"));function f(g){return s||toBase64URL(a,g)}}function loadURL(a,s){const d=a.slice(0,64).match(isDataURL);let m;return d!==null?m=Promise.resolve(decode$3(a.slice(d[0].length))):m=fetchBinary(a,s),m.then(f=>{const g=new Uint8Array(f);return loadBinary(g,d?a:void 0,s&&s.ignorePalette)})}function loadPNG(a){const s=decodePng(a);let d=s.channels,m,f=0;return d===2||d===4?(m=d-1,f=1):m=d,s.palette?loadPNGFromPalette(s):new Image$1(s.width,s.height,s.data,{components:m,alpha:f,bitDepth:s.depth})}function loadPNGFromPalette(a){const s=a.width*a.height,d=a.palette[0].length,m=new Uint8Array(s*d),f=8/a.depth,g=a.depth<8?f:1,x=parseInt("1".repeat(a.depth),2),w=d===4;let C=0;for(let A=0;A<s;A++){const _=Math.floor(A/g);let M=a.data[_];a.depth<8&&(M=M>>>a.depth*(f-1-A%f)&x);const P=a.palette[M];m[C++]=P[0],m[C++]=P[1],m[C++]=P[2],w&&(m[C++]=P[3])}return new Image$1(a.width,a.height,m,{components:3,alpha:w,bitDepth:8})}function loadJPEG(a){const s=decode(a);let d;s.exif&&(d=getMetadata(s.exif));const m=jpegJs.decode(a,{useTArray:!0,maxMemoryUsageInMB:1024});let f=new Image$1(m.width,m.height,m.data,{meta:d});if(d&&d.tiff.tags.Orientation){const g=d.tiff.tags.Orientation;g>2&&(f=f.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[g])),[2,4,5,7].includes(g)&&(f=f.flipX())}return f}function loadTIFF(a,s){let d=decodeTIFF(a);return d.length===1?getImageFromIFD(d[0],s):new Stack(d.map(function(m){return getImageFromIFD(m,s)}))}function getMetadata(a){const s={tiff:{fields:a.fields,tags:a.map}};return a.exif&&(s.exif=a.exif),a.gps&&(s.gps=a.gps),s}function getImageFromIFD(a,s){if(!s&&a.type===3){const d=new Uint16Array(3*a.width*a.height),m=a.palette;let f=0;for(let g=0;g<a.data.length;g++){const x=a.data[g],w=m[x];d[f++]=w[0],d[f++]=w[1],d[f++]=w[2]}return new Image$1(a.width,a.height,d,{components:3,alpha:a.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(a)})}else return new Image$1(a.width,a.height,a.data,{components:a.type===2?3:1,alpha:a.alpha,colorModel:a.type===2?RGB$1:GREY$1,bitDepth:a.bitsPerSample.length?a.bitsPerSample[0]:a.bitsPerSample,meta:getMetadata(a)})}function loadGeneric(a,s){return s=s||{},new Promise(function(d,m){let f=new DOMImage;f.onload=function(){let g=f.width,x=f.height,w=createCanvas(g,x).getContext("2d");w.drawImage(f,0,0,g,x);let C=w.getImageData(0,0,g,x).data;d(new Image$1(g,x,C,s))},f.onerror=function(){m(new Error(`Could not load ${a}`))},f.src=a})}const valueMethods={getValueXY(a,s,d){return this.data[(s*this.width+a)*this.channels+d]},setValueXY(a,s,d,m){return this.data[(s*this.width+a)*this.channels+d]=m,this.computed=null,this},getValue(a,s){return this.data[a*this.channels+s]},setValue(a,s,d){return this.data[a*this.channels+s]=d,this.computed=null,this},getPixelXY(a,s){return this.getPixel(s*this.width+a)},setPixelXY(a,s,d){return this.setPixel(s*this.width+a,d)},getPixel(a){const s=new Array(this.channels),d=a*this.channels;for(let m=0;m<this.channels;m++)s[m]=this.data[d+m];return s},setPixel(a,s){const d=a*this.channels;for(let m=0;m<s.length;m++)this.data[d+m]=s[m];return this.computed=null,this}};function setValueMethods(a){for(const s in valueMethods)a.prototype[s]=valueMethods[s]}function getImageParameters(a){return{width:a.width,height:a.height,components:a.components,alpha:a.alpha,colorModel:a.colorModel,bitDepth:a.bitDepth}}function getOutputImage(a,s,d,m={}){const{out:f}=s;if(f===void 0)return m.copy?a.clone():Image$1.createFrom(a,d);{if(!Image$1.isImage(f))throw new TypeError("out must be an Image object");const g=Object.assign(getImageParameters(a),d);for(const x in g)if(f[x]!==g[x])throw new RangeError(`cannot use out. Its ${x} must be "${g[x]}" (found "${f[x]}")`);return f}}function getOutputImageOrInPlace(a,s,d){if(s.inPlace!==void 0&&typeof s.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(s.inPlace){if(s.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return a}return getOutputImage(a,s,null,d)}function abs(a={}){this.checkProcessable("abs",{bitDepth:[32]});const s=getOutputImageOrInPlace(this,a);return absolute(this,s),s}function absolute(a,s){for(let d=0;d<a.data.length;d++)s.data[d]=Math.abs(a.data[d])}function copyAlphaChannel(a,s){if(a.alpha===1&&s.alpha===1)for(let d=0;d<a.size;d++)s.data[d*s.channels+s.components]=a.data[d*a.channels+a.components]}function invert(a={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const s=getOutputImageOrInPlace(this,a);return this.bitDepth===1?invertBinary(this,s):(invertColor(this,s),this!==s&&copyAlphaChannel(this,s)),s}function invertBinary(a,s){for(let d=0;d<a.data.length;d++)s.data[d]=~a.data[d]}function invertColor(a,s){for(let d=0;d<a.data.length;d+=a.channels)for(let m=0;m<a.components;m++)s.data[d+m]=a.maxValue-a.data[d+m]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let a=0;a<this.height;a++){let s=a*this.width*this.channels;for(let d=0;d<Math.floor(this.width/2);d++){let m=d*this.channels+s,f=(this.width-d-1)*this.channels+s;for(let g=0;g<this.channels;g++){let x=this.data[m+g];this.data[m+g]=this.data[f+g],this.data[f+g]=x}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let a=0;a<Math.floor(this.height/2);a++)for(let s=0;s<this.width;s++){let d=s*this.channels+a*this.width*this.channels,m=s*this.channels+(this.height-1-a)*this.channels*this.width;for(let f=0;f<this.channels;f++){let g=this.data[d+f];this.data[d+f]=this.data[m+f],this.data[m+f]=g}}return this}function blurFilter(a={}){const{radius:s=1}=a;if(s<1)throw new Error("radius must be greater than 1");const d=2*s+1,m=new Array(d);for(let f=0;f<d;f++){m[f]=new Array(d);for(let g=0;g<d;g++)m[f][g]=1/(d*d)}return this.convolution(m)}var medianQuickselect_min={exports:{}};(function(a){(function(){function s(f){for(var g=0,x=f.length-1,w=void 0,C=void 0,A=void 0,_=m(g,x);;){if(x<=g)return f[_];if(x==g+1)return f[g]>f[x]&&d(f,g,x),f[_];for(w=m(g,x),f[w]>f[x]&&d(f,w,x),f[g]>f[x]&&d(f,g,x),f[w]>f[g]&&d(f,w,g),d(f,w,g+1),C=g+1,A=x;;){do C++;while(f[g]>f[C]);do A--;while(f[A]>f[g]);if(A<C)break;d(f,C,A)}d(f,g,A),A<=_&&(g=C),A>=_&&(x=A-1)}}var d=function(f,g,x){var w;return w=[f[x],f[g]],f[g]=w[0],f[x]=w[1],w},m=function(f,g){return~~((f+g)/2)};a.exports?a.exports=s:window.median=s})()})(medianQuickselect_min);var medianQuickselect_minExports=medianQuickselect_min.exports;const quickSelectMedian=getDefaultExportFromCjs$1(medianQuickselect_minExports);function validateArrayOfChannels(a,s={}){let{channels:d,allowAlpha:m,defaultAlpha:f}=s;return typeof m!="boolean"&&(m=!0),typeof d>"u"?allChannels(a,f):validateChannels(a,d,m)}function allChannels(a,s){let d=s?a.channels:a.components,m=new Array(d);for(let f=0;f<d;f++)m[f]=f;return m}function validateChannels(a,s,d){Array.isArray(s)||(s=[s]);for(let m=0;m<s.length;m++)s[m]=validateChannel(a,s[m],d);return s}function validateChannel(a,s,d=!0){if(s===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${a.channels}`);if(typeof s=="string"){switch(a.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(s))switch(s){case"r":s=0;break;case"g":s=1;break;case"b":s=2;break}break;case HSL:if("hsl".includes(s))switch(s){case"h":s=0;break;case"s":s=1;break;case"l":s=2;break}break;case HSV:if("hsv".includes(s))switch(s){case"h":s=0;break;case"s":s=1;break;case"v":s=2;break}break;case CMYK$1:if("cmyk".includes(s))switch(s){case"c":s=0;break;case"m":s=1;break;case"y":s=2;break;case"k":s=3;break}break;default:throw new Error(`Unexpected color model: ${a.colorModel}`)}if(s==="a"){if(!a.alpha)throw new Error("validateChannel : the image does not contain alpha channel");s=a.components}if(typeof s=="string")throw new Error(`validateChannel : undefined channel: ${s}`)}if(s>=a.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${a.channels}`);if(!d&&s>=a.components)throw new RangeError("validateChannel : alpha channel may not be selected");return s}function medianFilter(a={}){let{radius:s=1,border:d="copy",channels:m}=a;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),s<1)throw new Error("radius must be greater than 0");m=validateArrayOfChannels(this,m);let f=s,g=s,x=Image$1.createFrom(this),w=(f*2+1)*(g*2+1),C=new Array(w);for(let A=0;A<m.length;A++){let _=m[A];for(let M=g;M<this.height-g;M++)for(let P=f;P<this.width-f;P++){let E=0;for(let B=-g;B<=g;B++)for(let z=-f;z<=f;z++){let F=((M+B)*this.width+P+z)*this.channels+_;C[E++]=this.data[F]}let R=(M*this.width+P)*this.channels+_;x.data[R]=quickSelectMedian(C)}}if(this.alpha&&!m.includes(this.channels))for(let A=this.components;A<this.data.length;A=A+this.channels)x.data[A]=this.data[A];return x.setBorder({size:[f,g],algorithm:d}),x}function gaussianFilter(a={}){let{radius:s=1,sigma:d,channels:m,border:f="copy"}=a;this.checkProcessable("gaussian",{bitDepth:[8,16]});const g=getKernel(s,d);return this.convolution([g,g],{border:f,channels:m,algorithm:"separable"})}function getKernel(a,s){const d=a*2+1,m=new Array(d),f=s||((d-1)*.5-1)*.3+.8,g=-.5/(f*f);let x=0;for(let w=0;w<d;w++){const C=w-a,A=Math.exp(g*C*C);m[w]=A,x+=A}for(let w=0;w<d;w++)m[w]/=x;return m}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={};(function(a){(function(){var s;s=a;var d={release:"0.3.0",date:"2013-03"};s.toString=function(){return"version "+d.release+", released "+d.date};for(var m=0,f=null,g=null,x={init:function(A){if(A!==0&&!(A&A-1))m=A,x._initArray(),x._makeBitReversalTable(),x._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(A,_){x.fft(A,_,1)},ifft1d:function(A,_){var M=1/m;x.fft(A,_,-1);for(var P=0;P<m;P++)A[P]*=M,_[P]*=M},bt1d:function(A,_){x.fft(A,_,-1)},fft2d:function(A,_){for(var M=[],P=[],E=0,R=0;R<m;R++){E=R*m;for(var B=0;B<m;B++)M[B]=A[B+E],P[B]=_[B+E];x.fft1d(M,P);for(var z=0;z<m;z++)A[z+E]=M[z],_[z+E]=P[z]}for(var F=0;F<m;F++){for(var I=0;I<m;I++)E=F+I*m,M[I]=A[E],P[I]=_[E];x.fft1d(M,P);for(var L=0;L<m;L++)E=F+L*m,A[E]=M[L],_[E]=P[L]}},ifft2d:function(A,_){for(var M=[],P=[],E=0,R=0;R<m;R++){E=R*m;for(var B=0;B<m;B++)M[B]=A[B+E],P[B]=_[B+E];x.ifft1d(M,P);for(var z=0;z<m;z++)A[z+E]=M[z],_[z+E]=P[z]}for(var F=0;F<m;F++){for(var I=0;I<m;I++)E=F+I*m,M[I]=A[E],P[I]=_[E];x.ifft1d(M,P);for(var L=0;L<m;L++)E=F+L*m,A[E]=M[L],_[E]=P[L]}},fft:function(A,_,M){for(var P,E,R,B,z,F,I,L,W,G=m>>2,q=0;q<m;q++)B=f[q],q<B&&(z=A[q],A[q]=A[B],A[B]=z,z=_[q],_[q]=_[B],_[B]=z);for(var K=1;K<m;K<<=1){E=0,P=m/(K<<1);for(var Z=0;Z<K;Z++){F=g[E+G],I=M*g[E];for(var J=Z;J<m;J+=K<<1)R=J+K,L=F*A[R]+I*_[R],W=F*_[R]-I*A[R],A[R]=A[J]-L,A[J]+=L,_[R]=_[J]-W,_[J]+=W;E+=P}}},_initArray:function(){typeof Uint32Array<"u"?f=new Uint32Array(m):f=[],typeof Float64Array<"u"?g=new Float64Array(m*1.25):g=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var A=0,_=0,M=0;for(f[0]=0;++A<m;){for(M=m>>1;M<=_;)_-=M,M>>=1;_+=M,f[A]=_}},_makeCosSinTable:function(){var A=m>>1,_=m>>2,M=m>>3,P=A+_,E=Math.sin(Math.PI/m),R=2*E*E,B=Math.sqrt(R*(2-R)),z=g[_]=1,F=g[0]=0;E=2*R;for(var I=1;I<M;I++)z-=R,R+=E*z,F+=B,B-=E*F,g[I]=F,g[_-I]=z;M!==0&&(g[M]=Math.sqrt(.5));for(var L=0;L<_;L++)g[A-L]=g[L];for(var W=0;W<P;W++)g[W+A]=-g[W]}},w=["init","fft1d","ifft1d","fft2d","ifft2d"],C=0;C<w.length;C++)s[w[C]]=x[w[C]];return s.bt=x.bt1d,s.fft=x.fft1d,s.ifft=x.ifft1d,s}).call(commonjsGlobal$1)})(fftlib);var FFT$1=fftlib,FFTUtils$1={DEBUG:!1,ifft2DArray:function(a,s,d){var m=new Array(s*d),f=s/2,g=(d-1)*2;FFT$1.init(f);for(var x={re:new Array(f),im:new Array(f)},w=0;w<d;w++){for(var C=f-1;C>=0;C--)x.re[C]=a[C*2*d+w],x.im[C]=a[(C*2+1)*d+w];FFT$1.bt(x.re,x.im);for(var C=f-1;C>=0;C--)m[C*2*d+w]=x.re[C],m[(C*2+1)*d+w]=x.im[C]}var A=new Array(f*g);FFT$1.init(g);for(var _={re:new Array(g),im:new Array(g)},M=g*f,C=0;C<s;C+=2){_.re[0]=m[C*d],_.im[0]=m[(C+1)*d];for(var w=1;w<d;w++)_.re[w]=m[C*d+w],_.im[w]=m[(C+1)*d+w],_.re[g-w]=m[C*d+w],_.im[g-w]=-m[(C+1)*d+w];FFT$1.bt(_.re,_.im);for(var P=C/2*g,w=g-1;w>=0;w--)A[P+w]=_.re[w]/M}return A},fft2DArray:function(a,s,d,m){Object.assign({},{inplace:!0});var f=d/2+1,g=s*2,x=new Array(g*f);FFT$1.init(d);for(var w={re:new Array(d),im:new Array(d)},C={re:new Array(d),im:new Array(d)},A={re:new Array(d),im:new Array(d)},_,M,P,E,R,B=0;B<s/2;B++){_=B*2*d,w.re=a.slice(_,_+d),_=(B*2+1)*d,w.im=a.slice(_,_+d),FFT$1.fft1d(w.re,w.im),this.reconstructTwoRealFFT(w,C,A),M=B*4*f,P=(B*4+1)*f,E=(B*4+2)*f,R=(B*4+3)*f;for(var z=f-1;z>=0;z--)x[M+z]=C.re[z],x[P+z]=C.im[z],x[E+z]=A.re[z],x[R+z]=A.im[z]}C=null,A=null;var F=new Array(g*f);FFT$1.init(s);for(var I={re:new Array(s),im:new Array(s)},L=f-1;L>=0;L--){for(var B=s-1;B>=0;B--)I.re[B]=x[B*2*f+L],I.im[B]=x[(B*2+1)*f+L],isNaN(I.re[B])&&(I.re[B]=0),isNaN(I.im[B])&&(I.im[B]=0);FFT$1.fft1d(I.re,I.im);for(var B=s-1;B>=0;B--)F[B*2*f+L]=I.re[B],F[(B*2+1)*f+L]=I.im[B]}return F},reconstructTwoRealFFT:function(a,s,d){var m=a.re.length;s.re[0]=a.re[0],s.im[0]=0,d.re[0]=a.im[0],d.im[0]=0;for(var f,g,x,w,C,A=m/2;A>0;A--)C=m-A,f=.5*(a.re[A]-a.re[C]),g=.5*(a.re[A]+a.re[C]),x=.5*(a.im[A]-a.im[C]),w=.5*(a.im[A]+a.im[C]),s.re[A]=g,s.im[A]=x,s.re[C]=g,s.im[C]=-x,d.re[A]=w,d.im[A]=-f,d.re[C]=w,d.im[C]=f},convolute2DI:function(a,s,d,m){for(var f,g,x=0;x<d/2;x++)for(var w=0;w<m;w++)f=a[x*2*m+w]*s[x*2*m+w]-a[(x*2+1)*m+w]*s[(x*2+1)*m+w],g=a[x*2*m+w]*s[(x*2+1)*m+w]+a[(x*2+1)*m+w]*s[x*2*m+w],a[x*2*m+w]=f,a[(x*2+1)*m+w]=g},convolute:function(a,s,d,m,f){for(var g=new Array(m*d),x=0;x<d*m;x++)g[x]=a[x];g=this.fft2DArray(g,d,m);for(var w=s.length,C=s[0].length,A=new Array(m*d),x=0;x<m*d;x++)A[x]=0;for(var _,M,P=Math.floor((w-1)/2),E=Math.floor((C-1)/2),R=0;R<w;R++){_=(R-P+d)%d;for(var B=0;B<C;B++)M=(B-E+m)%m,A[_*m+M]=s[R][B]}A=this.fft2DArray(A,d,m);var z=d*2,F=m/2+1;return this.convolute2DI(g,A,z,F),this.ifft2DArray(g,z,F)},toRadix2:function(a,s,d){var m,f,g,x,w=d,C=s;if(!(d!==0&&!(d&d-1))){for(w=0;d>>++w;);w=1<<w}if(!(s!==0&&!(s&s-1))){for(C=0;s>>++C;);C=1<<C}if(C==s&&w==d)return{data:a,rows:s,cols:d};var A=new Array(C*w),_=Math.floor((C-s)/2)-s,M=Math.floor((w-d)/2)-d;for(m=0;m<C;m++)for(g=m*w,x=(m-_)%s*d,f=0;f<w;f++)A[g+f]=a[x+(f-M)%d];return{data:A,rows:C,cols:w}},crop:function(a,s,d,m,f,g){if(s==m&&d==f)return a;Object.assign({},g);var x=new Array(f*m),w=Math.floor((s-m)/2),C=Math.floor((d-f)/2),A,_,M,P;for(M=0;M<m;M++)for(A=M*f,_=(M+w)*d,P=0;P<f;P++)x[A+P]=a[_+(P+C)];return x}},FFTUtils_1=FFTUtils$1;src$2.FFTUtils=FFTUtils_1;src$2.FFT=fftlib;var FFTUtils=src$2.FFTUtils;function convolutionFFT(a,s,d){var m=matrix2Array(a),f=m.data,g=Object.assign({normalize:!1,divisor:1,rows:m.rows,cols:m.cols},d),x,w;if(g.rows&&g.cols)x=g.rows,w=g.cols;else throw new Error("Invalid number of rows or columns "+x+" "+w);var C=g.divisor,A,_,M=s.length,P=s[0].length;if(g.normalize)for(C=0,A=0;A<M;A++)for(_=0;_<P;_++)C+=s[A][_];if(C===0)throw new RangeError("convolution: The divisor is equal to zero");var E=FFTUtils.toRadix2(f,x,w),R=FFTUtils.convolute(E.data,s,E.rows,E.cols);if(R=FFTUtils.crop(R,E.rows,E.cols,x,w),C!=0&&C!=1)for(A=0;A<R.length;A++)R[A]/=C;return R}function convolutionDirect(a,s,d){var m=matrix2Array(a),f=m.data,g=Object.assign({normalize:!1,divisor:1,rows:m.rows,cols:m.cols},d),x,w;if(g.rows&&g.cols)x=g.rows,w=g.cols;else throw new Error("Invalid number of rows or columns "+x+" "+w);var C=g.divisor,A=s.length,_=s[0].length,M,P,E,R,B,z,F,I,L;if(g.normalize)for(C=0,M=0;M<A;M++)for(P=0;P<_;P++)C+=s[M][P];if(C===0)throw new RangeError("convolution: The divisor is equal to zero");var W=new Array(x*w),G=Math.floor(A/2),q=Math.floor(_/2);for(R=0;R<x;R++)for(E=0;E<w;E++){for(z=0,P=0;P<A;P++)for(M=0;M<_;M++)F=s[A-P-1][_-M-1],I=(R+P-G+x)%x,L=(E+M-q+w)%w,B=I*w+L,z+=f[B]*F;B=R*w+E,W[B]=z/C}return W}function LoG(a,s,d){var m=1e3;d&&d.factor&&(m=d.factor);var f=new Array(s),g,x,w,C;m*=-1;var A=(s-1)/2,_=2*a*a;for(g=0;g<s;g++)for(f[g]=new Array(s),C=(g-A)*(g-A),x=0;x<s;x++)w=-((x-A)*(x-A)+C)/_,f[g][x]=Math.round(m*(1+w)*Math.exp(w));return f}function matrix2Array(a){var s=a,d,m;if(typeof a[0]!="number"){d=a.length,m=a[0].length,s=new Array(d*m);for(var f=0;f<d;f++)for(var g=0;g<m;g++)s[f*m+g]=a[f][g]}else{var x=Math.sqrt(a.length);Number.isInteger(x)&&(d=x,m=x)}return{data:s,rows:d,cols:m}}var src$1={fft:convolutionFFT,direct:convolutionDirect,kernelFactory:{LoG},matrix2Array},_isFinite=Number.isFinite||function(a){return!(typeof a!="number"||a!==a||a===1/0||a===-1/0)},isFinite$1=_isFinite,isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite$1(a)&&Math.floor(a)===a};const isInteger$1=getDefaultExportFromCjs$1(isInteger);function validateKernel(a){let s,d;if(Array.isArray(a))if(Array.isArray(a[0])){if(!(a.length&1)||!(a[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");s=Math.floor(a.length/2),d=Math.floor(a[0].length/2)}else{let m=Math.sqrt(a.length);if(isInteger$1(m))d=s=Math.floor(Math.sqrt(a.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let f=new Array(m);for(let g=0;g<m;g++){f[g]=new Array(m);for(let x=0;x<m;x++)f[g][x]=a[g*m+x]}a=f}else throw new Error(`validateKernel: Invalid Kernel: ${a}`);return{kernel:a,kWidth:d,kHeight:s}}function clamp(a,s){return Math.round(Math.min(Math.max(a,0),s.maxValue))}function directConvolution(a,s,d){if(d===void 0){const g=a.length+s.length-1;d=new Array(g)}fill(d);for(var m=0;m<a.length;m++)for(var f=0;f<s.length;f++)d[m+f]+=a[m]*s[f];return d}function fill(a){for(var s=0;s<a.length;s++)a[s]=0}function convolutionSeparable(a,s,d,m){const f=new Array(a.length);let g,x,w,C;C=s[1],w=(C.length-1)/2,x=new Array(d+C.length-1),g=new Array(d);for(let A=0;A<m;A++){for(let _=0;_<d;_++)g[_]=a[A*d+_];directConvolution(g,C,x);for(let _=0;_<d;_++)f[A*d+_]=x[w+_]}C=s[0],w=(C.length-1)/2,x=new Array(m+C.length-1),g=new Array(m);for(let A=0;A<d;A++){for(let _=0;_<m;_++)g[_]=f[_*d+A];directConvolution(g,C,x);for(let _=0;_<m;_++)f[_*d+A]=x[w+_]}return f}var matrix={};const toString$1=Object.prototype.toString;function isAnyArray$1(a){const s=toString$1.call(a);return s.endsWith("Array]")&&!s.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:isAnyArray$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(libEsm);function max$1(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(a))throw new TypeError("input must be an array");if(a.length===0)throw new TypeError("input must not be empty");var d=s.fromIndex,m=d===void 0?0:d,f=s.toIndex,g=f===void 0?a.length:f;if(m<0||m>=a.length||!Number.isInteger(m))throw new Error("fromIndex must be a positive integer smaller than length");if(g<=m||g>a.length||!Number.isInteger(g))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var x=a[m],w=m+1;w<g;w++)a[w]>x&&(x=a[w]);return x}function min$1(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(a))throw new TypeError("input must be an array");if(a.length===0)throw new TypeError("input must not be empty");var d=s.fromIndex,m=d===void 0?0:d,f=s.toIndex,g=f===void 0?a.length:f;if(m<0||m>=a.length||!Number.isInteger(m))throw new Error("fromIndex must be a positive integer smaller than length");if(g<=m||g>a.length||!Number.isInteger(g))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var x=a[m],w=m+1;w<g;w++)a[w]<x&&(x=a[w]);return x}function rescale$1(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray$1(a)){if(a.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var d;if(s.output!==void 0){if(!isAnyArray$1(s.output))throw new TypeError("output option must be an array if specified");d=s.output}else d=new Array(a.length);var m=min$1(a),f=max$1(a);if(m===f)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var g=s.min,x=g===void 0?s.autoMinMax?m:0:g,w=s.max,C=w===void 0?s.autoMinMax?f:1:w;if(x>=C)throw new RangeError("min option must be smaller than max option");for(var A=(C-x)/(f-m),_=0;_<a.length;_++)d[_]=(a[_]-m)*A+x;return d}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);Object.defineProperty(matrix,"__esModule",{value:!0});var isAnyArray=require$$0$1,rescale=require$$1;const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(a,s={}){const{maxRows:d=15,maxColumns:m=10,maxNumSize:f=8,padMinus:g="auto"}=s;return`${a.constructor.name} {
${indent}[
${indentData}${inspectData(a,d,m,f,g)}
${indent}]
${indent}rows: ${a.rows}
${indent}columns: ${a.columns}
}`}function inspectData(a,s,d,m,f){const{rows:g,columns:x}=a,w=Math.min(g,s),C=Math.min(x,d),A=[];if(f==="auto"){f=!1;e:for(let _=0;_<w;_++)for(let M=0;M<C;M++)if(a.get(_,M)<0){f=!0;break e}}for(let _=0;_<w;_++){let M=[];for(let P=0;P<C;P++)M.push(formatNumber(a.get(_,P),m,f));A.push(`${M.join(" ")}`)}return C!==x&&(A[A.length-1]+=` ... ${x-d} more columns`),w!==g&&A.push(`... ${g-s} more rows`),A.join(`
${indentData}`)}function formatNumber(a,s,d){return(a>=0&&d?` ${formatNumber2(a,s-1)}`:formatNumber2(a,s)).padEnd(s)}function formatNumber2(a,s){let d=a.toString();if(d.length<=s)return d;let m=a.toFixed(s);if(m.length>s&&(m=a.toFixed(Math.max(0,s-(m.length-s)))),m.length<=s&&!m.startsWith("0.000")&&!m.startsWith("-0.000"))return m;let f=a.toExponential(s);return f.length>s&&(f=a.toExponential(Math.max(0,s-(f.length-s)))),f.slice(0)}function installMathOperations(a,s){a.prototype.add=function(d){return typeof d=="number"?this.addS(d):this.addM(d)},a.prototype.addS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)+d);return this},a.prototype.addM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)+d.get(m,f));return this},a.add=function(d,m){return new s(d).add(m)},a.prototype.sub=function(d){return typeof d=="number"?this.subS(d):this.subM(d)},a.prototype.subS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)-d);return this},a.prototype.subM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)-d.get(m,f));return this},a.sub=function(d,m){return new s(d).sub(m)},a.prototype.subtract=a.prototype.sub,a.prototype.subtractS=a.prototype.subS,a.prototype.subtractM=a.prototype.subM,a.subtract=a.sub,a.prototype.mul=function(d){return typeof d=="number"?this.mulS(d):this.mulM(d)},a.prototype.mulS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)*d);return this},a.prototype.mulM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)*d.get(m,f));return this},a.mul=function(d,m){return new s(d).mul(m)},a.prototype.multiply=a.prototype.mul,a.prototype.multiplyS=a.prototype.mulS,a.prototype.multiplyM=a.prototype.mulM,a.multiply=a.mul,a.prototype.div=function(d){return typeof d=="number"?this.divS(d):this.divM(d)},a.prototype.divS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)/d);return this},a.prototype.divM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)/d.get(m,f));return this},a.div=function(d,m){return new s(d).div(m)},a.prototype.divide=a.prototype.div,a.prototype.divideS=a.prototype.divS,a.prototype.divideM=a.prototype.divM,a.divide=a.div,a.prototype.mod=function(d){return typeof d=="number"?this.modS(d):this.modM(d)},a.prototype.modS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)%d);return this},a.prototype.modM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)%d.get(m,f));return this},a.mod=function(d,m){return new s(d).mod(m)},a.prototype.modulus=a.prototype.mod,a.prototype.modulusS=a.prototype.modS,a.prototype.modulusM=a.prototype.modM,a.modulus=a.mod,a.prototype.and=function(d){return typeof d=="number"?this.andS(d):this.andM(d)},a.prototype.andS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)&d);return this},a.prototype.andM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)&d.get(m,f));return this},a.and=function(d,m){return new s(d).and(m)},a.prototype.or=function(d){return typeof d=="number"?this.orS(d):this.orM(d)},a.prototype.orS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)|d);return this},a.prototype.orM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)|d.get(m,f));return this},a.or=function(d,m){return new s(d).or(m)},a.prototype.xor=function(d){return typeof d=="number"?this.xorS(d):this.xorM(d)},a.prototype.xorS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)^d);return this},a.prototype.xorM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)^d.get(m,f));return this},a.xor=function(d,m){return new s(d).xor(m)},a.prototype.leftShift=function(d){return typeof d=="number"?this.leftShiftS(d):this.leftShiftM(d)},a.prototype.leftShiftS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)<<d);return this},a.prototype.leftShiftM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)<<d.get(m,f));return this},a.leftShift=function(d,m){return new s(d).leftShift(m)},a.prototype.signPropagatingRightShift=function(d){return typeof d=="number"?this.signPropagatingRightShiftS(d):this.signPropagatingRightShiftM(d)},a.prototype.signPropagatingRightShiftS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)>>d);return this},a.prototype.signPropagatingRightShiftM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)>>d.get(m,f));return this},a.signPropagatingRightShift=function(d,m){return new s(d).signPropagatingRightShift(m)},a.prototype.rightShift=function(d){return typeof d=="number"?this.rightShiftS(d):this.rightShiftM(d)},a.prototype.rightShiftS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)>>>d);return this},a.prototype.rightShiftM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,this.get(m,f)>>>d.get(m,f));return this},a.rightShift=function(d,m){return new s(d).rightShift(m)},a.prototype.zeroFillRightShift=a.prototype.rightShift,a.prototype.zeroFillRightShiftS=a.prototype.rightShiftS,a.prototype.zeroFillRightShiftM=a.prototype.rightShiftM,a.zeroFillRightShift=a.rightShift,a.prototype.not=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,~this.get(d,m));return this},a.not=function(d){return new s(d).not()},a.prototype.abs=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.abs(this.get(d,m)));return this},a.abs=function(d){return new s(d).abs()},a.prototype.acos=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.acos(this.get(d,m)));return this},a.acos=function(d){return new s(d).acos()},a.prototype.acosh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.acosh(this.get(d,m)));return this},a.acosh=function(d){return new s(d).acosh()},a.prototype.asin=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.asin(this.get(d,m)));return this},a.asin=function(d){return new s(d).asin()},a.prototype.asinh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.asinh(this.get(d,m)));return this},a.asinh=function(d){return new s(d).asinh()},a.prototype.atan=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.atan(this.get(d,m)));return this},a.atan=function(d){return new s(d).atan()},a.prototype.atanh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.atanh(this.get(d,m)));return this},a.atanh=function(d){return new s(d).atanh()},a.prototype.cbrt=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.cbrt(this.get(d,m)));return this},a.cbrt=function(d){return new s(d).cbrt()},a.prototype.ceil=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.ceil(this.get(d,m)));return this},a.ceil=function(d){return new s(d).ceil()},a.prototype.clz32=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.clz32(this.get(d,m)));return this},a.clz32=function(d){return new s(d).clz32()},a.prototype.cos=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.cos(this.get(d,m)));return this},a.cos=function(d){return new s(d).cos()},a.prototype.cosh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.cosh(this.get(d,m)));return this},a.cosh=function(d){return new s(d).cosh()},a.prototype.exp=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.exp(this.get(d,m)));return this},a.exp=function(d){return new s(d).exp()},a.prototype.expm1=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.expm1(this.get(d,m)));return this},a.expm1=function(d){return new s(d).expm1()},a.prototype.floor=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.floor(this.get(d,m)));return this},a.floor=function(d){return new s(d).floor()},a.prototype.fround=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.fround(this.get(d,m)));return this},a.fround=function(d){return new s(d).fround()},a.prototype.log=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.log(this.get(d,m)));return this},a.log=function(d){return new s(d).log()},a.prototype.log1p=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.log1p(this.get(d,m)));return this},a.log1p=function(d){return new s(d).log1p()},a.prototype.log10=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.log10(this.get(d,m)));return this},a.log10=function(d){return new s(d).log10()},a.prototype.log2=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.log2(this.get(d,m)));return this},a.log2=function(d){return new s(d).log2()},a.prototype.round=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.round(this.get(d,m)));return this},a.round=function(d){return new s(d).round()},a.prototype.sign=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.sign(this.get(d,m)));return this},a.sign=function(d){return new s(d).sign()},a.prototype.sin=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.sin(this.get(d,m)));return this},a.sin=function(d){return new s(d).sin()},a.prototype.sinh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.sinh(this.get(d,m)));return this},a.sinh=function(d){return new s(d).sinh()},a.prototype.sqrt=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.sqrt(this.get(d,m)));return this},a.sqrt=function(d){return new s(d).sqrt()},a.prototype.tan=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.tan(this.get(d,m)));return this},a.tan=function(d){return new s(d).tan()},a.prototype.tanh=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.tanh(this.get(d,m)));return this},a.tanh=function(d){return new s(d).tanh()},a.prototype.trunc=function(){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,Math.trunc(this.get(d,m)));return this},a.trunc=function(d){return new s(d).trunc()},a.pow=function(d,m){return new s(d).pow(m)},a.prototype.pow=function(d){return typeof d=="number"?this.powS(d):this.powM(d)},a.prototype.powS=function(d){for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,Math.pow(this.get(m,f),d));return this},a.prototype.powM=function(d){if(d=s.checkMatrix(d),this.rows!==d.rows||this.columns!==d.columns)throw new RangeError("Matrices dimensions must be equal");for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.set(m,f,Math.pow(this.get(m,f),d.get(m,f)));return this}}function checkRowIndex(a,s,d){let m=d?a.rows:a.rows-1;if(s<0||s>m)throw new RangeError("Row index out of range")}function checkColumnIndex(a,s,d){let m=d?a.columns:a.columns-1;if(s<0||s>m)throw new RangeError("Column index out of range")}function checkRowVector(a,s){if(s.to1DArray&&(s=s.to1DArray()),s.length!==a.columns)throw new RangeError("vector size must be the same as the number of columns");return s}function checkColumnVector(a,s){if(s.to1DArray&&(s=s.to1DArray()),s.length!==a.rows)throw new RangeError("vector size must be the same as the number of rows");return s}function checkRowIndices(a,s){if(!isAnyArray.isAnyArray(s))throw new TypeError("row indices must be an array");for(let d=0;d<s.length;d++)if(s[d]<0||s[d]>=a.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(a,s){if(!isAnyArray.isAnyArray(s))throw new TypeError("column indices must be an array");for(let d=0;d<s.length;d++)if(s[d]<0||s[d]>=a.columns)throw new RangeError("column indices are out of range")}function checkRange(a,s,d,m,f){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",s),checkNumber("endRow",d),checkNumber("startColumn",m),checkNumber("endColumn",f),s>d||m>f||s<0||s>=a.rows||d<0||d>=a.rows||m<0||m>=a.columns||f<0||f>=a.columns)throw new RangeError("Submatrix indices are out of range")}function newArray$2(a,s=0){let d=[];for(let m=0;m<a;m++)d.push(s);return d}function checkNumber(a,s){if(typeof s!="number")throw new TypeError(`${a} must be a number`)}function checkNonEmpty(a){if(a.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(a){let s=newArray$2(a.rows);for(let d=0;d<a.rows;++d)for(let m=0;m<a.columns;++m)s[d]+=a.get(d,m);return s}function sumByColumn(a){let s=newArray$2(a.columns);for(let d=0;d<a.rows;++d)for(let m=0;m<a.columns;++m)s[m]+=a.get(d,m);return s}function sumAll(a){let s=0;for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)s+=a.get(d,m);return s}function productByRow(a){let s=newArray$2(a.rows,1);for(let d=0;d<a.rows;++d)for(let m=0;m<a.columns;++m)s[d]*=a.get(d,m);return s}function productByColumn(a){let s=newArray$2(a.columns,1);for(let d=0;d<a.rows;++d)for(let m=0;m<a.columns;++m)s[m]*=a.get(d,m);return s}function productAll(a){let s=1;for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)s*=a.get(d,m);return s}function varianceByRow(a,s,d){const m=a.rows,f=a.columns,g=[];for(let x=0;x<m;x++){let w=0,C=0,A=0;for(let _=0;_<f;_++)A=a.get(x,_)-d[x],w+=A,C+=A*A;s?g.push((C-w*w/f)/(f-1)):g.push((C-w*w/f)/f)}return g}function varianceByColumn(a,s,d){const m=a.rows,f=a.columns,g=[];for(let x=0;x<f;x++){let w=0,C=0,A=0;for(let _=0;_<m;_++)A=a.get(_,x)-d[x],w+=A,C+=A*A;s?g.push((C-w*w/m)/(m-1)):g.push((C-w*w/m)/m)}return g}function varianceAll(a,s,d){const m=a.rows,f=a.columns,g=m*f;let x=0,w=0,C=0;for(let A=0;A<m;A++)for(let _=0;_<f;_++)C=a.get(A,_)-d,x+=C,w+=C*C;return s?(w-x*x/g)/(g-1):(w-x*x/g)/g}function centerByRow(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)-s[d])}function centerByColumn(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)-s[m])}function centerAll(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)-s)}function getScaleByRow(a){const s=[];for(let d=0;d<a.rows;d++){let m=0;for(let f=0;f<a.columns;f++)m+=Math.pow(a.get(d,f),2)/(a.columns-1);s.push(Math.sqrt(m))}return s}function scaleByRow(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)/s[d])}function getScaleByColumn(a){const s=[];for(let d=0;d<a.columns;d++){let m=0;for(let f=0;f<a.rows;f++)m+=Math.pow(a.get(f,d),2)/(a.rows-1);s.push(Math.sqrt(m))}return s}function scaleByColumn(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)/s[m])}function getScaleAll(a){const s=a.size-1;let d=0;for(let m=0;m<a.columns;m++)for(let f=0;f<a.rows;f++)d+=Math.pow(a.get(f,m),2)/s;return Math.sqrt(d)}function scaleAll(a,s){for(let d=0;d<a.rows;d++)for(let m=0;m<a.columns;m++)a.set(d,m,a.get(d,m)/s)}class AbstractMatrix{static from1DArray(s,d,m){if(s*d!==m.length)throw new RangeError("data length does not match given dimensions");let f=new Matrix$3(s,d);for(let g=0;g<s;g++)for(let x=0;x<d;x++)f.set(g,x,m[g*d+x]);return f}static rowVector(s){let d=new Matrix$3(1,s.length);for(let m=0;m<s.length;m++)d.set(0,m,s[m]);return d}static columnVector(s){let d=new Matrix$3(s.length,1);for(let m=0;m<s.length;m++)d.set(m,0,s[m]);return d}static zeros(s,d){return new Matrix$3(s,d)}static ones(s,d){return new Matrix$3(s,d).fill(1)}static rand(s,d,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{random:f=Math.random}=m;let g=new Matrix$3(s,d);for(let x=0;x<s;x++)for(let w=0;w<d;w++)g.set(x,w,f());return g}static randInt(s,d,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{min:f=0,max:g=1e3,random:x=Math.random}=m;if(!Number.isInteger(f))throw new TypeError("min must be an integer");if(!Number.isInteger(g))throw new TypeError("max must be an integer");if(f>=g)throw new RangeError("min must be smaller than max");let w=g-f,C=new Matrix$3(s,d);for(let A=0;A<s;A++)for(let _=0;_<d;_++){let M=f+Math.round(x()*w);C.set(A,_,M)}return C}static eye(s,d,m){d===void 0&&(d=s),m===void 0&&(m=1);let f=Math.min(s,d),g=this.zeros(s,d);for(let x=0;x<f;x++)g.set(x,x,m);return g}static diag(s,d,m){let f=s.length;d===void 0&&(d=f),m===void 0&&(m=d);let g=Math.min(f,d,m),x=this.zeros(d,m);for(let w=0;w<g;w++)x.set(w,w,s[w]);return x}static min(s,d){s=this.checkMatrix(s),d=this.checkMatrix(d);let m=s.rows,f=s.columns,g=new Matrix$3(m,f);for(let x=0;x<m;x++)for(let w=0;w<f;w++)g.set(x,w,Math.min(s.get(x,w),d.get(x,w)));return g}static max(s,d){s=this.checkMatrix(s),d=this.checkMatrix(d);let m=s.rows,f=s.columns,g=new this(m,f);for(let x=0;x<m;x++)for(let w=0;w<f;w++)g.set(x,w,Math.max(s.get(x,w),d.get(x,w)));return g}static checkMatrix(s){return AbstractMatrix.isMatrix(s)?s:new Matrix$3(s)}static isMatrix(s){return s!=null&&s.klass==="Matrix"}get size(){return this.rows*this.columns}apply(s){if(typeof s!="function")throw new TypeError("callback must be a function");for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)s.call(this,d,m);return this}to1DArray(){let s=[];for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)s.push(this.get(d,m));return s}to2DArray(){let s=[];for(let d=0;d<this.rows;d++){s.push([]);for(let m=0;m<this.columns;m++)s[d].push(this.get(d,m))}return s}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let s=0;s<this.rows;s++)for(let d=0;d<=s;d++)if(this.get(s,d)!==this.get(d,s))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let s=0;s<this.rows;s++)if(this.get(s,s)!==0)return!1;return!0}isEchelonForm(){let s=0,d=0,m=-1,f=!0,g=!1;for(;s<this.rows&&f;){for(d=0,g=!1;d<this.columns&&g===!1;)this.get(s,d)===0?d++:this.get(s,d)===1&&d>m?(g=!0,m=d):(f=!1,g=!0);s++}return f}isReducedEchelonForm(){let s=0,d=0,m=-1,f=!0,g=!1;for(;s<this.rows&&f;){for(d=0,g=!1;d<this.columns&&g===!1;)this.get(s,d)===0?d++:this.get(s,d)===1&&d>m?(g=!0,m=d):(f=!1,g=!0);for(let x=d+1;x<this.rows;x++)this.get(s,x)!==0&&(f=!1);s++}return f}echelonForm(){let s=this.clone(),d=0,m=0;for(;d<s.rows&&m<s.columns;){let f=d;for(let g=d;g<s.rows;g++)s.get(g,m)>s.get(f,m)&&(f=g);if(s.get(f,m)===0)m++;else{s.swapRows(d,f);let g=s.get(d,m);for(let x=m;x<s.columns;x++)s.set(d,x,s.get(d,x)/g);for(let x=d+1;x<s.rows;x++){let w=s.get(x,m)/s.get(d,m);s.set(x,m,0);for(let C=m+1;C<s.columns;C++)s.set(x,C,s.get(x,C)-s.get(d,C)*w)}d++,m++}}return s}reducedEchelonForm(){let s=this.echelonForm(),d=s.columns,m=s.rows,f=m-1;for(;f>=0;)if(s.maxRow(f)===0)f--;else{let g=0,x=!1;for(;g<m&&x===!1;)s.get(f,g)===1?x=!0:g++;for(let w=0;w<f;w++){let C=s.get(w,g);for(let A=g;A<d;A++){let _=s.get(w,A)-C*s.get(f,A);s.set(w,A,_)}}f--}return s}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(s={}){if(typeof s!="object")throw new TypeError("options must be an object");const{rows:d=1,columns:m=1}=s;if(!Number.isInteger(d)||d<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(m)||m<=0)throw new TypeError("columns must be a positive integer");let f=new Matrix$3(this.rows*d,this.columns*m);for(let g=0;g<d;g++)for(let x=0;x<m;x++)f.setSubMatrix(this,this.rows*g,this.columns*x);return f}fill(s){for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,s);return this}neg(){return this.mulS(-1)}getRow(s){checkRowIndex(this,s);let d=[];for(let m=0;m<this.columns;m++)d.push(this.get(s,m));return d}getRowVector(s){return Matrix$3.rowVector(this.getRow(s))}setRow(s,d){checkRowIndex(this,s),d=checkRowVector(this,d);for(let m=0;m<this.columns;m++)this.set(s,m,d[m]);return this}swapRows(s,d){checkRowIndex(this,s),checkRowIndex(this,d);for(let m=0;m<this.columns;m++){let f=this.get(s,m);this.set(s,m,this.get(d,m)),this.set(d,m,f)}return this}getColumn(s){checkColumnIndex(this,s);let d=[];for(let m=0;m<this.rows;m++)d.push(this.get(m,s));return d}getColumnVector(s){return Matrix$3.columnVector(this.getColumn(s))}setColumn(s,d){checkColumnIndex(this,s),d=checkColumnVector(this,d);for(let m=0;m<this.rows;m++)this.set(m,s,d[m]);return this}swapColumns(s,d){checkColumnIndex(this,s),checkColumnIndex(this,d);for(let m=0;m<this.rows;m++){let f=this.get(m,s);this.set(m,s,this.get(m,d)),this.set(m,d,f)}return this}addRowVector(s){s=checkRowVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)+s[m]);return this}subRowVector(s){s=checkRowVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)-s[m]);return this}mulRowVector(s){s=checkRowVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)*s[m]);return this}divRowVector(s){s=checkRowVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)/s[m]);return this}addColumnVector(s){s=checkColumnVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)+s[d]);return this}subColumnVector(s){s=checkColumnVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)-s[d]);return this}mulColumnVector(s){s=checkColumnVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)*s[d]);return this}divColumnVector(s){s=checkColumnVector(this,s);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)this.set(d,m,this.get(d,m)/s[d]);return this}mulRow(s,d){checkRowIndex(this,s);for(let m=0;m<this.columns;m++)this.set(s,m,this.get(s,m)*d);return this}mulColumn(s,d){checkColumnIndex(this,s);for(let m=0;m<this.rows;m++)this.set(m,s,this.get(m,s)*d);return this}max(s){if(this.isEmpty())return NaN;switch(s){case"row":{const d=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)>d[m]&&(d[m]=this.get(m,f));return d}case"column":{const d=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)>d[f]&&(d[f]=this.get(m,f));return d}case void 0:{let d=this.get(0,0);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)>d&&(d=this.get(m,f));return d}default:throw new Error(`invalid option: ${s}`)}}maxIndex(){checkNonEmpty(this);let s=this.get(0,0),d=[0,0];for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)>s&&(s=this.get(m,f),d[0]=m,d[1]=f);return d}min(s){if(this.isEmpty())return NaN;switch(s){case"row":{const d=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)<d[m]&&(d[m]=this.get(m,f));return d}case"column":{const d=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)<d[f]&&(d[f]=this.get(m,f));return d}case void 0:{let d=this.get(0,0);for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)<d&&(d=this.get(m,f));return d}default:throw new Error(`invalid option: ${s}`)}}minIndex(){checkNonEmpty(this);let s=this.get(0,0),d=[0,0];for(let m=0;m<this.rows;m++)for(let f=0;f<this.columns;f++)this.get(m,f)<s&&(s=this.get(m,f),d[0]=m,d[1]=f);return d}maxRow(s){if(checkRowIndex(this,s),this.isEmpty())return NaN;let d=this.get(s,0);for(let m=1;m<this.columns;m++)this.get(s,m)>d&&(d=this.get(s,m));return d}maxRowIndex(s){checkRowIndex(this,s),checkNonEmpty(this);let d=this.get(s,0),m=[s,0];for(let f=1;f<this.columns;f++)this.get(s,f)>d&&(d=this.get(s,f),m[1]=f);return m}minRow(s){if(checkRowIndex(this,s),this.isEmpty())return NaN;let d=this.get(s,0);for(let m=1;m<this.columns;m++)this.get(s,m)<d&&(d=this.get(s,m));return d}minRowIndex(s){checkRowIndex(this,s),checkNonEmpty(this);let d=this.get(s,0),m=[s,0];for(let f=1;f<this.columns;f++)this.get(s,f)<d&&(d=this.get(s,f),m[1]=f);return m}maxColumn(s){if(checkColumnIndex(this,s),this.isEmpty())return NaN;let d=this.get(0,s);for(let m=1;m<this.rows;m++)this.get(m,s)>d&&(d=this.get(m,s));return d}maxColumnIndex(s){checkColumnIndex(this,s),checkNonEmpty(this);let d=this.get(0,s),m=[0,s];for(let f=1;f<this.rows;f++)this.get(f,s)>d&&(d=this.get(f,s),m[0]=f);return m}minColumn(s){if(checkColumnIndex(this,s),this.isEmpty())return NaN;let d=this.get(0,s);for(let m=1;m<this.rows;m++)this.get(m,s)<d&&(d=this.get(m,s));return d}minColumnIndex(s){checkColumnIndex(this,s),checkNonEmpty(this);let d=this.get(0,s),m=[0,s];for(let f=1;f<this.rows;f++)this.get(f,s)<d&&(d=this.get(f,s),m[0]=f);return m}diag(){let s=Math.min(this.rows,this.columns),d=[];for(let m=0;m<s;m++)d.push(this.get(m,m));return d}norm(s="frobenius"){switch(s){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${s}`)}}cumulativeSum(){let s=0;for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)s+=this.get(d,m),this.set(d,m,s);return this}dot(s){AbstractMatrix.isMatrix(s)&&(s=s.to1DArray());let d=this.to1DArray();if(d.length!==s.length)throw new RangeError("vectors do not have the same size");let m=0;for(let f=0;f<d.length;f++)m+=d[f]*s[f];return m}mmul(s){s=Matrix$3.checkMatrix(s);let d=this.rows,m=this.columns,f=s.columns,g=new Matrix$3(d,f),x=new Float64Array(m);for(let w=0;w<f;w++){for(let C=0;C<m;C++)x[C]=s.get(C,w);for(let C=0;C<d;C++){let A=0;for(let _=0;_<m;_++)A+=this.get(C,_)*x[_];g.set(C,w,A)}}return g}strassen2x2(s){s=Matrix$3.checkMatrix(s);let d=new Matrix$3(2,2);const m=this.get(0,0),f=s.get(0,0),g=this.get(0,1),x=s.get(0,1),w=this.get(1,0),C=s.get(1,0),A=this.get(1,1),_=s.get(1,1),M=(m+A)*(f+_),P=(w+A)*f,E=m*(x-_),R=A*(C-f),B=(m+g)*_,z=(w-m)*(f+x),F=(g-A)*(C+_),I=M+R-B+F,L=E+B,W=P+R,G=M-P+E+z;return d.set(0,0,I),d.set(0,1,L),d.set(1,0,W),d.set(1,1,G),d}strassen3x3(s){s=Matrix$3.checkMatrix(s);let d=new Matrix$3(3,3);const m=this.get(0,0),f=this.get(0,1),g=this.get(0,2),x=this.get(1,0),w=this.get(1,1),C=this.get(1,2),A=this.get(2,0),_=this.get(2,1),M=this.get(2,2),P=s.get(0,0),E=s.get(0,1),R=s.get(0,2),B=s.get(1,0),z=s.get(1,1),F=s.get(1,2),I=s.get(2,0),L=s.get(2,1),W=s.get(2,2),G=(m+f+g-x-w-_-M)*z,q=(m-x)*(-E+z),K=w*(-P+E+B-z-F-I+W),Z=(-m+x+w)*(P-E+z),J=(x+w)*(-P+E),te=m*P,Q=(-m+A+_)*(P-R+F),me=(-m+A)*(R-F),Xe=(A+_)*(-P+R),Ve=(m+f+g-w-C-A-_)*F,Ye=_*(-P+R+B-z-F-I+L),qe=(-g+_+M)*(z+I-L),et=(g-M)*(z-L),je=g*I,Ke=(_+M)*(-I+L),Je=(-g+w+C)*(F+I-W),at=(g-C)*(F-W),nt=(w+C)*(-I+W),ct=f*B,pt=C*L,rt=x*R,ht=A*E,yt=M*W,wt=te+je+ct,ft=G+Z+J+te+qe+je+Ke,He=te+Q+Xe+Ve+je+Je+nt,le=q+K+Z+te+je+Je+at,be=q+Z+J+te+pt,we=je+Je+at+nt+rt,ze=te+Q+me+Ye+qe+et+je,Ze=qe+et+je+Ke+ht,Qe=te+Q+me+Xe+yt;return d.set(0,0,wt),d.set(0,1,ft),d.set(0,2,He),d.set(1,0,le),d.set(1,1,be),d.set(1,2,we),d.set(2,0,ze),d.set(2,1,Ze),d.set(2,2,Qe),d}mmulStrassen(s){s=Matrix$3.checkMatrix(s);let d=this.clone(),m=d.rows,f=d.columns,g=s.rows,x=s.columns;f!==g&&console.warn(`Multiplying ${m} x ${f} and ${g} x ${x} matrix: dimensions do not match.`);function w(M,P,E){let R=M.rows,B=M.columns;if(R===P&&B===E)return M;{let z=AbstractMatrix.zeros(P,E);return z=z.setSubMatrix(M,0,0),z}}let C=Math.max(m,g),A=Math.max(f,x);d=w(d,C,A),s=w(s,C,A);function _(M,P,E,R){if(E<=512||R<=512)return M.mmul(P);E%2===1&&R%2===1?(M=w(M,E+1,R+1),P=w(P,E+1,R+1)):E%2===1?(M=w(M,E+1,R),P=w(P,E+1,R)):R%2===1&&(M=w(M,E,R+1),P=w(P,E,R+1));let B=parseInt(M.rows/2,10),z=parseInt(M.columns/2,10),F=M.subMatrix(0,B-1,0,z-1),I=P.subMatrix(0,B-1,0,z-1),L=M.subMatrix(0,B-1,z,M.columns-1),W=P.subMatrix(0,B-1,z,P.columns-1),G=M.subMatrix(B,M.rows-1,0,z-1),q=P.subMatrix(B,P.rows-1,0,z-1),K=M.subMatrix(B,M.rows-1,z,M.columns-1),Z=P.subMatrix(B,P.rows-1,z,P.columns-1),J=_(AbstractMatrix.add(F,K),AbstractMatrix.add(I,Z),B,z),te=_(AbstractMatrix.add(G,K),I,B,z),Q=_(F,AbstractMatrix.sub(W,Z),B,z),me=_(K,AbstractMatrix.sub(q,I),B,z),Xe=_(AbstractMatrix.add(F,L),Z,B,z),Ve=_(AbstractMatrix.sub(G,F),AbstractMatrix.add(I,W),B,z),Ye=_(AbstractMatrix.sub(L,K),AbstractMatrix.add(q,Z),B,z),qe=AbstractMatrix.add(J,me);qe.sub(Xe),qe.add(Ye);let et=AbstractMatrix.add(Q,Xe),je=AbstractMatrix.add(te,me),Ke=AbstractMatrix.sub(J,te);Ke.add(Q),Ke.add(Ve);let Je=AbstractMatrix.zeros(2*qe.rows,2*qe.columns);return Je=Je.setSubMatrix(qe,0,0),Je=Je.setSubMatrix(et,qe.rows,0),Je=Je.setSubMatrix(je,0,qe.columns),Je=Je.setSubMatrix(Ke,qe.rows,qe.columns),Je.subMatrix(0,E-1,0,R-1)}return _(d,s,C,A)}scaleRows(s={}){if(typeof s!="object")throw new TypeError("options must be an object");const{min:d=0,max:m=1}=s;if(!Number.isFinite(d))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(d>=m)throw new RangeError("min must be smaller than max");let f=new Matrix$3(this.rows,this.columns);for(let g=0;g<this.rows;g++){const x=this.getRow(g);x.length>0&&rescale(x,{min:d,max:m,output:x}),f.setRow(g,x)}return f}scaleColumns(s={}){if(typeof s!="object")throw new TypeError("options must be an object");const{min:d=0,max:m=1}=s;if(!Number.isFinite(d))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(d>=m)throw new RangeError("min must be smaller than max");let f=new Matrix$3(this.rows,this.columns);for(let g=0;g<this.columns;g++){const x=this.getColumn(g);x.length&&rescale(x,{min:d,max:m,output:x}),f.setColumn(g,x)}return f}flipRows(){const s=Math.ceil(this.columns/2);for(let d=0;d<this.rows;d++)for(let m=0;m<s;m++){let f=this.get(d,m),g=this.get(d,this.columns-1-m);this.set(d,m,g),this.set(d,this.columns-1-m,f)}return this}flipColumns(){const s=Math.ceil(this.rows/2);for(let d=0;d<this.columns;d++)for(let m=0;m<s;m++){let f=this.get(m,d),g=this.get(this.rows-1-m,d);this.set(m,d,g),this.set(this.rows-1-m,d,f)}return this}kroneckerProduct(s){s=Matrix$3.checkMatrix(s);let d=this.rows,m=this.columns,f=s.rows,g=s.columns,x=new Matrix$3(d*f,m*g);for(let w=0;w<d;w++)for(let C=0;C<m;C++)for(let A=0;A<f;A++)for(let _=0;_<g;_++)x.set(f*w+A,g*C+_,this.get(w,C)*s.get(A,_));return x}kroneckerSum(s){if(s=Matrix$3.checkMatrix(s),!this.isSquare()||!s.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let d=this.rows,m=s.rows,f=this.kroneckerProduct(Matrix$3.eye(m,m)),g=Matrix$3.eye(d,d).kroneckerProduct(s);return f.add(g)}transpose(){let s=new Matrix$3(this.columns,this.rows);for(let d=0;d<this.rows;d++)for(let m=0;m<this.columns;m++)s.set(m,d,this.get(d,m));return s}sortRows(s=compareNumbers){for(let d=0;d<this.rows;d++)this.setRow(d,this.getRow(d).sort(s));return this}sortColumns(s=compareNumbers){for(let d=0;d<this.columns;d++)this.setColumn(d,this.getColumn(d).sort(s));return this}subMatrix(s,d,m,f){checkRange(this,s,d,m,f);let g=new Matrix$3(d-s+1,f-m+1);for(let x=s;x<=d;x++)for(let w=m;w<=f;w++)g.set(x-s,w-m,this.get(x,w));return g}subMatrixRow(s,d,m){if(d===void 0&&(d=0),m===void 0&&(m=this.columns-1),d>m||d<0||d>=this.columns||m<0||m>=this.columns)throw new RangeError("Argument out of range");let f=new Matrix$3(s.length,m-d+1);for(let g=0;g<s.length;g++)for(let x=d;x<=m;x++){if(s[g]<0||s[g]>=this.rows)throw new RangeError(`Row index out of range: ${s[g]}`);f.set(g,x-d,this.get(s[g],x))}return f}subMatrixColumn(s,d,m){if(d===void 0&&(d=0),m===void 0&&(m=this.rows-1),d>m||d<0||d>=this.rows||m<0||m>=this.rows)throw new RangeError("Argument out of range");let f=new Matrix$3(m-d+1,s.length);for(let g=0;g<s.length;g++)for(let x=d;x<=m;x++){if(s[g]<0||s[g]>=this.columns)throw new RangeError(`Column index out of range: ${s[g]}`);f.set(x-d,g,this.get(x,s[g]))}return f}setSubMatrix(s,d,m){if(s=Matrix$3.checkMatrix(s),s.isEmpty())return this;let f=d+s.rows-1,g=m+s.columns-1;checkRange(this,d,f,m,g);for(let x=0;x<s.rows;x++)for(let w=0;w<s.columns;w++)this.set(d+x,m+w,s.get(x,w));return this}selection(s,d){checkRowIndices(this,s),checkColumnIndices(this,d);let m=new Matrix$3(s.length,d.length);for(let f=0;f<s.length;f++){let g=s[f];for(let x=0;x<d.length;x++){let w=d[x];m.set(f,x,this.get(g,w))}}return m}trace(){let s=Math.min(this.rows,this.columns),d=0;for(let m=0;m<s;m++)d+=this.get(m,m);return d}clone(){return this.constructor.copy(this,new Matrix$3(this.rows,this.columns))}static copy(s,d){for(const[m,f,g]of s.entries())d.set(m,f,g);return d}sum(s){switch(s){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${s}`)}}product(s){switch(s){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${s}`)}}mean(s){const d=this.sum(s);switch(s){case"row":{for(let m=0;m<this.rows;m++)d[m]/=this.columns;return d}case"column":{for(let m=0;m<this.columns;m++)d[m]/=this.rows;return d}case void 0:return d/this.size;default:throw new Error(`invalid option: ${s}`)}}variance(s,d={}){if(typeof s=="object"&&(d=s,s=void 0),typeof d!="object")throw new TypeError("options must be an object");const{unbiased:m=!0,mean:f=this.mean(s)}=d;if(typeof m!="boolean")throw new TypeError("unbiased must be a boolean");switch(s){case"row":{if(!isAnyArray.isAnyArray(f))throw new TypeError("mean must be an array");return varianceByRow(this,m,f)}case"column":{if(!isAnyArray.isAnyArray(f))throw new TypeError("mean must be an array");return varianceByColumn(this,m,f)}case void 0:{if(typeof f!="number")throw new TypeError("mean must be a number");return varianceAll(this,m,f)}default:throw new Error(`invalid option: ${s}`)}}standardDeviation(s,d){typeof s=="object"&&(d=s,s=void 0);const m=this.variance(s,d);if(s===void 0)return Math.sqrt(m);for(let f=0;f<m.length;f++)m[f]=Math.sqrt(m[f]);return m}center(s,d={}){if(typeof s=="object"&&(d=s,s=void 0),typeof d!="object")throw new TypeError("options must be an object");const{center:m=this.mean(s)}=d;switch(s){case"row":{if(!isAnyArray.isAnyArray(m))throw new TypeError("center must be an array");return centerByRow(this,m),this}case"column":{if(!isAnyArray.isAnyArray(m))throw new TypeError("center must be an array");return centerByColumn(this,m),this}case void 0:{if(typeof m!="number")throw new TypeError("center must be a number");return centerAll(this,m),this}default:throw new Error(`invalid option: ${s}`)}}scale(s,d={}){if(typeof s=="object"&&(d=s,s=void 0),typeof d!="object")throw new TypeError("options must be an object");let m=d.scale;switch(s){case"row":{if(m===void 0)m=getScaleByRow(this);else if(!isAnyArray.isAnyArray(m))throw new TypeError("scale must be an array");return scaleByRow(this,m),this}case"column":{if(m===void 0)m=getScaleByColumn(this);else if(!isAnyArray.isAnyArray(m))throw new TypeError("scale must be an array");return scaleByColumn(this,m),this}case void 0:{if(m===void 0)m=getScaleAll(this);else if(typeof m!="number")throw new TypeError("scale must be a number");return scaleAll(this,m),this}default:throw new Error(`invalid option: ${s}`)}}toString(s){return inspectMatrixWithOptions(this,s)}[Symbol.iterator](){return this.entries()}*entries(){for(let s=0;s<this.rows;s++)for(let d=0;d<this.columns;d++)yield[s,d,this.get(s,d)]}*values(){for(let s=0;s<this.rows;s++)for(let d=0;d<this.columns;d++)yield this.get(s,d)}}AbstractMatrix.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(a,s){return a-s}function isArrayOfNumbers(a){return a.every(s=>typeof s=="number")}AbstractMatrix.random=AbstractMatrix.rand;AbstractMatrix.randomInt=AbstractMatrix.randInt;AbstractMatrix.diagonal=AbstractMatrix.diag;AbstractMatrix.prototype.diagonal=AbstractMatrix.prototype.diag;AbstractMatrix.identity=AbstractMatrix.eye;AbstractMatrix.prototype.negate=AbstractMatrix.prototype.neg;AbstractMatrix.prototype.tensorProduct=AbstractMatrix.prototype.kroneckerProduct;var ye,$e,de;let Matrix$3=(de=class extends AbstractMatrix{constructor(a,s){if(super(),Be(this,ye),D(this,"data"),de.isMatrix(a))Ue(this,ye,$e).call(this,a.rows,a.columns),de.copy(a,this);else if(Number.isInteger(a)&&a>=0)Ue(this,ye,$e).call(this,a,s);else if(isAnyArray.isAnyArray(a)){const d=a;if(a=d.length,s=a?d[0].length:0,typeof s!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let m=0;m<a;m++){if(d[m].length!==s)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(d[m]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(d[m]))}this.rows=a,this.columns=s}else throw new TypeError("First argument must be a positive number or an array")}set(a,s,d){return this.data[a][s]=d,this}get(a,s){return this.data[a][s]}removeRow(a){return checkRowIndex(this,a),this.data.splice(a,1),this.rows-=1,this}addRow(a,s){return s===void 0&&(s=a,a=this.rows),checkRowIndex(this,a,!0),s=Float64Array.from(checkRowVector(this,s)),this.data.splice(a,0,s),this.rows+=1,this}removeColumn(a){checkColumnIndex(this,a);for(let s=0;s<this.rows;s++){const d=new Float64Array(this.columns-1);for(let m=0;m<a;m++)d[m]=this.data[s][m];for(let m=a+1;m<this.columns;m++)d[m-1]=this.data[s][m];this.data[s]=d}return this.columns-=1,this}addColumn(a,s){typeof s>"u"&&(s=a,a=this.columns),checkColumnIndex(this,a,!0),s=checkColumnVector(this,s);for(let d=0;d<this.rows;d++){const m=new Float64Array(this.columns+1);let f=0;for(;f<a;f++)m[f]=this.data[d][f];for(m[f++]=s[d];f<this.columns+1;f++)m[f]=this.data[d][f-1];this.data[d]=m}return this.columns+=1,this}},ye=new WeakSet,$e=function(a,s){if(this.data=[],Number.isInteger(s)&&s>=0)for(let d=0;d<a;d++)this.data.push(new Float64Array(s));else throw new TypeError("nColumns must be a positive integer");this.rows=a,this.columns=s},de);installMathOperations(AbstractMatrix,Matrix$3);var Ht;const _e=class _i extends AbstractMatrix{constructor(s){if(super(),Be(this,Ht,void 0),Matrix$3.isMatrix(s)){if(!s.isSymmetric())throw new TypeError("not symmetric data");ve(this,Ht,Matrix$3.copy(s,new Matrix$3(s.rows,s.rows)))}else if(Number.isInteger(s)&&s>=0)ve(this,Ht,new Matrix$3(s,s));else if(ve(this,Ht,new Matrix$3(s)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return Wt(this,Ht).size}get rows(){return Wt(this,Ht).rows}get columns(){return Wt(this,Ht).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(s){return Matrix$3.isMatrix(s)&&s.klassType==="SymmetricMatrix"}static zeros(s){return new this(s)}static ones(s){return new this(s).fill(1)}clone(){const s=new _i(this.diagonalSize);for(const[d,m,f]of this.upperRightEntries())s.set(d,m,f);return s}toMatrix(){return new Matrix$3(this)}get(s,d){return Wt(this,Ht).get(s,d)}set(s,d,m){return Wt(this,Ht).set(s,d,m),Wt(this,Ht).set(d,s,m),this}removeCross(s){return Wt(this,Ht).removeRow(s),Wt(this,Ht).removeColumn(s),this}addCross(s,d){d===void 0&&(d=s,s=this.diagonalSize);const m=d.slice();return m.splice(s,1),Wt(this,Ht).addRow(s,m),Wt(this,Ht).addColumn(s,d),this}applyMask(s){if(s.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const d=[];for(const[m,f]of s.entries())f||d.push(m);d.reverse();for(const m of d)this.removeCross(m);return this}toCompact(){const{diagonalSize:s}=this,d=new Array(s*(s+1)/2);for(let m=0,f=0,g=0;g<d.length;g++)d[g]=this.get(f,m),++m>=s&&(m=++f);return d}static fromCompact(s){const d=s.length,m=(Math.sqrt(8*d+1)-1)/2;if(!Number.isInteger(m))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(s)}`);const f=new _i(m);for(let g=0,x=0,w=0;w<d;w++)f.set(g,x,s[w]),++g>=m&&(g=++x);return f}*upperRightEntries(){for(let s=0,d=0;s<this.diagonalSize;void 0){const m=this.get(s,d);yield[s,d,m],++d>=this.diagonalSize&&(d=++s)}}*upperRightValues(){for(let s=0,d=0;s<this.diagonalSize;void 0)yield this.get(s,d),++d>=this.diagonalSize&&(d=++s)}};Ht=new WeakMap;let SymmetricMatrix=_e;SymmetricMatrix.prototype.klassType="SymmetricMatrix";class DistanceMatrix extends SymmetricMatrix{static isDistanceMatrix(s){return SymmetricMatrix.isSymmetricMatrix(s)&&s.klassSubType==="DistanceMatrix"}constructor(s){if(super(s),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(s,d,m){return s===d&&(m=0),super.set(s,d,m)}addCross(s,d){return d===void 0&&(d=s,s=this.diagonalSize),d=d.slice(),d[s]=0,super.addCross(s,d)}toSymmetricMatrix(){return new SymmetricMatrix(this)}clone(){const s=new DistanceMatrix(this.diagonalSize);for(const[d,m,f]of this.upperRightEntries())d!==m&&s.set(d,m,f);return s}toCompact(){const{diagonalSize:s}=this,d=(s-1)*s/2,m=new Array(d);for(let f=1,g=0,x=0;x<m.length;x++)m[x]=this.get(g,f),++f>=s&&(f=++g+1);return m}static fromCompact(s){const d=s.length,m=(Math.sqrt(8*d+1)+1)/2;if(!Number.isInteger(m))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(s)}`);const f=new this(m);for(let g=1,x=0,w=0;w<d;w++)f.set(g,x,s[w]),++g>=m&&(g=++x+1);return f}}DistanceMatrix.prototype.klassSubType="DistanceMatrix";class BaseView extends AbstractMatrix{constructor(s,d,m){super(),this.matrix=s,this.rows=d,this.columns=m}}class MatrixColumnView extends BaseView{constructor(s,d){checkColumnIndex(s,d),super(s,s.rows,1),this.column=d}set(s,d,m){return this.matrix.set(s,this.column,m),this}get(s){return this.matrix.get(s,this.column)}}class MatrixColumnSelectionView extends BaseView{constructor(s,d){checkColumnIndices(s,d),super(s,s.rows,d.length),this.columnIndices=d}set(s,d,m){return this.matrix.set(s,this.columnIndices[d],m),this}get(s,d){return this.matrix.get(s,this.columnIndices[d])}}class MatrixFlipColumnView extends BaseView{constructor(s){super(s,s.rows,s.columns)}set(s,d,m){return this.matrix.set(s,this.columns-d-1,m),this}get(s,d){return this.matrix.get(s,this.columns-d-1)}}class MatrixFlipRowView extends BaseView{constructor(s){super(s,s.rows,s.columns)}set(s,d,m){return this.matrix.set(this.rows-s-1,d,m),this}get(s,d){return this.matrix.get(this.rows-s-1,d)}}class MatrixRowView extends BaseView{constructor(s,d){checkRowIndex(s,d),super(s,1,s.columns),this.row=d}set(s,d,m){return this.matrix.set(this.row,d,m),this}get(s,d){return this.matrix.get(this.row,d)}}class MatrixRowSelectionView extends BaseView{constructor(s,d){checkRowIndices(s,d),super(s,d.length,s.columns),this.rowIndices=d}set(s,d,m){return this.matrix.set(this.rowIndices[s],d,m),this}get(s,d){return this.matrix.get(this.rowIndices[s],d)}}class MatrixSelectionView extends BaseView{constructor(s,d,m){checkRowIndices(s,d),checkColumnIndices(s,m),super(s,d.length,m.length),this.rowIndices=d,this.columnIndices=m}set(s,d,m){return this.matrix.set(this.rowIndices[s],this.columnIndices[d],m),this}get(s,d){return this.matrix.get(this.rowIndices[s],this.columnIndices[d])}}class MatrixSubView extends BaseView{constructor(s,d,m,f,g){checkRange(s,d,m,f,g),super(s,m-d+1,g-f+1),this.startRow=d,this.startColumn=f}set(s,d,m){return this.matrix.set(this.startRow+s,this.startColumn+d,m),this}get(s,d){return this.matrix.get(this.startRow+s,this.startColumn+d)}}let MatrixTransposeView$1=class extends BaseView{constructor(a){super(a,a.columns,a.rows)}set(a,s,d){return this.matrix.set(s,a,d),this}get(a,s){return this.matrix.get(s,a)}};class WrapperMatrix1D extends AbstractMatrix{constructor(s,d={}){const{rows:m=1}=d;if(s.length%m!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=m,this.columns=s.length/m,this.data=s}set(s,d,m){let f=this._calculateIndex(s,d);return this.data[f]=m,this}get(s,d){let m=this._calculateIndex(s,d);return this.data[m]}_calculateIndex(s,d){return s*this.columns+d}}class WrapperMatrix2D extends AbstractMatrix{constructor(s){super(),this.data=s,this.rows=s.length,this.columns=s[0].length}set(s,d,m){return this.data[s][d]=m,this}get(s,d){return this.data[s][d]}}function wrap(a,s){if(isAnyArray.isAnyArray(a))return a[0]&&isAnyArray.isAnyArray(a[0])?new WrapperMatrix2D(a):new WrapperMatrix1D(a,s);throw new Error("the argument is not an array")}class LuDecomposition{constructor(s){s=WrapperMatrix2D.checkMatrix(s);let d=s.clone(),m=d.rows,f=d.columns,g=new Float64Array(m),x=1,w,C,A,_,M,P,E,R,B;for(w=0;w<m;w++)g[w]=w;for(R=new Float64Array(m),C=0;C<f;C++){for(w=0;w<m;w++)R[w]=d.get(w,C);for(w=0;w<m;w++){for(B=Math.min(w,C),M=0,A=0;A<B;A++)M+=d.get(w,A)*R[A];R[w]-=M,d.set(w,C,R[w])}for(_=C,w=C+1;w<m;w++)Math.abs(R[w])>Math.abs(R[_])&&(_=w);if(_!==C){for(A=0;A<f;A++)P=d.get(_,A),d.set(_,A,d.get(C,A)),d.set(C,A,P);E=g[_],g[_]=g[C],g[C]=E,x=-x}if(C<m&&d.get(C,C)!==0)for(w=C+1;w<m;w++)d.set(w,C,d.get(w,C)/d.get(C,C))}this.LU=d,this.pivotVector=g,this.pivotSign=x}isSingular(){let s=this.LU,d=s.columns;for(let m=0;m<d;m++)if(s.get(m,m)===0)return!0;return!1}solve(s){s=Matrix$3.checkMatrix(s);let d=this.LU;if(d.rows!==s.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let m=s.columns,f=s.subMatrixRow(this.pivotVector,0,m-1),g=d.columns,x,w,C;for(C=0;C<g;C++)for(x=C+1;x<g;x++)for(w=0;w<m;w++)f.set(x,w,f.get(x,w)-f.get(C,w)*d.get(x,C));for(C=g-1;C>=0;C--){for(w=0;w<m;w++)f.set(C,w,f.get(C,w)/d.get(C,C));for(x=0;x<C;x++)for(w=0;w<m;w++)f.set(x,w,f.get(x,w)-f.get(C,w)*d.get(x,C))}return f}get determinant(){let s=this.LU;if(!s.isSquare())throw new Error("Matrix must be square");let d=this.pivotSign,m=s.columns;for(let f=0;f<m;f++)d*=s.get(f,f);return d}get lowerTriangularMatrix(){let s=this.LU,d=s.rows,m=s.columns,f=new Matrix$3(d,m);for(let g=0;g<d;g++)for(let x=0;x<m;x++)g>x?f.set(g,x,s.get(g,x)):g===x?f.set(g,x,1):f.set(g,x,0);return f}get upperTriangularMatrix(){let s=this.LU,d=s.rows,m=s.columns,f=new Matrix$3(d,m);for(let g=0;g<d;g++)for(let x=0;x<m;x++)g<=x?f.set(g,x,s.get(g,x)):f.set(g,x,0);return f}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function hypotenuse$1(a,s){let d=0;return Math.abs(a)>Math.abs(s)?(d=s/a,Math.abs(a)*Math.sqrt(1+d*d)):s!==0?(d=a/s,Math.abs(s)*Math.sqrt(1+d*d)):0}class QrDecomposition{constructor(s){s=WrapperMatrix2D.checkMatrix(s);let d=s.clone(),m=s.rows,f=s.columns,g=new Float64Array(f),x,w,C,A;for(C=0;C<f;C++){let _=0;for(x=C;x<m;x++)_=hypotenuse$1(_,d.get(x,C));if(_!==0){for(d.get(C,C)<0&&(_=-_),x=C;x<m;x++)d.set(x,C,d.get(x,C)/_);for(d.set(C,C,d.get(C,C)+1),w=C+1;w<f;w++){for(A=0,x=C;x<m;x++)A+=d.get(x,C)*d.get(x,w);for(A=-A/d.get(C,C),x=C;x<m;x++)d.set(x,w,d.get(x,w)+A*d.get(x,C))}}g[C]=-_}this.QR=d,this.Rdiag=g}solve(s){s=Matrix$3.checkMatrix(s);let d=this.QR,m=d.rows;if(s.rows!==m)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let f=s.columns,g=s.clone(),x=d.columns,w,C,A,_;for(A=0;A<x;A++)for(C=0;C<f;C++){for(_=0,w=A;w<m;w++)_+=d.get(w,A)*g.get(w,C);for(_=-_/d.get(A,A),w=A;w<m;w++)g.set(w,C,g.get(w,C)+_*d.get(w,A))}for(A=x-1;A>=0;A--){for(C=0;C<f;C++)g.set(A,C,g.get(A,C)/this.Rdiag[A]);for(w=0;w<A;w++)for(C=0;C<f;C++)g.set(w,C,g.get(w,C)-g.get(A,C)*d.get(w,A))}return g.subMatrix(0,x-1,0,f-1)}isFullRank(){let s=this.QR.columns;for(let d=0;d<s;d++)if(this.Rdiag[d]===0)return!1;return!0}get upperTriangularMatrix(){let s=this.QR,d=s.columns,m=new Matrix$3(d,d),f,g;for(f=0;f<d;f++)for(g=0;g<d;g++)f<g?m.set(f,g,s.get(f,g)):f===g?m.set(f,g,this.Rdiag[f]):m.set(f,g,0);return m}get orthogonalMatrix(){let s=this.QR,d=s.rows,m=s.columns,f=new Matrix$3(d,m),g,x,w,C;for(w=m-1;w>=0;w--){for(g=0;g<d;g++)f.set(g,w,0);for(f.set(w,w,1),x=w;x<m;x++)if(s.get(w,w)!==0){for(C=0,g=w;g<d;g++)C+=s.get(g,w)*f.get(g,x);for(C=-C/s.get(w,w),g=w;g<d;g++)f.set(g,x,f.get(g,x)+C*s.get(g,w))}}return f}}let SingularValueDecomposition$1=class{constructor(a,s={}){if(a=WrapperMatrix2D.checkMatrix(a),a.isEmpty())throw new Error("Matrix must be non-empty");let d=a.rows,m=a.columns;const{computeLeftSingularVectors:f=!0,computeRightSingularVectors:g=!0,autoTranspose:x=!1}=s;let w=!!f,C=!!g,A=!1,_;if(d<m)if(!x)_=a.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{_=a.transpose(),d=_.rows,m=_.columns,A=!0;let J=w;w=C,C=J}else _=a.clone();let M=Math.min(d,m),P=Math.min(d+1,m),E=new Float64Array(P),R=new Matrix$3(d,M),B=new Matrix$3(m,m),z=new Float64Array(m),F=new Float64Array(d),I=new Float64Array(P);for(let J=0;J<P;J++)I[J]=J;let L=Math.min(d-1,m),W=Math.max(0,Math.min(m-2,d)),G=Math.max(L,W);for(let J=0;J<G;J++){if(J<L){E[J]=0;for(let te=J;te<d;te++)E[J]=hypotenuse$1(E[J],_.get(te,J));if(E[J]!==0){_.get(J,J)<0&&(E[J]=-E[J]);for(let te=J;te<d;te++)_.set(te,J,_.get(te,J)/E[J]);_.set(J,J,_.get(J,J)+1)}E[J]=-E[J]}for(let te=J+1;te<m;te++){if(J<L&&E[J]!==0){let Q=0;for(let me=J;me<d;me++)Q+=_.get(me,J)*_.get(me,te);Q=-Q/_.get(J,J);for(let me=J;me<d;me++)_.set(me,te,_.get(me,te)+Q*_.get(me,J))}z[te]=_.get(J,te)}if(w&&J<L)for(let te=J;te<d;te++)R.set(te,J,_.get(te,J));if(J<W){z[J]=0;for(let te=J+1;te<m;te++)z[J]=hypotenuse$1(z[J],z[te]);if(z[J]!==0){z[J+1]<0&&(z[J]=0-z[J]);for(let te=J+1;te<m;te++)z[te]/=z[J];z[J+1]+=1}if(z[J]=-z[J],J+1<d&&z[J]!==0){for(let te=J+1;te<d;te++)F[te]=0;for(let te=J+1;te<d;te++)for(let Q=J+1;Q<m;Q++)F[te]+=z[Q]*_.get(te,Q);for(let te=J+1;te<m;te++){let Q=-z[te]/z[J+1];for(let me=J+1;me<d;me++)_.set(me,te,_.get(me,te)+Q*F[me])}}if(C)for(let te=J+1;te<m;te++)B.set(te,J,z[te])}}let q=Math.min(m,d+1);if(L<m&&(E[L]=_.get(L,L)),d<q&&(E[q-1]=0),W+1<q&&(z[W]=_.get(W,q-1)),z[q-1]=0,w){for(let J=L;J<M;J++){for(let te=0;te<d;te++)R.set(te,J,0);R.set(J,J,1)}for(let J=L-1;J>=0;J--)if(E[J]!==0){for(let te=J+1;te<M;te++){let Q=0;for(let me=J;me<d;me++)Q+=R.get(me,J)*R.get(me,te);Q=-Q/R.get(J,J);for(let me=J;me<d;me++)R.set(me,te,R.get(me,te)+Q*R.get(me,J))}for(let te=J;te<d;te++)R.set(te,J,-R.get(te,J));R.set(J,J,1+R.get(J,J));for(let te=0;te<J-1;te++)R.set(te,J,0)}else{for(let te=0;te<d;te++)R.set(te,J,0);R.set(J,J,1)}}if(C)for(let J=m-1;J>=0;J--){if(J<W&&z[J]!==0)for(let te=J+1;te<m;te++){let Q=0;for(let me=J+1;me<m;me++)Q+=B.get(me,J)*B.get(me,te);Q=-Q/B.get(J+1,J);for(let me=J+1;me<m;me++)B.set(me,te,B.get(me,te)+Q*B.get(me,J))}for(let te=0;te<m;te++)B.set(te,J,0);B.set(J,J,1)}let K=q-1,Z=Number.EPSILON;for(;q>0;){let J,te;for(J=q-2;J>=-1&&J!==-1;J--){const Q=Number.MIN_VALUE+Z*Math.abs(E[J]+Math.abs(E[J+1]));if(Math.abs(z[J])<=Q||Number.isNaN(z[J])){z[J]=0;break}}if(J===q-2)te=4;else{let Q;for(Q=q-1;Q>=J&&Q!==J;Q--){let me=(Q!==q?Math.abs(z[Q]):0)+(Q!==J+1?Math.abs(z[Q-1]):0);if(Math.abs(E[Q])<=Z*me){E[Q]=0;break}}Q===J?te=3:Q===q-1?te=1:(te=2,J=Q)}switch(J++,te){case 1:{let Q=z[q-2];z[q-2]=0;for(let me=q-2;me>=J;me--){let Xe=hypotenuse$1(E[me],Q),Ve=E[me]/Xe,Ye=Q/Xe;if(E[me]=Xe,me!==J&&(Q=-Ye*z[me-1],z[me-1]=Ve*z[me-1]),C)for(let qe=0;qe<m;qe++)Xe=Ve*B.get(qe,me)+Ye*B.get(qe,q-1),B.set(qe,q-1,-Ye*B.get(qe,me)+Ve*B.get(qe,q-1)),B.set(qe,me,Xe)}break}case 2:{let Q=z[J-1];z[J-1]=0;for(let me=J;me<q;me++){let Xe=hypotenuse$1(E[me],Q),Ve=E[me]/Xe,Ye=Q/Xe;if(E[me]=Xe,Q=-Ye*z[me],z[me]=Ve*z[me],w)for(let qe=0;qe<d;qe++)Xe=Ve*R.get(qe,me)+Ye*R.get(qe,J-1),R.set(qe,J-1,-Ye*R.get(qe,me)+Ve*R.get(qe,J-1)),R.set(qe,me,Xe)}break}case 3:{const Q=Math.max(Math.abs(E[q-1]),Math.abs(E[q-2]),Math.abs(z[q-2]),Math.abs(E[J]),Math.abs(z[J])),me=E[q-1]/Q,Xe=E[q-2]/Q,Ve=z[q-2]/Q,Ye=E[J]/Q,qe=z[J]/Q,et=((Xe+me)*(Xe-me)+Ve*Ve)/2,je=me*Ve*(me*Ve);let Ke=0;(et!==0||je!==0)&&(et<0?Ke=0-Math.sqrt(et*et+je):Ke=Math.sqrt(et*et+je),Ke=je/(et+Ke));let Je=(Ye+me)*(Ye-me)+Ke,at=Ye*qe;for(let nt=J;nt<q-1;nt++){let ct=hypotenuse$1(Je,at);ct===0&&(ct=Number.MIN_VALUE);let pt=Je/ct,rt=at/ct;if(nt!==J&&(z[nt-1]=ct),Je=pt*E[nt]+rt*z[nt],z[nt]=pt*z[nt]-rt*E[nt],at=rt*E[nt+1],E[nt+1]=pt*E[nt+1],C)for(let ht=0;ht<m;ht++)ct=pt*B.get(ht,nt)+rt*B.get(ht,nt+1),B.set(ht,nt+1,-rt*B.get(ht,nt)+pt*B.get(ht,nt+1)),B.set(ht,nt,ct);if(ct=hypotenuse$1(Je,at),ct===0&&(ct=Number.MIN_VALUE),pt=Je/ct,rt=at/ct,E[nt]=ct,Je=pt*z[nt]+rt*E[nt+1],E[nt+1]=-rt*z[nt]+pt*E[nt+1],at=rt*z[nt+1],z[nt+1]=pt*z[nt+1],w&&nt<d-1)for(let ht=0;ht<d;ht++)ct=pt*R.get(ht,nt)+rt*R.get(ht,nt+1),R.set(ht,nt+1,-rt*R.get(ht,nt)+pt*R.get(ht,nt+1)),R.set(ht,nt,ct)}z[q-2]=Je;break}case 4:{if(E[J]<=0&&(E[J]=E[J]<0?-E[J]:0,C))for(let Q=0;Q<=K;Q++)B.set(Q,J,-B.get(Q,J));for(;J<K&&!(E[J]>=E[J+1]);){let Q=E[J];if(E[J]=E[J+1],E[J+1]=Q,C&&J<m-1)for(let me=0;me<m;me++)Q=B.get(me,J+1),B.set(me,J+1,B.get(me,J)),B.set(me,J,Q);if(w&&J<d-1)for(let me=0;me<d;me++)Q=R.get(me,J+1),R.set(me,J+1,R.get(me,J)),R.set(me,J,Q);J++}q--;break}}}if(A){let J=B;B=R,R=J}this.m=d,this.n=m,this.s=E,this.U=R,this.V=B}solve(a){let s=a,d=this.threshold,m=this.s.length,f=Matrix$3.zeros(m,m);for(let M=0;M<m;M++)Math.abs(this.s[M])<=d?f.set(M,M,0):f.set(M,M,1/this.s[M]);let g=this.U,x=this.rightSingularVectors,w=x.mmul(f),C=x.rows,A=g.rows,_=Matrix$3.zeros(C,A);for(let M=0;M<C;M++)for(let P=0;P<A;P++){let E=0;for(let R=0;R<m;R++)E+=w.get(M,R)*g.get(P,R);_.set(M,P,E)}return _.mmul(s)}solveForDiagonal(a){return this.solve(Matrix$3.diag(a))}inverse(){let a=this.V,s=this.threshold,d=a.rows,m=a.columns,f=new Matrix$3(d,this.s.length);for(let A=0;A<d;A++)for(let _=0;_<m;_++)Math.abs(this.s[_])>s&&f.set(A,_,a.get(A,_)/this.s[_]);let g=this.U,x=g.rows,w=g.columns,C=new Matrix$3(d,x);for(let A=0;A<d;A++)for(let _=0;_<x;_++){let M=0;for(let P=0;P<w;P++)M+=f.get(A,P)*g.get(_,P);C.set(A,_,M)}return C}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let a=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,d=this.s;for(let m=0,f=d.length;m<f;m++)d[m]>a&&s++;return s}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix$3.diag(this.s)}};function inverse$1(a,s=!1){return a=WrapperMatrix2D.checkMatrix(a),s?new SingularValueDecomposition$1(a).inverse():solve$1(a,Matrix$3.eye(a.rows))}function solve$1(a,s,d=!1){return a=WrapperMatrix2D.checkMatrix(a),s=WrapperMatrix2D.checkMatrix(s),d?new SingularValueDecomposition$1(a).solve(s):a.isSquare()?new LuDecomposition(a).solve(s):new QrDecomposition(a).solve(s)}function determinant(a){if(a=Matrix$3.checkMatrix(a),a.isSquare()){if(a.columns===0)return 1;let s,d,m,f;if(a.columns===2)return s=a.get(0,0),d=a.get(0,1),m=a.get(1,0),f=a.get(1,1),s*f-d*m;if(a.columns===3){let g,x,w;return g=new MatrixSelectionView(a,[1,2],[1,2]),x=new MatrixSelectionView(a,[1,2],[0,2]),w=new MatrixSelectionView(a,[1,2],[0,1]),s=a.get(0,0),d=a.get(0,1),m=a.get(0,2),s*determinant(g)-d*determinant(x)+m*determinant(w)}else return new LuDecomposition(a).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xrange(a,s){let d=[];for(let m=0;m<a;m++)m!==s&&d.push(m);return d}function dependenciesOneRow(a,s,d,m=1e-9,f=1e-9){if(a>f)return new Array(s.rows+1).fill(0);{let g=s.addRow(d,[0]);for(let x=0;x<g.rows;x++)Math.abs(g.get(x,0))<m&&g.set(x,0,0);return g.to1DArray()}}function linearDependencies(a,s={}){const{thresholdValue:d=1e-9,thresholdError:m=1e-9}=s;a=Matrix$3.checkMatrix(a);let f=a.rows,g=new Matrix$3(f,f);for(let x=0;x<f;x++){let w=Matrix$3.columnVector(a.getRow(x)),C=a.subMatrixRow(xrange(f,x)).transpose(),A=new SingularValueDecomposition$1(C).solve(w),_=Matrix$3.sub(w,C.mmul(A)).abs().max();g.setRow(x,dependenciesOneRow(_,A,x,d,m))}return g}function pseudoInverse(a,s=Number.EPSILON){if(a=Matrix$3.checkMatrix(a),a.isEmpty())return a.transpose();let d=new SingularValueDecomposition$1(a,{autoTranspose:!0}),m=d.leftSingularVectors,f=d.rightSingularVectors,g=d.diagonal;for(let x=0;x<g.length;x++)Math.abs(g[x])>s?g[x]=1/g[x]:g[x]=0;return f.mmul(Matrix$3.diag(g).mmul(m.transpose()))}function covariance$1(a,s=a,d={}){a=new Matrix$3(a);let m=!1;if(typeof s=="object"&&!Matrix$3.isMatrix(s)&&!isAnyArray.isAnyArray(s)?(d=s,s=a,m=!0):s=new Matrix$3(s),a.rows!==s.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:f=!0}=d;f&&(a=a.center("column"),m||(s=s.center("column")));const g=a.transpose().mmul(s);for(let x=0;x<g.rows;x++)for(let w=0;w<g.columns;w++)g.set(x,w,g.get(x,w)*(1/(a.rows-1)));return g}function correlation(a,s=a,d={}){a=new Matrix$3(a);let m=!1;if(typeof s=="object"&&!Matrix$3.isMatrix(s)&&!isAnyArray.isAnyArray(s)?(d=s,s=a,m=!0):s=new Matrix$3(s),a.rows!==s.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:f=!0,scale:g=!0}=d;f&&(a.center("column"),m||s.center("column")),g&&(a.scale("column"),m||s.scale("column"));const x=a.standardDeviation("column",{unbiased:!0}),w=m?x:s.standardDeviation("column",{unbiased:!0}),C=a.transpose().mmul(s);for(let A=0;A<C.rows;A++)for(let _=0;_<C.columns;_++)C.set(A,_,C.get(A,_)*(1/(x[A]*w[_]))*(1/(a.rows-1)));return C}class EigenvalueDecomposition{constructor(s,d={}){const{assumeSymmetric:m=!1}=d;if(s=WrapperMatrix2D.checkMatrix(s),!s.isSquare())throw new Error("Matrix is not a square matrix");if(s.isEmpty())throw new Error("Matrix must be non-empty");let f=s.columns,g=new Matrix$3(f,f),x=new Float64Array(f),w=new Float64Array(f),C=s,A,_,M=!1;if(m?M=!0:M=s.isSymmetric(),M){for(A=0;A<f;A++)for(_=0;_<f;_++)g.set(A,_,C.get(A,_));tred2(f,w,x,g),tql2(f,w,x,g)}else{let P=new Matrix$3(f,f),E=new Float64Array(f);for(_=0;_<f;_++)for(A=0;A<f;A++)P.set(A,_,C.get(A,_));orthes(f,P,E,g),hqr2(f,w,x,g,P)}this.n=f,this.e=w,this.d=x,this.V=g}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let s=this.n,d=this.e,m=this.d,f=new Matrix$3(s,s),g,x;for(g=0;g<s;g++){for(x=0;x<s;x++)f.set(g,x,0);f.set(g,g,m[g]),d[g]>0?f.set(g,g+1,d[g]):d[g]<0&&f.set(g,g-1,d[g])}return f}}function tred2(a,s,d,m){let f,g,x,w,C,A,_,M;for(C=0;C<a;C++)d[C]=m.get(a-1,C);for(w=a-1;w>0;w--){for(M=0,x=0,A=0;A<w;A++)M=M+Math.abs(d[A]);if(M===0)for(s[w]=d[w-1],C=0;C<w;C++)d[C]=m.get(w-1,C),m.set(w,C,0),m.set(C,w,0);else{for(A=0;A<w;A++)d[A]/=M,x+=d[A]*d[A];for(f=d[w-1],g=Math.sqrt(x),f>0&&(g=-g),s[w]=M*g,x=x-f*g,d[w-1]=f-g,C=0;C<w;C++)s[C]=0;for(C=0;C<w;C++){for(f=d[C],m.set(C,w,f),g=s[C]+m.get(C,C)*f,A=C+1;A<=w-1;A++)g+=m.get(A,C)*d[A],s[A]+=m.get(A,C)*f;s[C]=g}for(f=0,C=0;C<w;C++)s[C]/=x,f+=s[C]*d[C];for(_=f/(x+x),C=0;C<w;C++)s[C]-=_*d[C];for(C=0;C<w;C++){for(f=d[C],g=s[C],A=C;A<=w-1;A++)m.set(A,C,m.get(A,C)-(f*s[A]+g*d[A]));d[C]=m.get(w-1,C),m.set(w,C,0)}}d[w]=x}for(w=0;w<a-1;w++){if(m.set(a-1,w,m.get(w,w)),m.set(w,w,1),x=d[w+1],x!==0){for(A=0;A<=w;A++)d[A]=m.get(A,w+1)/x;for(C=0;C<=w;C++){for(g=0,A=0;A<=w;A++)g+=m.get(A,w+1)*m.get(A,C);for(A=0;A<=w;A++)m.set(A,C,m.get(A,C)-g*d[A])}}for(A=0;A<=w;A++)m.set(A,w+1,0)}for(C=0;C<a;C++)d[C]=m.get(a-1,C),m.set(a-1,C,0);m.set(a-1,a-1,1),s[0]=0}function tql2(a,s,d,m){let f,g,x,w,C,A,_,M,P,E,R,B,z,F,I,L;for(x=1;x<a;x++)s[x-1]=s[x];s[a-1]=0;let W=0,G=0,q=Number.EPSILON;for(A=0;A<a;A++){for(G=Math.max(G,Math.abs(d[A])+Math.abs(s[A])),_=A;_<a&&!(Math.abs(s[_])<=q*G);)_++;if(_>A)do{for(f=d[A],M=(d[A+1]-f)/(2*s[A]),P=hypotenuse$1(M,1),M<0&&(P=-P),d[A]=s[A]/(M+P),d[A+1]=s[A]*(M+P),E=d[A+1],g=f-d[A],x=A+2;x<a;x++)d[x]-=g;for(W=W+g,M=d[_],R=1,B=R,z=R,F=s[A+1],I=0,L=0,x=_-1;x>=A;x--)for(z=B,B=R,L=I,f=R*s[x],g=R*M,P=hypotenuse$1(M,s[x]),s[x+1]=I*P,I=s[x]/P,R=M/P,M=R*d[x]-I*f,d[x+1]=g+I*(R*f+I*d[x]),C=0;C<a;C++)g=m.get(C,x+1),m.set(C,x+1,I*m.get(C,x)+R*g),m.set(C,x,R*m.get(C,x)-I*g);M=-I*L*z*F*s[A]/E,s[A]=I*M,d[A]=R*M}while(Math.abs(s[A])>q*G);d[A]=d[A]+W,s[A]=0}for(x=0;x<a-1;x++){for(C=x,M=d[x],w=x+1;w<a;w++)d[w]<M&&(C=w,M=d[w]);if(C!==x)for(d[C]=d[x],d[x]=M,w=0;w<a;w++)M=m.get(w,x),m.set(w,x,m.get(w,C)),m.set(w,C,M)}}function orthes(a,s,d,m){let f=0,g=a-1,x,w,C,A,_,M,P;for(M=f+1;M<=g-1;M++){for(P=0,A=M;A<=g;A++)P=P+Math.abs(s.get(A,M-1));if(P!==0){for(C=0,A=g;A>=M;A--)d[A]=s.get(A,M-1)/P,C+=d[A]*d[A];for(w=Math.sqrt(C),d[M]>0&&(w=-w),C=C-d[M]*w,d[M]=d[M]-w,_=M;_<a;_++){for(x=0,A=g;A>=M;A--)x+=d[A]*s.get(A,_);for(x=x/C,A=M;A<=g;A++)s.set(A,_,s.get(A,_)-x*d[A])}for(A=0;A<=g;A++){for(x=0,_=g;_>=M;_--)x+=d[_]*s.get(A,_);for(x=x/C,_=M;_<=g;_++)s.set(A,_,s.get(A,_)-x*d[_])}d[M]=P*d[M],s.set(M,M-1,P*w)}}for(A=0;A<a;A++)for(_=0;_<a;_++)m.set(A,_,A===_?1:0);for(M=g-1;M>=f+1;M--)if(s.get(M,M-1)!==0){for(A=M+1;A<=g;A++)d[A]=s.get(A,M-1);for(_=M;_<=g;_++){for(w=0,A=M;A<=g;A++)w+=d[A]*m.get(A,_);for(w=w/d[M]/s.get(M,M-1),A=M;A<=g;A++)m.set(A,_,m.get(A,_)+w*d[A])}}}function hqr2(a,s,d,m,f){let g=a-1,x=0,w=a-1,C=Number.EPSILON,A=0,_=0,M=0,P=0,E=0,R=0,B=0,z=0,F,I,L,W,G,q,K,Z,J,te,Q,me,Xe,Ve,Ye;for(F=0;F<a;F++)for((F<x||F>w)&&(d[F]=f.get(F,F),s[F]=0),I=Math.max(F-1,0);I<a;I++)_=_+Math.abs(f.get(F,I));for(;g>=x;){for(W=g;W>x&&(R=Math.abs(f.get(W-1,W-1))+Math.abs(f.get(W,W)),R===0&&(R=_),!(Math.abs(f.get(W,W-1))<C*R));)W--;if(W===g)f.set(g,g,f.get(g,g)+A),d[g]=f.get(g,g),s[g]=0,g--,z=0;else if(W===g-1){if(K=f.get(g,g-1)*f.get(g-1,g),M=(f.get(g-1,g-1)-f.get(g,g))/2,P=M*M+K,B=Math.sqrt(Math.abs(P)),f.set(g,g,f.get(g,g)+A),f.set(g-1,g-1,f.get(g-1,g-1)+A),Z=f.get(g,g),P>=0){for(B=M>=0?M+B:M-B,d[g-1]=Z+B,d[g]=d[g-1],B!==0&&(d[g]=Z-K/B),s[g-1]=0,s[g]=0,Z=f.get(g,g-1),R=Math.abs(Z)+Math.abs(B),M=Z/R,P=B/R,E=Math.sqrt(M*M+P*P),M=M/E,P=P/E,I=g-1;I<a;I++)B=f.get(g-1,I),f.set(g-1,I,P*B+M*f.get(g,I)),f.set(g,I,P*f.get(g,I)-M*B);for(F=0;F<=g;F++)B=f.get(F,g-1),f.set(F,g-1,P*B+M*f.get(F,g)),f.set(F,g,P*f.get(F,g)-M*B);for(F=x;F<=w;F++)B=m.get(F,g-1),m.set(F,g-1,P*B+M*m.get(F,g)),m.set(F,g,P*m.get(F,g)-M*B)}else d[g-1]=Z+M,d[g]=Z+M,s[g-1]=B,s[g]=-B;g=g-2,z=0}else{if(Z=f.get(g,g),J=0,K=0,W<g&&(J=f.get(g-1,g-1),K=f.get(g,g-1)*f.get(g-1,g)),z===10){for(A+=Z,F=x;F<=g;F++)f.set(F,F,f.get(F,F)-Z);R=Math.abs(f.get(g,g-1))+Math.abs(f.get(g-1,g-2)),Z=J=.75*R,K=-.4375*R*R}if(z===30&&(R=(J-Z)/2,R=R*R+K,R>0)){for(R=Math.sqrt(R),J<Z&&(R=-R),R=Z-K/((J-Z)/2+R),F=x;F<=g;F++)f.set(F,F,f.get(F,F)-R);A+=R,Z=J=K=.964}for(z=z+1,G=g-2;G>=W&&(B=f.get(G,G),E=Z-B,R=J-B,M=(E*R-K)/f.get(G+1,G)+f.get(G,G+1),P=f.get(G+1,G+1)-B-E-R,E=f.get(G+2,G+1),R=Math.abs(M)+Math.abs(P)+Math.abs(E),M=M/R,P=P/R,E=E/R,!(G===W||Math.abs(f.get(G,G-1))*(Math.abs(P)+Math.abs(E))<C*(Math.abs(M)*(Math.abs(f.get(G-1,G-1))+Math.abs(B)+Math.abs(f.get(G+1,G+1))))));)G--;for(F=G+2;F<=g;F++)f.set(F,F-2,0),F>G+2&&f.set(F,F-3,0);for(L=G;L<=g-1&&(Ve=L!==g-1,L!==G&&(M=f.get(L,L-1),P=f.get(L+1,L-1),E=Ve?f.get(L+2,L-1):0,Z=Math.abs(M)+Math.abs(P)+Math.abs(E),Z!==0&&(M=M/Z,P=P/Z,E=E/Z)),Z!==0);L++)if(R=Math.sqrt(M*M+P*P+E*E),M<0&&(R=-R),R!==0){for(L!==G?f.set(L,L-1,-R*Z):W!==G&&f.set(L,L-1,-f.get(L,L-1)),M=M+R,Z=M/R,J=P/R,B=E/R,P=P/M,E=E/M,I=L;I<a;I++)M=f.get(L,I)+P*f.get(L+1,I),Ve&&(M=M+E*f.get(L+2,I),f.set(L+2,I,f.get(L+2,I)-M*B)),f.set(L,I,f.get(L,I)-M*Z),f.set(L+1,I,f.get(L+1,I)-M*J);for(F=0;F<=Math.min(g,L+3);F++)M=Z*f.get(F,L)+J*f.get(F,L+1),Ve&&(M=M+B*f.get(F,L+2),f.set(F,L+2,f.get(F,L+2)-M*E)),f.set(F,L,f.get(F,L)-M),f.set(F,L+1,f.get(F,L+1)-M*P);for(F=x;F<=w;F++)M=Z*m.get(F,L)+J*m.get(F,L+1),Ve&&(M=M+B*m.get(F,L+2),m.set(F,L+2,m.get(F,L+2)-M*E)),m.set(F,L,m.get(F,L)-M),m.set(F,L+1,m.get(F,L+1)-M*P)}}}if(_!==0){for(g=a-1;g>=0;g--)if(M=d[g],P=s[g],P===0)for(W=g,f.set(g,g,1),F=g-1;F>=0;F--){for(K=f.get(F,F)-M,E=0,I=W;I<=g;I++)E=E+f.get(F,I)*f.get(I,g);if(s[F]<0)B=K,R=E;else if(W=F,s[F]===0?f.set(F,g,K!==0?-E/K:-E/(C*_)):(Z=f.get(F,F+1),J=f.get(F+1,F),P=(d[F]-M)*(d[F]-M)+s[F]*s[F],q=(Z*R-B*E)/P,f.set(F,g,q),f.set(F+1,g,Math.abs(Z)>Math.abs(B)?(-E-K*q)/Z:(-R-J*q)/B)),q=Math.abs(f.get(F,g)),C*q*q>1)for(I=F;I<=g;I++)f.set(I,g,f.get(I,g)/q)}else if(P<0)for(W=g-1,Math.abs(f.get(g,g-1))>Math.abs(f.get(g-1,g))?(f.set(g-1,g-1,P/f.get(g,g-1)),f.set(g-1,g,-(f.get(g,g)-M)/f.get(g,g-1))):(Ye=cdiv(0,-f.get(g-1,g),f.get(g-1,g-1)-M,P),f.set(g-1,g-1,Ye[0]),f.set(g-1,g,Ye[1])),f.set(g,g-1,0),f.set(g,g,1),F=g-2;F>=0;F--){for(te=0,Q=0,I=W;I<=g;I++)te=te+f.get(F,I)*f.get(I,g-1),Q=Q+f.get(F,I)*f.get(I,g);if(K=f.get(F,F)-M,s[F]<0)B=K,E=te,R=Q;else if(W=F,s[F]===0?(Ye=cdiv(-te,-Q,K,P),f.set(F,g-1,Ye[0]),f.set(F,g,Ye[1])):(Z=f.get(F,F+1),J=f.get(F+1,F),me=(d[F]-M)*(d[F]-M)+s[F]*s[F]-P*P,Xe=(d[F]-M)*2*P,me===0&&Xe===0&&(me=C*_*(Math.abs(K)+Math.abs(P)+Math.abs(Z)+Math.abs(J)+Math.abs(B))),Ye=cdiv(Z*E-B*te+P*Q,Z*R-B*Q-P*te,me,Xe),f.set(F,g-1,Ye[0]),f.set(F,g,Ye[1]),Math.abs(Z)>Math.abs(B)+Math.abs(P)?(f.set(F+1,g-1,(-te-K*f.get(F,g-1)+P*f.get(F,g))/Z),f.set(F+1,g,(-Q-K*f.get(F,g)-P*f.get(F,g-1))/Z)):(Ye=cdiv(-E-J*f.get(F,g-1),-R-J*f.get(F,g),B,P),f.set(F+1,g-1,Ye[0]),f.set(F+1,g,Ye[1]))),q=Math.max(Math.abs(f.get(F,g-1)),Math.abs(f.get(F,g))),C*q*q>1)for(I=F;I<=g;I++)f.set(I,g-1,f.get(I,g-1)/q),f.set(I,g,f.get(I,g)/q)}for(F=0;F<a;F++)if(F<x||F>w)for(I=F;I<a;I++)m.set(F,I,f.get(F,I));for(I=a-1;I>=x;I--)for(F=x;F<=w;F++){for(B=0,L=x;L<=Math.min(I,w);L++)B=B+m.get(F,L)*f.get(L,I);m.set(F,I,B)}}}function cdiv(a,s,d,m){let f,g;return Math.abs(d)>Math.abs(m)?(f=m/d,g=d+f*m,[(a+f*s)/g,(s-f*a)/g]):(f=d/m,g=m+f*d,[(f*a+s)/g,(f*s-a)/g])}class CholeskyDecomposition{constructor(s){if(s=WrapperMatrix2D.checkMatrix(s),!s.isSymmetric())throw new Error("Matrix is not symmetric");let d=s,m=d.rows,f=new Matrix$3(m,m),g=!0,x,w,C;for(w=0;w<m;w++){let A=0;for(C=0;C<w;C++){let _=0;for(x=0;x<C;x++)_+=f.get(C,x)*f.get(w,x);_=(d.get(w,C)-_)/f.get(C,C),f.set(w,C,_),A=A+_*_}for(A=d.get(w,w)-A,g&=A>0,f.set(w,w,Math.sqrt(Math.max(A,0))),C=w+1;C<m;C++)f.set(w,C,0)}this.L=f,this.positiveDefinite=!!g}isPositiveDefinite(){return this.positiveDefinite}solve(s){s=WrapperMatrix2D.checkMatrix(s);let d=this.L,m=d.rows;if(s.rows!==m)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let f=s.columns,g=s.clone(),x,w,C;for(C=0;C<m;C++)for(w=0;w<f;w++){for(x=0;x<C;x++)g.set(C,w,g.get(C,w)-g.get(x,w)*d.get(C,x));g.set(C,w,g.get(C,w)/d.get(C,C))}for(C=m-1;C>=0;C--)for(w=0;w<f;w++){for(x=C+1;x<m;x++)g.set(C,w,g.get(C,w)-g.get(x,w)*d.get(x,C));g.set(C,w,g.get(C,w)/d.get(C,C))}return g}get lowerTriangularMatrix(){return this.L}}class nipals{constructor(s,d={}){s=WrapperMatrix2D.checkMatrix(s);let{Y:m}=d;const{scaleScores:f=!1,maxIterations:g=1e3,terminationCriteria:x=1e-10}=d;let w;if(m){if(isAnyArray.isAnyArray(m)&&typeof m[0]=="number"?m=Matrix$3.columnVector(m):m=WrapperMatrix2D.checkMatrix(m),m.rows!==s.rows)throw new Error("Y should have the same number of rows as X");w=m.getColumnVector(0)}else w=s.getColumnVector(0);let C=1,A,_,M,P;for(let E=0;E<g&&C>x;E++)M=s.transpose().mmul(w).div(w.transpose().mmul(w).get(0,0)),M=M.div(M.norm()),A=s.mmul(M).div(M.transpose().mmul(M).get(0,0)),E>0&&(C=A.clone().sub(P).pow(2).sum()),P=A.clone(),m?(_=m.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0)),_=_.div(_.norm()),w=m.mmul(_).div(_.transpose().mmul(_).get(0,0))):w=A;if(m){let E=s.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0));E=E.div(E.norm());let R=s.clone().sub(A.clone().mmul(E.transpose())),B=w.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0)),z=m.clone().sub(A.clone().mulS(B.get(0,0)).mmul(_.transpose()));this.t=A,this.p=E.transpose(),this.w=M.transpose(),this.q=_,this.u=w,this.s=A.transpose().mmul(A),this.xResidual=R,this.yResidual=z,this.betas=B}else this.w=M.transpose(),this.s=A.transpose().mmul(A).sqrt(),f?this.t=A.clone().div(this.s.get(0,0)):this.t=A,this.xResidual=s.sub(A.mmul(M.transpose()))}}matrix.AbstractMatrix=AbstractMatrix;matrix.CHO=CholeskyDecomposition;matrix.CholeskyDecomposition=CholeskyDecomposition;matrix.DistanceMatrix=DistanceMatrix;matrix.EVD=EigenvalueDecomposition;matrix.EigenvalueDecomposition=EigenvalueDecomposition;matrix.LU=LuDecomposition;matrix.LuDecomposition=LuDecomposition;var Matrix_1=matrix.Matrix=Matrix$3;matrix.MatrixColumnSelectionView=MatrixColumnSelectionView;matrix.MatrixColumnView=MatrixColumnView;matrix.MatrixFlipColumnView=MatrixFlipColumnView;matrix.MatrixFlipRowView=MatrixFlipRowView;matrix.MatrixRowSelectionView=MatrixRowSelectionView;matrix.MatrixRowView=MatrixRowView;matrix.MatrixSelectionView=MatrixSelectionView;matrix.MatrixSubView=MatrixSubView;matrix.MatrixTransposeView=MatrixTransposeView$1;matrix.NIPALS=nipals;matrix.Nipals=nipals;matrix.QR=QrDecomposition;matrix.QrDecomposition=QrDecomposition;var SVD$1=matrix.SVD=SingularValueDecomposition$1,SingularValueDecomposition_1=matrix.SingularValueDecomposition=SingularValueDecomposition$1;matrix.SymmetricMatrix=SymmetricMatrix;matrix.WrapperMatrix1D=WrapperMatrix1D;matrix.WrapperMatrix2D=WrapperMatrix2D;matrix.correlation=correlation;matrix.covariance=covariance$1;var _default=matrix.default=Matrix$3;matrix.determinant=determinant;var inverse_1=matrix.inverse=inverse$1;matrix.linearDependencies=linearDependencies;matrix.pseudoInverse=pseudoInverse;var solve_1=matrix.solve=solve$1;matrix.wrap=wrap;const Matrix$2=Matrix_1,SVD=SVD$1,SingularValueDecomposition=SingularValueDecomposition_1;_default.Matrix&&_default.Matrix;const inverse=inverse_1,solve=solve_1;function getSeparatedKernel(a){const s=new SVD(a,{autoTranspose:!0});if(s.rank!==1)return null;const d=Math.sqrt(s.s[0]),m=s.U.to2DArray().map(g=>g[0]*d),f=s.V.to2DArray().map(g=>g[0]*d);return[m,f]}function convolution(a,s={}){let{channels:d,bitDepth:m,normalize:f=!1,divisor:g=1,border:x="copy",algorithm:w="auto"}=s,C={};m&&(C.bitDepth=m);let A=Image$1.createFrom(this,C);if(d=validateArrayOfChannels(this,d),w!=="separable")({kernel:a}=validateKernel(a));else if(!Array.isArray(a)||a.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(w==="auto"){let W=getSeparatedKernel(a);W!==null?(w="separable",a=W):(a.length>9||a[0].length>9)&&this.width<=4096&&this.height<=4096?w="fft":w="direct"}let _,M;w==="separable"?(_=Math.floor(a[0].length/2),M=Math.floor(a[1].length/2)):(_=Math.floor(a.length/2),M=Math.floor(a[0].length/2));let P=A.isClamped,E=new Array(this.height*this.width),R,B,z,F,I,L;for(F=0;F<d.length;F++){for(I=d[F],z=0;z<this.height;z++)for(B=0;B<this.width;B++)R=z*this.width+B,E[R]=this.data[R*this.channels+I];if(w==="direct")L=src$1.direct(E,a,{rows:this.height,cols:this.width,normalize:f,divisor:g});else if(w==="separable"){if(L=convolutionSeparable(E,a,this.width,this.height),f){g=0;for(let W=0;W<a[0].length;W++)for(let G=0;G<a[1].length;G++)g+=a[0][W]*a[1][G]}if(g!==1)for(let W=0;W<L.length;W++)L[W]/=g}else L=src$1.fft(E,a,{rows:this.height,cols:this.width,normalize:f,divisor:g});for(z=0;z<this.height;z++)for(B=0;B<this.width;B++)R=z*this.width+B,P?A.data[R*this.channels+I]=clamp(L[R],A):A.data[R*this.channels+I]=L[R]}if(this.alpha&&!d.includes(this.channels))for(B=this.components;B<this.data.length;B=B+this.channels)A.data[B]=this.data[B];return x!=="periodic"&&A.setBorder({size:[M,_],algorithm:x}),A}function gradientFilter(a={}){let{direction:s="xy",border:d="copy",kernelX:m,kernelY:f,channels:g,bitDepth:x=this.bitDepth}=a;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),s){case"x":if(!m)throw new Error("kernelX option is missing");return convolution.call(this,m,{channels:g,border:d,bitDepth:x});case"y":if(!f)throw new Error("kernelY option is missing");return convolution.call(this,f,{channels:g,border:d,bitDepth:x});case"xy":{if(!m)throw new Error("kernelX option is missing");if(!f)throw new Error("kernelY option is missing");const w=convolution.call(this,m,{channels:g,border:d,bitDepth:32}),C=convolution.call(this,f,{channels:g,border:d,bitDepth:32});return w.hypotenuse(C,{bitDepth:x,channels:g})}default:throw new Error(`Unknown parameter direction: ${s}`)}}function sobelFilter(a){return gradientFilter.call(this,Object.assign({},a,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(a){return gradientFilter.call(this,Object.assign({},a,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1=newArray;function newArray(a,s){a=a||0;for(var d=new Array(a),m=0;m<a;m++)d[m]=s;return d}const newArray$1=getDefaultExportFromCjs$1(newArray_1);function level(a={}){let{algorithm:s="range",channels:d,min:m=this.min,max:f=this.max}=a;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),d=validateArrayOfChannels(this,{channels:d}),d.length!==this.channel&&(Array.isArray(m)&&m.length===this.channels&&(m=m.filter((g,x)=>d.includes(x))),Array.isArray(f)&&f.length===this.channels&&(f=f.filter((g,x)=>d.includes(x)))),s){case"range":m<0&&(m=0),f>this.maxValue&&(f=this.maxValue),Array.isArray(m)||(m=newArray$1(d.length,m)),Array.isArray(f)||(f=newArray$1(d.length,f)),processImage(this,m,f,d);break;default:throw new Error(`level: algorithm not implement: ${s}`)}return this}function processImage(a,s,d,m){let f=1e-5,g=new Array(m.length);for(let x=0;x<m.length;x++)s[x]===0&&d[x]===a.maxValue||d[x]===s[x]?g[x]=0:g[x]=(a.maxValue+1-f)/(d[x]-s[x]),s[x]+=(.5-f/2)/g[x];for(let x=0;x<m.length;x++){let w=m[x];if(g[x]!==0)for(let C=0;C<a.data.length;C+=a.channels)a.data[C+w]=Math.min(Math.max(0,(a.data[C+w]-s[x])*g[x]+.5|0),a.maxValue)}}var toString=Object.prototype.toString,isArrayType=function a(s){return toString.call(s).substr(-6,5)==="Array"};const isArray=getDefaultExportFromCjs$1(isArrayType);function checkNumberArray(a){if(isNaN(a)){if(a instanceof Image$1)return a.data;if(!isArray(a))throw new Error("checkNumberArray: the value should be either a number, array or Image");return a}else{if(a<=0)throw new Error("checkNumberArray: the value must be greater than 0");return a}}function add(a,s={}){let{channels:d}=s;if(this.checkProcessable("add",{bitDepth:[8,16]}),d=validateArrayOfChannels(this,{channels:d}),a=checkNumberArray(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("add: the data size is different");for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.max(0,Math.min(this.maxValue,this.data[g+f]+a[g+f]>>0))}}else for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.min(this.maxValue,this.data[g+f]+a>>0)}return this}function subtract(a,s={}){let{channels:d}=s;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),d=validateArrayOfChannels(this,{channels:d}),a=checkNumberArray(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("subtract: the data size is different");for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.max(0,Math.min(this.maxValue,this.data[g+f]-a[g+f]>>0))}}else for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.max(0,this.data[g+f]-a>>0)}return this}function subtractImage(a,s={}){let{channels:d,absolute:m=!1}=s;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==a.width||this.height!==a.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==a.alpha||this.bitDepth!==a.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==a.channels)throw new Error("subtractImage: both images must have the same number of channels");let f=this.clone();d=validateArrayOfChannels(this,{channels:d});for(let g=0;g<d.length;g++){let x=d[g];for(let w=x;w<this.data.length;w+=this.channels){let C=this.data[w]-a.data[w];m?f.data[w]=Math.abs(C):f.data[w]=Math.max(C,0)}}return f}function hypotenuse(a,s={}){let{bitDepth:d=this.bitDepth,channels:m}=s;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==a.width||this.height!==a.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==a.alpha||this.bitDepth!==a.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==a.channels)throw new Error("hypotenuse: both images must have the same number of channels");let f=Image$1.createFrom(this,{bitDepth:d});m=validateArrayOfChannels(this,{channels:m});let g=f.isClamped;for(let x=0;x<m.length;x++){let w=m[x];for(let C=w;C<this.data.length;C+=this.channels){let A=Math.hypot(this.data[C],a.data[C]);g?f.data[C]=Math.min(Math.max(Math.round(A),0),f.maxValue):f.data[C]=A}}return f}function multiply(a,s={}){let{channels:d}=s;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),a<=0)throw new Error("multiply: the value must be greater than 0");if(d=validateArrayOfChannels(this,{channels:d}),a=checkNumberArray(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("multiply: the data size is different");for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.max(0,Math.min(this.maxValue,this.data[g+f]*a[g+f]>>0))}}else for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.min(this.maxValue,this.data[g+f]*a>>0)}return this}function divide(a,s={}){let{channels:d}=s;if(this.checkProcessable("divide",{bitDepth:[8,16]}),d=validateArrayOfChannels(this,{channels:d}),a=checkNumberArray(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("divide: the: the data size is different");for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.max(0,Math.min(this.maxValue,this.data[g+f]/a[g+f]>>0))}}else for(let m=0;m<d.length;m++){let f=d[m];for(let g=0;g<this.data.length;g+=this.channels)this.data[g+f]=Math.min(this.maxValue,this.data[g+f]/a>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(s){if(typeof s=="number")return this._predict(s);if(isAnyArray$1(s)){const d=[];for(let m=0;m<s.length;m++)d.push(this._predict(s[m]));return d}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(s,d){if(!isAnyArray$1(s)||!isAnyArray$1(d)||s.length!==d.length)throw new Error("x and y must be arrays of the same length");const m=s.length,f=new Array(m);for(let E=0;E<m;E++)f[E]=this._predict(s[E]);let g=0,x=0,w=0,C=0,A=0,_=0,M=0;for(let E=0;E<m;E++)g+=f[E],x+=d[E],A+=f[E]*f[E],_+=d[E]*d[E],M+=f[E]*d[E],d[E]!==0&&(w+=(d[E]-f[E])*(d[E]-f[E])/d[E]),C+=(d[E]-f[E])*(d[E]-f[E]);const P=(m*M-g*x)/Math.sqrt((m*A-g*g)*(m*_-x*x));return{r:P,r2:P*P,chi2:w,rmsd:Math.sqrt(C/m)}}}function squaredEuclidean$4(a,s){let d=0;for(let m=0;m<a.length;m++)d+=(a[m]-s[m])*(a[m]-s[m]);return d}function euclidean$2(a,s){return Math.sqrt(squaredEuclidean$4(a,s))}const euclidean$3=Object.freeze(Object.defineProperty({__proto__:null,euclidean:euclidean$2,squaredEuclidean:squaredEuclidean$4},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$3),{squaredEuclidean:squaredEuclidean$3}=require$$0,defaultOptions$b={sigma:1};let GaussianKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$b,a),this.sigma=a.sigma,this.divisor=2*a.sigma*a.sigma}compute(a,s){const d=squaredEuclidean$3(a,s);return Math.exp(-d/this.divisor)}};var gaussianKernel=GaussianKernel$1;const defaultOptions$a={degree:1,constant:1,scale:1};let PolynomialKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$a,a),this.degree=a.degree,this.constant=a.constant,this.scale=a.scale}compute(a,s){for(var d=0,m=0;m<a.length;m++)d+=a[m]*s[m];return Math.pow(this.scale*d+this.constant,this.degree)}};var polynomialKernel=PolynomialKernel$1;const defaultOptions$9={alpha:.01,constant:-Math.E};let SigmoidKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$9,a),this.alpha=a.alpha,this.constant=a.constant}compute(a,s){for(var d=0,m=0;m<a.length;m++)d+=a[m]*s[m];return Math.tanh(this.alpha*d+this.constant)}};var sigmoidKernel=SigmoidKernel$1;const defaultOptions$8={sigma:1,degree:1};let ANOVAKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$8,a),this.sigma=a.sigma,this.degree=a.degree}compute(a,s){for(var d=0,m=Math.min(a.length,s.length),f=1;f<=m;++f)d+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(a[f-1],f)-Math.pow(s[f-1],f),2)),this.degree);return d}};var anovaKernel=ANOVAKernel$1;const{squaredEuclidean:squaredEuclidean$2}=require$$0,defaultOptions$7={sigma:1};let CauchyKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$7,a),this.sigma=a.sigma}compute(a,s){return 1/(1+squaredEuclidean$2(a,s)/(this.sigma*this.sigma))}};var cauchyKernel=CauchyKernel$1;const{euclidean:euclidean$1}=require$$0,defaultOptions$6={sigma:1};let ExponentialKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$6,a),this.sigma=a.sigma,this.divisor=2*a.sigma*a.sigma}compute(a,s){const d=euclidean$1(a,s);return Math.exp(-d/this.divisor)}};var exponentialKernel=ExponentialKernel$1;class HistogramIntersectionKernel{compute(s,d){for(var m=Math.min(s.length,d.length),f=0,g=0;g<m;++g)f+=Math.min(s[g],d[g]);return f}}var histogramIntersectionKernel=HistogramIntersectionKernel;const{euclidean}=require$$0,defaultOptions$5={sigma:1};let LaplacianKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$5,a),this.sigma=a.sigma}compute(a,s){const d=euclidean(a,s);return Math.exp(-d/this.sigma)}};var laplacianKernel=LaplacianKernel$1;const{squaredEuclidean:squaredEuclidean$1}=require$$0,defaultOptions$4={constant:1};let MultiquadraticKernel$1=class{constructor(a){a=Object.assign({},defaultOptions$4,a),this.constant=a.constant}compute(a,s){return Math.sqrt(squaredEuclidean$1(a,s)+this.constant*this.constant)}};var multiquadraticKernel=MultiquadraticKernel$1;const{squaredEuclidean}=require$$0,defaultOptions$3={constant:1};class RationalQuadraticKernel{constructor(s){s=Object.assign({},defaultOptions$3,s),this.constant=s.constant}compute(s,d){const m=squaredEuclidean(s,d);return 1-m/(m+this.constant)}}var rationalQuadraticKernel=RationalQuadraticKernel;const{Matrix:Matrix$1,MatrixTransposeView}=matrix,GaussianKernel=gaussianKernel,PolynomialKernel=polynomialKernel,SigmoidKernel=sigmoidKernel,ANOVAKernel=anovaKernel,CauchyKernel=cauchyKernel,ExponentialKernel=exponentialKernel,HistogramKernel=histogramIntersectionKernel,LaplacianKernel=laplacianKernel,MultiquadraticKernel=multiquadraticKernel,RationalKernel=rationalQuadraticKernel,kernelType={gaussian:GaussianKernel,rbf:GaussianKernel,polynomial:PolynomialKernel,poly:PolynomialKernel,anova:ANOVAKernel,cauchy:CauchyKernel,exponential:ExponentialKernel,histogram:HistogramKernel,min:HistogramKernel,laplacian:LaplacianKernel,multiquadratic:MultiquadraticKernel,rational:RationalKernel,sigmoid:SigmoidKernel,mlp:SigmoidKernel};class Kernel{constructor(s,d){if(this.kernelType=s,s!=="linear")if(typeof s=="string"){s=s.toLowerCase();var m=kernelType[s];if(m)this.kernelFunction=new m(d);else throw new Error(`unsupported kernel type: ${s}`)}else if(typeof s=="object"&&typeof s.compute=="function")this.kernelFunction=s;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(s,d){if(s=Matrix$1.checkMatrix(s),d===void 0?d=s:d=Matrix$1.checkMatrix(d),this.kernelType==="linear")return s.mmul(new MatrixTransposeView(d));const m=new Matrix$1(s.rows,d.rows);if(s===d)for(let f=0;f<s.rows;f++)for(let g=f;g<s.rows;g++){const x=this.kernelFunction.compute(s.getRow(f),s.getRow(g));m.set(f,g,x),m.set(g,f,x)}else for(let f=0;f<s.rows;f++)for(let g=0;g<d.rows;g++)m.set(f,g,this.kernelFunction.compute(s.getRow(f),d.getRow(g)));return m}}var kernel=Kernel;const Kernel$1=getDefaultExportFromCjs$1(kernel),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(s,d,m){if(super(),s===!0)this.alpha=d.alpha,this.inputs=d.inputs,this.kernelType=d.kernelType,this.kernelOptions=d.kernelOptions,this.kernel=new Kernel$1(d.kernelType,d.kernelOptions);else{s=Matrix$2.checkMatrix(s),m=Object.assign({},defaultOptions$2,m);const f=new Kernel$1(m.kernelType,m.kernelOptions),g=f.compute(s),x=s.rows;g.add(Matrix$2.eye(x,x).mul(m.lambda)),this.alpha=solve(g,d),this.inputs=s,this.kernelType=m.kernelType,this.kernelOptions=m.kernelOptions,this.kernel=f}}_predict(s){return this.kernel.compute([s],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(s){if(s.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,s)}}function background$1(a,s,d){const m=new KernelRidgeRegression(a,s,d),f=new Array(this.size);for(let w=0;w<this.width;w++)for(let C=0;C<this.height;C++)f[C*this.width+w]=[w,C];const g=m.predict(f),x=Image$1.createFrom(this);for(let w=0;w<this.size;w++)x.data[w]=Math.min(this.maxValue,Math.max(0,g[w][0]));return x}function dilate(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let m=!0;e:for(const g of s)for(const x of g)if(x!==1){m=!1;break e}let f=this;for(let g=0;g<d;g++)if(this.bitDepth===1)if(m){const x=f.clone();f=dilateOnceBinaryOnlyOnes(f,x,s.length,s[0].length)}else{const x=Image$1.createFrom(f);f=dilateOnceBinary(f,x,s)}else if(m){const x=Image$1.createFrom(f);f=dilateOnceGreyOnlyOnes(f,x,s.length,s[0].length)}else{const x=Image$1.createFrom(f);f=dilateOnceGrey(f,x,s)}return f}function dilateOnceGrey(a,s,d){const m=d.length,f=d[0].length;let g=(m-1)/2,x=(f-1)/2;for(let w=0;w<a.height;w++)for(let C=0;C<a.width;C++){let A=0;for(let _=0;_<f;_++)for(let M=0;M<m;M++){if(d[M][_]!==1)continue;let P=M-g+C,E=_-x+w;if(P<0||E<0||P>=a.width||E>=a.height)continue;const R=a.getValueXY(P,E,0);R>A&&(A=R)}s.setValueXY(C,w,0,A)}return s}function dilateOnceGreyOnlyOnes(a,s,d,m){const f=(d-1)/2,g=(m-1)/2,x=[];for(let w=0;w<a.width;w++)x.push(0);for(let w=0;w<a.height;w++){for(let C=0;C<a.width;C++){let A=0;for(let _=Math.max(0,w-g);_<Math.min(a.height,w+g+1);_++){const M=a.getValueXY(C,_,0);M>A&&(A=M)}x[C]=A}for(let C=0;C<a.width;C++){let A=0;for(let _=Math.max(0,C-f);_<Math.min(a.width,C+f+1);_++)x[_]>A&&(A=x[_]);s.setValueXY(C,w,0,A)}}return s}function dilateOnceBinary(a,s,d){const m=d.length,f=d[0].length;let g=(m-1)/2,x=(f-1)/2;for(let w=0;w<a.height;w++)for(let C=0;C<a.width;C++){let A=0;e:for(let _=0;_<f;_++)for(let M=0;M<m;M++){if(d[M][_]!==1)continue;let P=M-g+C,E=_-x+w;if(!(E<0||P<0||P>=a.width||E>=a.height)&&a.getBitXY(P,E)===1){A=1;break e}}A===1&&s.setBitXY(C,w)}return s}function dilateOnceBinaryOnlyOnes(a,s,d,m){const f=(d-1)/2,g=(m-1)/2,x=[];for(let w=0;w<a.width;w++)x.push(1);for(let w=0;w<a.height;w++){for(let C=0;C<a.width;C++){x[C]=0;for(let A=Math.max(0,w-g);A<Math.min(a.height,w+g+1);A++)if(a.getBitXY(C,A)===1){x[C]=1;break}}for(let C=0;C<a.width;C++)if(s.getBitXY(C,w)!==1){for(let A=Math.max(0,C-f);A<Math.min(a.width,C+f+1);A++)if(x[A]===1){s.setBitXY(C,w);break}}}return s}function erode(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let m=!0;e:for(const g of s)for(const x of g)if(x!==1){m=!1;break e}let f=this;for(let g=0;g<d;g++)if(this.bitDepth===1)if(m){const x=f.clone();f=erodeOnceBinaryOnlyOnes(f,x,s.length,s[0].length)}else{const x=Image$1.createFrom(f);f=erodeOnceBinary(f,x,s)}else if(m){const x=Image$1.createFrom(f);f=erodeOnceGreyOnlyOnes(f,x,s.length,s[0].length)}else{const x=Image$1.createFrom(f);f=erodeOnceGrey(f,x,s)}return f}function erodeOnceGrey(a,s,d){const m=d.length,f=d[0].length;let g=(m-1)/2,x=(f-1)/2;for(let w=0;w<a.height;w++)for(let C=0;C<a.width;C++){let A=a.maxValue;for(let _=0;_<f;_++)for(let M=0;M<m;M++){if(d[M][_]!==1)continue;let P=M-g+C,E=_-x+w;if(P<0||E<0||P>=a.width||E>=a.height)continue;const R=a.getValueXY(P,E,0);R<A&&(A=R)}s.setValueXY(C,w,0,A)}return s}function erodeOnceGreyOnlyOnes(a,s,d,m){const f=(d-1)/2,g=(m-1)/2,x=[];for(let w=0;w<a.width;w++)x.push(0);for(let w=0;w<a.height;w++){for(let C=0;C<a.width;C++){let A=a.maxValue;for(let _=Math.max(0,w-g);_<Math.min(a.height,w+g+1);_++){const M=a.getValueXY(C,_,0);M<A&&(A=M)}x[C]=A}for(let C=0;C<a.width;C++){let A=a.maxValue;for(let _=Math.max(0,C-f);_<Math.min(a.width,C+f+1);_++)x[_]<A&&(A=x[_]);s.setValueXY(C,w,0,A)}}return s}function erodeOnceBinary(a,s,d){const m=d.length,f=d[0].length;let g=(m-1)/2,x=(f-1)/2;for(let w=0;w<a.height;w++)for(let C=0;C<a.width;C++){let A=1;e:for(let _=0;_<f;_++)for(let M=0;M<m;M++){if(d[M][_]!==1)continue;let P=M-g+C,E=_-x+w;if(!(E<0||P<0||P>=a.width||E>=a.height)&&a.getBitXY(P,E)===0){A=0;break e}}A===1&&s.setBitXY(C,w)}return s}function erodeOnceBinaryOnlyOnes(a,s,d,m){const f=(d-1)/2,g=(m-1)/2,x=[];for(let w=0;w<a.width;w++)x.push(0);for(let w=0;w<a.height;w++){for(let C=0;C<a.width;C++){x[C]=1;for(let A=Math.max(0,w-g);A<Math.min(a.height,w+g+1);A++)if(a.getBitXY(C,A)===0){x[C]=0;break}}for(let C=0;C<a.width;C++)if(s.getBitXY(C,w)!==0){for(let A=Math.max(0,C-f);A<Math.min(a.width,C+f+1);A++)if(x[A]===0){s.clearBitXY(C,w);break}}}return s}function open(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let m=this;for(let f=0;f<d;f++)m=m.erode({kernel:s}),m=m.dilate({kernel:s});return m}function close(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let m=this;for(let f=0;f<d;f++)m=m.dilate({kernel:s}).erode({kernel:s});return m}function topHat(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),s.length%2===0||s[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let m=this;for(let f=0;f<d;f++)m=m.open({kernel:s}).subtractImage(m,{absolute:!0});return m}function blackHat(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let m=this;for(let f=0;f<d;f++)m=m.close({kernel:s}).subtractImage(m,{absolute:!0});return m}function morphologicalGradient(a={}){let{kernel:s=[[1,1,1],[1,1,1],[1,1,1]],iterations:d=1}=a;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),s.columns%2===0||s.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let m=this;for(let f=0;f<d;f++){let g=m.dilate({kernel:s}),x=m.erode({kernel:s});m=g.subtractImage(x,{absolute:!0})}return m}function order4Points(a){let s=0,d=0,m=0,f=0,g=a[0][0],x=0;for(let A=1;A<a.length;A++)a[A][0]<g&&(g=a[A][0],x=A);let w=a[(x+1)%a.length][0],C=(x+1)%a.length;for(let A=1;A<a.length;A++)a[A][0]<w&&A!==x&&(w=a[A][0],C=A);return a[C][1]<a[x][1]?(s=a[C],f=a[x],x!==(C+1)%4?(d=a[(C+1)%4],m=a[(C+2)%4]):(d=a[(C+2)%4],m=a[(C+3)%4])):(f=a[C],s=a[x],C!==(x+1)%4?(d=a[(x+1)%4],m=a[(x+2)%4]):(d=a[(x+2)%4],m=a[(x+3)%4])),[s,d,m,f]}function distance2Points(a,s){return Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2))}function crossVect(a,s){return[a[1]*s[2]-a[2]*s[1],a[2]*s[0]-a[0]*s[2],a[0]*s[1]-a[1]*s[0]]}function dotVect(a,s){return a[0]*s[0]+a[1]*s[1]+a[2]*s[2]}function computeWidthAndHeigth(a,s,d,m,f,g){let x=Math.max(distance2Points(a,s),distance2Points(m,d)),w=Math.max(distance2Points(a,m),distance2Points(s,d)),C=0,A=0,_=Math.ceil(f/2),M=Math.ceil(g/2),P=x/w,E=[a[0],a[1],1],R=[s[0],s[1],1],B=[m[0],m[1],1],z=[d[0],d[1],1],F=dotVect(crossVect(E,z),B)/dotVect(crossVect(R,z),B),I=dotVect(crossVect(E,z),R)/dotVect(crossVect(B,z),R),L=[F*R[0]-E[0],F*R[1]-E[1],F*R[2]-E[2]],W=[I*B[0]-E[0],I*B[1]-E[1],I*B[2]-E[2]],G=L[0],q=L[1],K=L[2],Z=W[0],J=W[1],te=W[2],Q=1/(K*te)*(G*Z-(G*te+K*Z)*_+K*te*_*_+(q*J-(q*te+K*J)*M+K*te*M*M));Q>=0?Q=Math.sqrt(Q):Q=Math.sqrt(-Q);let me=new Matrix$2([[Q,0,_],[0,Q,M],[0,0,1]]),Xe=me.transpose(),Ve=inverse(Xe),Ye=inverse(me),qe=Matrix$2.rowVector(L),et=Matrix$2.rowVector(W),je=Math.sqrt(dotVect(qe.mmul(Ve).mmul(Ye).to1DArray(),L)/dotVect(et.mmul(Ve).mmul(Ye).to1DArray(),W));return je===0||P===0?(C=Math.ceil(x),A=Math.ceil(w)):je<P?(C=Math.ceil(x),A=Math.ceil(C/je)):(A=Math.ceil(w),C=Math.ceil(je*A)),[C,A]}function projectionPoint(a,s,d,m,f,g,x,w,C,A,_,M){let[P,E]=[(d*a+m*s+f)/(C*a+A*s+1),(g*a+x*s+w)/(C*a+A*s+1)];return _.getValueXY(Math.floor(P),Math.floor(E),M)}function warpingFourPoints(a,s={}){let{calculateRatio:d=!0}=s;if(a.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${a.length} elements`);let[m,f,g,x]=a,w=[m,f,g,x],[C,A,_,M]=order4Points(w),P,E;d?[P,E]=computeWidthAndHeigth(C,A,_,M,this.width,this.height):(P=Math.ceil(Math.max(distance2Points(C,A),distance2Points(M,_))),E=Math.ceil(Math.max(distance2Points(C,M),distance2Points(A,_))));let R=Image$1.createFrom(this,{width:P,height:E}),[B,z]=C,[F,I]=A,[L,W]=_,[G,q]=M,[K,Z]=[0,0],[J,te]=[0,P-1],[Q,me]=[E-1,P-1],[Xe,Ve]=[E-1,0],Ye=new Matrix$2([[K,Z,1,0,0,0,-K*B,-Z*B],[J,te,1,0,0,0,-J*F,-te*F],[Q,me,1,0,0,0,-Q*L,-Z*L],[Xe,Ve,1,0,0,0,-Xe*G,-Ve*G],[0,0,0,K,Z,1,-K*z,-Z*z],[0,0,0,J,te,1,-J*I,-te*I],[0,0,0,Q,me,1,-Q*W,-me*W],[0,0,0,Xe,Ve,1,-Xe*q,-Ve*q]]),qe=Matrix$2.columnVector([B,F,L,G,z,I,W,q]),et=new SingularValueDecomposition(Ye).solve(qe),[je,Ke,Je,at,nt,ct,pt,rt]=et.to1DArray(),ht=new Matrix$2(E,P);for(let yt=0;yt<this.channels;yt++){for(let wt=0;wt<E;wt++)for(let ft=0;ft<P;ft++)ht.set(wt,ft,projectionPoint(wt,ft,je,Ke,Je,at,nt,ct,pt,rt,this,yt));R.setMatrix(ht,{channel:yt})}return R}function crop(a={}){let{x:s=0,y:d=0,width:m=this.width-s,height:f=this.height-d}=a;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),s=Math.round(s),d=Math.round(d),m=Math.round(m),f=Math.round(f),s>this.width-1||d>this.height-1)throw new RangeError(`crop: origin (x:${s}, y:${d}) out of range (${this.width-1}; ${this.height-1})`);if(m<=0||f<=0)throw new RangeError(`crop: width and height (width:${m}; height:${f}) must be positive numbers`);if(s<0||d<0)throw new RangeError(`crop: x and y (x:${s}, y:${d}) must be positive numbers`);if(m>this.width-s||f>this.height-d)throw new RangeError(`crop: (x: ${s}, y:${d}, width:${m}, height:${f}) size is out of range`);let g=this;if(this.bitDepth===1){const x=new Image$1(m,f,{kind:"BINARY",parent:this});g=cropBinary(this,x,s,d,m,f)}else{const x=Image$1.createFrom(this,{width:m,height:f,position:[s,d]});g=cropDefault(this,x,s,d,m,f)}return g}function cropDefault(a,s,d,m,f,g){let x=f*a.channels,w=m+g,C=0,A=d*a.channels;for(let _=m;_<w;_++){let M=_*a.width*a.channels+A,P=M+x;for(;M<P;M++)s.data[C++]=a.data[M]}return s}function cropBinary(a,s,d,m,f,g){let x=f*a.channels,w=m+g,C=0,A=d*a.channels;for(let _=m;_<w;_++){let M=_*a.width*a.channels+A,P=M+x;for(;M<P;M++)a.getBit(M)&&s.setBit(C),++C}return s}function cropAlpha(a={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:s=this.maxValue}=a;let d=findLeft(this,s,this.components);if(d===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let m=findTop(this,s,this.components,d),f=findBottom(this,s,this.components,d),g=findRight(this,s,this.components,d,m,f);return this.crop({x:d,y:m,width:g-d+1,height:f-m+1})}function findLeft(a,s,d){for(let m=0;m<a.width;m++)for(let f=0;f<a.height;f++)if(a.getValueXY(m,f,d)>=s)return m;return-1}function findTop(a,s,d,m){for(let f=0;f<a.height;f++)for(let g=m;g<a.width;g++)if(a.getValueXY(g,f,d)>=s)return f;return-1}function findBottom(a,s,d,m){for(let f=a.height-1;f>=0;f--)for(let g=m;g<a.width;g++)if(a.getValueXY(g,f,d)>=s)return f;return-1}function findRight(a,s,d,m,f,g){for(let x=a.width-1;x>=m;x--)for(let w=f;w<=g;w++)if(a.getValueXY(x,w,d)>=s)return x;return-1}function getFactor(a){if(typeof a=="string"){const s=a[a.length-1];a=parseFloat(a),s==="%"&&(a/=100)}return a}function getThreshold$1(a,s){if(!s)throw Error("getThreshold : the maxValue should be specified");if(typeof a=="string"){if(a[a.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(a)/100*s}else{if(typeof a=="number")return a<1?a*s:a;throw Error("getThreshold : the value is not valid")}}function factorDimensions(a,s,d){a=getFactor(a);let m=Math.round(a*s),f=Math.round(a*d);return m<=0&&(m=1),f<=0&&(f=1),{width:m,height:f}}function checkRow(a,s){if(s<0||s>=a.height)throw new RangeError(`row must be included between 0 and ${a.height-1}. Current value: ${s}`)}function checkColumn(a,s){if(s<0||s>=a.width)throw new RangeError(`column must be included between 0 and ${a.width-1}. Current value: ${s}`)}function checkChannel(a,s){if(s<0||s>=a.channels)throw new RangeError(`channel must be included between 0 and ${a.channels-1}. Current value: ${s}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(a){if(typeof a!="string")throw new TypeError("interpolation must be a string");if(a=a.toLowerCase(),!validInterpolations[a])throw new RangeError(`invalid interpolation algorithm: ${a}`);return validInterpolations[a]}function nearestNeighbor(a,s,d){const m=this.width/s,f=this.height/d;if(this.bitDepth>1)for(let g=0;g<s;g++){const x=Math.floor((g+.5)*m);for(let w=0;w<d;w++){const C=Math.floor((w+.5)*f);for(let A=0;A<this.channels;A++)a.setValueXY(g,w,A,this.getValueXY(x,C,A))}}else for(let g=0;g<s;g++){const x=Math.floor((g+.5)*m);for(let w=0;w<d;w++){const C=Math.floor((w+.5)*f);this.getBitXY(x,C)&&a.setBitXY(g,w)}}}function resize(a={}){const{factor:s=1,interpolation:d=validInterpolations.nearestneighbor,preserveAspectRatio:m=!0}=a,f=checkInterpolation(d);let g=a.width,x=a.height;if(g||(x&&m?g=Math.round(x*(this.width/this.height)):g=this.width),x||(m?x=Math.round(g*(this.height/this.width)):x=this.height),{width:g,height:x}=factorDimensions(s,g,x),g===this.width&&x===this.height){const _=this.clone();return _.position=[0,0],_}let w=Math.round((this.width-g)/2),C=Math.round((this.height-x)/2);const A=Image$1.createFrom(this,{width:g,height:x,position:[w,C]});switch(f){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,A,g,x);break;default:throw new Error(`unsupported resize interpolation: ${f}`)}return A}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let a=Image$1.createFrom(this,{colorModel:HSV}),s=0,d=this.data;for(let m=0;m<d.length;m+=this.channels){let f=d[m],g=d[m+1],x=d[m+2],w=Math.min(f,g,x),C=Math.max(f,g,x),A=C-w,_=0,M=C===0?0:A/C,P=C;if(C!==w){switch(C){case f:_=(g-x)/A+(g<x?6:0);break;case g:_=(x-f)/A+2;break;case x:_=(f-g)/A+4;break;default:throw new Error("unreachable")}_/=6}a.data[s++]=_*this.maxValue,a.data[s++]=M*this.maxValue,a.data[s++]=P,this.alpha&&(a.data[s++]=d[m+3])}return a}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let a=Image$1.createFrom(this,{colorModel:HSL}),s=Math.floor(this.maxValue/2),d=0,m=this.data;for(let f=0;f<m.length;f+=this.channels){let g=m[f],x=m[f+1],w=m[f+2],C=Math.max(g,x,w),A=Math.min(g,x,w),_=0,M=0,P=(C+A)/2;if(C!==A){let E=C-A;switch(M=P>s?E/(2-C-A):E/(C+A),C){case g:_=(x-w)/E+(x<w?6:0);break;case x:_=(w-g)/E+2;break;case w:_=(g-x)/E+4;break;default:throw new Error("unreachable")}_/=6}a.data[d++]=_*this.maxValue,a.data[d++]=M*this.maxValue,a.data[d++]=P,this.alpha&&(a.data[d++]=m[f+3])}return a}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let a=Image$1.createFrom(this,{components:4,colorModel:CMYK$1}),s=0,d=this.data;for(let m=0;m<d.length;m+=this.channels){let f=d[m],g=d[m+1],x=d[m+2],w=Math.min(this.maxValue-f,this.maxValue-g,this.maxValue-x),C=(this.maxValue-f-w)/(1-w/this.maxValue),A=(this.maxValue-g-w)/(1-w/this.maxValue),_=(this.maxValue-x-w)/(1-w/this.maxValue);a.data[s++]=Math.round(C),a.data[s++]=Math.round(A),a.data[s++]=Math.round(_),a.data[s++]=Math.round(w),this.alpha&&(a.data[s++]=d[m+3])}return a}function rgba8(){return new Image$1(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(a,s,d){return a*6966+s*23436+d*2366>>15},luma601(a,s,d){return a*9798+s*19235+d*3735>>15},maximum(a,s,d){return Math.max(a,s,d)},minimum(a,s,d){return Math.min(a,s,d)},average(a,s,d){return(a+s+d)/3>>0},minmax(a,s,d){return(Math.max(a,s,d)+Math.min(a,s,d))/2},red(a){return a},green(a,s){return s},blue(a,s,d){return d},cyan(a,s,d,m){let f=methods$1.black(a,s,d,m);return(m.maxValue-a-f)/(1-f/m.maxValue)>>0},magenta(a,s,d,m){let f=methods$1.black(a,s,d,m);return(m.maxValue-s-f)/(1-f/m.maxValue)>>0},yellow(a,s,d,m){let f=methods$1.black(a,s,d,m);return(m.maxValue-d-f)/(1-f/m.maxValue)>>0},black(a,s,d,m){return Math.min(m.maxValue-a,m.maxValue-s,m.maxValue-d)},hue(a,s,d,m){let f=methods$1.min(a,s,d),g=methods$1.max(a,s,d);if(g===f)return 0;let x=0,w=g-f;switch(g){case a:x=(s-d)/w+(s<d?6:0);break;case s:x=(d-a)/w+2;break;case d:x=(a-s)/w+4;break;default:throw new Error("unreachable")}return x/6*m.maxValue>>0},saturation(a,s,d,m){let f=methods$1.min(a,s,d),g=methods$1.max(a,s,d),x=g-f;return g===0?0:x/g*m.maxValue},lightness(a,s,d){let m=methods$1.min(a,s,d);return(methods$1.max(a,s,d)+m)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(a=>{});function grey(a={}){let{algorithm:s="luma709",keepAlpha:d=!1,mergeAlpha:m=!0}=a;if(typeof s!="string"&&typeof s!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(s="red"),d&=this.alpha,m&=this.alpha,d&&(m=!1);let f=getOutputImage(this,a,{components:1,alpha:d,colorModel:GREY$1}),g;if(typeof s=="function")g=s;else if(g=methods$1[s.toLowerCase()],!g)throw new Error(`unsupported grey algorithm: ${s}`);let x=0;for(let w=0;w<this.data.length;w+=this.channels)m?f.data[x++]=clamp(g(this.data[w],this.data[w+1],this.data[w+2],this)*this.data[w+this.components]/this.maxValue,this):(f.data[x++]=clamp(g(this.data[w],this.data[w+1],this.data[w+2],this),this),f.alpha&&(f.data[x++]=this.data[w+this.components]));return f}function huang(a){let s=0;for(let _=0;_<a.length;_++)if(a[_]!==0){s=_;break}let d=a.length-1;for(let _=a.length-1;_>=s;_--)if(a[_]!==0){d=_;break}let m=1/(d-s),f=new Array(a.length),g=0,x=0;for(let _=s;_<a.length;_++)g+=_*a[_],x+=a[_],f[_]=g/x;let w=new Array(a.length);g=x=0;for(let _=d;_>0;_--)g+=_*a[_],x+=a[_],w[_-1]=g/x;let C=-1,A=Number.MAX_VALUE;for(let _=0;_<a.length;_++){let M=0,P;for(let E=0;E<=_;E++)P=1/(1+m*Math.abs(E-f[_])),P<1e-6||P>.999999||(M+=a[E]*(-P*Math.log(P)-(1-P)*Math.log(1-P)));for(let E=_+1;E<a.length;E++)P=1/(1+m*Math.abs(E-w[_])),P<1e-6||P>.999999||(M+=a[E]*(-P*Math.log(P)-(1-P)*Math.log(1-P)));M<A&&(A=M,C=_)}return C}function intermodes(a){let s=a.slice(),d=0;for(;!bimodalTest$1(s);){let f=0,g=0,x=s[0];for(let w=0;w<a.length-1;w++)f=g,g=x,x=s[w+1],s[w]=(f+g+x)/3;if(s[a.length-1]=(g+x)/3,d++,d>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let m=0;for(let f=1;f<a.length-1;f++)s[f-1]<s[f]&&s[f+1]<s[f]&&(m+=f);return Math.floor(m/2)}function bimodalTest$1(a){let s=!1,d=0;for(let m=1;m<a.length-1;m++)if(a[m-1]<a[m]&&a[m+1]<a[m]&&(d++,d>2))return!1;return d===2&&(s=!0),s}function isodata(a){let s,d,m,f,g=0;for(let x=1;x<a.length;x++)if(a[x]>0){g=x+1;break}for(;;){s=0,m=0;for(let x=0;x<g;x++)m=m+a[x],s=s+a[x]*x;f=0,d=0;for(let x=g+1;x<a.length;x++)d+=a[x],f+=a[x]*x;if(m>0&&d>0&&(s/=m,f/=d,g===Math.round((s+f)/2)))break;if(g++,g>a.length-2)throw new Error("Threshold not found")}return g}function li(a,s){let d,m,f,g,x,w,C,A,_,M,P,E;P=.5,M=0;for(let R=0;R<a.length;R++)M+=R*a[R];M/=s,C=M;do{w=C,d=w+.5|0,m=0,g=0;for(let R=0;R<=d;R++)m+=R*a[R],g+=a[R];A=g===0?0:m/g,f=0,x=0;for(let R=d+1;R<a.length;R++)f+=R*a[R],x+=a[R];_=x===0?0:f/x,E=(A-_)/(Math.log(A)-Math.log(_)),E<-Number.EPSILON?C=E-.5|0:C=E+.5|0}while(Math.abs(C-w)>P);return d}function maxEntropy(a,s){let d=new Array(a.length);for(let P=0;P<a.length;P++)d[P]=a[P]/s;let m=new Array(a.length),f=new Array(a.length);m[0]=d[0],f[0]=1-m[0];for(let P=1;P<a.length;P++)m[P]=m[P-1]+d[P],f[P]=1-m[P];let g=0;for(let P=0;P<a.length;P++)if(Math.abs(m[P])>=Number.EPSILON){g=P;break}let x=a.length-1;for(let P=a.length-1;P>=g;P--)if(Math.abs(f[P])>=Number.EPSILON){x=P;break}let w=-1,C,A=Number.MIN_VALUE,_,M;for(let P=g;P<=x;P++){_=0;for(let E=0;E<=P;E++)a[E]!==0&&(_-=d[E]/m[P]*Math.log(d[E]/m[P]));M=0;for(let E=P+1;E<a.length;E++)a[E]!==0&&(M-=d[E]/f[P]*Math.log(d[E]/f[P]));C=_+M,A<C&&(A=C,w=P)}return w}function mean$1(a,s){let d=0;for(let m=0;m<a.length;m++)d+=m*a[m];return Math.floor(d/s)}function minError(a,s){let d,m=-2,f,g,x,w,C,A,_,M,P,E,R,B=0;for(let z=0;z<a.length;z++)B+=z*a[z];for(B/=s,d=B;d!==m;){let z=sumA(a,d),F=sumA(a,a.length-1),I=sumB(a,d),L=sumB(a,a.length-1),W=sumC(a,d),G=sumC(a,a.length-1);if(f=I/z,g=(L-I)/(F-z),x=z/F,w=(F-z)/F,C=W/z-f*f,A=(G-W)/(F-z)-g*g,_=1/C-1/A,M=f/C-g/A,P=f*f/C-g*g/A+Math.log10(C*(w*w)/(A*(x*x))),E=M*M-_*P,E<0)return d;m=d,R=(M+Math.sqrt(E))/_,isNaN(R)?d=m:d=Math.floor(R)}return d}function sumA(a,s){let d=0;for(let m=0;m<=s;m++)d+=a[m];return d}function sumB(a,s){let d=0;for(let m=0;m<=s;m++)d+=m*a[m];return d}function sumC(a,s){let d=0;for(let m=0;m<=s;m++)d+=m*m*a[m];return d}function minimum(a){if(a.length<2)return 0;let s=0,d=-1,m=-1,f=new Array(a.length);for(let g=0;g<a.length;g++)f[g]=a[g],a[g]>0&&(m=g);for(;!bimodalTest(f);)if(f=smoothed(f),s++,s>1e4)return d;return d=minimumBetweenPeeks(f,m),d}function smoothed(a){let s=new Array(a.length);for(let d=1;d<a.length-1;d++)s[d]=(a[d-1]+a[d]+a[d+1])/3;return s[0]=(a[0]+a[1])/3,s[a.length-1]=(a[a.length-2]+a[a.length-1])/3,s}function minimumBetweenPeeks(a,s){let d;for(let m=1;m<s;m++)if(a[m-1]>a[m]&&a[m+1]>=a[m]){d=m;break}return d}function bimodalTest(a){let s=a.length,d=!1,m=0;for(let f=1;f<s-1;f++)if(a[f-1]<a[f]&&a[f+1]<a[f]&&(m++,m>2))return!1;return m===2&&(d=!0),d}function moments(a,s){let d=1,m=0,f=0,g=0,x=0,w,C,A,_,M,P,E=-1,R=a.length,B=new Array(R);for(let z=0;z<R;z++)B[z]=a[z]/s;for(let z=0;z<R;z++)m+=z*B[z],f+=z*z*B[z],g+=z*z*z*B[z];C=d*f-m*m,A=(-f*f+m*g)/C,_=(d*-g+f*m)/C,M=.5*(-_-Math.sqrt(_*_-4*A)),P=.5*(-_+Math.sqrt(_*_-4*A)),w=(P-m)/(P-M);for(let z=0;z<R;z++)if(x+=B[z],x>w){E=z;break}return E}function otsu(a,s){let d=0,m=0,f=0,g=0,x=0;for(let w=0;w<a.length;w++)x+=w*a[w];for(let w=0;w<a.length;w++){m=m+a[w];const C=s-m;if(m===0||C===0)continue;d=d+w*a[w];const A=(x-d)/C,_=m*C*(d/m-A)*(d/m-A);_>=f&&(g=w,f=_)}return g}function percentile(a){let s=-1,d=.5,m=new Array(a.length),f=partialSum(a,a.length-1),g=1;for(let x=0;x<a.length;x++)m[x]=Math.abs(partialSum(a,x)/f-d),m[x]<g&&(g=m[x],s=x);return s}function partialSum(a,s){let d=0;for(let m=0;m<=s;m++)d+=a[m];return d}function renyiEntropy(a,s){let d,m,f,g=new Array(a.length),x=new Array(a.length),w=new Array(a.length),C=0,A=0,_=0,M=0,P=0,E=0,R=1/(1-.5),B=1/-1;for(let L=0;L<a.length;L++)g[L]=a[L]/s;x[0]=g[0],w[0]=1-x[0];for(let L=1;L<a.length;L++)x[L]=x[L-1]+g[L],w[L]=1-x[L];m=0;for(let L=0;L<a.length;L++)if(Math.abs(x[L])>=Number.EPSILON){m=L;break}f=a.length-1;for(let L=a.length-1;L>=m;L--)if(Math.abs(w[L])>=Number.EPSILON){f=L;break}for(let L=m;L<=f;L++){let W=0,G=0,q=0;for(let Xe=0;Xe<=L;Xe++)a[Xe]!==0&&(W-=g[Xe]/x[L]*Math.log(g[Xe]/x[L])),G+=Math.sqrt(g[Xe]/x[L]),q+=g[Xe]*g[Xe]/(x[L]*x[L]);let K=0,Z=0,J=0;for(let Xe=L+1;Xe<a.length;Xe++)a[Xe]!==0&&(K-=g[Xe]/w[L]*Math.log(g[Xe]/w[L])),Z+=Math.sqrt(g[Xe]/w[L]),J+=g[Xe]*g[Xe]/(w[L]*w[L]);let te=W+K,Q=R*(G*Z>0?Math.log(G*Z):0),me=B*(q*J>0?Math.log(q*J):0);te>M&&(M=te,C=L),Q>P&&(P=Q,A=L),me>E&&(E=me,_=L)}let z=[C,A,_];z.sort((L,W)=>L-W);let F;Math.abs(z[0]-z[1])<=5?Math.abs(z[1]-z[2])<=5?F=[1,2,1]:F=[0,1,3]:Math.abs(z[1]-z[2])<=5?F=[3,1,0]:F=[1,2,1];let I=x[z[2]]-x[z[0]];return d=Math.round(z[0]*(x[z[0]]+.25*I*F[0])+.25*z[1]*I*F[1]+z[2]*(w[z[2]]+.25*I*F[2])),d}function shanbhag(a,s){let d=new Array(a.length);for(let E=0;E<a.length;E++)d[E]=a[E]/s;let m=new Array(a.length),f=new Array(a.length);m[0]=d[0],f[0]=1-m[0];for(let E=1;E<a.length;E++)m[E]=m[E-1]+d[E],f[E]=1-m[E];let g=0;for(let E=0;E<a.length;E++)if(Math.abs(m[E])>=Number.EPSILON){g=E;break}let x=a.length-1;for(let E=a.length-1;E>=g;E--)if(Math.abs(f[E])>=Number.EPSILON){x=E;break}let w=-1,C=Number.MAX_VALUE,A,_,M,P;for(let E=g;E<=x;E++){M=0,A=.5/m[E];for(let R=1;R<=E;R++)M-=d[R]*Math.log(1-A*m[R-1]);M*=A,P=0,A=.5/f[E];for(let R=E+1;R<a.length;R++)P-=d[R]*Math.log(1-A*f[R]);P*=A,_=Math.abs(M-P),_<C&&(C=_,w=E)}return w}function triangle$1(a){let s=0,d=0,m=0,f=0;for(let M=0;M<a.length;M++)if(a[M]>0){s=M;break}s>0&&s--;for(let M=a.length-1;M>0;M--)if(a[M]>0){f=M;break}f<a.length-1&&f++;for(let M=0;M<a.length;M++)a[M]>d&&(m=M,d=a[M]);let g=!1;if(m-s<f-m){g=!0;let M=0,P=a.length-1;for(;M<P;){let E=a[M];a[M]=a[P],a[P]=E,M++,P--}s=a.length-1-f,m=a.length-1-m}if(s===m)return s;let x,w,C;x=a[m],w=s-m,C=Math.sqrt(x*x+w*w),x/=C,w/=C,C=x*s+w*a[s];let A=s,_=0;for(let M=s+1;M<=m;M++){let P=x*M+w*a[M]-C;P>_&&(A=M,_=P)}if(A--,g){let M=0,P=a.length-1;for(;M<P;){let E=a[M];a[M]=a[P],a[P]=E,M++,P--}return a.length-1-A}else return A}function yen(a,s){let d=new Array(a.length);for(let A=0;A<a.length;A++)d[A]=a[A]/s;let m=new Array(a.length);m[0]=d[0];for(let A=1;A<a.length;A++)m[A]=m[A-1]+d[A];let f=new Array(a.length);f[0]=d[0]*d[0];for(let A=1;A<a.length;A++)f[A]=f[A-1]+d[A]*d[A];let g=new Array(a.length);g[a.length-1]=0;for(let A=a.length-2;A>=0;A--)g[A]=g[A+1]+d[A+1]*d[A+1];let x=-1,w=Number.MIN_VALUE,C;for(let A=0;A<a.length;A++)C=-1*(f[A]*g[A]>0?Math.log(f[A]*g[A]):0)+2*(m[A]*(1-m[A])>0?Math.log(m[A]*(1-m[A])):0),C>w&&(w=C,x=A);return x}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(a=>{names[a]=a});function getThreshold(a={}){let{algorithm:s=names.otsu}=a;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let d=methods[s.toLowerCase()];if(d){let m=this.getHistogram();return d(m,this.size)}else throw new Error(`unknown thresholding algorithm: ${s}`)}const THRESHOLD="threshold";function mask(a={}){let{algorithm:s=THRESHOLD,threshold:d=.5,useAlpha:m=!0,invert:f=!1}=a;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),s===THRESHOLD?d=getThreshold$1(d,this.maxValue):d=getThreshold.call(this,a);let g=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),x=0;if(this.alpha&&m)for(let w=0;w<this.data.length;w+=this.channels){let C=this.data[w]+(this.maxValue-this.data[w])*(this.maxValue-this.data[w+1])/this.maxValue;(f&&C<=d||!f&&C>=d)&&g.setBit(x),x++}else for(let w=0;w<this.data.length;w+=this.channels)(f&&this.data[w]<=d||!f&&this.data[w]>=d)&&g.setBit(x),x++;return g}function copyImage(a,s,d,m){let f=a.width,g=a.height,x=s.width,w=a.channels;for(let C=0;C<f;C++)for(let A=0;A<g;A++)for(let _=0;_<w;_++){let M=(A*f+C)*w+_,P=((m+A)*x+d+C)*w+_;s.data[P]=a.data[M]}}function pad(a={}){let{size:s=0,algorithm:d="copy",color:m}=a;if(this.checkProcessable("pad",{bitDepth:[8,16]}),d==="set"){if(m.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let C=0;C<m.length;C++)m[C]===0&&(m[C]=.001)}else m=newArray$1(this.channels,null);Array.isArray(s)||(s=[s,s]);let f=this.width+s[0]*2,g=this.height+s[1]*2,x=this.channels,w=Image$1.createFrom(this,{width:f,height:g});copyImage(this,w,s[0],s[1]);for(let C=s[0];C<f-s[0];C++)for(let A=0;A<x;A++){let _=m[A]||w.data[(s[1]*f+C)*x+A];for(let M=0;M<s[1];M++)w.data[(M*f+C)*x+A]=_;_=m[A]||w.data[((g-s[1]-1)*f+C)*x+A];for(let M=g-s[1];M<g;M++)w.data[(M*f+C)*x+A]=_}for(let C=0;C<g;C++)for(let A=0;A<x;A++){let _=m[A]||w.data[(C*f+s[0])*x+A];for(let M=0;M<s[0];M++)w.data[(C*f+M)*x+A]=_;_=m[A]||w.data[(C*f+f-s[0]-1)*x+A];for(let M=f-s[0];M<f;M++)w.data[(C*f+M)*x+A]=_}return w}function colorDepth(a=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(a))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===a)return this.clone();let s=Image$1.createFrom(this,{bitDepth:a});switch(a){case 8:if(this.bitDepth===1)for(let d=0;d<this.size;d++)this.getBit(d)&&(s.data[d]=255);else for(let d=0;d<this.data.length;d++)s.data[d]=this.data[d]>>8;break;case 16:if(this.bitDepth===1)for(let d=0;d<this.size;d++)this.getBit(d)&&(s.data[d]=65535);else for(let d=0;d<this.data.length;d++)s.data[d]=this.data[d]<<8|this.data[d];break;default:throw new Error("colorDepth conversion unexpected case")}return s}function rotateFree(a,s={}){const{interpolation:d=validInterpolations.nearestneighbor,width:m=this.width,height:f=this.height}=s;if(typeof a!="number")throw new TypeError("degrees must be a number");const g=checkInterpolation(d),x=a*Math.PI/180,w=Math.floor(Math.abs(m*Math.cos(x))+Math.abs(f*Math.sin(x))),C=Math.floor(Math.abs(f*Math.cos(x))+Math.abs(m*Math.sin(x))),A=Math.cos(-x),_=Math.sin(-x);let M=w/2,P=C/2;w%2===0?(M=M-.5,C%2===0?P=P-.5:P=Math.floor(P)):(M=Math.floor(M),C%2===0?P=P-.5:P=Math.floor(P));const E=Math.floor(m/2-M),R=Math.floor(f/2-P);if(this.bitDepth===1){const B=new Image$1(w,C,{kind:"BINARY",parent:this});switch(g){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,B,E,R,M,P,A,_);case validInterpolations.bilinear:return rotateBinaryBilinear(this,B,E,R,M,P,A,_);default:throw new Error(`unsupported rotate interpolation: ${g}`)}}else{const B=Image$1.createFrom(this,{width:w,height:C});switch(g){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,B,E,R,M,P,A,_);case validInterpolations.bilinear:return rotateBilinear(this,B,E,R,M,P,A,_);default:throw new Error(`unsupported rotate interpolation: ${g}`)}}}function rotateNearestNeighbor(a,s,d,m,f,g,x,w){for(let C=0;C<s.width;C+=1)for(let A=0;A<s.height;A+=1)for(let _=0;_<a.channels;_++){let M=Math.round((C-f)*x-(A-g)*w+f)+d,P=Math.round((A-g)*x+(C-f)*w+g)+m;M<0||M>=a.width||P<0||P>=a.height?a.alpha===1&&_===a.channels-1?s.setValueXY(C,A,_,0):s.setValueXY(C,A,_,a.maxValue):s.setValueXY(C,A,_,a.getValueXY(M,P,_))}return s}function rotateBinaryNearestNeighbor(a,s,d,m,f,g,x,w){for(let C=0;C<s.width;C+=1)for(let A=0;A<s.height;A+=1){let _=Math.round((C-f)*x-(A-g)*w+f)+d,M=Math.round((A-g)*x+(C-f)*w+g)+m;(_<0||_>=a.width||M<0||M>=a.height||a.getBitXY(_,M))&&s.setBitXY(C,A)}return s}function rotateBilinear(a,s,d,m,f,g,x,w){let C=a.width*a.channels;for(let A=0;A<s.height;A++)for(let _=0;_<s.width;_++){let M=(_-f)*x-(A-g)*w+f+d,P=(A-g)*x+(_-f)*w+g+m,E=M|0,R=P|0,B=M-E,z=P-R;for(let F=0;F<a.channels;F++)if(M<0||M>=a.width||P<0||P>=a.height)a.alpha===1&&F===a.channels-1?s.setValueXY(_,A,F,0):s.setValueXY(_,A,F,a.maxValue);else{let I=(R*a.width+E)*a.channels+F,L=a.data[I],W=a.data[I+a.channels],G=a.data[I+C],q=a.data[I+C+a.channels],K=L+B*(W-L)+z*(G-L)+B*z*(L-W-G+q)|0;s.setValueXY(_,A,F,K)}}return s}function rotateBinaryBilinear(a,s,d,m,f,g,x,w){let C=a.width;for(let A=0;A<s.height;A++)for(let _=0;_<s.width;_++){let M=(_-f)*x-(A-g)*w+f+d,P=(A-g)*x+(_-f)*w+g+m,E=M|0,R=P|0,B=M-E,z=P-R;if(M<0||M>=a.width||P<0||P>=a.height)s.setBitXY(_,A);else{let F=R*a.width+E,I=a.getBit(F),L=a.getBit(F+1),W=a.getBit(F+C),G=a.getBit(F+1+C);(I|B&L-I|z&W-I|B&z&I-L-W+G)>0&&s.setBitXY(_,A)}}return s}function rotate$1(a,s){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof a!="number")throw new TypeError("angle must be a number");switch(a<0&&(a=Math.ceil(-a/360)*360+a),a%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,a,s)}}function rotateLeft(){if(this.bitDepth===1){const a=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),s=a.height-1;for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++)this.getBitXY(m,d)&&a.setBitXY(d,s-m);return a}else{const a=Image$1.createFrom(this,{width:this.height,height:this.width}),s=a.height-1;for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++)for(let f=0;f<this.channels;f++)a.setValueXY(d,s-m,f,this.getValueXY(m,d,f));return a}}function rotateRight(){if(this.bitDepth===1){const a=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),s=a.width-1;for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++)this.getBitXY(m,d)&&a.setBitXY(s-d,m);return a}else{const a=Image$1.createFrom(this,{width:this.height,height:this.width}),s=a.width-1;for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++)for(let f=0;f<this.channels;f++)a.setValueXY(s-d,m,f,this.getValueXY(m,d,f));return a}}function rotate180(){if(this.bitDepth===1){const a=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),s=a.width-1,d=a.height-1;for(let m=0;m<this.height;m++)for(let f=0;f<this.width;f++)this.getBitXY(f,m)&&a.setBitXY(s-f,d-m);return a}else{const a=Image$1.createFrom(this),s=a.width-1,d=a.height-1;for(let m=0;m<this.height;m++)for(let f=0;f<this.width;f++)for(let g=0;g<this.channels;g++)a.setValueXY(s-f,d-m,g,this.getValueXY(f,m,g));return a}}function insert(a,s={}){const d=getImageParameters(a);this.checkProcessable("insert",d);let{x:m=0,y:f=0}=s;const g=getOutputImageOrInPlace(this,s,{copy:!0}),x=Math.min(g.height,f+a.height),w=Math.min(g.width,m+a.width);if(g.bitDepth===1)for(let C=f;C<x;C++)for(let A=m;A<w;A++)a.getBitXY(A-m,C-f)?g.setBitXY(A,C):g.clearBitXY(A,C);else for(let C=f;C<x;C++)for(let A=m;A<w;A++)g.setPixelXY(A,C,a.getPixelXY(A-m,C-f));return g}function setBorder(a={}){let{size:s=0,algorithm:d="copy",color:m}=a;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),d==="set"){if(m.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let w=0;w<m.length;w++)m[w]===0&&(m[w]=.001)}else m=newArray$1(this.channels,null);Array.isArray(s)||(s=[s,s]);let f=s[0],g=s[1],x=this.channels;for(let w=f;w<this.width-f;w++)for(let C=0;C<x;C++){let A=m[C]||this.data[(w+this.width*g)*x+C];for(let _=0;_<g;_++)this.data[(_*this.width+w)*x+C]=A;A=m[C]||this.data[(w+this.width*(this.height-g-1))*x+C];for(let _=this.height-g;_<this.height;_++)this.data[(_*this.width+w)*x+C]=A}for(let w=0;w<this.height;w++)for(let C=0;C<x;C++){let A=m[C]||this.data[(w*this.width+f)*x+C];for(let _=0;_<f;_++)this.data[(w*this.width+_)*x+C]=A;A=m[C]||this.data[(w*this.width+this.width-f-1)*x+C];for(let _=this.width-f;_<this.width;_++)this.data[(w*this.width+_)*x+C]=A}return this}function split(a={}){let{preserveAlpha:s=!0}=a;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let d=new Stack,m=this.data;if(this.alpha&&s)for(let f=0;f<this.components;f++){let g=Image$1.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),x=0;for(let w=0;w<m.length;w+=this.channels)g.data[x++]=m[w+f],g.data[x++]=m[w+this.components];d.push(g)}else for(let f=0;f<this.channels;f++){let g=Image$1.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),x=0;for(let w=0;w<m.length;w+=this.channels)g.data[x++]=m[w+f];d.push(g)}return d}function getChannel(a,s={}){let{keepAlpha:d=!1,mergeAlpha:m=!1}=s;d&=this.alpha,m&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),a=validateChannel(this,a);let f=Image$1.createFrom(this,{components:1,alpha:d,colorModel:GREY$1}),g=0;for(let x=0;x<this.data.length;x+=this.channels)m?f.data[g++]=this.data[x+a]*this.data[x+this.components]/this.maxValue:(f.data[g++]=this.data[x+a],d&&(f.data[g++]=this.data[x+this.components]));return f}function combineChannels(a=defaultCombineMethod,s={}){let{mergeAlpha:d=!1,keepAlpha:m=!1}=s;d&=this.alpha,m&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let f=Image$1.createFrom(this,{components:1,alpha:m,colorModel:GREY$1}),g=0;for(let x=0;x<this.size;x++){let w=a(this.getPixel(x));d?f.data[g++]=w*this.data[x*this.channels+this.components]/this.maxValue:(f.data[g++]=w,m&&(f.data[g++]=this.data[x*this.channels+this.components]))}return f}function defaultCombineMethod(a){return(a[0]+a[1]+a[2])/3}function setChannel(a,s){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),s.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),s.width!==this.width||s.height!==this.height)throw new Error("Images must have exactly the same width and height");a=validateChannel(this,a);let d=a;for(let m=0;m<s.data.length;m++)this.data[d]=s.data[m],d+=this.channels;return this}function getSimilarity(a,s={}){let{shift:d=[0,0],average:m,channels:f,defaultAlpha:g,normalize:x,border:w=[0,0]}=s;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(w)||(w=[w,w]),f=validateArrayOfChannels(this,{channels:f,defaultAlpha:g}),this.bitDepth!==a.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==a.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==a.colorModel)throw new Error("Both images must have the same colorModel");typeof m>"u"&&(m=!0);let C=Math.max(w[0],-d[0]),A=Math.min(this.width-w[0],this.width-d[0]),_=Math.max(w[1],-d[1]),M=Math.min(this.height-w[1],this.height-d[1]),P=newArray$1(f.length,0);for(let E=0;E<f.length;E++){let R=f[E],B=x?this.sum[R]:Math.max(this.sum[R],a.sum[R]),z=x?a.sum[R]:Math.max(this.sum[R],a.sum[R]);if(B!==0&&z!==0)for(let F=C;F<A;F++)for(let I=_;I<M;I++){let L=F*this.multiplierX+I*this.multiplierY+R,W=L+d[0]*this.multiplierX+d[1]*this.multiplierY;P[E]+=Math.min(this.data[L]/B,a.data[W]/z)}}return m?P.reduce((E,R)=>E+R)/P.length:P}function getPixelsGrid(a={}){let{sampling:s=[10,10],painted:d=!1,mask:m}=a;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(s)||(s=[s,s]);const f=s[0],g=s[1],x=[],w=[],C=this.width/f,A=this.height/g;let _=Math.floor(C/2);for(let P=0;P<f;P++){let E=Math.floor(A/2);for(let R=0;R<g;R++){let B=Math.round(_),z=Math.round(E);(!m||m.getBitXY(B,z))&&(x.push([B,z]),w.push(this.getPixelXY(B,z))),E+=A}_+=C}const M={xyS:x,zS:w};return d&&(M.painted=this.rgba8().paintPoints(x)),M}function Matrix(a,s,d){const m=new Array(a);for(let f=0;f<a;f++)m[f]=new Array(s);if(d)for(let f=0;f<a;f++)for(let g=0;g<s;g++)m[f][g]=d;return m.width=a,m.height=s,Object.setPrototypeOf(m,Matrix.prototype),m}Matrix.prototype.localMin=function(a,s){let d=this[a][s],m=[a,s];for(let f=Math.max(0,a-1);f<Math.min(this.length,a+2);f++)for(let g=Math.max(0,s-1);g<Math.min(this[0].length,s+2);g++)this[f][g]<d&&(d=this[f][g],m=[f,g]);return{position:m,value:d}};Matrix.prototype.localMax=function(a,s){let d=this[a][s],m=[a,s];for(let f=Math.max(0,a-1);f<Math.min(this.length,a+2);f++)for(let g=Math.max(0,s-1);g<Math.min(this[0].length,s+2);g++)this[f][g]>d&&(d=this[f][g],m=[f,g]);return{position:m,value:d}};Matrix.prototype.localSearch=function(a,s,d){let m=[];for(let f=Math.max(0,a-1);f<Math.min(this.length,a+2);f++)for(let g=Math.max(0,s-1);g<Math.min(this[0].length,s+2);g++)this[f][g]===d&&m.push([f,g]);return m};function getBestMatch(a,s={}){let{border:d}=s;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==a.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==a.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==a.colorModel)throw new Error("Both images must have the same colorModel");let m=new Matrix(a.width,a.height,-1/0),f=Math.floor(a.width/2),g=Math.floor(a.height/2),x=f,w=g,C=!1;for(;!C;){let A=m.localSearch(f,g,-1/0);for(let M=0;M<A.length;M++){let P=A[M],E=this.getSimilarity(a,{border:d,shift:[x-P[0],w-P[1]]});m[P[0]][P[1]]=E}let _=m.localMax(f,g);_.position[0]!==f||_.position[1]!==g?(f=_.position[0],g=_.position[1]):C=!0}return[f-x,g-w]}function getRow(a,s=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,a),checkChannel(this,s);let d=new Array(this.width),m=0,f=a*this.width*this.channels+s,g=f+this.width*this.channels;for(let x=f;x<g;x+=this.channels)d[m++]=this.data[x];return d}function getColumn(a,s=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,a),checkChannel(this,s);let d=new Array(this.height),m=0,f=this.width*this.channels;for(let g=s+a*this.channels;g<this.data.length;g+=f)d[m++]=this.data[g];return d}function getMatrix(a={}){let{channel:s}=a;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),s===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");s=0}let d=new Matrix$2(this.height,this.width);for(let m=0;m<this.height;m++)for(let f=0;f<this.width;f++)d.set(m,f,this.getValueXY(f,m,s));return d}function setMatrix(a,s={}){a=new Matrix$2(a);let{channel:d}=s;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),d===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");d=0}if(this.width!==a.columns||this.height!==a.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let m=0;m<this.height;m++)for(let f=0;f<this.width;f++)this.setValueXY(f,m,d,a.get(m,f));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let a=new Array(this.size),s=0;for(let d=0;d<this.data.length;d+=this.channels){let m=new Array(this.components);for(let f=0;f<this.components;f++)m[f]=this.data[d+f];a[s++]=m}return a}function getIntersection(a){let s=this,d=s.getClosestCommonParent(a),m=s.getRelativePosition(d,{defaultFurther:!0}),f=getRelativePositionForAllPixels(s,m),g=a.getRelativePosition(d,{defaultFurther:!0}),x=getRelativePositionForAllPixels(a,g),w=getCommonSurface(f,x),C={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let A=0;A<w.length;A++){let _=w[A],M=[_[0]-m[0],_[1]-m[1]],P=[_[0]-g[0],_[1]-g[1]],E=s.getBitXY(M[0],M[1]),R=a.getBitXY(P[0],P[1]);E===1&&R===1&&C.commonWhitePixels.push(_)}for(let A=0;A<f.length;A++){let _,M;A!==0&&(_=Math.floor(A/s.width),M=A%s.width),s.getBitXY(_,M)===1&&C.whitePixelsMask1.push(f[A])}for(let A=0;A<x.length;A++){let _=0,M=0;A!==0&&(_=Math.floor(A/a.width),M=A%a.width),a.getBitXY(_,M)===1&&C.whitePixelsMask2.push(x[A])}return C}function getRelativePositionForAllPixels(a,s){let d=[];for(let m=0;m<a.height;m++)for(let f=0;f<a.width;f++){let g=[m,f];d.push([g[0]+s[0],g[1]+s[1]])}return d}function getCommonSurface(a,s){let d=0,m=0,f=[];for(;d<a.length&&m<s.length;)a[d][0]===s[m][0]&&a[d][1]===s[m][1]?(f.push(a[d]),d++,m++):a[d][0]<s[m][0]||a[d][0]===s[m][0]&&a[d][1]<s[m][1]?d++:m++;return f}function getClosestCommonParent(a){let s=getDepth(this),d=getDepth(a),m;if(s>=d?m=getFurthestParent(this,s):m=getFurthestParent(a,d),s===0||d===0)return m;let f=this,g=a;for(;s!==d;)if(s>d){if(f=f.parent,f===null)return m;s=s-1}else{if(g=g.parent,g===null)return m;d=d-1}for(;f!==g&&f!==null&&g!==null;)if(f=f.parent,g=g.parent,f===null||g===null)return m;return f!==g?m:f}function getDepth(a){let s=0,d=a;for(;d.parent!=null;)d=d.parent,s++;return s}function getFurthestParent(a,s){let d=a;for(;s>0;)d=d.parent,s=s-1;return d}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(a,s){a.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),s=Object.assign({},defaultOptions$1,s);const d=a.width,m=a.height,f=a.maxValue,g={sigma:s.gaussianBlur,radius:3},x=a.gaussianFilter(g),w=x.convolution(Gy,convOptions),C=x.convolution(Gx,convOptions),A=C.hypotenuse(w),_=a.constructor,M=new _(d,m,{kind:"GREY",bitDepth:32}),P=new _(d,m,{kind:"GREY",bitDepth:32}),E=new _(d,m,{kind:"GREY"});for(var R=1;R<d-1;R++)for(var B=1;B<m-1;B++){var z=(Math.round(Math.atan2(C.getValueXY(R,B,0),w.getValueXY(R,B,0))*(5/Math.PI))+5)%5;z===0&&(A.getValueXY(R,B,0)<=A.getValueXY(R,B-1,0)||A.getValueXY(R,B,0)<=A.getValueXY(R,B+1,0))||z===1&&(A.getValueXY(R,B,0)<=A.getValueXY(R-1,B+1,0)||A.getValueXY(R,B,0)<=A.getValueXY(R+1,B-1,0))||z===2&&(A.getValueXY(R,B,0)<=A.getValueXY(R-1,B,0)||A.getValueXY(R,B,0)<=A.getValueXY(R+1,B,0))||z===3&&(A.getValueXY(R,B,0)<=A.getValueXY(R-1,B-1,0)||A.getValueXY(R,B,0)<=A.getValueXY(R+1,B+1,0))||M.setValueXY(R,B,0,A.getValueXY(R,B,0))}for(R=0;R<d*m;++R){var F=M.data[R],I=0;F>s.highThreshold&&(I++,E.data[R]=f),F>s.lowThreshold&&I++,P.data[R]=I}var L=[];for(R=1;R<d-1;++R)for(B=1;B<m-1;++B)if(P.getValueXY(R,B,0)===1){e:for(var W=R-1;W<R+2;++W)for(var G=B-1;G<B+2;++G)if(P.getValueXY(W,G,0)===2){L.push([R,B]),E.setValueXY(R,B,0,f);break e}}for(;L.length>0;){var q=[];for(R=0;R<L.length;++R)for(B=-1;B<2;++B)for(W=-1;W<2;++W)if(!(B===0&&W===0)){var K=L[R][0]+B,Z=L[R][1]+W;P.getValueXY(K,Z,0)===1&&E.getValueXY(K,Z,0)===0&&(q.push([K,Z]),E.setValueXY(K,Z,0,f))}L=q}return E}function cannyEdge(a){return cannyEdgeDetector(this,a)}function extract(a,s={}){let{position:d}=s;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!d&&(d=a.getRelativePosition(this),!d))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let m=Image$1.createFrom(this,{width:a.width,height:a.height,alpha:1,position:d,parent:this});for(let f=0;f<a.width;f++)for(let g=0;g<a.height;g++){for(let x=0;x<this.channels;x++){let w=this.getValueXY(f+d[0],g+d[1],x);m.setValueXY(f,g,x,w)}a.getBitXY(f,g)||m.setValueXY(f,g,this.components,0)}return m}else{let m=Image$1.createFrom(this,{width:a.width,height:a.height,position:d,parent:this});for(let f=0;f<a.height;f++)for(let g=0;g<a.width;g++)a.getBitXY(g,f)&&this.getBitXY(g+d[0],f+d[1])&&m.setBitXY(g,f);return m}}var fastList={exports:{}};(function(a,s){(function(){function d(f,g,x){this.next=x,x&&(x.prev=this),this.prev=g,g&&(g.next=this),this.data=f}function m(){if(!(this instanceof m))return new m;this._head=null,this._tail=null,this.length=0}m.prototype={push:function(f){this._tail=new d(f,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var f=this._tail;return this._tail=f.prev,f.prev&&(f.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),f.data}},unshift:function(f){this._head=new d(f,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var f=this._head;return this._head=f.next,f.next&&(f.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),f.data}},item:function(f){f<0&&(f=this.length+f);for(var g=this._head;f-- >0&&g;)g=g.next;return g?g.data:void 0},slice:function(f,g){if(f||(f=0),g||(g=this.length),g<0&&(g=this.length+g),f<0&&(f=this.length+f),g===f)return[];if(g<f)throw new Error("invalid offset: "+f+","+g+" (length="+this.length+")");for(var x=g-f,w=new Array(x),C=0,A=this._head;f-- >0&&A;)A=A.next;for(;C<x&&A;)w[C++]=A.data,A=A.next;return w},drop:function(){m.call(this)},forEach:function(f,g){for(var x=this._head,w=0,C=this.length;w<C&&x;)f.call(g||this,x.data,w,this),x=x.next,w++},map:function(f,g){var x=new m;return this.forEach(function(w,C,A){x.push(f.call(g||A,w,C,A))}),x},filter:function(f,g){var x=new m;return this.forEach(function(w,C,A){f.call(g||A,w,C,A)&&x.push(w)}),x},reduce:function(f,g,x){var w=0,C=this._head,A=this.length;for(g||(w=1,g=C&&C.data,C=C&&C.next);w<A&&C;)g=f.call(x||this,g,C.data,this),w++,C=C.next;return g}},a.exports=m})()})(fastList);var fastListExports=fastList.exports;const LinkedList=getDefaultExportFromCjs$1(fastListExports);function floodFill(a={}){const{x:s=0,y:d=0,inPlace:m=!0}=a,f=m?this:Image$1.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(s,d))return f;const g=new LinkedList;for(g.push(new Node(s,d));g.length>0;){const x=g.shift();f.setBitXY(x.x,x.y);for(let w=x.x+1;w<this.width&&!f.getBitXY(w,x.y)&&!this.getBitXY(w,x.y);w++)f.setBitXY(w,x.y),x.y+1<this.height&&!this.getBitXY(w,x.y+1)&&g.push(new Node(w,x.y+1)),x.y-1>=0&&!this.getBitXY(w,x.y-1)&&g.push(new Node(w,x.y-1));for(let w=x.x-1;w>=0&&!f.getBitXY(w,x.y)&&!this.getBitXY(w,x.y);w++)f.setBitXY(w,x.y),x.y+1<this.height&&!this.getBitXY(w,x.y+1)&&g.push(new Node(w,x.y+1)),x.y-1>=0&&!this.getBitXY(w,x.y-1)&&g.push(new Node(w,x.y-1))}return f}function Node(a,s){this.x=a,this.y=s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a},_extends.apply(this,arguments)}function hsv2rgb(a,s,d){s=s/100,d=d/100;var m=[],f=d*s,g=a/60,x=f*(1-Math.abs(g%2-1)),w=d-f;return g>=0&&g<1?m=[f,x,0]:g>=1&&g<2?m=[x,f,0]:g>=2&&g<3?m=[0,f,x]:a>=3&&g<4?m=[0,x,f]:a>=4&&g<5?m=[x,0,f]:a>=5&&g<=6?m=[f,0,x]:m=[0,0,0],{r:Math.round(255*(m[0]+w)),g:Math.round(255*(m[1]+w)),b:Math.round(255*(m[2]+w))}}function hsl2hsv(a,s,d){return s*=(d<50?d:100-d)/100,{h:a,s:2*s/(d+s)*100,v:d+s}}function hsl2rgb$1(a,s,d){var m=hsl2hsv(a,s,d);return hsv2rgb(m.h,m.s,m.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(a){return named(a)||hex3(a)||hex6(a)||rgb(a)||rgba$1(a)||hsl(a)||hsla(a)}function named(a){var s=colors[a.toLowerCase()];if(s)return{r:s[0],g:s[1],b:s[2],a:100}}function rgb(a){var s=a.match(/rgb\(([^)]+)\)/);if(s){var d=s[1].split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:100}}}function rgba$1(a){var s=a.match(/rgba\(([^)]+)\)/);if(s){var d=s[1].split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:d[3]*100}}}function hex6(a){if(a[0]==="#"&&a.length===7)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:100}}function hex3(a){if(a[0]==="#"&&a.length===4)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:100}}function hsl(a){var s=a.match(/hsl\(([^)]+)\)/);if(s){var d=s[1].split(/ *, */),m=parseInt(d[0],10),f=parseInt(d[1],10),g=parseInt(d[2],10),x=hsl2rgb$1(m,f,g);return _extends({},x,{a:100})}}function hsla(a){var s=a.match(/hsla\(([^)]+)\)/);if(s){var d=s[1].split(/ *, */),m=parseInt(d[0],10),f=parseInt(d[1],10),g=parseInt(d[2],10),x=parseInt(parseFloat(d[3])*100,10),w=hsl2rgb$1(m,f,g);return _extends({},w,{a:x})}}function css2array(a){let s=parse(a);return[s.r,s.g,s.b,Math.round(s.a*255/100)]}function hue2rgb(a,s,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?a+(s-a)*6*d:d<1/2?s:d<2/3?a+(s-a)*(2/3-d)*6:a}function hsl2rgb(a,s,d){let m,f,g,x,w,C;return s/=100,d/=100,s===0?x=w=C=d*255:(d<=.5?f=d*(s+1):f=d+s-d*s,m=d*2-f,g=a/360,x=hue2rgb(m,f,g+1/3),w=hue2rgb(m,f,g),C=hue2rgb(m,f,g-1/3)),{r:x,g:w,b:C}}function getDistinctColors(a){let s=new Array(a),d=0;for(let m=0;m<360;m+=360/a){d++;let f=hsl2rgb(m,100,30+d%4*15);s[d-1]=[Math.round(f.r*255),Math.round(f.g*255),Math.round(f.b*255)]}return s}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(a){let{color:s,colors:d,randomColors:m,numberColors:f=50}=a;if(s&&!Array.isArray(s)&&(s=css2array(s)),s)return[s];if(d)return d=d.map(function(g){return Array.isArray(g)?g:css2array(g)}),d;if(m){d=new Array(f);for(let g=0;g<f;g++)d[g]=getRandomColor()}return getDistinctColors(f)}function paintLabels(a,s,d={}){let{color:m="blue",colors:f,font:g="12px Helvetica",rotate:x=0}=d;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(a))throw Error("paintLabels: labels must be an array");if(!Array.isArray(s))throw Error("paintLabels: positions must be an array");if(m&&!Array.isArray(m)&&(m=css2array(m)),f?f=f.map(function(C){return Array.isArray(C)?C:css2array(C)}):f=[m],a.length!==s.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(g)||(g=[g]),Array.isArray(x)||(x=[x]);let w=this.getCanvas().getContext("2d");for(let C=0;C<a.length;C++){w.save();let A=f[C%f.length];w.fillStyle=`rgba(${A[0]},${A[1]},${A[2]},${A[3]/this.maxValue})`,w.font=g[C%g.length];let _=s[C];w.translate(_[0],_[1]),w.rotate(x[C%x.length]/180*Math.PI),w.fillText(a[C],0,0),w.restore()}return this.data=Uint8Array.from(w.getImageData(0,0,this.width,this.height).data),this}function paintMasks(a,s={}){let{alpha:d=255,labels:m=[],labelsPosition:f=[],labelColor:g="blue",labelFont:x="12px Helvetica"}=s;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let w=getColors(Object.assign({},s,{numberColors:a.length}));Array.isArray(a)||(a=[a]);for(let C=0;C<a.length;C++){let A=a[C],_=w[C%w.length];for(let M=0;M<A.width;M++)for(let P=0;P<A.height;P++)if(A.getBitXY(M,P))for(let E=0;E<Math.min(this.components,_.length);E++)if(d===255)this.setValueXY(M+A.position[0],P+A.position[1],E,_[E]);else{let R=this.getValueXY(M+A.position[0],P+A.position[1],E);R=Math.round((R*(255-d)+_[E]*d)/255),this.setValueXY(M+A.position[0],P+A.position[1],E,R)}}if(Array.isArray(m)&&m.length>0){let C=this.getCanvas().getContext("2d");C.fillStyle=g,C.font=x;for(let A=0;A<Math.min(a.length,m.length);A++){let _=f[A]?f[A]:a[A].position;C.fillText(m[A],_[0],_[1])}this.data=Uint8Array.from(C.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(a,s){let d=new Array(a);for(let m=0;m<a;m++)d[m]=new Array(s).fill(0);return d}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(s={}){let{kind:d="cross",shape:m,size:f,width:g,height:x,filled:w=!0}=s;if(f&&(g=f,x=f),m)switch(m.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(g,x,{filled:w});break;case"circle":case"ellipse":this.matrix=ellipse(g,x,{filled:w});break;case"triangle":this.matrix=triangle(g,x,{filled:w});break;default:throw new Error(`Shape: unexpected shape: ${m}`)}else if(d)switch(d.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${d}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let s=this.matrix,d=[];for(let m=0;m<s.length;m++)for(let f=0;f<s[0].length;f++)s[m][f]&&d.push([f-this.halfWidth,m-this.halfHeight]);return d}getMask(){let s=new Image$1(this.width,this.height,{kind:BINARY});for(let d=0;d<this.matrix.length;d++)for(let m=0;m<this.matrix[0].length;m++)this.matrix[d][m]&&s.setBitXY(m,d);return s}}function rectangle(a,s,d){const m=zerosMatrix(s,a);if(d.filled)for(let f=0;f<s;f++)for(let g=0;g<a;g++)m[f][g]=1;else{for(let f of[0,s-1])for(let g=0;g<a;g++)m[f][g]=1;for(let f=0;f<s;f++)for(let g of[0,a-1])m[f][g]=1}return m}function ellipse(a,s,d){const m=zerosMatrix(s,a);let f=1-s%2,g=1-a%2,x=Math.floor((a-1)/2),w=Math.floor((s-1)/2),C=x*x,A=w*w;if(d.filled)for(let _=0;_<=w;_++){let M=Math.floor(Math.sqrt(C-C*_*_/A));for(let P=x-M;P<=x;P++)m[w-_][P]=1,m[w+_+f][P]=1,m[w-_][a-P-1]=1,m[w+_+f][a-P-1]=1}else{for(let _=0;_<=w;_++){let M=Math.floor(Math.sqrt(C-C*_*_/A)),P=x-M;m[w-_][P]=1,m[w+_+f][P]=1,m[w-_][a-P-1]=1,m[w+_+f][a-P-1]=1}for(let _=0;_<=x;_++){let M=Math.floor(Math.sqrt(A-A*_*_/C)),P=w-M;m[P][x-_]=1,m[P][x+_+g]=1,m[s-P-1][x-_]=1,m[s-P-1][x+_+g]=1}}return m}function triangle(a,s,d){if(!d.filled)throw new Error("Non filled triangle is not implemented");const m=zerosMatrix(s,a);for(let f=0;f<s;f++){let g=Math.floor((1-f/s)*a/2);for(let x=g;x<a-g;x++)m[f][x]=1}return m}function paintPoints(a,s={}){let{shape:d}=s;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let m=getColors(Object.assign({},s,{numberColors:a.length})),f=new Shape(d).getPoints(),g=Math.min(this.channels,m[0].length);for(let x=0;x<a.length;x++){let w=m[x%m.length],C=a[x][0],A=a[x][1];for(let _=0;_<f.length;_++){let M=f[_][0],P=f[_][1];if(C+M>=0&&A+P>=0&&C+M<this.width&&A+P<this.height){let E=(C+M+(A+P)*this.width)*this.channels;for(let R=0;R<g;R++)this.data[E+R]=w[R]}}}return this}function paintPolyline(a,s={}){let{color:d=[this.maxValue,0,0],closed:m=!1}=s;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let f=Math.min(this.channels,d.length);for(let g=0;g<a.length-1+m;g++){let x=a[g],w=a[(g+1)%a.length],C=w[0]-x[0],A=w[1]-x[1],_=Math.max(Math.abs(C),Math.abs(A)),M=C/_,P=A/_,E=x[0],R=x[1];for(let B=0;B<=_;B++){let z=Math.round(E),F=Math.round(R);if(z>=0&&F>=0&&z<this.width&&F<this.height)if(this.bitDepth===1)this.setBitXY(z,F);else{let I=(z+F*this.width)*this.channels;for(let L=0;L<f;L++)this.data[I+L]=d[L]}E=E+M,R=R+P}}return this}function paintPolylines(a,s={}){let d=Object.assign({},s);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let m=getColors(Object.assign({},s,{numberColors:a.length}));for(let f=0;f<a.length;f++)d.color=m[f%m.length],this.paintPolyline(a[f],d);return this}function paintPolygon(a,s={}){let{color:d=[this.maxValue,0,0],filled:m=!1}=s;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),s.closed=!0;let f=deleteDouble(a);if(m===!1)return this.paintPolyline(a,s);{let g=Array(this.height);for(let x=0;x<this.height;x++){g[x]=[];for(let w=0;w<this.width;w++)g[x].push(0)}for(let x=0;x<f.length;x++){const w=lineBetweenTwoPoints(f[x],f[(x+1)%f.length]);for(let C=0;C<this.height;C++)for(let A=0;A<this.width;A++)isAtTheRightOfTheLine(A,C,w,this.height)&&(g[C][A]=g[C][A]===0?1:0)}for(let x=0;x<this.height;x++)for(let w=0;w<this.width;w++)if(g[x][w]===1)if(this.bitDepth===1)this.setBitXY(w,x);else{let C=Math.min(this.channels,d.length),A=(w+x*this.width)*this.channels;for(let _=0;_<C;_++)this.data[A+_]=d[_]}return this.paintPolyline(a,s)}}function deleteDouble(a){let s=[];for(let d=0;d<a.length;d++)if(!(a[d][0]===a[(d+1)%a.length][0]&&a[d][1]===a[(d+1)%a.length][1])){if(a[d][0]===a[(d-1+a.length)%a.length][0]&&a[d][1]===a[(d-1+a.length)%a.length][1]||a[(d+1)%a.length][0]===a[(d-1+a.length)%a.length][0]&&a[(d-1+a.length)%a.length][1]===a[(d+1)%a.length][1])continue;s.push(a[d])}return s}function lineBetweenTwoPoints(a,s){if(a[0]===s[0])return{a:0,b:a[0],vertical:!0};{const d=(s[1]-a[1])/(s[0]-a[0]),m=a[1]-d*a[0];return{a:d,b:m,vertical:!1}}}function isAtTheRightOfTheLine(a,s,d,m){if(d.vertical===!0)return d.b<=a;if(d.a===0)return!1;{const f=(s-d.b)/d.a;return f<a&&f>=0&&f<=m}}function paintPolygons(a,s={}){let d=Object.assign({},s);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let m=getColors(Object.assign({},s,{numberColors:a.length}));for(let f=0;f<a.length;f++)d.color=m[f%m.length],this.paintPolygon(a[f],d);return this}function getHistogram(a={}){let{maxSlots:s=256,channel:d,useAlpha:m=!0}=a;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),d===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");d=0}return getChannelHistogram.call(this,d,{useAlpha:m,maxSlots:s})}function getHistograms(a={}){const{maxSlots:s=256,useAlpha:d=!0}=a;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let m=new Array(d?this.components:this.channels);for(let f=0;f<m.length;f++)m[f]=getChannelHistogram.call(this,f,{useAlpha:d,maxSlots:s});return m}function getChannelHistogram(a,s){let{useAlpha:d,maxSlots:m}=s;if(this.bitDepth===1){let C=[0,0];for(let A=0;A<this.height;A++)for(let _=0;_<this.width;_++){let M=this.getBitXY(A,_);M===0?C[0]+=1:M===1&&(C[1]+=1)}return C}let f=Math.log2(m);if(!isInteger$1(f))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let g=0;this.bitDepth>f&&(g=this.bitDepth-f);let x=this.data,w=newArray$1(Math.pow(2,Math.min(this.bitDepth,f)),0);if(d&&this.alpha){let C=this.channels-a-1;for(let A=a;A<x.length;A+=this.channels)w[x[A]>>g]+=x[A+C]/this.maxValue}else for(let C=a;C<x.length;C+=this.channels)w[x[C]>>g]++;return w}function getColorHistogram(a={}){let{useAlpha:s=!0,nbSlots:d=512}=a;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let m=Math.log(d)/Math.log(8);if(m!==Math.floor(m))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let f=this.bitDepth-m,g=this.data,x=newArray$1(Math.pow(8,m),0),w=Math.pow(2,m*2),C=Math.pow(2,m);for(let A=0;A<g.length;A+=this.channels){let _=(g[A]>>f)*w+(g[A+1]>>f)*C+(g[A+2]>>f);s&&this.alpha?x[_]+=g[A+this.channels-1]/this.maxValue:x[_]++}return x}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let a=newArray$1(this.channels,1/0);for(let s=0;s<this.data.length;s+=this.channels)for(let d=0;d<this.channels;d++)this.data[s+d]<a[d]&&(a[d]=this.data[s+d]);return a}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let a=newArray$1(this.channels,-1/0);for(let s=0;s<this.data.length;s+=this.channels)for(let d=0;d<this.channels;d++)this.data[s+d]>a[d]&&(a[d]=this.data[s+d]);return a}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let a=newArray$1(this.channels,0);for(let s=0;s<this.data.length;s+=this.channels)for(let d=0;d<this.channels;d++)a[d]+=this.data[s+d];return a}function getMoment(a=0,s=0){this.checkProcessable("getMoment",{bitDepth:[1]});let d=0;for(let m=0;m<this.width;m++)for(let f=0;f<this.height;f++)this.getBitXY(m,f)===1&&(d+=m**a*f**s);return d}function localMaxima(a={}){let{mask:s,region:d=3,removeClosePoints:m=0,invert:f=!1,maxEquals:g=2}=a,x=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),d*=4;let w=f?0:1,C=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],A=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],_=d<=8?1:2,M=[];for(let P=_;P<x.height-_;P++)for(let E=_;E<x.width-_;E++){if(s&&s.getBitXY(E,P)!==w)continue;let R=0,B=0,z=x.data[E+P*x.width];for(let F=0;F<d;F++)f?x.data[E+C[F]+(P+A[F])*x.width]>z&&R++:x.data[E+C[F]+(P+A[F])*x.width]<z&&R++,x.data[E+C[F]+(P+A[F])*x.width]===z&&B++;R+B===d&&B<=g&&M.push([E,P])}if(m>0)for(let P=0;P<M.length;P++)for(let E=P+1;E<M.length;E++)Math.sqrt(Math.pow(M[P][0]-M[E][0],2)+Math.pow(M[P][1]-M[E][1],2))<m&&(M[P][0]=M[P][0]+M[E][0]>>1,M[P][1]=M[P][1]+M[E][1]>>1,M.splice(E,1),E--);return M}function mean(){let a=this.getHistograms({maxSlots:this.maxValue+1}),s=new Array(a.length);for(let d=0;d<a.length;d++){let m=a[d];s[d]=mean$2(m)}return s}function median(){let a=this.getHistograms({maxSlots:this.maxValue+1}),s=new Array(a.length);for(let d=0;d<a.length;d++){let m=a[d];s[d]=median$2(m)}return s}function points$1(){this.checkProcessable("points",{bitDepth:[1]});const a=[];for(let s=0;s<this.width;s++)for(let d=0;d<this.height;d++)this.getBitXY(s,d)===1&&a.push([s,d]);return a}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const a=[];for(let s=0;s<this.height;s++)for(let d=0;d<this.width;d++)if(this.getBitXY(d,s)===1)for(a.push([d,s]),this.getBitXY(d+1,s)!==1?(a.push([d+1,s]),a.push([d+1,s+1]),this.getBitXY(d,s+1)!==1&&a.push([d,s+1])):this.getBitXY(d,s+1)!==1&&(a.push([d,s+1]),a.push([d+1,s+1]));d<this.width-2&&this.getBitXY(d+1,s)===1&&this.getBitXY(d+2,s)===1;)d++;return a}function getRelativePosition(a,s={}){if(this===a)return[0,0];let d=[0,0],m=this;for(;m;){if(m===a)return d;m.position&&(d[0]+=m.position[0],d[1]+=m.position[1]),m=m.parent}return s.defaultFurther?d:!1}function countAlphaPixels(a={}){let{alpha:s=1}=a;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let d=0;if(s!==void 0){for(let m=this.components;m<this.data.length;m+=this.channels)this.data[m]===s&&d++;return d}else return this.size}function monotoneChainConvexHull$1(a,s={}){const{sorted:d}=s;d||(a=a.slice().sort(byXThenY));const m=a.length,f=new Array(m*2);let g=0;for(let w=0;w<m;w++){const C=a[w];for(;g>=2&&cw(f[g-2],f[g-1],C)<=0;)g--;f[g++]=C}const x=g+1;for(let w=m-2;w>=0;w--){const C=a[w];for(;g>=x&&cw(f[g-2],f[g-1],C)<=0;)g--;f[g++]=C}return f.slice(0,g-1)}function cw(a,s,d){return(s[1]-a[1])*(d[0]-a[0])-(s[0]-a[0])*(d[1]-a[1])}function byXThenY(a,s){return a[0]===s[0]?a[1]-s[1]:a[0]-s[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round$1(a){for(let s=0;s<a.length;s++)a[s][0]=Math.round(a[s][0]),a[s][1]=Math.round(a[s][1]);return a}function difference(a,s){return[a[0]-s[0],a[1]-s[1]]}function normalize(a){let s=Math.sqrt(a[0]**2+a[1]**2);return[a[0]/s,a[1]/s]}function rotate(a,s,d){d===void 0&&(d=new Array(s.length));let m=Math.cos(a),f=Math.sin(a);for(let g=0;g<d.length;++g)d[g]=[m*s[g][0]-f*s[g][1],f*s[g][0]+m*s[g][1]];return d}function perimeter(a){let s=0;for(let d=0;d<a.length;d++){let m=a[d][0],f=a[d][1],g=a[d===a.length-1?0:d+1][0],x=a[d===a.length-1?0:d+1][1];s+=Math.sqrt((g-m)**2+(x-f)**2)}return s}function surface(a){let s=0;for(let d=0;d<a.length;d++){let m=a[d][0],f=a[d===a.length-1?0:d+1][1],g=a[d===a.length-1?0:d+1][0],x=a[d][1];s+=m*f*.5,s-=g*x*.5}return Math.abs(s)}function minMax(a){let s=1/0,d=1/0,m=-1/0,f=-1/0;for(let g=0;g<a.length;g++)a[g][0]<s&&(s=a[g][0]),a[g][0]>m&&(m=a[g][0]),a[g][1]<d&&(d=a[g][1]),a[g][1]>f&&(f=a[g][1]);return[[s,d],[m,f]]}function moveToZeroZero(a,s){s===void 0&&(s=new Array(a.length).fill(0).map(()=>[]));let d=minMax(a),m=d[0][0],f=d[0][1];for(let g=0;g<a.length;g++)s[g][0]=a[g][0]-m,s[g][1]=a[g][1]-f;return s}function minimalBoundingRectangle(a={}){const{originalPoints:s=monotoneChainConvexHull.call(this)}=a;if(s.length===0)return[];if(s.length===1)return[s[0],s[0],s[0],s[0]];const d=new Array(s.length);let m=1/0,f=0,g;for(let x=0;x<d.length;x++){let w=getAngle$1(s[x],s[(x+1)%d.length]);rotate(-w,s,d);let C=d[x][0],A=d[x][1],_=d[(x+1)%d.length][0],M=d[(x+1)%d.length][1],P=!0,E=0,R=0,B=0;for(let L=0;L<d.length;L++){let W=d[L][0],G=d[L][1],q=(W-C)/(_-C);P===!0?(P=!1,E=q,R=q):(q<E&&(E=q),q>R&&(R=q));let K=(-(_-C)*G+_*A-M*C)/(_-C);Math.abs(K)>Math.abs(B)&&(B=K)}let z=[C+E*(_-C),A],F=[C+R*(_-C),A],I=Math.abs(B*(E-R)*(_-C));I<m&&(f=w,m=I,g=[z,F,[F[0],F[1]-B],[z[0],z[1]-B]])}return rotate(f,g,g),g}function getAngle$1(a,s){let d=difference(s,a),m=normalize(d),f=Math.acos(m[0]);return m[1]<0?-f:f}function extend$1(a){let s={inPlace:!0};a.extendMethod("invert",invert),a.extendMethod("abs",abs),a.extendMethod("level",level,s),a.extendMethod("add",add,s),a.extendMethod("subtract",subtract,s),a.extendMethod("subtractImage",subtractImage),a.extendMethod("multiply",multiply,s),a.extendMethod("divide",divide,s),a.extendMethod("hypotenuse",hypotenuse),a.extendMethod("background",background$1),a.extendMethod("flipX",flipX),a.extendMethod("flipY",flipY),a.extendMethod("blurFilter",blurFilter),a.extendMethod("medianFilter",medianFilter),a.extendMethod("gaussianFilter",gaussianFilter),a.extendMethod("sobelFilter",sobelFilter),a.extendMethod("gradientFilter",gradientFilter),a.extendMethod("scharrFilter",scharrFilter),a.extendMethod("dilate",dilate),a.extendMethod("erode",erode),a.extendMethod("open",open),a.extendMethod("close",close),a.extendMethod("topHat",topHat),a.extendMethod("blackHat",blackHat),a.extendMethod("morphologicalGradient",morphologicalGradient),a.extendMethod("warpingFourPoints",warpingFourPoints),a.extendMethod("crop",crop),a.extendMethod("cropAlpha",cropAlpha),a.extendMethod("resize",resize).extendMethod("scale",resize),a.extendMethod("hsv",hsv),a.extendMethod("hsl",hsl$1),a.extendMethod("cmyk",cmyk),a.extendMethod("rgba8",rgba8),a.extendMethod("grey",grey).extendMethod("gray",grey),a.extendMethod("mask",mask),a.extendMethod("pad",pad),a.extendMethod("colorDepth",colorDepth),a.extendMethod("setBorder",setBorder,s),a.extendMethod("rotate",rotate$1),a.extendMethod("rotateLeft",rotateLeft),a.extendMethod("rotateRight",rotateRight),a.extendMethod("insert",insert),a.extendMethod("getRow",getRow),a.extendMethod("getColumn",getColumn),a.extendMethod("getMatrix",getMatrix),a.extendMethod("setMatrix",setMatrix),a.extendMethod("getPixelsArray",getPixelsArray),a.extendMethod("getIntersection",getIntersection),a.extendMethod("getClosestCommonParent",getClosestCommonParent),a.extendMethod("getThreshold",getThreshold),a.extendMethod("split",split),a.extendMethod("getChannel",getChannel),a.extendMethod("combineChannels",combineChannels),a.extendMethod("setChannel",setChannel),a.extendMethod("getSimilarity",getSimilarity),a.extendMethod("getPixelsGrid",getPixelsGrid),a.extendMethod("getBestMatch",getBestMatch),a.extendMethod("cannyEdge",cannyEdge),a.extendMethod("convolution",convolution),a.extendMethod("extract",extract),a.extendMethod("floodFill",floodFill),a.extendMethod("paintLabels",paintLabels,s),a.extendMethod("paintMasks",paintMasks,s),a.extendMethod("paintPoints",paintPoints,s),a.extendMethod("paintPolyline",paintPolyline,s),a.extendMethod("paintPolylines",paintPolylines,s),a.extendMethod("paintPolygon",paintPolygon,s),a.extendMethod("paintPolygons",paintPolygons,s),a.extendMethod("countAlphaPixels",countAlphaPixels),a.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),a.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),a.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),a.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),a.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),a.extendMethod("getMin",min).extendProperty("min",min),a.extendMethod("getMax",max).extendProperty("max",max),a.extendMethod("getSum",sum).extendProperty("sum",sum),a.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),a.extendMethod("getLocalMaxima",localMaxima),a.extendMethod("getMedian",median).extendProperty("median",median),a.extendMethod("getMean",mean).extendProperty("mean",mean),a.extendMethod("getPoints",points$1).extendProperty("points",points$1),a.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),a.extendMethod("getRelativePosition",getRelativePosition)}var quantities={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal$1,function(){function d(it){return typeof it=="string"||it instanceof String}var m=Number.isFinite||window.isFinite;function f(it){return m(it)}function g(it){return it}function x(it){var mt={};return it.filter(function(St){return mt.hasOwnProperty(St)?!1:mt[St]=!0})}function w(it,mt){if(mt.length!==it.length)return!1;for(var St=0;St<it.length;St++)if(mt[St].compareArray&&!mt[St].compareArray(it[St])||mt[St]!==it[St])return!1;return!0}function C(it,mt){Object.keys(mt).forEach(function(St){it[St]=mt[St]})}function A(){for(var it=1,mt=0,St=0;St<arguments.length;St++){var Ot=arguments[St];mt=mt+P(Ot),it*=Ot}return mt!==0?M(it,mt):it}function _(it,mt){if(mt===0)throw new Error("Divide by zero");var St=Math.pow(10,P(mt)),Ot=St/(St*mt);return A(it,Ot)}function M(it,mt){return Math.round(it*Math.pow(10,mt))/Math.pow(10,mt)}function P(it){if(!isFinite(it))return 0;for(var mt=0;it%1!==0;)it*=10,mt++;return mt}function E(){var it;if(!this)return it=Object.create(E.prototype),E.apply(it,arguments),it;it=Error.apply(this,arguments),this.name="QtyError",this.message=it.message,this.stack=it.stack}E.prototype=Object.create(Error.prototype,{constructor:{value:E}});function R(it,mt){throw new E("Incompatible units: "+it+" and "+mt)}var B={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},z=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],F="<1>",I=[F];function L(it,mt){var St=mt[1],Ot=mt[3]||[],Nt=mt[4]||[];if(!f(St))throw new E(it+": Invalid unit definition. 'scalar' must be a number");Ot.forEach(function(Bt){if(B[Bt]===void 0)throw new E(it+": Invalid unit definition. Unit "+Bt+" in 'numerator' is not recognized")}),Nt.forEach(function(Bt){if(B[Bt]===void 0)throw new E(it+": Invalid unit definition. Unit "+Bt+" in 'denominator' is not recognized")})}var W={},G={},q={},K={},Z={};for(var J in B)if(B.hasOwnProperty(J)){var te=B[J];if(te[2]==="prefix"){W[J]=te[1];for(var Q=0;Q<te[0].length;Q++)G[te[0][Q]]=J}else{L(J,te),q[J]={scalar:te[1],numerator:te[3],denominator:te[4]};for(var me=0;me<te[0].length;me++)K[te[0][me]]=J}Z[J]=te[0][0]}function Xe(it){var mt,St=[],Ot=Object.keys(B);if(typeof it>"u")for(mt=0;mt<Ot.length;mt++)["","prefix"].indexOf(B[Ot[mt]][2])===-1&&St.push(Ot[mt].substr(1,Ot[mt].length-2));else{if(this.getKinds().indexOf(it)===-1)throw new E("Kind not recognized");for(mt=0;mt<Ot.length;mt++)B[Ot[mt]][2]===it&&St.push(Ot[mt].substr(1,Ot[mt].length-2))}return St.sort(function(Nt,Bt){return Nt.toLowerCase()<Bt.toLowerCase()?-1:Nt.toLowerCase()>Bt.toLowerCase()?1:0})}function Ve(it){if(!K[it])throw new E("Unit not recognized");return B[K[it]][0]}var Ye=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function qe(){if(this.signature)return this.signature;for(var it=et.call(this),mt=0;mt<it.length;mt++)it[mt]*=Math.pow(20,mt);return it.reduce(function(St,Ot){return St+Ot},0)}function et(){if(!this.isBase())return et.call(this.toBase());for(var it=new Array(Ye.length),mt=0;mt<it.length;mt++)it[mt]=0;for(var St,Ot,Nt=0;Nt<this.numerator.length;Nt++)(St=B[this.numerator[Nt]])&&(Ot=Ye.indexOf(St[2]),Ot>=0&&(it[Ot]=it[Ot]+1));for(var Bt=0;Bt<this.denominator.length;Bt++)(St=B[this.denominator[Bt]])&&(Ot=Ye.indexOf(St[2]),Ot>=0&&(it[Ot]=it[Ot]-1));return it}var je="[+-]",Ke="\\d+",Je=je+"?"+Ke,at="\\."+Ke,nt="(?:"+Ke+"(?:"+at+")?)|(?:"+at+")",ct="[Ee]"+Je,pt="(?:"+nt+")(?:"+ct+")?",rt=je+"?\\s*"+pt,ht="("+rt+")?\\s*([^/]*)(?:/(.+))?",yt=new RegExp("^"+ht+"$"),wt="\\^|\\*{2}",ft="[01234]",He=new RegExp("([^ \\*\\d]+?)(?:"+wt+")?(-?"+ft+"(?![a-zA-Z]))"),le=new RegExp("([^ \\*\\d]+?)(?:"+wt+")?("+ft+"(?![a-zA-Z]))");function be(it){d(it)||(it=it.toString()),it=it.trim();var mt=yt.exec(it);if(!mt)throw new E(it+": Quantity not recognized");var St=mt[1];St?(St=St.replace(/\s/g,""),this.scalar=parseFloat(St)):this.scalar=1;for(var Ot=mt[2],Nt=mt[3],Bt,Jt,qt;mt=He.exec(Ot);){if(Bt=parseFloat(mt[2]),isNaN(Bt))throw new E("Unit exponent is not a number");if(Bt===0&&!st.test(mt[1]))throw new E("Unit not recognized");Jt=mt[1]+" ",qt="";for(var ei=0;ei<Math.abs(Bt);ei++)qt+=Jt;Bt>=0?Ot=Ot.replace(mt[0],qt):(Nt=Nt?Nt+qt:qt,Ot=Ot.replace(mt[0],""))}for(;mt=le.exec(Nt);){if(Bt=parseFloat(mt[2]),isNaN(Bt))throw new E("Unit exponent is not a number");if(Bt===0&&!st.test(mt[1]))throw new E("Unit not recognized");Jt=mt[1]+" ",qt="";for(var si=0;si<Bt;si++)qt+=Jt;Nt=Nt.replace(mt[0],qt)}Ot&&(this.numerator=ut(Ot.trim())),Nt&&(this.denominator=ut(Nt.trim()))}var we=Object.keys(G).sort(function(it,mt){return mt.length-it.length}).join("|"),ze=Object.keys(K).sort(function(it,mt){return mt.length-it.length}).join("|"),Ze="\\b|$",Qe="("+we+")??("+ze+")(?:"+Ze+")",st=new RegExp("^\\s*("+Qe+"[\\s\\*]*)+$"),lt=new RegExp(Qe,"g"),ot={};function ut(it){var mt=ot[it];if(mt)return mt;var St,Ot=[];if(!st.test(it))throw new E("Unit not recognized");for(;St=lt.exec(it);)Ot.push(St.slice(1));return Ot=Ot.map(function(Nt){return G[Nt[0]]?[G[Nt[0]],K[Nt[1]]]:[K[Nt[1]]]}),Ot=Ot.reduce(function(Nt,Bt){return Nt.concat(Bt)},[]),Ot=Ot.filter(function(Nt){return Nt}),ot[it]=Ot,Ot}function gt(it){if(!d(it))throw new E("Argument should be a string");try{return this(it)}catch{return null}}function vt(it){return it instanceof xt}function xt(it,mt){if(Pt.apply(null,arguments),!vt(this))return new xt(it,mt);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=I,this.denominator=I,bt(it)?(this.scalar=it.scalar,this.numerator=it.numerator&&it.numerator.length!==0?it.numerator:I,this.denominator=it.denominator&&it.denominator.length!==0?it.denominator:I):mt?(be.call(this,mt),this.scalar=it):be.call(this,it),this.denominator.join("*").indexOf("temp")>=0)throw new E("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new E("Cannot multiply by temperatures");if(!w(this.denominator,I))throw new E("Cannot divide with temperatures")}if(this.initValue=it,Dt.call(this),this.isTemperature()&&this.baseScalar<0)throw new E("Temperatures must not be less than absolute zero")}xt.prototype={constructor:xt};function Pt(it,mt){if(mt){if(!(f(it)&&d(mt)))throw new E("Only number accepted as initialization value when units are explicitly provided")}else if(!(d(it)||f(it)||vt(it)||bt(it)))throw new E("Only string, number or quantity accepted as single initialization value")}function bt(it){return it&&typeof it=="object"&&it.hasOwnProperty("scalar")}function Dt(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=qe.call(this);else{var it=this.toBase();this.baseScalar=it.scalar,this.signature=it.signature}}var tt={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function Et(){return x(Object.keys(tt).map(function(it){return tt[it]}))}xt.prototype.kind=function(){return tt[this.signature.toString()]},C(xt.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&w(this.denominator,I)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Ct(it,mt){var St=it.units(),Ot=mt.to(St),Nt=xt(At(St));return xt({scalar:it.scalar-Ot.scalar,numerator:Nt.numerator,denominator:Nt.denominator})}function Mt(it,mt){var St=mt.to(At(it.units()));return xt({scalar:it.scalar-St.scalar,numerator:it.numerator,denominator:it.denominator})}function dt(it,mt){var St=mt.to(At(it.units()));return xt({scalar:it.scalar+St.scalar,numerator:it.numerator,denominator:it.denominator})}function At(it){if(it==="tempK")return"degK";if(it==="tempC")return"degC";if(it==="tempF")return"degF";if(it==="tempR")return"degR";throw new E("Unknown type for temp conversion from: "+it)}function Tt(it,mt){var St=kt(it),Ot=mt.units(),Nt;if(Ot==="degK")Nt=St.scalar;else if(Ot==="degC")Nt=St.scalar;else if(Ot==="degF")Nt=St.scalar*9/5;else if(Ot==="degR")Nt=St.scalar*9/5;else throw new E("Unknown type for degree conversion to: "+Ot);return xt({scalar:Nt,numerator:mt.numerator,denominator:mt.denominator})}function kt(it){var mt=it.units(),St;if(mt.match(/(deg)[CFRK]/))St=it.baseScalar;else if(mt==="tempK")St=it.scalar;else if(mt==="tempC")St=it.scalar;else if(mt==="tempF")St=it.scalar*5/9;else if(mt==="tempR")St=it.scalar*5/9;else throw new E("Unknown type for temp conversion from: "+mt);return xt({scalar:St,numerator:["<kelvin>"],denominator:I})}function Rt(it,mt){var St=mt.units(),Ot;if(St==="tempK")Ot=it.baseScalar;else if(St==="tempC")Ot=it.baseScalar-273.15;else if(St==="tempF")Ot=it.baseScalar*9/5-459.67;else if(St==="tempR")Ot=it.baseScalar*9/5;else throw new E("Unknown type for temp conversion to: "+St);return xt({scalar:Ot,numerator:mt.numerator,denominator:mt.denominator})}function Ft(it){var mt=it.units(),St;if(mt.match(/(deg)[CFRK]/))St=it.baseScalar;else if(mt==="tempK")St=it.scalar;else if(mt==="tempC")St=it.scalar+273.15;else if(mt==="tempF")St=(it.scalar+459.67)*5/9;else if(mt==="tempR")St=it.scalar*5/9;else throw new E("Unknown type for temp conversion from: "+mt);return xt({scalar:St,numerator:["<temp-K>"],denominator:I})}C(xt.prototype,{to:function(it){var mt,St;if(it==null)return this;if(!d(it))return this.to(it.units());if(mt=this._conversionCache[it],mt)return mt;if(St=xt(it),St.units()===this.units())return this;if(!this.isCompatible(St))this.isInverse(St)?St=this.inverse().to(it):R(this.units(),St.units());else if(St.isTemperature())St=Rt(this,St);else if(St.isDegrees())St=Tt(this,St);else{var Ot=_(this.baseScalar,St.baseScalar);St=xt({scalar:Ot,numerator:St.numerator,denominator:St.denominator})}return this._conversionCache[it]=St,St},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return Ft(this);var it=Vt[this.units()];return it||(it=Ut(this.numerator,this.denominator),Vt[this.units()]=it),it.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new E("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(it){if(d(it)&&(it=xt(it)),f(it)&&(it=xt(it+" "+this.units())),this.isUnitless()?it.isUnitless()||R(this.units(),it.units()):it=it.to(this.units()),it.scalar===0)throw new E("Divide by zero");var mt=A(Math.round(this.scalar/it.scalar),it.scalar);return xt(mt+this.units())}});function It(it,mt){var St=xt(it),Ot=xt(mt);if(St.eq(Ot))return g;var Nt;return St.isTemperature()?Nt=function(Bt){return St.mul(Bt).to(Ot).scalar}:Nt=function(Bt){return Bt*St.baseScalar/Ot.baseScalar},function(Bt){var Jt,qt,ei;if(Array.isArray(Bt)){for(qt=Bt.length,ei=[],Jt=0;Jt<qt;Jt++)ei.push(Nt(Bt[Jt]));return ei}else return Nt(Bt)}}var Vt={};function Ut(it,mt){for(var St=[],Ot=[],Nt=1,Bt,Jt=0;Jt<it.length;Jt++)Bt=it[Jt],W[Bt]?Nt=A(Nt,W[Bt]):q[Bt]&&(Nt*=q[Bt].scalar,q[Bt].numerator&&St.push(q[Bt].numerator),q[Bt].denominator&&Ot.push(q[Bt].denominator));for(var qt=0;qt<mt.length;qt++)Bt=mt[qt],W[Bt]?Nt/=W[Bt]:q[Bt]&&(Nt/=q[Bt].scalar,q[Bt].numerator&&Ot.push(q[Bt].numerator),q[Bt].denominator&&St.push(q[Bt].denominator));return St=St.reduce(function(ei,si){return ei.concat(si)},[]),Ot=Ot.reduce(function(ei,si){return ei.concat(si)},[]),xt({scalar:Nt,numerator:St,denominator:Ot})}xt.parse=gt,xt.getUnits=Xe,xt.getAliases=Ve,xt.mulSafe=A,xt.divSafe=_,xt.getKinds=Et,xt.swiftConverter=It,xt.Error=E,C(xt.prototype,{add:function(it){if(d(it)&&(it=xt(it)),this.isCompatible(it)||R(this.units(),it.units()),this.isTemperature()&&it.isTemperature())throw new E("Cannot add two temperatures");return this.isTemperature()?dt(this,it):it.isTemperature()?dt(it,this):xt({scalar:this.scalar+it.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(it){if(d(it)&&(it=xt(it)),this.isCompatible(it)||R(this.units(),it.units()),this.isTemperature()&&it.isTemperature())return Ct(this,it);if(this.isTemperature())return Mt(this,it);if(it.isTemperature())throw new E("Cannot subtract a temperature from a differential degree unit");return xt({scalar:this.scalar-it.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(it){if(f(it))return xt({scalar:A(this.scalar,it),numerator:this.numerator,denominator:this.denominator});if(d(it)&&(it=xt(it)),(this.isTemperature()||it.isTemperature())&&!(this.isUnitless()||it.isUnitless()))throw new E("Cannot multiply by temperatures");var mt=this,St=it;mt.isCompatible(St)&&mt.signature!==400&&(St=St.to(mt));var Ot=Gt(mt.numerator,mt.denominator,St.numerator,St.denominator);return xt({scalar:A(mt.scalar,St.scalar,Ot[2]),numerator:Ot[0],denominator:Ot[1]})},div:function(it){if(f(it)){if(it===0)throw new E("Divide by zero");return xt({scalar:this.scalar/it,numerator:this.numerator,denominator:this.denominator})}else d(it)&&(it=xt(it));if(it.scalar===0)throw new E("Divide by zero");if(it.isTemperature())throw new E("Cannot divide with temperatures");if(this.isTemperature()&&!it.isUnitless())throw new E("Cannot divide with temperatures");var mt=this,St=it;mt.isCompatible(St)&&mt.signature!==400&&(St=St.to(mt));var Ot=Gt(mt.numerator,mt.denominator,St.denominator,St.numerator);return xt({scalar:A(mt.scalar,Ot[2])/St.scalar,numerator:Ot[0],denominator:Ot[1]})},inverse:function(){if(this.isTemperature())throw new E("Cannot divide with temperatures");if(this.scalar===0)throw new E("Divide by zero");return xt({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function Gt(it,mt,St,Ot){function Nt(ii){return ii!==F}it=it.filter(Nt),St=St.filter(Nt),mt=mt.filter(Nt),Ot=Ot.filter(Nt);var Bt={};function Jt(ii,ai){for(var ni,mi,fi,ci=0;ci<ii.length;ci++)if(W[ii[ci]]?(ni=ii[ci+1],mi=ii[ci],fi=W[mi],ci++):(ni=ii[ci],mi=null,fi=1),ni&&ni!==F)if(Bt[ni]){Bt[ni][0]+=ai;var Si=Bt[ni][2]?W[Bt[ni][2]]:1;Bt[ni][ai===1?3:4]*=_(fi,Si)}else Bt[ni]=[ai,ni,mi,1,1]}Jt(it,1),Jt(mt,-1),Jt(St,1),Jt(Ot,-1);var qt=[],ei=[],si=1;for(var yi in Bt)if(Bt.hasOwnProperty(yi)){var ti=Bt[yi],pi;if(ti[0]>0)for(pi=0;pi<ti[0];pi++)qt.push(ti[2]===null?ti[1]:[ti[2],ti[1]]);else if(ti[0]<0)for(pi=0;pi<-ti[0];pi++)ei.push(ti[2]===null?ti[1]:[ti[2],ti[1]]);si*=_(ti[3],ti[4])}return qt.length===0&&(qt=I),ei.length===0&&(ei=I),qt=qt.reduce(function(ii,ai){return ii.concat(ai)},[]),ei=ei.reduce(function(ii,ai){return ii.concat(ai)},[]),[qt,ei,si]}C(xt.prototype,{eq:function(it){return this.compareTo(it)===0},lt:function(it){return this.compareTo(it)===-1},lte:function(it){return this.eq(it)||this.lt(it)},gt:function(it){return this.compareTo(it)===1},gte:function(it){return this.eq(it)||this.gt(it)},compareTo:function(it){if(d(it))return this.compareTo(xt(it));if(this.isCompatible(it)||R(this.units(),it.units()),this.baseScalar<it.baseScalar)return-1;if(this.baseScalar===it.baseScalar)return 0;if(this.baseScalar>it.baseScalar)return 1},same:function(it){return this.scalar===it.scalar&&this.units()===it.units()}}),C(xt.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(it){return w(it,I)})},isCompatible:function(it){return d(it)?this.isCompatible(xt(it)):vt(it)&&it.signature!==void 0?this.signature===it.signature:!1},isInverse:function(it){return this.inverse().isCompatible(it)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(it){it!==F&&z.indexOf(it)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function Yt(){}Yt.prototype.get=function(it){return arguments.length>1&&(it=Array.apply(null,arguments)),it.reduce(function(mt,St,Ot){if(mt){var Nt=mt[St];return Ot===it.length-1?Nt?Nt.data:void 0:Nt}},this)},Yt.prototype.set=function(it,mt){return arguments.length>2&&(it=Array.prototype.slice.call(arguments,0,-1),mt=arguments[arguments.length-1]),it.reduce(function(St,Ot,Nt){var Bt=St[Ot];return Bt===void 0&&(Bt=St[Ot]={}),Nt===it.length-1?(Bt.data=mt,mt):Bt},this)};function jt(it,mt){return(it+" "+mt).trim()}xt.formatter=jt,C(xt.prototype,{units:function(){if(this._units!==void 0)return this._units;var it=w(this.numerator,I),mt=w(this.denominator,I);if(it&&mt)return this._units="",this._units;var St=oi(this.numerator),Ot=oi(this.denominator);return this._units=St+(mt?"":"/"+Ot),this._units},toString:function(it,mt){var St;if(f(it))St=this.units(),mt=it;else if(d(it))St=it;else if(vt(it))return this.toPrec(it).toString(mt);var Ot=this.to(St),Nt=mt!==void 0?M(Ot.scalar,mt):Ot.scalar;return Ot=(Nt+" "+Ot.units()).trim(),Ot},format:function(it,mt){arguments.length===1&&typeof it=="function"&&(mt=it,it=void 0),mt=mt||xt.formatter;var St=this.to(it);return mt.call(this,St.scalar,St.units())}});var Kt=new Yt;function oi(it){var mt=Kt.get(it);if(mt)return mt;var St=w(it,I);return St?mt="1":mt=_t(di(it)).join("*"),Kt.set(it,mt),mt}function di(it){for(var mt=[],St,Ot,Nt=0;Nt<it.length;Nt++)St=it[Nt],Ot=it[Nt+1],W[St]?(mt.push(Z[St]+Z[Ot]),Nt++):mt.push(Z[St]);return mt}function _t(it){var mt=it.reduce(function(St,Ot){var Nt=St[Ot];return Nt||St.push(Nt=St[Ot]=[Ot,0]),Nt[1]++,St},[]);return mt.map(function(St){return St[0]+(St[1]>1?St[1]:"")})}return xt.version="1.8.0",xt})})(quantities);var quantitiesExports=quantities.exports;const Qty=getDefaultExportFromCjs$1(quantitiesExports);function deepValue(a,s=""){let d=s.split(".");for(let m of d){if(a[m]===void 0)return;a=a[m]}return a}var orientation={exports:{}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(a,s,d){var m=a*s,f=SPLITTER*a,g=f-a,x=f-g,w=a-x,C=SPLITTER*s,A=C-s,_=C-A,M=s-_,P=m-x*_,E=P-w*_,R=E-x*M,B=w*M-R;return d?(d[0]=B,d[1]=m,d):[B,m]}var robustSum=linearExpansionSum;function scalarScalar$1(a,s){var d=a+s,m=d-a,f=d-m,g=s-m,x=a-f,w=x+g;return w?[w,d]:[d]}function linearExpansionSum(a,s){var d=a.length|0,m=s.length|0;if(d===1&&m===1)return scalarScalar$1(a[0],s[0]);var f=d+m,g=new Array(f),x=0,w=0,C=0,A=Math.abs,_=a[w],M=A(_),P=s[C],E=A(P),R,B;M<E?(B=_,w+=1,w<d&&(_=a[w],M=A(_))):(B=P,C+=1,C<m&&(P=s[C],E=A(P))),w<d&&M<E||C>=m?(R=_,w+=1,w<d&&(_=a[w],M=A(_))):(R=P,C+=1,C<m&&(P=s[C],E=A(P)));for(var z=R+B,F=z-R,I=B-F,L=I,W=z,G,q,K,Z,J;w<d&&C<m;)M<E?(R=_,w+=1,w<d&&(_=a[w],M=A(_))):(R=P,C+=1,C<m&&(P=s[C],E=A(P))),B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G;for(;w<d;)R=_,B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G,w+=1,w<d&&(_=a[w]);for(;C<m;)R=P,B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G,C+=1,C<m&&(P=s[C]);return L&&(g[x++]=L),W&&(g[x++]=W),x||(g[x++]=0),g.length=x,g}var twoSum$1=fastTwoSum;function fastTwoSum(a,s,d){var m=a+s,f=m-a,g=m-f,x=s-f,w=a-g;return d?(d[0]=w+x,d[1]=m,d):[w+x,m]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(a,s){var d=a.length;if(d===1){var m=twoProduct(a[0],s);return m[0]?m:[m[1]]}var f=new Array(2*d),g=[.1,.1],x=[.1,.1],w=0;twoProduct(a[0],s,g),g[0]&&(f[w++]=g[0]);for(var C=1;C<d;++C){twoProduct(a[C],s,x);var A=g[1];twoSum(A,x[0],g),g[0]&&(f[w++]=g[0]);var _=x[1],M=g[1],P=_+M,E=P-_,R=M-E;g[1]=P,R&&(f[w++]=R)}return g[1]&&(f[w++]=g[1]),w===0&&(f[w++]=0),f.length=w,f}var robustDiff=robustSubtract;function scalarScalar(a,s){var d=a+s,m=d-a,f=d-m,g=s-m,x=a-f,w=x+g;return w?[w,d]:[d]}function robustSubtract(a,s){var d=a.length|0,m=s.length|0;if(d===1&&m===1)return scalarScalar(a[0],-s[0]);var f=d+m,g=new Array(f),x=0,w=0,C=0,A=Math.abs,_=a[w],M=A(_),P=-s[C],E=A(P),R,B;M<E?(B=_,w+=1,w<d&&(_=a[w],M=A(_))):(B=P,C+=1,C<m&&(P=-s[C],E=A(P))),w<d&&M<E||C>=m?(R=_,w+=1,w<d&&(_=a[w],M=A(_))):(R=P,C+=1,C<m&&(P=-s[C],E=A(P)));for(var z=R+B,F=z-R,I=B-F,L=I,W=z,G,q,K,Z,J;w<d&&C<m;)M<E?(R=_,w+=1,w<d&&(_=a[w],M=A(_))):(R=P,C+=1,C<m&&(P=-s[C],E=A(P))),B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G;for(;w<d;)R=_,B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G,w+=1,w<d&&(_=a[w]);for(;C<m;)R=P,B=L,z=R+B,F=z-R,I=B-F,I&&(g[x++]=I),G=W+z,q=G-W,K=G-q,Z=z-q,J=W-K,L=J+Z,W=G,C+=1,C<m&&(P=-s[C]);return L&&(g[x++]=L),W&&(g[x++]=W),x||(g[x++]=0),g.length=x,g}(function(a){var s=twoProduct_1,d=robustSum,m=robustScale,f=robustDiff,g=5,x=11102230246251565e-32,w=(3+16*x)*x,C=(7+56*x)*x;function A(L,W,G,q){return function(K,Z,J){var te=L(L(W(Z[1],J[0]),W(-J[1],Z[0])),L(W(K[1],Z[0]),W(-Z[1],K[0]))),Q=L(W(K[1],J[0]),W(-J[1],K[0])),me=q(te,Q);return me[me.length-1]}}function _(L,W,G,q){return function(K,Z,J,te){var Q=L(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),Z[2]),L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),-J[2]),G(L(W(Z[1],J[0]),W(-J[1],Z[0])),te[2]))),L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),te[2])))),me=L(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-J[2]),G(L(W(K[1],J[0]),W(-J[1],K[0])),te[2]))),L(G(L(W(Z[1],J[0]),W(-J[1],Z[0])),K[2]),L(G(L(W(K[1],J[0]),W(-J[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),J[2])))),Xe=q(Q,me);return Xe[Xe.length-1]}}function M(L,W,G,q){return function(K,Z,J,te,Q){var me=L(L(L(G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),J[2]),L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),-te[2]),G(L(W(J[1],te[0]),W(-te[1],J[0])),Q[2]))),Z[3]),L(G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),Z[2]),L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),-te[2]),G(L(W(Z[1],te[0]),W(-te[1],Z[0])),Q[2]))),-J[3]),G(L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),Z[2]),L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),-J[2]),G(L(W(Z[1],J[0]),W(-J[1],Z[0])),Q[2]))),te[3]))),L(G(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),Z[2]),L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),-J[2]),G(L(W(Z[1],J[0]),W(-J[1],Z[0])),te[2]))),-Q[3]),L(G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),Z[2]),L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),-te[2]),G(L(W(Z[1],te[0]),W(-te[1],Z[0])),Q[2]))),K[3]),G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-te[2]),G(L(W(K[1],te[0]),W(-te[1],K[0])),Q[2]))),-Z[3])))),L(L(G(L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),Q[2]))),te[3]),L(G(L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),te[2]))),-Q[3]),G(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),Z[2]),L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),-J[2]),G(L(W(Z[1],J[0]),W(-J[1],Z[0])),te[2]))),K[3]))),L(G(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-J[2]),G(L(W(K[1],J[0]),W(-J[1],K[0])),te[2]))),-Z[3]),L(G(L(G(L(W(Z[1],te[0]),W(-te[1],Z[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),te[2]))),J[3]),G(L(G(L(W(Z[1],J[0]),W(-J[1],Z[0])),K[2]),L(G(L(W(K[1],J[0]),W(-J[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),J[2]))),-te[3]))))),Xe=L(L(L(G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),J[2]),L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),-te[2]),G(L(W(J[1],te[0]),W(-te[1],J[0])),Q[2]))),K[3]),G(L(G(L(W(te[1],Q[0]),W(-Q[1],te[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-te[2]),G(L(W(K[1],te[0]),W(-te[1],K[0])),Q[2]))),-J[3])),L(G(L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-J[2]),G(L(W(K[1],J[0]),W(-J[1],K[0])),Q[2]))),te[3]),G(L(G(L(W(J[1],te[0]),W(-te[1],J[0])),K[2]),L(G(L(W(K[1],te[0]),W(-te[1],K[0])),-J[2]),G(L(W(K[1],J[0]),W(-J[1],K[0])),te[2]))),-Q[3]))),L(L(G(L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),Z[2]),L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),-J[2]),G(L(W(Z[1],J[0]),W(-J[1],Z[0])),Q[2]))),K[3]),G(L(G(L(W(J[1],Q[0]),W(-Q[1],J[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-J[2]),G(L(W(K[1],J[0]),W(-J[1],K[0])),Q[2]))),-Z[3])),L(G(L(G(L(W(Z[1],Q[0]),W(-Q[1],Z[0])),K[2]),L(G(L(W(K[1],Q[0]),W(-Q[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),Q[2]))),J[3]),G(L(G(L(W(Z[1],J[0]),W(-J[1],Z[0])),K[2]),L(G(L(W(K[1],J[0]),W(-J[1],K[0])),-Z[2]),G(L(W(K[1],Z[0]),W(-Z[1],K[0])),J[2]))),-Q[3])))),Ve=q(me,Xe);return Ve[Ve.length-1]}}function P(L){var W=L===3?A:L===4?_:M;return W(d,s,m,f)}var E=P(3),R=P(4),B=[function(){return 0},function(){return 0},function(L,W){return W[0]-L[0]},function(L,W,G){var q=(L[1]-G[1])*(W[0]-G[0]),K=(L[0]-G[0])*(W[1]-G[1]),Z=q-K,J;if(q>0){if(K<=0)return Z;J=q+K}else if(q<0){if(K>=0)return Z;J=-(q+K)}else return Z;var te=w*J;return Z>=te||Z<=-te?Z:E(L,W,G)},function(L,W,G,q){var K=L[0]-q[0],Z=W[0]-q[0],J=G[0]-q[0],te=L[1]-q[1],Q=W[1]-q[1],me=G[1]-q[1],Xe=L[2]-q[2],Ve=W[2]-q[2],Ye=G[2]-q[2],qe=Z*me,et=J*Q,je=J*te,Ke=K*me,Je=K*Q,at=Z*te,nt=Xe*(qe-et)+Ve*(je-Ke)+Ye*(Je-at),ct=(Math.abs(qe)+Math.abs(et))*Math.abs(Xe)+(Math.abs(je)+Math.abs(Ke))*Math.abs(Ve)+(Math.abs(Je)+Math.abs(at))*Math.abs(Ye),pt=C*ct;return nt>pt||-nt>pt?nt:R(L,W,G,q)}];function z(L){var W=B[L.length];return W||(W=B[L.length]=P(L.length)),W.apply(void 0,L)}function F(L,W,G,q,K,Z,J){return function(te,Q,me,Xe,Ve){switch(arguments.length){case 0:case 1:return 0;case 2:return q(te,Q);case 3:return K(te,Q,me);case 4:return Z(te,Q,me,Xe);case 5:return J(te,Q,me,Xe,Ve)}for(var Ye=new Array(arguments.length),qe=0;qe<arguments.length;++qe)Ye[qe]=arguments[qe];return L(Ye)}}function I(){for(;B.length<=g;)B.push(P(B.length));a.exports=F.apply(void 0,[z].concat(B));for(var L=0;L<=g;++L)a.exports[L]=B[L]}I()})(orientation);var orientationExports=orientation.exports,robustPnp=robustPointInPolygon,orient=orientationExports;function robustPointInPolygon(a,s){for(var d=s[0],m=s[1],f=a.length,g=1,x=f,w=0,C=f-1;w<x;C=w++){var A=a[w],_=a[C],M=A[1],P=_[1];if(P<M){if(P<m&&m<M){var E=orient(A,_,s);if(E===0)return 0;g^=0<E|0}else if(m===M){var R=a[(w+1)%f],B=R[1];if(M<B){var E=orient(A,_,s);if(E===0)return 0;g^=0<E|0}}}else if(M<P){if(M<m&&m<P){var E=orient(A,_,s);if(E===0)return 0;g^=E<0|0}else if(m===M){var R=a[(w+1)%f],B=R[1];if(B<M){var E=orient(A,_,s);if(E===0)return 0;g^=E<0|0}}}else if(m===M){var z=Math.min(A[0],_[0]),F=Math.max(A[0],_[0]);if(w===0){for(;C>0;){var I=(C+f-1)%f,L=a[I];if(L[1]!==m)break;var W=L[0];z=Math.min(z,W),F=Math.max(F,W),C=I}if(C===0)return z<=d&&d<=F?0:1;x=C+1}for(var G=a[(C+f-1)%f][1];w+1<x;){var L=a[w+1];if(L[1]!==m)break;var W=L[0];z=Math.min(z,W),F=Math.max(F,W),w+=1}if(z<=d&&d<=F)return 0;var q=a[(w+1)%f][1];d<z&&G<m!=q<m&&(g^=1)}}return 2*g-1}const robustPointInPolygon$1=getDefaultExportFromCjs$1(robustPnp);function feretDiameters(a={}){const{originalPoints:s=monotoneChainConvexHull.call(this)}=a;if(s.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(s.length===1)return{min:1,max:1,minLine:[s[0],s[0]],maxLine:[s[0],s[0]],aspectRatio:1};const d=new Array(s.length);let m=1/0,f=0,g=[];for(let A=0;A<s.length;A++){let _=getAngle(s[A],s[(A+1)%s.length]);rotate(-_,s,d);let M=0,P=[];for(let E=0;E<s.length;E++){let R=Math.abs(d[A][1]-d[E][1]);R>M&&(M=R,P=[],P.push([d[E][0],d[A][1]],[d[E][0],d[E][1]]))}M<m&&(m=M,f=_,g=P)}rotate(f,g,g);let x=0,w=[],C=0;for(let A=0;A<s.length-1;A++)for(let _=A+1;_<s.length;_++){let M=(s[A][0]-s[_][0])**2+(s[A][1]-s[_][1])**2;M>C&&(C=M,x=Math.sqrt(M),w=[s[A],s[_]])}return{min:m,minLine:g,max:x,maxLine:w,aspectRatio:m/x}}function getAngle(a,s){let d=difference(s,a),m=normalize(d),f=Math.acos(m[0]);return m[1]<0?-f:f}class Roi{constructor(s,d){this.map=s,this.id=d,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(s={}){const{scale:d=1,kind:m=""}=s;let f;switch(m){case"contour":f=this.contourMask;break;case"box":f=this.boxMask;break;case"filled":f=this.filledMask;break;case"center":f=this.centerMask;break;case"mbr":f=this.mbrFilledMask;break;case"hull":f=this.convexHullFilledMask;break;case"hullContour":f=this.convexHullMask;break;case"mbrContour":f=this.mbrMask;break;case"feret":f=this.feretMask;break;default:f=this.mask}return d<1&&(f=f.resize({factor:d}),f.parent=this.mask.parent,f.position[0]+=this.minX,f.position[1]+=this.minY),f}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let s=this.borderIDs,d=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let m=this.internalIDs;for(let f=0;f<s.length;f++)m.includes(s[f])||(this.computed.externalIDs.push(s[f]),this.computed.externalLengths.push(d[f]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let s=getBorders(this);this.computed.borderIDs=s.ids,this.computed.borderLengths=s.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let s=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)for(let m=0;m<this.height;m++)this.map.data[d+this.minX+(m+this.minY)*this.map.width]===this.id&&(d>0&&d<this.width-1&&m>0&&m<this.height-1?(this.map.data[d-1+this.minX+(m+this.minY)*this.map.width]!==this.id||this.map.data[d+1+this.minX+(m+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(m-1+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(m+1+this.minY)*this.map.width]!==this.id)&&s.setBitXY(d,m):s.setBitXY(d,m));this.computed.contourMask=s}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let s=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)s.setBitXY(d,0),s.setBitXY(d,this.height-1);for(let d=0;d<this.height;d++)s.setBitXY(0,d),s.setBitXY(this.width-1,d);this.computed.boxMask=s}return this.computed.boxMask}get mask(){if(!this.computed.mask){let s=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)for(let m=0;m<this.height;m++)this.map.data[d+this.minX+(m+this.minY)*this.map.width]===this.id&&s.setBitXY(d,m);this.computed.mask=s}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let s=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)for(let m=0;m<this.height;m++){let f=d+this.minX+(m+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[f])&&s.setBitXY(d,m)}this.computed.filledMask=s}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let s=new Shape({kind:"smallCross"}).getMask();s.parent=this.map.parent,s.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=s}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const s=[];for(let m=0;m<this.width;m++)for(let f=0;f<this.height;f++)this.map.data[m+this.minX+(f+this.minY)*this.map.width]===this.id&&(m>0&&m<this.width-1&&f>0&&f<this.height-1?(this.map.data[m-1+this.minX+(f+this.minY)*this.map.width]!==this.id||this.map.data[m+1+this.minX+(f+this.minY)*this.map.width]!==this.id||this.map.data[m+this.minX+(f-1+this.minY)*this.map.width]!==this.id||this.map.data[m+this.minX+(f+1+this.minY)*this.map.width]!==this.id)&&(s.push([m,f]),s.push([m+1,f]),s.push([m,f+1]),s.push([m+1,f+1])):(s.push([m,f]),s.push([m+1,f]),s.push([m,f+1]),s.push([m+1,f+1])));const d=monotoneChainConvexHull$1(s);this.computed.convexHull={polyline:d,surface:surface(d),perimeter:perimeter(d)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const s=this.convexHull,d=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});d.paintPolyline(s.polyline,{closed:!0}),this.computed.convexHullMask=d}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const s=this.convexHull,d=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let m=0;m<this.width;m++)for(let f=0;f<this.height;f++)robustPointInPolygon$1(s.polyline,[m,f])!==1&&d.setBitXY(m,f);this.computed.convexHullFilledMask=d}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let s=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(s.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:s};else{let d=s[0],m=s[1],f=s[2],g=Math.sqrt((d[0]-m[0])**2+(d[1]-m[1])**2),x=Math.sqrt((f[0]-m[0])**2+(f[1]-m[1])**2);this.computed.mbr={width:g,height:x,elongation:1-g/x,aspectRatio:g/x,surface:g*x,perimeter:(g+x)*2,rectangle:s}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let s=this.perimeterInfo,d=2-Math.sqrt(2);return s.one+s.two*2+s.three*3+s.four*4-d*(s.two+s.three*2+s.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const s=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});s.paintPolyline(this.feretDiameters.minLine),s.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=s}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let s=round$1(this.mbr.rectangle);if(s.length>0){const d=minMax(s),m=new Image$1(d[1][0]-d[0][0]+1,d[1][1]-d[0][1]+1,{kind:BINARY,position:[this.minX+d[0][0],this.minY+d[0][1]],parent:this.map.parent});s=moveToZeroZero(s),m.paintPolyline(s,{closed:!0}),this.computed.mbrMask=m}else this.computed.mbrMask=new Image$1(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const s=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),d=this.mask.minimalBoundingRectangle();for(let m=0;m<this.width;m++)for(let f=0;f<this.height;f++)robustPointInPolygon$1(d,[m,f])!==1&&s.setBitXY(m,f);this.computed.mbrFilledMask=s}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let s=[];for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++){let f=(d+this.minY)*this.map.width+m+this.minX;this.map.data[f]===this.id&&s.push([m,d])}this.computed.points=s}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let s=0,d;const m=this.points;for(let f=0;f<m.length;f++)for(let g=f+1;g<m.length;g++){let x=Math.pow(m[f][0]-m[g][0],2)+Math.pow(m[f][1]-m[g][1],2);x>=s&&(s=x,d=[m[f],m[g]])}this.computed.maxLengthPoints=d}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let s=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=s}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let s=this.maxLengthPoints,d=-Math.atan2(s[0][1]-s[1][1],s[0][0]-s[1][0])*180/Math.PI;this.computed.angle=d}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(a){let s=a.map,d=s.data,m=new Set,f=new Map,g=new Set,x=[1,0,-1,0],w=[0,1,0,-1];for(let _=a.minX;_<=a.maxX;_++)for(let M=a.minY;M<=a.maxY;M++){let P=_+M*s.width;if(d[P]===a.id)for(let E=0;E<4;E++){let R=_+x[E],B=M+w[E];if(R>=0&&B>=0&&R<s.width&&B<s.height){let z=R+B*s.width;if(d[z]!==a.id&&!g.has(z)){g.add(z),m.add(d[z]);let F=f.get(d[z]);F?f.set(d[z],++F):f.set(d[z],1)}}}}let C=Array.from(m),A=C.map(function(_){return f.get(_)});return{ids:C,lengths:A}}function getBoxIDs(a){let s=new Set,d=a.map,m=d.data;for(let f of[0,a.height-1])for(let g=0;g<a.width;g++){let x=(f+a.minY)*d.width+g+a.minX;if(g-a.minX>0&&m[x]===a.id&&m[x-1]!==a.id){let w=m[x-1];s.add(w)}if(d.width-g-a.minX>1&&m[x]===a.id&&m[x+1]!==a.id){let w=m[x+1];s.add(w)}}for(let f of[0,a.width-1])for(let g=0;g<a.height;g++){let x=(g+a.minY)*d.width+f+a.minX;if(g-a.minY>0&&m[x]===a.id&&m[x-d.width]!==a.id){let w=m[x-d.width];s.add(w)}if(d.height-g-a.minY>1&&m[x]===a.id&&m[x+d.width]!==a.id){let w=m[x+d.width];s.add(w)}}return Array.from(s)}function getBox(a){let s=0,d=a.map,m=d.data,f=[0];a.height>1&&(f[1]=a.height-1);for(let x of f)for(let w=1;w<a.width-1;w++){let C=(x+a.minY)*d.width+w+a.minX;m[C]===a.id&&s++}let g=[0];a.width>1&&(g[1]=a.width-1);for(let x of g)for(let w=0;w<a.height;w++){let C=(w+a.minY)*d.width+x+a.minX;m[C]===a.id&&s++}return s}function getBorder(a){let s=0,d=a.map,m=d.data;for(let f=1;f<a.width-1;f++)for(let g=1;g<a.height-1;g++){let x=(g+a.minY)*d.width+f+a.minX;m[x]===a.id&&(m[x-1]!==a.id||m[x+1]!==a.id||m[x-d.width]!==a.id||m[x+d.width]!==a.id)&&s++}return s+a.box}function getPerimeterInfo(a){let s=a.map,d=s.data,m=0,f=0,g=0,x=0;for(let w=0;w<a.width;w++)for(let C=0;C<a.height;C++){let A=(C+a.minY)*s.width+w+a.minX;if(d[A]===a.id){let _=0;switch((w===0||a.externalIDs.includes(d[A-1]))&&_++,(w===a.width-1||a.externalIDs.includes(d[A+1]))&&_++,(C===0||a.externalIDs.includes(d[A-s.width]))&&_++,(C===a.height-1||a.externalIDs.includes(d[A+s.width]))&&_++,_){case 1:m++;break;case 2:f++;break;case 3:g++;break;case 4:x++;break}}}return{one:m,two:f,three:g,four:x}}function getExternal(a){let s=0,d=a.map,m=d.data;for(let f=1;f<a.width-1;f++)for(let g=1;g<a.height-1;g++){let x=(g+a.minY)*d.width+f+a.minX;m[x]===a.id&&(a.externalIDs.includes(m[x-1])||a.externalIDs.includes(m[x+1])||a.externalIDs.includes(m[x-d.width])||a.externalIDs.includes(m[x+d.width]))&&s++}return s+a.box}function getHolesInfo(a){let s=0,d=a.map.width,m=a.map.data;for(let f=1;f<a.width-1;f++)for(let g=1;g<a.height-1;g++){let x=(g+a.minY)*d+f+a.minX;a.internalIDs.includes(m[x])&&m[x]!==a.id&&s++}return{number:a.internalIDs.length-1,surface:s}}function getInternalIDs(a){let s=[a.id],d=a.map,m=d.data;if(a.height>2)for(let g=0;g<a.width;g++){let x=a.minY*d.width+g+a.minX;if(s.includes(m[x])){let w=m[x+d.width];!s.includes(w)&&!a.boxIDs.includes(w)&&s.push(w)}}let f=new Array(4);for(let g=1;g<a.width-1;g++)for(let x=1;x<a.height-1;x++){let w=(x+a.minY)*d.width+g+a.minX;if(s.includes(m[w])){f[0]=m[w-1],f[1]=m[w+1],f[2]=m[w-d.width],f[3]=m[w+d.width];for(let C=0;C<4;C++){let A=f[C];!s.includes(A)&&!a.boxIDs.includes(A)&&s.push(A)}}}return s}class RoiLayer{constructor(s,d){this.roiMap=s,this.options=d,this.roi=this.createRoi()}createRoi(){let s=this.roiMap.data,d={};this.roiMap.positive=0,this.roiMap.negative=0;for(let w=0;w<s.length;w++)s[w]&&!d[s[w]]&&(d[s[w]]=!0,s[w]>0?this.roiMap.positive++:this.roiMap.negative++);let m={};for(let w in d)m[w]=new Roi(this.roiMap,w*1);let f=this.roiMap.width,g=this.roiMap.height;for(let w=0;w<g;w++)for(let C=0;C<f;C++){let A=w*f+C;if(s[A]!==0){const _=s[A],M=m[_];C<M.minX&&(M.minX=C),C>M.maxX&&(M.maxX=C),w<M.minY&&(M.minY=w),w>M.maxY&&(M.maxY=w),M.meanX+=C,M.meanY+=w,M.surface++}}let x=[];for(let w in d)m[w].meanX/=m[w].surface,m[w].meanY/=m[w].surface,x.push(m[w]);return x}}function commonBorderLength(a){let s=a.data,d=[1,0,-1,0],m=[0,1,0,-1],f=a.minMax,g=-f.min,x=f.max+g,w=[];for(let A=0;A<=x;A++)w.push(Object.create(null));for(let A=0;A<a.width;A++)for(let _=0;_<a.height;_++){let M=A+_*a.width,P=s[M];if(P!==0){let E=Object.create(null),R=!1;for(let B=0;B<4;B++){let z=A+d[B],F=_+m[B];if(z>=0&&F>=0&&z<a.width&&F<a.height){let I=s[z+F*a.width];P!==I&&(R=!0,I!==0&&E[I]===void 0&&(E[I]=!0,w[I+g][P]?w[I+g][P]++:w[I+g][P]=1))}else R=!0}R&&(w[P+g][P]?w[P+g][P]++:w[P+g][P]=1)}}let C={};for(let A=0;A<w.length;A++)Object.keys(w[A]).length>0&&(C[A-g]=w[A]);return C}function mergeRoi(a={}){const{algorithm:s="commonBorderLength",minCommonBorderLength:d=5,maxCommonBorderLength:m=100,minCommonBorderRatio:f=.3,maxCommonBorderRatio:g=1}=a;let x=function(z,F,I){return z[I]>=d&&z[I]<=m};typeof s=="function"&&(x=s),s.toLowerCase()==="commonborderratio"&&(x=function(z,F,I){let L=Math.min(z[I]/z[F],1);return L>=f&&L<=g});const w=this,C=w.commonBorderLength;let A={},_={};for(let z of Object.keys(C)){let F=C[z],I=Object.keys(F);for(let L of I)if(L!==z&&x(F,z,L)){let W=L;_[L]&&(W=_[L]);let G=z;if(_[z]&&(G=_[z]),Number(W)!==G){let q=Math.min(W,G),K=Math.max(W,G);if(A[q]||(A[q]={}),A[q][K]=!0,_[K]=q,A[K]){for(let Z of Object.keys(A[K]))A[q][Z]=!0,_[Z]=q;delete A[K]}}}}let M=w.minMax,P=-M.min,E=M.max+P,R=new Array(E+1).fill(0);for(let z of Object.keys(_))R[Number(z)+P]=_[z];let B=w.data;for(let z=0;z<B.length;z++){let F=B[z];if(F!==0){let I=R[F+P];I!==0&&(B[z]=I)}}return w.computed={},w}class RoiMap{constructor(s,d){this.parent=s,this.width=s.width,this.height=s.height,this.data=d,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let s=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m=0;m<this.data.length;m++)this.data[m]<s&&(s=this.data[m]),this.data[m]>d&&(d=this.data[m]);return{min:s,max:d}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(s={}){return mergeRoi.call(this,s)}mergeRois(s){const d=s[0],m=s.slice(1);for(let f=0;f<this.data.length;f++)m.includes(this.data[f])&&(this.data[f]=d)}rowsInfo(){let s=new Array(this.height),d=0;for(let m=0;m<this.data.length;m+=this.width){let f={row:d,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};s[d++]=f;let g={},x={},w=[],C=this.data[m],A=0;for(let _=m;_<m+this.width;_++){let M=this.data[_];C!==M&&(C=M,w.push(A),A=0),A++,M>0?(f.positivePixel++,g[M]||(g[M]=!0)):M<0?(f.negativePixel++,x[M]||(x[M]=!0)):f.zeroPixel++}w.push(A),f.medianChange=w.sort((_,M)=>_-M)[Math.floor(w.length/2)],f.positiveRoiIDs=Object.keys(g),f.negativeRoiIDs=Object.keys(x),f.positiveRoi=f.positiveRoiIDs.length,f.negativeRoi=f.negativeRoiIDs.length}return s}colsInfo(){let s=new Array(this.width),d=0;for(let m=0;m<this.width;m++){let f={col:d,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};s[d++]=f;let g={},x={},w=[],C=this.data[m],A=0;for(let _=m;_<m+this.data.length;_+=this.width){let M=this.data[_];C!==M&&(C=M,w.push(A),A=0),A++,M>0?(f.positivePixel++,g[M]||(g[M]=!0)):M<0?(f.negativePixel++,x[M]||(x[M]=!0)):f.zeroPixel++}w.push(A),f.medianChange=w.sort((_,M)=>_-M)[Math.floor(w.length/2)],f.positiveRoiIDs=Object.keys(g),f.negativeRoiIDs=Object.keys(x),f.positiveRoi=f.positiveRoiIDs.length,f.negativeRoi=f.negativeRoiIDs.length}return s}}function fromMask(a,s={}){const{allowCorners:d=!1}=s,m=65535;let f=new Int16Array(a.size),g=0,x=0,w=new Uint16Array(m+1),C=new Uint16Array(m+1);for(let _=0;_<a.width;_++)for(let M=0;M<a.height;M++)f[M*a.width+_]===0&&A(_,M);function A(_,M){let P=0,E=0,R=a.getBitXY(_,M),B=R?++g:--x;if(g>32767||x<-32768)throw new Error("Too many regions of interest");for(w[0]=_,C[0]=M;P<=E;){let z=w[P&m],F=C[P&m];if(f[F*a.width+z]=B,z>0&&f[F*a.width+z-1]===0&&a.getBitXY(z-1,F)===R&&(E++,w[E&m]=z-1,C[E&m]=F,f[F*a.width+z-1]=-32768),F>0&&f[(F-1)*a.width+z]===0&&a.getBitXY(z,F-1)===R&&(E++,w[E&m]=z,C[E&m]=F-1,f[(F-1)*a.width+z]=-32768),z<a.width-1&&f[F*a.width+z+1]===0&&a.getBitXY(z+1,F)===R&&(E++,w[E&m]=z+1,C[E&m]=F,f[F*a.width+z+1]=-32768),F<a.height-1&&f[(F+1)*a.width+z]===0&&a.getBitXY(z,F+1)===R&&(E++,w[E&m]=z,C[E&m]=F+1,f[(F+1)*a.width+z]=-32768),d&&(z>0&&F>0&&f[(F-1)*a.width+z-1]===0&&a.getBitXY(z-1,F-1)===R&&(E++,w[E&m]=z-1,C[E&m]=F-1,f[(F-1)*a.width+z-1]=-32768),z<a.width-1&&F>0&&f[(F-1)*a.width+z+1]===0&&a.getBitXY(z+1,F-1)===R&&(E++,w[E&m]=z+1,C[E&m]=F-1,f[(F-1)*a.width+z+1]=-32768),z>0&&F<a.height-1&&f[(F+1)*a.width+z-1]===0&&a.getBitXY(z-1,F+1)===R&&(E++,w[E&m]=z-1,C[E&m]=F+1,f[(F+1)*a.width+z-1]=-32768),z<a.width-1&&F<a.height-1&&f[(F+1)*a.width+z+1]===0&&a.getBitXY(z+1,F+1)===R&&(E++,w[E&m]=z+1,C[E&m]=F+1,f[(F+1)*a.width+z+1]=-32768)),P++,E-P>m)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(a,f)}class DisjointSet{constructor(){this.nodes=new Map}add(s){var d=this.nodes.get(s);return d||(d=new DisjointSetNode(s),this.nodes.set(s,d)),d}union(s,d){const m=this.find(s),f=this.find(d);m!==f&&(m.rank<f.rank?m.parent=f:m.rank>f.rank?f.parent=m:(f.parent=m,m.rank++))}find(s){for(var d=s;d.parent!==null;)d=d.parent;for(var m=s;m.parent!==null;){var f=m;m=m.parent,f.parent=d}return d}connected(s,d){return this.find(s)===this.find(d)}}var DisjointSet_1=DisjointSet;function DisjointSetNode(a){this.value=a,this.parent=null,this.rank=0}const DisjointSet$1=getDefaultExportFromCjs$1(DisjointSet_1),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(a,s={}){const{allowCorners:d=!1}=s;let m=4;d&&(m=8);let f,g,x;if(m===8)f=direction8X,g=direction8Y,x=neighbours8;else if(m===4)f=direction4X,g=direction4Y,x=neighbours4;else throw new RangeError(`unsupported neighbours count: ${m}`);const w=a.size,C=a.width,A=a.height,_=new Array(w),M=new Uint32Array(w),P=new DisjointSet$1;let E=1;for(let R=0;R<A;R++)for(let B=0;B<C;B++){const z=B+R*C;if(a.getBit(z)){let F=null;for(let I=0;I<x.length;I++){const L=B+f[I],W=R+g[I];if(L>=0&&W>=0&&L<C&&W<A){const G=L+W*C;let q=_[G];q?(x[I]=q,(!F||x[I].value<F.value)&&(F=x[I])):x[I]=null}}if(!F)_[z]=P.add(E++);else{_[z]=F;for(let I=0;I<x.length;I++)x[I]&&x[I]!==F&&P.union(F,x[I])}}}for(let R=0;R<A;R++)for(let B=0;B<C;B++){const z=B+R*C;a.getBit(z)&&(M[z]=P.find(_[z]).value)}return new RoiMap(a,M)}function fromMaxima(a={}){let{allowCorner:s=!0,onlyTop:d=!1,invert:m=!1}=a,f=this;f.checkProcessable("fromMaxima",{components:[1]});const g=1,x=2;let w=0,C=0,A=new Int16Array(f.size),_=new Int8Array(f.size),M=new Float32Array(f.size),P=1048575,E=new Uint16Array(P+1),R=new Uint16Array(P+1),B=0,z=0,F=new Uint16Array(P+1),I=new Uint16Array(P+1),L=0,W=0;for(G(f);B<z;){let Z=E[B&P],J=R[B&P];K(Z,J,x),B++}return new RoiMap(f,A);function G({maxima:Z=!0}){for(let J=1;J<f.height-1;J++)for(let te=1;te<f.width-1;te++){let Q=te+J*f.width;if(_[Q]===0){let me=Z?f.data[Q]:-f.data[te+J*f.width];if(f.data[J*f.width+te-1]>me||f.data[J*f.width+te+1]>me||f.data[(J-1)*f.width+te]>me||f.data[(J+1)*f.width+te]>me||s&&(f.data[(J-1)*f.width+te-1]>me||f.data[(J-1)*f.width+te+1]>me||f.data[(J+1)*f.width+te-1]>me||f.data[(J+1)*f.width+te+1]>me))continue;A[Q]=Z?++w:--C,q(te,J)||(Z?--w:++C)}}}function q(Z,J){let te=z;L=0,W=1,F[0]=Z,I[0]=J;let Q=!0;for(;L<W;){let me=F[L&P],Xe=I[L&P];Q&=K(me,Xe,g),L++}if(!Q){for(let me=0;me<W;me++){let Xe=F[me&P],Ve=I[me&P]*f.width+Xe;A[Ve]=0}z=te}return Q}function K(Z,J,te){let Q=A[J*f.width+Z],me=f.data[J*f.width+Z];for(let Xe=J-1;Xe<=J+1;Xe++)for(let Ve=Z-1;Ve<=Z+1;Ve++){let Ye=Xe*f.width+Ve;if(_[Ye]===0)switch(_[Ye]=1,M[Ye]=f.data[Ye]-me,te){case g:if(M[Ye]===0){if(Ve===0||Xe===0||Ve===f.width-1||Xe===f.height-1)return!1;A[Ye]=Q,F[W&P]=Ve,I[W&P]=Xe,W++}else{if(M[Ye]>0)return!1;d||(A[Ye]=Q,E[z&P]=Ve,R[z&P]=Xe,z++)}break;case x:M[Ye]<=0&&(A[Ye]=Q,E[z&P]=Ve,R[z&P]=Xe,z++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(a,s={}){let d=new Shape(s),m=new Int16Array(this.size),f=0,g=d.getPoints();for(let x=0;x<a.length;x++){f++;let w=a[x][0],C=a[x][1];for(let A=0;A<g.length;A++){let _=g[A][0],M=g[A][1];w+_>=0&&C+M>=0&&w+_<this.width&&C+M<this.height&&(m[w+_+(C+M)*this.width]=f)}}return new RoiMap(this,m)}function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}};(function(a,s){(function(d){a.exports=d()})(function(){return function d(m,f,g){function x(A,_){if(!f[A]){if(!m[A]){var M=typeof commonjsRequire=="function"&&commonjsRequire;if(!_&&M)return M(A,!0);if(w)return w(A,!0);var P=new Error("Cannot find module '"+A+"'");throw P.code="MODULE_NOT_FOUND",P}var E=f[A]={exports:{}};m[A][0].call(E.exports,function(R){var B=m[A][1][R];return x(B||R)},E,E.exports,d,m,f,g)}return f[A].exports}for(var w=typeof commonjsRequire=="function"&&commonjsRequire,C=0;C<g.length;C++)x(g[C]);return x}({1:[function(d,m,f){var g,x,w,C,A,_=function(P,E){for(var R in E)M.call(E,R)&&(P[R]=E[R]);function B(){this.constructor=P}return B.prototype=E.prototype,P.prototype=new B,P.__super__=E.prototype,P},M={}.hasOwnProperty;g=d("./PriorityQueue/AbstractPriorityQueue"),x=d("./PriorityQueue/ArrayStrategy"),C=d("./PriorityQueue/BinaryHeapStrategy"),w=d("./PriorityQueue/BHeapStrategy"),A=function(P){_(E,P);function E(R){R||(R={}),R.strategy||(R.strategy=C),R.comparator||(R.comparator=function(B,z){return(B||0)-(z||0)}),E.__super__.constructor.call(this,R)}return E}(g),A.ArrayStrategy=x,A.BinaryHeapStrategy=C,A.BHeapStrategy=w,m.exports=A},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(d,m,f){m.exports=function(){function g(x){var w;if((x!=null?x.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((x!=null?x.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new x.strategy(x),this.length=(x!=null&&(w=x.initialValues)!=null?w.length:void 0)||0}return g.prototype.queue=function(x){this.length++,this.priv.queue(x)},g.prototype.dequeue=function(x){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},g.prototype.peek=function(x){if(!this.length)throw"Empty queue";return this.priv.peek()},g.prototype.clear=function(){return this.length=0,this.priv.clear()},g}()},{}],3:[function(d,m,f){var g;g=function(x,w,C){var A,_,M;for(_=0,A=x.length;_<A;)M=_+A>>>1,C(x[M],w)>=0?_=M+1:A=M;return _},m.exports=function(){function x(w){var C;this.options=w,this.comparator=this.options.comparator,this.data=((C=this.options.initialValues)!=null?C.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return x.prototype.queue=function(w){var C;C=g(this.data,w,this.comparator),this.data.splice(C,0,w)},x.prototype.dequeue=function(){return this.data.pop()},x.prototype.peek=function(){return this.data[this.data.length-1]},x.prototype.clear=function(){this.data.length=0},x}()},{}],4:[function(d,m,f){m.exports=function(){function g(x){var w,C,A,_,M,P,E,R;for(this.comparator=(x!=null?x.comparator:void 0)||function(B,z){return B-z},this.pageSize=(x!=null?x.pageSize:void 0)||512,this.length=0,E=0;1<<E<this.pageSize;)E+=1;if(1<<E!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=E,this._emptyMemoryPageTemplate=w=[],C=0,M=this.pageSize;0<=M?C<M:C>M;0<=M?++C:--C)w.push(null);if(this._memory=[],this._mask=this.pageSize-1,x.initialValues)for(P=x.initialValues,A=0,_=P.length;A<_;A++)R=P[A],this.queue(R)}return g.prototype.queue=function(x){this.length+=1,this._write(this.length,x),this._bubbleUp(this.length,x)},g.prototype.dequeue=function(){var x,w;return x=this._read(1),w=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,w),this._bubbleDown(1,w)),x},g.prototype.peek=function(){return this._read(1)},g.prototype.clear=function(){this.length=0,this._memory.length=0},g.prototype._write=function(x,w){var C;for(C=x>>this._shift;C>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[C][x&this._mask]=w},g.prototype._read=function(x){return this._memory[x>>this._shift][x&this._mask]},g.prototype._bubbleUp=function(x,w){var C,A,_,M;for(C=this.comparator;x>1&&(A=x&this._mask,x<this.pageSize||A>3?_=x&~this._mask|A>>1:A<2?(_=x-this.pageSize>>this._shift,_+=_&~(this._mask>>1),_|=this.pageSize>>1):_=x-2,M=this._read(_),!(C(M,w)<0));)this._write(_,w),this._write(x,M),x=_},g.prototype._bubbleDown=function(x,w){var C,A,_,M,P;for(P=this.comparator;x<this.length;)if(x>this._mask&&!(x&this._mask-1)?C=A=x+2:x&this.pageSize>>1?(C=(x&~this._mask)>>1,C|=x&this._mask>>1,C=C+1<<this._shift,A=C+1):(C=x+(x&this._mask),A=C+1),C!==A&&A<=this.length)if(_=this._read(C),M=this._read(A),P(_,w)<0&&P(_,M)<=0)this._write(C,w),this._write(x,_),x=C;else if(P(M,w)<0)this._write(A,w),this._write(x,M),x=A;else break;else if(C<=this.length)if(_=this._read(C),P(_,w)<0)this._write(C,w),this._write(x,_),x=C;else break;else break},g}()},{}],5:[function(d,m,f){m.exports=function(){function g(x){var w;this.comparator=(x!=null?x.comparator:void 0)||function(C,A){return C-A},this.length=0,this.data=((w=x.initialValues)!=null?w.slice(0):void 0)||[],this._heapify()}return g.prototype._heapify=function(){var x,w,C;if(this.data.length>0)for(x=w=1,C=this.data.length;1<=C?w<C:w>C;x=1<=C?++w:--w)this._bubbleUp(x)},g.prototype.queue=function(x){this.data.push(x),this._bubbleUp(this.data.length-1)},g.prototype.dequeue=function(){var x,w;return w=this.data[0],x=this.data.pop(),this.data.length>0&&(this.data[0]=x,this._bubbleDown(0)),w},g.prototype.peek=function(){return this.data[0]},g.prototype.clear=function(){this.length=0,this.data.length=0},g.prototype._bubbleUp=function(x){for(var w,C;x>0&&(w=x-1>>>1,this.comparator(this.data[x],this.data[w])<0);)C=this.data[w],this.data[w]=this.data[x],this.data[x]=C,x=w},g.prototype._bubbleDown=function(x){var w,C,A,_,M;for(w=this.data.length-1;C=(x<<1)+1,_=C+1,A=x,C<=w&&this.comparator(this.data[C],this.data[A])<0&&(A=C),_<=w&&this.comparator(this.data[_],this.data[A])<0&&(A=_),A!==x;)M=this.data[A],this.data[A]=this.data[x],this.data[x]=M,x=A},g}()},{}]},{},[1])(1)})})(priorityQueue);var priorityQueueExports=priorityQueue.exports;const PriorityQueue=getDefaultExportFromCjs$1(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(a={}){let{points:s,mask:d,image:m,fillMaxValue:f=this.maxValue,invert:g=!1}=a,x=m||this;x.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),g=!g,s||(s=x.getLocalMaxima({invert:g,mask:d}));let w=g?0:1,C=new Int16Array(x.size),A=x.width,_=x.height,M=new PriorityQueue({comparator:(P,E)=>P[2]-E[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let P=0;P<s.length;P++){let E=s[P][0]+s[P][1]*A;C[E]=P+1;let R=x.data[E];(g&&R<=f||!g&&R>=f)&&M.queue([s[P][0],s[P][1],R])}for(;M.length>0;){let P=M.dequeue(),E=P[0]+P[1]*A;for(let R=0;R<4;R++){let B=P[0]+dxs[R],z=P[1]+dys[R];if(B>=0&&z>=0&&B<A&&z<_){let F=B+z*A;if(!d||d.getBit(F)===w){let I=x.data[F];(g&&I<=f||!g&&I>=f)&&C[F]===0&&(C[F]=C[E],M.queue([P[0]+dxs[R],P[1]+dys[R],I]))}}}}return new RoiMap(x,C)}class RoiManager{constructor(s,d={}){this._image=s,this._options=d,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(s={}){let d=Object.assign({},this._options,s),m=fromMaxima.call(this._image,s);this._layers[d.label]=new RoiLayer(m,d)}fromPoints(s,d={}){let m=Object.assign({},this._options,d),f=fromPoints.call(this._image,s,d);return this._layers[m.label]=new RoiLayer(f,m),this}putMap(s,d={}){let m=new RoiMap(this._image,s),f=Object.assign({},this._options,d);return this._layers[f.label]=new RoiLayer(m,f),this}fromWaterShed(s={}){let d=Object.assign({},this._options,s),m=fromWaterShed.call(this._image,s);this._layers[d.label]=new RoiLayer(m,d)}fromMask(s,d={}){let m=Object.assign({},this._options,d),f=fromMask.call(this._image,s,d);return this._layers[m.label]=new RoiLayer(f,m),this}fromMaskConnectedComponentLabelingAlgorithm(s,d={}){let m=Object.assign({},this._options,d),f=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,s,d);return this._layers[m.label]=new RoiLayer(f,m),this}getMap(s={}){let d=Object.assign({},this._options,s);return this._assertLayerWithLabel(d.label),this._layers[d.label].roiMap}rowsInfo(s={}){return this.getMap(s).rowsInfo()}colsInfo(s={}){return this.getMap(s).rowsInfo()}getRoiIds(s={}){let d=this.getRois(s);if(d){let m=new Array(d.length);for(let f=0;f<d.length;f++)m[f]=d[f].id;return m}throw new Error("ROIs not found")}getRois(s={}){let{label:d=this._options.label,positive:m=!0,negative:f=!0,minSurface:g=0,maxSurface:x=Number.POSITIVE_INFINITY,minWidth:w=0,maxWidth:C=Number.POSITIVE_INFINITY,minHeight:A=0,maxHeight:_=Number.POSITIVE_INFINITY,minRatio:M=0,maxRatio:P=Number.POSITIVE_INFINITY}=s;if(!this._layers[d])throw new Error(`this Roi layer (${d}) does not exist`);const E=this._layers[d].roi,R=[];for(const B of E)(B.id<0&&f||B.id>0&&m)&&B.surface>=g&&B.surface<=x&&B.width>=w&&B.width<=C&&B.height>=A&&B.height<=_&&B.ratio>=M&&B.ratio<=P&&R.push(B);return R}getRoi(s,d={}){const{label:m=this._options.label}=d;if(!this._layers[m])throw new Error(`this Roi layer (${m}) does not exist`);const f=this._layers[m].roi.find(g=>g.id===s);if(!f)throw new Error(`found no Roi with id ${s}`);return f}getMasks(s={}){let d=this.getRois(s),m=new Array(d.length);for(let f=0;f<d.length;f++)m[f]=d[f].getMask(s);return m}getAnalysisMasks(s={}){const{analysisProperty:d}=s;let m=`${d}Mask`,f=this.getRois(s);return f.length===0||!f[0][m]?[]:f.map(g=>g[m])}getData(s={}){let d=Object.assign({},this._options,s);return this._assertLayerWithLabel(d.label),this._layers[d.label].roiMap.data}paint(s={}){let{labelProperty:d,analysisProperty:m}=s;this._painted||(this._painted=this._image.rgba8());let f=this.getMasks(s);if(d){const g=this.getRois(s);s.labels=g.map(A=>deepValue(A,d));const x=Math.max(...s.labels);let w=!1,C=!1;if(d.includes("surface")?w=!0:/(?:perimeter|min|max|external|width|height|length)/.test(d)&&(C=!0),isFinite(x)){let A="";if(s.unit!=="pixel"&&s.pixelSize&&(C||w)){A=w?`${s.unit}^2`:s.unit;let _=w?"m^2":"m",M=w?s.pixelSize**2:s.pixelSize;const P=Qty.swiftConverter(_,A);s.labels=s.labels.map(E=>P(M*E))}x>50?s.labels=s.labels.map(_=>Math.round(_)+A):x>10?s.labels=s.labels.map(_=>_.toFixed(1)+A):s.labels=s.labels.map(_=>_.toFixed(2)+A)}s.labelsPosition=g.map(A=>[A.meanX,A.meanY])}if(this._painted.paintMasks(f,s),m){let g=this.getAnalysisMasks(s);this._painted.paintMasks(g,{color:s.analysisColor,alpha:s.analysisAlpha})}return this._painted}getMask(s={}){let d=new Image$1(this._image.width,this._image.height,{kind:"BINARY"}),m=this.getMasks(s);for(let f=0;f<m.length;f++){let g=m[f];for(let x=0;x<g.width;x++)for(let w=0;w<g.height;w++)g.getBitXY(x,w)&&d.setBitXY(x+g.position[0],w+g.position[1])}return d}resetPainted(s={}){const{image:d}=s;d?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(s={}){const d=this.getMap(s);return d.mergeRoi(s),this.putMap(d.data,s),this}mergeRois(s,d={}){if(!Array.isArray(s)||s.some(f=>!Number.isInteger(f)))throw new Error("Roi ids must be an array of integers");if(s.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(s).size!==s.length)throw new Error("Roi ids must be all different");s.forEach(f=>this.getRoi(f));const m=this.getMap(d);return m.mergeRois(s),this.putMap(m.data,d),this}findCorrespondingRoi(s,d={}){let m=this.getRois(d),f=[];for(let g=0;g<m.length;g++){let x=m[g],w=x.minX,C=x.minY,A=x.points,_=Math.sign(x.id),M=correspondingRoisInformation(w,C,A,s,_);f.push(M)}return f}_assertLayerWithLabel(s){if(!this._layers[s])throw new Error(`no layer with label ${s}`)}}function correspondingRoisInformation(a,s,d,m,f){let g={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let x=0;x<d.length;x++){let w=d[x],C=w[0],A=w[1],_=C+a+(A+s)*m.width,M=m.data[_];(M>0||M<0)&&(g.id.includes(M)?g.surface[g.id.indexOf(M)]+=1:(g.id.push(M),g.surface.push(1)))}for(let x=0;x<g.id.length;x++)Math.sign(g.id[x])===f?g.same+=g.surface[x]:g.opposite+=g.surface[x],g.roiSurfaceCovered[x]=g.surface[x]/d.length;return g.total=g.opposite+g.same,g}const objectToString=Object.prototype.toString;let Image$1=class Ai{constructor(s,d,m,f){if(arguments.length===1?(f=s,{width:s,height:d,data:m}=f):m&&!m.length&&(f=m,{data:m}=f),s===void 0&&(s=1),d===void 0&&(d=1),f===void 0&&(f={}),typeof f!="object"||f===null)throw new TypeError("options must be an object");if(!Number.isInteger(s)||s<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(d)||d<=0)throw new RangeError("height must be a positive integer");const{kind:g=RGBA}=f;if(typeof g!="string")throw new TypeError("kind must be a string");const x=getKind(g),w=Object.assign({},f);for(const B in x)w[B]===void 0&&(w[B]=x[B]);verifyKindDefinition(w);const{components:C,bitDepth:A,colorModel:_}=w,M=w.alpha+0,P=s*d,E=C+M,R=A===32?Number.MAX_VALUE:2**A-1;if(m===void 0)m=createPixelArray(P,C,M,E,A,R);else{const B=getTheoreticalPixelArraySize(P,E,A);if(m.length!==B)throw new RangeError(`incorrect data size: ${m.length}. Should be ${B}`)}this.width=s,this.height=d,this.data=m,this.size=P,this.components=C,this.alpha=M,this.bitDepth=A,this.maxValue=R,this.colorModel=_,this.channels=E,this.meta=f.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:f.parent||null}),this.position=f.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(s){return objectToString.call(s)==="[object IJSImage]"}static fromCanvas(s){const d=s.getContext("2d").getImageData(0,0,s.width,s.height);return new Ai(d.width,d.height,d.data)}static createFrom(s,d){const m=getImageParameters(s);return Object.assign(m,{parent:s,position:[0,0]},d),new Ai(m)}getRoiManager(s){return new RoiManager(this,s)}clone(){const s=this.data.slice();return new Ai(this.width,this.height,s,this)}apply(s){for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++){let f=(d*this.width+m)*this.channels;s.call(this,f)}}};setValueMethods(Image$1);setBitMethods(Image$1);setExportMethods(Image$1);Image$1.prototype.checkProcessable=checkProcessable;Image$1.prototype.getRGBAData=getRGBAData;Image$1.load=load;Image$1.extendMethod=extendMethod;Image$1.extendProperty=extendProperty;extend$1(Image$1);var workerTemplate$1={},worker$1=function(){self.window=self;function a(){this._listeners={}}a.prototype.on=function(d,m){if(this._listeners[d])throw new RangeError("there is already a listener for "+d);if(typeof m!="function")throw new TypeError("callback argument must be a function");this._listeners[d]=m},a.prototype._send=function(d,m,f){f===void 0?f=[]:Array.isArray(f)||(f=[f]),self.postMessage({id:d,data:m},f)},a.prototype._trigger=function(d,m){if(!this._listeners[d])throw new Error("event "+d+" is not defined");this._listeners[d].apply(null,m)};var s=new a;self.onmessage=function(d){switch(d.data.action){case"exec":d.data.args.unshift(function(m,f){s._send(d.data.id,m,f)}),s._trigger(d.data.event,d.data.args);break;case"ping":s._send(d.data.id,"pong");break;default:throw new Error("unexpected action: "+d.data.action)}}},workerStr=worker$1.toString().split('"CODE";');workerTemplate$1.newWorkerURL=function a(s,d){var m=new Blob(["(",workerStr[0],"importScripts.apply(self, "+JSON.stringify(d)+`);
`,"(",s,")();",workerStr[1],")();"],{type:"application/javascript"});return URL.createObjectURL(m)};var workerTemplate=workerTemplate$1,CORES=navigator.hardwareConcurrency||1;function WorkerManager(a,s){if(typeof a!="string"&&typeof a!="function")throw new TypeError("func argument must be a function");if(s===void 0&&(s={}),typeof s!="object"||s===null)throw new TypeError("options argument must be an object");this._workerCode=a.toString(),s.maxWorkers===void 0||s.maxWorkers==="auto"?this._numWorkers=Math.min(CORES-1,1):s.maxWorkers>0?this._numWorkers=Math.min(s.maxWorkers,CORES):this._numWorkers=CORES,this._workers=new Map,this._timeout=s.timeout||0,this._terminateOnError=!!s.terminateOnError;var d=s.deps;typeof d=="string"&&(d=[d]),Array.isArray(d)||(d=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(d)}WorkerManager.prototype._init=function(a){for(var s=workerTemplate.newWorkerURL(this._workerCode,a),d=0;d<this._numWorkers;d++){var m=new Worker(s);m.onmessage=this._onmessage.bind(this,m),m.onerror=this._onerror.bind(this,m),m.running=!1,m.id=d,this._workers.set(m,null)}URL.revokeObjectURL(s)};WorkerManager.prototype._onerror=function(a,s){if(!this._terminated){this._working--,a.running=!1;var d=this._workers.get(a);d&&d[1](s.message),this._workers.set(a,null),this._terminateOnError?this.terminate():this._exec()}};WorkerManager.prototype._onmessage=function(a,s){if(!this._terminated){this._working--,a.running=!1;var d=this._workers.get(a);d&&d[0](s.data.data),this._workers.set(a,null),this._exec()}};WorkerManager.prototype._exec=function(){for(var a of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!a.running)for(var s=0;s<this._waiting.length;s++){var d=this._waiting[s];if(!(typeof d[4]=="number"&&d[4]!==a.id)){this._waiting.splice(s,1),a.postMessage({action:"exec",event:d[0],args:d[1]},d[2]),a.running=!0,a.time=Date.now(),this._workers.set(a,d[3]),this._working++;break}}}};WorkerManager.prototype.terminate=function(){if(!this._terminated){for(var a of this._workers)a[0].terminate(),a[1]&&a[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}};WorkerManager.prototype.postAll=function(a,s){if(this._terminated)throw new Error("Cannot post (terminated)");var d=[];for(var m of this._workers.keys())d.push(this.post(a,s,[],m.id));return Promise.all(d)};WorkerManager.prototype.post=function(a,s,d,m){s===void 0&&(s=[]),d===void 0&&(d=[]),Array.isArray(s)||(s=[s]),Array.isArray(d)||(d=[d]);var f=this;return new Promise(function(g,x){if(f._terminated)throw new Error("Cannot post (terminated)");f._waiting.push([a,s,d,[g,x],m]),f._exec()})};var src=WorkerManager;const WorkerManager$1=getDefaultExportFromCjs$1(src),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(a,s,d){s=Object.assign({},defaultOptions,s);const m=this.manager;return Array.isArray(a)?Promise.all(a.map(function(f){const g=runOnce(m,f,s);return typeof d=="function"&&g.then(d),g})):runOnce(m,a,s)}function runOnce(a,s,d){return a.post("data",[s,d]).then(function(m){for(let f in m)m[f]=new Image$1(m[f]);return m})}function work(){worker.on("data",function(a,s,d){s=new IJS(s);const m={},f=[],g=s.grey(),x=g.sobelFilter();E("sobel",x);const w=x.level().mask({threshold:d.threshold});E("mask",w);const C=x.getRoiManager();C.fromMask(w);const A=C.getMask(d.roi);E("realMask",A);const _=g.getPixelsGrid({sampling:d.sampling,mask:A}),M=s.getBackground(_.xyS,_.zS,d.regression);E("background",M);const P=s.subtract(M);m.result=P,f.push(P.data.buffer),a(m,f);function E(R,B){d.include.includes(R)&&(m[R]=B,f.push(B.data.buffer))}})}const background={run,work};function extend(a){a.extendMethod("background",background)}let Worker$1=class $i{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(s){if(typeof s!="string")throw new TypeError("worker URL must be a string");this._url=s,this._deps[0]=s}static extendMethod(s,d){let m,f,g={};function x(...w){return m||(this.checkUrl(),f=this.url,m=new WorkerManager$1(d.work,{deps:f}),g.manager=m),d.run.call(g,...w)}x.reset=function(){m&&(m.terminate(),m=new WorkerManager$1(d.work,{deps:f}),g.manager=m)},$i.prototype[s]=x}};extend(Worker$1);let _imageService=null;function getImageService(){return _imageService||(_imageService=new DefaultOxyImageService,_imageService)}class DefaultOxyImageService{async decode(s){const d=await Image$1.load(s),m=d.height,f=d.width,g=d.data,x=create2DArray(f,m);for(let w=0;w<m;w++)for(let C=0;C<f;C++){let A=w*f+C;const _=g[A++],M=g[A++],P=g[A++],E=g[A++];x[w][C]=OxyColor.fromArgb(E,_,M,P)}return x}encode(s){const d=new DataView(new ArrayBuffer(s.imageInfo.width*s.imageInfo.height*4));let m=0;const f=s.pixels;for(let x=0;x<s.imageInfo.height;x++)for(let w=0;w<s.imageInfo.width;w++){const C=f.get(w,x);d.setUint8(m++,C.r),d.setUint8(m++,C.g),d.setUint8(m++,C.b),d.setUint8(m++,C.a)}const g=new Image$1(s.imageInfo.width,s.imageInfo.height,new Uint8Array(d.buffer)).toBuffer();return Promise.resolve(g)}async getImageInfo(s){const d=await Image$1.load(s);return{width:d.width,height:d.height,bitsPerPixel:d.bitDepth,dpiX:0,dpiY:0,format:OxyImage.getImageFormat(s)}}async load(s){const d=await Image$1.load(s),m=d.toBuffer(),f=new OxyImage(m);return f.format=OxyImage.getImageFormat(m),f.width=d.width,f.height=d.height,f}}function isUndef(a){return a===void 0}function isNullOrUndef(a){return a==null}function removeProperties(a,...s){if(a)for(const d of s)delete a[d]}function getOrDefault(a,s,d){if(!a||!s)return d;const m=a[s];return isNullOrUndef(m)?d:m}function removeUndef(a,s){const d=a;if(Array.isArray(d))return d.forEach(f=>removeUndef(f,s)),a;const m=Object.assign({removeNull:!0,removeEmptyStr:!1,deep:1},s);return Object.keys(d).forEach(f=>{const g=d[f];if(g===void 0){delete d[f];return}if(g===null&&m.removeNull){delete d[f];return}if(m.removeEmptyStr&&typeof g=="string"&&g.length==0){delete d[f];return}if(typeof g=="object"&&m.deep>1){const x=Object.assign({},m,{deep:m.deep-1});removeUndef(g,x);return}}),a}function hashCode(a){let s=0;for(let d=0;d<a.length;d++)s=Math.imul(31,s)+a[d];return s}const Number_MIN_VALUE=-17976931348623157e292,Number_MAX_VALUE=Number.MAX_VALUE;function round(a,s){if(s<0){const d=Math.pow(10,s);return Math.round(a*d)/d}return+(Math.round(+(a+"e+"+s))+"e-"+s)}function isInfinity(a){return!isFinite(a)}function isNegativeInfinity(a){return a===Number.NEGATIVE_INFINITY}function isPositiveInfinity(a){return a===Number.POSITIVE_INFINITY}function toUint(a){return a>=0?a:a>>>0}function log$1(a,s){return isNaN(a)?a:isNaN(s)?s:s===1?NaN:a!==1&&(s===0||Number.POSITIVE_INFINITY===s)?NaN:Math.log(a)/Math.log(s)}function pettyNumber(a,s){let d;if(a>=1e6||a<=-1e6?d=a.toExponential(s):d=a.toString(),d.includes("e")){const m=Number(d.split("e")[0]);return round(m,s).toString()+"e"+d.split("e")[1]}return round(a,s).toString()}function toPercent(a,s=1){return isNullOrUndef(a)?"":isNaN(a)?"NaN":round(a*100,s)+"%"}function assertInteger(a,s){if(Math.round(a)!==a)throw new Error(`${s||"number"} must be an integer.`)}function trimString(a,s){return a&&a.replace(new RegExp(`^${s}+|${s}+$`,"g"),"")}function substring(a,s,d){return d===void 0?a.substring(s):a.substring(s,s+d)}const $1Second=1e3,$1Minute=6e4,$1Hour=36e5,$1Day=864e5;class TimeSpan{constructor(s){D(this,"_totalMs",0),D(this,"_ms",0),D(this,"_seconds",0),D(this,"_minutes",0),D(this,"_hours",0),D(this,"_days",0),D(this,"toString",()=>`${this._days}day ${this._hours}hour ${this._minutes}minute ${this._seconds}second ${this._ms}ms`),this.ms=s,this._totalMs=s;const d=s<0?-1:1;let m=Math.abs(s);m>=$1Day&&(this._days=d*Math.floor(m/$1Day),m=m%$1Day),m>=$1Hour&&(this._hours=d*Math.floor(m/$1Hour),m=m%$1Hour),m>=$1Minute&&(this._minutes=d*Math.floor(m/$1Minute),m=m%$1Minute),m>=$1Second&&(this._seconds=d*Math.floor(m/$1Second),m=m%$1Second),this._ms=d*m}get milliseconds(){return this._ms}get seconds(){return this._seconds}get minutes(){return this._minutes}get hours(){return this._hours}get days(){return this._days}get totalMs(){return this._totalMs}get totalSeconds(){return this._totalMs/$1Second}get totalMinutes(){return this._totalMs/$1Minute}get totalHours(){return this._totalMs/$1Hour}get totalDays(){return this._totalMs/$1Day}static fromMilliseconds(s){return new TimeSpan(s)}static fromSeconds(s){return new TimeSpan(s*$1Second)}static fromMinutes(s){return new TimeSpan(s*$1Minute)}static fromHours(s){return new TimeSpan(s*$1Hour)}static fromDays(s){return new TimeSpan(s*$1Day)}static from(s=0,d=0,m=0,f=0,g=0){return new TimeSpan(s*$1Day+d*$1Hour+m*$1Minute+f*$1Second+g)}}class TwoDimensionalArray{constructor(s,d,m){D(this,"_data"),this.columnCount=s,this.rowCount=d,this._data=create2DArray(d,s,m)}static fromArray(s){const d=s.length,m=s[0].length,f=new TwoDimensionalArray(m,d);for(let g=0;g<d;g++)for(let x=0;x<m;x++)f.set(x,g,s[g][x]);return f}toArray(){const s=create2DArray(this.rowCount,this.columnCount);for(let d=0;d<this.rowCount;d++)for(let m=0;m<this.columnCount;m++)s[d][m]=this.get(m,d);return s}get height(){return this.rowCount}get width(){return this.columnCount}get(s,d){return this._data[d][s]}set(s,d,m){this._data[d][s]=m}}const zt=class ui{constructor(s,d,m,f){D(this,"_r"),D(this,"_g"),D(this,"_b"),D(this,"_a"),this._a=toByte(s),this._r=toByte(d),this._g=toByte(m),this._b=toByte(f)}get a(){return this._a}get b(){return this._b}get g(){return this._g}get r(){return this._r}static parse(s){if(!s||s.toLowerCase()==="none")return this._undefined;if(s.toLowerCase()==="auto")return this._automatic;if(s=s.trim(),s.startsWith("#")){s=trimString(s,"#"),s.length===3&&(s=`${s[0]}${s[0]}${s[1]}${s[1]}${s[2]}${s[2]}`);let C=parseInt(s,16);return s.length<8&&(C+=4278190080),ui.fromUInt32(C)}const d=s.split(",");if(d.length<3||d.length>4)throw new Error("Invalid format.");let m=0,f=255;d.length>3&&(f=parseInt(d[m],10),m++);const g=parseInt(d[m],10),x=parseInt(d[m+1],10),w=parseInt(d[m+2],10);return ui.fromArgb(f,g,x,w)}static colorDifference(s,d){const m=(s.r-d.r)/255,f=(s.g-d.g)/255,g=(s.b-d.b)/255,x=(s.a-d.a)/255,w=m*m+f*f+g*g+x*x;return Math.sqrt(w)}static fromUInt32(s){const d=s>>24&255,m=s>>16&255,f=s>>8&255,g=s&255;return ui.fromArgb(d,m,f,g)}static fromHsv(s,d,m){let f,g,x=f=g=0;if(d===0)x=f=g=m;else{s===1&&(s=0),s*=6;const w=Math.floor(s),C=s-w,A=m*(1-d),_=m*(1-d*C),M=m*(1-d*(1-C));switch(w){case 0:x=m,f=M,g=A;break;case 1:x=_,f=m,g=A;break;case 2:x=A,f=m,g=M;break;case 3:x=A,f=_,g=m;break;case 4:x=M,f=A,g=m;break;case 5:x=m,f=A,g=_;break}}return ui.fromRgb(x*255,f*255,g*255)}static fromAColor(s,d){return ui.fromArgb(s,d.r,d.g,d.b)}static fromArgb(s,d,m,f){return new ui(s,d,m,f)}static fromRgb(s,d,m){return new ui(255,s,d,m)}static interpolate(s,d,m){const f=s.a*(1-m)+d.a*m,g=s.r*(1-m)+d.r*m,x=s.g*(1-m)+d.g*m,w=s.b*(1-m)+d.b*m;return ui.fromArgb(toByte(f),toByte(g),toByte(x),toByte(w))}equals(s){return s.a===this.a&&s.r===this.r&&s.g===this.g&&s.b===this.b}toArgb(){return this.toArgbInner("start")}toRgba(){return this.toArgbInner("end")}toRgb(){return this.toArgbInner("none")}toArgbInner(s){const d=f=>f.toString(16).padStart(2,"0"),m=`${d(this.r)}${d(this.g)}${d(this.b)}`;return s==="start"?`#${d(this.a)}${m}`:s==="end"?`#${m}${d(this.a)}`:`#${m}`}toString(){return this.toArgb()}isInvisible(){return this.a===0}isVisible(){return this.a>0}isUndefined(){return this.equals(ui._undefined)}isAutomatic(){return this.equals(ui._automatic)}getActualColor(s){return this.isAutomatic()?s:this}};D(zt,"_undefined",zt.fromUInt32(0)),D(zt,"_automatic",zt.fromUInt32(1));let OxyColor=zt;function toByte(a){return Math.round(a)}const OxyColors={Undefined:OxyColor.fromUInt32(0),Automatic:OxyColor.fromUInt32(1),AliceBlue:OxyColor.fromUInt32(4293982463),AntiqueWhite:OxyColor.fromUInt32(4294634455),Aqua:OxyColor.fromUInt32(4278255615),Aquamarine:OxyColor.fromUInt32(4286578644),Azure:OxyColor.fromUInt32(4293984255),Beige:OxyColor.fromUInt32(4294309340),Bisque:OxyColor.fromUInt32(4294960324),Black:OxyColor.fromUInt32(4278190080),BlanchedAlmond:OxyColor.fromUInt32(4294962125),Blue:OxyColor.fromUInt32(4278190335),BlueViolet:OxyColor.fromUInt32(4287245282),Brown:OxyColor.fromUInt32(4289014314),BurlyWood:OxyColor.fromUInt32(4292786311),CadetBlue:OxyColor.fromUInt32(4284456608),Chartreuse:OxyColor.fromUInt32(4286578432),Chocolate:OxyColor.fromUInt32(4291979550),Coral:OxyColor.fromUInt32(4294934352),CornflowerBlue:OxyColor.fromUInt32(4284782061),Cornsilk:OxyColor.fromUInt32(4294965468),Crimson:OxyColor.fromUInt32(4292613180),Cyan:OxyColor.fromUInt32(4278255615),DarkBlue:OxyColor.fromUInt32(4278190219),DarkCyan:OxyColor.fromUInt32(4278225803),DarkGoldenrod:OxyColor.fromUInt32(4290283019),DarkGray:OxyColor.fromUInt32(4289309097),DarkGreen:OxyColor.fromUInt32(4278215680),DarkKhaki:OxyColor.fromUInt32(4290623339),DarkMagenta:OxyColor.fromUInt32(4287299723),DarkOliveGreen:OxyColor.fromUInt32(4283788079),DarkOrange:OxyColor.fromUInt32(4294937600),DarkOrchid:OxyColor.fromUInt32(4288230092),DarkRed:OxyColor.fromUInt32(4287299584),DarkSalmon:OxyColor.fromUInt32(4293498490),DarkSeaGreen:OxyColor.fromUInt32(4287609999),DarkSlateBlue:OxyColor.fromUInt32(4282924427),DarkSlateGray:OxyColor.fromUInt32(4281290575),DarkTurquoise:OxyColor.fromUInt32(4278243025),DarkViolet:OxyColor.fromUInt32(4287889619),DeepPink:OxyColor.fromUInt32(4294907027),DeepSkyBlue:OxyColor.fromUInt32(4278239231),DimGray:OxyColor.fromUInt32(4285098345),DodgerBlue:OxyColor.fromUInt32(4280193279),Firebrick:OxyColor.fromUInt32(4289864226),FloralWhite:OxyColor.fromUInt32(4294966e3),ForestGreen:OxyColor.fromUInt32(4280453922),Fuchsia:OxyColor.fromUInt32(4294902015),Gainsboro:OxyColor.fromUInt32(4292664540),GhostWhite:OxyColor.fromUInt32(4294506751),Gold:OxyColor.fromUInt32(4294956800),Goldenrod:OxyColor.fromUInt32(4292519200),Gray:OxyColor.fromUInt32(4286611584),Green:OxyColor.fromUInt32(4278222848),GreenYellow:OxyColor.fromUInt32(4289593135),Honeydew:OxyColor.fromUInt32(4293984240),HotPink:OxyColor.fromUInt32(4294928820),IndianRed:OxyColor.fromUInt32(4291648604),Indigo:OxyColor.fromUInt32(4283105410),Ivory:OxyColor.fromUInt32(4294967280),Khaki:OxyColor.fromUInt32(4293977740),Lavender:OxyColor.fromUInt32(4293322490),LavenderBlush:OxyColor.fromUInt32(4294963445),LawnGreen:OxyColor.fromUInt32(4286381056),LemonChiffon:OxyColor.fromUInt32(4294965965),LightBlue:OxyColor.fromUInt32(4289583334),LightCoral:OxyColor.fromUInt32(4293951616),LightCyan:OxyColor.fromUInt32(4292935679),LightGoldenrodYellow:OxyColor.fromUInt32(4294638290),LightGray:OxyColor.fromUInt32(4292072403),LightGreen:OxyColor.fromUInt32(4287688336),LightPink:OxyColor.fromUInt32(4294948545),LightSalmon:OxyColor.fromUInt32(4294942842),LightSeaGreen:OxyColor.fromUInt32(4280332970),LightSkyBlue:OxyColor.fromUInt32(4287090426),LightSlateGray:OxyColor.fromUInt32(4286023833),LightSteelBlue:OxyColor.fromUInt32(4289774814),LightYellow:OxyColor.fromUInt32(4294967264),Lime:OxyColor.fromUInt32(4278255360),LimeGreen:OxyColor.fromUInt32(4281519410),Linen:OxyColor.fromUInt32(4294635750),Magenta:OxyColor.fromUInt32(4294902015),Maroon:OxyColor.fromUInt32(4286578688),MediumAquamarine:OxyColor.fromUInt32(4284927402),MediumBlue:OxyColor.fromUInt32(4278190285),MediumOrchid:OxyColor.fromUInt32(4290401747),MediumPurple:OxyColor.fromUInt32(4287852763),MediumSeaGreen:OxyColor.fromUInt32(4282168177),MediumSlateBlue:OxyColor.fromUInt32(4286277870),MediumSpringGreen:OxyColor.fromUInt32(4278254234),MediumTurquoise:OxyColor.fromUInt32(4282962380),MediumVioletRed:OxyColor.fromUInt32(4291237253),MidnightBlue:OxyColor.fromUInt32(4279834992),MintCream:OxyColor.fromUInt32(4294311930),MistyRose:OxyColor.fromUInt32(4294960353),Moccasin:OxyColor.fromUInt32(4294960309),NavajoWhite:OxyColor.fromUInt32(4294958765),Navy:OxyColor.fromUInt32(4278190208),OldLace:OxyColor.fromUInt32(4294833638),Olive:OxyColor.fromUInt32(4286611456),OliveDrab:OxyColor.fromUInt32(4285238819),Orange:OxyColor.fromUInt32(4294944e3),OrangeRed:OxyColor.fromUInt32(4294919424),Orchid:OxyColor.fromUInt32(4292505814),PaleGoldenrod:OxyColor.fromUInt32(4293847210),PaleGreen:OxyColor.fromUInt32(4288215960),PaleTurquoise:OxyColor.fromUInt32(4289720046),PaleVioletRed:OxyColor.fromUInt32(4292571283),PapayaWhip:OxyColor.fromUInt32(4294963157),PeachPuff:OxyColor.fromUInt32(4294957753),Peru:OxyColor.fromUInt32(4291659071),Pink:OxyColor.fromUInt32(4294951115),Plum:OxyColor.fromUInt32(4292714717),PowderBlue:OxyColor.fromUInt32(4289781990),Purple:OxyColor.fromUInt32(4286578816),Red:OxyColor.fromUInt32(4294901760),RosyBrown:OxyColor.fromUInt32(4290547599),RoyalBlue:OxyColor.fromUInt32(4282477025),SaddleBrown:OxyColor.fromUInt32(4287317267),Salmon:OxyColor.fromUInt32(4294606962),SandyBrown:OxyColor.fromUInt32(4294222944),SeaGreen:OxyColor.fromUInt32(4281240407),SeaShell:OxyColor.fromUInt32(4294964718),Sienna:OxyColor.fromUInt32(4288696877),Silver:OxyColor.fromUInt32(4290822336),SkyBlue:OxyColor.fromUInt32(4287090411),SlateBlue:OxyColor.fromUInt32(4285160141),SlateGray:OxyColor.fromUInt32(4285563024),Snow:OxyColor.fromUInt32(4294966010),SpringGreen:OxyColor.fromUInt32(4278255487),SteelBlue:OxyColor.fromUInt32(4282811060),Tan:OxyColor.fromUInt32(4291998860),Teal:OxyColor.fromUInt32(4278222976),Thistle:OxyColor.fromUInt32(4292394968),Tomato:OxyColor.fromUInt32(4294927175),Transparent:OxyColor.fromUInt32(16777215),Turquoise:OxyColor.fromUInt32(4282441936),Violet:OxyColor.fromUInt32(4293821166),Wheat:OxyColor.fromUInt32(4294303411),White:OxyColor.fromUInt32(4294967295),WhiteSmoke:OxyColor.fromUInt32(4294309365),Yellow:OxyColor.fromUInt32(4294967040),YellowGreen:OxyColor.fromUInt32(4288335154)};Object.freeze(OxyColors);const colorNamesCache=new Map,OxyColorExtensions={changeIntensity:(a,s)=>{const d=OxyColorExtensions.toHsv(a);return d[2]*=s,d[2]>1&&(d[2]=1),OxyColor.fromHsv(d[0],d[1],d[2])},changeSaturation:(a,s)=>{const d=OxyColorExtensions.toHsv(a);return d[1]*=s,d[1]>1&&(d[1]=1),OxyColor.fromHsv(d[0],d[1],d[2])},changeOpacity:(a,s)=>OxyColor.fromAColor(a.a*s,a),complementary:a=>{const s=OxyColorExtensions.toHsv(a);let d=s[0]-.5;return d<0&&(d+=1),OxyColor.fromHsv(d,s[1],s[2])},toHsv:a=>{const s=a.r,d=a.g,m=a.b,f=Math.min(Math.min(s,d),m),g=Math.max(Math.max(s,d),m),x=g-f,w=g===0?0:x/g;let C=0;w===0?C=0:(s===g?C=(d-m)/x:d===g?C=2+(m-s)/x:m===g&&(C=4+(s-d)/x),C*=60,C<0&&(C+=360));const A=new Array(3);return A[0]=C/360,A[1]=w,A[2]=g/255,A},toUint:a=>{let s=toUint(a.a<<24);return s+=toUint(a.r<<16),s+=toUint(a.g<<8),s+=toUint(a.b),toUint(s)},toByteString:a=>`${a.a},${a.r},${a.g},${a.b}`,getColorName:a=>{const s=OxyColorExtensions.toUint(a);if(colorNamesCache.has(s))return colorNamesCache.get(s);const d=OxyColors;for(const m of Object.keys(d)){const f=d[m];if(OxyColorExtensions.toUint(f)===s)return colorNamesCache.set(s,m),m}},hueDifference:(a,s)=>{const d=OxyColorExtensions.toHsv(a),m=OxyColorExtensions.toHsv(s);let f=d[0]-m[0];f>.5&&(f-=1),f<-.5&&(f+=1);const g=Math.pow(f,2);return Math.sqrt(g)}};class OxyPalette{constructor(s){D(this,"colors",[]),s&&(this.colors=[...s],Object.freeze(this.colors))}static interpolate(s,...d){if(!d||d.length===0||s<1)return new OxyPalette([]);const m=[],f=s===1?0:1/(s-1);for(let g=0;g<s;g++){const x=g*f*(d.length-1),w=Math.floor(x),C=w+1<d.length?w+1:w;m[g]=OxyColor.interpolate(d[w],d[C],x-w)}return new OxyPalette(m)}reverse(){return new OxyPalette(getReversedCopy(this.colors))}}class OxyPalettes{static blackWhiteRed(s){return OxyPalette.interpolate(s,OxyColors.Black,OxyColors.White,OxyColors.Red)}static blueWhiteRed(s){return OxyPalette.interpolate(s,OxyColors.Blue,OxyColors.White,OxyColors.Red)}static cool(s){return OxyPalette.interpolate(s,OxyColors.Cyan,OxyColors.Magenta)}static gray(s){return OxyPalette.interpolate(s,OxyColors.Black,OxyColors.White)}static hot(s){return OxyPalette.interpolate(s,OxyColors.Black,OxyColor.fromRgb(127,0,0),OxyColor.fromRgb(255,127,0),OxyColor.fromRgb(255,255,127),OxyColors.White)}static hue(s){return OxyPalette.interpolate(s,OxyColors.Red,OxyColors.Yellow,OxyColors.Green,OxyColors.Cyan,OxyColors.Blue,OxyColors.Magenta,OxyColors.Red)}static hueDistinct(s){return OxyPalette.interpolate(s,OxyColors.Magenta,OxyColors.Blue,OxyColors.Cyan,OxyColors.Green,OxyColors.Yellow,OxyColors.Red)}static jet(s){return OxyPalette.interpolate(s,OxyColors.DarkBlue,OxyColors.Cyan,OxyColors.Yellow,OxyColors.Orange,OxyColors.DarkRed)}static rainbow(s){return OxyPalette.interpolate(s,OxyColors.Violet,OxyColors.Indigo,OxyColors.Blue,OxyColors.Green,OxyColors.Yellow,OxyColors.Orange,OxyColors.Red)}static cividis(s=256){return s===cividisColors.length?new OxyPalette(cividisColors):OxyPalette.interpolate(s,...cividisColors)}static inferno(s=256){return s===infernoColors.length?new OxyPalette(infernoColors):OxyPalette.interpolate(s,...infernoColors)}static magma(s=256){return s===magmaColors.length?new OxyPalette(magmaColors):OxyPalette.interpolate(s,...magmaColors)}static plasma(s=256){return s===plasmaColors.length?new OxyPalette(plasmaColors):OxyPalette.interpolate(s,...plasmaColors)}static viridis(s=256){return s===viridisColors.length?new OxyPalette(viridisColors):OxyPalette.interpolate(s,...viridisColors)}}D(OxyPalettes,"blueWhiteRed31"),D(OxyPalettes,"hot64"),D(OxyPalettes,"hue64");OxyPalettes.blueWhiteRed31=OxyPalettes.blueWhiteRed(31);OxyPalettes.hot64=OxyPalettes.hot(64);OxyPalettes.hue64=OxyPalettes.hue(64);const cividisColors=[OxyColor.fromRgb(0,32,77),OxyColor.fromRgb(0,33,78),OxyColor.fromRgb(0,34,80),OxyColor.fromRgb(0,34,82),OxyColor.fromRgb(0,35,83),OxyColor.fromRgb(0,36,85),OxyColor.fromRgb(0,37,87),OxyColor.fromRgb(0,37,88),OxyColor.fromRgb(0,38,90),OxyColor.fromRgb(0,39,92),OxyColor.fromRgb(0,39,94),OxyColor.fromRgb(0,40,96),OxyColor.fromRgb(0,41,97),OxyColor.fromRgb(0,42,99),OxyColor.fromRgb(0,42,101),OxyColor.fromRgb(0,43,103),OxyColor.fromRgb(0,44,105),OxyColor.fromRgb(0,44,106),OxyColor.fromRgb(0,45,108),OxyColor.fromRgb(0,46,110),OxyColor.fromRgb(0,46,111),OxyColor.fromRgb(0,47,111),OxyColor.fromRgb(0,47,111),OxyColor.fromRgb(0,48,111),OxyColor.fromRgb(0,48,111),OxyColor.fromRgb(0,49,111),OxyColor.fromRgb(0,50,111),OxyColor.fromRgb(0,51,111),OxyColor.fromRgb(0,51,111),OxyColor.fromRgb(0,52,111),OxyColor.fromRgb(0,53,110),OxyColor.fromRgb(1,54,110),OxyColor.fromRgb(6,54,110),OxyColor.fromRgb(11,55,110),OxyColor.fromRgb(15,56,110),OxyColor.fromRgb(18,56,109),OxyColor.fromRgb(21,57,109),OxyColor.fromRgb(24,58,109),OxyColor.fromRgb(26,59,109),OxyColor.fromRgb(29,59,109),OxyColor.fromRgb(31,60,109),OxyColor.fromRgb(33,61,109),OxyColor.fromRgb(35,62,108),OxyColor.fromRgb(36,62,108),OxyColor.fromRgb(38,63,108),OxyColor.fromRgb(40,64,108),OxyColor.fromRgb(42,64,108),OxyColor.fromRgb(43,65,108),OxyColor.fromRgb(45,66,108),OxyColor.fromRgb(46,67,108),OxyColor.fromRgb(48,67,108),OxyColor.fromRgb(49,68,107),OxyColor.fromRgb(50,69,107),OxyColor.fromRgb(52,69,107),OxyColor.fromRgb(53,70,107),OxyColor.fromRgb(54,71,107),OxyColor.fromRgb(56,72,107),OxyColor.fromRgb(57,72,107),OxyColor.fromRgb(58,73,107),OxyColor.fromRgb(59,74,107),OxyColor.fromRgb(61,74,107),OxyColor.fromRgb(62,75,107),OxyColor.fromRgb(63,76,107),OxyColor.fromRgb(64,77,107),OxyColor.fromRgb(65,77,107),OxyColor.fromRgb(66,78,107),OxyColor.fromRgb(67,79,107),OxyColor.fromRgb(68,79,107),OxyColor.fromRgb(70,80,107),OxyColor.fromRgb(71,81,107),OxyColor.fromRgb(72,82,107),OxyColor.fromRgb(73,82,107),OxyColor.fromRgb(74,83,107),OxyColor.fromRgb(75,84,108),OxyColor.fromRgb(76,84,108),OxyColor.fromRgb(77,85,108),OxyColor.fromRgb(78,86,108),OxyColor.fromRgb(79,87,108),OxyColor.fromRgb(80,87,108),OxyColor.fromRgb(81,88,108),OxyColor.fromRgb(82,89,108),OxyColor.fromRgb(83,89,108),OxyColor.fromRgb(84,90,108),OxyColor.fromRgb(85,91,109),OxyColor.fromRgb(86,92,109),OxyColor.fromRgb(87,92,109),OxyColor.fromRgb(88,93,109),OxyColor.fromRgb(89,94,109),OxyColor.fromRgb(89,95,109),OxyColor.fromRgb(90,95,109),OxyColor.fromRgb(91,96,110),OxyColor.fromRgb(92,97,110),OxyColor.fromRgb(93,97,110),OxyColor.fromRgb(94,98,110),OxyColor.fromRgb(95,99,110),OxyColor.fromRgb(96,100,111),OxyColor.fromRgb(97,100,111),OxyColor.fromRgb(98,101,111),OxyColor.fromRgb(99,102,111),OxyColor.fromRgb(100,102,111),OxyColor.fromRgb(100,103,112),OxyColor.fromRgb(101,104,112),OxyColor.fromRgb(102,105,112),OxyColor.fromRgb(103,105,112),OxyColor.fromRgb(104,106,113),OxyColor.fromRgb(105,107,113),OxyColor.fromRgb(106,108,113),OxyColor.fromRgb(107,108,113),OxyColor.fromRgb(108,109,114),OxyColor.fromRgb(108,110,114),OxyColor.fromRgb(109,110,114),OxyColor.fromRgb(110,111,115),OxyColor.fromRgb(111,112,115),OxyColor.fromRgb(112,113,115),OxyColor.fromRgb(113,113,116),OxyColor.fromRgb(114,114,116),OxyColor.fromRgb(114,115,116),OxyColor.fromRgb(115,116,117),OxyColor.fromRgb(116,116,117),OxyColor.fromRgb(117,117,117),OxyColor.fromRgb(118,118,118),OxyColor.fromRgb(119,119,118),OxyColor.fromRgb(120,119,119),OxyColor.fromRgb(120,120,119),OxyColor.fromRgb(121,121,119),OxyColor.fromRgb(122,122,120),OxyColor.fromRgb(123,122,120),OxyColor.fromRgb(124,123,120),OxyColor.fromRgb(125,124,120),OxyColor.fromRgb(126,125,120),OxyColor.fromRgb(127,125,120),OxyColor.fromRgb(128,126,121),OxyColor.fromRgb(129,127,121),OxyColor.fromRgb(130,128,121),OxyColor.fromRgb(131,128,121),OxyColor.fromRgb(132,129,121),OxyColor.fromRgb(132,130,121),OxyColor.fromRgb(133,131,121),OxyColor.fromRgb(134,131,121),OxyColor.fromRgb(135,132,121),OxyColor.fromRgb(136,133,121),OxyColor.fromRgb(137,134,121),OxyColor.fromRgb(138,135,121),OxyColor.fromRgb(139,135,121),OxyColor.fromRgb(140,136,121),OxyColor.fromRgb(141,137,121),OxyColor.fromRgb(142,138,121),OxyColor.fromRgb(143,138,121),OxyColor.fromRgb(144,139,121),OxyColor.fromRgb(145,140,120),OxyColor.fromRgb(146,141,120),OxyColor.fromRgb(147,142,120),OxyColor.fromRgb(148,142,120),OxyColor.fromRgb(149,143,120),OxyColor.fromRgb(150,144,120),OxyColor.fromRgb(151,145,120),OxyColor.fromRgb(152,146,120),OxyColor.fromRgb(153,146,120),OxyColor.fromRgb(154,147,119),OxyColor.fromRgb(155,148,119),OxyColor.fromRgb(156,149,119),OxyColor.fromRgb(157,150,119),OxyColor.fromRgb(158,150,119),OxyColor.fromRgb(159,151,119),OxyColor.fromRgb(160,152,119),OxyColor.fromRgb(161,153,118),OxyColor.fromRgb(162,154,118),OxyColor.fromRgb(163,154,118),OxyColor.fromRgb(164,155,118),OxyColor.fromRgb(165,156,118),OxyColor.fromRgb(166,157,117),OxyColor.fromRgb(168,158,117),OxyColor.fromRgb(169,159,117),OxyColor.fromRgb(170,159,117),OxyColor.fromRgb(171,160,116),OxyColor.fromRgb(172,161,116),OxyColor.fromRgb(173,162,116),OxyColor.fromRgb(174,163,116),OxyColor.fromRgb(175,164,115),OxyColor.fromRgb(176,164,115),OxyColor.fromRgb(177,165,115),OxyColor.fromRgb(178,166,114),OxyColor.fromRgb(179,167,114),OxyColor.fromRgb(180,168,114),OxyColor.fromRgb(181,169,113),OxyColor.fromRgb(182,169,113),OxyColor.fromRgb(183,170,113),OxyColor.fromRgb(184,171,112),OxyColor.fromRgb(185,172,112),OxyColor.fromRgb(186,173,112),OxyColor.fromRgb(187,174,111),OxyColor.fromRgb(188,175,111),OxyColor.fromRgb(190,175,111),OxyColor.fromRgb(191,176,110),OxyColor.fromRgb(192,177,110),OxyColor.fromRgb(193,178,109),OxyColor.fromRgb(194,179,109),OxyColor.fromRgb(195,180,109),OxyColor.fromRgb(196,181,108),OxyColor.fromRgb(197,181,108),OxyColor.fromRgb(198,182,107),OxyColor.fromRgb(199,183,107),OxyColor.fromRgb(200,184,106),OxyColor.fromRgb(201,185,106),OxyColor.fromRgb(203,186,105),OxyColor.fromRgb(204,187,105),OxyColor.fromRgb(205,188,104),OxyColor.fromRgb(206,188,104),OxyColor.fromRgb(207,189,103),OxyColor.fromRgb(208,190,103),OxyColor.fromRgb(209,191,102),OxyColor.fromRgb(210,192,102),OxyColor.fromRgb(211,193,101),OxyColor.fromRgb(212,194,100),OxyColor.fromRgb(214,195,100),OxyColor.fromRgb(215,196,99),OxyColor.fromRgb(216,197,99),OxyColor.fromRgb(217,197,98),OxyColor.fromRgb(218,198,97),OxyColor.fromRgb(219,199,97),OxyColor.fromRgb(220,200,96),OxyColor.fromRgb(221,201,95),OxyColor.fromRgb(222,202,95),OxyColor.fromRgb(224,203,94),OxyColor.fromRgb(225,204,93),OxyColor.fromRgb(226,205,92),OxyColor.fromRgb(227,206,92),OxyColor.fromRgb(228,207,91),OxyColor.fromRgb(229,208,90),OxyColor.fromRgb(230,209,89),OxyColor.fromRgb(232,210,89),OxyColor.fromRgb(233,211,88),OxyColor.fromRgb(234,211,87),OxyColor.fromRgb(235,212,86),OxyColor.fromRgb(236,213,85),OxyColor.fromRgb(237,214,84),OxyColor.fromRgb(239,215,83),OxyColor.fromRgb(240,216,82),OxyColor.fromRgb(241,217,81),OxyColor.fromRgb(242,218,80),OxyColor.fromRgb(243,219,79),OxyColor.fromRgb(244,220,78),OxyColor.fromRgb(246,221,77),OxyColor.fromRgb(247,222,76),OxyColor.fromRgb(248,223,75),OxyColor.fromRgb(249,224,74),OxyColor.fromRgb(250,225,73),OxyColor.fromRgb(251,226,72),OxyColor.fromRgb(253,227,70),OxyColor.fromRgb(254,228,69),OxyColor.fromRgb(255,229,68),OxyColor.fromRgb(255,230,66),OxyColor.fromRgb(255,231,66),OxyColor.fromRgb(255,232,67),OxyColor.fromRgb(255,233,68),OxyColor.fromRgb(255,234,70)],infernoColors=[OxyColor.fromRgb(0,0,4),OxyColor.fromRgb(1,0,5),OxyColor.fromRgb(1,1,6),OxyColor.fromRgb(1,1,8),OxyColor.fromRgb(2,1,10),OxyColor.fromRgb(2,2,12),OxyColor.fromRgb(2,2,14),OxyColor.fromRgb(3,2,16),OxyColor.fromRgb(4,3,18),OxyColor.fromRgb(4,3,20),OxyColor.fromRgb(5,4,23),OxyColor.fromRgb(6,4,25),OxyColor.fromRgb(7,5,27),OxyColor.fromRgb(8,5,29),OxyColor.fromRgb(9,6,31),OxyColor.fromRgb(10,7,34),OxyColor.fromRgb(11,7,36),OxyColor.fromRgb(12,8,38),OxyColor.fromRgb(13,8,41),OxyColor.fromRgb(14,9,43),OxyColor.fromRgb(16,9,45),OxyColor.fromRgb(17,10,48),OxyColor.fromRgb(18,10,50),OxyColor.fromRgb(20,11,52),OxyColor.fromRgb(21,11,55),OxyColor.fromRgb(22,11,57),OxyColor.fromRgb(24,12,60),OxyColor.fromRgb(25,12,62),OxyColor.fromRgb(27,12,65),OxyColor.fromRgb(28,12,67),OxyColor.fromRgb(30,12,69),OxyColor.fromRgb(31,12,72),OxyColor.fromRgb(33,12,74),OxyColor.fromRgb(35,12,76),OxyColor.fromRgb(36,12,79),OxyColor.fromRgb(38,12,81),OxyColor.fromRgb(40,11,83),OxyColor.fromRgb(41,11,85),OxyColor.fromRgb(43,11,87),OxyColor.fromRgb(45,11,89),OxyColor.fromRgb(47,10,91),OxyColor.fromRgb(49,10,92),OxyColor.fromRgb(50,10,94),OxyColor.fromRgb(52,10,95),OxyColor.fromRgb(54,9,97),OxyColor.fromRgb(56,9,98),OxyColor.fromRgb(57,9,99),OxyColor.fromRgb(59,9,100),OxyColor.fromRgb(61,9,101),OxyColor.fromRgb(62,9,102),OxyColor.fromRgb(64,10,103),OxyColor.fromRgb(66,10,104),OxyColor.fromRgb(68,10,104),OxyColor.fromRgb(69,10,105),OxyColor.fromRgb(71,11,106),OxyColor.fromRgb(73,11,106),OxyColor.fromRgb(74,12,107),OxyColor.fromRgb(76,12,107),OxyColor.fromRgb(77,13,108),OxyColor.fromRgb(79,13,108),OxyColor.fromRgb(81,14,108),OxyColor.fromRgb(82,14,109),OxyColor.fromRgb(84,15,109),OxyColor.fromRgb(85,15,109),OxyColor.fromRgb(87,16,110),OxyColor.fromRgb(89,16,110),OxyColor.fromRgb(90,17,110),OxyColor.fromRgb(92,18,110),OxyColor.fromRgb(93,18,110),OxyColor.fromRgb(95,19,110),OxyColor.fromRgb(97,19,110),OxyColor.fromRgb(98,20,110),OxyColor.fromRgb(100,21,110),OxyColor.fromRgb(101,21,110),OxyColor.fromRgb(103,22,110),OxyColor.fromRgb(105,22,110),OxyColor.fromRgb(106,23,110),OxyColor.fromRgb(108,24,110),OxyColor.fromRgb(109,24,110),OxyColor.fromRgb(111,25,110),OxyColor.fromRgb(113,25,110),OxyColor.fromRgb(114,26,110),OxyColor.fromRgb(116,26,110),OxyColor.fromRgb(117,27,110),OxyColor.fromRgb(119,28,109),OxyColor.fromRgb(120,28,109),OxyColor.fromRgb(122,29,109),OxyColor.fromRgb(124,29,109),OxyColor.fromRgb(125,30,109),OxyColor.fromRgb(127,30,108),OxyColor.fromRgb(128,31,108),OxyColor.fromRgb(130,32,108),OxyColor.fromRgb(132,32,107),OxyColor.fromRgb(133,33,107),OxyColor.fromRgb(135,33,107),OxyColor.fromRgb(136,34,106),OxyColor.fromRgb(138,34,106),OxyColor.fromRgb(140,35,105),OxyColor.fromRgb(141,35,105),OxyColor.fromRgb(143,36,105),OxyColor.fromRgb(144,37,104),OxyColor.fromRgb(146,37,104),OxyColor.fromRgb(147,38,103),OxyColor.fromRgb(149,38,103),OxyColor.fromRgb(151,39,102),OxyColor.fromRgb(152,39,102),OxyColor.fromRgb(154,40,101),OxyColor.fromRgb(155,41,100),OxyColor.fromRgb(157,41,100),OxyColor.fromRgb(159,42,99),OxyColor.fromRgb(160,42,99),OxyColor.fromRgb(162,43,98),OxyColor.fromRgb(163,44,97),OxyColor.fromRgb(165,44,96),OxyColor.fromRgb(166,45,96),OxyColor.fromRgb(168,46,95),OxyColor.fromRgb(169,46,94),OxyColor.fromRgb(171,47,94),OxyColor.fromRgb(173,48,93),OxyColor.fromRgb(174,48,92),OxyColor.fromRgb(176,49,91),OxyColor.fromRgb(177,50,90),OxyColor.fromRgb(179,50,90),OxyColor.fromRgb(180,51,89),OxyColor.fromRgb(182,52,88),OxyColor.fromRgb(183,53,87),OxyColor.fromRgb(185,53,86),OxyColor.fromRgb(186,54,85),OxyColor.fromRgb(188,55,84),OxyColor.fromRgb(189,56,83),OxyColor.fromRgb(191,57,82),OxyColor.fromRgb(192,58,81),OxyColor.fromRgb(193,58,80),OxyColor.fromRgb(195,59,79),OxyColor.fromRgb(196,60,78),OxyColor.fromRgb(198,61,77),OxyColor.fromRgb(199,62,76),OxyColor.fromRgb(200,63,75),OxyColor.fromRgb(202,64,74),OxyColor.fromRgb(203,65,73),OxyColor.fromRgb(204,66,72),OxyColor.fromRgb(206,67,71),OxyColor.fromRgb(207,68,70),OxyColor.fromRgb(208,69,69),OxyColor.fromRgb(210,70,68),OxyColor.fromRgb(211,71,67),OxyColor.fromRgb(212,72,66),OxyColor.fromRgb(213,74,65),OxyColor.fromRgb(215,75,63),OxyColor.fromRgb(216,76,62),OxyColor.fromRgb(217,77,61),OxyColor.fromRgb(218,78,60),OxyColor.fromRgb(219,80,59),OxyColor.fromRgb(221,81,58),OxyColor.fromRgb(222,82,56),OxyColor.fromRgb(223,83,55),OxyColor.fromRgb(224,85,54),OxyColor.fromRgb(225,86,53),OxyColor.fromRgb(226,87,52),OxyColor.fromRgb(227,89,51),OxyColor.fromRgb(228,90,49),OxyColor.fromRgb(229,92,48),OxyColor.fromRgb(230,93,47),OxyColor.fromRgb(231,94,46),OxyColor.fromRgb(232,96,45),OxyColor.fromRgb(233,97,43),OxyColor.fromRgb(234,99,42),OxyColor.fromRgb(235,100,41),OxyColor.fromRgb(235,102,40),OxyColor.fromRgb(236,103,38),OxyColor.fromRgb(237,105,37),OxyColor.fromRgb(238,106,36),OxyColor.fromRgb(239,108,35),OxyColor.fromRgb(239,110,33),OxyColor.fromRgb(240,111,32),OxyColor.fromRgb(241,113,31),OxyColor.fromRgb(241,115,29),OxyColor.fromRgb(242,116,28),OxyColor.fromRgb(243,118,27),OxyColor.fromRgb(243,120,25),OxyColor.fromRgb(244,121,24),OxyColor.fromRgb(245,123,23),OxyColor.fromRgb(245,125,21),OxyColor.fromRgb(246,126,20),OxyColor.fromRgb(246,128,19),OxyColor.fromRgb(247,130,18),OxyColor.fromRgb(247,132,16),OxyColor.fromRgb(248,133,15),OxyColor.fromRgb(248,135,14),OxyColor.fromRgb(248,137,12),OxyColor.fromRgb(249,139,11),OxyColor.fromRgb(249,140,10),OxyColor.fromRgb(249,142,9),OxyColor.fromRgb(250,144,8),OxyColor.fromRgb(250,146,7),OxyColor.fromRgb(250,148,7),OxyColor.fromRgb(251,150,6),OxyColor.fromRgb(251,151,6),OxyColor.fromRgb(251,153,6),OxyColor.fromRgb(251,155,6),OxyColor.fromRgb(251,157,7),OxyColor.fromRgb(252,159,7),OxyColor.fromRgb(252,161,8),OxyColor.fromRgb(252,163,9),OxyColor.fromRgb(252,165,10),OxyColor.fromRgb(252,166,12),OxyColor.fromRgb(252,168,13),OxyColor.fromRgb(252,170,15),OxyColor.fromRgb(252,172,17),OxyColor.fromRgb(252,174,18),OxyColor.fromRgb(252,176,20),OxyColor.fromRgb(252,178,22),OxyColor.fromRgb(252,180,24),OxyColor.fromRgb(251,182,26),OxyColor.fromRgb(251,184,29),OxyColor.fromRgb(251,186,31),OxyColor.fromRgb(251,188,33),OxyColor.fromRgb(251,190,35),OxyColor.fromRgb(250,192,38),OxyColor.fromRgb(250,194,40),OxyColor.fromRgb(250,196,42),OxyColor.fromRgb(250,198,45),OxyColor.fromRgb(249,199,47),OxyColor.fromRgb(249,201,50),OxyColor.fromRgb(249,203,53),OxyColor.fromRgb(248,205,55),OxyColor.fromRgb(248,207,58),OxyColor.fromRgb(247,209,61),OxyColor.fromRgb(247,211,64),OxyColor.fromRgb(246,213,67),OxyColor.fromRgb(246,215,70),OxyColor.fromRgb(245,217,73),OxyColor.fromRgb(245,219,76),OxyColor.fromRgb(244,221,79),OxyColor.fromRgb(244,223,83),OxyColor.fromRgb(244,225,86),OxyColor.fromRgb(243,227,90),OxyColor.fromRgb(243,229,93),OxyColor.fromRgb(242,230,97),OxyColor.fromRgb(242,232,101),OxyColor.fromRgb(242,234,105),OxyColor.fromRgb(241,236,109),OxyColor.fromRgb(241,237,113),OxyColor.fromRgb(241,239,117),OxyColor.fromRgb(241,241,121),OxyColor.fromRgb(242,242,125),OxyColor.fromRgb(242,244,130),OxyColor.fromRgb(243,245,134),OxyColor.fromRgb(243,246,138),OxyColor.fromRgb(244,248,142),OxyColor.fromRgb(245,249,146),OxyColor.fromRgb(246,250,150),OxyColor.fromRgb(248,251,154),OxyColor.fromRgb(249,252,157),OxyColor.fromRgb(250,253,161),OxyColor.fromRgb(252,255,164)],magmaColors=[OxyColor.fromRgb(0,0,4),OxyColor.fromRgb(1,0,5),OxyColor.fromRgb(1,1,6),OxyColor.fromRgb(1,1,8),OxyColor.fromRgb(2,1,9),OxyColor.fromRgb(2,2,11),OxyColor.fromRgb(2,2,13),OxyColor.fromRgb(3,3,15),OxyColor.fromRgb(3,3,18),OxyColor.fromRgb(4,4,20),OxyColor.fromRgb(5,4,22),OxyColor.fromRgb(6,5,24),OxyColor.fromRgb(6,5,26),OxyColor.fromRgb(7,6,28),OxyColor.fromRgb(8,7,30),OxyColor.fromRgb(9,7,32),OxyColor.fromRgb(10,8,34),OxyColor.fromRgb(11,9,36),OxyColor.fromRgb(12,9,38),OxyColor.fromRgb(13,10,41),OxyColor.fromRgb(14,11,43),OxyColor.fromRgb(16,11,45),OxyColor.fromRgb(17,12,47),OxyColor.fromRgb(18,13,49),OxyColor.fromRgb(19,13,52),OxyColor.fromRgb(20,14,54),OxyColor.fromRgb(21,14,56),OxyColor.fromRgb(22,15,59),OxyColor.fromRgb(24,15,61),OxyColor.fromRgb(25,16,63),OxyColor.fromRgb(26,16,66),OxyColor.fromRgb(28,16,68),OxyColor.fromRgb(29,17,71),OxyColor.fromRgb(30,17,73),OxyColor.fromRgb(32,17,75),OxyColor.fromRgb(33,17,78),OxyColor.fromRgb(34,17,80),OxyColor.fromRgb(36,18,83),OxyColor.fromRgb(37,18,85),OxyColor.fromRgb(39,18,88),OxyColor.fromRgb(41,17,90),OxyColor.fromRgb(42,17,92),OxyColor.fromRgb(44,17,95),OxyColor.fromRgb(45,17,97),OxyColor.fromRgb(47,17,99),OxyColor.fromRgb(49,17,101),OxyColor.fromRgb(51,16,103),OxyColor.fromRgb(52,16,105),OxyColor.fromRgb(54,16,107),OxyColor.fromRgb(56,16,108),OxyColor.fromRgb(57,15,110),OxyColor.fromRgb(59,15,112),OxyColor.fromRgb(61,15,113),OxyColor.fromRgb(63,15,114),OxyColor.fromRgb(64,15,116),OxyColor.fromRgb(66,15,117),OxyColor.fromRgb(68,15,118),OxyColor.fromRgb(69,16,119),OxyColor.fromRgb(71,16,120),OxyColor.fromRgb(73,16,120),OxyColor.fromRgb(74,16,121),OxyColor.fromRgb(76,17,122),OxyColor.fromRgb(78,17,123),OxyColor.fromRgb(79,18,123),OxyColor.fromRgb(81,18,124),OxyColor.fromRgb(82,19,124),OxyColor.fromRgb(84,19,125),OxyColor.fromRgb(86,20,125),OxyColor.fromRgb(87,21,126),OxyColor.fromRgb(89,21,126),OxyColor.fromRgb(90,22,126),OxyColor.fromRgb(92,22,127),OxyColor.fromRgb(93,23,127),OxyColor.fromRgb(95,24,127),OxyColor.fromRgb(96,24,128),OxyColor.fromRgb(98,25,128),OxyColor.fromRgb(100,26,128),OxyColor.fromRgb(101,26,128),OxyColor.fromRgb(103,27,128),OxyColor.fromRgb(104,28,129),OxyColor.fromRgb(106,28,129),OxyColor.fromRgb(107,29,129),OxyColor.fromRgb(109,29,129),OxyColor.fromRgb(110,30,129),OxyColor.fromRgb(112,31,129),OxyColor.fromRgb(114,31,129),OxyColor.fromRgb(115,32,129),OxyColor.fromRgb(117,33,129),OxyColor.fromRgb(118,33,129),OxyColor.fromRgb(120,34,129),OxyColor.fromRgb(121,34,130),OxyColor.fromRgb(123,35,130),OxyColor.fromRgb(124,35,130),OxyColor.fromRgb(126,36,130),OxyColor.fromRgb(128,37,130),OxyColor.fromRgb(129,37,129),OxyColor.fromRgb(131,38,129),OxyColor.fromRgb(132,38,129),OxyColor.fromRgb(134,39,129),OxyColor.fromRgb(136,39,129),OxyColor.fromRgb(137,40,129),OxyColor.fromRgb(139,41,129),OxyColor.fromRgb(140,41,129),OxyColor.fromRgb(142,42,129),OxyColor.fromRgb(144,42,129),OxyColor.fromRgb(145,43,129),OxyColor.fromRgb(147,43,128),OxyColor.fromRgb(148,44,128),OxyColor.fromRgb(150,44,128),OxyColor.fromRgb(152,45,128),OxyColor.fromRgb(153,45,128),OxyColor.fromRgb(155,46,127),OxyColor.fromRgb(156,46,127),OxyColor.fromRgb(158,47,127),OxyColor.fromRgb(160,47,127),OxyColor.fromRgb(161,48,126),OxyColor.fromRgb(163,48,126),OxyColor.fromRgb(165,49,126),OxyColor.fromRgb(166,49,125),OxyColor.fromRgb(168,50,125),OxyColor.fromRgb(170,51,125),OxyColor.fromRgb(171,51,124),OxyColor.fromRgb(173,52,124),OxyColor.fromRgb(174,52,123),OxyColor.fromRgb(176,53,123),OxyColor.fromRgb(178,53,123),OxyColor.fromRgb(179,54,122),OxyColor.fromRgb(181,54,122),OxyColor.fromRgb(183,55,121),OxyColor.fromRgb(184,55,121),OxyColor.fromRgb(186,56,120),OxyColor.fromRgb(188,57,120),OxyColor.fromRgb(189,57,119),OxyColor.fromRgb(191,58,119),OxyColor.fromRgb(192,58,118),OxyColor.fromRgb(194,59,117),OxyColor.fromRgb(196,60,117),OxyColor.fromRgb(197,60,116),OxyColor.fromRgb(199,61,115),OxyColor.fromRgb(200,62,115),OxyColor.fromRgb(202,62,114),OxyColor.fromRgb(204,63,113),OxyColor.fromRgb(205,64,113),OxyColor.fromRgb(207,64,112),OxyColor.fromRgb(208,65,111),OxyColor.fromRgb(210,66,111),OxyColor.fromRgb(211,67,110),OxyColor.fromRgb(213,68,109),OxyColor.fromRgb(214,69,108),OxyColor.fromRgb(216,69,108),OxyColor.fromRgb(217,70,107),OxyColor.fromRgb(219,71,106),OxyColor.fromRgb(220,72,105),OxyColor.fromRgb(222,73,104),OxyColor.fromRgb(223,74,104),OxyColor.fromRgb(224,76,103),OxyColor.fromRgb(226,77,102),OxyColor.fromRgb(227,78,101),OxyColor.fromRgb(228,79,100),OxyColor.fromRgb(229,80,100),OxyColor.fromRgb(231,82,99),OxyColor.fromRgb(232,83,98),OxyColor.fromRgb(233,84,98),OxyColor.fromRgb(234,86,97),OxyColor.fromRgb(235,87,96),OxyColor.fromRgb(236,88,96),OxyColor.fromRgb(237,90,95),OxyColor.fromRgb(238,91,94),OxyColor.fromRgb(239,93,94),OxyColor.fromRgb(240,95,94),OxyColor.fromRgb(241,96,93),OxyColor.fromRgb(242,98,93),OxyColor.fromRgb(242,100,92),OxyColor.fromRgb(243,101,92),OxyColor.fromRgb(244,103,92),OxyColor.fromRgb(244,105,92),OxyColor.fromRgb(245,107,92),OxyColor.fromRgb(246,108,92),OxyColor.fromRgb(246,110,92),OxyColor.fromRgb(247,112,92),OxyColor.fromRgb(247,114,92),OxyColor.fromRgb(248,116,92),OxyColor.fromRgb(248,118,92),OxyColor.fromRgb(249,120,93),OxyColor.fromRgb(249,121,93),OxyColor.fromRgb(249,123,93),OxyColor.fromRgb(250,125,94),OxyColor.fromRgb(250,127,94),OxyColor.fromRgb(250,129,95),OxyColor.fromRgb(251,131,95),OxyColor.fromRgb(251,133,96),OxyColor.fromRgb(251,135,97),OxyColor.fromRgb(252,137,97),OxyColor.fromRgb(252,138,98),OxyColor.fromRgb(252,140,99),OxyColor.fromRgb(252,142,100),OxyColor.fromRgb(252,144,101),OxyColor.fromRgb(253,146,102),OxyColor.fromRgb(253,148,103),OxyColor.fromRgb(253,150,104),OxyColor.fromRgb(253,152,105),OxyColor.fromRgb(253,154,106),OxyColor.fromRgb(253,155,107),OxyColor.fromRgb(254,157,108),OxyColor.fromRgb(254,159,109),OxyColor.fromRgb(254,161,110),OxyColor.fromRgb(254,163,111),OxyColor.fromRgb(254,165,113),OxyColor.fromRgb(254,167,114),OxyColor.fromRgb(254,169,115),OxyColor.fromRgb(254,170,116),OxyColor.fromRgb(254,172,118),OxyColor.fromRgb(254,174,119),OxyColor.fromRgb(254,176,120),OxyColor.fromRgb(254,178,122),OxyColor.fromRgb(254,180,123),OxyColor.fromRgb(254,182,124),OxyColor.fromRgb(254,183,126),OxyColor.fromRgb(254,185,127),OxyColor.fromRgb(254,187,129),OxyColor.fromRgb(254,189,130),OxyColor.fromRgb(254,191,132),OxyColor.fromRgb(254,193,133),OxyColor.fromRgb(254,194,135),OxyColor.fromRgb(254,196,136),OxyColor.fromRgb(254,198,138),OxyColor.fromRgb(254,200,140),OxyColor.fromRgb(254,202,141),OxyColor.fromRgb(254,204,143),OxyColor.fromRgb(254,205,144),OxyColor.fromRgb(254,207,146),OxyColor.fromRgb(254,209,148),OxyColor.fromRgb(254,211,149),OxyColor.fromRgb(254,213,151),OxyColor.fromRgb(254,215,153),OxyColor.fromRgb(254,216,154),OxyColor.fromRgb(253,218,156),OxyColor.fromRgb(253,220,158),OxyColor.fromRgb(253,222,160),OxyColor.fromRgb(253,224,161),OxyColor.fromRgb(253,226,163),OxyColor.fromRgb(253,227,165),OxyColor.fromRgb(253,229,167),OxyColor.fromRgb(253,231,169),OxyColor.fromRgb(253,233,170),OxyColor.fromRgb(253,235,172),OxyColor.fromRgb(252,236,174),OxyColor.fromRgb(252,238,176),OxyColor.fromRgb(252,240,178),OxyColor.fromRgb(252,242,180),OxyColor.fromRgb(252,244,182),OxyColor.fromRgb(252,246,184),OxyColor.fromRgb(252,247,185),OxyColor.fromRgb(252,249,187),OxyColor.fromRgb(252,251,189),OxyColor.fromRgb(252,253,191)],plasmaColors=[OxyColor.fromRgb(13,8,135),OxyColor.fromRgb(16,7,136),OxyColor.fromRgb(19,7,137),OxyColor.fromRgb(22,7,138),OxyColor.fromRgb(25,6,140),OxyColor.fromRgb(27,6,141),OxyColor.fromRgb(29,6,142),OxyColor.fromRgb(32,6,143),OxyColor.fromRgb(34,6,144),OxyColor.fromRgb(36,6,145),OxyColor.fromRgb(38,5,145),OxyColor.fromRgb(40,5,146),OxyColor.fromRgb(42,5,147),OxyColor.fromRgb(44,5,148),OxyColor.fromRgb(46,5,149),OxyColor.fromRgb(47,5,150),OxyColor.fromRgb(49,5,151),OxyColor.fromRgb(51,5,151),OxyColor.fromRgb(53,4,152),OxyColor.fromRgb(55,4,153),OxyColor.fromRgb(56,4,154),OxyColor.fromRgb(58,4,154),OxyColor.fromRgb(60,4,155),OxyColor.fromRgb(62,4,156),OxyColor.fromRgb(63,4,156),OxyColor.fromRgb(65,4,157),OxyColor.fromRgb(67,3,158),OxyColor.fromRgb(68,3,158),OxyColor.fromRgb(70,3,159),OxyColor.fromRgb(72,3,159),OxyColor.fromRgb(73,3,160),OxyColor.fromRgb(75,3,161),OxyColor.fromRgb(76,2,161),OxyColor.fromRgb(78,2,162),OxyColor.fromRgb(80,2,162),OxyColor.fromRgb(81,2,163),OxyColor.fromRgb(83,2,163),OxyColor.fromRgb(85,2,164),OxyColor.fromRgb(86,1,164),OxyColor.fromRgb(88,1,164),OxyColor.fromRgb(89,1,165),OxyColor.fromRgb(91,1,165),OxyColor.fromRgb(92,1,166),OxyColor.fromRgb(94,1,166),OxyColor.fromRgb(96,1,166),OxyColor.fromRgb(97,0,167),OxyColor.fromRgb(99,0,167),OxyColor.fromRgb(100,0,167),OxyColor.fromRgb(102,0,167),OxyColor.fromRgb(103,0,168),OxyColor.fromRgb(105,0,168),OxyColor.fromRgb(106,0,168),OxyColor.fromRgb(108,0,168),OxyColor.fromRgb(110,0,168),OxyColor.fromRgb(111,0,168),OxyColor.fromRgb(113,0,168),OxyColor.fromRgb(114,1,168),OxyColor.fromRgb(116,1,168),OxyColor.fromRgb(117,1,168),OxyColor.fromRgb(119,1,168),OxyColor.fromRgb(120,1,168),OxyColor.fromRgb(122,2,168),OxyColor.fromRgb(123,2,168),OxyColor.fromRgb(125,3,168),OxyColor.fromRgb(126,3,168),OxyColor.fromRgb(128,4,168),OxyColor.fromRgb(129,4,167),OxyColor.fromRgb(131,5,167),OxyColor.fromRgb(132,5,167),OxyColor.fromRgb(134,6,166),OxyColor.fromRgb(135,7,166),OxyColor.fromRgb(136,8,166),OxyColor.fromRgb(138,9,165),OxyColor.fromRgb(139,10,165),OxyColor.fromRgb(141,11,165),OxyColor.fromRgb(142,12,164),OxyColor.fromRgb(143,13,164),OxyColor.fromRgb(145,14,163),OxyColor.fromRgb(146,15,163),OxyColor.fromRgb(148,16,162),OxyColor.fromRgb(149,17,161),OxyColor.fromRgb(150,19,161),OxyColor.fromRgb(152,20,160),OxyColor.fromRgb(153,21,159),OxyColor.fromRgb(154,22,159),OxyColor.fromRgb(156,23,158),OxyColor.fromRgb(157,24,157),OxyColor.fromRgb(158,25,157),OxyColor.fromRgb(160,26,156),OxyColor.fromRgb(161,27,155),OxyColor.fromRgb(162,29,154),OxyColor.fromRgb(163,30,154),OxyColor.fromRgb(165,31,153),OxyColor.fromRgb(166,32,152),OxyColor.fromRgb(167,33,151),OxyColor.fromRgb(168,34,150),OxyColor.fromRgb(170,35,149),OxyColor.fromRgb(171,36,148),OxyColor.fromRgb(172,38,148),OxyColor.fromRgb(173,39,147),OxyColor.fromRgb(174,40,146),OxyColor.fromRgb(176,41,145),OxyColor.fromRgb(177,42,144),OxyColor.fromRgb(178,43,143),OxyColor.fromRgb(179,44,142),OxyColor.fromRgb(180,46,141),OxyColor.fromRgb(181,47,140),OxyColor.fromRgb(182,48,139),OxyColor.fromRgb(183,49,138),OxyColor.fromRgb(184,50,137),OxyColor.fromRgb(186,51,136),OxyColor.fromRgb(187,52,136),OxyColor.fromRgb(188,53,135),OxyColor.fromRgb(189,55,134),OxyColor.fromRgb(190,56,133),OxyColor.fromRgb(191,57,132),OxyColor.fromRgb(192,58,131),OxyColor.fromRgb(193,59,130),OxyColor.fromRgb(194,60,129),OxyColor.fromRgb(195,61,128),OxyColor.fromRgb(196,62,127),OxyColor.fromRgb(197,64,126),OxyColor.fromRgb(198,65,125),OxyColor.fromRgb(199,66,124),OxyColor.fromRgb(200,67,123),OxyColor.fromRgb(201,68,122),OxyColor.fromRgb(202,69,122),OxyColor.fromRgb(203,70,121),OxyColor.fromRgb(204,71,120),OxyColor.fromRgb(204,73,119),OxyColor.fromRgb(205,74,118),OxyColor.fromRgb(206,75,117),OxyColor.fromRgb(207,76,116),OxyColor.fromRgb(208,77,115),OxyColor.fromRgb(209,78,114),OxyColor.fromRgb(210,79,113),OxyColor.fromRgb(211,81,113),OxyColor.fromRgb(212,82,112),OxyColor.fromRgb(213,83,111),OxyColor.fromRgb(213,84,110),OxyColor.fromRgb(214,85,109),OxyColor.fromRgb(215,86,108),OxyColor.fromRgb(216,87,107),OxyColor.fromRgb(217,88,106),OxyColor.fromRgb(218,90,106),OxyColor.fromRgb(218,91,105),OxyColor.fromRgb(219,92,104),OxyColor.fromRgb(220,93,103),OxyColor.fromRgb(221,94,102),OxyColor.fromRgb(222,95,101),OxyColor.fromRgb(222,97,100),OxyColor.fromRgb(223,98,99),OxyColor.fromRgb(224,99,99),OxyColor.fromRgb(225,100,98),OxyColor.fromRgb(226,101,97),OxyColor.fromRgb(226,102,96),OxyColor.fromRgb(227,104,95),OxyColor.fromRgb(228,105,94),OxyColor.fromRgb(229,106,93),OxyColor.fromRgb(229,107,93),OxyColor.fromRgb(230,108,92),OxyColor.fromRgb(231,110,91),OxyColor.fromRgb(231,111,90),OxyColor.fromRgb(232,112,89),OxyColor.fromRgb(233,113,88),OxyColor.fromRgb(233,114,87),OxyColor.fromRgb(234,116,87),OxyColor.fromRgb(235,117,86),OxyColor.fromRgb(235,118,85),OxyColor.fromRgb(236,119,84),OxyColor.fromRgb(237,121,83),OxyColor.fromRgb(237,122,82),OxyColor.fromRgb(238,123,81),OxyColor.fromRgb(239,124,81),OxyColor.fromRgb(239,126,80),OxyColor.fromRgb(240,127,79),OxyColor.fromRgb(240,128,78),OxyColor.fromRgb(241,129,77),OxyColor.fromRgb(241,131,76),OxyColor.fromRgb(242,132,75),OxyColor.fromRgb(243,133,75),OxyColor.fromRgb(243,135,74),OxyColor.fromRgb(244,136,73),OxyColor.fromRgb(244,137,72),OxyColor.fromRgb(245,139,71),OxyColor.fromRgb(245,140,70),OxyColor.fromRgb(246,141,69),OxyColor.fromRgb(246,143,68),OxyColor.fromRgb(247,144,68),OxyColor.fromRgb(247,145,67),OxyColor.fromRgb(247,147,66),OxyColor.fromRgb(248,148,65),OxyColor.fromRgb(248,149,64),OxyColor.fromRgb(249,151,63),OxyColor.fromRgb(249,152,62),OxyColor.fromRgb(249,154,62),OxyColor.fromRgb(250,155,61),OxyColor.fromRgb(250,156,60),OxyColor.fromRgb(250,158,59),OxyColor.fromRgb(251,159,58),OxyColor.fromRgb(251,161,57),OxyColor.fromRgb(251,162,56),OxyColor.fromRgb(252,163,56),OxyColor.fromRgb(252,165,55),OxyColor.fromRgb(252,166,54),OxyColor.fromRgb(252,168,53),OxyColor.fromRgb(252,169,52),OxyColor.fromRgb(253,171,51),OxyColor.fromRgb(253,172,51),OxyColor.fromRgb(253,174,50),OxyColor.fromRgb(253,175,49),OxyColor.fromRgb(253,177,48),OxyColor.fromRgb(253,178,47),OxyColor.fromRgb(253,180,47),OxyColor.fromRgb(253,181,46),OxyColor.fromRgb(254,183,45),OxyColor.fromRgb(254,184,44),OxyColor.fromRgb(254,186,44),OxyColor.fromRgb(254,187,43),OxyColor.fromRgb(254,189,42),OxyColor.fromRgb(254,190,42),OxyColor.fromRgb(254,192,41),OxyColor.fromRgb(253,194,41),OxyColor.fromRgb(253,195,40),OxyColor.fromRgb(253,197,39),OxyColor.fromRgb(253,198,39),OxyColor.fromRgb(253,200,39),OxyColor.fromRgb(253,202,38),OxyColor.fromRgb(253,203,38),OxyColor.fromRgb(252,205,37),OxyColor.fromRgb(252,206,37),OxyColor.fromRgb(252,208,37),OxyColor.fromRgb(252,210,37),OxyColor.fromRgb(251,211,36),OxyColor.fromRgb(251,213,36),OxyColor.fromRgb(251,215,36),OxyColor.fromRgb(250,216,36),OxyColor.fromRgb(250,218,36),OxyColor.fromRgb(249,220,36),OxyColor.fromRgb(249,221,37),OxyColor.fromRgb(248,223,37),OxyColor.fromRgb(248,225,37),OxyColor.fromRgb(247,226,37),OxyColor.fromRgb(247,228,37),OxyColor.fromRgb(246,230,38),OxyColor.fromRgb(246,232,38),OxyColor.fromRgb(245,233,38),OxyColor.fromRgb(245,235,39),OxyColor.fromRgb(244,237,39),OxyColor.fromRgb(243,238,39),OxyColor.fromRgb(243,240,39),OxyColor.fromRgb(242,242,39),OxyColor.fromRgb(241,244,38),OxyColor.fromRgb(241,245,37),OxyColor.fromRgb(240,247,36),OxyColor.fromRgb(240,249,33)],viridisColors=[OxyColor.fromRgb(68,1,84),OxyColor.fromRgb(68,2,86),OxyColor.fromRgb(69,4,87),OxyColor.fromRgb(69,5,89),OxyColor.fromRgb(70,7,90),OxyColor.fromRgb(70,8,92),OxyColor.fromRgb(70,10,93),OxyColor.fromRgb(70,11,94),OxyColor.fromRgb(71,13,96),OxyColor.fromRgb(71,14,97),OxyColor.fromRgb(71,16,99),OxyColor.fromRgb(71,17,100),OxyColor.fromRgb(71,19,101),OxyColor.fromRgb(72,20,103),OxyColor.fromRgb(72,22,104),OxyColor.fromRgb(72,23,105),OxyColor.fromRgb(72,24,106),OxyColor.fromRgb(72,26,108),OxyColor.fromRgb(72,27,109),OxyColor.fromRgb(72,28,110),OxyColor.fromRgb(72,29,111),OxyColor.fromRgb(72,31,112),OxyColor.fromRgb(72,32,113),OxyColor.fromRgb(72,33,115),OxyColor.fromRgb(72,35,116),OxyColor.fromRgb(72,36,117),OxyColor.fromRgb(72,37,118),OxyColor.fromRgb(72,38,119),OxyColor.fromRgb(72,40,120),OxyColor.fromRgb(72,41,121),OxyColor.fromRgb(71,42,122),OxyColor.fromRgb(71,44,122),OxyColor.fromRgb(71,45,123),OxyColor.fromRgb(71,46,124),OxyColor.fromRgb(71,47,125),OxyColor.fromRgb(70,48,126),OxyColor.fromRgb(70,50,126),OxyColor.fromRgb(70,51,127),OxyColor.fromRgb(70,52,128),OxyColor.fromRgb(69,53,129),OxyColor.fromRgb(69,55,129),OxyColor.fromRgb(69,56,130),OxyColor.fromRgb(68,57,131),OxyColor.fromRgb(68,58,131),OxyColor.fromRgb(68,59,132),OxyColor.fromRgb(67,61,132),OxyColor.fromRgb(67,62,133),OxyColor.fromRgb(66,63,133),OxyColor.fromRgb(66,64,134),OxyColor.fromRgb(66,65,134),OxyColor.fromRgb(65,66,135),OxyColor.fromRgb(65,68,135),OxyColor.fromRgb(64,69,136),OxyColor.fromRgb(64,70,136),OxyColor.fromRgb(63,71,136),OxyColor.fromRgb(63,72,137),OxyColor.fromRgb(62,73,137),OxyColor.fromRgb(62,74,137),OxyColor.fromRgb(62,76,138),OxyColor.fromRgb(61,77,138),OxyColor.fromRgb(61,78,138),OxyColor.fromRgb(60,79,138),OxyColor.fromRgb(60,80,139),OxyColor.fromRgb(59,81,139),OxyColor.fromRgb(59,82,139),OxyColor.fromRgb(58,83,139),OxyColor.fromRgb(58,84,140),OxyColor.fromRgb(57,85,140),OxyColor.fromRgb(57,86,140),OxyColor.fromRgb(56,88,140),OxyColor.fromRgb(56,89,140),OxyColor.fromRgb(55,90,140),OxyColor.fromRgb(55,91,141),OxyColor.fromRgb(54,92,141),OxyColor.fromRgb(54,93,141),OxyColor.fromRgb(53,94,141),OxyColor.fromRgb(53,95,141),OxyColor.fromRgb(52,96,141),OxyColor.fromRgb(52,97,141),OxyColor.fromRgb(51,98,141),OxyColor.fromRgb(51,99,141),OxyColor.fromRgb(50,100,142),OxyColor.fromRgb(50,101,142),OxyColor.fromRgb(49,102,142),OxyColor.fromRgb(49,103,142),OxyColor.fromRgb(49,104,142),OxyColor.fromRgb(48,105,142),OxyColor.fromRgb(48,106,142),OxyColor.fromRgb(47,107,142),OxyColor.fromRgb(47,108,142),OxyColor.fromRgb(46,109,142),OxyColor.fromRgb(46,110,142),OxyColor.fromRgb(46,111,142),OxyColor.fromRgb(45,112,142),OxyColor.fromRgb(45,113,142),OxyColor.fromRgb(44,113,142),OxyColor.fromRgb(44,114,142),OxyColor.fromRgb(44,115,142),OxyColor.fromRgb(43,116,142),OxyColor.fromRgb(43,117,142),OxyColor.fromRgb(42,118,142),OxyColor.fromRgb(42,119,142),OxyColor.fromRgb(42,120,142),OxyColor.fromRgb(41,121,142),OxyColor.fromRgb(41,122,142),OxyColor.fromRgb(41,123,142),OxyColor.fromRgb(40,124,142),OxyColor.fromRgb(40,125,142),OxyColor.fromRgb(39,126,142),OxyColor.fromRgb(39,127,142),OxyColor.fromRgb(39,128,142),OxyColor.fromRgb(38,129,142),OxyColor.fromRgb(38,130,142),OxyColor.fromRgb(38,130,142),OxyColor.fromRgb(37,131,142),OxyColor.fromRgb(37,132,142),OxyColor.fromRgb(37,133,142),OxyColor.fromRgb(36,134,142),OxyColor.fromRgb(36,135,142),OxyColor.fromRgb(35,136,142),OxyColor.fromRgb(35,137,142),OxyColor.fromRgb(35,138,141),OxyColor.fromRgb(34,139,141),OxyColor.fromRgb(34,140,141),OxyColor.fromRgb(34,141,141),OxyColor.fromRgb(33,142,141),OxyColor.fromRgb(33,143,141),OxyColor.fromRgb(33,144,141),OxyColor.fromRgb(33,145,140),OxyColor.fromRgb(32,146,140),OxyColor.fromRgb(32,146,140),OxyColor.fromRgb(32,147,140),OxyColor.fromRgb(31,148,140),OxyColor.fromRgb(31,149,139),OxyColor.fromRgb(31,150,139),OxyColor.fromRgb(31,151,139),OxyColor.fromRgb(31,152,139),OxyColor.fromRgb(31,153,138),OxyColor.fromRgb(31,154,138),OxyColor.fromRgb(30,155,138),OxyColor.fromRgb(30,156,137),OxyColor.fromRgb(30,157,137),OxyColor.fromRgb(31,158,137),OxyColor.fromRgb(31,159,136),OxyColor.fromRgb(31,160,136),OxyColor.fromRgb(31,161,136),OxyColor.fromRgb(31,161,135),OxyColor.fromRgb(31,162,135),OxyColor.fromRgb(32,163,134),OxyColor.fromRgb(32,164,134),OxyColor.fromRgb(33,165,133),OxyColor.fromRgb(33,166,133),OxyColor.fromRgb(34,167,133),OxyColor.fromRgb(34,168,132),OxyColor.fromRgb(35,169,131),OxyColor.fromRgb(36,170,131),OxyColor.fromRgb(37,171,130),OxyColor.fromRgb(37,172,130),OxyColor.fromRgb(38,173,129),OxyColor.fromRgb(39,173,129),OxyColor.fromRgb(40,174,128),OxyColor.fromRgb(41,175,127),OxyColor.fromRgb(42,176,127),OxyColor.fromRgb(44,177,126),OxyColor.fromRgb(45,178,125),OxyColor.fromRgb(46,179,124),OxyColor.fromRgb(47,180,124),OxyColor.fromRgb(49,181,123),OxyColor.fromRgb(50,182,122),OxyColor.fromRgb(52,182,121),OxyColor.fromRgb(53,183,121),OxyColor.fromRgb(55,184,120),OxyColor.fromRgb(56,185,119),OxyColor.fromRgb(58,186,118),OxyColor.fromRgb(59,187,117),OxyColor.fromRgb(61,188,116),OxyColor.fromRgb(63,188,115),OxyColor.fromRgb(64,189,114),OxyColor.fromRgb(66,190,113),OxyColor.fromRgb(68,191,112),OxyColor.fromRgb(70,192,111),OxyColor.fromRgb(72,193,110),OxyColor.fromRgb(74,193,109),OxyColor.fromRgb(76,194,108),OxyColor.fromRgb(78,195,107),OxyColor.fromRgb(80,196,106),OxyColor.fromRgb(82,197,105),OxyColor.fromRgb(84,197,104),OxyColor.fromRgb(86,198,103),OxyColor.fromRgb(88,199,101),OxyColor.fromRgb(90,200,100),OxyColor.fromRgb(92,200,99),OxyColor.fromRgb(94,201,98),OxyColor.fromRgb(96,202,96),OxyColor.fromRgb(99,203,95),OxyColor.fromRgb(101,203,94),OxyColor.fromRgb(103,204,92),OxyColor.fromRgb(105,205,91),OxyColor.fromRgb(108,205,90),OxyColor.fromRgb(110,206,88),OxyColor.fromRgb(112,207,87),OxyColor.fromRgb(115,208,86),OxyColor.fromRgb(117,208,84),OxyColor.fromRgb(119,209,83),OxyColor.fromRgb(122,209,81),OxyColor.fromRgb(124,210,80),OxyColor.fromRgb(127,211,78),OxyColor.fromRgb(129,211,77),OxyColor.fromRgb(132,212,75),OxyColor.fromRgb(134,213,73),OxyColor.fromRgb(137,213,72),OxyColor.fromRgb(139,214,70),OxyColor.fromRgb(142,214,69),OxyColor.fromRgb(144,215,67),OxyColor.fromRgb(147,215,65),OxyColor.fromRgb(149,216,64),OxyColor.fromRgb(152,216,62),OxyColor.fromRgb(155,217,60),OxyColor.fromRgb(157,217,59),OxyColor.fromRgb(160,218,57),OxyColor.fromRgb(162,218,55),OxyColor.fromRgb(165,219,54),OxyColor.fromRgb(168,219,52),OxyColor.fromRgb(170,220,50),OxyColor.fromRgb(173,220,48),OxyColor.fromRgb(176,221,47),OxyColor.fromRgb(178,221,45),OxyColor.fromRgb(181,222,43),OxyColor.fromRgb(184,222,41),OxyColor.fromRgb(186,222,40),OxyColor.fromRgb(189,223,38),OxyColor.fromRgb(192,223,37),OxyColor.fromRgb(194,223,35),OxyColor.fromRgb(197,224,33),OxyColor.fromRgb(200,224,32),OxyColor.fromRgb(202,225,31),OxyColor.fromRgb(205,225,29),OxyColor.fromRgb(208,225,28),OxyColor.fromRgb(210,226,27),OxyColor.fromRgb(213,226,26),OxyColor.fromRgb(216,226,25),OxyColor.fromRgb(218,227,25),OxyColor.fromRgb(221,227,24),OxyColor.fromRgb(223,227,24),OxyColor.fromRgb(226,228,24),OxyColor.fromRgb(229,228,25),OxyColor.fromRgb(231,228,25),OxyColor.fromRgb(234,229,26),OxyColor.fromRgb(236,229,27),OxyColor.fromRgb(239,229,28),OxyColor.fromRgb(241,229,29),OxyColor.fromRgb(244,230,30),OxyColor.fromRgb(246,230,32),OxyColor.fromRgb(248,230,33),OxyColor.fromRgb(251,231,35),OxyColor.fromRgb(253,231,37)];let Element$1=class{constructor(s){D(this,"parent"),D(this,"keyDown"),D(this,"mouseDown"),D(this,"mouseMove"),D(this,"mouseUp"),D(this,"touchStarted"),D(this,"touchDelta"),D(this,"touchCompleted"),D(this,"selection"),D(this,"selectionChanged"),D(this,"selectable",!0),D(this,"selectionMode",SelectionMode.All)}hitTest(s){return this.hitTestOverride(s)}hitTestOverride(s){}onMouseDown(s){this.mouseDown&&this.mouseDown(this,s)}onMouseMove(s){this.mouseMove&&this.mouseMove(this,s)}onKeyDown(s){this.keyDown&&this.keyDown(this,s)}onMouseUp(s){this.mouseUp&&this.mouseUp(this,s)}onTouchStarted(s){this.touchStarted&&this.touchStarted(this,s)}onTouchDelta(s){this.touchDelta&&this.touchDelta(this,s)}onTouchCompleted(s){this.touchCompleted&&this.touchCompleted(this,s)}get actualSelectedColor(){return this.parent?this.parent.selectionColor.getActualColor(Model.DefaultSelectionColor):Model.DefaultSelectionColor}isSelected(){return!!this.selection}getSelectedItems(){return this.ensureSelection(),this.selection.getSelectedItems()}clearSelection(){this.selection=void 0,this.onSelectionChanged()}unselect(){this.selection=void 0,this.onSelectionChanged()}isItemSelected(s){return this.selection?s===-1?this.selection.isEverythingSelected():this.selection.isItemSelected(s):!1}select(){this.selection=Selection.Everything,this.onSelectionChanged()}selectItem(s){if(this.selectionMode===SelectionMode.All)throw new Error("Use the select() method when using SelectionMode.All");this.ensureSelection(),this.selectionMode===SelectionMode.Single&&this.selection.clear(),this.selection.select(s),this.onSelectionChanged()}unselectItem(s){if(this.selectionMode===SelectionMode.All)throw new Error("Use the unselect() method when using SelectionMode.All");this.ensureSelection(),this.selection.unselect(s),this.onSelectionChanged()}getSelectableColor(s,d=-1){return s.isUndefined()?OxyColors.Undefined:this.isItemSelected(d)?this.actualSelectedColor:s}getSelectableFillColor(s,d=-1){return this.getSelectableColor(s,d)}ensureSelection(){this.selection=this.selection||new Selection}onSelectionChanged(s){this.selectionChanged&&this.selectionChanged(this,s)}};class PlotElement extends Element$1{constructor(s){super(s),D(this,"font"),D(this,"fontSize",NaN),D(this,"fontWeight",FontWeights.Normal),D(this,"tag"),D(this,"textColor"),D(this,"edgeRenderingMode"),D(this,"toolTip"),D(this,"_plotElementId"),this.fontSize=NaN,this.fontWeight=FontWeights.Normal,this.textColor=OxyColors.Automatic,this.edgeRenderingMode=EdgeRenderingMode.Automatic}get plotModel(){return this.parent}get actualFont(){return this.font||this.plotModel.defaultFont}get actualFontSize(){return isNaN(this.fontSize)?this.plotModel.defaultFontSize:this.fontSize}get actualFontWeight(){return this.fontWeight}get actualTextColor(){return this.textColor.getActualColor(this.plotModel.textColor)}getClippingRect(){return OxyRect.Everything}getElementHashCode(){return isUndef(this._plotElementId)&&(plotElementId++,this._plotElementId=plotElementId),this._plotElementId}}let plotElementId=0;var AnnotationLayer=(a=>(a[a.BelowAxes=0]="BelowAxes",a[a.BelowSeries=1]="BelowSeries",a[a.AboveSeries=2]="AboveSeries",a))(AnnotationLayer||{}),AnnotationTextOrientation=(a=>(a[a.Horizontal=0]="Horizontal",a[a.Vertical=1]="Vertical",a[a.AlongLine=2]="AlongLine",a))(AnnotationTextOrientation||{});class Annotation extends PlotElement{constructor(s){super(),D(this,"layer"),D(this,"_xAxis"),D(this,"xAxisKey"),D(this,"_yAxis"),D(this,"clipByXAxis"),D(this,"clipByYAxis"),D(this,"yAxisKey"),this.layer=AnnotationLayer.AboveSeries,this.clipByXAxis=!0,this.clipByYAxis=!0,s&&(s.xAxis&&(this._xAxis=s.xAxis),s.yAxis&&(this._yAxis=s.yAxis))}get xAxis(){return this._xAxis}get yAxis(){return this._yAxis}ensureAxes(){this._xAxis=this.xAxisKey?this.plotModel.getAxis(this.xAxisKey):this.plotModel.defaultXAxis,this._yAxis=this.yAxisKey?this.plotModel.getAxis(this.yAxisKey):this.plotModel.defaultYAxis}getClippingRect(){const s=this.plotModel.plotArea,d=PlotElementUtilities.getClippingRect(this);let m=0,f=Number.POSITIVE_INFINITY,g=0,x=Number.POSITIVE_INFINITY;this.clipByXAxis&&(m=d.topLeft.x,f=d.bottomRight.x),this.clipByYAxis&&(g=d.topLeft.y,x=d.bottomRight.y);const w=new ScreenPoint(m,g),C=new ScreenPoint(f,x),A=OxyRect.fromScreenPoints(w,C);return s.clip(A)}transform(s){return PlotElementUtilities.transform(this,s)}inverseTransform(s){return PlotElementUtilities.inverseTransform(this,s)}}class TransposableAnnotation extends Annotation{constructor(s){super(s),setTransposablePlotElement(this)}getClippingRect(){const s=this.plotModel.plotArea,d=PlotElementUtilities.getClippingRect(this);let m=0,f=Number.POSITIVE_INFINITY,g=0,x=Number.POSITIVE_INFINITY;this.clipByXAxis&&(m=PlotElementExtensions.orientate(this,d.topLeft).x,f=PlotElementExtensions.orientate(this,d.bottomRight).x),this.clipByYAxis&&(g=PlotElementExtensions.orientate(this,d.topLeft).y,x=PlotElementExtensions.orientate(this,d.bottomRight).y);const w=PlotElementExtensions.orientate(this,new ScreenPoint(m,g)),C=PlotElementExtensions.orientate(this,new ScreenPoint(f,x)),A=OxyRect.fromScreenPoints(w,C);return s.clip(A)}transform(s){return PlotElementUtilities.transformOrientated(this,s)}inverseTransform(s){return PlotElementUtilities.inverseTransformOrientated(this,s)}}class TextualAnnotation extends TransposableAnnotation{constructor(s){super(s),D(this,"text"),D(this,"textPosition"),D(this,"textHorizontalAlignment"),D(this,"textVerticalAlignment"),D(this,"textRotation"),this.textHorizontalAlignment=HorizontalAlignment.Center,this.textVerticalAlignment=VerticalAlignment.Middle,this.textPosition=DataPoint.Undefined,this.textRotation=0}getActualTextPosition(s){return this.textPosition.isDefined()?this.transform(this.textPosition):s()}getActualTextAlignment(){return[this.textHorizontalAlignment,this.textVerticalAlignment]}}class TextAnnotation extends TextualAnnotation{constructor(s){super(s),D(this,"actualBounds"),D(this,"background"),D(this,"offset",ScreenVector.Zero),D(this,"padding"),D(this,"stroke"),D(this,"strokeThickness"),this.stroke=OxyColors.Black,this.background=OxyColors.Undefined,this.strokeThickness=1,this.textVerticalAlignment=VerticalAlignment.Bottom,this.padding=new OxyThickness(4),s&&Object.assign(this,removeUndef(s))}async render(s){if(!this.text)throw new Error("text must be non-undefined before rendering.");const d=this.transform(this.textPosition).plus(PlotElementExtensions.orientateVector(this,this.offset)),m=s.measureText(this.text,this.actualFont,this.actualFontSize,this.actualFontWeight),[f,g]=this.getActualTextAlignment();if(this.actualBounds=TextAnnotation.getTextBounds(d,m,this.padding,this.textRotation,f,g),this.textRotation%90===0){const x=OxyRect.fromScreenPoints(this.actualBounds[0],this.actualBounds[2]);await s.drawRectangle(x,this.background,this.stroke,this.strokeThickness,this.edgeRenderingMode)}else await s.drawPolygon(this.actualBounds,this.background,this.stroke,this.strokeThickness,this.edgeRenderingMode);await MathRenderingExtensions.drawMathText(s,d,this.text,this.getSelectableFillColor(this.actualTextColor),this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,f,g)}hitTestOverride(s){if(this.actualBounds)return ScreenPointHelper.isPointInPolygon(s.point,this.actualBounds)?{element:this,nearestHitPoint:s.point}:void 0}static getTextBounds(s,d,m,f,g,x){let w,C,A,_;switch(g){case HorizontalAlignment.Center:w=-d.width*.5,C=-w;break;case HorizontalAlignment.Right:w=-d.width,C=0;break;default:w=0,C=d.width;break}switch(x){case VerticalAlignment.Middle:A=-d.height*.5,_=-A;break;case VerticalAlignment.Bottom:A=-d.height,_=0;break;default:A=0,_=d.height;break}const M=Math.cos(f/180*Math.PI),P=Math.sin(f/180*Math.PI),E=new ScreenVector(M,P),R=new ScreenVector(-P,M),B=new Array(4);return B[0]=s.plus(E.times(w-m.left)).plus(R.times(A-m.top)),B[1]=s.plus(E.times(C+m.right)).plus(R.times(A-m.top)),B[2]=s.plus(E.times(C+m.right)).plus(R.times(_+m.bottom)),B[3]=s.plus(E.times(w-m.left)).plus(R.times(_+m.bottom)),B}}class PathAnnotation extends TextualAnnotation{constructor(s){super(s),D(this,"screenPoints"),D(this,"color"),D(this,"lineJoin"),D(this,"lineStyle"),D(this,"maximumX"),D(this,"maximumY"),D(this,"minimumX"),D(this,"minimumY"),D(this,"strokeThickness"),D(this,"textMargin"),D(this,"textPadding",0),D(this,"borderPadding",OxyThickness.Zero),D(this,"borderBackground",OxyColors.Undefined),D(this,"borderStroke",OxyColors.Undefined),D(this,"borderStrokeThickness",0),D(this,"textOrientation"),D(this,"textLinePosition"),D(this,"minimumSegmentLength"),D(this,"actualMinimumX",NaN),D(this,"actualMinimumY",NaN),D(this,"actualMaximumX",NaN),D(this,"actualMaximumY",NaN),this.minimumX=Number_MIN_VALUE,this.maximumX=Number_MAX_VALUE,this.minimumY=Number_MIN_VALUE,this.maximumY=Number_MAX_VALUE,this.color=OxyColors.Blue,this.strokeThickness=1,this.lineStyle=LineStyle.Dash,this.lineJoin=LineJoin.Miter,this.textLinePosition=1,this.textOrientation=AnnotationTextOrientation.AlongLine,this.textMargin=12,this.textHorizontalAlignment=HorizontalAlignment.Right,this.textVerticalAlignment=VerticalAlignment.Top,this.minimumSegmentLength=2}async render(s){if(this.calculateActualMinimumsMaximums(),this.actualMinimumX>this.actualMaximumX||this.actualMinimumY>this.actualMaximumY)return;this.screenPoints=this.getScreenPoints();const d=[],m=LineStyleHelper.getDashArray(this.lineStyle);this.strokeThickness>0&&this.lineStyle!==LineStyle.None&&await RenderingExtensions.drawReducedLine(s,this.screenPoints,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(this.color),this.strokeThickness,this.edgeRenderingMode,m,this.lineJoin,void 0,E=>d.push(...E));let f=this.textMargin;const[g,x]=this.getActualTextAlignment(),w=PlotElementExtensions.isTransposed(this)?this.yAxis.isReversed?1-this.textLinePosition:this.textLinePosition:this.xAxis.isReversed?1-this.textLinePosition:this.textLinePosition;g===HorizontalAlignment.Center?f=0:f*=w<.5?1:-1;const C=PathAnnotation.getPointAtRelativeDistance(d,w,f);if(!C)return;let{position:A,angle:_}=C;switch(_<-90&&(_+=180),_>=90&&(_-=180),this.textOrientation){case AnnotationTextOrientation.Horizontal:_=0;break;case AnnotationTextOrientation.Vertical:_=-90;break}const M=_/180*Math.PI;let P=1;if(g===HorizontalAlignment.Right&&(P=-1),g===HorizontalAlignment.Center&&(P=0),A=A.plus(new ScreenVector(P*this.textPadding*Math.cos(M),P*this.textPadding*Math.sin(M))),this.text){const E=this.getActualTextPosition(()=>A);this.textPosition.isDefined()&&(_=this.textRotation);const R=s.measureText(this.text,this.actualFont,this.actualFontSize,this.actualFontWeight),B=TextAnnotation.getTextBounds(A,R,this.borderPadding,_,g,x);if(_%90==0){const z=OxyRect.fromScreenPoints(B[0],B[2]);await s.drawRectangle(z,this.borderBackground,this.borderStroke,this.borderStrokeThickness,this.edgeRenderingMode)}else await s.drawPolygon(B,this.borderBackground,this.borderStroke,this.borderStrokeThickness,this.edgeRenderingMode);await s.drawText(E,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,_,g,x)}}hitTestOverride(s){if(!this.screenPoints)return;const d=ScreenPointHelper.findNearestPointOnPolyline(s.point,this.screenPoints);if(s.point.minus(d).length<s.tolerance)return{element:this,nearestHitPoint:d}}calculateActualMinimumsMaximums(){if(!this.xAxis)throw new Error("xAxis is undefined.");if(!this.yAxis)throw new Error("yAxis is undefined.");this.actualMinimumX=Math.max(this.minimumX,this.xAxis.clipMinimum),this.actualMaximumX=Math.min(this.maximumX,this.xAxis.clipMaximum),this.actualMinimumY=Math.max(this.minimumY,this.yAxis.clipMinimum),this.actualMaximumY=Math.min(this.maximumY,this.yAxis.clipMaximum);const s=this.inverseTransform(this.plotModel.plotArea.topLeft),d=this.inverseTransform(this.plotModel.plotArea.bottomRight);this.clipByXAxis||(this.actualMaximumX=Math.max(s.x,d.x),this.actualMinimumX=Math.min(s.x,d.x)),this.clipByYAxis||(this.actualMaximumY=Math.max(s.y,d.y),this.actualMinimumY=Math.min(s.y,d.y))}static getPointAtRelativeDistance(s,d,m){if(!s||s.length===0)return;let f=0;for(let w=1;w<s.length;w++)f+=s[w].minus(s[w-1]).length;const g=f*d+m,x=1e-8;f=0;for(let w=1;w<s.length;w++){const C=s[w].minus(s[w-1]).length;if(g>=f-x&&g<=f+C+x){const A=(g-f)/C,_=s[w].x*A+s[w-1].x*(1-A),M=s[w].y*A+s[w-1].y*(1-A),P=new ScreenPoint(_,M),E=s[w].x-s[w-1].x,R=s[w].y-s[w-1].y,B=Math.atan2(R,E)/Math.PI*180;return{position:P,angle:B}}f+=C}}}var LineAnnotationType=(a=>(a[a.Horizontal=0]="Horizontal",a[a.Vertical=1]="Vertical",a[a.LinearEquation=2]="LinearEquation",a))(LineAnnotationType||{});class LineAnnotation extends PathAnnotation{constructor(s){super(s),D(this,"intercept",0),D(this,"slope",0),D(this,"type"),D(this,"x",0),D(this,"y",0),this.type=2,s&&Object.assign(this,removeUndef(s))}getScreenPoints(){let s,d;switch(this.type){case 0:s=f=>this.y;break;case 1:d=f=>this.x;break;default:s=f=>this.slope*f+this.intercept;break}const m=[];if(this.xAxis instanceof LinearAxis&&this.yAxis instanceof LinearAxis)if(s)m.push(new DataPoint(this.actualMinimumX,s(this.actualMinimumX))),m.push(new DataPoint(this.actualMaximumX,s(this.actualMaximumX)));else if(d)m.push(new DataPoint(d(this.actualMinimumY),this.actualMinimumY)),m.push(new DataPoint(d(this.actualMaximumY),this.actualMaximumY));else throw new Error("fx or fy must be non-undefined.");else if(s){const f=(this.actualMaximumX-this.actualMinimumX)/100;for(let g=0;g<=100;g++){const x=this.actualMinimumX+g*f;m.push(new DataPoint(x,s(x)))}}else if(d){const f=(this.actualMaximumY-this.actualMinimumY)/100;for(let g=0;g<=100;g++){const x=this.actualMinimumY+g*f;m.push(new DataPoint(d(x),x))}}return m.map(f=>this.transform(f))}}class ShapeAnnotation extends TextualAnnotation{constructor(s){super(s),D(this,"fill"),D(this,"stroke"),D(this,"strokeThickness",0),this.stroke=OxyColors.Black,this.fill=OxyColors.LightBlue}}class PointAnnotation extends ShapeAnnotation{constructor(s){super(s),D(this,"screenPosition",ScreenPoint.LeftTop),D(this,"x",0),D(this,"y",0),D(this,"size"),D(this,"textMargin"),D(this,"shape"),D(this,"customOutline"),this.size=4,this.textMargin=2,this.shape=MarkerType.Circle,this.textVerticalAlignment=VerticalAlignment.Top,s&&Object.assign(this,removeUndef(s))}async render(s){if(this.screenPosition=PlotElementExtensions.transform(this,this.x,this.y),await RenderingExtensions.drawMarker(s,this.screenPosition,this.shape,this.customOutline,this.size,this.fill,this.stroke,this.strokeThickness,this.edgeRenderingMode),this.text){const[d,m]=this.getActualTextAlignment(),f=-Number(d)*(this.size+this.textMargin),g=-Number(m)*(this.size+this.textMargin),x=this.screenPosition.plus(new ScreenVector(f,g));await s.drawText(x,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,d,m)}}hitTestOverride(s){if(this.screenPosition.distanceTo(s.point)<this.size)return{element:this,nearestHitPoint:this.screenPosition}}}class FunctionAnnotation extends PathAnnotation{constructor(s){super(s),D(this,"type"),D(this,"equation"),D(this,"resolution"),this.resolution=400,this.type=0,s&&Object.assign(this,removeUndef(s))}getScreenPoints(){let s,d;switch(this.type){case 0:s=this.equation;break;case 1:d=this.equation;break}const m=[];if(s){let f=this.actualMinimumX;const g=(this.actualMaximumX-this.actualMinimumX)/this.resolution;for(;m.push(new DataPoint(f,s(f))),!(f>this.actualMaximumX);)f+=g}else if(d){let f=this.actualMinimumY;const g=(this.actualMaximumY-this.actualMinimumY)/this.resolution;for(;m.push(new DataPoint(d(f),f)),!(f>this.actualMaximumY);)f+=g}return m.map(f=>this.transform(f))}}var FunctionAnnotationType=(a=>(a[a.EquationX=0]="EquationX",a[a.EquationY=1]="EquationY",a))(FunctionAnnotationType||{});class ArrowAnnotation extends TextualAnnotation{constructor(s){super(),D(this,"screenEndPoint",ScreenPoint.LeftTop),D(this,"screenStartPoint",ScreenPoint.LeftTop),D(this,"arrowDirection",ScreenVector.Zero),D(this,"color"),D(this,"endPoint",DataPoint.Zero),D(this,"headLength"),D(this,"headWidth"),D(this,"lineJoin"),D(this,"lineStyle"),D(this,"startPoint",DataPoint.Zero),D(this,"strokeThickness"),D(this,"veeness",0),this.headLength=10,this.headWidth=3,this.color=OxyColors.Blue,this.strokeThickness=2,this.lineStyle=LineStyle.Solid,this.lineJoin=LineJoin.Miter,s&&Object.assign(this,removeUndef(s))}async render(s){this.screenEndPoint=this.transform(this.endPoint),this.arrowDirection.lengthSquared>0?this.screenStartPoint=this.screenEndPoint.minusVector(PlotElementExtensions.orientateVector(this,this.arrowDirection)):this.screenStartPoint=this.transform(this.startPoint);const d=this.screenEndPoint.minus(this.screenStartPoint);d.normalize();const m=new ScreenVector(d.y,-d.x),f=this.screenEndPoint.minusVector(d.times(this.headLength*this.strokeThickness)),g=f.plus(m.times(this.headWidth*this.strokeThickness)),x=f.minusVector(m.times(this.headWidth*this.strokeThickness)),w=f.plus(d.times(this.veeness*this.strokeThickness)),C=0,A=LineStyleHelper.getDashArray(this.lineStyle);if(this.strokeThickness>0&&this.lineStyle!==LineStyle.None&&(await RenderingExtensions.drawReducedLine(s,[this.screenStartPoint,w],C*C,this.getSelectableColor(this.color),this.strokeThickness,this.edgeRenderingMode,A,this.lineJoin),await RenderingExtensions.drawReducedPolygon(s,[x,this.screenEndPoint,g,w],C*C,this.getSelectableColor(this.color),OxyColors.Undefined,0,this.edgeRenderingMode)),!this.text)return;let _,M;if(this.textPosition.isDefined())[_,M]=this.getActualTextAlignment();else{const E=Math.atan2(d.y,d.x),R=Math.PI/8;E<3*R&&E>-3*R?_=HorizontalAlignment.Right:E>5*R||E<-5*R?_=HorizontalAlignment.Left:_=HorizontalAlignment.Center,E>R&&E<7*R?M=VerticalAlignment.Bottom:E<-R&&E>-7*R?M=VerticalAlignment.Top:M=VerticalAlignment.Middle}const P=this.getActualTextPosition(()=>this.screenStartPoint);await s.drawText(P,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,_,M)}hitTestOverride(s){if(s.point.minus(this.screenStartPoint).length<s.tolerance)return{element:this,nearestHitPoint:this.screenStartPoint,index:0};if(s.point.minus(this.screenEndPoint).length<s.tolerance)return{element:this,nearestHitPoint:this.screenEndPoint,index:2};const d=ScreenPointHelper.findPointOnLine(s.point,this.screenStartPoint,this.screenEndPoint);if(d.minus(s.point).length<s.tolerance)return{element:this,nearestHitPoint:d}}}class DelegateAnnotation extends Annotation{constructor(s){super(),D(this,"rendering"),this.rendering=s}async render(s){await this.rendering(s)}getClippingRect(){return OxyRect.Everything}}class EllipseAnnotation extends ShapeAnnotation{constructor(s){super(s),D(this,"screenRectangle",OxyRect.Empty),D(this,"x",0),D(this,"y",0),D(this,"width",0),D(this,"height",0),this.width=NaN,this.height=NaN,s&&Object.assign(this,removeUndef(s))}async render(s){const d=PlotElementExtensions.transform(this,this.x-this.width/2,this.y-this.height/2),m=PlotElementExtensions.transform(this,this.x+this.width/2,this.y+this.height/2);if(this.screenRectangle=OxyRect.fromScreenPoints(d,m),await s.drawEllipse(this.screenRectangle,this.getSelectableFillColor(this.fill),this.getSelectableColor(this.stroke),this.strokeThickness,this.edgeRenderingMode),this.text){const f=this.getActualTextPosition(()=>this.screenRectangle.center),[g,x]=this.getActualTextAlignment();await s.drawText(f,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,g,x)}}hitTestOverride(s){if(this.screenRectangle.containsPoint(s.point))return{element:this,nearestHitPoint:s.point}}}class PolygonAnnotation extends ShapeAnnotation{constructor(s){super(s),D(this,"screenPoints",[]),D(this,"lineJoin"),D(this,"lineStyle"),D(this,"minimumSegmentLength"),D(this,"points",[]),this.lineStyle=LineStyle.Solid,this.lineJoin=LineJoin.Miter,this.minimumSegmentLength=2,s&&Object.assign(this,s)}async render(s){if(this.points&&(this.screenPoints=this.points.map(d=>this.transform(d)),this.screenPoints.length!==0&&(await RenderingExtensions.drawReducedPolygon(s,this.screenPoints,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableFillColor(this.fill),this.getSelectableColor(this.stroke),this.strokeThickness,this.edgeRenderingMode,this.lineStyle,this.lineJoin),this.text))){const[d,m]=this.getActualTextAlignment(),f=this.getActualTextPosition(()=>ScreenPointHelper.getCentroid(this.screenPoints));await s.drawText(f,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,d,m)}}hitTestOverride(s){if(!(!this.screenPoints||this.screenPoints.length===0))return ScreenPointHelper.isPointInPolygon(s.point,this.screenPoints)?{element:this,nearestHitPoint:s.point}:void 0}}class PolylineAnnotation extends PathAnnotation{constructor(s){super(s),D(this,"_points",[]),D(this,"interpolationAlgorithm"),s&&Object.assign(this,removeUndef(s))}get points(){return this._points}getScreenPoints(){const s=this.points.map(d=>this.transform(d));if(this.interpolationAlgorithm){const d=ScreenPointHelper.resamplePoints(s,this.minimumSegmentLength);return this.interpolationAlgorithm.createSplineSp(d,!1,.25)}return this.points.map(d=>this.transform(d))}}class RectangleAnnotation extends ShapeAnnotation{constructor(s){super(s),D(this,"screenRectangle",OxyRect.Empty),D(this,"minimumX"),D(this,"maximumX"),D(this,"minimumY"),D(this,"maximumY"),this.minimumX=-1/0,this.maximumX=1/0,this.minimumY=-1/0,this.maximumY=1/0,this.textRotation=0,this.textHorizontalAlignment=HorizontalAlignment.Center,this.textVerticalAlignment=VerticalAlignment.Middle,s&&Object.assign(this,removeUndef(s))}async render(s){const d=this.getClippingRect(),m=this.inverseTransform(d.topLeft),f=this.inverseTransform(d.bottomRight),g=this.minimumX===-1/0||isNaN(this.minimumX)?Math.min(m.x,f.x):this.minimumX,x=this.maximumX===1/0||isNaN(this.maximumX)?Math.max(m.x,f.x):this.maximumX,w=this.minimumY===-1/0||isNaN(this.minimumY)?Math.min(m.y,f.y):this.minimumY,C=this.maximumY===1/0||isNaN(this.maximumY)?Math.max(m.y,f.y):this.maximumY,A=PlotElementExtensions.transform;this.screenRectangle=OxyRect.fromScreenPoints(A(this,g,w),A(this,x,C));const _=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);if(await s.drawRectangle(this.screenRectangle,this.getSelectableFillColor(this.fill),this.getSelectableColor(this.stroke),this.strokeThickness,_),this.text){const[M,P]=this.getActualTextAlignment(),E=this.getActualTextPosition(()=>this.screenRectangle.center);await s.drawText(E,this.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.textRotation,M,P)}}hitTestOverride(s){if(this.screenRectangle.containsPoint(s.point))return{element:this,nearestHitPoint:s.point}}}class ImageAnnotation extends TransposableAnnotation{constructor(s){super(s),D(this,"actualBounds",OxyRect.Empty),D(this,"imageSource"),D(this,"horizontalAlignment"),D(this,"x"),D(this,"y"),D(this,"offsetX"),D(this,"offsetY"),D(this,"width"),D(this,"height"),D(this,"opacity"),D(this,"interpolate"),D(this,"verticalAlignment"),this.x=new PlotLength(.5,PlotLengthUnit.RelativeToPlotArea),this.y=new PlotLength(.5,PlotLengthUnit.RelativeToPlotArea),this.offsetX=new PlotLength(0,PlotLengthUnit.ScreenUnits),this.offsetY=new PlotLength(0,PlotLengthUnit.ScreenUnits),this.width=new PlotLength(NaN,PlotLengthUnit.ScreenUnits),this.height=new PlotLength(NaN,PlotLengthUnit.ScreenUnits),this.opacity=1,this.interpolate=!0,this.horizontalAlignment=HorizontalAlignment.Center,this.verticalAlignment=VerticalAlignment.Middle,s&&Object.assign(this,removeUndef(s))}async render(s){if(!this.imageSource)throw new Error(`${this.imageSource} must be non-null before rendering.`);const d=this.getPoint(this.x,this.y,this.plotModel),m=this.getVector(this.offsetX,this.offsetY,this.plotModel),f=d.plus(m),g=this.getVector(this.width,this.height,this.plotModel);let x=g.x,w=g.y;isNaN(x)&&isNaN(w)&&(x=this.imageSource.width,w=this.imageSource.height),isNaN(x)&&(x=w/this.imageSource.height*this.imageSource.width),isNaN(w)&&(w=x/this.imageSource.width*this.imageSource.height),x=Math.abs(x),w=Math.abs(w);let C=f.x,A=f.y;const _=this.horizontalAlignment,M=this.verticalAlignment;_===HorizontalAlignment.Center?C-=x*.5:_===HorizontalAlignment.Right&&(C-=x),M===VerticalAlignment.Middle?A-=w*.5:M===VerticalAlignment.Bottom&&(A-=w),this.actualBounds=new OxyRect(C,A,x,w),await RenderingExtensions.drawImage(s,this.imageSource,C,A,x,w,this.opacity,this.interpolate)}hitTestOverride(s){if(this.actualBounds.containsPoint(s.point))return{element:this,nearestHitPoint:s.point}}getPoint(s,d,m){let f=NaN,g=NaN;if(s.unit===PlotLengthUnit.Data||d.unit===PlotLengthUnit.Data){const x=s.unit===PlotLengthUnit.Data?s.value:NaN,w=d.unit===PlotLengthUnit.Data?d.value:NaN,C=PlotElementExtensions.transform(this,x,w);f=C.x,g=C.y}switch(s.unit){case PlotLengthUnit.Data:break;case PlotLengthUnit.ScreenUnits:f=s.value;break;case PlotLengthUnit.RelativeToViewport:f=m.width*s.value;break;case PlotLengthUnit.RelativeToPlotArea:f=m.plotArea.left+m.plotArea.width*s.value;break;default:throw new Error("Invalid unit")}switch(d.unit){case PlotLengthUnit.Data:break;case PlotLengthUnit.ScreenUnits:g=d.value;break;case PlotLengthUnit.RelativeToViewport:g=m.height*d.value;break;case PlotLengthUnit.RelativeToPlotArea:g=m.plotArea.top+m.plotArea.height*d.value;break;default:throw new Error("Invalid unit")}return new ScreenPoint(f,g)}getVector(s,d,m){let f=NaN,g=NaN;if(s.unit===PlotLengthUnit.Data||d.unit===PlotLengthUnit.Data){const x=s.unit===PlotLengthUnit.Data?s.value:NaN,w=d.unit===PlotLengthUnit.Data?d.value:NaN,C=PlotElementExtensions.transform(this,x,w).minus(this.transform(DataPoint.Zero));f=C.x,g=C.y}switch(s.unit){case PlotLengthUnit.Data:break;case PlotLengthUnit.ScreenUnits:f=s.value;break;case PlotLengthUnit.RelativeToViewport:f=m.width*s.value;break;case PlotLengthUnit.RelativeToPlotArea:f=m.plotArea.width*s.value;break;default:throw new Error("Invalid unit")}switch(d.unit){case PlotLengthUnit.Data:break;case PlotLengthUnit.ScreenUnits:g=d.value;break;case PlotLengthUnit.RelativeToViewport:g=m.height*d.value;break;case PlotLengthUnit.RelativeToPlotArea:g=m.plotArea.height*d.value;break;default:throw new Error("Invalid unit")}return new ScreenVector(f,g)}getClippingRect(){return this.x.unit===PlotLengthUnit.Data||this.y.unit===PlotLengthUnit.Data?super.getClippingRect():OxyRect.Everything}}const Zt=class Mi extends PlotElement{constructor(s){super(s),D(this,"_offset",0),D(this,"_scale",1),D(this,"axisChanged"),D(this,"transformChanged"),D(this,"absoluteMaximum"),D(this,"absoluteMinimum"),D(this,"_actualMajorStep",0),D(this,"minimumMajorIntervalCount"),D(this,"maximumMajorIntervalCount"),D(this,"_actualMaximum",0),D(this,"_actualMinimum",0),D(this,"_clipMaximum",0),D(this,"_clipMinimum",0),D(this,"_actualMinorStep",0),D(this,"_actualStringFormatter"),D(this,"angle"),D(this,"axisTickToLabelDistance"),D(this,"axisTitleDistance"),D(this,"axisDistance"),D(this,"axislineColor"),D(this,"axislineStyle"),D(this,"axislineThickness"),D(this,"clipTitle"),D(this,"cropGridlines",!1),D(this,"_dataMaximum",0),D(this,"_dataMinimum",0),D(this,"endPosition"),D(this,"extraGridlineColor"),D(this,"extraGridlineStyle"),D(this,"extraGridlineThickness"),D(this,"extraGridlines"),D(this,"filterFunction"),D(this,"filterMaxValue"),D(this,"filterMinValue"),D(this,"intervalLength"),D(this,"isAxisVisible"),D(this,"isPanEnabled"),D(this,"isZoomEnabled"),D(this,"key"),D(this,"labelFormatter"),D(this,"layer"),D(this,"majorGridlineColor"),D(this,"majorGridlineStyle"),D(this,"majorGridlineThickness"),D(this,"majorStep"),D(this,"majorTickSize"),D(this,"maximum"),D(this,"maximumPadding"),D(this,"maximumDataMargin"),D(this,"maximumMargin"),D(this,"maximumRange"),D(this,"minimum"),D(this,"minimumMajorStep"),D(this,"minimumMinorStep"),D(this,"minimumPadding"),D(this,"minimumDataMargin"),D(this,"minimumMargin"),D(this,"minimumRange"),D(this,"minorGridlineColor"),D(this,"minorGridlineStyle"),D(this,"minorGridlineThickness"),D(this,"minorStep"),D(this,"minorTicklineColor"),D(this,"minorTickSize"),D(this,"position",AxisPosition.Left),D(this,"positionAtZeroCrossing",!1),D(this,"positionTier",0),D(this,"_screenMax",ScreenPoint.Undefined),D(this,"_screenMin",ScreenPoint.Undefined),D(this,"startPosition"),D(this,"stringFormatter"),D(this,"tickStyle"),D(this,"ticklineColor"),D(this,"title"),D(this,"titleClippingLength"),D(this,"titleColor"),D(this,"titleFont"),D(this,"titleFontSize"),D(this,"titleFontWeight"),D(this,"titleFormatter"),D(this,"titlePosition"),D(this,"unit"),D(this,"useSuperExponentialFormat",!1),D(this,"_desiredMargin",OxyThickness.Zero),D(this,"positionTierMaxShift",0),D(this,"positionTierMinShift",0),D(this,"positionTierSize",0),D(this,"viewMaximum"),D(this,"viewMinimum"),this.position=AxisPosition.Left,this.positionTier=0,this.isAxisVisible=!0,this.layer=AxisLayer.BelowSeries,this.viewMaximum=Number.NaN,this.viewMinimum=Number.NaN,this.absoluteMaximum=Number_MAX_VALUE,this.absoluteMinimum=Number_MIN_VALUE,this.minimum=Number.NaN,this.maximum=Number.NaN,this.minorStep=Number.NaN,this.majorStep=Number.NaN,this.minimumMinorStep=0,this.minimumMajorStep=0,this.minimumMajorIntervalCount=2,this.maximumMajorIntervalCount=Number_MAX_VALUE,this.minimumPadding=.01,this.maximumPadding=.01,this.minimumRange=0,this.maximumRange=Number.POSITIVE_INFINITY,this.minimumDataMargin=0,this.maximumDataMargin=0,this.minimumMargin=0,this.maximumMargin=0,this.tickStyle=TickStyle.Outside,this.ticklineColor=OxyColors.Black,this.minorTicklineColor=OxyColors.Automatic,this.axislineStyle=LineStyle.None,this.axislineColor=OxyColors.Black,this.axislineThickness=1,this.majorGridlineStyle=LineStyle.None,this.majorGridlineColor=OxyColor.fromArgb(64,0,0,0),this.majorGridlineThickness=1,this.minorGridlineStyle=LineStyle.None,this.minorGridlineColor=OxyColor.fromArgb(32,0,0,0),this.minorGridlineThickness=1,this.extraGridlineStyle=LineStyle.Solid,this.extraGridlineColor=OxyColors.Black,this.extraGridlineThickness=1,this.minorTickSize=4,this.majorTickSize=7,this.startPosition=0,this.endPosition=1,this.titlePosition=.5,this.titleFormatter=(d,m)=>`${d||""} [${m||""}]`,this.titleClippingLength=.9,this.titleColor=OxyColors.Automatic,this.titleFontSize=Number.NaN,this.titleFontWeight=FontWeights.Normal,this.clipTitle=!0,this.angle=0,this.isZoomEnabled=!0,this.isPanEnabled=!0,this.filterMinValue=Number_MIN_VALUE,this.filterMaxValue=Number_MAX_VALUE,this.filterFunction=void 0,this.intervalLength=60,this.axisDistance=0,this.axisTitleDistance=4,this.axisTickToLabelDistance=4,this.dataMaximum=Number.NaN,this.dataMinimum=Number.NaN}get actualMajorStep(){return this._actualMajorStep}set actualMajorStep(s){this._actualMajorStep=s}get actualMaximum(){return this._actualMaximum}set actualMaximum(s){this._actualMaximum=s}get actualMinimum(){return this._actualMinimum}set actualMinimum(s){this._actualMinimum=s}get clipMaximum(){return this._clipMaximum}set clipMaximum(s){this._clipMaximum=s}get clipMinimum(){return this._clipMinimum}set clipMinimum(s){this._clipMinimum=s}get actualMinorStep(){return this._actualMinorStep}set actualMinorStep(s){this._actualMinorStep=s}get actualStringFormatter(){return this._actualStringFormatter}set actualStringFormatter(s){this._actualStringFormatter=s}get actualTitle(){return this.unit?`${this.title} [${this.unit}]`:this.title}get dataMaximum(){return this._dataMaximum}set dataMaximum(s){this._dataMaximum=s}get dataMinimum(){return this._dataMinimum}set dataMinimum(s){this._dataMinimum=s}get isReversed(){return this.startPosition>this.endPosition}get offset(){return this._offset}get scale(){return this._scale}get screenMax(){return this._screenMax}set screenMax(s){this._screenMax=s}get screenMin(){return this._screenMin}set screenMin(s){this._screenMin=s}get desiredMargin(){return this._desiredMargin}set desiredMargin(s){this._desiredMargin=s}get actualTitleColor(){return this.titleColor.getActualColor(this.plotModel.textColor)}get actualTitleFont(){return this.titleFont||this.plotModel.defaultFont}get actualTitleFontSize(){return isNaN(this.titleFontSize)?this.actualFontSize:this.titleFontSize}get actualTitleFontWeight(){return isNaN(this.titleFontWeight)?this.actualFontWeight:this.titleFontWeight}itemToDouble(s){return Number(s)}static inverseTransform(s,d,m){return d.inverseTransformPoint(s.x,s.y,m)}formatValue(s){return this.labelFormatter?this.labelFormatter(s):this.formatValueOverride(s)}getTickValues(){const s=[],d=[],m=[],f=this.createTickValues(this.clipMinimum,this.clipMaximum,this.actualMinorStep);return d.push(...this.createTickValues(this.clipMinimum,this.clipMaximum,this.actualMajorStep)),s.push(...d),m.push(...AxisUtilities.filterRedundantMinorTicks(d,f)),{majorLabelValues:s,majorTickValues:d,minorTickValues:m}}getValue(s){return s}inverseTransformPoint(s,d,m){return new DataPoint(this.inverseTransform(s),m?m.inverseTransform(d):0)}inverseTransform(s){return s/this._scale+this._offset}isHorizontal(){return this.position===AxisPosition.Top||this.position===AxisPosition.Bottom}isValidValue(s){return Number.isFinite(s)&&s<this.filterMaxValue&&s>this.filterMinValue&&(!this.filterFunction||this.filterFunction(s))}isVertical(){return this.position===AxisPosition.Left||this.position===AxisPosition.Right}isLogarithmic(){return!1}measure(s){if(this.position===AxisPosition.None){this.desiredMargin=new OxyThickness(0);return}const{majorLabelValues:d}=this.getTickValues();let m=new OxySize;for(const P of d){const E=this.formatValue(P),R=RenderingExtensions.measureText(s,E,this.actualFont,this.actualFontSize,this.actualFontWeight,this.angle);m=m.include(R)}const f=s.measureText(this.actualTitle||"",this.actualTitleFont,this.actualTitleFontSize,this.actualTitleFontWeight);let g=0,x=0,w=0,C=0;const A=Math.max(0,this.isReversed?this.maximumMargin:this.minimumMargin),_=Math.max(0,this.isReversed?this.minimumMargin:this.maximumMargin);let M=0;switch(this.tickStyle){case TickStyle.Outside:M=this.majorTickSize;break;case TickStyle.Crossing:M=this.majorTickSize*.75;break}switch(M+=this.axisDistance+this.axisTickToLabelDistance,f.height>0&&(M+=this.axisTitleDistance+f.height),this.position){case AxisPosition.Left:g=M+m.width;break;case AxisPosition.Right:w=M+m.width;break;case AxisPosition.Top:x=M+m.height;break;case AxisPosition.Bottom:C=M+m.height;break;case AxisPosition.All:g=w=M+m.width,x=C=M+m.height;break;default:throw new Error("Invalid operation")}if(this.isPanEnabled||this.isZoomEnabled){const P=Math.min(this.startPosition,this.endPosition)<.01,E=Math.max(this.startPosition,this.endPosition)>.99;switch(this.position){case AxisPosition.Left:case AxisPosition.Right:P&&(C=Math.max(0,m.height/2-A)),E&&(x=Math.max(0,m.height/2-_));break;case AxisPosition.Top:case AxisPosition.Bottom:P&&(g=Math.max(0,m.width/2-A)),E&&(w=Math.max(0,m.width/2-_));break}}else if(d.length>0){const P=Math.min(...d),E=Math.max(...d),R=this.formatValue(P),B=this.formatValue(E);let z=RenderingExtensions.measureText(s,R,this.actualFont,this.actualFontSize,this.actualFontWeight,this.angle),F=RenderingExtensions.measureText(s,B,this.actualFont,this.actualFontSize,this.actualFontWeight,this.angle),I=this.transform(P),L=this.transform(E);I>L&&([I,L]=[L,I],[z,F]=[F,z]);let W=0,G=0,q=0,K=0;switch(this.position){case AxisPosition.Left:case AxisPosition.Right:W=Math.min(this.screenMin.y,this.screenMax.y),G=Math.max(this.screenMin.y,this.screenMax.y),x=Math.max(0,W-I+z.height/2-A),C=Math.max(0,L-G+F.height/2-_);break;case AxisPosition.Top:case AxisPosition.Bottom:q=Math.min(this.screenMin.x,this.screenMax.x),K=Math.max(this.screenMin.x,this.screenMax.x),g=Math.max(0,q-I+z.width/2-A),w=Math.max(0,L-K+F.width/2-_);break}}this.desiredMargin=new OxyThickness(g,x,w,C)}pan(s,d){if(typeof s=="number"){this.pan2(s);return}this.pan1(s,d)}pan1(s,d){if(!this.isPanEnabled)return;const m=this.isHorizontal()?d.x-s.x:d.y-s.y;this.pan(m)}pan2(s){if(!this.isPanEnabled)return;const d=this.actualMinimum,m=this.actualMaximum,f=s/this._scale;let g=this.actualMinimum-f,x=this.actualMaximum-f;g<this.absoluteMinimum&&(g=this.absoluteMinimum,x=Math.min(g+this.actualMaximum-this.actualMinimum,this.absoluteMaximum)),x>this.absoluteMaximum&&(x=this.absoluteMaximum,g=Math.max(x-(this.actualMaximum-this.actualMinimum),this.absoluteMinimum)),this.viewMinimum=g,this.viewMaximum=x,this.updateActualMaxMin();const w=this.actualMinimum-d,C=this.actualMaximum-m;this.onAxisChanged({changeType:AxisChangeTypes.Pan,deltaMaximum:C,deltaMinimum:w})}async render(s,d){this.position!==AxisPosition.None&&await new HorizontalAndVerticalAxisRenderer(s,this.plotModel).render(this,d)}reset(){const s=this.actualMinimum,d=this.actualMaximum;this.viewMinimum=NaN,this.viewMaximum=NaN,this.updateActualMaxMin();const m=this.actualMinimum-s,f=this.actualMaximum-d;this.onAxisChanged({changeType:AxisChangeTypes.Reset,deltaMinimum:m,deltaMaximum:f})}toString(){return`${this.constructor.name}(${this.position}, ${this.clipMinimum}, ${this.clipMaximum}, ${this.actualMajorStep})`}transformPoint(s,d,m){if(!m)throw new Error("Y axis should not be null when transforming.");return new ScreenPoint(this.transform(s),m.transform(d))}transform(s){return(s-this._offset)*this._scale}zoomScale(s){const d=this.actualMinimum,m=this.actualMaximum,f=this.transform(this.actualMaximum),g=this.transform(this.actualMinimum),x=Math.sign(this._scale),w=(this.preTransform(this.actualMaximum)+this.preTransform(this.actualMinimum))/2,C=(this._offset-w)*this._scale/(x*s)+w;this.setTransform(x*s,C);let A=this.inverseTransform(f),_=this.inverseTransform(g);if(_<this.absoluteMinimum&&A>this.absoluteMaximum)_=this.absoluteMinimum,A=this.absoluteMaximum;else if(_<this.absoluteMinimum){const E=A-_;_=this.absoluteMinimum,A=this.absoluteMinimum+E,A>this.absoluteMaximum&&(A=this.absoluteMaximum)}else if(A>this.absoluteMaximum){const E=A-_;A=this.absoluteMaximum,_=this.absoluteMaximum-E,_<this.absoluteMinimum&&(_=this.absoluteMinimum)}this.clipMaximum=this.viewMaximum=A,this.clipMinimum=this.viewMinimum=_,this.updateActualMaxMin();const M=this.actualMinimum-d,P=this.actualMaximum-m;this.actualMaximumAndMinimumChangedOverride(),this.onAxisChanged({changeType:AxisChangeTypes.Zoom,deltaMinimum:M,deltaMaximum:P})}zoom(s,d){if(!this.isZoomEnabled)return;const m=this.actualMinimum,f=this.actualMaximum,g=Math.max(Math.min(s,d),this.absoluteMinimum),x=Math.min(Math.max(s,d),this.absoluteMaximum);this.viewMinimum=g,this.viewMaximum=x,this.updateActualMaxMin();const w=this.actualMinimum-m,C=this.actualMaximum-f;this.onAxisChanged({changeType:AxisChangeTypes.Zoom,deltaMinimum:w,deltaMaximum:C})}zoomAt(s,d){if(!this.isZoomEnabled)return;const m=this.actualMinimum,f=this.actualMaximum,g=(this.actualMinimum-d)*this._scale,x=(this.actualMaximum-d)*this._scale;this._scale*=s;let w=g/this._scale+d,C=x/this._scale+d;if(C-w>this.maximumRange){const M=(w+C)*.5;C=M+this.maximumRange*.5,w=M-this.maximumRange*.5}if(C-w<this.minimumRange){const M=(w+C)*.5;C=M+this.minimumRange*.5,w=M-this.minimumRange*.5}w=Math.max(w,this.absoluteMinimum),C=Math.min(C,this.absoluteMaximum),this.viewMinimum=w,this.viewMaximum=C,this.updateActualMaxMin();const A=this.actualMinimum-m,_=this.actualMaximum-f;this.onAxisChanged({changeType:AxisChangeTypes.Zoom,deltaMinimum:A,deltaMaximum:_})}zoomAtCenter(s){const d=(this.transform(this.clipMaximum)+this.transform(this.clipMinimum))*.5,m=this.inverseTransform(d);this.zoomAt(s,m)}include(s){this.isValidValue(s)&&(this.dataMinimum=isNaN(this.dataMinimum)?s:Math.min(this.dataMinimum,s),this.dataMaximum=isNaN(this.dataMaximum)?s:Math.max(this.dataMaximum,s))}resetDataMaxMin(){this.dataMaximum=this.dataMinimum=this.actualMaximum=this.actualMinimum=NaN}updateActualMaxMin(){isNaN(this.viewMaximum)?isNaN(this.maximum)?this.actualMaximum=this.calculateActualMaximum():this.actualMaximum=this.maximum:this.actualMaximum=this.viewMaximum,isNaN(this.viewMinimum)?isNaN(this.minimum)?this.actualMinimum=this.calculateActualMinimum():this.actualMinimum=this.minimum:this.actualMinimum=this.viewMinimum,this.coerceActualMaxMin()}updateIntervals(s){const d=this.intervalLength;let m=this.isHorizontal()?s.width:s.height;m*=Math.abs(this.endPosition-this.startPosition),this.actualMajorStep=isNaN(this.majorStep)?this.calculateActualInterval(m,d,this.minimumMajorIntervalCount,this.maximumMajorIntervalCount):this.majorStep,this.actualMinorStep=isNaN(this.minorStep)?this.calculateMinorInterval(this.actualMajorStep):this.minorStep,isNaN(this.actualMinorStep)&&(this.actualMinorStep=2),isNaN(this.actualMajorStep)&&(this.actualMajorStep=10),this.actualMinorStep=Math.max(this.actualMinorStep,this.minimumMinorStep),this.actualMajorStep=Math.max(this.actualMajorStep,this.minimumMajorStep),this.actualStringFormatter=this.stringFormatter||this.getDefaultStringFormatter()}updateTransform(s){const d=s.left,m=s.right,f=s.bottom,g=s.top;let x=this.isHorizontal()?d:f,w=this.isHorizontal()?m:g;const C=w-x;w=x+this.endPosition*C,x=x+this.startPosition*C;const A=this.isHorizontal()!=this.isReversed?1:-1;this.minimumMargin>0&&(x+=this.minimumMargin*A),this.maximumMargin>0&&(w-=this.maximumMargin*A),this.isHorizontal()?(this.screenMin=new ScreenPoint(x,g),this.screenMax=new ScreenPoint(w,f)):this.isVertical()&&(this.screenMin=new ScreenPoint(d,w),this.screenMax=new ScreenPoint(m,x)),this.minimumDataMargin>0&&(x+=this.minimumDataMargin*A),this.maximumDataMargin>0&&(w-=this.maximumDataMargin*A),this.actualMaximum-this.actualMinimum<=0&&(this.actualMaximum=this.actualMinimum+1);const _=this.preTransform(this.actualMaximum),M=this.preTransform(this.actualMinimum),P=x-w;let E,R;Math.abs(P)>Number.EPSILON?E=x/P*_-w/P*M:E=0;const B=_-M;Math.abs(B)>Number.EPSILON?R=(w-x)/B:R=1,this.setTransform(R,E),this.minimumDataMargin>0?this.clipMinimum=this.inverseTransform(x-this.minimumDataMargin*A):this.clipMinimum=this.actualMinimum,this.maximumDataMargin>0?this.clipMaximum=this.inverseTransform(w+this.maximumDataMargin*A):this.clipMaximum=this.actualMaximum,this.actualMaximumAndMinimumChangedOverride()}actualMaximumAndMinimumChangedOverride(){}getDefaultStringFormatter(){return s=>pettyNumber(s,4)}postInverseTransform(s){return s}preTransform(s){return s}calculateMinorInterval(s){return AxisUtilities.calculateMinorInterval(s)}createTickValues(s,d,m,f=1e3){return AxisUtilities.createTickValues(s,d,m,f)}coerceActualMaxMin(){if(this.absoluteMaximum<=this.absoluteMinimum)throw new Error("AbsoluteMaximum must be larger than AbsoluteMinimum.");if(this.absoluteMaximum-this.absoluteMinimum<this.minimumRange)throw new Error("MinimumRange must not be larger than AbsoluteMaximum-AbsoluteMinimum.");if(this.maximumRange<this.minimumRange)throw new Error("MinimumRange must not be larger than MaximumRange.");if((isNaN(this.actualMinimum)||isInfinity(this.actualMinimum))&&(this.actualMinimum=0),(isNaN(this.actualMaximum)||isInfinity(this.actualMaximum))&&(this.actualMaximum=100),this.absoluteMinimum>Number_MIN_VALUE&&this.absoluteMinimum<Number_MAX_VALUE&&(this.actualMinimum=Math.max(this.actualMinimum,this.absoluteMinimum),this.maximumRange<Number_MAX_VALUE&&(this.actualMaximum=Math.min(this.actualMaximum,this.absoluteMinimum+this.maximumRange))),this.absoluteMaximum>Number_MIN_VALUE&&this.absoluteMaximum<Number_MAX_VALUE&&(this.actualMaximum=Math.min(this.actualMaximum,this.absoluteMaximum),this.maximumRange<Number_MAX_VALUE&&(this.actualMinimum=Math.max(this.actualMinimum,this.absoluteMaximum-this.maximumRange))),this.actualMaximum-this.actualMinimum<this.minimumRange)if(this.actualMinimum+this.minimumRange<this.absoluteMaximum){const s=(this.actualMaximum+this.actualMinimum)*.5,d=this.minimumRange/2;if(this.actualMinimum=s-d,this.actualMaximum=s+d,this.actualMinimum<this.absoluteMinimum){const m=this.absoluteMinimum-this.actualMinimum;this.actualMinimum=this.absoluteMinimum,this.actualMaximum+=m}if(this.actualMaximum>this.absoluteMaximum){const m=this.absoluteMaximum-this.actualMaximum;this.actualMaximum=this.absoluteMaximum,this.actualMinimum+=m}}else this.absoluteMaximum-this.minimumRange>this.absoluteMinimum?(this.actualMinimum=this.absoluteMaximum-this.minimumRange,this.actualMaximum=this.absoluteMaximum):(this.actualMaximum=this.absoluteMaximum,this.actualMinimum=this.absoluteMinimum);if(this.actualMaximum-this.actualMinimum>this.maximumRange)if(this.actualMinimum+this.maximumRange<this.absoluteMaximum){const s=(this.actualMaximum+this.actualMinimum)*.5,d=this.maximumRange/2;if(this.actualMinimum=s-d,this.actualMaximum=s+d,this.actualMinimum<this.absoluteMinimum){const m=this.absoluteMinimum-this.actualMinimum;this.actualMinimum=this.absoluteMinimum,this.actualMaximum+=m}if(this.actualMaximum>this.absoluteMaximum){const m=this.absoluteMaximum-this.actualMaximum;this.actualMaximum=this.absoluteMaximum,this.actualMinimum+=m}}else this.absoluteMaximum-this.maximumRange>this.absoluteMinimum?(this.actualMinimum=this.absoluteMaximum-this.maximumRange,this.actualMaximum=this.absoluteMaximum):(this.actualMaximum=this.absoluteMaximum,this.actualMinimum=this.absoluteMinimum);this.actualMaximum<=this.actualMinimum&&(this.actualMaximum=this.actualMinimum+100)}formatValueOverride(s){let d=this.stringFormatter;if(this.useSuperExponentialFormat&&s!==0){const m=Mi.Exponent(s),f=Mi.Mantissa(s);if(d){if(typeof d=="function")return`${d(s)}10^{${m}}`}else return Math.abs(f-1)<1e-6?`10^{${m}}`:`${f}10^{${m}}`;throw new Error("invalid stringFormat")}if(d=this.actualStringFormatter||this.stringFormatter,typeof d=="function")return d(s);if(!d)return s.toString();throw new Error("invalid stringFormat")}calculateActualMaximum(){let s=this.dataMaximum;if(this.dataMaximum-this.dataMinimum<=0){const d=this.dataMaximum>0?this.dataMaximum:1;s+=d*.5}if(!isNaN(this.dataMinimum)&&!isNaN(s)){const d=this.preTransform(s),m=this.preTransform(this.dataMinimum),f=this.maximumPadding*(d-m);return this.postInverseTransform(d+f)}return s}calculateActualMinimum(){let s=this.dataMinimum;if(this.dataMaximum-this.dataMinimum<=0){const d=this.dataMaximum>0?this.dataMaximum:1;s-=d*.5}if(!isNaN(this.actualMaximum)){const d=this.preTransform(this.actualMaximum),m=this.preTransform(s),f=this.maximumPadding,g=this.minimumPadding*((d-m)/(1+f));return this.postInverseTransform(m-g)}return s}setTransform(s,d){this._scale=s,this._offset=d,this.onTransformChanged()}calculateActualInterval(s,d,m,f,g){if(isNullOrUndef(g)&&(g=Math.abs(this.clipMinimum-this.clipMaximum)),s<=0)return d;if(Math.abs(d)<=0)throw new Error("Maximum interval size cannot be zero.");if(Math.abs(g)<=0)throw new Error("Range cannot be zero.");const x=M=>Math.ceil(Math.log10(M)),w=M=>M/Math.pow(10,x(M)-1);m=Math.max(m,0),f=Math.min(f,s/d),g=Math.abs(g);let C=Math.pow(10,x(g)),A=C;const _=M=>parseFloat(M.toPrecision(14));for(;w(A)===5?A=_(A/2.5):A=_(A/2),!(g/C>=m&&g/A>f||isNaN(A)||isInfinity(A));)C=A;return C}onAxisChanged(s){this.updateActualMaxMin();const d=this.axisChanged;d&&d(this,s)}onTransformChanged(){const s=this.transformChanged;s&&s(this)}};D(Zt,"Exponent",a=>Math.floor(Zt.ThresholdRound(Math.log(Math.abs(a))/Math.LN10))),D(Zt,"Mantissa",a=>Zt.ThresholdRound(a/Math.pow(10,Zt.Exponent(a)))),D(Zt,"ThresholdRound",a=>Math.abs(Math.round(a)-a)<1e-6?Math.round(a):a);let Axis=Zt;class LinearAxis extends Axis{constructor(s){super(),D(this,"formatAsFractions"),D(this,"fractionUnit"),D(this,"fractionUnitSymbol"),this.fractionUnit=1,this.fractionUnitSymbol=void 0,this.formatAsFractions=!1,s&&Object.assign(this,removeUndef(s))}isXyAxis(){return!0}isLogarithmic(){return!1}formatValueOverride(s){return this.formatAsFractions?FractionHelper.convertToFractionString(s,this.fractionUnit,this.fractionUnitSymbol,1e-6,this.stringFormatter):super.formatValueOverride(s)}}class AngleAxis extends LinearAxis{constructor(s){super(s),D(this,"startAngle"),D(this,"endAngle"),this.position=AxisPosition.All,this.tickStyle=TickStyle.None,this.isPanEnabled=!1,this.isZoomEnabled=!1,this.majorGridlineStyle=LineStyle.Solid,this.minorGridlineStyle=LineStyle.Solid,this.startAngle=0,this.endAngle=360,s&&Object.assign(this,removeUndef(s))}getTickValues(){const s=this.startAngle/this.scale,d=this.endAngle/this.scale;let m=this.createTickValues(s,d,this.actualMinorStep);const f=this.createTickValues(s,d,this.actualMajorStep),g=this.createTickValues(this.minimum,this.maximum,this.actualMajorStep);return m=AxisUtilities.filterRedundantMinorTicks(f,m),{majorLabelValues:g,majorTickValues:f,minorTickValues:m}}inverseTransformPoint(s,d,m){throw new Error("Angle axis should always be the y-axis.")}isXyAxis(){return!1}async render(s,d){await new AngleAxisRenderer(s,this.plotModel).render(this,d)}transformPoint(s,d,m){throw new Error("Angle axis should always be the y-axis.")}updateTransform(s){const d=s.left,m=s.right,f=s.bottom,g=s.top;this.screenMin=new ScreenPoint(d,g),this.screenMax=new ScreenPoint(m,f);const x=(this.endAngle-this.startAngle)/(this.actualMaximum-this.actualMinimum),w=this.actualMinimum-this.startAngle/x;this.setTransform(x,w),this.clipMinimum=this.actualMinimum,this.clipMaximum=this.actualMaximum}}class AngleAxisFullPlotArea extends AngleAxis{async render(s,d){await new AngleAxisFullPlotAreaRenderer(s,this.plotModel).render(this,d)}}var AxisChangeTypes=(a=>(a[a.Zoom=0]="Zoom",a[a.Pan=1]="Pan",a[a.Reset=2]="Reset",a))(AxisChangeTypes||{}),AxisLayer=(a=>(a[a.BelowSeries=0]="BelowSeries",a[a.AboveSeries=1]="AboveSeries",a))(AxisLayer||{}),AxisPosition=(a=>(a[a.None=0]="None",a[a.Left=1]="Left",a[a.Right=2]="Right",a[a.Top=3]="Top",a[a.Bottom=4]="Bottom",a[a.All=5]="All",a))(AxisPosition||{});class AxisUtilities{static calculateMinorInterval(s){return Math.abs((Math.log10(s)+1e3)%1-Math.log10(2))<1e-10?s/4:s/5}static calculateMinorInterval2(s){const d=Math.ceil(Math.log(s)/Math.LN10);return(s/Math.pow(10,d-1)|0)===2?s/4:s/5}static createTickValues(s,d,m,f=1e3){if(m<=0)throw new Error("Step cannot be zero or negative.");d<s&&(m=-m);const g=m*.001;s-=g,d+=g;let x=Math.ceil(s/m)*m;Math.abs(x)<Number.EPSILON&&(x=0);const w=[],C=Math.sign(m);let A=0,_=x;for(;(d-_)*C>=0&&A<f;)w.push(_),_=x+ ++A*m;return w}static filterRedundantMinorTicks(s,d){if(s.length===0||d.length===0)return d;const m=[];let f=0,g=1,x=s.length>1?s[g]:s[0];const w=(_,M)=>Math.abs(_-M)*.001;let C=d.length>1?w(d[0],d[1]):0,A=1;s.length>1&&s[0]>s[1]&&(A=-1);for(let _=0;_<d.length;_++){const M=d[_];for(_>0&&(C=w(M,f));(x-M)*A<0&&g<s.length-1;)x=s[++g];const P=s[g-1];Math.abs(M-x)>C&&Math.abs(M-P)>C&&m.push(M),f=M}return m}}class CategoryAxis extends LinearAxis{constructor(s){super(s),D(this,"_autoGeneratedLabels",[]),D(this,"_itemsSourceLabels",[]),D(this,"gapWidth"),D(this,"isTickCentered",!1),D(this,"itemsSource"),D(this,"labelField"),D(this,"_labels",[]),this.tickStyle=TickStyle.Outside,this.position=AxisPosition.Bottom,this.minimumPadding=0,this.maximumPadding=0,this.majorStep=1,this.gapWidth=1,s&&Object.assign(this,removeUndef(s))}get actualLabels(){return this.itemsSource?this._itemsSourceLabels:this.labels.length>0?this.labels:this._autoGeneratedLabels}get labels(){return this._labels}getTickValues(){const{majorLabelValues:s,majorTickValues:d,minorTickValues:m}=super.getTickValues();if(m.length=0,!this.isTickCentered){let f=[];if(f=s.map(g=>g-.5).filter(g=>g>this.clipMinimum-.001),f.length>0){const g=f[f.length-1]+this.majorStep;g<this.clipMaximum+.001&&f.push(g)}d.length=0,d.push(...f)}return{majorLabelValues:s,majorTickValues:d,minorTickValues:m}}getValue(s){return this.formatValue(s)}updateActualMaxMin(){this.include(-.5);const s=this.actualLabels;s.length>0?this.include(s.length-1+.5):this.include(.5),super.updateActualMaxMin(),this.minorStep=1}updateLabels(s){if(this.itemsSource){this._itemsSourceLabels.length=0;const d=[];for(let m of this.itemsSource||[])m=this.labelField?m[this.labelField]:m,this.stringFormatter?d.push(this.stringFormatter(m)):d.push(m.toString());this._itemsSourceLabels.push(...d);return}if(this.labels.length===0){if(this._autoGeneratedLabels.length===s)return;this._autoGeneratedLabels.length=0,this._autoGeneratedLabels.push(...Array.from({length:s},(d,m)=>(m+1).toString()))}}formatValueOverride(s){const d=Math.floor(s),m=this.actualLabels;return d>=0&&d<m.length?m[d]:""}}function isColorAxis(a){return a&&typeof a.getColor=="function"&&typeof a.getPaletteIndex=="function"}function toColorAxis(a){return a}class MagnitudeAxis extends LinearAxis{constructor(s){super(s),D(this,"midPoint",ScreenPoint.LeftTop),this.position=AxisPosition.None,this.isPanEnabled=!1,this.isZoomEnabled=!1,this.majorGridlineStyle=LineStyle.Solid,this.minorGridlineStyle=LineStyle.Solid,s&&Object.assign(this,s)}inverseTransformPoint(s,d,m){if(!(m instanceof AngleAxis))throw new Error("Polar angle axis not defined!");const f=m;s-=this.midPoint.x,d-=this.midPoint.y,d*=-1;const g=Math.atan2(d,s);return s=Math.sqrt(s*s+d*d)/this.scale+this.offset,d=g/f.scale+f.offset*Math.PI/180,new DataPoint(s,d)}isXyAxis(){return!1}async render(s,d){await new MagnitudeAxisRenderer(s,this.plotModel).render(this,d)}transformPoint(s,d,m){if(!(m instanceof AngleAxis))throw new Error("Polar angle axis not defined!");const f=m,g=(s-this.offset)*this.scale,x=(d-f.offset)*f.scale;return new ScreenPoint(this.midPoint.x+g*Math.cos(x/180*Math.PI),this.midPoint.y-g*Math.sin(x/180*Math.PI))}updateTransform(s){const d=s.left,m=s.right,f=s.bottom,g=s.top;this.screenMin=new ScreenPoint(d,g),this.screenMax=new ScreenPoint(m,f),this.midPoint=new ScreenPoint((d+m)/2,(f+g)/2);const x=Math.min(Math.abs(m-d),Math.abs(g-f));let w=0,C=x*.5;const A=C-w;C=w+this.endPosition*A,w=w+this.startPosition*A;const _=this.isReversed?-1:1;this.minimumMargin>0&&(w+=this.minimumMargin*_),this.maximumMargin>0&&(C-=this.maximumMargin*_),this.minimumDataMargin>0&&(w+=this.minimumDataMargin*_),this.maximumDataMargin>0&&(C-=this.maximumDataMargin*_),this.actualMaximum-this.actualMinimum<=0&&(this.actualMaximum=this.actualMinimum+1);const M=this.preTransform(this.actualMaximum),P=this.preTransform(this.actualMinimum),E=w-C;let R,B;Math.abs(E)>Number.EPSILON?R=w/E*M-C/E*P:R=0;const z=M-P;Math.abs(z)>Number.EPSILON?B=(C-w)/z:B=1,this.setTransform(B,R),this.minimumDataMargin>0?this.clipMinimum=this.inverseTransform(0):this.clipMinimum=this.actualMinimum,this.maximumDataMargin>0?this.clipMaximum=this.inverseTransform(x*.5):this.clipMaximum=this.actualMaximum,this.actualMaximumAndMinimumChangedOverride()}}var TickStyle=(a=>(a[a.Crossing=0]="Crossing",a[a.Inside=1]="Inside",a[a.Outside=2]="Outside",a[a.None=3]="None",a))(TickStyle||{});class AxisRendererBase{constructor(s,d){D(this,"_plot"),D(this,"rc"),D(this,"minorTickValues",[]),D(this,"axislinePen"),D(this,"extraPen"),D(this,"majorLabelValues",[]),D(this,"majorPen"),D(this,"majorTickPen"),D(this,"majorTickValues",[]),D(this,"minorPen"),D(this,"minorTickPen"),D(this,"zeroPen"),this._plot=d,this.rc=s}get plot(){return this._plot}get renderContext(){return this.rc}async render(s,d){if(!s)return;const{majorLabelValues:m,majorTickValues:f,minorTickValues:g}=s.getTickValues();this.majorLabelValues=m,this.majorTickValues=f,this.minorTickValues=g,this.createPens(s)}createPens(s){const d=s.minorTicklineColor.isAutomatic()?s.ticklineColor:s.minorTicklineColor;this.minorPen=OxyPen.create(s.minorGridlineColor,s.minorGridlineThickness,s.minorGridlineStyle),this.majorPen=OxyPen.create(s.majorGridlineColor,s.majorGridlineThickness,s.majorGridlineStyle),this.minorTickPen=OxyPen.create(d,s.minorGridlineThickness),this.majorTickPen=OxyPen.create(s.ticklineColor,s.majorGridlineThickness),this.zeroPen=OxyPen.create(s.ticklineColor,s.majorGridlineThickness),this.extraPen=OxyPen.create(s.extraGridlineColor,s.extraGridlineThickness,s.extraGridlineStyle),this.axislinePen=OxyPen.create(s.axislineColor,s.axislineThickness,s.axislineStyle)}getTickPositions(s,d,m,f){let g=0,x=0;const w=f===AxisPosition.Top||f===AxisPosition.Left?-1:1;switch(d){case TickStyle.Crossing:g=-m*w*.75,x=m*w*.75;break;case TickStyle.Inside:g=-m*w;break;case TickStyle.Outside:x=m*w;break}return[g,x]}isWithin(s,d,m){return s<d?!1:s<=m}}class AngleAxisRenderer extends AxisRendererBase{constructor(s,d){super(s,d)}async render(s,d){const m=s;await super.render(s,d);const f=this.plot.defaultMagnitudeAxis;if(!f)throw new Error("Magnitude axis not defined.");const g=m.startAngle/m.scale,x=m.endAngle/m.scale,w=Math.abs(x-g);if(this.minorPen){const _=Math.abs(w/s.actualMinorStep|0),M=this.minorTickValues.slice(0,_+1).map(P=>f.transformPoint(f.clipMaximum,P,s));for(const P of M)await RenderingExtensions.drawLine(this.renderContext,f.midPoint.x,f.midPoint.y,P.x,P.y,this.minorPen,s.edgeRenderingMode)}const C=Math.abs(Math.abs(Math.max(m.endAngle,m.startAngle)-Math.min(m.startAngle,m.endAngle))-360)<.001;let A=w/s.actualMajorStep|0;if(C||A++,this.majorPen){const _=this.majorTickValues.slice(0,A).map(M=>f.transformPoint(f.clipMaximum,M,s));for(const M of _)await RenderingExtensions.drawLine(this.renderContext,f.midPoint.x,f.midPoint.y,M.x,M.y,this.majorPen,s.edgeRenderingMode)}for(const _ of this.majorLabelValues.slice(0,A)){let M=f.transformPoint(f.clipMaximum,_,s);const P=Math.atan2(M.y-f.midPoint.y,M.x-f.midPoint.x);let{x:E,y:R}=M;E+=Math.cos(P)*s.axisTickToLabelDistance,R+=Math.sin(P)*s.axisTickToLabelDistance,M=new ScreenPoint(E,R);let B=P*180/Math.PI;const z=s.formatValue(_);let F=HorizontalAlignment.Left,I=VerticalAlignment.Middle;Math.abs(Math.abs(B)-90)<10?(F=HorizontalAlignment.Center,I=B>=90?VerticalAlignment.Top:VerticalAlignment.Bottom,B=0):(B>90||B<-90)&&(B-=180,F=HorizontalAlignment.Right),await MathRenderingExtensions.drawMathText(this.renderContext,M,z,s.actualTextColor,s.actualFont,s.actualFontSize,s.actualFontWeight,B,F,I)}}}class HorizontalAndVerticalAxisRenderer extends AxisRendererBase{constructor(s,d){super(s,d)}async render(s,d){await super.render(s,d);let m=!0;const f=s.axisDistance+s.positionTierMinShift,g=s.positionTierSize-this.plot.axisTierDistance,x=this.plot.plotArea.left,w=this.plot.plotArea.right,C=this.plot.plotArea.top,A=this.plot.plotArea.bottom;let _=0,M=0;switch(s.position){case AxisPosition.Left:_=x-f;break;case AxisPosition.Right:_=w+f;break;case AxisPosition.Top:_=C-f;break;case AxisPosition.Bottom:_=A+f;break}if(s.positionAtZeroCrossing){const P=s.isHorizontal()?this.plot.defaultYAxis:this.plot.defaultXAxis;_=P.transform(0);const E=s.isHorizontal()?P.screenMin.y:P.screenMin.x,R=s.isHorizontal()?P.screenMax.y:P.screenMax.x;let B=Math.min(E,R),z=Math.max(E,R);const F=s.isHorizontal()?C:x,I=s.isHorizontal()?A:w;if(B=Math.max(B,F),z=Math.min(z,I),_<B){_=B;const L=s.isHorizontal()?this.plot.plotAreaBorderThickness.top:this.plot.plotAreaBorderThickness.left,W=s.isHorizontal()?this.plot.plotArea.top:this.plot.plotArea.left;_<=W&&L>0&&this.plot.plotAreaBorderColor.isVisible()&&(m=!1)}if(_>z){_=z;const L=s.isHorizontal()?this.plot.plotAreaBorderThickness.bottom:this.plot.plotAreaBorderThickness.right,W=s.isHorizontal()?this.plot.plotArea.bottom:this.plot.plotArea.right;_>=W&&L>0&&this.plot.plotAreaBorderColor.isVisible()&&(m=!1)}}switch(s.position){case AxisPosition.Left:M=_-g;break;case AxisPosition.Right:M=_+g;break;case AxisPosition.Top:M=_-g;break;case AxisPosition.Bottom:M=_+g;break}switch(s.position){case AxisPosition.Left:case AxisPosition.Top:M+=s.axisDistance;break;case AxisPosition.Right:case AxisPosition.Bottom:M-=s.axisDistance;break}d==0&&await this.renderMinorItems(s,_),d==1&&(await this.renderMajorItems(s,_,M,m),await this.renderAxisTitle(s,M))}static lerp(s,d,m){return s*(1-m)+d*m}static snapTo(s,d,m=.5){return d>s-m&&d<s+m?s:d}getAxisTitlePositionAndAlignment(s,d){let m=-90,f=HorizontalAlignment.Center,g=VerticalAlignment.Top,x=s.isHorizontal()?HorizontalAndVerticalAxisRenderer.lerp(s.screenMin.x,s.screenMax.x,s.titlePosition):HorizontalAndVerticalAxisRenderer.lerp(s.screenMax.y,s.screenMin.y,s.titlePosition);s.positionAtZeroCrossing&&(x=HorizontalAndVerticalAxisRenderer.lerp(s.transform(s.clipMaximum),s.transform(s.clipMinimum),s.titlePosition));let w=ScreenPoint.LeftTop;switch(s.position){case AxisPosition.Left:w=new ScreenPoint(d,x);break;case AxisPosition.Right:g=VerticalAlignment.Bottom,w=new ScreenPoint(d,x);break;case AxisPosition.Top:f=HorizontalAlignment.Center,g=VerticalAlignment.Top,m=0,w=new ScreenPoint(x,d);break;case AxisPosition.Bottom:f=HorizontalAlignment.Center,g=VerticalAlignment.Bottom,m=0,w=new ScreenPoint(x,d);break;default:throw new Error("Invalid axis position")}return{point:w,angle:m,halign:f,valign:g}}async renderAxisTitle(s,d){if(!s.actualTitle)return;const m=s.isHorizontal();let f;if(s.clipTitle){const A=Math.abs(m?s.screenMax.x-s.screenMin.x:s.screenMax.y-s.screenMin.y);f=new OxySize(A*s.titleClippingLength,Number_MAX_VALUE)}const{point:g,angle:x,halign:w,valign:C}=this.getAxisTitlePositionAndAlignment(s,d);await MathRenderingExtensions.drawMathText(this.renderContext,g,s.actualTitle,s.actualTitleColor,s.actualTitleFont,s.actualTitleFontSize,s.actualTitleFontWeight,x,w,C,f)}async renderMajorItems(s,d,m,f){const g=s.actualMinorStep*.001,x=s.clipMinimum,w=s.clipMaximum,C=this.plot.plotArea.left,A=this.plot.plotArea.right,_=this.plot.plotArea.top,M=this.plot.plotArea.bottom,P=s.isHorizontal(),E=s.cropGridlines,R=[],B=[],[z,F]=this.getTickPositions(s,s.tickStyle,s.majorTickSize,s.position),I=s.isHorizontal()?this.plot.defaultYAxis:this.plot.defaultXAxis,L=s.positionAtZeroCrossing&&(I==null?void 0:I.positionAtZeroCrossing);let W=[];E&&(P?W=this.plot.axes.filter(K=>K.isXyAxis()&&K.isVertical()):W=this.plot.axes.filter(K=>K.isXyAxis()&&K.isHorizontal()));const G=HorizontalAndVerticalAxisRenderer.snapTo;for(const K of this.majorTickValues){if(L&&Math.abs(K)<g)continue;let Z=s.transform(K);P?(Z=G(C,Z),Z=G(A,Z)):(Z=G(_,Z),Z=G(M,Z)),this.majorPen&&this.addSegments(R,W,P,E,Z,C,A,_,M),s.tickStyle!=TickStyle.None&&s.majorTickSize>0&&(P?(B.push(new ScreenPoint(Z,d+z)),B.push(new ScreenPoint(Z,d+F))):(B.push(new ScreenPoint(d+z,Z)),B.push(new ScreenPoint(d+F,Z))))}for(const K of this.majorLabelValues){if(K<x-g||K>w+g||L&&Math.abs(K)<g)continue;let Z=s.transform(K);P?(Z=G(C,Z),Z=G(A,Z)):(Z=G(_,Z),Z=G(M,Z));let J=new ScreenPoint,te=[HorizontalAlignment.Center,VerticalAlignment.Middle];switch(s.position){case AxisPosition.Left:J=new ScreenPoint(d+F-s.axisTickToLabelDistance,Z),te=this.getRotatedAlignments(s.angle,-90);break;case AxisPosition.Right:J=new ScreenPoint(d+F+s.axisTickToLabelDistance,Z),te=this.getRotatedAlignments(s.angle,90);break;case AxisPosition.Top:J=new ScreenPoint(Z,d+F-s.axisTickToLabelDistance),te=this.getRotatedAlignments(s.angle,0);break;case AxisPosition.Bottom:J=new ScreenPoint(Z,d+F+s.axisTickToLabelDistance),te=this.getRotatedAlignments(s.angle,-180);break}const[Q,me]=te,Xe=s.formatValue(K);await MathRenderingExtensions.drawMathText(this.renderContext,J,Xe,s.actualTextColor,s.actualFont,s.actualFontSize,s.actualFontWeight,s.angle,Q,me)}const q=RenderingExtensions.getActualEdgeRenderingMode(s.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);if(s.extraGridlines&&this.extraPen){const K=[];for(const Z of s.extraGridlines){if(!this.isWithin(Z,x,w))continue;const J=s.transform(Z);this.addSegments(K,W,P,E,J,C,A,_,M)}await RenderingExtensions.drawLineSegments(this.renderContext,K,this.extraPen,q)}f&&(P?await RenderingExtensions.drawLine(this.renderContext,s.transform(x),d,s.transform(w),d,this.axislinePen,q):await RenderingExtensions.drawLine(this.renderContext,d,s.transform(x),d,s.transform(w),this.axislinePen,q)),this.majorPen&&await RenderingExtensions.drawLineSegments(this.renderContext,R,this.majorPen,q),this.majorTickPen&&await RenderingExtensions.drawLineSegments(this.renderContext,B,this.majorTickPen,q)}async renderMinorItems(s,d){const m=s.actualMinorStep*.001,f=this.plot.plotArea.left,g=this.plot.plotArea.right,x=this.plot.plotArea.top,w=this.plot.plotArea.bottom,C=s.cropGridlines,A=s.isHorizontal(),_=[],M=[];let P=[];C&&(A?P=this.plot.axes.filter(F=>F.isXyAxis()&&F.isVertical()):P=this.plot.axes.filter(F=>F.isXyAxis()&&F.isHorizontal()));const[E,R]=this.getTickPositions(s,s.tickStyle,s.minorTickSize,s.position),B=HorizontalAndVerticalAxisRenderer.snapTo;for(const F of this.minorTickValues){if(s.positionAtZeroCrossing&&Math.abs(F)<m)continue;let I=s.transform(F);A?(I=B(f,I),I=B(g,I)):(I=B(x,I),I=B(w,I)),this.minorPen&&this.addSegments(_,P,A,C,I,f,g,x,w),s.tickStyle!=TickStyle.None&&s.minorTickSize>0&&(A?(M.push(new ScreenPoint(I,d+E)),M.push(new ScreenPoint(I,d+R))):(M.push(new ScreenPoint(d+E,I)),M.push(new ScreenPoint(d+R,I))))}const z=RenderingExtensions.getActualEdgeRenderingMode(s.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);this.minorPen&&await RenderingExtensions.drawLineSegments(this.renderContext,_,this.minorPen,z),this.minorTickPen&&await RenderingExtensions.drawLineSegments(this.renderContext,M,this.minorTickPen,z)}addSegments(s,d,m,f,g,x,w,C,A){if(m)if(!f)s.push(new ScreenPoint(g,C)),s.push(new ScreenPoint(g,A));else for(const _ of d)s.push(new ScreenPoint(g,_.transform(_.clipMinimum))),s.push(new ScreenPoint(g,_.transform(_.clipMaximum)));else if(!f)s.push(new ScreenPoint(x,g)),s.push(new ScreenPoint(w,g));else for(const _ of d)s.push(new ScreenPoint(_.transform(_.clipMinimum),g)),s.push(new ScreenPoint(_.transform(_.clipMaximum),g))}getRotatedAlignments(s,d){const m=(d+360)%360-180;let f=s>=Math.min(d,m)&&s<Math.max(d,m)?HorizontalAlignment.Left:HorizontalAlignment.Right,g=VerticalAlignment.Middle;return d<0&&(f=f===HorizontalAlignment.Left?HorizontalAlignment.Right:HorizontalAlignment.Left),(Math.abs(s-m)<10||Math.abs(s-d)<10)&&(f=HorizontalAlignment.Center),Math.abs(s-d)<10&&(g=VerticalAlignment.Bottom),Math.abs(s-m)<10&&(g=VerticalAlignment.Top),[f,g]}}class MagnitudeAxisRenderer extends AxisRendererBase{constructor(s,d){super(s,d)}async render(s,d){await super.render(s,d);const m=this.plot.defaultAngleAxis;if(!m)throw new Error("Angle axis should not be null.");if(m.updateActualMaxMin(),d===0&&this.extraPen){const f=s.extraGridlines;if(f)for(let g=0;g<f.length;g++)await this.renderTick(s,m,f[g],this.extraPen)}if(d===0&&this.minorPen)for(const f of this.minorTickValues)await this.renderTick(s,m,f,this.minorPen);if(d===0&&this.majorPen)for(const f of this.majorTickValues)await this.renderTick(s,m,f,this.majorPen);if(d===1)for(const f of this.majorTickValues)await this.renderTickText(s,f,m)}static getActualAngle(s,d){const m=s.transformPoint(0,d.angle,d),f=s.transformPoint(1,d.angle,d);return Math.atan2(f.y-m.y,f.x-m.x)}static getTickTextAlignment(s){let d=HorizontalAlignment.Center,m=VerticalAlignment.Bottom;return s>3*Math.PI/4||s<-3*Math.PI/4?(d=HorizontalAlignment.Center,m=VerticalAlignment.Top):s<-Math.PI/4?(d=HorizontalAlignment.Right,m=VerticalAlignment.Middle):s>Math.PI/4?(d=HorizontalAlignment.Left,m=VerticalAlignment.Middle):(d=HorizontalAlignment.Center,m=VerticalAlignment.Bottom),[d,m]}async renderTick(s,d,m,f){Math.abs(Math.abs(d.endAngle-d.startAngle)-360)<1e-6&&!f.actualDashArray?await this.renderTickCircle(s,d,m,f):await this.renderTickArc(s,d,m,f)}async renderTickCircle(s,d,m,f){const g=d.offset,x=s.transformPoint(s.clipMinimum,g,d),w=s.transformPoint(m,g,d).x,C=w-x.x,A=C*2,_=w-A,M=x.y-C,P=A;await this.renderContext.drawEllipse(new OxyRect(_,M,A,P),OxyColors.Undefined,f.color,f.thickness,s.edgeRenderingMode)}async renderTickArc(s,d,m,f){const g=d.clipMinimum,x=d.clipMaximum,w=Math.round(90*Math.abs(d.endAngle-d.startAngle)/360),C=(x-g)/(w-1),A=[];for(let _=0;_<w;_++){const M=g+_*C;A.push(s.transformPoint(m,M,d))}await this.renderContext.drawLine(A,f.color,f.thickness,s.edgeRenderingMode,f.actualDashArray)}async renderTickText(s,d,m){const f=MagnitudeAxisRenderer.getActualAngle(s,m),g=s.axisTickToLabelDistance*Math.sin(f),x=-s.axisTickToLabelDistance*Math.cos(f),[w,C]=MagnitudeAxisRenderer.getTickTextAlignment(f);let A=s.transformPoint(d,m.angle,m);A=new ScreenPoint(A.x+g,A.y+x);const _=s.formatValue(d);await MathRenderingExtensions.drawMathText(this.renderContext,A,_,s.actualTextColor,s.actualFont,s.actualFontSize,s.actualFontWeight,s.angle,w,C)}}class AngleAxisFullPlotAreaRenderer extends AxisRendererBase{constructor(s,d){super(s,d)}async render(s,d){const m=s;await super.render(s,d);const f=this.plot.defaultMagnitudeAxis;if(!f)throw new Error("Magnitude axis not defined.");const g=m.startAngle/m.scale,x=m.endAngle/m.scale,w=Math.abs(x-g);if(this.minorPen){const _=Math.abs(w/s.actualMinorStep),M=this.minorTickValues.slice(0,_+1).map(P=>this.transformToClientRectangle(f.clipMaximum,P,s,this.plot.plotArea,f.midPoint));for(const P of M)await RenderingExtensions.drawLine(this.renderContext,f.midPoint.x,f.midPoint.y,P.x,P.y,this.minorPen,s.edgeRenderingMode)}const C=Math.abs(Math.abs(Math.max(m.endAngle,m.startAngle)-Math.min(m.startAngle,m.endAngle))-360)<.001;let A=Math.floor(w/s.actualMajorStep);if(C||A++,this.majorPen){const _=this.majorTickValues.slice(0,A).map(M=>this.transformToClientRectangle(f.clipMaximum,M,s,this.plot.plotArea,f.midPoint));for(const M of _)await RenderingExtensions.drawLine(this.renderContext,f.midPoint.x,f.midPoint.y,M.x,M.y,this.majorPen,s.edgeRenderingMode)}for(const _ of this.majorLabelValues.slice(0,A)){const M=this.transformToClientRectangle(f.clipMaximum,_,s,this.plot.plotArea,f.midPoint),P=s.formatValue(_);let E=HorizontalAlignment.Center,R=VerticalAlignment.Middle;const B=this.plot.plotArea;let z=M.y,F=M.x;z<=B.top?(E=HorizontalAlignment.Center,R=VerticalAlignment.Top,z+=s.axisTickToLabelDistance):z>=B.bottom?(E=HorizontalAlignment.Center,R=VerticalAlignment.Bottom,z-=s.axisTickToLabelDistance):F<=B.left?(E=HorizontalAlignment.Left,R=VerticalAlignment.Middle,F+=s.axisTickToLabelDistance):F>=B.right&&(E=HorizontalAlignment.Right,R=VerticalAlignment.Middle,F-=s.axisTickToLabelDistance);const I=new ScreenPoint(F,z);await MathRenderingExtensions.drawMathText(this.renderContext,I,P,s.actualTextColor,s.actualFont,s.actualFontSize,s.actualFontWeight,0,E,R)}}transformToClientRectangle(s,d,m,f,g){let x=new ScreenPoint,w=(d-m.offset)*m.scale;w%=360;const C=w/180*Math.PI,A=Math.cos(C),_=-Math.sin(C);if(A!==0){let M=0;A>0?M=f.right-g.x:A<0&&(M=f.left-g.x);const P=M/A;let E=P*A,R=P*_;if(R+g.y>f.bottom||R+g.y<f.top){let B=0;_>0?B=f.bottom-g.y:B=f.top-g.y;const z=B/_;E=z*A,R=z*_,x=new ScreenPoint(z*A+g.x,z*_+g.y)}else x=new ScreenPoint(E+g.x,R+g.y)}return x}}const degree=180/Math.PI,rad=Math.PI/180,ee=class gi extends AxisRendererBase{constructor(s,d){super(s,d)}async render(s,d){await super.render(s,d);const m=this.plot.defaultAngleAxis,f=this.plot.defaultMagnitudeAxis;if(!m)throw new Error("Angle axis should not be undefined.");m.updateActualMaxMin();const g=Math.abs(s.plotModel.plotArea.top-f.midPoint.y),x=Math.abs(s.plotModel.plotArea.bottom-f.midPoint.y),w=Math.abs(s.plotModel.plotArea.left-f.midPoint.x),C=Math.abs(s.plotModel.plotArea.right-f.midPoint.x),A=s.plotModel.plotArea.offset(-f.midPoint.x,-f.midPoint.y),_=-degree*Math.atan2(A.top,A.right);let M=-degree*Math.atan2(A.top,A.left),P=360-degree*Math.atan2(A.bottom,A.left);const E=360-degree*Math.atan2(A.bottom,A.right);M<0&&(M+=360),P>360&&(P-=360);const R=Math.sqrt(Math.pow(A.top,2)+Math.pow(A.right,2)),B=Math.sqrt(Math.pow(A.top,2)+Math.pow(A.left,2)),z=Math.sqrt(Math.pow(A.bottom,2)+Math.pow(A.left,2)),F=Math.sqrt(Math.pow(A.bottom,2)+Math.pow(A.right,2));if(d===0&&this.minorPen){const I=this.minorPen;for(const L of this.minorTickValues){const W=s.transform(L);let G=0,q=90,K=90,Z=180,J=180,te=270,Q=270,me=360;const Xe=C/W,Ve=g/W,Ye=w/W,qe=x/W;W>C&&(me=360-degree*Math.acos(Xe),G=degree*Math.acos(Xe)),W>g&&(q=degree*Math.asin(Ve),K=180-degree*Math.asin(Ve)),W>w&&(Z=180-degree*Math.acos(Ye),J=180+degree*Math.acos(Ye)),W>x&&(te=180+degree*Math.asin(qe),Q=360-degree*Math.asin(qe)),W<=R&&(G<_&&await this.renderTickArc(s,m,L,I,G+m.offset,_+m.offset),_<q&&await this.renderTickArc(s,m,L,I,_+m.offset,q+m.offset)),W<=B&&(K<M&&await this.renderTickArc(s,m,L,I,K+m.offset,M+m.offset),M<Z&&await this.renderTickArc(s,m,L,I,M+m.offset,Z+m.offset)),W<=z&&(J<P&&await this.renderTickArc(s,m,L,I,J+m.offset,P+m.offset),P<te&&await this.renderTickArc(s,m,L,I,P+m.offset,te+m.offset)),W<=F&&(Q<E&&await this.renderTickArc(s,m,L,I,Q+m.offset,E+m.offset),E<me&&await this.renderTickArc(s,m,L,I,E+m.offset,me+m.offset))}}if(d===0&&this.majorPen){const I=this.majorPen;for(const L of this.majorTickValues){const W=s.transform(L);let G=0,q=90,K=90,Z=180,J=180,te=270,Q=270,me=360;const Xe=C/W,Ve=g/W,Ye=w/W,qe=x/W;W>C&&(me=360-degree*Math.acos(Xe),G=degree*Math.acos(Xe)),W>g&&(q=degree*Math.asin(Ve),K=180-degree*Math.asin(Ve)),W>w&&(Z=180-degree*Math.acos(Ye),J=180+degree*Math.acos(Ye)),W>x&&(te=180+degree*Math.asin(qe),Q=360-degree*Math.asin(qe)),W<=R&&(G<_&&await this.renderTickArc(s,m,L,I,G+m.offset,_+m.offset),_<q&&await this.renderTickArc(s,m,L,I,_+m.offset,q+m.offset)),W<=B&&(K<M&&await this.renderTickArc(s,m,L,I,K+m.offset,M+m.offset),M<Z&&await this.renderTickArc(s,m,L,I,M+m.offset,Z+m.offset)),W<=z&&(J<P&&await this.renderTickArc(s,m,L,I,J+m.offset,P+m.offset),P<te&&await this.renderTickArc(s,m,L,I,P+m.offset,te+m.offset)),W<=F&&(Q<E&&await this.renderTickArc(s,m,L,I,Q+m.offset,E+m.offset),E<me&&await this.renderTickArc(s,m,L,I,E+m.offset,me+m.offset))}}if(d===1){const I=RenderingExtensions.autoResetClip(this.renderContext,OxyRect.fromScreenPoints(s.screenMin,s.screenMax));for(const L of this.majorLabelValues)await this.renderTickText(s,L,m);I.dispose()}}static getActualAngle(s,d){const m=s.transformPoint(0,d.angle,d),f=s.transformPoint(1,d.angle,d);return Math.atan2(f.y-m.y,f.x-m.x)}static getTickTextAligment(s){let d=HorizontalAlignment.Center,m=VerticalAlignment.Bottom;return s>3*Math.PI/4||s<-3*Math.PI/4?(d=HorizontalAlignment.Center,m=VerticalAlignment.Top):s<-Math.PI/4?(d=HorizontalAlignment.Right,m=VerticalAlignment.Middle):s>Math.PI/4?(d=HorizontalAlignment.Left,m=VerticalAlignment.Middle):(d=HorizontalAlignment.Center,m=VerticalAlignment.Bottom),[d,m]}async renderTickArc(s,d,m,f,g,x){let w=gi.maxSegments*Math.abs(x-g)/360;(d.fractionUnit===Math.PI||d.actualMaximum===2*Math.PI)&&(w=gi.maxSegments*Math.abs(x-g)/(2*Math.PI),g*=rad,x*=rad),w=Math.max(w,2),w=Math.min(w,gi.maxSegments);const C=Math.abs(x-g)/(w-1),A=[];for(let _=0;_<w;_++){const M=g+_*C,P=s.transformPoint(m,M,d);A.push(P)}await this.renderContext.drawLine(A,f.color,f.thickness,s.edgeRenderingMode,f.actualDashArray)}async renderTickText(s,d,m){const f=gi.getActualAngle(s,m),g=s.axisTickToLabelDistance*Math.sin(f),x=-s.axisTickToLabelDistance*Math.cos(f),[w,C]=gi.getTickTextAligment(f);let A=s.transformPoint(d,m.angle,m);A=new ScreenPoint(A.x+g,A.y+x);const _=s.formatValue(d);await MathRenderingExtensions.drawMathText(this.renderContext,A,_,s.actualTextColor,s.actualFont,s.actualFontSize,s.actualFontWeight,s.angle,w,C)}};D(ee,"maxSegments",180);let MagnitudeAxisFullPlotAreaRenderer=ee;class LogarithmicAxis extends Axis{constructor(s){super(s),D(this,"base"),D(this,"powerPadding"),D(this,"logActualMaximum",0),D(this,"logActualMinimum",0),D(this,"logClipMaximum",0),D(this,"logClipMinimum",0),this.powerPadding=!0,this.base=10,this.filterMinValue=0,s&&Object.assign(this,removeUndef(s))}getTickValues(){let s=[],d=[],m=[];const f=Math.abs(this.logClipMaximum-this.logClipMinimum),g=Math.abs(this.isVertical()?this.screenMax.y-this.screenMin.y:this.screenMax.x-this.screenMin.x)/this.intervalLength/f,x=1/Math.floor(g),w=Math.round(this.base);if(g<.75){const C=Math.pow(2,Math.ceil(Math.log(1/g)/Math.log(2)));s=this.decadeTicks(C),m=this.decadeTicks(Math.ceil(C/8))}else if(Math.abs(this.base-w)>1e-10)s=this.decadeTicks(x),m=this.decadeTicks(.5*x);else if(g<2)s=this.decadeTicks(),m=this.subdividedDecadeTicks();else{if(g>this.base*1.5)return super.getTickValues();{const C=this.logSubdividedDecadeTicks(!1);if(C.length<2)return super.getTickValues();const A=this.logCalculateMinorCandidates(C,x);m=this.powList(A,!0),s=this.alignTicksToCandidates(C,x)}}return d=s,m=AxisUtilities.filterRedundantMinorTicks(s,m),{majorLabelValues:d,majorTickValues:s,minorTickValues:m}}isXyAxis(){return!0}isLogarithmic(){return!0}pan(s,d){if(!this.isPanEnabled)return;const m=this.isHorizontal(),f=this.inverseTransform(m?s.x:s.y),g=this.inverseTransform(m?d.x:d.y);if(Math.abs(g)<=0)return;const x=this.actualMinimum,w=this.actualMaximum,C=f/g;let A=this.actualMinimum*C,_=this.actualMaximum*C;A<this.absoluteMinimum&&(A=this.absoluteMinimum,_=A*this.actualMaximum/this.actualMinimum),_>this.absoluteMaximum&&(_=this.absoluteMaximum,A=_*this.actualMinimum/this.actualMaximum),this.viewMinimum=A,this.viewMaximum=_;const M=this.actualMinimum-x,P=this.actualMaximum-w;this.onAxisChanged({changeType:AxisChangeTypes.Pan,deltaMinimum:M,deltaMaximum:P})}inverseTransform(s){return Math.exp(s/this.scale+this.offset)}transform(s){return s<=0?-1:(Math.log(s)-this.offset)*this.scale}zoomAt(s,d){if(!this.isZoomEnabled)return;const m=this.actualMinimum,f=this.actualMaximum,g=this.preTransform(d),x=this.preTransform(this.actualMinimum)-g,w=this.preTransform(this.actualMaximum)-g,C=this.postInverseTransform(x/s+g),A=this.postInverseTransform(w/s+g),_=Math.max(C,this.absoluteMinimum),M=Math.min(A,this.absoluteMaximum);this.viewMinimum=_,this.viewMaximum=M,this.updateActualMaxMin();const P=this.actualMinimum-m,E=this.actualMaximum-f;this.onAxisChanged({changeType:AxisChangeTypes.Zoom,deltaMinimum:P,deltaMaximum:E})}powList(s,d=!1){return s.filter(m=>!d||!(m<this.logClipMinimum)).filter(m=>!d||!(m>this.logClipMaximum)).map(m=>Math.pow(this.base,m))}logList(s,d=!1){return s.filter(m=>!d||!(m<this.clipMinimum)).filter(m=>!d||!(m>this.clipMaximum)).map(m=>Math.log(m)/Math.log(this.base))}decadeTicks(s=1){return this.powList(this.logDecadeTicks(s))}logDecadeTicks(s=1){const d=[];if(s<=0)return d;let m=Number.NaN;for(let f=Math.ceil(this.logClipMinimum);f<=this.logClipMaximum&&!(f<=m);f+=s)m=f,f>=this.logClipMinimum&&d.push(f);return d}logSubdividedDecadeTicks(s=!0){return this.logList(this.subdividedDecadeTicks(s))}subdividedDecadeTicks(s=!0){const d=[];for(let m=Math.floor(this.logClipMinimum);!(m>this.logClipMaximum);m++){const f=Math.pow(this.base,m);for(let g=1;g<this.base;g++){const x=f*g;if(!(s&&x<this.clipMinimum)){if(s&&x>this.clipMaximum)break;d.push(f*g)}}}return d}alignTicksToCandidates(s,d){return this.powList(this.logAlignTicksToCandidates(s,d))}logAlignTicksToCandidates(s,d){const m=[];let f=1,g=Number.NaN;for(let x=Math.floor(this.logClipMinimum);;x+=d){if(x<this.logClipMinimum-d)continue;if(x>this.logClipMaximum+d)break;for(;f<s.length-1&&s[f]<x;)f++;const w=Math.abs(s[f]-x)<Math.abs(s[f-1]-x)?s[f]:s[f-1];w!=g&&w>=this.logClipMinimum&&w<=this.logClipMaximum&&m.push(w),g=w}return m}logCalculateMinorCandidates(s,d){const m=[];for(let f=1;f<s.length;f++){const g=s[f-1],x=s[f];if(!(x<this.logClipMinimum)){if(g>this.logClipMaximum)break;(x-g)/d>2&&this.logSubdivideInterval(m,this.base,g,x),m.push(x)}}return m}logSubdivideInterval(s,d,m,f){let g=1;const x=Math.round(this.base);if(d<2)return;if(Math.abs(this.base-x)>this.base*1e-10)g=Math.round(d);else if(x&x-1)for(x!=10&&(g=x);!(g>=d||(g*=2,g>=d)||(g=Math.round(g*2.5),g>=d));)g*=2;else for(;g<d;)g*=2;const w=Math.pow(this.base,m),C=Math.pow(this.base,f);for(let A=1;A<g;A++){const _=A/g,M=Math.log(w+(C-w)*_)/Math.log(this.base);s.push(M)}}updateActualMaxMin(){if(this.powerPadding){const s=Math.log(this.base),d=Math.floor(Math.log(this.actualMinimum)/s),m=Math.ceil(Math.log(this.actualMaximum)/s);isNaN(this.actualMinimum)||(this.actualMinimum=round(Math.exp(d*s),14)),isNaN(this.actualMaximum)||(this.actualMaximum=round(Math.exp(m*s),14))}super.updateActualMaxMin(),this.actualMinimum<=0&&(this.actualMinimum=.1)}actualMaximumAndMinimumChangedOverride(){this.logActualMinimum=log$1(this.actualMinimum,this.base),this.logActualMaximum=log$1(this.actualMaximum,this.base),this.logClipMinimum=log$1(this.clipMinimum,this.base),this.logClipMaximum=log$1(this.clipMaximum,this.base)}postInverseTransform(s){return Math.exp(s)}preTransform(s){if(s<=0)throw new Error("Value should be positive.");return s<=0?0:Math.log(s)}coerceActualMaxMin(){(isNaN(this.actualMinimum)||isInfinity(this.actualMinimum))&&(this.actualMinimum=1),this.actualMinimum<=0&&(this.actualMinimum=1),this.actualMaximum<=this.actualMinimum&&(this.actualMaximum=this.actualMinimum*100),super.coerceActualMaxMin()}calculateActualMaximum(){let s=this.dataMaximum;if(this.dataMaximum-this.dataMinimum<Number.EPSILON){const d=this.dataMaximum>0?this.dataMaximum:1;s+=d*.5}if(!isNaN(this.dataMinimum)&&!isNaN(s)){const d=s,m=this.dataMinimum;return Math.pow(d,this.maximumPadding+1)*(m>Number.EPSILON?Math.pow(m,-this.maximumPadding):1)}return s}calculateActualMinimum(){let s=this.dataMinimum;if(this.dataMaximum-this.dataMinimum<Number.EPSILON){const d=this.dataMaximum>0?this.dataMaximum:1;s-=d*.5}if(!isNaN(this.actualMaximum)){const d=this.actualMaximum,m=s,f=this.maximumPadding;return Math.pow(m,1+this.minimumPadding-this.minimumPadding*f/(1+f))*Math.pow(d,-this.minimumPadding/(1+f))}return s}}var DateTimeIntervalType=(a=>(a[a.Auto=0]="Auto",a[a.Manual=1]="Manual",a[a.Milliseconds=2]="Milliseconds",a[a.Seconds=3]="Seconds",a[a.Minutes=4]="Minutes",a[a.Hours=5]="Hours",a[a.Days=6]="Days",a[a.Weeks=7]="Weeks",a[a.Months=8]="Months",a[a.Years=9]="Years",a))(DateTimeIntervalType||{});const Lt=class ri extends LinearAxis{constructor(s){super(s),D(this,"actualIntervalType",DateTimeIntervalType.Auto),D(this,"actualMinorIntervalType",DateTimeIntervalType.Auto),D(this,"_dateService"),D(this,"firstDayOfWeek"),D(this,"intervalType"),D(this,"minorIntervalType",DateTimeIntervalType.Auto),D(this,"timeZone"),this.position=AxisPosition.Bottom,this.intervalType=DateTimeIntervalType.Auto,this.firstDayOfWeek=DayOfWeek.Monday,this._dateService=getDateService(),s&&Object.assign(this,removeUndef(s))}static createDataPoint(s,d){return new DataPoint(ri.toDouble(s),d)}static toDateTime(s){return isNaN(s)||s<ri.MinDayValue||s>ri.MaxDayValue?new Date:getDateService().addTimespan(ri.TimeOrigin,TimeSpan.fromDays(s-1))}static toDouble(s){return getDateService().diff(s,ri.TimeOrigin).totalDays+1}itemToDouble(s){return s instanceof Date?ri.toDouble(s):super.itemToDouble(s)}getTickValues(){let s=this.createDateTimeTickValues(this.clipMinimum,this.clipMaximum,this.actualMinorStep,this.actualMinorIntervalType);const d=this.createDateTimeTickValues(this.clipMinimum,this.clipMaximum,this.actualMajorStep,this.actualIntervalType),m=d;return s=AxisUtilities.filterRedundantMinorTicks(d,s),{majorLabelValues:m,majorTickValues:d,minorTickValues:s}}getValue(s){const d=ri.toDateTime(s);return this.timeZone?this._dateService.convertTime(d,this.timeZone):d}updateIntervals(s){super.updateIntervals(s);const d=!isNullOrUndef(this.stringFormatter);switch(this.actualIntervalType){case DateTimeIntervalType.Years:this.actualMinorStep=31,this.actualMinorIntervalType=DateTimeIntervalType.Years,d||(this.actualStringFormatter=m=>this._dateService.format(m,"YYYY"));break;case DateTimeIntervalType.Months:this.actualMinorIntervalType=DateTimeIntervalType.Months,d||(this.actualStringFormatter=m=>this._dateService.format(m,"YYYY-MM-DD"));break;case DateTimeIntervalType.Weeks:this.actualMinorIntervalType=DateTimeIntervalType.Days,this.actualMajorStep=7,this.actualMinorStep=1,d||(this.actualStringFormatter=m=>this._dateService.format(m,"YYYY/ww"));break;case DateTimeIntervalType.Days:this.actualMinorStep=this.actualMajorStep,d||(this.actualStringFormatter=m=>this._dateService.format(m,"YYYY-MM-DD"));break;case DateTimeIntervalType.Hours:this.actualMinorStep=this.actualMajorStep,d||(this.actualStringFormatter=m=>this._dateService.format(m,"HH:mm"));break;case DateTimeIntervalType.Minutes:this.actualMinorStep=this.actualMajorStep,d||(this.actualStringFormatter=m=>this._dateService.format(m,"HH:mm"));break;case DateTimeIntervalType.Seconds:this.actualMinorStep=this.actualMajorStep,d||(this.actualStringFormatter=m=>this._dateService.format(m,"HH:mm:ss"));break;case DateTimeIntervalType.Milliseconds:this.actualMinorStep=this.actualMajorStep,d||(this.actualStringFormatter=m=>this._dateService.format(m,"HH:mm:ss.SSS"));break;case DateTimeIntervalType.Manual:break;case DateTimeIntervalType.Auto:break}}getDefaultStringFormatter(){return s=>this._dateService.format(s,"yyyy-MM-dd")}formatValueOverride(s){let d=ri.toDateTime(s);this.timeZone&&(d=this._dateService.convertTime(d,this.timeZone));const m=this.actualStringFormatter;return m?m(d):d.toLocaleDateString()}calculateActualInterval(s,d,m,f,g){const x=.041666666666666664,w=x/60,C=w/60,A=C/1e3;g=Math.abs(this.clipMinimum-this.clipMaximum);const _=[A,2*A,10*A,100*A,C,2*C,5*C,10*C,30*C,w,2*w,5*w,10*w,30*w,x,4*x,8*x,12*x,1,2*1,5*1,7,2*7,30.5,2*30.5,3*30.5,4*30.5,6*30.5,365.25];let M=_[0];for(m=Math.max(m,0),f=Math.min(f,Math.max(Math.floor(s/d),2));!(g/M<f);){let P=_.find(E=>E>M);if(isUndef(P))throw new Error(`cannot calculate interval,range=${g}`);if(Math.abs(P)<=0&&(P=M*2),g/P<m)break;M=P}if(this.actualIntervalType=this.intervalType,this.actualMinorIntervalType=this.minorIntervalType,this.intervalType===DateTimeIntervalType.Auto&&(this.actualIntervalType=DateTimeIntervalType.Milliseconds,M>=1/24/60/60&&(this.actualIntervalType=DateTimeIntervalType.Seconds),M>=1/24/60&&(this.actualIntervalType=DateTimeIntervalType.Minutes),M>=1/24&&(this.actualIntervalType=DateTimeIntervalType.Hours),M>=1&&(this.actualIntervalType=DateTimeIntervalType.Days),M>=30&&(this.actualIntervalType=DateTimeIntervalType.Months),g>=365.25&&(this.actualIntervalType=DateTimeIntervalType.Years)),this.actualIntervalType===DateTimeIntervalType.Months){const P=g/30.5;M=super.calculateActualInterval(s,d,this.minimumMajorIntervalCount,this.maximumMajorIntervalCount,P)}if(this.actualIntervalType===DateTimeIntervalType.Years){const P=g/365.25;M=super.calculateActualInterval(s,d,this.minimumMajorIntervalCount,this.maximumMajorIntervalCount,P)}if(this.actualMinorIntervalType===DateTimeIntervalType.Auto)switch(this.actualIntervalType){case DateTimeIntervalType.Years:this.actualMinorIntervalType=DateTimeIntervalType.Months;break;case DateTimeIntervalType.Months:this.actualMinorIntervalType=DateTimeIntervalType.Days;break;case DateTimeIntervalType.Weeks:this.actualMinorIntervalType=DateTimeIntervalType.Days;break;case DateTimeIntervalType.Days:this.actualMinorIntervalType=DateTimeIntervalType.Hours;break;case DateTimeIntervalType.Hours:this.actualMinorIntervalType=DateTimeIntervalType.Minutes;break;default:this.actualMinorIntervalType=DateTimeIntervalType.Days;break}return M}createDateTickValues(s,d,m,f){const g=[];let x=ri.toDateTime(s);if(!x)return g;let w=0;switch(f){case DateTimeIntervalType.Weeks:w=this._dateService.dayOfWeek(x),x=this._dateService.addTimespan(x,TimeSpan.fromDays(-w+this.firstDayOfWeek));break;case DateTimeIntervalType.Months:x=new Date(x.getFullYear(),x.getMonth(),1);break;case DateTimeIntervalType.Years:x=new Date(x.getFullYear(),0,1);break}const C=this._dateService.addTimespan(ri.toDateTime(d),TimeSpan.fromMilliseconds(1));if(!C)return g;let A=x;const _=m*.001,M=ri.toDateTime(s-_),P=ri.toDateTime(d+_);if(!M||!P)return g;for(;A<C;)switch(A>M&&A<P&&g.push(ri.toDouble(A)),f){case DateTimeIntervalType.Months:A=this._dateService.addMonths(A,Math.ceil(m));break;case DateTimeIntervalType.Years:A=this._dateService.addYears(A,Math.ceil(m));break;default:A=this._dateService.addTimespan(A,TimeSpan.fromDays(m));break}return g}createDateTimeTickValues(s,d,m,f){return f>DateTimeIntervalType.Days?this.createDateTickValues(s,d,m,f):this.createTickValues(s,d,m)}};D(Lt,"TimeOrigin",new Date(Date.UTC(1901,0,1,0,0,0))),D(Lt,"MaxDayValue",TimeSpan.fromMilliseconds(DateTime_MaxValue.getTime()-Lt.TimeOrigin.getTime()).totalDays),D(Lt,"MinDayValue",TimeSpan.fromMilliseconds(DateTime_MinValue.getTime()-Lt.TimeOrigin.getTime()).totalDays);let DateTimeAxis=Lt;class TimeSpanAxis extends LinearAxis{static toDouble(s){return s.totalSeconds}itemToDouble(s){return s instanceof TimeSpan?TimeSpanAxis.toDouble(s):super.itemToDouble(s)}static toTimeSpan(s){return TimeSpan.fromSeconds(s)}getValue(s){return TimeSpanAxis.toTimeSpan(s)}getDefaultStringFormatter(){function s(d){return d.toString().padStart(2,"0")}return d=>`${d.hours}:${s(d.minutes)}:${s(d.seconds)}`}formatValueOverride(s){const d=TimeSpanAxis.toTimeSpan(s),m=this.actualStringFormatter??this.stringFormatter;return m?m(d):d.toString()}calculateActualInterval(s,d,m,f){const g=Math.abs(this.clipMinimum-this.clipMaximum);let x=1;const w=[1,5,10,30,60,120,300,600,900,1200,1800,3600];for(m=Math.max(m,0),f=Math.min(f,Math.max(Math.floor(s/d),2));!(g/x<f);){let C=w.find(A=>A>x);if(C||(C=x*2),g/C<m)break;x=C}return x}}class LinearColorAxis extends LinearAxis{constructor(s){super(s),D(this,"invalidNumberColor"),D(this,"highColor"),D(this,"lowColor"),D(this,"palette"),D(this,"renderAsImage",!1),this.position=AxisPosition.None,this.axisDistance=20,this.isPanEnabled=!1,this.isZoomEnabled=!1,this.palette=OxyPalettes.viridis(),this.lowColor=OxyColors.Undefined,this.highColor=OxyColors.Undefined,this.invalidNumberColor=OxyColors.Gray,s&&Object.assign(this,removeUndef(s))}isXyAxis(){return!1}getColor(s){return assertInteger(s,"paletteIndex"),s===Number_MIN_VALUE?this.invalidNumberColor:s===0?this.lowColor:s===this.palette.colors.length+1?this.highColor:this.palette.colors[s-1]}getColors(){return[this.lowColor,...this.palette.colors,this.highColor]}getPaletteIndex(s){if(isNaN(s))return Number_MIN_VALUE;if(!this.lowColor.isUndefined()&&s<this.clipMinimum)return 0;if(!this.highColor.isUndefined()&&s>this.clipMaximum)return this.palette.colors.length+1;let d=1+Math.floor((s-this.clipMinimum)/(this.clipMaximum-this.clipMinimum)*this.palette.colors.length);return d<1&&(d=1),d>this.palette.colors.length&&(d=this.palette.colors.length),d}async render(s,d){if(this.position!==AxisPosition.None){if(this.palette===void 0)throw new Error("No Palette defined for color axis.");if(d===0){const m=this.axisDistance;let f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.top;const x=this.majorTickSize-2,w=this.majorTickSize-2;switch(this.position){case AxisPosition.Left:f=this.plotModel.plotArea.left-this.positionTierMinShift-x-m,g=this.plotModel.plotArea.top;break;case AxisPosition.Right:f=this.plotModel.plotArea.right+this.positionTierMinShift+m,g=this.plotModel.plotArea.top;break;case AxisPosition.Top:f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.top-this.positionTierMinShift-w-m;break;case AxisPosition.Bottom:f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.bottom+this.positionTierMinShift+m;break}if(this.renderAsImage){const C=this.transform(this.clipMaximum)-this.transform(this.clipMinimum),A=C>0,_=Math.abs(C);if(this.isHorizontal()){const M=await this.generateColorAxisImage(A);await RenderingExtensions.drawImage(s,M,f,g,_,w,1,!0)}else{const M=await this.generateColorAxisImage(A);await RenderingExtensions.drawImage(s,M,f,g,x,_,1,!0)}}else{const C=async(M,P,E)=>{const R=Math.min(M,P),B=Math.max(M,P)+.5;await s.drawRectangle(this.isHorizontal()?new OxyRect(R,g,B-R,w):new OxyRect(f,R,x,B-R),E,OxyColors.Undefined,0,this.edgeRenderingMode)},A=this.palette.colors.length;for(let M=0;M<A;M++){const P=this.transform(this.getLowValue(M)),E=this.transform(this.getHighValue(M));await C(P,E,this.palette.colors[M])}let _=10;if(this.isHorizontal()&&(_*=-1),!this.lowColor.isUndefined()){const M=this.transform(this.clipMinimum);await C(M,M+_,this.lowColor)}if(!this.highColor.isUndefined()){const M=this.transform(this.clipMaximum);await C(M,M-_,this.highColor)}}}await super.render(s,d)}}getHighValue(s){return this.getLowValue(s+1)}getLowValue(s){return s/this.palette.colors.length*(this.clipMaximum-this.clipMinimum)+this.clipMinimum}generateColorAxisImage(s){const d=this.palette.colors.length,m=this.isHorizontal()?d:1,f=this.isHorizontal()?1:d,g=new TwoDimensionalArray(m,f);for(let x=0;x<d;x++){const w=this.palette.colors[x],C=s?d-1-x:x;this.isHorizontal()?g.set(C,0,w):g.set(0,C,w)}return OxyImage.create(g,ImageFormat.Png)}}class RangeColorAxis extends LinearAxis{constructor(s){super(s),D(this,"ranges",[]),D(this,"invalidNumberColor"),D(this,"highColor"),D(this,"lowColor"),this.position=AxisPosition.None,this.axisDistance=20,this.lowColor=OxyColors.Undefined,this.highColor=OxyColors.Undefined,this.invalidNumberColor=OxyColors.Gray,this.isPanEnabled=!1,this.isZoomEnabled=!1,s&&Object.assign(this,s)}addRange(s,d,m){this.ranges.push({lowerBound:s,upperBound:d,color:m})}clearRanges(){this.ranges.length=0}getPaletteIndex(s){if(!this.lowColor.isUndefined()&&s<this.ranges[0].lowerBound)return-1;if(!this.highColor.isUndefined()&&s>this.ranges[this.ranges.length-1].upperBound)return this.ranges.length;for(let d=0;d<this.ranges.length;d++){const m=this.ranges[d];if(m.lowerBound<=s&&m.upperBound>s)return d}return Number_MIN_VALUE}getColor(s){return s===Number_MIN_VALUE?this.invalidNumberColor:s===-1?this.lowColor:s===this.ranges.length?this.highColor:this.ranges[s].color}async render(s,d){if(this.position!==AxisPosition.None){if(d===0){const m=this.axisDistance;let f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.top;const x=this.majorTickSize-2,w=this.majorTickSize-2,C=0;switch(this.position){case AxisPosition.Left:f=this.plotModel.plotArea.left-C-x-m,g=this.plotModel.plotArea.top;break;case AxisPosition.Right:f=this.plotModel.plotArea.right+C+m,g=this.plotModel.plotArea.top;break;case AxisPosition.Top:f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.top-C-w-m;break;case AxisPosition.Bottom:f=this.plotModel.plotArea.left,g=this.plotModel.plotArea.bottom+C+m;break}const A=async(E,R,B)=>{const z=Math.min(E,R),F=Math.max(E,R);await s.drawRectangle(this.isHorizontal()?new OxyRect(z,g,F-z,w):new OxyRect(f,z,x,F-z),B,OxyColors.Undefined,0,this.edgeRenderingMode)},_=this.transform(this.isReversed?this.actualMinimum:this.actualMaximum),M=this.transform(this.isReversed?this.actualMaximum:this.actualMinimum);for(const E of this.ranges){let R=this.transform(E.lowerBound),B=this.transform(E.upperBound);this.isHorizontal()?(R<M&&(R=M),B>_&&(B=_)):(R>M&&(R=M),B<_&&(B=_)),await A(R,B,E.color)}let P=10;if(this.isHorizontal()&&(P*=-1),!this.lowColor.isUndefined()){const E=this.transform(this.actualMinimum);await A(E,E+P,this.lowColor)}if(!this.highColor.isUndefined()){const E=this.transform(this.actualMaximum);await A(E,E-P,this.highColor)}}await new HorizontalAndVerticalAxisRenderer(s,this.plotModel).render(this,d)}}}class MagnitudeAxisFullPlotArea extends MagnitudeAxis{constructor(s){super(s),D(this,"_midShiftH",0),D(this,"_midShiftV",0),this.position=AxisPosition.None,this.isPanEnabled=!0,this.isZoomEnabled=!1,this.majorGridlineStyle=LineStyle.Solid,this.minorGridlineStyle=LineStyle.Solid,s&&Object.assign(this,s)}get midShiftH(){return this._midShiftH}set midShiftH(s){this._midShiftH=s,this._midShiftH=Math.max(this._midShiftH,-.5),this._midShiftH=Math.min(this._midShiftH,.5)}get midShiftV(){return this._midShiftV}set midShiftV(s){this._midShiftV=s,this._midShiftV=Math.max(this._midShiftV,-.5),this._midShiftV=Math.min(this._midShiftV,.5)}async render(s,d){await new MagnitudeAxisFullPlotAreaRenderer(s,this.plotModel).render(this,d)}getTickValues(){const s=OxyRect.fromScreenPoints(this.screenMin,this.screenMax),d=s.topLeft.distanceTo(this.midPoint),m=s.topRight.distanceTo(this.midPoint),f=s.bottomRight.distanceTo(this.midPoint),g=s.bottomLeft.distanceTo(this.midPoint);let x=Math.max(d,m);x=Math.max(x,f),x=Math.max(x,g);const w=this.inverseTransform(x),C=AxisUtilities.createTickValues(this.actualMinimum,w,this.actualMajorStep);let A=AxisUtilities.createTickValues(this.actualMinimum,w,this.actualMinorStep);return A=AxisUtilities.filterRedundantMinorTicks(C,A),{majorLabelValues:C,majorTickValues:C,minorTickValues:A}}updateTransform(s){const d=s.left,m=s.right,f=s.bottom,g=s.top;this.screenMin=new ScreenPoint(d,g),this.screenMax=new ScreenPoint(m,f),this.midPoint=new ScreenPoint((d+m)/2+this.midShiftH*s.width,(f+g)/2+this.midShiftV*s.height);const x=Math.min(Math.abs(m-d),Math.abs(g-f));let w=0,C=x*.5;const A=C-w;C=w+this.endPosition*A,w=w+this.startPosition*A;const _=this.isReversed?-1:1;this.minimumDataMargin>0&&(w+=this.minimumDataMargin*_),this.maximumDataMargin>0&&(C-=this.maximumDataMargin*_),this.actualMaximum-this.actualMinimum<=0&&(this.actualMaximum=this.actualMinimum+1);const M=this.preTransform(this.actualMaximum),P=this.preTransform(this.actualMinimum),E=w-C;let R,B;Math.abs(E)>Number.EPSILON?R=w/E*M-C/E*P:R=0;const z=M-P;Math.abs(z)>Number.EPSILON?B=(C-w)/z:B=1,this.setTransform(B,R),this.minimumDataMargin>0?this.clipMinimum=this.inverseTransform(0):this.clipMinimum=this.actualMinimum,this.maximumDataMargin>0?this.clipMaximum=this.inverseTransform(x*.5):this.clipMaximum=this.actualMaximum,this.actualMaximumAndMinimumChangedOverride()}pan(s,d){if(!this.isPanEnabled)return;const m=d.x-s.x,f=d.y-s.y,g=m/this.plotModel.plotArea.width,x=f/this.plotModel.plotArea.height;this.midShiftH+=g,this.midShiftV+=x,this.onAxisChanged({changeType:AxisChangeTypes.Pan,deltaMinimum:0,deltaMaximum:0})}zoomAt(s,d){this.isZoomEnabled&&super.zoomAt(s,0)}}class ColorAxisExtensions{static getColor(s,d){return s.getColor(s.getPaletteIndex(d))}}class CategoryColorAxis extends CategoryAxis{constructor(s){super(s),D(this,"invalidCategoryColor",OxyColors.Undefined),D(this,"palette"),this.palette=new OxyPalette,s&&Object.assign(this,s)}getColor(s){return s===-1?this.invalidCategoryColor:s>=this.palette.colors.length?this.invalidCategoryColor:this.palette.colors[s]}getPaletteIndex(s){return Math.floor(s)}async render(s,d){if(this.position!==AxisPosition.None){if(d===0){let m=this.plotModel.plotArea.left,f=this.plotModel.plotArea.top;const g=this.majorTickSize-2,x=this.majorTickSize-2;switch(this.position){case AxisPosition.Left:m=this.plotModel.plotArea.left-this.positionTierMinShift-g,f=this.plotModel.plotArea.top;break;case AxisPosition.Right:m=this.plotModel.plotArea.right+this.positionTierMinShift,f=this.plotModel.plotArea.top;break;case AxisPosition.Top:m=this.plotModel.plotArea.left,f=this.plotModel.plotArea.top-this.positionTierMinShift-x;break;case AxisPosition.Bottom:m=this.plotModel.plotArea.left,f=this.plotModel.plotArea.bottom+this.positionTierMinShift;break}const w=async(_,M,P)=>{const E=Math.min(_,M),R=Math.max(_,M);await s.drawRectangle(this.isHorizontal()?new OxyRect(E,f,R-E,x):new OxyRect(m,E,g,R-E),P,OxyColors.Undefined,0,this.edgeRenderingMode)},{majorLabelValues:C}=this.getTickValues(),A=this.palette.colors.length;for(let _=0;_<A;_++){const M=this.transform(this.getLowValue(_,C)),P=this.transform(this.getHighValue(_,C));await w(M,P,this.palette.colors[_])}}await super.render(s,d)}}getHighValue(s,d){return s>=this.palette.colors.length-1?this.clipMaximum:(d[s]+d[s+1])/2}getLowValue(s,d){return s===0?this.clipMinimum:(d[s-1]+d[s])/2}}const ie=class Pi{constructor(s,d){D(this,"_x"),D(this,"_y"),this._x=s,this._y=d}get x(){return this._x}get y(){return this._y}equals(s){return this._x===s._x&&this._y===s._y}plus(s){const d=this;return new Pi(d._x+s.x,d._y+s.y)}minus(s){const d=this;return new DataVector(d._x-s._x,d._y-s._y)}minusVector(s){const d=this;return new Pi(d._x-s.x,d._y-s.y)}toString(){return`${this._x} ${this._y}`}isDefined(){return this._x===this._x&&this._y===this._y}};D(ie,"Undefined",new ie(NaN,NaN)),D(ie,"Zero",new ie(0,0));let DataPoint=ie;const ne=class wi{constructor(s,d){D(this,"_x"),D(this,"_y"),this._x=s,this._y=d}get length(){return Math.sqrt(this._x*this._x+this._y*this._y)}get lengthSquared(){return this._x*this._x+this._y*this._y}get x(){return this._x}get y(){return this._y}times(s){const d=this;return new wi(d._x*s,d._y*s)}plus(s){const d=this;return new wi(d._x+s._x,d._y+s._y)}minus(s){const d=this;return new wi(d._x-s._x,d._y-s._y)}negate(){const s=this;return new wi(-s._x,-s._y)}equals(s){return this._x===s._x&&this._y===s._y}toString(){return`${this._x} ${this._y}`}isDefined(){return this._x===this._x&&this._y===this._y}};D(ne,"Undefined",new ne(NaN,NaN));let DataVector=ne;function isDataPointProvider(a){return a.getDataPoint&&typeof a.getDataPoint=="function"}var MarkerType=(a=>(a[a.None=0]="None",a[a.Circle=1]="Circle",a[a.Square=2]="Square",a[a.Diamond=3]="Diamond",a[a.Triangle=4]="Triangle",a[a.Cross=5]="Cross",a[a.Plus=6]="Plus",a[a.Star=7]="Star",a[a.Custom=8]="Custom",a))(MarkerType||{}),PlotLengthUnit=(a=>(a[a.Data=0]="Data",a[a.ScreenUnits=1]="ScreenUnits",a[a.RelativeToViewport=2]="RelativeToViewport",a[a.RelativeToPlotArea=3]="RelativeToPlotArea",a))(PlotLengthUnit||{});class PlotLength{constructor(s,d){D(this,"_unit"),D(this,"_value"),this._value=s,this._unit=d}get value(){return this._value}get unit(){return this._unit}equals(s){return this._value===s.value&&this._unit===s.unit}}var CursorType=(a=>(a[a.Default=0]="Default",a[a.Pan=1]="Pan",a[a.ZoomRectangle=2]="ZoomRectangle",a[a.ZoomHorizontal=3]="ZoomHorizontal",a[a.ZoomVertical=4]="ZoomVertical",a))(CursorType||{});function newElementCollection(a){const s=[];return new Proxy(s,{deleteProperty:function(d,m){const f=d[m];return f&&f instanceof Element$1&&(f.parent=void 0),delete d[m],!0},set:function(d,m,f,g){return d[m]=f,m==="length"||f&&f instanceof Element$1&&(f.parent=a),!0}})}class HitTestArguments{constructor(s,d){D(this,"point"),D(this,"tolerance"),this.point=s,this.tolerance=d}}class ManipulatorBase{constructor(s){D(this,"view"),this.view=s}completed(s){}delta(s){}started(s){}}const he=class Di{constructor(){D(this,"selectionColor"),D(this,"currentMouseEventElement"),D(this,"currentTouchEventElement"),D(this,"keyDown"),D(this,"mouseDown"),D(this,"mouseMove"),D(this,"mouseUp"),D(this,"mouseEnter"),D(this,"mouseLeave"),D(this,"touchStarted"),D(this,"touchDelta"),D(this,"touchCompleted"),this.selectionColor=OxyColors.Yellow}hitTest(s){const d=this.getHitTestElements(),m=[];for(const f of d){const g=f.hitTest(s);g&&m.push(g)}return m}handleMouseDown(s,d){const m=new HitTestArguments(d.position,Di.mouseHitTolerance);for(const f of this.hitTest(m)){d.hitTestResult=f;const g=f.element;if(g.onMouseDown(d),d.handled){this.currentMouseEventElement=g;return}}d.handled||this.onMouseDown(s,d)}handleMouseMove(s,d){this.currentMouseEventElement&&this.currentMouseEventElement.onMouseMove(d),d.handled||this.onMouseMove(s,d)}handleMouseUp(s,d){this.currentMouseEventElement&&(this.currentMouseEventElement.onMouseUp(d),this.currentMouseEventElement=void 0),d.handled||this.onMouseUp(s,d)}handleMouseEnter(s,d){d.handled||this.onMouseEnter(s,d)}handleMouseLeave(s,d){d.handled||this.onMouseLeave(s,d)}handleTouchStarted(s,d){const m=new HitTestArguments(d.position,Di.mouseHitTolerance);for(const f of this.hitTest(m)){const g=f.element;if(g.onTouchStarted(d),d.handled){this.currentTouchEventElement=g;return}}d.handled||this.onTouchStarted(s,d)}handleTouchDelta(s,d){this.currentTouchEventElement&&this.currentTouchEventElement.onTouchDelta(d),d.handled||this.onTouchDelta(s,d)}handleTouchCompleted(s,d){this.currentTouchEventElement&&(this.currentTouchEventElement.onTouchCompleted(d),this.currentTouchEventElement=void 0),d.handled||this.onTouchCompleted(s,d)}handleKeyDown(s,d){for(const m of this.getHitTestElements())if(m.onKeyDown(d),d.handled)break;d.handled||this.onKeyDown(s,d)}onKeyDown(s,d){const m=this.keyDown;m&&m(s,d)}onMouseDown(s,d){const m=this.mouseDown;m&&m(s,d)}onMouseMove(s,d){const m=this.mouseMove;m&&m(s,d)}onMouseUp(s,d){const m=this.mouseUp;m&&m(s,d)}onMouseEnter(s,d){const m=this.mouseEnter;m&&m(s,d)}onMouseLeave(s,d){const m=this.mouseLeave;m&&m(s,d)}onTouchStarted(s,d){const m=this.touchStarted;m&&m(s,d)}onTouchDelta(s,d){const m=this.touchDelta;m&&m(s,d)}onTouchCompleted(s,d){const m=this.touchCompleted;m&&m(s,d)}};D(he,"DefaultSelectionColor",OxyColors.Yellow),D(he,"mouseHitTolerance",10);let Model=he;const ue=class Ti{constructor(){D(this,"selection",new Map)}static get Everything(){return Ti.EverythingSelection}isEverythingSelected(){return this===Ti.EverythingSelection}getSelectedItems(){return Array.from(this.selection.keys()).map(s=>s.Index)}getSelectedItemsByFeature(s){return Array.from(this.selection.keys()).filter(d=>d.Feature===s).map(d=>d.Index)}clear(){this.selection.clear()}isItemSelected(s,d=null){if(this.isEverythingSelected())return!0;const m=new SelectionItem(s,d);return this.hasSelection(m)}select(s,d=null){const m=new SelectionItem(s,d);this.setSelection(m,!0)}unselect(s,d=null){const m=new SelectionItem(s,d);if(!this.hasSelection(m))throw new Error(`Item ${s} and feature ${d} is not selected. Cannot unselect.`);this.deleteSelection(m)}getSameKey(s){for(const d of this.selection.keys())if(d.equals(s))return d}hasSelection(s){return!!this.getSameKey(s)}deleteSelection(s){const d=this.getSameKey(s);d&&this.selection.delete(d)}setSelection(s,d){const m=this.getSameKey(s)||s;this.selection.set(m,d)}};D(ue,"EverythingSelection",new ue);let Selection=ue;class SelectionItem{constructor(s,d){D(this,"index"),D(this,"feature"),this.index=s,this.feature=d}get Index(){return this.index}get Feature(){return this.feature}equals(s){return s.index===this.index&&s.feature===this.feature}}var SelectionMode=(a=>(a[a.All=0]="All",a[a.Single=1]="Single",a[a.Multiple=2]="Multiple",a))(SelectionMode||{});class InputCommandBinding{constructor(s,d){D(this,"gesture"),D(this,"command"),this.gesture=s,this.command=d}static fromKeyGesture(s,d,m){return new InputCommandBinding(new OxyKeyGesture(s,d),m)}static fromMouseGesture(s,d,m){return new InputCommandBinding(new OxyMouseDownGesture(s,d),m)}getGesture(){return this.gesture}getCommand(){return this.command}}class ControllerBase{constructor(){D(this,"inputCommandBindings",[]),D(this,"mouseDownManipulators",[]),D(this,"mouseHoverManipulators",[]),D(this,"touchManipulators",[])}handleGesture(s,d,m){const f=this.getCommand(d);return this.handleCommand(f,s,m)}handleMouseDown(s,d){if(s.actualModel&&(s.actualModel.handleMouseDown(this,d),d.handled))return!0;const m=this.getCommand(new OxyMouseDownGesture(d.changedButton,d.modifierKeys,d.clickCount));return this.handleCommand(m,s,d)}handleMouseEnter(s,d){if(s.actualModel&&(s.actualModel.handleMouseEnter(this,d),d.handled))return!0;const m=this.getCommand(new OxyMouseEnterGesture(d.modifierKeys));return this.handleCommand(m,s,d)}handleMouseLeave(s,d){if(s.actualModel&&(s.actualModel.handleMouseLeave(this,d),d.handled))return!0;for(const m of[...this.mouseHoverManipulators])m.completed(d),arrayRemoveFirst(this.mouseHoverManipulators,m);return d.handled}handleMouseMove(s,d){if(s.actualModel&&(s.actualModel.handleMouseMove(this,d),d.handled))return!0;for(const m of this.mouseDownManipulators)m.delta(d);for(const m of this.mouseHoverManipulators)m.delta(d);return d.handled}handleMouseUp(s,d){if(s.actualModel&&(s.actualModel.handleMouseUp(this,d),d.handled))return!0;for(const m of[...this.mouseDownManipulators])m.completed(d),arrayRemoveFirst(this.mouseDownManipulators,m);return d.handled}handleMouseWheel(s,d){const m=this.getCommand(new OxyMouseWheelGesture(d.modifierKeys));return this.handleCommand(m,s,d)}handleTouchStarted(s,d){if(s.actualModel&&(s.actualModel.handleTouchStarted(this,d),d.handled))return!0;const m=this.getCommand(new OxyTouchGesture);return this.handleCommand(m,s,d)}handleTouchDelta(s,d){if(s.actualModel&&(s.actualModel.handleTouchDelta(this,d),d.handled))return!0;for(const m of this.touchManipulators)m.delta(d);return d.handled}handleTouchCompleted(s,d){if(s.actualModel&&(s.actualModel.handleTouchCompleted(this,d),d.handled))return!0;for(const m of[...this.touchManipulators])m.completed(d),arrayRemoveFirst(this.touchManipulators,m);return d.handled}handleKeyDown(s,d){if(!s.actualModel)return!1;if(s.actualModel.handleKeyDown(this,d),d.handled)return!0;const m=this.getCommand(new OxyKeyGesture(d.key,d.modifierKeys));return this.handleCommand(m,s,d)}addMouseManipulator(s,d,m){this.mouseDownManipulators.push(d),d.started(m)}addHoverManipulator(s,d,m){this.mouseHoverManipulators.push(d),d.started(m)}addTouchManipulator(s,d,m){this.touchManipulators.push(d),d.started(m)}bindMouseDown(s,d){this.bindCore(s,d)}bindMouseEnter(s,d){this.bindCore(s,d)}bindMouseWheel(s,d){this.bindCore(s,d)}bindTouch(s,d){this.bindCore(s,d)}bindKey(s,d){this.bindCore(s,d)}unbindInput(s){arrayRemoveIf(this.inputCommandBindings,d=>d.getGesture().equals(s))}unbindViewCommand(s){arrayRemoveIf(this.inputCommandBindings,d=>d.getCommand()===s)}unbindAll(){this.inputCommandBindings.length=0}bindCore(s,d){const m=this.inputCommandBindings.find(f=>f.getGesture().equals(s));m&&arrayRemoveFirst(this.inputCommandBindings,m),d&&this.inputCommandBindings.push(new InputCommandBinding(s,d))}getCommand(s){const d=this.inputCommandBindings.find(m=>m.getGesture().equals(s));return d?d.getCommand():void 0}handleCommand(s,d,m){return s?(s.execute(d,this,m),m.handled):!1}}class ControllerExtensions{static bindKeyDown(s,d,m,f=OxyModifierKeys.None){s.bindKey(new OxyKeyGesture(d,f),m)}static bindMouseDown(s,d,m,f=OxyModifierKeys.None,g=1){s.bindMouseDown(new OxyMouseDownGesture(d,f,g),m)}static bindTouchDown(s,d){s.bindTouch(new OxyTouchGesture,d)}static bindMouseEnter(s,d){s.bindMouseEnter(new OxyMouseEnterGesture,d)}static bindMouseWheel(s,d,m=OxyModifierKeys.None){s.bindMouseWheel(new OxyMouseWheelGesture(m),d)}static unbindMouseDown(s,d,m=OxyModifierKeys.None,f=1){s.unbindInput(new OxyMouseDownGesture(d,m,f))}static unbindKeyDown(s,d,m=OxyModifierKeys.None){s.unbindInput(new OxyKeyGesture(d,m))}static unbindMouseEnter(s){s.unbindInput(new OxyMouseEnterGesture)}static unbindTouchDown(s){s.unbindInput(new OxyTouchGesture)}static unbindMouseWheel(s){s.unbindInput(new OxyMouseWheelGesture)}}class DelegateViewCommand{constructor(s){D(this,"handler"),this.handler=s}execute(s,d,m){this.handler(s,d,m)}}var ImageFormat=(a=>(a[a.Png=0]="Png",a[a.Bmp=1]="Bmp",a[a.Jpeg=2]="Jpeg",a[a.Unknown=3]="Unknown",a))(ImageFormat||{});class OxyImage{constructor(s){D(this,"_data"),D(this,"uri"),D(this,"format",ImageFormat.Unknown),D(this,"width",0),D(this,"height",0),D(this,"bitsPerPixel",0),D(this,"dpiX",96),D(this,"dpiY",96),this._data=s}static async create(s,d,m,f){const g=getImageService(),x=s.height,w=s.width,C={pixels:s,palette:f,imageInfo:{width:w,height:x,bitsPerPixel:0,dpiX:m==null?void 0:m.dpiX,dpiY:m==null?void 0:m.dpiY,format:d}},A=await g.encode(C),_=new OxyImage(A);return _.width=w,_.height=x,_}get data(){return this._data}static getImageFormat(s){return s.length>=2&&s[0]===255&&s[1]===216?ImageFormat.Jpeg:s.length>=2&&s[0]===66&&s[1]===77?ImageFormat.Bmp:s.length>=4&&s[0]===137&&s[1]===80&&s[2]===78&&s[3]===71?ImageFormat.Png:ImageFormat.Unknown}}var OxyKey=(a=>(a[a.Space=0]="Space",a[a.Enter=1]="Enter",a[a.Escape=2]="Escape",a[a.Tab=3]="Tab",a[a.Backspace=4]="Backspace",a[a.Insert=5]="Insert",a[a.Delete=6]="Delete",a[a.Home=7]="Home",a[a.End=8]="End",a[a.Up=9]="Up",a[a.Down=10]="Down",a[a.Left=11]="Left",a[a.Right=12]="Right",a[a.PageUp=13]="PageUp",a[a.PageDown=14]="PageDown",a[a.A=15]="A",a[a.B=16]="B",a[a.C=17]="C",a[a.D=18]="D",a[a.E=19]="E",a[a.F=20]="F",a[a.G=21]="G",a[a.H=22]="H",a[a.I=23]="I",a[a.J=24]="J",a[a.K=25]="K",a[a.L=26]="L",a[a.M=27]="M",a[a.N=28]="N",a[a.O=29]="O",a[a.P=30]="P",a[a.Q=31]="Q",a[a.R=32]="R",a[a.S=33]="S",a[a.T=34]="T",a[a.U=35]="U",a[a.V=36]="V",a[a.W=37]="W",a[a.X=38]="X",a[a.Y=39]="Y",a[a.Z=40]="Z",a[a.D0=41]="D0",a[a.D1=42]="D1",a[a.D2=43]="D2",a[a.D3=44]="D3",a[a.D4=45]="D4",a[a.D5=46]="D5",a[a.D6=47]="D6",a[a.D7=48]="D7",a[a.D8=49]="D8",a[a.D9=50]="D9",a[a.NumPad0=51]="NumPad0",a[a.NumPad1=52]="NumPad1",a[a.NumPad2=53]="NumPad2",a[a.NumPad3=54]="NumPad3",a[a.NumPad4=55]="NumPad4",a[a.NumPad5=56]="NumPad5",a[a.NumPad6=57]="NumPad6",a[a.NumPad7=58]="NumPad7",a[a.NumPad8=59]="NumPad8",a[a.NumPad9=60]="NumPad9",a[a.Add=61]="Add",a[a.Subtract=62]="Subtract",a[a.Multiply=63]="Multiply",a[a.Divide=64]="Divide",a[a.Decimal=65]="Decimal",a[a.F1=66]="F1",a[a.F2=67]="F2",a[a.F3=68]="F3",a[a.F4=69]="F4",a[a.F5=70]="F5",a[a.F6=71]="F6",a[a.F7=72]="F7",a[a.F8=73]="F8",a[a.F9=74]="F9",a[a.F10=75]="F10",a[a.F11=76]="F11",a[a.F12=77]="F12",a[a.Unknown=78]="Unknown",a))(OxyKey||{}),OxyModifierKeys=(a=>(a[a.None=0]="None",a[a.Control=1]="Control",a[a.Alt=2]="Alt",a[a.Shift=4]="Shift",a[a.Windows=8]="Windows",a))(OxyModifierKeys||{}),OxyMouseButton=(a=>(a[a.None=0]="None",a[a.Left=1]="Left",a[a.Middle=2]="Middle",a[a.Right=3]="Right",a[a.XButton1=4]="XButton1",a[a.XButton2=5]="XButton2",a))(OxyMouseButton||{});class OxyKeyGesture{constructor(s,d=OxyModifierKeys.None){this.key=s,this.modifiers=d}equals(s){if(!(s instanceof OxyKeyGesture))return!1;const d=s;return d.modifiers===this.modifiers&&d.key===this.key}}class OxyMouseDownGesture{constructor(s,d=OxyModifierKeys.None,m=1){this.mouseButton=s,this.modifiers=d,this.clickCount=m}equals(s){if(!(s instanceof OxyMouseDownGesture))return!1;const d=s;return d.modifiers===this.modifiers&&d.mouseButton===this.mouseButton&&d.clickCount===this.clickCount}}class OxyMouseEnterGesture{constructor(s=OxyModifierKeys.None){this.modifiers=s}equals(s){return s instanceof OxyMouseEnterGesture?s.modifiers===this.modifiers:!1}}class OxyMouseWheelGesture{constructor(s=OxyModifierKeys.None){this.modifiers=s}equals(s){return s instanceof OxyMouseWheelGesture?s.modifiers===this.modifiers:!1}}class OxyShakeGesture{equals(s){return s instanceof OxyShakeGesture}}class OxyTouchGesture{equals(s){return s instanceof OxyTouchGesture}}var LegendPlacement=(a=>(a[a.Inside=0]="Inside",a[a.Outside=1]="Outside",a))(LegendPlacement||{}),LegendPosition=(a=>(a[a.TopLeft=0]="TopLeft",a[a.TopCenter=1]="TopCenter",a[a.TopRight=2]="TopRight",a[a.BottomLeft=3]="BottomLeft",a[a.BottomCenter=4]="BottomCenter",a[a.BottomRight=5]="BottomRight",a[a.LeftTop=6]="LeftTop",a[a.LeftMiddle=7]="LeftMiddle",a[a.LeftBottom=8]="LeftBottom",a[a.RightTop=9]="RightTop",a[a.RightMiddle=10]="RightMiddle",a[a.RightBottom=11]="RightBottom",a))(LegendPosition||{});const isLeftLegend=a=>a===6||a===7||a===8,isRightLegend=a=>a===9||a===10||a===11,isTopLegend=a=>a===0||a===1||a===2,isBottomLegend=a=>a===3||a===4||a===5;var LegendOrientation=(a=>(a[a.Horizontal=0]="Horizontal",a[a.Vertical=1]="Vertical",a))(LegendOrientation||{}),LegendItemOrder=(a=>(a[a.Normal=0]="Normal",a[a.Reverse=1]="Reverse",a))(LegendItemOrder||{}),LegendSymbolPlacement=(a=>(a[a.Left=0]="Left",a[a.Right=1]="Right",a))(LegendSymbolPlacement||{});class LegendBase extends PlotElement{constructor(s){super(s),D(this,"key"),D(this,"isLegendVisible",!1),D(this,"legendOrientation",0),D(this,"legendPadding",0),D(this,"legendSymbolLength",0),D(this,"legendSymbolMargin",0),D(this,"legendSymbolPlacement",0),D(this,"legendTitle"),D(this,"legendTitleColor",OxyColors.Undefined),D(this,"legendTitleFont"),D(this,"legendTitleFontSize",0),D(this,"legendTitleFontWeight",0),D(this,"legendArea",OxyRect.Empty),D(this,"legendSize",OxySize.Empty),D(this,"legendBackground",OxyColors.Undefined),D(this,"legendBorder",OxyColors.Undefined),D(this,"legendBorderThickness",0),D(this,"legendColumnSpacing",0),D(this,"legendFont"),D(this,"legendFontSize",0),D(this,"legendTextColor"),D(this,"legendFontWeight",0),D(this,"legendItemAlignment",HorizontalAlignment.Left),D(this,"legendItemOrder",0),D(this,"legendItemSpacing",0),D(this,"legendLineSpacing",0),D(this,"legendMargin",0),D(this,"legendMaxWidth",0),D(this,"legendMaxHeight",0),D(this,"legendPlacement",0),D(this,"legendPosition",0),D(this,"allowUseFullExtent",!1),D(this,"showInvisibleSeries",!1)}hitTestOverride(s){return this.legendHitTest(s)}}class Legend extends LegendBase{constructor(s){super(s),D(this,"legendBox"),D(this,"seriesPosMap",new Map),D(this,"groupNameFont"),D(this,"groupNameFontSize"),D(this,"groupNameFontWeight"),D(this,"seriesInvisibleTextColor"),this.isLegendVisible=!0,this.legendBox=OxyRect.Empty,this.key=void 0,this.groupNameFont=void 0,this.groupNameFontWeight=FontWeights.Normal,this.groupNameFontSize=NaN,this.legendTitleFont=void 0,this.legendTitleFontSize=NaN,this.legendTitleFontWeight=FontWeights.Bold,this.legendFont=void 0,this.legendFontSize=NaN,this.legendFontWeight=FontWeights.Normal,this.legendSymbolLength=16,this.legendSymbolMargin=4,this.legendPadding=8,this.legendColumnSpacing=8,this.legendItemSpacing=24,this.legendLineSpacing=0,this.legendMargin=8,this.legendBackground=OxyColors.Undefined,this.legendBorder=OxyColors.Undefined,this.legendBorderThickness=1,this.legendTextColor=OxyColors.Automatic,this.legendTitleColor=OxyColors.Automatic,this.legendMaxWidth=NaN,this.legendMaxHeight=NaN,this.legendPlacement=LegendPlacement.Inside,this.legendPosition=LegendPosition.RightTop,this.legendOrientation=LegendOrientation.Vertical,this.legendItemOrder=LegendItemOrder.Normal,this.legendItemAlignment=HorizontalAlignment.Left,this.legendSymbolPlacement=LegendSymbolPlacement.Left,this.showInvisibleSeries=!0,this.seriesInvisibleTextColor=OxyColor.fromAColor(64,this.legendTextColor),this.selectable=!0,this.selectionMode=SelectionMode.Single,s&&Object.assign(this,removeUndef(s))}legendHitTest(s){if(!this.isLegendVisible||!this.plotModel.isLegendVisible)return;const d=s.point;if(this.isPointInLegend(d)&&this.seriesPosMap&&this.seriesPosMap.size>0){for(const[m,f]of this.seriesPosMap)if(f.containsPoint(d)&&this.showInvisibleSeries){m.isVisible=!m.isVisible,this.plotModel.invalidatePlot(!1);break}}}isPointInLegend(s){return this.legendBox.containsPoint(s)}ensureLegendProperties(){switch(this.legendPosition){case LegendPosition.LeftTop:case LegendPosition.LeftMiddle:case LegendPosition.LeftBottom:case LegendPosition.RightTop:case LegendPosition.RightMiddle:case LegendPosition.RightBottom:this.legendOrientation===LegendOrientation.Horizontal&&(this.legendOrientation=LegendOrientation.Vertical);break}}async renderLegends(s){await this.renderOrMeasureLegends(s,this.legendArea)}async getLegendSize(s,d){const m=d.width,f=d.height;let g=await this.measureLegends(s,new OxySize(Math.max(0,m),Math.max(0,f)));return g=new OxySize(Math.max(0,g.width),Math.max(0,g.height)),g}getLegendRectangle(s){let d=0,m=0;if(this.legendPlacement===LegendPlacement.Outside){switch(this.legendPosition){case LegendPosition.LeftTop:case LegendPosition.LeftMiddle:case LegendPosition.LeftBottom:m=this.plotModel.plotAndAxisArea.left-s.width-this.legendMargin;break;case LegendPosition.RightTop:case LegendPosition.RightMiddle:case LegendPosition.RightBottom:m=this.plotModel.plotAndAxisArea.right+this.legendMargin;break;case LegendPosition.TopLeft:case LegendPosition.TopCenter:case LegendPosition.TopRight:d=this.plotModel.plotAndAxisArea.top-s.height-this.legendMargin;break;case LegendPosition.BottomLeft:case LegendPosition.BottomCenter:case LegendPosition.BottomRight:d=this.plotModel.plotAndAxisArea.bottom+this.legendMargin;break}const f=this.allowUseFullExtent?this.plotModel.plotAndAxisArea:this.plotModel.plotArea;switch(this.legendPosition){case LegendPosition.TopLeft:case LegendPosition.BottomLeft:m=f.left;break;case LegendPosition.TopRight:case LegendPosition.BottomRight:m=f.right-s.width;break;case LegendPosition.LeftTop:case LegendPosition.RightTop:d=f.top;break;case LegendPosition.LeftBottom:case LegendPosition.RightBottom:d=f.bottom-s.height;break;case LegendPosition.LeftMiddle:case LegendPosition.RightMiddle:d=(f.top+f.bottom-s.height)*.5;break;case LegendPosition.TopCenter:case LegendPosition.BottomCenter:m=(f.left+f.right-s.width)*.5;break}}else{switch(this.legendPosition){case LegendPosition.LeftTop:case LegendPosition.LeftMiddle:case LegendPosition.LeftBottom:m=this.plotModel.plotArea.left+this.legendMargin;break;case LegendPosition.RightTop:case LegendPosition.RightMiddle:case LegendPosition.RightBottom:m=this.plotModel.plotArea.right-s.width-this.legendMargin;break;case LegendPosition.TopLeft:case LegendPosition.TopCenter:case LegendPosition.TopRight:d=this.plotModel.plotArea.top+this.legendMargin;break;case LegendPosition.BottomLeft:case LegendPosition.BottomCenter:case LegendPosition.BottomRight:d=this.plotModel.plotArea.bottom-s.height-this.legendMargin;break}switch(this.legendPosition){case LegendPosition.TopLeft:case LegendPosition.BottomLeft:m=this.plotModel.plotArea.left+this.legendMargin;break;case LegendPosition.TopRight:case LegendPosition.BottomRight:m=this.plotModel.plotArea.right-s.width-this.legendMargin;break;case LegendPosition.LeftTop:case LegendPosition.RightTop:d=this.plotModel.plotArea.top+this.legendMargin;break;case LegendPosition.LeftBottom:case LegendPosition.RightBottom:d=this.plotModel.plotArea.bottom-s.height-this.legendMargin;break;case LegendPosition.LeftMiddle:case LegendPosition.RightMiddle:d=(this.plotModel.plotArea.top+this.plotModel.plotArea.bottom-s.height)*.5;break;case LegendPosition.TopCenter:case LegendPosition.BottomCenter:m=(this.plotModel.plotArea.left+this.plotModel.plotArea.right-s.width)*.5;break}}return new OxyRect(m,d,s.width,s.height)}async renderLegend(s,d,m){let f=this.legendItemAlignment;this.legendOrientation===LegendOrientation.Horizontal&&(f=HorizontalAlignment.Left);let g=m.left;switch(f){case HorizontalAlignment.Center:g=(m.left+m.right)/2,this.legendSymbolPlacement===LegendSymbolPlacement.Left?g-=(this.legendSymbolLength+this.legendSymbolMargin)/2:g-=(this.legendSymbolLength+this.legendSymbolMargin)/2;break;case HorizontalAlignment.Right:g=m.right,this.legendSymbolPlacement===LegendSymbolPlacement.Right&&(g-=this.legendSymbolLength+this.legendSymbolMargin);break}this.legendSymbolPlacement===LegendSymbolPlacement.Left&&(g+=this.legendSymbolLength+this.legendSymbolMargin);const x=m.top,w=new OxySize(Math.max(m.width-this.legendSymbolLength-this.legendSymbolMargin,0),m.height),C=isNaN(this.legendFontSize)?this.plotModel.defaultFontSize:this.legendFontSize;let A=d.isVisible?this.legendTextColor:this.seriesInvisibleTextColor;A=A||OxyColors.Black,s.setToolTip(d.toolTip);const _=await MathRenderingExtensions.drawMathText(s,new ScreenPoint(g,x),d.title||"",A.getActualColor(this.plotModel.textColor),this.legendFont??this.plotModel.defaultFont,C,this.legendFontWeight,0,f,VerticalAlignment.Top,w,!0);this.seriesPosMap.set(d,OxyRect.fromScreenPointAndSize(new ScreenPoint(g,x),_));let M=g;switch(f){case HorizontalAlignment.Center:M=g-_.width*.5;break;case HorizontalAlignment.Right:M=g-_.width;break}if(d.isVisible){const P=new OxyRect(this.legendSymbolPlacement===LegendSymbolPlacement.Right?M+_.width+this.legendSymbolMargin:M-this.legendSymbolMargin-this.legendSymbolLength,m.top,this.legendSymbolLength,_.height);await d.renderLegend(s,P)}s.setToolTip(void 0)}measureLegends(s,d){return this.renderOrMeasureLegends(s,new OxyRect(0,0,d.width,d.height),!0)}async renderOrMeasureLegends(s,d,m=!1){if(!m&&d.width>0&&d.height>0){this.legendBox=d;const G=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(d,this.legendBackground,this.legendBorder,this.legendBorderThickness,G)}const f=d.width,g=d.height;let x=this.legendPadding,w=this.legendPadding,C=OxySize.Empty;const A=isNaN(this.legendFontSize)?this.plotModel.defaultFontSize:this.legendFontSize,_=isNaN(this.legendTitleFontSize)?A:this.legendTitleFontSize,M=isNaN(this.groupNameFontSize)?A:this.groupNameFontSize;if(this.legendTitle){let G;m?G=await MathRenderingExtensions.measureMathText(s,this.legendTitle,this.legendTitleFont??this.plotModel.defaultFont,_,this.legendTitleFontWeight):G=await MathRenderingExtensions.drawMathText(s,new ScreenPoint(d.left+x,d.top+w),this.legendTitle,this.legendTitleColor.getActualColor(this.plotModel.textColor),this.legendTitleFont??this.plotModel.defaultFont,_,this.legendTitleFontWeight,0,HorizontalAlignment.Left,VerticalAlignment.Top,void 0,!0),w+=G.height,C=new OxySize(x+G.width+this.legendPadding,w+G.height)}let P=w,E=0;const R=.001;let B=0;const z=getReversedCopy(this.plotModel.series),F=this.legendItemOrder===LegendItemOrder.Reverse?z.filter(G=>G.renderInLegend&&G.legendKey===this.key):this.plotModel.series.filter(G=>G.renderInLegend&&G.legendKey===this.key),I=[];for(const G of F)I.includes(G.seriesGroupName||"")||I.push(G.seriesGroupName||"");this.seriesPosMap.clear();const L=new Map,W=async()=>{const G=[];for(const[q,K]of L){if(q.seriesGroupName&&!G.includes(q.seriesGroupName)){G.push(q.seriesGroupName);const Q=await MathRenderingExtensions.measureMathText(s,q.seriesGroupName,this.groupNameFont??this.plotModel.defaultFont,M,this.groupNameFontWeight);let me=K.top,Xe=K.left;this.legendOrientation===LegendOrientation.Vertical?me-=Q.height+this.legendLineSpacing/2:Xe-=Q.width+this.legendItemSpacing/2,await MathRenderingExtensions.drawMathText(s,new ScreenPoint(Xe,me),q.seriesGroupName,this.legendTitleColor.getActualColor(this.plotModel.textColor),this.groupNameFont??this.plotModel.defaultFont,M,this.groupNameFontWeight,0,HorizontalAlignment.Left,VerticalAlignment.Top,void 0,!0)}let Z=f;K.left+Z+this.legendPadding>d.left+f&&(Z=d.left+f-K.left-this.legendPadding);let J=K.height;d.top+J+this.legendPadding>d.top+g&&(J=d.top+g-d.top-this.legendPadding);const te=new OxyRect(K.left,K.top,Math.max(Z,0),Math.max(J,0));await this.renderLegend(s,q,te)}G.length=0,L.clear()};m||s.pushClip(d);for(const G of I){const q=F.filter(J=>(J.seriesGroupName||"")===G);let K=OxySize.Empty;q.length>0&&G&&(K=await MathRenderingExtensions.measureMathText(s,G,this.groupNameFont??this.plotModel.defaultFont,M,this.groupNameFontWeight),this.legendOrientation===LegendOrientation.Vertical?P+=K.height:x+=K.width);let Z=0;for(const J of q){if(!J.title||!J.renderInLegend||!J.isVisible&&!this.showInvisibleSeries)continue;const te=await MathRenderingExtensions.measureMathText(s,J.title,this.legendFont??this.plotModel.defaultFont,A,this.legendFontWeight),Q=this.legendSymbolLength+this.legendSymbolMargin+te.width,me=te.height;this.legendOrientation===LegendOrientation.Horizontal?(x>this.legendPadding&&(x+=this.legendItemSpacing),x+Q>f-this.legendPadding+R&&(x=this.legendPadding,Z===0&&K.width>0&&(x+=K.width+this.legendItemSpacing),P+=E+this.legendLineSpacing,E=0),E=Math.max(E,te.height),m||L.set(J,new OxyRect(d.left+x,d.top+P,Q,me)),x+=Q,x=Math.max(K.width,x),C=new OxySize(Math.max(C.width,x),Math.max(C.height,P+te.height))):(P+me>g-this.legendPadding+R&&(await W(),P=w+K.height,x+=B+this.legendColumnSpacing,B=0),m||L.set(J,new OxyRect(d.left+x,d.top+P,Q,me)),P+=me+this.legendLineSpacing,B=Math.max(B,Q),C=new OxySize(Math.max(C.width,x+Q),Math.max(C.height,P))),Z++}await W()}return m||s.popClip(),C.width>0&&(C=new OxySize(C.width+this.legendPadding,C.height)),C.height>0&&(C=new OxySize(C.width,C.height+this.legendPadding)),C.width>f&&(C=new OxySize(f,C.height)),C.height>g&&(C=new OxySize(C.width,g)),!isNaN(this.legendMaxWidth)&&C.width>this.legendMaxWidth&&(C=new OxySize(this.legendMaxWidth,C.height)),!isNaN(this.legendMaxHeight)&&C.height>this.legendMaxHeight&&(C=new OxySize(C.width,this.legendMaxHeight)),C}}class OxyModifierKeysExtensions{static isAltDown(s){return(s.modifierKeys&OxyModifierKeys.Alt)===OxyModifierKeys.Alt}static isControlDown(s){return(s.modifierKeys&OxyModifierKeys.Control)===OxyModifierKeys.Control}static isShiftDown(s){return(s.modifierKeys&OxyModifierKeys.Shift)===OxyModifierKeys.Shift}}class TrackerHitResult{constructor(s){D(this,"dataPoint"),D(this,"item"),D(this,"index",0),D(this,"lineExtents"),D(this,"plotModel"),D(this,"position"),D(this,"series"),D(this,"text"),s&&Object.assign(this,removeUndef(s))}get xAxis(){return!this.series||!(this.series instanceof XYAxisSeries)?void 0:this.series.xAxis}get yAxis(){return!this.series||!(this.series instanceof XYAxisSeries)?void 0:this.series.yAxis}toString(){return this.text?this.text.trim():""}}var AxisPreference=(a=>(a[a.None=0]="None",a[a.X=1]="X",a[a.Y=2]="Y",a))(AxisPreference||{});class PlotManipulator extends ManipulatorBase{constructor(s){super(s),D(this,"plotView"),D(this,"axisPreference",AxisPreference.None),D(this,"xAxis"),D(this,"yAxis"),this.plotView=s}inverseTransform(s,d){return this.xAxis?this.xAxis.inverseTransformPoint(s,d,this.yAxis):this.yAxis?new DataPoint(0,this.yAxis.inverseTransform(d)):DataPoint.Zero}assignAxes(s){let d,m;this.plotView.actualModel?([d,m]=this.plotView.actualModel.getAxesFromPoint(s),this.axisPreference!==AxisPreference.None&&this.plotView.actualModel.plotArea.containsPoint(s)&&(this.axisPreference===AxisPreference.X?d&&(m=void 0):this.axisPreference===AxisPreference.Y&&m&&(d=void 0))):(d=void 0,m=void 0),this.xAxis=d,this.yAxis=m}}class MouseManipulator extends PlotManipulator{constructor(s){super(s),D(this,"startPosition")}started(s){this.assignAxes(s.position),this.startPosition=s.position}}class ZoomStepManipulator extends MouseManipulator{constructor(s,d,m){super(s),D(this,"fineControl"),D(this,"step"),this.step=d,this.fineControl=m}started(s){if(super.started(s),!(this.xAxis&&this.xAxis.isZoomEnabled||this.yAxis&&this.yAxis.isZoomEnabled))return;const d=this.inverseTransform(s.position.x,s.position.y);let m=this.step;this.fineControl&&(m*=3),m>0?m=1+m:m=1/(1-m),this.xAxis&&this.xAxis.zoomAt(m,d.x),this.yAxis&&this.yAxis.zoomAt(m,d.y),this.plotView.invalidatePlot(!1),s.handled=!0}}class PanManipulator extends MouseManipulator{constructor(s){super(s),D(this,"previousPosition",ScreenPoint.LeftTop),D(this,"isPanEnabled",!1)}completed(s){super.completed(s),this.isPanEnabled&&(this.view.setCursorType(CursorType.Default),s.handled=!0)}delta(s){super.delta(s),this.isPanEnabled&&(this.xAxis&&this.xAxis.pan(this.previousPosition,s.position),this.yAxis&&this.yAxis.pan(this.previousPosition,s.position),this.plotView.invalidatePlot(!1),this.previousPosition=s.position,s.handled=!0)}started(s){super.started(s),this.previousPosition=s.position,this.isPanEnabled=!!(this.xAxis&&this.xAxis.isPanEnabled||this.yAxis&&this.yAxis.isPanEnabled),this.isPanEnabled&&(this.view.setCursorType(CursorType.Pan),s.handled=!0)}}class ZoomRectangleManipulator extends MouseManipulator{constructor(s){super(s),D(this,"zoomRectangle",OxyRect.Empty),D(this,"isZoomEnabled",!1)}completed(s){if(super.completed(s),!!this.isZoomEnabled){if(this.plotView.setCursorType(CursorType.Default),this.plotView.hideZoomRectangle(),this.zoomRectangle.width>10&&this.zoomRectangle.height>10){const d=this.inverseTransform(this.zoomRectangle.left,this.zoomRectangle.top),m=this.inverseTransform(this.zoomRectangle.right,this.zoomRectangle.bottom);this.xAxis&&this.xAxis.zoom(d.x,m.x),this.yAxis&&this.yAxis.zoom(d.y,m.y),this.plotView.invalidatePlot()}s.handled=!0}}delta(s){if(super.delta(s),!this.plotView.actualModel||!this.isZoomEnabled||!this.startPosition)return;const d=this.plotView.actualModel.plotArea;let m=Math.min(this.startPosition.x,s.position.x),f=Math.abs(this.startPosition.x-s.position.x),g=Math.min(this.startPosition.y,s.position.y),x=Math.abs(this.startPosition.y-s.position.y);(this.xAxis===void 0||!this.xAxis.isZoomEnabled)&&(m=d.left,f=d.width),(this.yAxis===void 0||!this.yAxis.isZoomEnabled)&&(g=d.top,x=d.height),this.zoomRectangle=new OxyRect(m,g,f,x),this.plotView.showZoomRectangle(this.zoomRectangle),s.handled=!0}started(s){super.started(s),this.isZoomEnabled=!!(this.xAxis&&this.xAxis.isZoomEnabled||this.yAxis&&this.yAxis.isZoomEnabled),this.isZoomEnabled&&this.startPosition&&(this.zoomRectangle=new OxyRect(this.startPosition.x,this.startPosition.y,0,0),this.plotView.showZoomRectangle(this.zoomRectangle),this.plotView.setCursorType(this.getCursorType()),s.handled=!0)}getCursorType(){return this.xAxis===void 0?CursorType.ZoomVertical:this.yAxis===void 0?CursorType.ZoomHorizontal:CursorType.ZoomRectangle}}class TouchManipulator extends PlotManipulator{constructor(s){super(s),D(this,"setHandledForPanOrZoom"),D(this,"isPanEnabled",!1),D(this,"isZoomEnabled",!1),this.setHandledForPanOrZoom=!0}completed(s){super.completed(s),this.setHandledForPanOrZoom&&(s.handled=s.handled||this.isPanEnabled||this.isZoomEnabled)}delta(s){if(super.delta(s),!this.isPanEnabled&&!this.isZoomEnabled)return;const d=s.position,m=d.minusVector(s.deltaTranslation);this.xAxis&&this.xAxis.pan(m,d),this.yAxis&&this.yAxis.pan(m,d);const f=this.inverseTransform(d.x,d.y);this.xAxis&&this.xAxis.zoomAt(s.deltaScale.x,f.x),this.yAxis&&this.yAxis.zoomAt(s.deltaScale.y,f.y),this.plotView.invalidatePlot(!1),s.handled=!0}started(s){this.assignAxes(s.position),super.started(s),this.setHandledForPanOrZoom&&(this.isPanEnabled=!!(this.xAxis&&this.xAxis.isPanEnabled||this.yAxis&&this.yAxis.isPanEnabled),this.isZoomEnabled=!!(this.xAxis&&this.xAxis.isZoomEnabled||this.yAxis&&this.yAxis.isZoomEnabled),s.handled=s.handled||this.isPanEnabled||this.isZoomEnabled)}}class TrackerManipulator extends MouseManipulator{constructor(s,d){super(s),D(this,"currentSeries"),D(this,"pointsOnly"),D(this,"snap"),D(this,"lockToInitialSeries"),D(this,"firesDistance"),D(this,"checkDistanceBetweenPoints"),D(this,"isTrackAnnotations",!0),this.snap=!0,this.pointsOnly=!1,this.lockToInitialSeries=!0,this.firesDistance=20,this.checkDistanceBetweenPoints=!1,this.isTrackAnnotations=!0,d&&Object.assign(this,removeUndef(d))}completed(s){super.completed(s),s.handled=!0,this.currentSeries=void 0,this.plotView.hideTracker(),this.plotView.actualModel&&this.plotView.actualModel.raiseTrackerChanged(void 0)}delta(s){var d;if(super.delta(s),s.handled=!0,(!this.currentSeries||!this.lockToInitialSeries)&&(this.currentSeries=(d=this.plotView.actualModel)==null?void 0:d.getSeriesFromPoint(s.position,this.firesDistance)),!this.currentSeries){this.lockToInitialSeries||this.plotView.hideTracker(),this.isTrackAnnotations&&this.trackAnnotations(s.position);return}const m=this.plotView.actualModel;if(!m||!m.plotArea.contains(s.position.x,s.position.y))return;const f=TrackerHelper.getNearestHit(this.currentSeries,s.position,this.snap,this.pointsOnly,this.firesDistance,this.checkDistanceBetweenPoints);f&&(f.plotModel=this.plotView.actualModel,this.plotView.showTracker(f),this.plotView.actualModel.raiseTrackerChanged(f))}started(s){var d;super.started(s),this.currentSeries=(d=this.plotView.actualModel)==null?void 0:d.getSeriesFromPoint(s.position,this.firesDistance),this.delta(s)}trackAnnotations(s){const d=this.plotView.actualModel;for(const m of d.annotations.filter(f=>f.toolTip).reverse()){if(!m.toolTip)continue;const f=new HitTestArguments(s,this.firesDistance);if(!m.hitTest(f))continue;const g=m.inverseTransform(s),x=new TrackerHitResult({position:s,dataPoint:g,text:m.toolTip,plotModel:this.plotView.actualModel});this.plotView.showTracker(x),d.raiseTrackerChanged(x);break}}}class TouchTrackerManipulator extends TouchManipulator{constructor(s,d){super(s),D(this,"currentSeries"),D(this,"pointsOnly"),D(this,"snap"),D(this,"lockToInitialSeries"),D(this,"firesDistance"),D(this,"checkDistanceBetweenPoints"),this.snap=!0,this.pointsOnly=!1,this.lockToInitialSeries=!0,this.firesDistance=20,this.checkDistanceBetweenPoints=!1,this.setHandledForPanOrZoom=!1,d&&Object.assign(this,removeUndef(d))}completed(s){super.completed(s),this.currentSeries=void 0,this.plotView.hideTracker(),this.plotView.actualModel&&this.plotView.actualModel.raiseTrackerChanged(void 0)}delta(s){super.delta(s),this.plotView.hideTracker()}started(s){var d;super.started(s),this.currentSeries=(d=this.plotView.actualModel)==null?void 0:d.getSeriesFromPoint(s.position,this.firesDistance),this.updateTracker(s.position)}updateTracker(s){var d;if((!this.currentSeries||!this.lockToInitialSeries)&&(this.currentSeries=(d=this.plotView.actualModel)==null?void 0:d.getSeriesFromPoint(s,this.firesDistance)),!this.currentSeries){this.lockToInitialSeries||this.plotView.hideTracker();return}const m=this.plotView.actualModel;if(!m||!m.plotArea.contains(s.x,s.y))return;const f=TrackerHelper.getNearestHit(this.currentSeries,s,this.snap,this.pointsOnly,this.firesDistance,this.checkDistanceBetweenPoints);f&&(f.plotModel=this.plotView.actualModel,this.plotView.showTracker(f),this.plotView.actualModel.raiseTrackerChanged(f))}}class DelegatePlotCommand extends DelegateViewCommand{constructor(s){super((d,m,f)=>s(d,m,f))}}class PlotCommands{static init(){this.reset=new DelegatePlotCommand((s,d,m)=>this.handleReset(s,m)),this.resetAt=new DelegatePlotCommand((s,d,m)=>this.handleReset(s,m)),this.panAt=new DelegatePlotCommand((s,d,m)=>d.addMouseManipulator(s,new PanManipulator(s),m)),this.zoomRectangle=new DelegatePlotCommand((s,d,m)=>d.addMouseManipulator(s,new ZoomRectangleManipulator(s),m)),this.track=new DelegatePlotCommand((s,d,m)=>d.addMouseManipulator(s,new TrackerManipulator(s,{snap:!1,pointsOnly:!1}),m)),this.snapTrack=new DelegatePlotCommand((s,d,m)=>d.addMouseManipulator(s,new TrackerManipulator(s,{snap:!0,pointsOnly:!1}),m)),this.pointsOnlyTrack=new DelegatePlotCommand((s,d,m)=>d.addMouseManipulator(s,new TrackerManipulator(s,{snap:!1,pointsOnly:!0}),m)),this.zoomWheel=new DelegatePlotCommand((s,d,m)=>this.handleZoomByWheel(s,m)),this.zoomWheelFine=new DelegatePlotCommand((s,d,m)=>this.handleZoomByWheel(s,m,.1)),this.zoomInAt=new DelegatePlotCommand((s,d,m)=>this.handleZoomAt(s,m,.05)),this.zoomOutAt=new DelegatePlotCommand((s,d,m)=>this.handleZoomAt(s,m,-.05)),this.hoverTrack=new DelegatePlotCommand((s,d,m)=>d.addHoverManipulator(s,new TrackerManipulator(s,{lockToInitialSeries:!1,snap:!1,pointsOnly:!1}),m)),this.hoverSnapTrack=new DelegatePlotCommand((s,d,m)=>d.addHoverManipulator(s,new TrackerManipulator(s,{lockToInitialSeries:!1,snap:!0,pointsOnly:!1}),m)),this.hoverPointsOnlyTrack=new DelegatePlotCommand((s,d,m)=>d.addHoverManipulator(s,new TrackerManipulator(s,{lockToInitialSeries:!1,snap:!1,pointsOnly:!0}),m)),this.snapTrackTouch=new DelegatePlotCommand((s,d,m)=>d.addTouchManipulator(s,new TouchTrackerManipulator(s,{snap:!0,pointsOnly:!1}),m)),this.pointsOnlyTrackTouch=new DelegatePlotCommand((s,d,m)=>d.addTouchManipulator(s,new TouchTrackerManipulator(s,{snap:!0,pointsOnly:!0}),m)),this.panZoomByTouch=new DelegatePlotCommand((s,d,m)=>d.addTouchManipulator(s,new TouchManipulator(s),m)),this.panLeft=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,-.1,0)),this.panRight=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,.1,0)),this.panUp=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,0,-.1)),this.panDown=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,0,.1)),this.panLeftFine=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,-.01,0)),this.panRightFine=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,.01,0)),this.panUpFine=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,0,-.01)),this.panDownFine=new DelegatePlotCommand((s,d,m)=>this.handlePan(s,m,0,.01)),this.zoomIn=new DelegatePlotCommand((s,d,m)=>this.handleZoomCenter(s,m,1)),this.zoomOut=new DelegatePlotCommand((s,d,m)=>this.handleZoomCenter(s,m,-1)),this.zoomInFine=new DelegatePlotCommand((s,d,m)=>this.handleZoomCenter(s,m,.1)),this.zoomOutFine=new DelegatePlotCommand((s,d,m)=>this.handleZoomCenter(s,m,-.1))}static handleReset(s,d){s.actualModel&&(d.handled=!0,s.actualModel.resetAllAxes(),s.invalidatePlot(!1))}static handleZoomAt(s,d,m){const f=OxyModifierKeysExtensions.isControlDown(d);new ZoomStepManipulator(s,m,f).started(d)}static handleZoomByWheel(s,d,m=1){const f=OxyModifierKeysExtensions.isControlDown(d);new ZoomStepManipulator(s,d.delta*.001*m,f).started(d)}static handleZoomCenter(s,d,m){s.actualModel&&(d.handled=!0,s.actualModel.zoomAllAxes(1+m*.12),s.invalidatePlot(!1))}static handlePan(s,d,m,f){s.actualModel&&(d.handled=!0,m*=s.actualModel.plotArea.width,f*=s.actualModel.plotArea.height,s.actualModel.panAllAxes(m,f),s.invalidatePlot(!1))}}D(PlotCommands,"reset"),D(PlotCommands,"resetAt"),D(PlotCommands,"panZoomByTouch"),D(PlotCommands,"panAt"),D(PlotCommands,"zoomRectangle"),D(PlotCommands,"zoomWheel"),D(PlotCommands,"zoomWheelFine"),D(PlotCommands,"track"),D(PlotCommands,"snapTrack"),D(PlotCommands,"snapTrackTouch"),D(PlotCommands,"pointsOnlyTrack"),D(PlotCommands,"pointsOnlyTrackTouch"),D(PlotCommands,"hoverTrack"),D(PlotCommands,"hoverSnapTrack"),D(PlotCommands,"hoverPointsOnlyTrack"),D(PlotCommands,"panLeft"),D(PlotCommands,"panRight"),D(PlotCommands,"panUp"),D(PlotCommands,"panDown"),D(PlotCommands,"panLeftFine"),D(PlotCommands,"panRightFine"),D(PlotCommands,"panUpFine"),D(PlotCommands,"panDownFine"),D(PlotCommands,"zoomInAt"),D(PlotCommands,"zoomOutAt"),D(PlotCommands,"zoomIn"),D(PlotCommands,"zoomOut"),D(PlotCommands,"zoomInFine"),D(PlotCommands,"zoomOutFine");PlotCommands.init();class PlotController extends ControllerBase{constructor(){super(),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Middle,PlotCommands.zoomRectangle),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Right,PlotCommands.zoomRectangle,OxyModifierKeys.Control),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.zoomRectangle,OxyModifierKeys.Control|OxyModifierKeys.Alt),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Middle,PlotCommands.resetAt,OxyModifierKeys.None,2),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Right,PlotCommands.resetAt,OxyModifierKeys.Control,2),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.resetAt,OxyModifierKeys.Control|OxyModifierKeys.Alt,2),ControllerExtensions.bindKeyDown(this,OxyKey.A,PlotCommands.reset),ControllerExtensions.bindKeyDown(this,OxyKey.C,PlotCommands.copyCode,OxyModifierKeys.Control|OxyModifierKeys.Alt),ControllerExtensions.bindKeyDown(this,OxyKey.Home,PlotCommands.reset),this.bindCore(new OxyShakeGesture,PlotCommands.reset),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Right,PlotCommands.panAt),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.panAt,OxyModifierKeys.Alt),ControllerExtensions.bindKeyDown(this,OxyKey.Left,PlotCommands.panLeft),ControllerExtensions.bindKeyDown(this,OxyKey.Right,PlotCommands.panRight),ControllerExtensions.bindKeyDown(this,OxyKey.Up,PlotCommands.panUp),ControllerExtensions.bindKeyDown(this,OxyKey.Down,PlotCommands.panDown),ControllerExtensions.bindKeyDown(this,OxyKey.Left,PlotCommands.panLeftFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.Right,PlotCommands.panRightFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.Up,PlotCommands.panUpFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.Down,PlotCommands.panDownFine,OxyModifierKeys.Control),ControllerExtensions.bindTouchDown(this,PlotCommands.panZoomByTouch),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.snapTrack),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.track,OxyModifierKeys.Control),ControllerExtensions.bindMouseDown(this,OxyMouseButton.Left,PlotCommands.pointsOnlyTrack,OxyModifierKeys.Shift),ControllerExtensions.bindTouchDown(this,PlotCommands.snapTrackTouch),ControllerExtensions.bindMouseDown(this,OxyMouseButton.XButton1,PlotCommands.zoomInAt),ControllerExtensions.bindMouseDown(this,OxyMouseButton.XButton2,PlotCommands.zoomOutAt),ControllerExtensions.bindMouseWheel(this,PlotCommands.zoomWheel),ControllerExtensions.bindMouseWheel(this,PlotCommands.zoomWheelFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.Add,PlotCommands.zoomIn),ControllerExtensions.bindKeyDown(this,OxyKey.Subtract,PlotCommands.zoomOut),ControllerExtensions.bindKeyDown(this,OxyKey.PageUp,PlotCommands.zoomIn),ControllerExtensions.bindKeyDown(this,OxyKey.PageDown,PlotCommands.zoomOut),ControllerExtensions.bindKeyDown(this,OxyKey.Add,PlotCommands.zoomInFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.Subtract,PlotCommands.zoomOutFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.PageUp,PlotCommands.zoomInFine,OxyModifierKeys.Control),ControllerExtensions.bindKeyDown(this,OxyKey.PageDown,PlotCommands.zoomOutFine,OxyModifierKeys.Control)}}function isTransposablePlotElement(a){return a instanceof Object&&"__isTransposable"in a}function setTransposablePlotElement(a){a.__isTransposable=!0}class PlotElementExtensions{static inverseTransform(s,d,m){return s.inverseTransform(new ScreenPoint(d,m))}static isTransposed(s){return s.xAxis.isVertical()}static orientate(s,d){return PlotElementExtensions.isTransposed(s)?new ScreenPoint(d.y,d.x):d}static orientateVector(s,d){return d=new ScreenVector(s.xAxis.isReversed?-d.x:d.x,s.yAxis.isReversed?-d.y:d.y),PlotElementExtensions.isTransposed(s)?new ScreenVector(-d.y,-d.x):d}static orientateAlignment(s,d,m){if(s.xAxis.isReversed&&(d=-d),s.yAxis.isReversed&&(m=-m),PlotElementExtensions.isTransposed(s)){const f=-m;m=-d,d=f}return[d,m]}static transform(s,d,m){return s.transform(new DataPoint(d,m))}}class PlotElementUtilities{static getClippingRect(s){const d=OxyRect.fromScreenPoints(s.xAxis.screenMin,s.xAxis.screenMax),m=OxyRect.fromScreenPoints(s.yAxis.screenMin,s.yAxis.screenMax);return d.intersect(m)}static inverseTransform(s,d){return s.xAxis.inverseTransformPoint(d.x,d.y,s.yAxis)}static inverseTransformOrientated(s,d){return this.inverseTransform(s,PlotElementExtensions.orientate(s,d))}static transform(s,d){return s.xAxis.transformPoint(d.x,d.y,s.yAxis)}static transformOrientated(s,d){return PlotElementExtensions.orientate(s,this.transform(s,d))}}var PlotType=(a=>(a[a.XY=0]="XY",a[a.Cartesian=1]="Cartesian",a[a.Polar=2]="Polar",a))(PlotType||{}),TitleHorizontalAlignment=(a=>(a[a.CenteredWithinPlotArea=0]="CenteredWithinPlotArea",a[a.CenteredWithinView=1]="CenteredWithinView",a))(TitleHorizontalAlignment||{});class PlotModel extends Model{constructor(s){super(),D(this,"barSeriesManagers",[]),D(this,"plotViewReference"),D(this,"currentColorIndex",0),D(this,"isDataUpdated",!1),D(this,"lastPlotException"),D(this,"trackerChanged"),D(this,"updated"),D(this,"updating"),D(this,"defaultFont"),D(this,"defaultFontSize"),D(this,"_actualPlotMargins",OxyThickness.Zero),D(this,"_annotations"),D(this,"_axes"),D(this,"_legends"),D(this,"background",OxyColors.Undefined),D(this,"defaultColors"),D(this,"edgeRenderingMode"),D(this,"assignColorsToInvisibleSeries"),D(this,"isLegendVisible"),D(this,"padding",OxyThickness.Zero),D(this,"_plotBounds",OxyRect.Empty),D(this,"_plotAndAxisArea",OxyRect.Empty),D(this,"_plotArea",OxyRect.Empty),D(this,"axisTierDistance"),D(this,"plotAreaBackground",OxyColors.Undefined),D(this,"plotAreaBorderColor",OxyColors.Undefined),D(this,"plotAreaBorderThickness"),D(this,"plotMargins"),D(this,"plotType"),D(this,"_series"),D(this,"renderingDecorator"),D(this,"subtitle"),D(this,"subtitleFont"),D(this,"subtitleFontSize"),D(this,"subtitleFontWeight"),D(this,"textColor",OxyColors.Black),D(this,"title"),D(this,"titleToolTip"),D(this,"titleColor",OxyColors.Automatic),D(this,"clipTitle"),D(this,"titleClippingLength"),D(this,"subtitleColor",OxyColors.Automatic),D(this,"titleHorizontalAlignment",0),D(this,"_titleArea",OxyRect.Empty),D(this,"titleFont"),D(this,"titleFontSize"),D(this,"titleFontWeight"),D(this,"titlePadding"),D(this,"_defaultAngleAxis"),D(this,"_defaultMagnitudeAxis"),D(this,"_defaultXAxis"),D(this,"_defaultYAxis"),D(this,"_defaultColorAxis"),this._axes=newElementCollection(this),this._series=newElementCollection(this),this._annotations=newElementCollection(this),this._legends=newElementCollection(this),this.plotType=0,this.plotMargins=new OxyThickness(NaN),this.padding=new OxyThickness(8),this.background=OxyColors.Undefined,this.plotAreaBackground=OxyColors.Undefined,this.textColor=OxyColors.Black,this.titleColor=OxyColors.Automatic,this.subtitleColor=OxyColors.Automatic,this.defaultFont="Segoe UI",this.defaultFontSize=12,this.titleToolTip=void 0,this.titleFont=void 0,this.titleFontSize=18,this.titleFontWeight=FontWeights.Bold,this.subtitleFont=void 0,this.subtitleFontSize=14,this.subtitleFontWeight=FontWeights.Normal,this.titlePadding=6,this.clipTitle=!0,this.titleClippingLength=.9,this.plotAreaBorderColor=OxyColors.Black,this.plotAreaBorderThickness=new OxyThickness(1),this.edgeRenderingMode=EdgeRenderingMode.Automatic,this.assignColorsToInvisibleSeries=!0,this.isLegendVisible=!0,this.defaultColors=[OxyColor.fromRgb(78,154,6),OxyColor.fromRgb(200,141,0),OxyColor.fromRgb(204,0,0),OxyColor.fromRgb(32,74,135),OxyColors.Red,OxyColors.Orange,OxyColors.Yellow,OxyColors.Green,OxyColors.Blue,OxyColors.Indigo,OxyColors.Violet],this.axisTierDistance=4,s&&this.applyOptions(s)}applyOptions(s){removeProperties(s,"_axes","_series","_annotations","_legends"),s.axes&&s.axes.length>0&&this._axes.push(...s.axes),s.series&&s.series.length>0&&this._series.push(...s.series),s.annotations&&s.annotations.length>0&&this._annotations.push(...s.annotations),s.legends&&s.legends.length>0&&this._legends.push(...s.legends),removeProperties(s,"axes","series","annotations","legends"),Object.assign(this,removeUndef(s))}get actualPlotMargins(){return this._actualPlotMargins}get plotView(){return this.plotViewReference}get annotations(){return this._annotations}get axes(){return this._axes}get legends(){return this._legends}get plotBounds(){return this._plotBounds}get width(){return this.plotBounds.width}get height(){return this.plotBounds.height}get plotAndAxisArea(){return this._plotAndAxisArea}get plotArea(){return this._plotArea}get series(){return this._series}get titleArea(){return this._titleArea}get defaultAngleAxis(){return this._defaultAngleAxis}get defaultMagnitudeAxis(){return this._defaultMagnitudeAxis}get defaultXAxis(){return this._defaultXAxis}get defaultYAxis(){return this._defaultYAxis}get defaultColorAxis(){return this._defaultColorAxis}get actualTitleFont(){return this.titleFont||this.defaultFont}get actualSubtitleFont(){return this.subtitleFont||this.defaultFont}attachPlotView(s){const d=this.plotView;if(d&&s&&d!==s)throw new Error("This PlotModel is already in use by some other PlotView control.");this.plotViewReference=s}invalidatePlot(s){var d;(d=this.plotView)==null||d.invalidatePlot(s)}getAxesFromPoint(s){let d,m,f,g=0;s.x<this.plotArea.left&&(f=AxisPosition.Left,g=this.plotArea.left),s.x>this.plotArea.right&&(f=AxisPosition.Right,g=this.plotArea.right),s.y<this.plotArea.top&&(f=AxisPosition.Top,g=this.plotArea.top),s.y>this.plotArea.bottom&&(f=AxisPosition.Bottom,g=this.plotArea.bottom);for(const x of this.axes){if(!x.isAxisVisible||isColorAxis(x))continue;if(x instanceof MagnitudeAxis){d=x;continue}if(x instanceof AngleAxis){m=x;continue}let w=NaN;if(x.isHorizontal()&&(w=x.inverseTransform(s.x)),x.isVertical()&&(w=x.inverseTransform(s.y)),w>=x.clipMinimum&&w<=x.clipMaximum){if(!f)x.isHorizontal()?d||(d=x):x.isVertical()&&(m||(m=x));else if(f===x.position){const C=x.positionTierMinShift,A=x.positionTierMaxShift,_=x.isHorizontal()?s.y:s.x,M=f===AxisPosition.Top||f===AxisPosition.Left;(_>=g+C&&_<g+A&&!M||_<=g-C&&_>g-A&&M)&&(x.isHorizontal()?isNullOrUndef(d)&&(d=x):x.isVertical()&&isNullOrUndef(m)&&(m=x))}}}return[d,m]}getDefaultColor(){return this.defaultColors[this.currentColorIndex++%this.defaultColors.length]}getDefaultLineStyle(){return this.currentColorIndex/this.defaultColors.length%Number(LineStyle.None)}getSeriesFromPoint(s,d=100){let m=Number_MAX_VALUE,f;const g=getReversedCopy(this.series);for(const x of g.filter(w=>w.isVisible)){const w=x.getNearestPoint(s,!0)||x.getNearestPoint(s,!1);if(!(w!=null&&w.position))continue;const C=s.distanceTo(w.position);C<m&&(f=x,m=C)}if(m<d)return f}toString(){return this.title||""}getLastPlotException(){return this.lastPlotException}update(s){try{this.lastPlotException=null,this.onUpdating(),this.ensureDefaultAxes();const d=this.series.filter(f=>f.isVisible);if(s||!this.isDataUpdated){for(const f of d)f.updateData();this.isDataUpdated=!0}this.updateBarSeriesManagers(),this.updateMaxMin(s),this.updateUnmanagedCategoryAxes();const m=this.assignColorsToInvisibleSeries?this.series:d;this.resetDefaultColor();for(const f of m)f.setDefaultValues();this.onUpdated()}catch(d){console.log(d),this.lastPlotException=d}}getAxis(s){if(!s)throw new Error("Axis key cannot be null.");const d=this.axes.find(m=>m.key===s);if(!d)throw new Error(`Cannot find axis with Key = "${s}"`);return d}getAxisOrDefault(s,d){return s?d:this.axes.find(m=>m.key===s)||d}resetAllAxes(){for(const s of this.axes)s.reset()}panAllAxes(s,d){for(const m of this.axes)m.pan(m.isHorizontal()?s:d)}zoomAllAxes(s){for(const d of this.axes)d.zoomAtCenter(s)}raiseTrackerChanged(s){const d=this.trackerChanged;d&&d(this,{hitResult:s})}onTrackerChanged(s){this.raiseTrackerChanged(s)}getHitTestElements(){const s=[],d=getReversedCopy(this.axes);for(const g of d.filter(x=>x.isAxisVisible&&x.layer===AxisLayer.AboveSeries))s.push(g);const m=getReversedCopy(this.annotations);for(const g of m.filter(x=>x.layer===AnnotationLayer.AboveSeries))s.push(g);const f=getReversedCopy(this.series);for(const g of f.filter(x=>x.isVisible))s.push(g);for(const g of m.filter(x=>x.layer===AnnotationLayer.BelowSeries))s.push(g);for(const g of d.filter(x=>x.isAxisVisible&&x.layer===AxisLayer.BelowSeries))s.push(g);for(const g of m.filter(x=>x.layer===AnnotationLayer.BelowAxes))s.push(g);for(const g of this.legends)s.push(g);return s}onUpdated(){const s=this.updated;s&&s(this)}onUpdating(){const s=this.updating;s&&s(this)}updateAxisTransforms(){for(const s of this.axes)s.updateTransform(this.plotArea)}enforceCartesianTransforms(){const s=this.axes.filter(m=>!isColorAxis(m));let d=Math.min(...s.map(m=>Math.abs(m.scale)));for(const m of s)m.zoomScale(d);d=Math.max(...s.map(m=>Math.abs(m.scale)));for(const m of s)m.zoomScale(d);for(const m of s)m.updateTransform(this.plotArea)}updateIntervals(){for(const s of this.axes)s.updateIntervals(this.plotArea)}ensureDefaultAxes(){const s=this.axes,d=this.series;if(this._defaultXAxis=s.find(m=>m.isHorizontal()&&m.isXyAxis()),this._defaultYAxis=s.find(m=>m.isVertical()&&m.isXyAxis()),this._defaultMagnitudeAxis=s.find(m=>m instanceof MagnitudeAxis),this._defaultAngleAxis=s.find(m=>m instanceof AngleAxis),this._defaultColorAxis=s.find(m=>isColorAxis(m)),isNullOrUndef(this.defaultXAxis)&&(this._defaultXAxis=this.defaultMagnitudeAxis),isNullOrUndef(this.defaultYAxis)&&(this._defaultYAxis=this.defaultAngleAxis),this.plotType===2)isNullOrUndef(this.defaultXAxis)&&(this._defaultXAxis=this._defaultMagnitudeAxis=new MagnitudeAxis),isNullOrUndef(this.defaultYAxis)&&(this._defaultYAxis=this._defaultAngleAxis=new AngleAxis);else{let m=!1,f=!1;isNullOrUndef(this.defaultXAxis)&&(this._defaultXAxis=new LinearAxis({position:AxisPosition.Bottom}),m=!0),isNullOrUndef(this.defaultYAxis)&&(d.some(g=>g.isVisible&&g instanceof BarSeries)?this._defaultYAxis=new CategoryAxis({position:AxisPosition.Left}):(this._defaultYAxis=new LinearAxis({position:AxisPosition.Left}),f=!0)),m&&this.defaultXAxis&&this.defaultYAxis instanceof CategoryAxis&&(this.defaultXAxis.minimumPadding=0),f&&this.defaultYAxis&&this.defaultXAxis instanceof CategoryAxis&&(this.defaultYAxis.minimumPadding=0)}d.some(m=>m.isVisible&&m.areAxesRequired())&&(s.includes(this.defaultXAxis)||(console.assert(this.defaultXAxis,"Default x-axis not created."),this.defaultXAxis&&this.axes.push(this.defaultXAxis)),s.includes(this.defaultYAxis)||(console.assert(this.defaultYAxis,"Default y-axis not created."),this.defaultYAxis&&this.axes.push(this.defaultYAxis)));for(const m of this.series)m.isVisible&&m.areAxesRequired()&&m.ensureAxes();for(const m of this.annotations)m.ensureAxes()}resetDefaultColor(){this.currentColorIndex=0}updateMaxMin(s){if(s){for(const d of this.axes)d.resetDataMaxMin();for(const d of this.series.filter(m=>m.isVisible))d.updateMaxMin()}for(const d of this.series.filter(m=>m.isVisible))d.updateAxisMaxMin();for(const d of this.axes)d.updateActualMaxMin()}updateBarSeriesManagers(){this.barSeriesManagers=[];const s=this.series.filter(m=>m.isVisible&&isBarSeries(m)).map(m=>m),d=new Map;for(const m of s){const f=[...d.keys()].find(g=>g.ca===m.categoryAxis&&g.va===m.valueAxis);if(f){d.get(f).push(m);continue}d.set({ca:m.categoryAxis,va:m.valueAxis},[m])}d.forEach((m,f)=>{const g=new BarSeriesManager(f.ca,f.va,m);g.update(),this.barSeriesManagers.push(g)})}updateUnmanagedCategoryAxes(){const s=this.barSeriesManagers.map(m=>m.categoryAxis),d=this.axes.filter(m=>m instanceof CategoryAxis).map(m=>m).filter(m=>!s.includes(m));for(const m of d){let f=0;!isInfinity(m.dataMaximum)&&!isNaN(m.dataMaximum)&&m.dataMaximum>0&&(f=Math.floor(m.dataMaximum)+1),m.updateLabels(f)}}render(s,d){return this.renderOverride(s,d)}async renderOverride(s,d){var m;const f=s.clipCount;let g=null;try{if(g=RenderingExtensions.autoResetClip(s,d),this.lastPlotException){const x=`An exception of type ${this.lastPlotException.constructor.name} was thrown when updating the plot model.\r
${this.lastPlotException.stack}`;await this.renderErrorMessage(s,`OxyPlot exception: ${this.lastPlotException.message}`,x);return}this.renderingDecorator&&(s=this.renderingDecorator(s)),this._plotBounds=d,this._actualPlotMargins=new OxyThickness(isNaN(this.plotMargins.left)?0:this.plotMargins.left,isNaN(this.plotMargins.top)?0:this.plotMargins.top,isNaN(this.plotMargins.right)?0:this.plotMargins.right,isNaN(this.plotMargins.bottom)?0:this.plotMargins.bottom);for(const x of this.legends)x.ensureLegendProperties();for(let x=0;x<10&&(await this.updatePlotArea(s),this.updateAxisTransforms(),this.updateIntervals(),!!this.adjustPlotMargins(s));x++);if(this.plotType===1&&(this.enforceCartesianTransforms(),this.updateIntervals()),await this.renderBackgrounds(s),await this.renderAnnotations(s,AnnotationLayer.BelowAxes),await this.renderAxes(s,AxisLayer.BelowSeries),await this.renderAnnotations(s,AnnotationLayer.BelowSeries),await this.renderSeries(s),await this.renderAnnotations(s,AnnotationLayer.AboveSeries),await this.renderTitle(s),await this.renderBox(s),await this.renderAxes(s,AxisLayer.AboveSeries),this.isLegendVisible&&await this.renderLegends(s),s.clipCount!==f+1)throw new Error("Unbalanced calls to IRenderContext.pushClip were made during rendering.")}catch(x){debugger;for(console.log(x);s.clipCount>f;)s.popClip();const w=`An exception of type ${(m=x.constructor)==null?void 0:m.name} was thrown when rendering the plot model.\r
${x.stack}`;this.lastPlotException=x,await this.renderErrorMessage(s,`OxyPlot exception: ${x.message}`,w)}finally{g==null||g.dispose(),s.cleanUp()}}async renderErrorMessage(s,d,m,f=12){const g=new ScreenPoint(10,10);await s.drawText(g,d,this.textColor,void 0,f,FontWeights.Bold),await RenderingExtensions.drawMultilineText(s,g.plus(new ScreenVector(0,f*1.5)),m,this.textColor,void 0,f,f*1.25)}adjustPlotMargins(s){const d=this.axes.filter(x=>x.isAxisVisible);d.forEach(x=>{x.measure(s)});let m=OxyThickness.Zero;const f=(x,w)=>{switch(w){case AxisPosition.Bottom:m=new OxyThickness(m.left,m.top,m.right,Math.max(m.bottom,x));break;case AxisPosition.Left:m=new OxyThickness(Math.max(m.left,x),m.top,m.right,m.bottom);break;case AxisPosition.Right:m=new OxyThickness(m.left,m.top,Math.max(m.right,x),m.bottom);break;case AxisPosition.Top:m=new OxyThickness(m.left,Math.max(m.top,x),m.right,m.bottom);break}};for(let x=AxisPosition.Left;x<=AxisPosition.Bottom;x++){const w=d.filter(A=>A.position===x),C=this.adjustAxesPositions(w);f(C,x)}d.forEach(x=>{m=m.include(x.desiredMargin)});let g=this.plotMargins;return g=new OxyThickness(isNaN(g.left)?m.left:g.left,isNaN(g.top)?m.top:g.top,isNaN(g.right)?m.right:g.right,isNaN(g.bottom)?m.bottom:g.bottom),g.equals(this.actualPlotMargins)?!1:(this._actualPlotMargins=g,!0)}adjustAxesPositions(s){let d=0;const m=f=>{switch(f.position){case AxisPosition.Left:return f.desiredMargin.left;case AxisPosition.Right:return f.desiredMargin.right;case AxisPosition.Top:return f.desiredMargin.top;case AxisPosition.Bottom:return f.desiredMargin.bottom;default:throw new Error("We don't do this for polar axes")}};return s.reduce((f,g)=>{const x=g.positionTier,w=f.get(x);return w?w.push(g):f.set(x,[g]),f},new Map).forEach((f,g)=>{const x=Math.max(...f.map(m)),w=d;Math.abs(d)>1e-5&&(d+=this.axisTierDistance),d+=x,f.forEach(C=>{C.positionTierSize=x,C.positionTierMinShift=w,C.positionTierMaxShift=d})}),d}measureTitles(s){const d=s.measureText(this.title||"",this.actualTitleFont,this.titleFontSize,this.titleFontWeight),m=s.measureText(this.subtitle||"",this.subtitleFont||this.actualSubtitleFont,this.subtitleFontSize,this.subtitleFontWeight),f=d.height+m.height,g=Math.max(d.width,m.width);return new OxySize(g,f)}renderAnnotations(s,d){return this.renderPlotElements(this.annotations.filter(m=>m.layer===d),s,async m=>m.render(s))}async renderAxes(s,d){for(const m of this.axes.filter(f=>f.isAxisVisible&&f.layer===d))s.setToolTip(m.toolTip),await m.render(s,0);for(const m of this.axes.filter(f=>f.isAxisVisible&&f.layer===d))s.setToolTip(m.toolTip),await m.render(s,1);s.setToolTip(void 0)}async renderLegends(s){if(this.isLegendVisible)return this.legends.filter(d=>d.isLegendVisible).forEach(d=>(s.setToolTip(d.toolTip),d.renderLegends(s)))}async renderBackgrounds(s){this.axes.length>0&&this.plotAreaBackground.isVisible()&&await s.drawRectangle(this.plotArea,this.plotAreaBackground,OxyColors.Undefined,0,this.edgeRenderingMode);const d=this.series.filter(m=>m instanceof XYAxisSeries).map(m=>m).filter(m=>m.isVisible&&m.background.isVisible());for(const m of d)await s.drawRectangle(m.getScreenRectangle(),m.background,OxyColors.Undefined,0,this.edgeRenderingMode)}async renderBox(s){if(this.axes.length>0){const d=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await RenderingExtensions.drawRectangle(s,this.plotArea,this.plotAreaBorderColor,this.plotAreaBorderThickness,d)}}async renderSeries(s){return this.barSeriesManagers.forEach(d=>{d.initializeRender()}),this.renderPlotElements(this.series.filter(d=>d.isVisible),s,async d=>d.render(s))}async renderPlotElements(s,d,m){let f=OxyRect.Everything;for(const g of s){const x=g.getClippingRect();x.equals(f)||(f.equals(OxyRect.Everything)||(d.popClip(),f=OxyRect.Everything),x.equals(OxyRect.Everything)||(d.pushClip(x),f=x)),d.setToolTip(g.toolTip),await m(g)}f.equals(OxyRect.Everything)||d.popClip(),d.setToolTip(void 0)}async renderTitle(s){let d;this.clipTitle&&(d=new OxySize(this.titleArea.width*this.titleClippingLength,Number_MAX_VALUE));const m=s.measureText(this.title||"",this.actualTitleFont,this.titleFontSize,this.titleFontWeight),f=(this.titleArea.left+this.titleArea.right)*.5;let g=this.titleArea.top;this.title&&(s.setToolTip(this.titleToolTip),await MathRenderingExtensions.drawMathText(s,new ScreenPoint(f,g),this.title,this.titleColor.getActualColor(this.textColor),this.actualTitleFont,this.titleFontSize,this.titleFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Top,d),g+=m.height,s.setToolTip(void 0)),this.subtitle&&await MathRenderingExtensions.drawMathText(s,new ScreenPoint(f,g),this.subtitle,this.subtitleColor.getActualColor(this.textColor),this.actualSubtitleFont,this.subtitleFontSize,this.subtitleFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Top,d)}async updatePlotArea(s){let d=new OxyRect(this.plotBounds.left+this.padding.left,this.plotBounds.top+this.padding.top,Math.max(0,this.width-this.padding.left-this.padding.right),Math.max(0,this.height-this.padding.top-this.padding.bottom));const m=this.measureTitles(s);if(m.height>0){const g=m.height+this.titlePadding;d=new OxyRect(d.left,d.top+g,d.width,Math.max(0,d.height-g))}let f=d.deflate(this.actualPlotMargins);if(this.isLegendVisible){let g=new OxySize(0,0),x=0;const w=this.legends.filter(C=>C.legendPlacement===LegendPlacement.Outside&&C.isLegendVisible);for(const C of w.filter(A=>isLeftLegend(A.legendPosition))){const A=C.allowUseFullExtent?d.width:f.width;let _=C.allowUseFullExtent?d.height:f.height;_=isNaN(C.legendMaxHeight)?_:Math.min(_,C.legendMaxHeight);const M=await C.getLegendSize(s,new OxySize(A,_));C.legendSize=M,g=new OxySize(Math.max(g.width,M.width),Math.max(g.height,M.height)),C.legendMargin>x&&(x=C.legendMargin)}(g.width>0||g.height>0)&&(f=new OxyRect(f.left+g.width+x,f.top,Math.max(0,f.width-(g.width+x)),f.height)),g=new OxySize(0,0),x=0;for(const C of w.filter(A=>isRightLegend(A.legendPosition))){const A=C.allowUseFullExtent?d.width:f.width;let _=C.allowUseFullExtent?d.height:f.height;_=isNaN(C.legendMaxHeight)?_:Math.min(_,C.legendMaxHeight);const M=await C.getLegendSize(s,new OxySize(A,_));C.legendSize=M,g=new OxySize(Math.max(g.width,M.width),Math.max(g.height,M.height)),C.legendMargin>x&&(x=C.legendMargin)}(g.width>0||g.height>0)&&(f=new OxyRect(f.left,f.top,Math.max(0,f.width-(g.width+x)),f.height)),g=new OxySize(0,0),x=0;for(const C of w.filter(A=>isTopLegend(A.legendPosition))){const A=C.allowUseFullExtent?d.width:f.width;let _=C.allowUseFullExtent?d.height:f.height;_=isNaN(C.legendMaxHeight)?_:Math.min(_,C.legendMaxHeight);const M=await C.getLegendSize(s,new OxySize(A,_));C.legendSize=M,g=new OxySize(Math.max(g.width,M.width),Math.max(g.height,M.height)),C.legendMargin>x&&(x=C.legendMargin)}(g.width>0||g.height>0)&&(f=new OxyRect(f.left,f.top+g.height+x,f.width,Math.max(0,f.height-(g.height+x)))),g=new OxySize(0,0),x=0;for(const C of w.filter(A=>isBottomLegend(A.legendPosition))){const A=C.allowUseFullExtent?d.width:f.width;let _=C.allowUseFullExtent?d.height:f.height;_=isNaN(C.legendMaxHeight)?_:Math.min(_,C.legendMaxHeight);const M=await C.getLegendSize(s,new OxySize(A,_));C.legendSize=M,g=new OxySize(Math.max(g.width,M.width),Math.max(g.height,M.height)),C.legendMargin>x&&(x=C.legendMargin)}(g.width>0||g.height>0)&&(f=new OxyRect(f.left,f.top,f.width,Math.max(0,f.height-(g.height+x))));for(const C of this.legends.filter(A=>A.legendPlacement===LegendPlacement.Inside&&A.isLegendVisible)){let A=f.width,_=isNaN(C.legendMaxHeight)?f.height:Math.min(f.height,C.legendMaxHeight);C.legendPlacement===LegendPlacement.Inside&&(A-=C.legendMargin*2,_-=C.legendMargin*2),C.legendSize=await C.getLegendSize(s,new OxySize(A,_))}}switch(f.height<0&&(f=new OxyRect(f.left,f.top,f.width,1)),f.width<0&&(f=new OxyRect(f.left,f.top,1,f.height)),this._plotArea=f,this._plotAndAxisArea=f.inflate2(this.actualPlotMargins),this.titleHorizontalAlignment){case 1:this._titleArea=new OxyRect(this.plotBounds.left,this.plotBounds.top+this.padding.top,this.width,m.height+this.titlePadding*2);break;default:this._titleArea=new OxyRect(this.plotArea.left,this.plotBounds.top+this.padding.top,this.plotArea.width,m.height+this.titlePadding*2);break}for(const g of this.legends)g.legendArea=g.getLegendRectangle(g.legendSize)}}class FontWeights{}D(FontWeights,"Bold",700),D(FontWeights,"Normal",400);var HorizontalAlignment=(a=>(a[a.Left=-1]="Left",a[a.Center=0]="Center",a[a.Right=1]="Right",a))(HorizontalAlignment||{}),LineJoin=(a=>(a[a.Miter=0]="Miter",a[a.Round=1]="Round",a[a.Bevel=2]="Bevel",a))(LineJoin||{}),LineStyle=(a=>(a[a.Solid=0]="Solid",a[a.Dash=1]="Dash",a[a.Dot=2]="Dot",a[a.DashDot=3]="DashDot",a[a.DashDashDot=4]="DashDashDot",a[a.DashDotDot=5]="DashDotDot",a[a.DashDashDotDot=6]="DashDashDotDot",a[a.LongDash=7]="LongDash",a[a.LongDashDot=8]="LongDashDot",a[a.LongDashDotDot=9]="LongDashDotDot",a[a.None=10]="None",a[a.Automatic=11]="Automatic",a))(LineStyle||{});class LineStyleHelper{static getDashArray(s){switch(s){case LineStyle.Solid:return;case LineStyle.Dash:return[4,1];case LineStyle.Dot:return[1,1];case LineStyle.DashDot:return[4,1,1,1];case LineStyle.DashDashDot:return[4,1,4,1,1,1];case LineStyle.DashDotDot:return[4,1,1,1,1,1];case LineStyle.DashDashDotDot:return[4,1,4,1,1,1,1,1];case LineStyle.LongDash:return[10,1];case LineStyle.LongDashDot:return[10,1,1,1];case LineStyle.LongDashDotDot:return[10,1,1,1,1,1];default:return}}}class OxyPen{constructor(s,d=1,m=LineStyle.Solid,f=LineJoin.Miter){D(this,"dashArray"),this.color=s,this.thickness=d,this.lineStyle=m,this.lineJoin=f,this.dashArray=LineStyleHelper.getDashArray(m)}get actualDashArray(){return this.dashArray||LineStyleHelper.getDashArray(this.lineStyle)}static create(s,d,m=LineStyle.Solid,f=LineJoin.Miter){if(!(s.isInvisible()||m===LineStyle.None||Math.abs(d)<=0))return new OxyPen(s,d,m,f)}}const Xt=class hi{constructor(s,d,m,f){if(D(this,"_height"),D(this,"_left"),D(this,"_top"),D(this,"_width"),m<0)throw new Error("width;The width should not be negative.");if(f<0)throw new Error("height;The height should not be negative.");this._left=s,this._top=d,this._width=m,this._height=f}static fromScreenPoints(s,d){return new hi(Math.min(s.x,d.x),Math.min(s.y,d.y),Math.abs(d.x-s.x),Math.abs(d.y-s.y))}static fromScreenPointAndSize(s,d){return new hi(s.x,s.y,d.width,d.height)}get bottom(){return this._top+this._height}get height(){return this._height}get left(){return this._left}get right(){return this._left+this._width}get top(){return this._top}get width(){return this._width}get center(){return new ScreenPoint(this._left+this._width*.5,this._top+this._height*.5)}get topLeft(){return new ScreenPoint(this.left,this.top)}get topRight(){return new ScreenPoint(this.right,this.top)}get bottomLeft(){return new ScreenPoint(this.left,this.bottom)}get bottomRight(){return new ScreenPoint(this.right,this.bottom)}static create(s,d,m,f){return new hi(Math.min(s,m),Math.min(d,f),Math.abs(m-s),Math.abs(f-d))}contains(s,d){return s>=this.left&&s<=this.right&&d>=this.top&&d<=this.bottom}containsPoint(s){return this.contains(s.x,s.y)}toString(){return`(${this._left}, ${this._top}, ${this._width}, ${this._height})`}equals(s){return this.left===s.left&&this.top===s.top&&this.width===s.width&&this.height===s.height}inflate(s,d){return new hi(this._left-s,this._top-d,this._width+s*2,this._height+d*2)}inflate2(s){return new hi(this._left-s.left,this._top-s.top,this._width+s.left+s.right,this._height+s.top+s.bottom)}intersect(s){const d=Math.max(this.left,s.left),m=Math.max(this.top,s.top),f=Math.min(this.right,s.right),g=Math.min(this.bottom,s.bottom);return f<d||g<m?hi.Empty:new hi(d,m,f-d,g-m)}deflate(s){return new hi(this._left+s.left,this._top+s.top,Math.max(0,this._width-s.left-s.right),Math.max(0,this._height-s.top-s.bottom))}offset(s,d){return new hi(this._left+s,this._top+d,this._width,this._height)}clip(s){const d=isNegativeInfinity(s.left)&&isPositiveInfinity(s.width)?s.right:1/0,m=isNegativeInfinity(s.top)&&isPositiveInfinity(s.height)?s.bottom:1/0;return hi.create(Math.max(Math.min(this.left,d),s.left),Math.max(Math.min(this.top,m),s.top),Math.max(Math.min(this.right,d),s.left),Math.max(Math.min(this.bottom,m),s.top))}};D(Xt,"Everything",new Xt(0,0,1/0,1/0)),D(Xt,"Empty",new Xt(0,0,0,0));let OxyRect=Xt;const pe=class Vi{constructor(s,d){D(this,"_height"),D(this,"_width"),this._width=s||0,this._height=d||0}get height(){return this._height}get width(){return this._width}toString(){return`(${this.width}, ${this.height})`}equals(s){return this.width===s.width&&this.height===s.height}include(s){return new Vi(Math.max(this.width,s.width),Math.max(this.height,s.height))}};D(pe,"Empty",new pe(0,0));let OxySize=pe;OxySize.prototype.getBounds=function(a,s,d){return OxySizeExtensions.getBounds(this,a,s,d)};class OxySizeExtensions{static getBounds(s,d,m,f){const g=m===HorizontalAlignment.Left?0:m===HorizontalAlignment.Center?.5:1,x=f===VerticalAlignment.Top?0:f===VerticalAlignment.Middle?.5:1,w=new ScreenVector(g*s.width,x*s.height);if(d===0)return new OxyRect(-w.x,-w.y,s.width,s.height);const C=new ScreenVector(0,0).minus(w),A=new ScreenVector(s.width,0).minus(w),_=new ScreenVector(s.width,s.height).minus(w),M=new ScreenVector(0,s.height).minus(w),P=d*Math.PI/180,E=Math.cos(P),R=Math.sin(P),B=Z=>new ScreenVector(E*Z.x-R*Z.y,R*Z.x+E*Z.y),z=B(C),F=B(A),I=B(_),L=B(M),W=Math.min(Math.min(z.x,F.x),Math.min(I.x,L.x)),G=Math.min(Math.min(z.y,F.y),Math.min(I.y,L.y)),q=Math.max(Math.max(z.x-W,F.x-W),Math.max(I.x-W,L.x-W)),K=Math.max(Math.max(z.y-G,F.y-G),Math.max(I.y-G,L.y-G));return new OxyRect(W,G,q,K)}static getPolygon(s,d,m,f,g){const x=f===HorizontalAlignment.Left?0:f===HorizontalAlignment.Center?.5:1,w=g===VerticalAlignment.Top?0:g===VerticalAlignment.Middle?.5:1,C=new ScreenVector(x*s.width,w*s.height);let A=new ScreenVector(0,0).minus(C),_=new ScreenVector(s.width,0).minus(C),M=new ScreenVector(s.width,s.height).minus(C),P=new ScreenVector(0,s.height).minus(C);if(m!==0){const E=m*Math.PI/180,R=Math.cos(E),B=Math.sin(E),z=F=>new ScreenVector(R*F.x-B*F.y,B*F.x+R*F.y);A=z(A),_=z(_),M=z(M),P=z(P)}return[d.plus(A),d.plus(_),d.plus(M),d.plus(P)]}}const ge=class Ui{constructor(s,d,m,f){if(D(this,"_bottom"),D(this,"_left"),D(this,"_right"),D(this,"_top"),isNullOrUndef(d)&&isNullOrUndef(m)&&isNullOrUndef(f))this._left=this._top=this._right=this._bottom=s;else if(!isNullOrUndef(d)&&!isNullOrUndef(m)&&!isNullOrUndef(f))this._left=s,this._top=d,this._right=m,this._bottom=f;else throw new Error("Invalid arguments")}get bottom(){return this._bottom}get left(){return this._left}get right(){return this._right}get top(){return this._top}toString(){return`(${this._left}, ${this._top}, ${this._right}, ${this._bottom})`}equals(s){return this.left===s.left&&this.top===s.top&&this.right===s.right&&this.bottom===s.bottom}include(s){return new Ui(Math.max(s.left,this.left),Math.max(s.top,this.top),Math.max(s.right,this.right),Math.max(s.bottom,this.bottom))}};D(ge,"Zero",new ge(0));let OxyThickness=ge;const re=class ki{constructor(s,d){D(this,"_x"),D(this,"_y"),this._x=s||0,this._y=d||0}get x(){return this._x}get y(){return this._y}static isUndefined(s){return isNaN(s._x)&&isNaN(s._y)}plus(s){const d=this;return new ki(d.x+s.x,d.y+s.y)}minus(s){const d=this;return new ScreenVector(d.x-s.x,d.y-s.y)}minusVector(s){const d=this;return new ki(d.x-s.x,d.y-s.y)}distanceTo(s){const d=s._x-this._x,m=s._y-this._y;return Math.sqrt(d*d+m*m)}distanceToSquared(s){const d=s._x-this._x,m=s._y-this._y;return d*d+m*m}toString(){return`${this._x} ${this._y}`}equals(s){return this._x===s._x&&this._y===s._y}};D(re,"Undefined",new re(NaN,NaN)),D(re,"LeftTop",new re(0,0));let ScreenPoint=re;class ScreenPointHelper{static findNearestPointOnPolyline(s,d){if(!d)throw new Error("points is null");let m=Number_MAX_VALUE,f=ScreenPoint.LeftTop;for(let g=0;g+1<d.length;g++){const x=d[g],w=d[g+1];if(ScreenPoint.isUndefined(x)||ScreenPoint.isUndefined(w))continue;const C=ScreenPointHelper.findPointOnLine(s,x,w);if(ScreenPoint.isUndefined(C))continue;const A=s.minus(C).lengthSquared;A<m&&(f=C,m=A)}return f}static findPointOnLine(s,d,m){const f=m.x-d.x,g=m.y-d.y;let x=ScreenPointHelper.findPositionOnLine(s,d,m);return isNaN(x)&&(x=0),x<0&&(x=0),x>1&&(x=1),new ScreenPoint(d.x+x*f,d.y+x*g)}static findPositionOnLine(s,d,m){const f=m.x-d.x,g=m.y-d.y,x=(s.x-d.x)*f+(s.y-d.y)*g,w=f*f+g*g;return w<1e-6?NaN:x/w}static isPointInPolygon(s,d){if(!d)return!1;const m=d.length;let f=!1;for(let g=0,x=m-1;g<m;x=g++)d[g].y>s.y!=d[x].y>s.y&&s.x<(d[x].x-d[g].x)*((s.y-d[g].y)/(d[x].y-d[g].y))+d[g].x&&(f=!f);return f}static resamplePoints(s,d){const m=d*d,f=s.length,g=[];if(f>0){g.push(s[0]);let x=0;for(let w=1;w<f;w++)s[x].distanceToSquared(s[w])<m&&w!==f-1||(x=w,g.push(s[w]))}return g}static getCentroid(s){let d=0,m=0,f=0;for(let g=0;g<s.length;g++){const x=(g+1)%s.length,w=s[g].x*s[x].y-s[x].x*s[g].y;d+=(s[g].x+s[x].x)*w,m+=(s[g].y+s[x].y)*w,f+=w}return f*=.5,d/=6*f,m/=6*f,new ScreenPoint(d,m)}}const Qt=class xi{constructor(s,d){D(this,"_x"),D(this,"_y"),this._x=s,this._y=d}get length(){return Math.sqrt(this._x*this._x+this._y*this._y)}get lengthSquared(){return this._x*this._x+this._y*this._y}get x(){return this._x}get y(){return this._y}normalize(){if(this===xi.Zero)throw new Error("Cannot normalize the zero vector");const s=Math.sqrt(this._x*this._x+this._y*this._y);s>0&&(this._x/=s,this._y/=s)}plus(s){const d=this;return new xi(d.x+s.x,d.y+s.y)}minus(s){const d=this;return new xi(d.x-s.x,d.y-s.y)}times(s){const d=this;return new xi(d.x*s,d.y*s)}negate(){const s=this;return new xi(-s.x,-s.y)}toString(){return`${this._x} ${this._y}`}equals(s){return this._x===s._x&&this._y===s._y}};D(Qt,"Zero",Object.freeze(new Qt(0,0)));let ScreenVector=Qt;var VerticalAlignment=(a=>(a[a.Top=-1]="Top",a[a.Middle=0]="Middle",a[a.Bottom=1]="Bottom",a))(VerticalAlignment||{}),EdgeRenderingMode=(a=>(a[a.Automatic=0]="Automatic",a[a.Adaptive=1]="Adaptive",a[a.PreferSharpness=2]="PreferSharpness",a[a.PreferSpeed=3]="PreferSpeed",a[a.PreferGeometricAccuracy=4]="PreferGeometricAccuracy",a))(EdgeRenderingMode||{});const SubAlignment=.6,SubSize=.62,SuperAlignment=0,SuperSize=.62;class MathRenderingExtensions{static async drawMathText(s,d,m,f,g,x,w,C,A,_,M,P=!1){if(!m)return OxySize.Empty;if(m.includes("^{")||m.includes("_{")){const E=d.x,R=d.y,B=await this.internalDrawMathText(s,E,R,0,0,m,f,g,x,w,!0,C);let z=0,F=0;switch(A){case HorizontalAlignment.Right:z=-B.width;break;case HorizontalAlignment.Center:z=-B.width*.5;break}switch(_){case VerticalAlignment.Bottom:F=-B.height;break;case VerticalAlignment.Middle:F=-B.height*.5;break}return await this.internalDrawMathText(s,E,R,z,F,m,f,g,x,w,!1,C),P?B:OxySize.Empty}return await s.drawText(d,m,f,g,x,w,C,A,_,M),P?s.measureText(m,g,x,w):OxySize.Empty}static async measureMathText(s,d,m,f,g){return d.includes("^{")||d.includes("_{")?this.internalDrawMathText(s,0,0,0,0,d,OxyColors.Black,m,f,g,!0,0):s.measureText(d,m,f,g)}static async internalDrawMathText(s,d,m,f,g,x,w,C,A,_,M,P){let E=0;const R=P*Math.PI/180,B=round(Math.cos(R),5),z=round(Math.sin(R),5);let F=d,I=d,L=d;const W=m;let G=m,q=m;const K=A*SuperAlignment,Z=A*SubAlignment,J=A*SuperSize,te=A*SubSize,Q=async(me,Xe,Ve,Ye)=>{if(!M){const et=d+(me-d+f)*B-(Xe-m+g)*z,je=m+(me-d+f)*z+(Xe-m+g)*B;await s.drawText(new ScreenPoint(et,je),Ve,w,C,Ye,_,P)}const qe=s.measureText(Ve,C,Ye,_);return new OxySize(qe.width,qe.height)};for(;E<x.length;){if(E+1<x.length&&x[E]==="^"&&x[E+1]==="{"){const Ye=x.indexOf("}",E);if(Ye!==-1){const qe=substring(x,E+2,Ye-E-2);E=Ye+1;const et=F,je=W+K,Ke=await Q(et,je,qe,J);I=Math.max(et+Ke.width,I),G=Math.max(je+Ke.height,G),L=Math.min(et,L),q=Math.min(je,q);continue}}if(E+1<x.length&&x[E]==="_"&&x[E+1]==="{"){const Ye=x.indexOf("}",E);if(Ye!==-1){const qe=substring(x,E+2,Ye-E-2);E=Ye+1;const et=F,je=W+Z,Ke=await Q(et,je,qe,te);I=Math.max(et+Ke.width,I),G=Math.max(je+Ke.height,G),L=Math.min(et,L),q=Math.min(je,q);continue}}const me=indexOfAny(x.split(""),["^","_"],E+1);let Xe;me===-1?(Xe=substring(x,E),E=x.length):(Xe=substring(x,E,me-E),E=me),F=I+2;const Ve=await Q(F,W,Xe,A);I=Math.max(F+Ve.width,I),G=Math.max(W+Ve.height,G),L=Math.min(F,L),q=Math.min(W,q),F=I}return new OxySize(I-L,G-q)}}class RenderContextBase{constructor(){D(this,"rendersToScreen"),this.rendersToScreen=!0}static isStraightLine(s,d){return Math.abs(s.x-d.x)<1e-5||Math.abs(s.y-d.y)<1e-5}static isStraightLine2(s){for(let d=1;d<s.length;d++)if(!this.isStraightLine(s[d-1],s[d]))return!1;return!0}async drawEllipse(s,d,m,f,g){const x=RenderContextBase.createEllipse(s);await this.drawPolygon(x,d,m,f,g,void 0,LineJoin.Miter)}async drawEllipses(s,d,m,f,g){for(const x of s)await this.drawEllipse(x,d,m,f,g)}async drawLineSegments(s,d,m,f,g,x){for(let w=0;w+1<s.length;w+=2)await this.drawLine([s[w],s[w+1]],d,m,f,g,x)}async drawPolygons(s,d,m,f,g,x,w){for(const C of s)await this.drawPolygon(C,d,m,f,g,x,w)}async drawRectangle(s,d,m,f,g){const x=RenderContextBase.createRectangle(s);await this.drawPolygon(x,d,m,f,g,void 0,LineJoin.Miter)}async drawRectangles(s,d,m,f,g){for(const x of s)await this.drawRectangle(x,d,m,f,g)}setToolTip(s){}cleanUp(){}static createEllipse(s,d=40){const m=s.center.x,f=s.center.y,g=s.width/2,x=s.height/2,w=new Array(d);for(let C=0;C<d;C++){const A=Math.PI*2*C/d;w[C]=new ScreenPoint(m+Math.cos(A)*g,f+Math.sin(A)*x)}return w}static createRectangle(s){return[new ScreenPoint(s.left,s.top),new ScreenPoint(s.left,s.bottom),new ScreenPoint(s.right,s.bottom),new ScreenPoint(s.right,s.top)]}shouldUseAntiAliasingForRect(s){switch(s){case EdgeRenderingMode.PreferGeometricAccuracy:return!0;default:return!1}}shouldUseAntiAliasingForEllipse(s){switch(s){case EdgeRenderingMode.PreferSpeed:return!1;default:return!0}}shouldUseAntiAliasingForLine(s,d){switch(s){case EdgeRenderingMode.PreferSpeed:case EdgeRenderingMode.PreferSharpness:return!1;case EdgeRenderingMode.Automatic:if(RenderContextBase.isStraightLine2(d))return!1;break;case EdgeRenderingMode.Adaptive:if(RenderContextBase.isStraightLine2(d))return!1;break;default:return!0}return!0}}const ae=class{static getActualEdgeRenderingMode(s,d){return s===EdgeRenderingMode.Automatic?d:s}static async drawReducedLine(s,d,m,f,g,x,w,C,A,_){d.length!==0&&(A?A.length=0:A=[],this.reducePoints(d,m,A),await s.drawLine(A,f,g,x,w,C),A.length=0,pushMany(A,d),_&&_(A))}static async drawReducedPolygon(s,d,m,f,g,x,w,C=LineStyle.Solid,A=LineJoin.Miter){if(d.length===0||C===LineStyle.None)return;const _=[];this.reducePoints(d,m,_),await s.drawPolygon(_,f,g,x,w,LineStyleHelper.getDashArray(C),A)}static async drawImage(s,d,m,f,g,x,w,C){await s.drawImage(d,0,0,d.width,d.height,m,f,g,x,w,C)}static async drawMultilineText(s,d,m,f,g,x=10,w=FontWeights.Normal,C=12){const A=StringHelper.splitLines(m);for(let _=0;_<A.length;_++)await s.drawText(new ScreenPoint(d.x,d.y+_*C),A[_],f,void 0,x,w)}static async drawLine(s,d,m,f,g,x,w){x&&await s.drawLine([new ScreenPoint(d,m),new ScreenPoint(f,g)],x.color,x.thickness,w,x.actualDashArray,x.lineJoin)}static async drawLineSegments(s,d,m,f){m&&await s.drawLineSegments(d,m.color,m.thickness,f,m.actualDashArray,m.lineJoin)}static async drawMarker(s,d,m,f,g,x,w,C,A){await this.drawMarkers(s,[d],m,f,[g],x,w,C,A)}static async drawMarkers(s,d,m,f,g,x,w,C,A,_=0,M=new ScreenPoint){if(m===MarkerType.None)return;const P=[],E=[],R=[],B=[],z=new Set;let F=0;for(const I of d){if(_>1){const W=Math.floor((I.x-M.x)/_),G=Math.floor((I.y-M.y)/_),q=toUint(W<<16)+toUint(G);if(z.has(q)){F++;continue}z.add(q)}const L=F<g.length?F:0;this.addMarkerGeometry(I,m,f,g[L],P,E,R,B),F++}A===EdgeRenderingMode.Automatic&&(A=EdgeRenderingMode.PreferGeometricAccuracy),P.length>0&&await s.drawEllipses(P,x,w,C,A),E.length>0&&await s.drawRectangles(E,x,w,C,A),R.length>0&&await s.drawPolygons(R,x,w,C,A),B.length>0&&await s.drawLineSegments(B,w,C,A)}static async drawCircle(s,d,m,f,g,x,w,C){await s.drawEllipse(new OxyRect(d-f,m-f,f*2,f*2),g,x,w,C)}static async drawCircle2(s,d,m,f,g,x,w){await this.drawCircle(s,d.x,d.y,m,f,g,x,w)}static async fillCircle(s,d,m,f,g){await this.drawCircle(s,d.x,d.y,m,f,OxyColors.Undefined,0,g)}static async fillRectangle(s,d,m,f){await s.drawRectangle(d,m,OxyColors.Undefined,0,f)}static async drawRectangle(s,d,m,f,g){if(f.left===f.right&&f.left===f.top&&f.left===f.bottom){await s.drawRectangle(d,OxyColors.Undefined,m,f.left,g);return}const x=d.left-f.left/2+.5,w=d.right+f.right/2-.5,C=d.top-f.top/2+.5,A=d.bottom+f.bottom/2-.5,_=[new ScreenPoint(x,d.top),new ScreenPoint(w,d.top)],M=[new ScreenPoint(d.right,C),new ScreenPoint(d.right,A)],P=[new ScreenPoint(x,d.bottom),new ScreenPoint(w,d.bottom)],E=[new ScreenPoint(d.left,C),new ScreenPoint(d.left,A)];await s.drawLine(_,m,f.top,g,void 0,LineJoin.Miter),await s.drawLine(M,m,f.right,g,void 0,LineJoin.Miter),await s.drawLine(P,m,f.bottom,g,void 0,LineJoin.Miter),await s.drawLine(E,m,f.left,g,void 0,LineJoin.Miter)}static measureText(s,d,m,f,g,x){const w=s.measureText(d,m,f,g);return this.measureRotatedRectangleBound(w,x)}static autoResetClip(s,d){return new AutoResetClipToken(s,d)}static addMarkerGeometry(s,d,m,f,g,x,w,C){if(d===MarkerType.Custom){if(!m)throw new Error("The outline should be set when MarkerType is 'Custom'.");const _=m.map(M=>new ScreenPoint(s.x+M.x*f,s.y+M.y*f));w.push(_);return}switch(d){case MarkerType.Circle:g.push(new OxyRect(s.x-f,s.y-f,f*2,f*2));break;case MarkerType.Square:x.push(new OxyRect(s.x-f,s.y-f,f*2,f*2));break;case MarkerType.Diamond:w.push([new ScreenPoint(s.x,s.y-this.M2*f),new ScreenPoint(s.x+this.M2*f,s.y),new ScreenPoint(s.x,s.y+this.M2*f),new ScreenPoint(s.x-this.M2*f,s.y)]);break;case MarkerType.Triangle:w.push([new ScreenPoint(s.x-f,s.y+this.M1*f),new ScreenPoint(s.x+f,s.y+this.M1*f),new ScreenPoint(s.x,s.y-this.M2*f)]);break;case MarkerType.Plus:case MarkerType.Star:C.push(new ScreenPoint(s.x-f,s.y)),C.push(new ScreenPoint(s.x+f,s.y)),C.push(new ScreenPoint(s.x,s.y-f)),C.push(new ScreenPoint(s.x,s.y+f));break}const A=this.M3;switch(d){case MarkerType.Cross:case MarkerType.Star:C.push(new ScreenPoint(s.x-f*A,s.y-f*A)),C.push(new ScreenPoint(s.x+f*A,s.y+f*A)),C.push(new ScreenPoint(s.x-f*A,s.y+f*A)),C.push(new ScreenPoint(s.x+f*A,s.y-f*A));break}}static measureRotatedRectangleBound(s,d){const m=s.getBounds(d,HorizontalAlignment.Center,VerticalAlignment.Middle);return new OxySize(m.width,m.height)}static reducePoints(s,d,m){const f=s.length;if(f===0)return;m.push(s[0]);let g=0;for(let x=1;x<f;x++){const w=s[x],C=w.x-s[g].x,A=w.y-s[g].y;(C*C+A*A>d||x===f-1)&&(m.push(new ScreenPoint(w.x,w.y)),g=x)}}static transformAndInterpolateLines(s,d,m,f){const g=s.xAxis,x=s.yAxis;if(g.isLogarithmic()||x.isLogarithmic()){let w=!1,C=!0,A=DataPoint.Undefined;for(const _ of d)if(!_.isDefined()||g.isLogarithmic()&&_.x<=0||x.isLogarithmic()&&_.y<=0)C=!0;else{if(C)m.length>0&&m.push(ScreenPoint.Undefined),C=!1,w=!0;else if(w){const M=_.minus(A);this.interpolatePoints(P=>s.transform(A.plus(M.times(P))),m,f,w)}A=_}}else{let w=!0;for(const C of d)C.isDefined()?(w&&m.length>0&&m.push(ScreenPoint.Undefined),m.push(s.transform(C)),w=!1):w=!0}}static interpolatePoints(s,d,m,f){const g=m*m,x=[],w=[];x.push(1),w.push(s(1));let C=0,A=s(0);for(f&&d.push(A);x.length>0;){let _=x[x.length-1],M=w[w.length-1];M.distanceToSquared(A)<g?(C=_,A=M,d.push(M),x.pop(),w.pop()):(_=C+(_-C)/2,M=s(_),x.push(_),w.push(M))}}};D(ae,"M1",Math.tan(Math.PI/6)),D(ae,"M2",Math.sqrt(1+ae.M1*ae.M1)),D(ae,"M3",Math.tan(Math.PI/4));let RenderingExtensions=ae;class AutoResetClipToken{constructor(s,d){D(this,"renderContext"),this.renderContext=s,s.pushClip(d)}dispose(){this.renderContext.popClip()}}class ClippingRenderContext extends RenderContextBase{constructor(){super(...arguments),D(this,"clipStack",[])}popClip(){if(this.clipStack.length===0)throw new Error("Unbalanced call to popClip.");const s=this.clipStack.pop();if(this.clipStack.length>0){const d=this.clipStack[this.clipStack.length-1];s.equals(d)||(this.resetClip(),this.setClip(d))}else this.resetClip()}pushClip(s){if(this.clipStack.length>0){const d=this.clipStack[this.clipStack.length-1],m=s.intersect(d);d.equals(m)||(this.resetClip(),this.setClip(m)),this.clipStack.push(m)}else this.setClip(s),this.clipStack.push(s)}get clipCount(){return this.clipStack.length}}class XkcdRenderingDecorator extends RenderContextBase{constructor(s){super(),D(this,"rc"),D(this,"distortionFactor"),D(this,"interpolationDistance"),D(this,"fontFamily"),D(this,"thicknessScale"),this.rc=s,this.rendersToScreen=this.rc.rendersToScreen,this.distortionFactor=7,this.interpolationDistance=10,this.thicknessScale=2,this.fontFamily="Humor Sans"}get clipCount(){return this.rc.clipCount}async drawLine(s,d,m,f,g,x){const w=this.distort(s);await this.rc.drawLine(w,d,m*this.thicknessScale,f,g,x)}async drawPolygon(s,d,m,f,g,x,w){const C=[...s,s[0]],A=this.distort(C);await this.rc.drawPolygon(A,d,m,f*this.thicknessScale,g,x,w)}async drawText(s,d,m,f,g,x,w,C,A,_){await this.rc.drawText(s,d,m,this.getFontFamily(f),g,x,w,C,A,_)}measureText(s,d,m,f){return this.rc.measureText(s,this.getFontFamily(d),m,f)}setToolTip(s){this.rc.setToolTip(s)}cleanUp(){this.rc.cleanUp()}async drawImage(s,d,m,f,g,x,w,C,A,_,M){await this.rc.drawImage(s,d,m,f,g,x,w,C,A,_,M)}pushClip(s){this.rc.pushClip(s)}popClip(){this.rc.popClip()}getFontFamily(s){return this.fontFamily}distort(s){const d=this.interpolate(s,this.interpolationDistance),m=new Array(d.length);let f=this.generateRandomNumbers(d.length);f=this.applyMovingAverage(f,5);const g=this.distortionFactor,x=g/2;for(let w=0;w<d.length;w++){if(w===0||w===d.length-1){m[w]=d[w];continue}const C=d[w+1].minus(d[w-1]);C.normalize();const A=new ScreenVector(C.y,-C.x).times(f[w]*g-x);m[w]=d[w].plus(A)}return m}generateRandomNumbers(s){const d=new Array(s);for(let m=0;m<s;m++)d[m]=Math.random();return d}applyMovingAverage(s,d){const m=s.length,f=new Array(m).fill(0),g=Math.round(d/2);for(let x=0;x<m;x++){const w=Math.max(0,x-g),C=Math.min(m-1,x+g);for(let A=w;A<=C;A++)f[x]+=s[A];f[x]/=d}return f}interpolate(s,d){let m=ScreenPoint.LeftTop,f=-1,g=d;const x=[];for(const w of s){if(f<0){x.push(w),m=w,f=0;continue}const C=w.minus(m).length;if(C>0)for(;g>=f&&g<=f+C;){const A=(g-f)/C;x.push(new ScreenPoint(m.x*(1-A)+w.x*A,m.y*(1-A)+w.y*A)),g+=d}f+=C,m=w}return x.push(m),x}}class Decimator{static decimate(s,d){if(s===void 0||s.length===0)return;let m=s[0],f=Math.round(m.x),g=Math.round(m.y),x=g,w=g,C=g;for(let A=1;A<s.length;++A){m=s[A];const _=Math.round(m.x),M=Math.round(m.y);if(_!==f){Decimator.addVerticalPoints(d,f,w,C,g,x),w=C=g=x=M,f=_;continue}M<g&&(g=M),M>x&&(x=M),C=M}C=w===g?x:g,Decimator.addVerticalPoints(d,f,w,C,g,x)}static addVerticalPoints(s,d,m,f,g,x){if(s.push(new ScreenPoint(d,m)),m===g){g!==x&&s.push(new ScreenPoint(d,x)),x!==f&&s.push(new ScreenPoint(d,f));return}if(m===x){x!==g&&s.push(new ScreenPoint(d,g)),g!==f&&s.push(new ScreenPoint(d,f));return}f===g?g!==x&&s.push(new ScreenPoint(d,x)):f===x?x!==g&&s.push(new ScreenPoint(d,g)):(s.push(new ScreenPoint(d,g)),s.push(new ScreenPoint(d,x))),s.push(new ScreenPoint(d,f))}}class CanonicalSpline{constructor(s){D(this,"tension"),this.tension=s}createSplineDp(s,d,m){return CanonicalSpline.createSplineForDp(s,this.tension,void 0,d,m)}createSplineSp(s,d,m){return CanonicalSpline.createSpline(s,this.tension,void 0,d,m)}static createSplineForDp(s,d,m,f,g){const x=s.map(A=>new ScreenPoint(A.x,A.y)),w=CanonicalSpline.createSpline(x,d,m,f,g),C=[];for(const A of w)C.push(new DataPoint(A.x,A.y));return C}static createSpline(s,d,m,f,g){const x=[];if(!s)return x;const w=s.length;if(w<1)return x;if(w<2)return x.push(...s),x;if(w===2)f?(CanonicalSpline.segment(x,s[1],s[0],s[1],s[0],d,d,g),CanonicalSpline.segment(x,s[0],s[1],s[0],s[1],d,d,g)):CanonicalSpline.segment(x,s[0],s[0],s[1],s[1],d,d,g);else{const C=m&&m.length>0;for(let A=0;A<w;A++){const _=C?m[A%m.length]:d,M=C?m[(A+1)%m.length]:d;A===0?CanonicalSpline.segment(x,f?s[w-1]:s[0],s[0],s[1],s[2],_,M,g):A===w-2?CanonicalSpline.segment(x,s[A-1],s[A],s[A+1],f?s[0]:s[A+1],_,M,g):A===w-1?f&&CanonicalSpline.segment(x,s[A-1],s[A],s[0],s[1],_,M,g):CanonicalSpline.segment(x,s[A-1],s[A],s[A+1],s[A+2],_,M,g)}}return x}static segment(s,d,m,f,g,x,w,C,A=1e3){const _=x*(f.x-d.x),M=x*(f.y-d.y),P=w*(g.x-m.x),E=w*(g.y-m.y),R=_+P+2*m.x-2*f.x,B=M+E+2*m.y-2*f.y,z=-2*_-P-3*m.x+3*f.x,F=-2*M-E-3*m.y+3*f.y,I=_,L=M,W=m.x,G=m.y,q=Math.min(A,Math.round((Math.abs(m.x-f.x)+Math.abs(m.y-f.y))/C));for(let K=1;K<q;K++){const Z=K/(q-1),J=new ScreenPoint(R*Z*Z*Z+z*Z*Z+I*Z+W,B*Z*Z*Z+F*Z*Z+L*Z+G);s.push(J)}}}class CatmullRomSpline{constructor(s){D(this,"alpha"),D(this,"maxSegments"),this.alpha=s,this.maxSegments=100}createSplineDp(s,d,m){return CatmullRomSpline.createSplineForDp(s,this.alpha,d,m,this.maxSegments)}createSplineSp(s,d,m){return CatmullRomSpline.createSpline(s,this.alpha,d,m,this.maxSegments)}static createSplineForDp(s,d,m,f,g){const x=s.map(A=>new ScreenPoint(A.x,A.y)),w=this.createSpline(x,d,m,f,g),C=[];for(const A of w)C.push(new DataPoint(A.x,A.y));return C}static createSpline(s,d,m,f,g){const x=[];if(s===void 0)return x;const w=s.length;if(w<1)return x;if(w<2)return x.push(...s),x;if(w===2)m?(this.segment(x,s[1],s[0],s[1],s[0],d,f,g),this.segment(x,s[0],s[1],s[0],s[1],d,f,g)):this.segment(x,s[0],s[0],s[1],s[1],d,f,g);else for(let C=0;C<w;C++)C===0?this.segment(x,m?s[w-1]:s[0],s[0],s[1],s[2],d,f,g):C===w-2?this.segment(x,s[C-1],s[C],s[C+1],m?s[0]:s[C+1],d,f,g):C===w-1?m&&this.segment(x,s[C-1],s[C],s[0],s[1],d,f,g):this.segment(x,s[C-1],s[C],s[C+1],s[C+2],d,f,g);return x}static segment(s,d,m,f,g,x,w,C){if(m.equals(f)){s.push(m);return}d.equals(m)&&(d=this.prev(m,f)),f.equals(g)&&(g=this.prev(f,m));const A=0,_=this.getT(A,d,m,x),M=this.getT(_,m,f,x),P=this.getT(M,f,g,x);let E=Math.round((Math.abs(m.x-f.x)+Math.abs(m.y-f.y))/w);E=Math.max(0,E),E=Math.min(C,E);for(let R=_;R<M;R+=(M-_)/E){const B=this.sum(this.mult((_-R)/(_-A),d),this.mult((R-A)/(_-A),m)),z=this.sum(this.mult((M-R)/(M-_),m),this.mult((R-_)/(M-_),f)),F=this.sum(this.mult((P-R)/(P-M),f),this.mult((R-M)/(P-M),g)),I=this.sum(this.mult((M-R)/(M-A),B),this.mult((R-A)/(M-A),z)),L=this.sum(this.mult((P-R)/(P-_),z),this.mult((R-_)/(P-_),F)),W=this.sum(this.mult((M-R)/(M-_),I),this.mult((R-_)/(M-_),L));s.push(W)}}static getT(s,d,m,f){const g=Math.pow(m.x-d.x,2)+Math.pow(m.y-d.y,2),x=Math.sqrt(g);return Math.pow(x,f)+s}static mult(s,d){return new ScreenPoint(d.x*s,d.y*s)}static equals(s,d){return s.x===d.x&&s.y===d.y}static prev(s,d){return new ScreenPoint(s.x-1e-4*(d.x-s.x),s.y-1e-4*(d.y-s.y))}static sum(s,d){return new ScreenPoint(s.x+d.x,s.y+d.y)}}class InterpolationAlgorithms{}D(InterpolationAlgorithms,"CanonicalSpline",new CanonicalSpline(.5)),D(InterpolationAlgorithms,"CatmullRomSpline",new CatmullRomSpline(.5)),D(InterpolationAlgorithms,"UniformCatmullRomSpline",new CatmullRomSpline(0)),D(InterpolationAlgorithms,"ChordalCatmullRomSpline",new CatmullRomSpline(1));let Series$1=class extends PlotElement{constructor(s){super(s),D(this,"background"),D(this,"isVisible"),D(this,"title"),D(this,"legendKey"),D(this,"seriesGroupName"),D(this,"renderInLegend"),D(this,"trackerStringFormatter"),D(this,"trackerKey"),this.isVisible=!0,this.background=OxyColors.Undefined,this.renderInLegend=!0}getNearestPoint(s,d){}hitTestOverride(s){const d=this.getNearestPoint(s.point,!0)||this.getNearestPoint(s.point,!1);if(d!=null&&d.position)return d.position.distanceTo(s.point)>s.tolerance?void 0:{element:this,nearestHitPoint:d.position,item:d.item,index:d.index}}};class ItemsSeries extends Series$1{constructor(s){super(s),D(this,"itemsSource")}static getItem(s,d){if(!(!s||d<0)&&d<s.length&&d>=0)return s[d]}getItem(s){if(this.itemsSource)return ItemsSeries.getItem(this.itemsSource,s)}}const oe=class Ci extends ItemsSeries{constructor(s){super(s),D(this,"trackerStringFormatter"),D(this,"_maxX",0),D(this,"_maxY",0),D(this,"_minX",0),D(this,"_minY",0),D(this,"_xAxis"),D(this,"xAxisKey"),D(this,"_yAxis"),D(this,"yAxisKey"),D(this,"isXMonotonic",!1),D(this,"windowStartIndex",0),this.trackerStringFormatter=Ci.DefaultTrackerFormatter,setTransposablePlotElement(this)}get maxX(){return this._maxX}set maxX(s){this._maxX=s}get maxY(){return this._maxY}set maxY(s){this._maxY=s}get minX(){return this._minX}set minX(s){this._minX=s}get minY(){return this._minY}set minY(s){this._minY=s}get xAxis(){return this._xAxis}get yAxis(){return this._yAxis}getClippingRect(){return PlotElementUtilities.getClippingRect(this)}getScreenRectangle(){return this.getClippingRect()}inverseTransform(s){return PlotElementUtilities.inverseTransformOrientated(this,s)}async renderLegend(s,d){}transform(s){return PlotElementUtilities.transformOrientated(this,s)}areAxesRequired(){return!0}ensureAxes(){this._xAxis=this.xAxisKey?this.plotModel.getAxis(this.xAxisKey):this.plotModel.defaultXAxis,this._yAxis=this.yAxisKey?this.plotModel.getAxis(this.yAxisKey):this.plotModel.defaultYAxis}isUsing(s){return!1}setDefaultValues(){}updateAxisMaxMin(){this.xAxis.include(this.minX),this.xAxis.include(this.maxX),this.yAxis.include(this.minY),this.yAxis.include(this.maxY)}updateData(){this.windowStartIndex=0}updateMaxMin(){this.minX=this.minY=this.maxX=this.maxY=Number.NaN}getNearestInterpolatedPointInternal(s,d,m){if(!this.xAxis||!this.yAxis||!s)return;let f=ScreenPoint.LeftTop,g=DataPoint.Zero,x=-1,w=Number_MAX_VALUE;for(let C=d;C+1<s.length;C++){const A=s[C],_=s[C+1];if(!this.isValidPoint(A)||!this.isValidPoint(_))continue;const M=this.transform(A),P=this.transform(_),E=ScreenPointHelper.findPointOnLine(m,M,P);if(ScreenPoint.isUndefined(E))continue;const R=m.minus(E).lengthSquared;if(R<w){const B=P.minus(M).length,z=B>0?E.minus(M).length/B:0;g=this.inverseTransform(E),f=E,w=R,x=C+z}}if(w<Number_MAX_VALUE){const C=this.getItem(Math.round(x));return new TrackerHitResult({series:this,dataPoint:g,position:f,item:C,index:x})}}getNearestPointInternal(s,d,m){let f=ScreenPoint.LeftTop,g=DataPoint.Zero,x=-1,w=Number_MAX_VALUE,C=d;for(const A of s.slice(d)){if(!this.isValidPoint(A)){C++;continue}const _=PlotElementExtensions.transform(this,A.x,A.y),M=_.minus(m).lengthSquared;M<w&&(g=A,f=_,w=M,x=C),C++}if(w<Number_MAX_VALUE){const A=this.getItem(Math.round(x));return new TrackerHitResult({series:this,dataPoint:g,position:f,item:A,index:x})}}isValidPoint(s){return this.isValidPoint2(s.x,s.y)}isValidPoint2(s,d){return!!(this.xAxis&&this.xAxis.isValidValue(s)&&this.yAxis&&this.yAxis.isValidValue(d))}internalUpdateMaxMin(s){if(!s)throw new Error("points is null");if(this.isXMonotonic=!0,s.length===0)return;let d=this.minX,m=this.minY,f=this.maxX,g=this.maxY;isNaN(d)&&(d=Number_MAX_VALUE),isNaN(m)&&(m=Number_MAX_VALUE),isNaN(f)&&(f=Number_MIN_VALUE),isNaN(g)&&(g=Number_MIN_VALUE);let x=Number_MIN_VALUE;for(const w of s){const C=w.x,A=w.y;this.isValidPoint2(C,A)&&(C<x&&(this.isXMonotonic=!1),C<d&&(d=C),C>f&&(f=C),A<m&&(m=A),A>g&&(g=A),x=C)}d<Number_MAX_VALUE&&(this.minX=d),m<Number_MAX_VALUE&&(this.minY=m),f>Number_MIN_VALUE&&(this.maxX=f),g>Number_MIN_VALUE&&(this.maxY=g)}internalUpdateMaxMin2(s,d,m){if(!s)throw new Error("items is null");if(this.isXMonotonic=!0,s.length===0)return;let f=this.minX,g=this.minY,x=this.maxX,w=this.maxY;isNaN(f)&&(f=Number_MAX_VALUE),isNaN(g)&&(g=Number_MAX_VALUE),isNaN(x)&&(x=Number_MIN_VALUE),isNaN(w)&&(w=Number_MIN_VALUE);let C=Number_MIN_VALUE;for(const A of s){const _=d(A),M=m(A);this.isValidPoint2(_,M)&&(_<C&&(this.isXMonotonic=!1),_<f&&(f=_),_>x&&(x=_),M<g&&(g=M),M>w&&(w=M),C=_)}f<Number_MAX_VALUE&&(this.minX=f),g<Number_MAX_VALUE&&(this.minY=g),x>Number_MIN_VALUE&&(this.maxX=x),w>Number_MIN_VALUE&&(this.maxY=w)}internalUpdateMaxMin3(s,d,m,f,g){if(!s)throw new Error("items is null");if(this.isXMonotonic=!0,s.length===0)return;let x=this.minX,w=this.minY,C=this.maxX,A=this.maxY;isNaN(x)&&(x=Number_MAX_VALUE),isNaN(w)&&(w=Number_MAX_VALUE),isNaN(C)&&(C=Number_MIN_VALUE),isNaN(A)&&(A=Number_MIN_VALUE);let _=Number_MIN_VALUE,M=Number_MIN_VALUE;for(const P of s){const E=d(P),R=m(P),B=f(P),z=g(P);!this.isValidPoint2(E,B)||!this.isValidPoint2(R,z)||((E<_||R<M)&&(this.isXMonotonic=!1),E<x&&(x=E),R>C&&(C=R),B<w&&(w=B),z>A&&(A=z),_=E,M=R)}x<Number_MAX_VALUE&&(this.minX=x),w<Number_MAX_VALUE&&(this.minY=w),C>Number_MIN_VALUE&&(this.maxX=C),A>Number_MIN_VALUE&&(this.maxY=A)}verifyAxes(){if(!this.xAxis)throw new Error("XAxis not defined.");if(!this.yAxis)throw new Error("YAxis not defined.")}updateWindowStartIndex(s,d,m,f){return f=this.findWindowStartIndex(s,d,m,f),f>0&&f--,f}findWindowStartIndex(s,d,m,f){let g=0,x=s.length-1;for(;x>0&&isNaN(d(s[x]));)x-=1;let w=x,C=Math.max(0,Math.min(w,f));const A=_=>{for(;_<=x;){const M=d(s[_]);if(isNaN(M))_+=1;else return M}return d(s[x])};for(;g<w;){const _=A(C);if(_===m){g=C;break}else _>m?w=C-1:g=C;if(g>=w)break;const M=A(w),P=A(g),E=(w-g+1)/(M-P);C=g+Math.round((m-P)*E),C=Math.max(g+1,Math.min(C,w))}for(;g>0&&d(s[g])>m;)g-=1;return g}formatDefaultTrackerString(s,d,m){var f,g,x,w;if(!this.trackerStringFormatter)return;const C={item:s,title:this.title||""};return d&&(C.xTitle=((f=this.xAxis)==null?void 0:f.title)??Ci.defaultXAxisTitle,C.xValue=(g=this.xAxis)==null?void 0:g.getValue(d.x),C.yTitle=((x=this.yAxis)==null?void 0:x.title)??Ci.defaultYAxisTitle,C.yValue=(w=this.yAxis)==null?void 0:w.getValue(d.y)),m&&m(C),this.trackerStringFormatter(C)}};D(oe,"DefaultTrackerFormatter",a=>`${a.title||""}
${a.xTitle}: ${a.xValue}
${a.yTitle}: ${a.yValue}`),D(oe,"defaultXAxisTitle","X"),D(oe,"defaultYAxisTitle","Y");let XYAxisSeries=oe;class DataPointSeries extends XYAxisSeries{constructor(s){super(s),D(this,"_points",[]),D(this,"_itemsSourcePoints",[]),D(this,"canTrackerInterpolatePoints",!1),D(this,"dataFieldX"),D(this,"dataFieldY"),D(this,"mapping"),s&&s.points&&(this._points.push(...s.points),delete s.points)}get points(){return this._points}get actualPoints(){return this.itemsSource?this._itemsSourcePoints:this._points}getNearestPoint(s,d){if(d&&!this.canTrackerInterpolatePoints)return;let m;return d&&(m=this.getNearestInterpolatedPointInternal(this.actualPoints,0,s)),m||(m=this.getNearestPointInternal(this.actualPoints,0,s)),m&&this.trackerStringFormatter&&(m.text=this.formatDefaultTrackerString(m.item,m.dataPoint)),m}updateData(){this.itemsSource&&this.updateItemsSourcePoints()}updateMaxMin(){super.updateMaxMin(),this.internalUpdateMaxMin(this.actualPoints)}getItem(s){const d=this.actualPoints;return!this.itemsSource&&d&&s<d.length?d[s]:super.getItem(s)}clearItemsSourcePoints(){this._itemsSourcePoints&&(this._itemsSourcePoints.length=0)}updateItemsSourcePoints(){if(!this.itemsSource)return;const s=this.itemsSource;if(this.mapping){this.clearItemsSourcePoints();for(const d of s)this._itemsSourcePoints.push(this.mapping(d));return}this.clearItemsSourcePoints();for(const d of s){const m=this.convertToDataPoint(d);m&&this._itemsSourcePoints.push(m)}}convertToDataPoint(s){if(s){if(s instanceof DataPoint)return s;if(this.dataFieldX&&this.dataFieldY){const d=this.xAxis?this.xAxis.itemToDouble(s[this.dataFieldX]):Number(s[this.dataFieldX]),m=this.yAxis?this.yAxis.itemToDouble(s[this.dataFieldY]):Number(s[this.dataFieldY]);return new DataPoint(d,m)}if(isDataPointProvider(s))return s.getDataPoint();throw new Error(`Cannot convert item ${s} to DataPoint`)}}}var LineLegendPosition=(a=>(a[a.None=0]="None",a[a.Start=1]="Start",a[a.End=2]="End",a))(LineLegendPosition||{});const Se=class zi extends DataPointSeries{constructor(s){super(s),D(this,"outputBuffer"),D(this,"contiguousScreenPointsBuffer"),D(this,"decimatorBuffer",[]),D(this,"defaultColor",OxyColors.Undefined),D(this,"defaultMarkerFill",OxyColors.Undefined),D(this,"defaultLineStyle",LineStyle.Solid),D(this,"_smoothedPoints"),D(this,"color"),D(this,"brokenLineColor"),D(this,"brokenLineStyle",LineStyle.Solid),D(this,"brokenLineThickness",0),D(this,"dashes"),D(this,"decimator"),D(this,"labelStringFormatter"),D(this,"labelMargin"),D(this,"lineJoin"),D(this,"lineStyle"),D(this,"lineLegendPosition",0),D(this,"markerFill"),D(this,"markerOutline"),D(this,"markerResolution"),D(this,"markerSize"),D(this,"markerStroke"),D(this,"markerStrokeThickness"),D(this,"markerType"),D(this,"minimumSegmentLength"),D(this,"interpolationAlgorithm"),D(this,"strokeThickness"),this.strokeThickness=2,this.lineJoin=LineJoin.Bevel,this.lineStyle=LineStyle.Automatic,this.color=OxyColors.Automatic,this.brokenLineColor=OxyColors.Undefined,this.markerFill=OxyColors.Automatic,this.markerStroke=OxyColors.Automatic,this.markerResolution=0,this.markerSize=3,this.markerStrokeThickness=1,this.markerType=MarkerType.None,this.minimumSegmentLength=2,this.canTrackerInterpolatePoints=!0,this.labelMargin=6,this._smoothedPoints=new Array,s&&Object.assign(this,removeUndef(s))}get actualColor(){return this.color.getActualColor(this.defaultColor)}get actualMarkerFill(){return this.markerFill.getActualColor(this.defaultMarkerFill)}get actualLineStyle(){return this.lineStyle!=LineStyle.Automatic?this.lineStyle:this.defaultLineStyle}get actualDashArray(){return this.dashes??LineStyleHelper.getDashArray(this.actualLineStyle)}get smoothedPoints(){return this._smoothedPoints}getNearestPoint(s,d){if(d&&(this.actualColor.isInvisible()||this.strokeThickness===0||!this.canTrackerInterpolatePoints))return;const m=this.trackerStringFormatter;if(d&&this.interpolationAlgorithm){const f=this.getNearestInterpolatedPointInternal(this.smoothedPoints,0,s);return f&&m&&(f.text=m({item:f.item,title:this.title,xTitle:this.xAxis.title??XYAxisSeries.defaultXAxisTitle,xValue:this.xAxis.getValue(f.dataPoint.x),yTitle:this.yAxis.title??XYAxisSeries.defaultYAxisTitle,yValue:this.yAxis.getValue(f.dataPoint.y)})),f}return super.getNearestPoint(s,d)}async render(s){const d=this.actualPoints;!d||d.length===0||(this.verifyAxes(),await this.renderPoints(s,d),this.labelStringFormatter&&await this.renderPointLabels(s),this.lineLegendPosition!==0&&this.title&&await this.renderLegendOnLine(s))}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=[new ScreenPoint(d.left,f),new ScreenPoint(d.right,f)];await s.drawLine(g,this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode,this.actualDashArray);const x=new ScreenPoint(m,f);await RenderingExtensions.drawMarker(s,x,this.markerType,this.markerOutline,this.markerSize,this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)}setDefaultValues(){this.lineStyle===LineStyle.Automatic&&(this.defaultLineStyle=this.plotModel.getDefaultLineStyle()),this.color.isAutomatic()&&(this.defaultColor=this.plotModel.getDefaultColor()),this.markerFill.isAutomatic()&&(this.defaultMarkerFill=this.color.isAutomatic()?this.defaultColor:this.color)}updateMaxMin(){if(this.interpolationAlgorithm){if(super.updateMaxMin(),this.resetSmoothedPoints(),this.smoothedPoints.every(m=>isNaN(m.x)))return;const s=this.smoothedPoints.filter(m=>!isNaN(m.x)).map(m=>m.x),d=this.smoothedPoints.filter(m=>!isNaN(m.y)).map(m=>m.y);this.minX=minValueOfArray(s),this.minY=minValueOfArray(d),this.maxX=maxValueOfArray(s),this.maxY=maxValueOfArray(d)}else super.updateMaxMin()}async renderPoints(s,d){let m;const f=this.brokenLineThickness>0&&this.brokenLineStyle!==LineStyle.None,g=f?LineStyleHelper.getDashArray(this.brokenLineStyle):void 0,x=f?[]:void 0;this.contiguousScreenPointsBuffer||(this.contiguousScreenPointsBuffer=[]);let w=0,C=Number_MAX_VALUE;if(this.isXMonotonic){const A=this.xAxis.clipMinimum;C=this.xAxis.clipMaximum,this.windowStartIndex=this.updateWindowStartIndex(d,_=>_.x,A,this.windowStartIndex),w=this.windowStartIndex}for(let A=w;A<d.length;A++){const{result:_,pointIdx:M,previousContiguousLineSegmentEndPoint:P}=this.extractNextContiguousLineSegment(d,A,m,C,x,this.contiguousScreenPointsBuffer);if(A=M,m=P,!_)break;if(f){if(x&&x.length>0){const E=this.brokenLineColor.isAutomatic()?this.actualColor:this.brokenLineColor;await s.drawLineSegments(x,E,this.brokenLineThickness,this.edgeRenderingMode,g,this.lineJoin),x.length=0}}else m=void 0;this.decimator?(this.decimatorBuffer?this.decimatorBuffer.length=0:this.decimatorBuffer=[],this.decimator(this.contiguousScreenPointsBuffer,this.decimatorBuffer),await this.renderLineAndMarkers(s,this.decimatorBuffer)):await this.renderLineAndMarkers(s,this.contiguousScreenPointsBuffer),this.contiguousScreenPointsBuffer.length=0}}extractNextContiguousLineSegment(s,d,m,f,g,x){let w=new DataPoint(0,0),C=!1;for(;d<s.length;d++){if(w=s[d],w.x>f)return{result:!1,pointIdx:d,previousContiguousLineSegmentEndPoint:m};if(C=this.isValidPoint(w),C)break}if(!C)return{result:!1,pointIdx:d,previousContiguousLineSegmentEndPoint:m};let A=this.transform(w);m&&(g.push(m),g.push(A)),x.push(A);let _=0;for(d++;d<s.length&&(w=s[d],_+=w.x>f?1:0,!(_>1||!this.isValidPoint(w)));d++)A=this.transform(w),x.push(A);return m=A,{result:!0,pointIdx:d,previousContiguousLineSegmentEndPoint:m}}async renderPointLabels(s){if(!this.labelStringFormatter)return;let d=-1;for(const m of this.actualPoints){if(d++,!this.isValidPoint(m))continue;const f=this.transform(m).plus(new ScreenVector(0,-this.labelMargin)),g=this.getItem(d),x=this.labelStringFormatter(g,[m.x,m.y]);await s.drawText(f,x,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Bottom)}}async renderLegendOnLine(s){if(!this.title)return;let d,m,f=VerticalAlignment.Middle,g=4;switch(this.lineLegendPosition){case 1:d=this.actualPoints[0],m=HorizontalAlignment.Right,g=-g;break;case 2:d=this.actualPoints[this.actualPoints.length-1],m=HorizontalAlignment.Left;break;case 0:return;default:throw new Error("Invalid LineLegendPosition")}const x=PlotElementExtensions.orientateAlignment(this,m,f);m=x[0],f=x[1];const w=this.transform(d).plus(PlotElementExtensions.orientateVector(this,new ScreenVector(g,0)));await s.drawText(w,this.title,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,m,f)}async renderLineAndMarkers(s,d){let m=d;if(this.interpolationAlgorithm){const f=ScreenPointHelper.resamplePoints(d,this.minimumSegmentLength);m=this.interpolationAlgorithm.createSplineSp(f,!1,.25)}if(this.strokeThickness>0&&this.actualLineStyle!==LineStyle.None&&await this.renderLine(s,m),this.markerType!==MarkerType.None){const f=this.markerResolution>0?PlotElementExtensions.transform(this,this.minX,this.minY):ScreenPoint.LeftTop;await RenderingExtensions.drawMarkers(s,d,this.markerType,this.markerOutline,[this.markerSize],this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,this.markerResolution,f)}}async renderLine(s,d){const m=this.actualDashArray;this.outputBuffer||(this.outputBuffer=[]),await RenderingExtensions.drawReducedLine(s,d,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode,m,this.lineJoin,this.outputBuffer)}resetSmoothedPoints(){const s=Math.abs(Math.max(this.maxX-this.minX,this.maxY-this.minY)/zi.ToleranceDivisor);this._smoothedPoints=this.interpolationAlgorithm.createSplineDp(this.actualPoints,!1,s)}};D(Se,"ToleranceDivisor",200);let LineSeries=Se;class BarItemBase{constructor(s){D(this,"categoryIndex"),this.categoryIndex=-1,s&&(isNullOrUndef(s.categoryIndex)||(this.categoryIndex=s.categoryIndex))}getCategoryIndex(s){return this.categoryIndex<0?s:this.categoryIndex}}class BarItem extends BarItemBase{constructor(s){super(s),D(this,"color"),D(this,"value",0),this.color=OxyColors.Automatic,s&&Object.assign(this,removeUndef(s))}static fromValue(s){return new BarItem({value:s})}}class BarSeriesBase extends XYAxisSeries{constructor(s){super(s),D(this,"barWidth"),D(this,"itemsSourceItems"),D(this,"strokeColor"),D(this,"strokeThickness",0),D(this,"manager"),D(this,"validItems",[]),D(this,"validItemsIndexInversion",new Map),D(this,"labelColor",OxyColors.Undefined),D(this,"labelMargin",0),D(this,"labelAngle",0),D(this,"labelPlacement",LabelPlacement.Outside),D(this,"items",[]),this.strokeColor=OxyColors.Black,this.barWidth=1}get actualItems(){return this.itemsSource?this.itemsSourceItems:this.items}getActualBarWidth(){if(!this.manager)return 0;const s=this.getCategoryAxis();return this.barWidth/(1+s.gapWidth)/this.manager.getMaxWidth()}get categoryAxis(){return this.getCategoryAxis()}getCategoryAxis(){if(!(this.yAxis instanceof CategoryAxis))throw new Error("BarSeries requires a CategoryAxis on the Y Axis.");return this.yAxis}get valueAxis(){return this.xAxis}getItem(s){return this.itemsSource||!this.actualItems||this.actualItems.length===0?super.getItem(s):this.actualItems[s]}clearItemsSourceItems(){this.itemsSourceItems&&(this.itemsSourceItems.length=0)}isUsing(s){return this.xAxis===s||this.yAxis===s}async renderLabel(s,d,m,f,g,x,w,...C){const A=[];if(C.length)A.push(...C);else if(d instanceof BarItem)A.push(d.value);else if(d instanceof IntervalBarItem)A.push(d.start),A.push(d.end);else throw d instanceof TornadoBarItem?new Error("RenderLabel does not support automatic determination of label values for TornadoBarItem objects. Please populate the labelValues parameter."):new Error(`RenderLabel automatic value determination not implemented for ${this.constructor.name}. Please populate the labelValues parameter.`);const _=w?w(d,A):"";let M;const P=(x+g)/2,E=Math.sign(f-m);let R=new ScreenVector(this.labelMargin,0).times(E),B=new ScreenVector(0,0);const z=RenderingExtensions.measureText(s,_,this.actualFont,this.actualFontSize,this.actualFontWeight,this.labelAngle),F=(PlotElementExtensions.isTransposed(this)?z.height:z.width)/2,I=PlotElementExtensions.transform;switch(this.labelPlacement){case LabelPlacement.Inside:M=I(this,f,P),R=R.negate(),B=new ScreenVector(-E*F,0);break;case LabelPlacement.Outside:M=I(this,f,P),B=new ScreenVector(E*F,0);break;case LabelPlacement.Middle:M=I(this,(f+m)/2,P),R=new ScreenVector(0,0);break;case LabelPlacement.Base:M=I(this,m,P),B=new ScreenVector(E*F,0);break;default:throw new Error("Invalid label placement")}const L=PlotElementExtensions.orientateVector;M=M.plus(L(this,R)).plus(L(this,B)),await s.drawText(M,_,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,this.labelAngle,HorizontalAlignment.Center,VerticalAlignment.Middle)}updateAxisMaxMin(){this.xAxis.include(this.minX),this.xAxis.include(this.maxX)}updateData(){this.clearItemsSourceItems(),!(!this.itemsSource||this.itemsSource.length==0)&&(this.updateFromDataFields()||(this.itemsSourceItems||(this.itemsSourceItems=[]),this.itemsSourceItems.push(...this.itemsSource)))}updateValidData(){this.validItems.length=0,this.validItemsIndexInversion.clear();const s=this.manager.categories.length;for(let d=0;d<this.actualItems.length;d++){const m=this.actualItems[d];m&&m.getCategoryIndex(d)<s&&this.isValid(m)&&(this.validItemsIndexInversion.set(this.validItems.length,d),this.validItems.push(m))}}}D(BarSeriesBase,"DefaultCategoryAxisTitle","Category"),D(BarSeriesBase,"DefaultValueAxisTitle","Value");const Ce=class ji extends BarSeriesBase{constructor(s){super(s),D(this,"defaultFillColor",OxyColors.Undefined),D(this,"trackerStringFormatter"),D(this,"baseValue"),D(this,"baseLine"),D(this,"actualBaseLine"),D(this,"colorField"),D(this,"fillColor"),D(this,"isStacked",!1),D(this,"overlapsStack",!1),D(this,"labelStringFormatter"),D(this,"negativeFillColor"),D(this,"stackGroup"),D(this,"valueField"),D(this,"actualBarRectangles"),this.fillColor=OxyColors.Automatic,this.negativeFillColor=OxyColors.Undefined,this.trackerStringFormatter=ji.DefaultTrackerFormatter,this.labelMargin=2,this.labelAngle=0,this.stackGroup="",this.strokeThickness=0,this.baseValue=0,this.baseLine=NaN,this.actualBaseLine=NaN,s&&Object.assign(this,removeUndef(s))}get actualFillColor(){return this.fillColor.getActualColor(this.defaultFillColor)}getNearestPoint(s,d){if(!this.actualBarRectangles||this.validItems.length===0)return;let m=0;for(const f of this.actualBarRectangles){if(f.containsPoint(s)){const g=this.validItems[m],x=g.getCategoryIndex(m),w=new DataPoint(x,this.validItems[m].value),C=this.getItem(this.validItemsIndexInversion.get(m));return new TrackerHitResult({series:this,dataPoint:w,position:s,item:C,index:m,text:this.getTrackerText(g,C,x)})}m++}}renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g;return s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,x,g),this.getSelectableColor(this.actualFillColor),this.strokeColor,this.strokeThickness,this.edgeRenderingMode)}setDefaultValues(){this.fillColor.isAutomatic()&&(this.defaultFillColor=this.plotModel.getDefaultColor())}updateAxisMaxMin(){super.updateAxisMaxMin(),this.computeActualBaseLine(),this.xAxis.include(this.actualBaseLine)}computeActualBaseLine(){if(isNaN(this.baseLine))if(this.xAxis.isLogarithmic()){const s=(this.actualItems||[]).map(m=>m.value),d=minValueOfArray(s.filter(m=>m>0),1);this.actualBaseLine=Math.max(d/10,this.baseValue)}else this.actualBaseLine=0;else this.actualBaseLine=this.baseLine}updateMaxMin(){if(super.updateMaxMin(),this.validItems.length===0)return;const s=this.getCategoryAxis();let d=Number_MAX_VALUE,m=Number_MIN_VALUE;const f=this.manager;if(this.isStacked){const g=s.actualLabels;for(let x=0;x<g.length;x++){let w=0;const C=this.validItems.filter(R=>R.getCategoryIndex(w++)===x).map(R=>R.value).concat([0]);let A=C.filter(R=>R<=0).reduce((R,B)=>R+B,0),_=C.filter(R=>R>=0).reduce((R,B)=>R+B,0);const M=f.getStackIndex(this.stackGroup),P=f.getCurrentMinValue(M,x);isNaN(P)||(A+=P),f.setCurrentMinValue(M,x,A);const E=f.getCurrentMaxValue(M,x);!this.overlapsStack&&!isNaN(E)&&(_+=E),f.setCurrentMaxValue(M,x,_),d=Math.min(d,A+this.baseValue),m=Math.max(m,_+this.baseValue)}}else{const g=this.validItems.map(x=>x.value).concat([0]);d=minValueOfArray(g),m=maxValueOfArray(g),this.baseValue<d&&(d=this.baseValue),this.baseValue>m&&(m=this.baseValue)}this.minX=d,this.maxX=m}getTrackerText(s,d,m){if(!this.trackerStringFormatter)return;const f=this.getCategoryAxis(),g=this.xAxis;return this.trackerStringFormatter({item:d,title:this.title,category:f.formatValue(m),value:g==null?void 0:g.getValue(s.value)})}isValid(s){return this.xAxis.isValidValue(s.value)}async renderItem(s,d,m,f,g,x){let w=g.color;w.isAutomatic()&&(w=this.actualFillColor,g.value<0&&!this.negativeFillColor.isUndefined()&&(w=this.negativeFillColor));const C=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(x,this.getSelectableFillColor(w),this.strokeColor,this.strokeThickness,C)}async render(s){if(this.actualBarRectangles=[],this.validItems.length===0)return;const d=this.manager,m=this.yAxis,f=this.xAxis,g=PlotElementExtensions.transform,x=this.getActualBarWidth(),w=this.isStacked?d.getStackIndex(this.stackGroup):0;for(let C=0;C<this.validItems.length;C++){const A=this.validItems[C],_=A.getCategoryIndex(C),M=A.value;let P=NaN;this.isStacked&&!this.overlapsStack&&(P=d.getCurrentBaseValue(w,_,M<0)),isNaN(P)&&(P=this.baseValue);const E=this.isStacked?P+M:M;if(m.isLogarithmic()&&!m.isValidValue(E))continue;let R;this.isStacked?R=d.getCategoryValue(_,w,x):R=_-.5+d.getCurrentBarOffset(_),this.isStacked&&d.setCurrentBaseValue(w,_,M<0,E);const B=f.isLogarithmic()&&!f.isValidValue(P),z=g(this,B?f.clipMinimum:P,R),F=g(this,E,R+x),I=OxyRect.fromScreenPoints(z,F);this.actualBarRectangles.push(I),await this.renderItem(s,E,R,x,A,I),this.labelStringFormatter&&await this.renderLabel(s,A,P,E,R,R+x,this.labelStringFormatter),this.isStacked||d.increaseCurrentBarOffset(_,x)}}updateFromDataFields(){if(!this.valueField)return!1;if(!this.itemsSource||this.itemsSource.length==0)return!0;this.itemsSourceItems=this.itemsSourceItems||[];for(const s of this.itemsSource){if(isNullOrUndef(s))continue;const d=s[this.valueField],m=new BarItem;m.value=isNullOrUndef(d)?NaN:d;let f=OxyColors.Automatic;this.colorField&&s[this.colorField]&&s[this.colorField]instanceof OxyColor&&(f=s[this.colorField]),m.color=f,this.itemsSourceItems.push(m)}return!0}};D(Ce,"DefaultTrackerFormatter",a=>`${a.title||""}
${a.category}: ${a.value}`);let BarSeries=Ce;class BarSeriesManager{constructor(s,d,m){if(D(this,"currentBarOffset"),D(this,"currentMaxValue"),D(this,"currentMinValue"),D(this,"currentNegativeBaseValues"),D(this,"currentPositiveBaseValues"),D(this,"maxWidth",NaN),D(this,"_categoryAxis"),D(this,"_series"),D(this,"_valueAxis"),D(this,"_barOffset"),D(this,"_stackedBarOffset"),D(this,"_stackIndexMapping",new Map),!s.plotModel)throw new Error("The category axis must be part of a plot model.");this._categoryAxis=s,this._valueAxis=d,this._series=m;for(const f of this._series)f.manager=this}get categoryAxis(){return this._categoryAxis}get managedSeries(){return this._series}get plotModel(){return this.categoryAxis.plotModel}get valueAxis(){return this._valueAxis}get categories(){return this._categoryAxis.actualLabels}get stackIndexMapping(){return this._stackIndexMapping}getCategoryValue(s,d,m){const f=this._stackedBarOffset[d][s],g=this._stackedBarOffset[d+1][s];return s-.5+(g+f-m)*.5}getCurrentBarOffset(s){return this.currentBarOffset?this.currentBarOffset[s]:0}getCurrentBaseValue(s,d,m){return m?this.currentNegativeBaseValues[s][d]:this.currentPositiveBaseValues[s][d]}getCurrentMaxValue(s,d){return this.currentMaxValue?this.currentMaxValue[s][d]:0}getCurrentMinValue(s,d){return this.currentMinValue?this.currentMinValue[s][d]:0}getMaxWidth(){return this.maxWidth}getStackIndex(s){const d=this._stackIndexMapping.get(s);return isUndef(d)?-1:d}increaseCurrentBarOffset(s,d){this.currentBarOffset&&(this.currentBarOffset[s]+=d)}initializeRender(){this.resetCurrentValues()}setCurrentBaseValue(s,d,m,f){m?this.currentNegativeBaseValues[s][d]=f:this.currentPositiveBaseValues[s][d]=f}setCurrentMaxValue(s,d,m){this.currentMaxValue[s][d]=m}setCurrentMinValue(s,d,m){this.currentMinValue[s][d]=m}update(){this.categoryAxis.updateLabels(Math.max(...this.managedSeries.map(s=>s.actualItems.length))),this.updateBarOffsets(),this.updateValidData(),this.resetCurrentValues()}static hasCategory(s,d){return s.actualItems.length>d&&s.actualItems[d].categoryIndex<0?!0:s.actualItems.some(m=>m.categoryIndex===d)}resetCurrentValues(){this.currentBarOffset=[...this._barOffset||[]];const s=this.categoryAxis.actualLabels,d=this._stackIndexMapping.size;d>0?(this.currentPositiveBaseValues=create2DArray(d,s.length,Number.NaN),this.currentNegativeBaseValues=create2DArray(d,s.length,Number.NaN),this.currentMaxValue=create2DArray(d,s.length,Number.NaN),this.currentMinValue=create2DArray(d,s.length,Number.NaN)):(this.currentPositiveBaseValues=void 0,this.currentNegativeBaseValues=void 0,this.currentMaxValue=void 0,this.currentMinValue=void 0)}updateBarOffsets(){if(this.categories.length===0){this.maxWidth=Number.NaN,this._stackedBarOffset=void 0,this._stackIndexMapping.clear();return}const s=new Array(this.categories.length).fill(0),d=new Map;this._barOffset=new Array(this.categories.length).fill(0);const m=this.managedSeries.filter(w=>isStackableSeries(w)).map(w=>w),f=Array.from(m.filter(w=>w.isStacked).reduce((w,C)=>w.set(C.stackGroup,(w.get(C.stackGroup)||[]).concat(C)),new Map).values());for(const w of f){const C=Math.max(...w.map(A=>A.barWidth));d.set(w[0].stackGroup,C);for(let A=0;A<this.categories.length;A++)w.some(_=>BarSeriesManager.hasCategory(_,A))&&(s[A]+=C)}for(const w of this.managedSeries.filter(C=>!isStackableSeries(C)||!C.isStacked))for(let C=0;C<this.categories.length;C++){let A=w.actualItems.filter(_=>_.categoryIndex===C).length;w.actualItems.length>C&&w.actualItems[C].categoryIndex<0&&A++,s[C]+=w.barWidth*A}this.maxWidth=Math.max(...s),this._stackedBarOffset=create2DArray(f.length+1,this.categories.length,0);const g=1/(1+this.categoryAxis.gapWidth)/this.maxWidth;for(let w=0;w<this.categories.length;w++)this._barOffset[w]=.5-s[w]*g*.5;for(let w=0;w<f.length;w++){const C=f[w];for(let A=0;A<this.categories.length;A++)this._stackedBarOffset[w][A]=this._barOffset[A],C.some(_=>BarSeriesManager.hasCategory(_,A))&&(this._barOffset[A]+=d.get(C[0].stackGroup)*g)}for(let w=0;w<this.categories.length;w++)this._stackedBarOffset[f.length][w]=this._barOffset[w];this._stackIndexMapping.clear();let x=0;for(const w of f.map(C=>C[0].stackGroup).sort())this._stackIndexMapping.set(w,x++)}updateValidData(){for(const s of this.managedSeries)s.updateValidData()}}function isBarSeries(a){return a&&!isNullOrUndef(a.barWidth)&&a.categoryAxis}class IntervalBarItem extends BarItemBase{constructor(s){super(s),D(this,"color"),D(this,"end",0),D(this,"start",0),D(this,"title"),this.color=OxyColors.Automatic,s&&Object.assign(this,removeUndef(s))}}const Ae=class Hi extends BarSeriesBase{constructor(s){super(s),D(this,"defaultFillColor",OxyColors.Undefined),D(this,"trackerStringFormatter"),D(this,"colorField"),D(this,"endField"),D(this,"fillColor"),D(this,"isStacked",!0),D(this,"overlapsStack",!0),D(this,"labelStringFormatter",(d,m)=>`${m[0]} - ${m[1]}`),D(this,"stackGroup",""),D(this,"startField"),D(this,"actualBarRectangles",[]),this.fillColor=OxyColors.Automatic,this.strokeThickness=1,this.trackerStringFormatter=Hi.DefaultTrackerStringFormatter,this.labelMargin=4,this.labelPlacement=LabelPlacement.Middle,s&&Object.assign(this,removeUndef(s))}get actualFillColor(){return this.fillColor.getActualColor(this.defaultFillColor)}getNearestPoint(s,d){for(let m=0;m<this.actualBarRectangles.length;m++){if(!this.actualBarRectangles[m].containsPoint(s))continue;const f=this.getItem(this.validItemsIndexInversion.get(m)),g=f.getCategoryIndex(m),x=(this.validItems[m].start+this.validItems[m].end)/2,w=new DataPoint(g,x),C=this.getCategoryAxis(),A=this.xAxis,_=this.trackerStringFormatter({item:f,title:this.title,categoryTitle:C.title??BarSeriesBase.DefaultCategoryAxisTitle,categoryValue:C.formatValue(g),valueTitle:A.title??BarSeriesBase.DefaultValueAxisTitle});return new TrackerHitResult({series:this,dataPoint:w,position:s,item:f,index:m,text:_})}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g;await s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,x,g),this.getSelectableFillColor(this.actualFillColor),this.strokeColor,this.strokeThickness,this.edgeRenderingMode)}setDefaultValues(){this.fillColor.isAutomatic()&&(this.defaultFillColor=this.plotModel.getDefaultColor())}updateMaxMin(){if(super.updateMaxMin(),this.validItems.length===0)return;let s=Number_MAX_VALUE,d=Number_MIN_VALUE;for(const m of this.validItems)s=Math.min(s,m.start),s=Math.min(s,m.end),d=Math.max(d,m.start),d=Math.max(d,m.end);this.minX=s,this.maxX=d}isValid(s){return this.xAxis.isValidValue(s.start)&&this.xAxis.isValidValue(s.end)}async render(s){if(this.actualBarRectangles=[],this.validItems.length===0)return;const d=this.getActualBarWidth(),m=this.manager.getStackIndex(this.stackGroup),f=PlotElementExtensions.transform,g=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);for(let x=0;x<this.validItems.length;x++){const w=this.validItems[x],C=w.getCategoryIndex(x),A=this.manager.getCategoryValue(C,m,d),_=f(this,w.start,A),M=f(this,w.end,A+d),P=OxyRect.fromScreenPoints(_,M);this.actualBarRectangles.push(P),await s.drawRectangle(P,this.getSelectableFillColor(w.color.getActualColor(this.actualFillColor)),this.strokeColor,this.strokeThickness,g),this.labelStringFormatter&&await this.renderLabel(s,this.getItem(x),w.start,w.end,A,A+d,this.labelStringFormatter)}}updateFromDataFields(){var s;if(!this.startField||!this.endField||!this.itemsSource)return!1;for(const d of this.itemsSource){const m=getOrDefault(d,this.startField,NaN),f=getOrDefault(d,this.endField,NaN),g=getOrDefault(d,this.colorField,OxyColors.Automatic);(s=this.itemsSourceItems)==null||s.push(new IntervalBarItem({start:m,end:f,color:g}))}return!0}};D(Ae,"DefaultTrackerStringFormatter",a=>{var s,d;return`${a.title}
${a.categoryTitle}: ${a.categoryValue}
${a.valueTitle}: ${(s=a.item)==null?void 0:s.start} - ${(d=a.item)==null?void 0:d.end}`});let IntervalBarSeries=Ae;function isStackableSeries(a){return a&&!isUndef(a.isStacked)&&typeof a.isStacked=="boolean"&&!isUndef(a.stackGroup)&&typeof a.stackGroup=="string"}var LabelPlacement=(a=>(a[a.Outside=0]="Outside",a[a.Inside=1]="Inside",a[a.Middle=2]="Middle",a[a.Base=3]="Base",a))(LabelPlacement||{});class ErrorBarItem extends BarItem{constructor(s){super(s),D(this,"error",0),this.color=OxyColors.Automatic,s&&Object.assign(this,removeUndef(s))}}const Me=class Xi extends BarSeries{constructor(s){super(s),D(this,"errorStrokeThickness"),D(this,"errorWidth"),this.errorWidth=.4,this.errorStrokeThickness=1,this.trackerStringFormatter=Xi.DefaultTrackerStringFormatter,s&&Object.assign(this,removeUndef(s))}updateMaxMin(){if(super.updateMaxMin(),this.validItems.length===0)return;let s=Number_MAX_VALUE,d=Number_MIN_VALUE;if(!this.isStacked){const m=this.validItems.map(g=>g.value-g.error).concat([0]),f=this.validItems.map(g=>g.value+g.error).concat([0]);s=minValueOfArray(m),d=maxValueOfArray(f),this.baseValue<s&&(s=this.baseValue),this.baseValue>d&&(d=this.baseValue)}this.minX=s,this.maxX=d}async renderItem(s,d,m,f,g,x){await super.renderItem(s,d,m,f,g,x);const w=d-g.error,C=d+g.error,A=.5-this.errorWidth/2,_=.5+this.errorWidth/2,M=m+A*f,P=m+.5*f,E=m+_*f,R=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness),B=PlotElementExtensions.transform,z=B(this,w,P),F=B(this,C,P);if(await s.drawLine([z,F],this.strokeColor,this.errorStrokeThickness,R,void 0,LineJoin.Miter),this.errorWidth>0){const I=B(this,w,M),L=B(this,w,E);await s.drawLine([I,L],this.strokeColor,this.errorStrokeThickness,R,void 0,LineJoin.Miter);const W=B(this,C,M),G=B(this,C,E);await s.drawLine([W,G],this.strokeColor,this.errorStrokeThickness,R,void 0,LineJoin.Miter)}}};D(Me,"DefaultTrackerStringFormatter",a=>`${a.title||""}
${a.category}: ${a.value}, Error: ${round(a.item.error,3)}`);let ErrorBarSeries=Me;class LinearBarSeries extends DataPointSeries{constructor(s){super(s),D(this,"rectangles",[]),D(this,"rectanglesPointIndexes",[]),D(this,"defaultColor",OxyColors.Undefined),D(this,"fillColor"),D(this,"barWidth"),D(this,"strokeThickness"),D(this,"strokeColor"),D(this,"negativeFillColor"),D(this,"negativeStrokeColor"),D(this,"baseValue"),D(this,"baseLine"),D(this,"actualBaseLine"),this.fillColor=OxyColors.Automatic,this.barWidth=5,this.strokeColor=OxyColors.Black,this.strokeThickness=0,this.negativeFillColor=OxyColors.Undefined,this.negativeStrokeColor=OxyColors.Undefined,this.baseValue=0,this.baseLine=Number.NaN,this.actualBaseLine=Number.NaN,s&&Object.assign(this,removeUndef(s))}get actualColor(){return this.fillColor.getActualColor(this.defaultColor)}getNearestPoint(s,d){const m=this.findRectangleIndex(s);if(m<0||!this.rectangles[m].containsPoint(s))return;const f=this.rectanglesPointIndexes[m],g=this.actualPoints[f],x=this.getItem(f),w=this.formatDefaultTrackerString(x,g);return new TrackerHitResult({series:this,dataPoint:g,position:s,item:x,index:f,text:w})}async render(s){this.rectangles.length=0,this.rectanglesPointIndexes.length=0;const d=this.actualPoints;!d||d.length===0||(this.verifyAxes(),await this.renderBars(s,d))}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g;await s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,x,g),this.getSelectableColor(this.actualColor),this.strokeColor,this.strokeThickness,this.edgeRenderingMode)}setDefaultValues(){this.fillColor.isAutomatic()&&(this.defaultColor=this.plotModel.getDefaultColor())}updateAxisMaxMin(){super.updateAxisMaxMin(),this.computeActualBaseLine(),this.yAxis.include(this.actualBaseLine)}computeActualBaseLine(){if(isNaN(this.baseLine))if(this.yAxis.isLogarithmic()){const s=this.actualPoints?minValueOfArray(this.actualPoints.filter(d=>d.y>0).map(d=>d.y),1):1;this.actualBaseLine=Math.max(s/10,this.baseValue)}else this.actualBaseLine=0;else this.actualBaseLine=this.baseLine}findRectangleIndex(s){let d;return PlotElementExtensions.isTransposed(this)?d=(m,f)=>m.bottom<s.y?1:m.top>s.y?-1:0:d=(m,f)=>m.right<s.x?-1:m.left>s.x?1:0,this.rectangles.findIndex(m=>d(m,OxyRect.Empty)===0)}async renderBars(s,d){const m=this.yAxis.isLogarithmic()&&!this.yAxis.isValidValue(this.baseValue),f=this.getBarWidth(d)/2,g=PlotElementExtensions.orientateVector(this,new ScreenVector(f,0)),x=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);for(let w=0;w<d.length;w++){const C=d[w];if(!this.isValidPoint(C))continue;const A=this.transform(C).minusVector(g),_=this.transform(new DataPoint(C.x,m?this.yAxis.clipMinimum:this.baseValue)).plus(g),M=OxyRect.fromScreenPoints(_,A);this.rectangles.push(M),this.rectanglesPointIndexes.push(w);const P=this.getBarColors(C.y);await s.drawRectangle(M,P.fillColor,P.strokeColor,this.strokeThickness,x)}}getBarWidth(s){let d=this.barWidth/this.xAxis.scale;for(let m=1;m<s.length;m++){const f=s[m].x-s[m-1].x;f<d&&(d=f)}return d*this.xAxis.scale}getBarColors(s){const d=s>=this.baseValue,m=d||this.negativeFillColor.isUndefined()?this.getSelectableFillColor(this.actualColor):this.negativeFillColor,f=d||this.negativeStrokeColor.isUndefined()?this.strokeColor:this.negativeStrokeColor;return{fillColor:m,strokeColor:f}}}class TornadoBarItem extends BarItemBase{constructor(s){super(s),D(this,"baseValue"),D(this,"maximum"),D(this,"maximumColor"),D(this,"minimum"),D(this,"minimumColor"),this.minimum=NaN,this.maximum=NaN,this.baseValue=NaN,this.minimumColor=OxyColors.Automatic,this.maximumColor=OxyColors.Automatic,s&&Object.assign(this,removeUndef(s))}}const Ee=class Wi extends BarSeriesBase{constructor(s){super(s),D(this,"defaultMaximumFillColor",OxyColors.Undefined),D(this,"defaultMinimumFillColor",OxyColors.Undefined),D(this,"baseField"),D(this,"baseValue",NaN),D(this,"maximumColorField"),D(this,"maximumField"),D(this,"maximumFillColor"),D(this,"maximumLabelStringFormatter"),D(this,"minimumColorField"),D(this,"minimumField"),D(this,"minimumFillColor"),D(this,"minimumLabelStringFormatter"),D(this,"actualMaximumBarRectangles",[]),D(this,"actualMinimumBarRectangles",[]),this.maximumFillColor=OxyColor.fromRgb(216,82,85),this.minimumFillColor=OxyColor.fromRgb(84,138,209),this.strokeColor=OxyColors.Black,this.strokeThickness=1,this.trackerStringFormatter=Wi.defaultTrackerStringFormatter,this.labelMargin=4,this.minimumLabelStringFormatter=(d,m)=>m[0].toString(),this.maximumLabelStringFormatter=(d,m)=>m[0].toString(),s&&Object.assign(this,removeUndef(s))}get actualMaximumFillColor(){return this.maximumFillColor.getActualColor(this.defaultMaximumFillColor)}get actualMinimumFillColor(){return this.minimumFillColor.getActualColor(this.defaultMinimumFillColor)}getNearestPoint(s,d){for(let m=0;m<this.actualMinimumBarRectangles.length;m++){const f=this.actualMinimumBarRectangles[m].containsPoint(s),g=this.actualMaximumBarRectangles[m].containsPoint(s);if(f||g){const x=this.getItem(this.validItemsIndexInversion.get(m)),w=x.getCategoryIndex(m),C=g?this.validItems[m].maximum:this.validItems[m].minimum,A=new DataPoint(w,C),_=this.getCategoryAxis(),M=this.trackerStringFormatter({item:x,title:this.title,yTitle:_.title??BarSeriesBase.DefaultCategoryAxisTitle,yValue:_.formatValue(w),xTitle:this.xAxis.title??BarSeriesBase.DefaultValueAxisTitle,xValue:this.xAxis.getValue(C)});return new TrackerHitResult({series:this,dataPoint:A,position:s,item:x,index:m,text:M})}}}async render(s){if(this.actualMinimumBarRectangles=[],this.actualMaximumBarRectangles=[],this.validItems.length===0)return;const d=this.getActualBarWidth();for(let m=0;m<this.validItems.length;m++){const f=this.validItems[m],g=f.getCategoryIndex(m),x=isNaN(f.baseValue)?this.baseValue:f.baseValue,w=this.manager.getCurrentBarOffset(g),C=g-.5+w,A=C+d,_=PlotElementExtensions.transform,M=_(this,f.minimum,C),P=_(this,f.maximum,C),E=_(this,x,C+d),R=OxyRect.fromScreenPoints(M,E),B=OxyRect.fromScreenPoints(P,E);this.actualMinimumBarRectangles.push(R),this.actualMaximumBarRectangles.push(B);const z=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(R,f.minimumColor.getActualColor(this.actualMinimumFillColor),this.strokeColor,this.strokeThickness,z),await s.drawRectangle(B,f.maximumColor.getActualColor(this.actualMaximumFillColor),this.strokeColor,this.strokeThickness,z),this.minimumLabelStringFormatter&&await this.renderLabel(s,f,x,f.minimum,C,A,this.minimumLabelStringFormatter,f.minimum),this.maximumLabelStringFormatter&&await this.renderLabel(s,f,x,f.maximum,C,A,this.maximumLabelStringFormatter,f.maximum)}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g,w=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,.5*x,g),this.actualMinimumFillColor,this.strokeColor,this.strokeThickness,w),await s.drawRectangle(new OxyRect(m,f-.5*g,.5*x,g),this.actualMaximumFillColor,this.strokeColor,this.strokeThickness,w)}setDefaultValues(){this.maximumFillColor.isAutomatic()&&(this.defaultMaximumFillColor=this.plotModel.getDefaultColor()),this.minimumFillColor.isAutomatic()&&(this.defaultMinimumFillColor=this.plotModel.getDefaultColor())}updateMaxMin(){if(super.updateMaxMin(),this.validItems.length===0)return;let s=Number_MAX_VALUE,d=Number_MIN_VALUE;for(const m of this.validItems)s=Math.min(s,m.minimum),d=Math.max(d,m.maximum);this.minX=s,this.maxX=d}isValid(s){return this.xAxis.isValidValue(s.minimum)&&this.xAxis.isValidValue(s.maximum)}updateFromDataFields(){if(!this.minimumField||!this.maximumField||!this.itemsSource)return!1;this.itemsSourceItems?this.itemsSourceItems.length=0:this.itemsSourceItems=[];for(const s of this.itemsSource){if(!s)continue;if(s instanceof TornadoBarItem){this.itemsSourceItems.push(s);continue}const d=getOrDefault(s,this.minimumField,Number.NaN),m=getOrDefault(s,this.maximumField,Number.NaN),f=getOrDefault(s,this.baseField,Number.NaN),g=getOrDefault(s,this.minimumColorField,OxyColors.Automatic),x=getOrDefault(s,this.maximumColorField,OxyColors.Automatic);this.itemsSourceItems.push(new TornadoBarItem({minimum:d,maximum:m,baseValue:f,minimumColor:g,maximumColor:x}))}return!0}};D(Ee,"defaultTrackerStringFormatter",a=>`${a.title||""}
${a.yTitle}: ${a.yValue}
${a.xTitle}: ${a.xValue}`);let TornadoBarSeries=Ee;const De=class Yi extends XYAxisSeries{constructor(s){super(s),D(this,"defaultFillColor",OxyColors.Undefined),D(this,"fillColor"),D(this,"items"),D(this,"labelStringFormatter"),D(this,"strokeColor"),D(this,"strokeThickness"),D(this,"actualBarRectangles",[]),D(this,"actualItems",[]),this.items=[],this.fillColor=OxyColors.Automatic,this.strokeColor=OxyColors.Black,this.strokeThickness=1,this.trackerStringFormatter=Yi.defaultTrackerStringFormatter,this.labelStringFormatter=(d,m)=>`${m[4]||""}`,s&&Object.assign(this,removeUndef(s))}get actualFillColor(){return this.fillColor.getActualColor(this.defaultFillColor)}getNearestPoint(s,d){if(!(!this.actualBarRectangles||!this.actualItems)){for(let m=0;m<this.actualBarRectangles.length;m++)if(this.actualBarRectangles[m].containsPoint(s)){const f=(this.actualItems[m].y0+this.actualItems[m].y1)/2,g=s,x=new DataPoint(m,f),w=this.actualItems[m],C=this.formatDefaultTrackerString(w,new DataPoint(this.actualItems[m].x0,this.actualItems[m].y0),A=>{A.x1Value=this.xAxis.getValue(this.actualItems[m].x1),A.y1Value=this.yAxis.getValue(this.actualItems[m].y1)});return new TrackerHitResult({series:this,dataPoint:x,position:g,item:w,index:m,text:C})}}}async render(s){if(this.items.length===0)return;let d=0,m=Number_MAX_VALUE;if(this.actualBarRectangles=[],this.actualItems=[],this.isXMonotonic){const x=this.xAxis.clipMinimum;m=this.xAxis.clipMaximum,this.windowStartIndex=this.updateWindowStartIndex(this.items,w=>w.x0,x,this.windowStartIndex),d=this.windowStartIndex}const f=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);let g=0;for(let x=d;x<this.items.length;x++){const w=this.items[x];if(!this.isValid(w.x0)||!this.isValid(w.x1)||!this.isValid(w.y0)||!this.isValid(w.y1))continue;const C=PlotElementExtensions.transform,A=C(this,w.x0,w.y0),_=C(this,w.x1,w.y1),M=OxyRect.create(A.x,A.y,_.x,_.y);if(this.actualBarRectangles.push(M),this.actualItems.push(w),await s.drawRectangle(M,this.getSelectableFillColor(w.color.getActualColor(this.actualFillColor)),this.strokeColor,this.strokeThickness,f),this.labelStringFormatter){const P=this.labelStringFormatter(this.getItem(x),[w.x0,w.x1,w.y0,w.y1,w.title]),E=new ScreenPoint((M.left+M.right)/2,(M.top+M.bottom)/2);await s.drawText(E,P,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Middle)}if(g+=w.x0>m?1:0,g>1)break}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g;await s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,x,g),this.getSelectableFillColor(this.actualFillColor),this.strokeColor,this.strokeThickness,this.edgeRenderingMode)}setDefaultValues(){this.fillColor.isAutomatic()&&(this.defaultFillColor=this.plotModel.getDefaultColor())}updateData(){if(this.itemsSource)throw this.items=[],new Error("Not implemented")}updateMaxMin(){if(super.updateMaxMin(),this.isXMonotonic=!0,this.items===null||this.items.length===0)return;let s=Number_MAX_VALUE,d=Number_MIN_VALUE,m=Number_MAX_VALUE,f=Number_MIN_VALUE,g=Number_MIN_VALUE,x=Number_MIN_VALUE;for(const w of this.items)(w.x0<g||w.x1<x)&&(this.isXMonotonic=!1),s=Math.min(s,Math.min(w.x0,w.x1)),d=Math.max(d,Math.max(w.x1,w.x0)),m=Math.min(m,Math.min(w.y0,w.y1)),f=Math.max(f,Math.max(w.y0,w.y1)),g=w.x0,x=w.x1;this.minX=s,this.maxX=d,this.minY=m,this.maxY=f}isValid(s){return!isNaN(s)&&isFinite(s)}};D(De,"defaultTrackerStringFormatter",a=>`${a.title}
${a.xTitle}: ${a.xValue} ${a.x1Value}  
${a.yTitle}: ${a.yValue} ${a.y1Value}`);let RectangleBarSeries=De;function createHighLowItem(a,s,d,m=NaN,f=NaN){return{x:a,high:s,low:d,open:m,close:f}}const Te=class Gi extends XYAxisSeries{constructor(s){super(s),D(this,"_items",[]),D(this,"defaultColor",OxyColors.Undefined),D(this,"trackerStringFormatter"),D(this,"color"),D(this,"dashes"),D(this,"dataFieldClose"),D(this,"dataFieldHigh"),D(this,"dataFieldLow"),D(this,"dataFieldOpen"),D(this,"dataFieldX"),D(this,"lineJoin",LineJoin.Miter),D(this,"lineStyle",LineStyle.Solid),D(this,"mapping"),D(this,"strokeThickness"),D(this,"tickLength"),this.color=OxyColors.Automatic,this.tickLength=4,this.strokeThickness=1,this.trackerStringFormatter=Gi.DefaultTrackerStringFormatter,s&&Object.assign(this,removeUndef(s))}get actualColor(){return this.color.getActualColor(this.defaultColor)}get items(){return this._items}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis||d)return;let m=Number_MAX_VALUE,f;const g=(x,w,C)=>{const A=this.transform(x),_=A.x-s.x,M=A.y-s.y,P=_*_+M*M;if(P<m){const E=this.formatHighLowItemTrackerString(w);f=new TrackerHitResult({series:this,dataPoint:x,position:A,item:w,index:C,text:E}),m=P}};for(let x=0;x<this.items.length;x++){const w=this.items[x];g(new DataPoint(w.x,w.high),w,x),g(new DataPoint(w.x,w.low),w,x),g(new DataPoint(w.x,w.open),w,x),g(new DataPoint(w.x,w.close),w,x)}if(m<Number_MAX_VALUE)return f}formatHighLowItemTrackerString(s){return this.trackerStringFormatter&&this.trackerStringFormatter({item:s,title:this.title||"",xTitle:this.xAxis.title??XYAxisSeries.defaultXAxisTitle,xValue:this.xAxis.getValue(s.x),high:this.yAxis.getValue(s.high),low:this.yAxis.getValue(s.low),open:this.yAxis.getValue(s.open),close:this.yAxis.getValue(s.close)})||""}isValidItem(s,d,m){return!isNaN(s.x)&&isFinite(s.x)&&!isNaN(s.high)&&isFinite(s.high)&&!isNaN(s.low)&&isFinite(s.low)}async render(s){if(this.items.length===0)return;this.verifyAxes();const d=LineStyleHelper.getDashArray(this.lineStyle),m=this.getSelectableColor(this.actualColor),f=PlotElementExtensions.transform;for(const g of this.items)if(this.isValidItem(g,this.xAxis,this.yAxis)&&this.strokeThickness>0&&this.lineStyle!==LineStyle.None){const x=f(this,g.x,g.high),w=f(this,g.x,g.low);await s.drawLine([w,x],m,this.strokeThickness,this.edgeRenderingMode,d,this.lineJoin);const C=PlotElementExtensions.orientateVector(this,new ScreenVector(this.tickLength,0));if(!isNaN(g.open)){const A=f(this,g.x,g.open),_=A.minusVector(C);await s.drawLine([A,_],m,this.strokeThickness,this.edgeRenderingMode,d,this.lineJoin)}if(!isNaN(g.close)){const A=f(this,g.x,g.close),_=A.plus(C);await s.drawLine([A,_],m,this.strokeThickness,this.edgeRenderingMode,d,this.lineJoin)}}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=d.top+(d.bottom-d.top)*.7,g=d.top+(d.bottom-d.top)*.3,x=LineStyleHelper.getDashArray(this.lineStyle),w=this.getSelectableColor(this.actualColor);this.strokeThickness>0&&this.lineStyle!==LineStyle.None&&(await s.drawLine([new ScreenPoint(m,d.top),new ScreenPoint(m,d.bottom)],w,this.strokeThickness,this.edgeRenderingMode,x,LineJoin.Miter),await s.drawLine([new ScreenPoint(m-this.tickLength,f),new ScreenPoint(m,f)],w,this.strokeThickness,this.edgeRenderingMode,x,LineJoin.Miter),await s.drawLine([new ScreenPoint(m+this.tickLength,g),new ScreenPoint(m,g)],w,this.strokeThickness,this.edgeRenderingMode,x,LineJoin.Miter))}setDefaultValues(){this.color.isAutomatic()&&(this.lineStyle=this.plotModel.getDefaultLineStyle(),this.defaultColor=this.plotModel.getDefaultColor())}updateData(){if(this.itemsSource){if(this._items.length=0,this.mapping){for(const s of this.itemsSource)this._items.push(this.mapping(s));return}for(const s of this.itemsSource){if(!s)continue;if("high"in s&&"low"in s&&"x"in s){this._items.push(s);continue}if(!this.dataFieldX||!this.dataFieldHigh||!this.dataFieldLow)throw new Error("HighLowSeries: dataFieldX, dataFieldHigh and dataFieldLow are required");const d=getOrDefault(s,this.dataFieldX,NaN),m=getOrDefault(s,this.dataFieldHigh,NaN),f=getOrDefault(s,this.dataFieldLow,NaN),g=getOrDefault(s,this.dataFieldOpen,NaN),x=getOrDefault(s,this.dataFieldClose,NaN);this._items.push({x:d,high:m,low:f,open:g,close:x})}}}updateMaxMin(){super.updateMaxMin(),this.internalUpdateMaxMin3(this.items,s=>s.x,s=>s.x,s=>s.low,s=>s.high)}};D(Te,"DefaultTrackerStringFormatter",a=>`${a.title}
${a.xTitle}: ${a.xValue}
High: ${round(a.high,3)}
Low: ${round(a.low,3)}
Open: ${round(a.open,3)}
Close: ${round(a.close,3)}`);let HighLowSeries=Te;const Oe=class{constructor(s=NaN,d,m){D(this,"x"),D(this,"buyVolume"),D(this,"sellVolume"),this.x=s||NaN,this.buyVolume=d,this.sellVolume=m}static findIndex(s,d,m){let f=0,g=0,x=s.length-1;for(;g<=x;){if(m<g)return f;if(m>x)return x;const w=s[m].x;if(w===d)return m;if(w>d){if(x=m-1,x<g)return f;if(x===g)return x}else g=m+1,f=m;if(g>=x)return f;const C=s[x].x,A=s[g].x,_=(x-g+1)/(C-A);m=g+Math.round((d-A)*_)}return f}isValid(){return!isNaN(this.x)&&!isNaN(this.buyVolume)&&!isNaN(this.sellVolume)}};D(Oe,"Undefined",new Oe(NaN,NaN,NaN));let OhlcvItem=Oe;var VolumeStyle=(a=>(a[a.None=0]="None",a[a.Combined=1]="Combined",a[a.Stacked=2]="Stacked",a[a.PositiveNegative=3]="PositiveNegative",a))(VolumeStyle||{});const ke=class qi extends XYAxisSeries{constructor(s){super(s),D(this,"data",[]),D(this,"minDx",0),D(this,"winIndex",0),D(this,"volumeStyle"),D(this,"strokeThickness"),D(this,"strokeIntensity"),D(this,"positiveColor"),D(this,"negativeColor"),D(this,"interceptColor"),D(this,"interceptStrokeThickness"),D(this,"interceptLineStyle"),D(this,"positiveHollow"),D(this,"negativeHollow"),D(this,"barWidth"),D(this,"minimumVolume",0),D(this,"maximumVolume",0),D(this,"averageVolume",0),this.positiveColor=OxyColors.DarkGreen,this.negativeColor=OxyColors.Red,this.barWidth=0,this.strokeThickness=1,this.negativeHollow=!1,this.positiveHollow=!0,this.strokeIntensity=.8,this.volumeStyle=1,this.interceptColor=OxyColors.Gray,this.interceptLineStyle=LineStyle.Dash,this.interceptStrokeThickness=1,this.trackerStringFormatter=qi.DefaultTrackerStringFormatter,s&&Object.assign(this,removeUndef(s))}get items(){return this.data}set items(s){this.data=s}append(s){if(this.data===null&&(this.data=[]),this.data.length>0&&this.data[this.data.length-1].x>s.x)throw new Error("cannot append bar out of order, must be sequential in X");this.data.push(s)}async render(s){if(this.data===null||this.data.length===0)return;const d=this.data,m=this.data.length;this.verifyAxes();const f=this.getClippingRect();this.barWidth>0?this.barWidth:this.minDx*.8;const g=this.getSelectableFillColor(this.positiveColor),x=this.getSelectableFillColor(this.negativeColor),w=this.positiveHollow?OxyColors.Transparent:g,C=this.negativeHollow?OxyColors.Transparent:x,A=OxyColorExtensions.changeIntensity(this.positiveColor,this.strokeIntensity),_=OxyColorExtensions.changeIntensity(this.negativeColor,this.strokeIntensity),M=this.getSelectableColor(A),P=this.getSelectableColor(_),E=this.xAxis.clipMinimum,R=this.xAxis.clipMaximum;this.winIndex=OhlcvItem.findIndex(d,E,this.winIndex);const B=PlotElementExtensions.transform;for(let z=this.winIndex;z<m;z++){const F=d[z];if(F.x>R)break;if(!F.isValid())continue;const I=this.getBuyBarRect(F),L=this.getSellBarRect(F);switch(this.volumeStyle){case 1:{const W=F.buyVolume>F.sellVolume?w:C,G=F.buyVolume>F.sellVolume?M:P;await s.drawRectangle(I,W,G,this.strokeThickness,this.edgeRenderingMode)}break;case 3:await s.drawRectangle(I,g,M,this.strokeThickness,this.edgeRenderingMode),await s.drawRectangle(L,x,P,this.strokeThickness,this.edgeRenderingMode);break;case 2:{await s.drawRectangle(I,g,M,this.strokeThickness,this.edgeRenderingMode),await s.drawRectangle(L,x,P,this.strokeThickness,this.edgeRenderingMode);break}case 0:break;default:throw new Error("Invalid VolumeStyle")}}if(this.interceptStrokeThickness>0&&this.interceptLineStyle!==LineStyle.None){const z=this.inverseTransform(f.bottomLeft),F=this.inverseTransform(f.topRight),I=B(this,z.x,0),L=B(this,F.x,0);await s.drawLine([I,L],this.interceptColor,this.interceptStrokeThickness,this.edgeRenderingMode,LineStyleHelper.getDashArray(this.interceptLineStyle),LineJoin.Miter)}}getBuyBarRect(s){const d=PlotElementExtensions.transform,m=(this.barWidth>0?this.barWidth:this.minDx*.8)*.5,f=d(this,s.x-m,0);switch(this.volumeStyle){case 1:{const g=d(this,s.x+m,Math.abs(s.buyVolume-s.sellVolume));return OxyRect.fromScreenPoints(f,g)}case 3:{const g=d(this,s.x+m,s.buyVolume);return OxyRect.fromScreenPoints(f,g)}case 2:{const g=d(this,s.x+m,s.buyVolume),x=d(this,s.x+m,s.sellVolume),w=d(this,s.x-m,s.buyVolume+s.sellVolume);return s.buyVolume>s.sellVolume?OxyRect.fromScreenPoints(x,w):OxyRect.fromScreenPoints(f,g)}}throw new Error("Invalid VolumeStyle")}getSellBarRect(s){const d=PlotElementExtensions.transform,m=(this.barWidth>0?this.barWidth:this.minDx*.8)*.5,f=d(this,s.x-m,0);switch(this.volumeStyle){case 1:{const g=d(this,s.x+m,Math.abs(s.buyVolume-s.sellVolume));return OxyRect.fromScreenPoints(f,g)}case 3:{const g=d(this,s.x+m,-s.sellVolume);return OxyRect.fromScreenPoints(f,g)}case 2:{const g=d(this,s.x+m,s.buyVolume),x=d(this,s.x+m,s.sellVolume),w=d(this,s.x-m,s.buyVolume+s.sellVolume);return s.buyVolume>s.sellVolume?OxyRect.fromScreenPoints(f,x):OxyRect.fromScreenPoints(g,w)}}throw new Error("Invalid VolumeStyle")}async renderLegend(s,d){const m=(d.left+d.right)/2,f=d.top+(d.bottom-d.top)*.7,g=d.top+(d.bottom-d.top)*.3,x=LineStyleHelper.getDashArray(LineStyle.Solid),w=this.getSelectableFillColor(this.positiveColor),C=this.getSelectableColor(OxyColorExtensions.changeIntensity(this.positiveColor,this.strokeIntensity)),A=d.width*.75;this.strokeThickness>0&&(await s.drawLine([new ScreenPoint(m,d.top),new ScreenPoint(m,d.bottom)],C,this.strokeThickness,this.edgeRenderingMode,x,LineJoin.Miter),await s.drawRectangle(new OxyRect(m-A*.5,g,A,f-g),w,C,this.strokeThickness,this.edgeRenderingMode))}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis||d||!this.data||this.data.length===0)return;const m=this.data.length,f=this.inverseTransform(s),g=f.x;if(g>this.data[m-1].x+this.minDx||g<this.data[0].x-this.minDx)return;const x=OhlcvItem.findIndex(this.data,g,this.winIndex),w=x+1<this.data.length?x+1:x,C=E=>{const R=E.x-f.x;return R*R},A=C(this.data[x])<=C(this.data[w])?x:w,_=this.data[A];let M=!1;if(this.getBuyBarRect(_).containsPoint(s)&&(M=!0),M||this.getSellBarRect(_).containsPoint(s)&&(M=!0),M)return;const P=this.formatDefaultTrackerString(_,new DataPoint(_.x,0));return new TrackerHitResult({series:this,dataPoint:f,position:s,item:_,index:A,text:P})}updateData(){if(super.updateData(),this.winIndex=0,!this.data||this.data.length===0)return;const s=this.data,d=s.length;this.minDx=Number_MAX_VALUE;for(let m=1;m<d;m++)if(this.minDx=Math.min(this.minDx,s[m].x-s[m-1].x),this.minDx<0)throw new Error("bars are out of order, must be sequential in x");d<=1&&(this.minDx=1)}updateAxisMaxMin(){this.xAxis.include(this.minX),this.xAxis.include(this.maxX);let s=this.minimumVolume,d=this.maximumVolume;const m=this.averageVolume,f=(d-s)/4;switch(this.volumeStyle){case 3:s=-(m+f/2),d=+(m+f/2);break;case 2:d=m+f,s=0;break;default:d=m+f/2,s=0;break}s=Math.max(this.yAxis.filterMinValue,s),d=Math.min(this.yAxis.filterMaxValue,d),this.yAxis.include(s),this.yAxis.include(d)}updateMaxMin(){super.updateMaxMin();let s=Number_MAX_VALUE,d=Number_MIN_VALUE,m=0,f=Number_MIN_VALUE,g=0,x=0;for(const w of this.items)w.isValid()&&(w.sellVolume>0&&g++,w.buyVolume>0&&g++,x+=w.buyVolume,x+=w.sellVolume,s=Math.min(s,w.x),d=Math.max(d,w.x),m=Math.min(m,-w.sellVolume),f=Math.max(f,+w.buyVolume));this.minX=Math.max(this.xAxis.filterMinValue,s),this.maxX=Math.min(this.xAxis.filterMaxValue,d),this.minimumVolume=m,this.maximumVolume=f,this.averageVolume=x/g}};D(ke,"DefaultTrackerStringFormatter",a=>{const s=a.item;return`Time: ${a.xValue}
Buy Volume: ${s.buyVolume}
Sell Volume: ${s.sellVolume}`});let VolumeSeries=ke;class CandleStickSeries extends HighLowSeries{constructor(s){super(),D(this,"minDx",0),D(this,"increasingColor"),D(this,"decreasingColor"),D(this,"candleWidth"),this.increasingColor=OxyColors.DarkGreen,this.decreasingColor=OxyColors.Red,this.candleWidth=0,s&&Object.assign(this,removeUndef(s))}findByX(s,d=-1){return d<0&&(d=this.windowStartIndex),this.findWindowStartIndex(this.items,m=>m.x,s,d)}async render(s){const d=this.items.length,m=this.items;if(d===0||this.strokeThickness<=0||this.lineStyle===LineStyle.None)return;this.verifyAxes();const f=LineStyleHelper.getDashArray(this.lineStyle),g=.5*(this.candleWidth>0?this.candleWidth:this.minDx*.8),x=this.getSelectableFillColor(this.increasingColor),w=this.getSelectableFillColor(this.decreasingColor),C=this.getSelectableColor(OxyColorExtensions.changeIntensity(this.increasingColor,.7)),A=this.getSelectableColor(OxyColorExtensions.changeIntensity(this.decreasingColor,.7)),_=this.xAxis.clipMinimum,M=this.xAxis.clipMaximum;this.windowStartIndex=this.updateWindowStartIndex(m,E=>E.x,_,this.windowStartIndex);const P=PlotElementExtensions.transform;for(let E=this.windowStartIndex;E<d;E++){const R=m[E];if(R.x>M)return;if(!this.isValidItem(R,this.xAxis,this.yAxis))continue;const B=R.close>R.open?x:w,z=R.close>R.open?C:A,F=P(this,R.x,R.high),I=P(this,R.x,R.low),L=P(this,R.x,Math.max(R.open,R.close)),W=P(this,R.x,Math.min(R.open,R.close));this.strokeThickness>0&&(await s.drawLine([F,L],z,this.strokeThickness,this.edgeRenderingMode,f,this.lineJoin),await s.drawLine([W,I],z,this.strokeThickness,this.edgeRenderingMode,f,this.lineJoin));const G=P(this,R.x-g,R.open),q=P(this,R.x+g,R.close),K=OxyRect.fromScreenPoints(G,q);await s.drawRectangle(K,B,z,this.strokeThickness,this.edgeRenderingMode)}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=d.top+(d.bottom-d.top)*.7,g=d.top+(d.bottom-d.top)*.3,x=LineStyleHelper.getDashArray(this.lineStyle),w=d.width*.75;this.strokeThickness>0&&this.lineStyle!==LineStyle.None&&await s.drawLine([new ScreenPoint(m,d.top),new ScreenPoint(m,d.bottom)],this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode,x,LineJoin.Miter),await s.drawRectangle(new OxyRect(m-w*.5,g,w,f-g),this.getSelectableFillColor(this.increasingColor),this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode)}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis||d||this.items.length===0)return;const m=this.items.length,f=this.inverseTransform(s),g=f.x;if(g>this.items[m-1].x+this.minDx||g<this.items[0].x-this.minDx)return;const x=this.findWindowStartIndex(this.items,E=>E.x,g,this.windowStartIndex),w=x+1<this.items.length?x+1:x,C=E=>{const R=E.x-f.x,B=E.open-f.y,z=E.high-f.y,F=E.low-f.y,I=E.close-f.y,L=R*R+B*B,W=R*R+z*z,G=R*R+F*F,q=R*R+I*I;return Math.min(L,Math.min(W,Math.min(G,q)))},A=C(this.items[x])<=C(this.items[w])?x:w,_=this.items[A],M=new DataPoint(_.x,_.close),P=this.formatHighLowItemTrackerString(_);return new TrackerHitResult({series:this,dataPoint:M,position:this.transform(M),item:_,index:A,text:P})}updateData(){super.updateData();const s=this.items,d=s.length;this.minDx=Number_MAX_VALUE;for(let m=1;m<d;m++)if(this.minDx=Math.min(this.minDx,s[m].x-s[m-1].x),this.minDx<0)throw new Error("bars are out of order, must be sequential in x");d<=1&&(this.minDx=1)}}class FunctionSeries extends LineSeries{constructor(s){if(super(s),s.title&&(this.title=s.title),s.f){s.dx?this.f1(s.f,s.x0,s.x1,s.dx):s.n&&this.f2(s.f,s.x0,s.x1,s.n);return}s.fx&&s.fy&&(s.dt?this.f3(s.fx,s.fy,s.t0,s.t1,s.dt):s.n&&this.f4(s.fx,s.fy,s.t0,s.t1,s.n))}static fromDx(s,d,m,f,g){return new FunctionSeries({f:s,x0:d,x1:m,dx:f,title:g})}static fromN(s,d,m,f,g){return assertInteger(f,"n"),new FunctionSeries({f:s,x0:d,x1:m,n:f,title:g})}static fromFxFyDt(s,d,m,f,g,x){return new FunctionSeries({fx:s,fy:d,t0:m,t1:f,dt:g,title:x})}static fromFxFyN(s,d,m,f,g,x){return assertInteger(g,"n"),new FunctionSeries({fx:s,fy:d,t0:m,t1:f,n:g,title:x})}f1(s,d,m,f){for(let g=d;g<=m+f*.5;g+=f)this.points.push(new DataPoint(g,s(g)))}f2(s,d,m,f){this.f1(s,d,m,(m-d)/(f-1))}f3(s,d,m,f,g){for(let x=m;x<=f+g*.5;x+=g)this.points.push(new DataPoint(s(x),d(x)))}f4(s,d,m,f,g){this.f3(s,d,m,f,(f-m)/(g-1))}}class HistogramItem{constructor(s,d,m,f,g=OxyColors.Automatic){D(this,"rangeStart"),D(this,"rangeEnd"),D(this,"area"),D(this,"count"),D(this,"color"),this.rangeStart=s,this.rangeEnd=d,this.area=m,this.count=f,this.color=g}get rangeCenter(){return this.rangeStart+(this.rangeEnd-this.rangeStart)/2}get width(){return this.rangeEnd-this.rangeStart}get height(){return this.area/this.width}get value(){return this.height}contains(s){return this.height<0?s.x<=this.rangeEnd&&s.x>=this.rangeStart&&s.y>=this.height&&s.y<=0||s.x<=this.rangeStart&&s.x>=this.rangeEnd&&s.y>=this.height&&s.y<=0:s.x<=this.rangeEnd&&s.x>=this.rangeStart&&s.y<=this.height&&s.y>=0||s.x<=this.rangeStart&&s.x>=this.rangeEnd&&s.y<=this.height&&s.y>=0}toString(){return`${this.rangeStart} ${this.rangeEnd} ${this.area} ${this.count}`}}const Pe=class Ki extends XYAxisSeries{constructor(s){super(s),D(this,"defaultFillColor",OxyColors.Undefined),D(this,"_actualItems"),D(this,"baseValue"),D(this,"baseLine"),D(this,"actualBaseLine"),D(this,"fillColor"),D(this,"strokeColor"),D(this,"negativeFillColor"),D(this,"negativeStrokeColor"),D(this,"strokeThickness"),D(this,"minValue",0),D(this,"maxValue",0),D(this,"labelStringFormatter"),D(this,"trackerStringFormatter"),D(this,"labelMargin",0),D(this,"labelPlacement"),D(this,"colorMapping"),D(this,"mapping"),D(this,"items",[]),this.fillColor=OxyColors.Automatic,this.strokeColor=OxyColors.Black,this.strokeThickness=0,this.trackerStringFormatter=Ki.defaultTrackerStringFormatter,this.labelPlacement=LabelPlacement.Outside,this.colorMapping=this.getDefaultColor,this.negativeFillColor=OxyColors.Undefined,this.negativeStrokeColor=OxyColors.Undefined,this.baseValue=0,this.baseLine=NaN,this.actualBaseLine=NaN,s&&Object.assign(this,removeUndef(s))}get actualFillColor(){return this.fillColor.getActualColor(this.defaultFillColor)}get actualItems(){return this.itemsSource?this._actualItems:this.items}async render(s){this.verifyAxes(),await this.renderBins(s,this.actualItems)}getNearestPoint(s,d){const m=this.inverseTransform(s);if(this.isPointInRange(m)&&this.actualItems)for(let f=0;f<this.actualItems.length;f++){const g=this.actualItems[f];if(g.contains(m)){const x=this.getItem(f);return new TrackerHitResult({series:this,dataPoint:m,position:s,item:x,index:f,text:this.formatDefaultTrackerString(g,m)})}}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=(d.bottom-d.top)*.8,x=g,w=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(new OxyRect(m-.5*x,f-.5*g,x,g),this.getSelectableColor(this.actualFillColor),this.strokeColor,this.strokeThickness,w)}updateData(){this.itemsSource&&this.updateActualItems()}setDefaultValues(){this.fillColor.isAutomatic()&&(this.defaultFillColor=this.plotModel.getDefaultColor())}updateAxisMaxMin(){super.updateAxisMaxMin(),this.computeActualBaseLine(),this.yAxis.include(this.actualBaseLine)}computeActualBaseLine(){if(isNaN(this.baseLine))if(this.yAxis.isLogarithmic()){const s=this.actualItems?minValueOfArray(this.actualItems.map(d=>d.value).filter(d=>d>0),1):1;this.actualBaseLine=Math.max(s/10,this.baseValue)}else this.actualBaseLine=0;else this.actualBaseLine=this.baseLine}updateMaxMinXY(){if(this.actualItems&&this.actualItems.length>0){const s=this.actualItems.map(f=>f.rangeStart),d=this.actualItems.map(f=>f.rangeEnd),m=this.actualItems.map(f=>f.height);this.minX=Math.min(minValueOfArray(s),minValueOfArray(d)),this.maxX=Math.max(maxValueOfArray(s),maxValueOfArray(d)),this.yAxis.isLogarithmic()?(this.minY=Math.max(minValueOfArray(m),Number.EPSILON),this.maxY=maxValueOfArray(m,Number.EPSILON)):(this.minY=minValueOfArray(m,0),this.maxY=maxValueOfArray(m,0))}}updateMaxMin(){super.updateMaxMin();const s=[];if(pushMany(s,this.actualItems.map(d=>new DataPoint(d.rangeStart,0))),pushMany(s,this.actualItems.map(d=>new DataPoint(d.rangeEnd,d.height))),this.internalUpdateMaxMin(s),this.updateMaxMinXY(),this.actualItems&&this.actualItems.length>0){const d=this.actualItems.map(m=>m.value);this.minValue=minValueOfArray(d),this.maxValue=maxValueOfArray(d)}}getItem(s){const d=this.actualItems;return!this.itemsSource&&d&&s<d.length?d[s]:super.getItem(s)}async renderBins(s,d){const m=this.yAxis,f=m.isLogarithmic()&&!m.isValidValue(this.baseValue);for(const g of d){if(m.isLogarithmic()&&!m.isValidValue(g.height))continue;const x=this.getItemFillColor(g),w=this.getItemStrokeColor(g),C=this.transform(new DataPoint(g.rangeStart,f?m.clipMinimum:this.baseValue)),A=this.transform(new DataPoint(g.rangeEnd,g.height)),_=OxyRect.fromScreenPoints(C,A),M=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await s.drawRectangle(_,x,w,this.strokeThickness,M),this.labelStringFormatter&&await this.renderLabel(s,_,g)}}getItemFillColor(s){return s.color.isAutomatic()?this.colorMapping(s):s.color}getItemStrokeColor(s){return this.negativeStrokeColor.isUndefined()||s.height>=this.baseValue?this.strokeColor:this.negativeStrokeColor}async renderLabel(s,d,m){const f=this.labelStringFormatter(m,[m.value,m.rangeStart,m.rangeEnd,m.area,m.count]);let g,x,w=HorizontalAlignment.Center;const C=(m.rangeStart+m.rangeEnd)/2,A=Math.sign(m.value);let _=A*this.labelMargin;switch(this.labelPlacement){case LabelPlacement.Inside:g=new DataPoint(C,m.value),x=-A;break;case LabelPlacement.Middle:{const E=this.inverseTransform(d.topLeft),R=this.inverseTransform(d.bottomRight);g=new DataPoint(C,(E.y+R.y)/2),x=VerticalAlignment.Middle;break}case LabelPlacement.Base:g=new DataPoint(C,0),_=-_,x=A;break;case LabelPlacement.Outside:g=new DataPoint(C,m.value),_=-_,x=A;break;default:throw new Error("Invalid label placement")}const M=PlotElementExtensions.orientateAlignment(this,w,x);w=M[0],x=M[1];const P=this.transform(g).plus(PlotElementExtensions.orientateVector(this,new ScreenVector(0,_)));await s.drawText(P,f,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,w,x)}isPointInRange(s){return this.updateMaxMinXY(),s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}clearActualItems(){this._actualItems&&(this._actualItems.length=0)}getDefaultColor(s){return this.negativeFillColor.isUndefined()||s.value>=this.baseValue?this.actualFillColor:this.negativeFillColor}updateActualItems(){if(this.mapping){if(!this.itemsSource)throw new Error("itemsSource is required when using the Mapping property");this.clearActualItems(),this._actualItems=this._actualItems||[];for(const s of this.itemsSource)this._actualItems.push(this.mapping(s));return}this.clearActualItems(),this._actualItems=this._actualItems||[];for(const s of this.itemsSource||[])if(s)throw s instanceof HistogramItem&&this._actualItems.push(s),new Error("invalid item type")}};D(Pe,"defaultTrackerStringFormatter",a=>`Start: ${a.item.rangeStart}
End: ${a.item.rangeEnd}
Value: ${a.item.value}
Area: ${a.item.area}
Count: ${a.item.count}`);let HistogramSeries=Pe;function isScatterPointProvider(a){return a&&typeof a.getScatterPoint=="function"}const Re=class Zi extends XYAxisSeries{constructor(s){super(s),D(this,"_points",[]),D(this,"defaultMarkerFillColor",OxyColors.Undefined),D(this,"markerFill",OxyColors.Automatic),D(this,"markerOutline"),D(this,"markerSize",5),D(this,"markerType",MarkerType.Square),D(this,"markerStroke",OxyColors.Automatic),D(this,"markerStrokeThickness",1),D(this,"labelStringFormatter"),D(this,"labelMargin",6),D(this,"binSize",0),D(this,"colorAxisKey"),D(this,"dataFieldX"),D(this,"dataFieldY"),D(this,"dataFieldSize"),D(this,"dataFieldTag"),D(this,"dataFieldValue"),D(this,"mapping"),D(this,"colorAxis"),D(this,"itemsSourcePoints"),D(this,"maxValue",0),D(this,"minValue",0),this.markerFill=OxyColors.Automatic,this.markerSize=5,this.markerType=MarkerType.Square,this.markerStroke=OxyColors.Automatic,this.markerStrokeThickness=1,this.labelMargin=6,s&&Object.assign(this,removeUndef(s))}get actualMarkerFillColor(){return this.markerFill.getActualColor(this.defaultMarkerFillColor)}get points(){return this._points}get actualPoints(){return this.itemsSource?this.itemsSourcePoints:this.points}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis||d)return;const m=this.actualPoints;if(!m||m.length===0)return;let f,g=Number_MAX_VALUE,x=0;const w=this.colorAxis?this.colorAxis.title:Zi.defaultColorAxisTitle,C=this.xAxis.clipMinimum,A=this.xAxis.clipMaximum,_=this.yAxis.clipMinimum,M=this.yAxis.clipMaximum;for(const P of m){if(P.x<C||P.x>A||P.y<_||P.y>M){x++;continue}const E=this.transform(new DataPoint(P.x,P.y)),R=E.x-s.x,B=E.y-s.y,z=R*R+B*B;if(z<g){const F=this.getItem(x)??P;let I;!isNullOrUndef(P.value)&&!isNaN(P.value)&&!isInfinity(P.value)&&(I=P.value);const L=new DataPoint(P.x,P.y);f=new TrackerHitResult({series:this,dataPoint:L,position:E,item:F,index:x,text:this.formatDefaultTrackerString(F,L,W=>{W.colorAxisTitle=w,W.zValue=I})}),g=z}x++}return f}async render(s){const d=this.actualPoints;if(!d||d.length===0)return;const m=this.getClippingRect(),f=d.length,g=[],x=[],w=[],C=[],A=new Map,_=new Map,M=this.isSelected();for(let E=0;E<f;E++){const R=new DataPoint(d[E].x,d[E].y);if(!this.isValidPoint(R))continue;let B=NaN,z=NaN;const F=d[E];F&&(isNullOrUndef(F.size)||(B=F.size),isNullOrUndef(F.value)||(z=F.value)),isNaN(B)&&(B=this.markerSize);const I=this.transform(new DataPoint(R.x,R.y));if(M&&this.isItemSelected(E)){w.push(I),C.push(B);continue}if(this.colorAxis){if(isNaN(z))continue;const L=this.colorAxis.getPaletteIndex(z);A.has(L)||(A.set(L,[]),_.set(L,[])),A.get(L).push(I),_.get(L).push(B)}else g.push(I),x.push(B)}const P=this.transform(new DataPoint(this.minX,this.maxY));if(this.colorAxis){const E=this.markerType===MarkerType.Plus||this.markerType===MarkerType.Star||this.markerType===MarkerType.Cross;for(const[R,B]of A){const z=this.colorAxis.getColor(R);await RenderingExtensions.drawMarkers(s,B,this.markerType,this.markerOutline,_.get(R),this.markerFill.getActualColor(z),E?z:this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,this.binSize,P)}}await RenderingExtensions.drawMarkers(s,g,this.markerType,this.markerOutline,x,this.actualMarkerFillColor,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,this.binSize,P),await RenderingExtensions.drawMarkers(s,w,this.markerType,this.markerOutline,C,this.plotModel.selectionColor,this.plotModel.selectionColor,this.markerStrokeThickness,this.edgeRenderingMode,this.binSize,P),this.labelStringFormatter&&await this.renderPointLabels(s,m)}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=new ScreenPoint(m,f);await RenderingExtensions.drawMarker(s,g,this.markerType,this.markerOutline,this.markerSize,this.isSelected()?this.plotModel.selectionColor:this.actualMarkerFillColor,this.isSelected()?this.plotModel.selectionColor:this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)}ensureAxes(){super.ensureAxes(),this.colorAxis=this.colorAxisKey?this.plotModel.getAxis(this.colorAxisKey):this.plotModel.defaultColorAxis}setDefaultValues(){this.markerFill.isAutomatic()&&(this.defaultMarkerFillColor=this.plotModel.getDefaultColor())}updateData(){this.itemsSource&&this.updateItemsSourcePoints()}updateMaxMin(){super.updateMaxMin(),this.internalUpdateMaxMinValue(this.actualPoints)}async renderPointLabels(s,d){const m=this.actualPoints;if(!m||m.length===0)return;let f=-1;for(const g of m){f++;const x=new DataPoint(g.x,g.y);if(!this.isValidPoint(x))continue;const w=this.transform(x).plus(new ScreenVector(0,-this.labelMargin));if(!d.containsPoint(w))continue;const C=this.getItem(f),A=this.labelStringFormatter(C,[g.x,g.y]);await s.drawText(w,A,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Bottom)}}internalUpdateMaxMinValue(s){if(!s||s.length===0)return;let d=Number_MAX_VALUE,m=Number_MAX_VALUE,f=Number_MAX_VALUE,g=Number_MIN_VALUE,x=Number_MIN_VALUE,w=Number_MIN_VALUE;isNaN(d)&&(d=Number_MAX_VALUE),isNaN(m)&&(m=Number_MAX_VALUE),isNaN(g)&&(g=Number_MIN_VALUE),isNaN(x)&&(x=Number_MIN_VALUE),isNaN(f)&&(f=Number_MIN_VALUE),isNaN(w)&&(w=Number_MIN_VALUE);for(const C of s){const A=C.x,_=C.y;if(A!==A||_!==_)continue;const M=isNullOrUndef(C.value)?Number.NaN:C.value;A<d&&(d=A),A>g&&(g=A),_<m&&(m=_),_>x&&(x=_),M<f&&(f=M),M>w&&(w=M)}d<Number_MAX_VALUE&&(this.minX=d),m<Number_MAX_VALUE&&(this.minY=m),g>Number_MIN_VALUE&&(this.maxX=g),x>Number_MIN_VALUE&&(this.maxY=x),f<Number_MAX_VALUE&&(this.minValue=f),w>Number_MIN_VALUE&&(this.maxValue=w),this.colorAxis instanceof Axis&&(this.colorAxis.include(this.minValue),this.colorAxis.include(this.maxValue))}clearItemsSourcePoints(){this.itemsSourcePoints&&(this.itemsSourcePoints.length=0)}updateItemsSourcePoints(){var s,d,m;if(this.clearItemsSourcePoints(),this.mapping){if(!this.itemsSource)throw new Error("itemsSource is required when mapping is set");this.itemsSourcePoints=this.itemsSourcePoints||[];for(const f of this.itemsSource)this.itemsSourcePoints.push(this.mapping(f));return}this.itemsSourcePoints=this.itemsSourcePoints||[];for(const f of this.itemsSource||[])if(!isNullOrUndef(f)){if(!isUndef(f.x)&&!isUndef(f.y)){(s=this.itemsSourcePoints)==null||s.push(f);continue}if(this.dataFieldX&&this.dataFieldY){const g=this.updateFromDataFields(f);if(!g)continue;(d=this.itemsSourcePoints)==null||d.push(g);continue}if(isScatterPointProvider(f)){const g=f.getScatterPoint();if(!g)continue;(m=this.itemsSourcePoints)==null||m.push(g);continue}throw new Error("Invalid item type")}}updateFromDataFields(s){const d=getOrDefault(s,this.dataFieldX,Number.NaN),m=getOrDefault(s,this.dataFieldY,Number.NaN);return{x:d,y:m,size:getOrDefault(s,this.dataFieldSize,Number.NaN),value:getOrDefault(s,this.dataFieldValue,Number.NaN),tag:getOrDefault(s,this.dataFieldTag,void 0)}}};D(Re,"defaultColorAxisTitle","Value");let ScatterSeries=Re;const ce=class Ei extends XYAxisSeries{constructor(s){super(s),D(this,"_actualItems"),D(this,"defaultColor",OxyColors.Undefined),D(this,"defaultLineStyle",LineStyle.Solid),D(this,"color"),D(this,"minValue",0),D(this,"maxValue",0),D(this,"arrowHeadLength"),D(this,"arrowHeadWidth"),D(this,"arrowHeadPosition"),D(this,"lineJoin"),D(this,"lineStyle"),D(this,"strokeThickness"),D(this,"minimumSegmentLength"),D(this,"arrowVeeness"),D(this,"arrowStartPosition"),D(this,"arrowLabelPosition"),D(this,"colorAxis"),D(this,"colorAxisKey"),D(this,"labelStringFormatter"),D(this,"trackerStringFormatter"),D(this,"labelFontSize"),D(this,"canTrackerInterpolatePoints",!1),D(this,"mapping"),D(this,"items",[]),this.color=OxyColors.Automatic,this.minimumSegmentLength=2,this.strokeThickness=2,this.lineStyle=LineStyle.Solid,this.lineJoin=LineJoin.Miter,this.arrowHeadLength=3,this.arrowHeadWidth=2,this.arrowHeadPosition=1,this.arrowVeeness=0,this.arrowStartPosition=0,this.arrowLabelPosition=0,this.trackerStringFormatter=Ei.DefaultTrackerStringFormatter,this.labelStringFormatter=d=>d.value.toFixed(2),this.labelFontSize=0,s&&Object.assign(this,s)}get actualLineStyle(){return this.lineStyle!=LineStyle.Automatic?this.lineStyle:this.defaultLineStyle}get ActualItems(){return this.itemsSource?this._actualItems:this.items}async render(s){const d=this.ActualItems;this.verifyAxes(),await this.renderVectors(s,d)}updateData(){this.itemsSource&&this.updateActualItems()}clearActualItems(){this._actualItems&&(this._actualItems.length=0)}updateActualItems(){if(!this.itemsSource)return;this.clearActualItems(),this._actualItems=this._actualItems||[];let s=this.itemsSource;this.mapping&&(s=this.itemsSource.map(d=>this.mapping(d))),this._actualItems.push(...s)}async renderVectors(s,d){let m=0;for(const f of d){let g;this.colorAxis&&(this.color.isUndefined()||this.color.isAutomatic())?g=ColorAxisExtensions.getColor(this.colorAxis,f.value):g=this.color.getActualColor(this.defaultColor),g=this.getSelectableColor(g,m);const x=f.direction,w=f.origin.minusVector(x.times(this.arrowStartPosition)),C=w.plus(x.times(this.arrowLabelPosition));await this.drawVector(s,w,x,g),this.labelFontSize>0&&this.labelStringFormatter&&await s.drawText(this.transform(C),this.labelStringFormatter(f),this.actualTextColor,this.actualFont,this.labelFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Middle),m++}}async drawVector(s,d,m,f){const g=[d,d.plus(m)],x=[];RenderingExtensions.transformAndInterpolateLines(this,g,x,this.minimumSegmentLength),x.length>=2&&await this.drawArrow(s,x,x[x.length-1].minus(x[x.length-2]),f)}async drawArrow(s,d,m,f){const g=m;g.normalize();const x=new ScreenVector(g.y,-g.x),w=this.arrowHeadLength*this.strokeThickness,C=this.arrowHeadWidth*this.strokeThickness,A=d[d.length-1].minusVector(g.times(w*this.arrowHeadPosition)),_=g.times(this.arrowVeeness*this.strokeThickness),M=A.plus(g.times(w)),P=A.plus(x.times(C)).minusVector(_),E=A.minusVector(x.times(C)).minusVector(_),R=this.actualLineStyle,B=LineStyleHelper.getDashArray(R);if(this.arrowHeadPosition>0&&this.arrowHeadPosition<=1){const z=w*this.arrowHeadPosition*w*this.arrowHeadPosition;for(let F=d.length-1;F>=0;F--)d[F].distanceToSquared(M)<=z&&d.splice(F,1);d.length>0&&d.push(A)}this.strokeThickness>0&&R!==LineStyle.None&&(await s.drawLine(d,f,this.strokeThickness,this.edgeRenderingMode,B,this.lineJoin),await s.drawPolygon([E,M,P,A],f,OxyColors.Undefined,0,this.edgeRenderingMode))}getNearestPoint(s,d){const m=this.colorAxis,f=(m==null?void 0:m.title)??Ei.DefaultColorAxisTitle;if(!(this.ActualItems&&this.ActualItems.length>0))return;const g=argMin(this.ActualItems,C=>this.transform(C.origin).distanceToSquared(s)),x=g.origin,w=this.formatDefaultTrackerString(g,x,C=>{const A=C;A.colorAxisTitle=f,A.itemDirection=g.direction});return new TrackerHitResult({series:this,dataPoint:x,position:this.transform(x),item:void 0,index:-1,text:w})}ensureAxes(){super.ensureAxes(),this.colorAxis=this.colorAxisKey?this.plotModel.getAxis(this.colorAxisKey):this.plotModel.defaultColorAxis}setDefaultValues(){this.color.isAutomatic()&&this.colorAxis===void 0&&(this.defaultLineStyle=this.plotModel.getDefaultLineStyle(),this.defaultColor=this.plotModel.getDefaultColor())}updateMaxMinXY(){const s=this.ActualItems;s&&s.length>0&&(this.minX=Math.min(...s.map(d=>d.origin.x-d.direction.x*this.arrowStartPosition),...s.map(d=>d.origin.x-d.direction.x*(this.arrowStartPosition-1))),this.maxX=Math.max(...s.map(d=>d.origin.x-d.direction.x*this.arrowStartPosition),...s.map(d=>d.origin.x-d.direction.x*(this.arrowStartPosition-1))),this.minY=Math.min(...s.map(d=>d.origin.y-d.direction.y*this.arrowStartPosition),...s.map(d=>d.origin.y-d.direction.y*(this.arrowStartPosition-1))),this.maxY=Math.max(...s.map(d=>d.origin.y-d.direction.y*this.arrowStartPosition),...s.map(d=>d.origin.y-d.direction.y*(this.arrowStartPosition-1))))}updateMaxMin(){super.updateMaxMin();const s=this.ActualItems,d=[];if(d.push(...s.map(m=>m.origin.minusVector(m.direction.times(this.arrowStartPosition)))),d.push(...s.map(m=>m.origin.plus(m.direction.times(1-this.arrowStartPosition)))),this.internalUpdateMaxMin(d),this.updateMaxMinXY(),s&&s.length>0){const m=s.map(f=>f.value);this.minValue=minValueOfArray(m),this.maxValue=maxValueOfArray(m)}}updateAxisMaxMin(){if(super.updateAxisMaxMin(),!this.colorAxis)return;const s=this.colorAxis;s.include(this.minValue),s.include(this.maxValue)}};D(ce,"DefaultTrackerStringFormatter",a=>`${a.title}
${a.xTitle}: ${a.xValue}
${a.yTitle}: ${a.yValue}
${a.colorAxisTitle}: ${a.item.value}
${a.xTitle}: ${a.itemDirection.x}
${a.yTitle}: ${a.itemDirection.y}`),D(ce,"DefaultColorAxisTitle","Value");let VectorSeries=ce;const argMin=(a,s)=>{if(!a)throw new Error("Sequence must be defined.");if(!s)throw new Error("Projection must be defined.");let d,m,f=!0;for(const g of a){const x=s(g);(f||x<m)&&(d=g,m=x,f=!1)}if(f)throw new Error("Sequence must be non-empty.");return d};class DataRange{constructor(s,d){if(D(this,"_minimum"),D(this,"_maximum"),D(this,"_isDefined"),isNaN(s)||isNaN(d))throw new Error("NaN values are not permitted");if(d<s)throw new Error("max must be larger or equal min");this._minimum=s,this._maximum=d,this._isDefined=!0}get minimum(){return this._minimum}get maximum(){return this._maximum}get range(){return this.maximum-this.minimum}isDefined(){return this._isDefined}contains(s){return s>=this.minimum&&s<=this.maximum}intersectsWith(s){return this.isDefined()&&s.isDefined()&&(this.contains(s.minimum)||this.contains(s.maximum)||s.contains(this.minimum)||s.contains(this.maximum))}toString(){return`[${this.minimum}, ${this.maximum}]`}}const DataRange_Undefined=new DataRange(0,0);DataRange_Undefined._isDefined=!1;Object.freeze(DataRange_Undefined);class ExtrapolationLineSeries extends LineSeries{constructor(s){super(s),D(this,"defaultExtrapolationColor",OxyColors.Black),D(this,"defaultExtrapolationLineStyle",LineStyle.Dash),D(this,"orderedIntervals",[]),D(this,"extrapolationColor"),D(this,"extrapolationDashes"),D(this,"extrapolationLineStyle",LineStyle.Solid),D(this,"ignoreExtraplotationForScaling",!1),D(this,"intervals",[]),this.extrapolationColor=OxyColors.Black,this.lineStyle=LineStyle.Dot,s&&Object.assign(this,s)}get actualExtrapolationColor(){return this.extrapolationColor.getActualColor(this.defaultExtrapolationColor)}get actualExtrapolationLineStyle(){return this.extrapolationLineStyle!==LineStyle.Automatic?this.extrapolationLineStyle:this.defaultExtrapolationLineStyle}get actualExtrapolationDashArray(){return this.extrapolationDashes||LineStyleHelper.getDashArray(this.actualExtrapolationLineStyle)}async renderLegend(s,d){const m=(d.left+d.right)/2,f=(d.top+d.bottom)/2;let g=[new ScreenPoint(d.left,f),new ScreenPoint(m,f)];await s.drawLine(g,this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode,this.actualDashArray),g=[new ScreenPoint(m,f),new ScreenPoint(d.right,f)],await s.drawLine(g,this.getSelectableColor(this.actualExtrapolationColor),this.strokeThickness,this.edgeRenderingMode,this.actualExtrapolationDashArray);const x=new ScreenPoint(m,f);await RenderingExtensions.drawMarker(s,x,this.markerType,this.markerOutline,this.markerSize,this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)}updateData(){super.updateData(),this.orderedIntervals=this.mergeOverlaps(this.intervals)}updateMaxMin(){this.ignoreExtraplotationForScaling&&this.orderedIntervals.length>0?(this.minX=this.points.filter(s=>!this.inAnyInterval(s.x)).map(s=>s.x).filter(s=>!isNaN(s)).reduce((s,d)=>Math.min(s,d),Number.NaN),this.minY=this.points.filter(s=>!this.inAnyInterval(s.x)).map(s=>s.y).filter(s=>!isNaN(s)).reduce((s,d)=>Math.min(s,d),Number.NaN),this.maxX=this.points.filter(s=>!this.inAnyInterval(s.x)).map(s=>s.x).filter(s=>!isNaN(s)).reduce((s,d)=>Math.max(s,d),Number.NaN),this.maxY=this.points.filter(s=>!this.inAnyInterval(s.x)).map(s=>s.y).filter(s=>!isNaN(s)).reduce((s,d)=>Math.max(s,d),Number.NaN)):super.updateMaxMin()}async renderLine(s,d){if(this.strokeThickness<=0||this.actualLineStyle===LineStyle.None)return;const m=this.getClippingRect(),f=this.inverseTransform(m.bottomLeft),g=this.inverseTransform(m.topRight),x=Math.min(f.x,g.x),w=Math.max(f.x,g.x),C=Math.min(f.y,g.y),A=Math.max(f.y,g.y),_=this.createClippingRectangles(m,x,w,C,A);for(const M of _){const P=this.inverseTransform(M.center).x,E=this.orderedIntervals&&this.orderedIntervals.some(B=>B.contains(P)),R=RenderingExtensions.autoResetClip(s,M);await this.renderLinePart(s,d,E),R.dispose()}}createClippingRectangles(s,d,m,f,g){const x=[];let w=d;const C=PlotElementExtensions.transform;if(this.orderedIntervals&&this.orderedIntervals.length>0){const A=this.flatten(this.orderedIntervals).filter(_=>_>=d&&_<=m);for(const _ of A){const M=OxyRect.fromScreenPoints(C(this,w,f),C(this,_,g));x.push(M.clip(s)),w=_}}return x.push(OxyRect.fromScreenPoints(C(this,w,f),C(this,m,g)).clip(s)),x}flatten(s){const d=[];for(const m of s)d.push(m.minimum),d.push(m.maximum);return d}async renderLinePart(s,d,m){const f=m?this.extrapolationColor:this.color,g=m?this.actualExtrapolationDashArray:this.actualDashArray;await RenderingExtensions.drawReducedLine(s,d,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(f),this.strokeThickness,this.edgeRenderingMode,g,this.lineJoin)}mergeOverlaps(s){const d=[];if(s){const m=s.sort((f,g)=>f.minimum-g.minimum);for(const f of m){const g=d[d.length-1]||DataRange_Undefined;f.intersectsWith(g)?d[d.length-1]=new DataRange(g.minimum,Math.max(g.maximum,f.maximum)):d.push(f)}}return d}inAnyInterval(s){let d=0,m=this.orderedIntervals.length-1;for(;d<=m;){const f=Math.floor((d+m)/2),g=this.compare(this.orderedIntervals[f],s);if(g===0)return!0;g<0?m=f-1:d=f+1}return!1}compare(s,d){return d<s.minimum?-1:d>s.maximum?1:0}}const xe=class Oi extends XYAxisSeries{constructor(s){super(s),D(this,"contours"),D(this,"segments",[]),D(this,"defaultColor",OxyColors.Undefined),D(this,"color"),D(this,"columnCoordinates",[]),D(this,"contourLevelStep"),D(this,"contourLevels"),D(this,"contourColors",[]),D(this,"data"),D(this,"labelBackground"),D(this,"labelStringFormatter"),D(this,"trackerStringFormatter"),D(this,"labelSpacing"),D(this,"multiLabel"),D(this,"labelStep"),D(this,"lineStyle"),D(this,"rowCoordinates",[]),D(this,"strokeThickness"),D(this,"minimumSegmentLength"),this.contourLevelStep=NaN,this.labelStep=1,this.multiLabel=!1,this.labelSpacing=150,this.labelBackground=OxyColor.fromAColor(220,OxyColors.White),this.color=OxyColors.Automatic,this.strokeThickness=1,this.lineStyle=LineStyle.Solid,this.minimumSegmentLength=2,this.trackerStringFormatter=Oi.DefaultTrackerFormatString,s&&Object.assign(this,removeUndef(s))}get actualColor(){return this.color.getActualColor(this.defaultColor)}calculateContours(){if(!this.data)return;let s=this.contourLevels;this.segments=[];const d=(m,f,g,x,w)=>{this.segments.push({startPoint:new DataPoint(m,f),endPoint:new DataPoint(g,x),contourLevel:w})};if(!s){let m=this.data[0][0],f=this.data[0][0];for(let x=0;x<this.data.length;x++)for(let w=0;w<this.data[x].length;w++)m=Math.max(m,this.data[x][w]),f=Math.min(f,this.data[x][w]);let g=this.contourLevelStep;if(isNaN(g)){const x=(m-f)/20,w=Math.round(Math.log(Math.abs(x))/Math.LN10);g=Math.pow(10,Math.floor(w)),this.contourLevelStep=g}m=Math.round(g*Math.ceil(m/g)*1e14)/1e14,f=Math.round(g*Math.floor(f/g)*1e14)/1e14,s=ArrayBuilder.createVectorWithStep(f,m,g)}if(Conrec.contour(this.data,this.columnCoordinates,this.rowCoordinates,s,d),this.joinContourSegments(),this.contourColors&&this.contourColors.length>0)for(const m of this.contours){let f=Oi.indexOf(s,m.contourLevel);f>=0&&(f=f%this.contourColors.length,m.color=this.contourColors[f])}}getNearestPoint(s,d){let m;const f="Z";for(const g of this.contours){const x=d?this.getNearestInterpolatedPointInternal(g.points,0,s):this.getNearestPointInternal(g.points,0,s);x&&(!m||m.position.distanceToSquared(s)>x.position.distanceToSquared(s))&&(m=x,m.text=this.formatDefaultTrackerString(g,x.dataPoint,w=>{const C=w;C.zTitle=f,C.contourLevel=g.contourLevel}))}return m}async render(s){if(this.contours||this.calculateContours(),this.contours.length===0)return;this.verifyAxes();const d=[],m=LineStyleHelper.getDashArray(this.lineStyle);for(const f of this.contours){if(this.strokeThickness<=0||this.lineStyle===LineStyle.None)continue;const g=f.points.map(R=>this.transform(R)),x=f.color.getActualColor(this.actualColor);await RenderingExtensions.drawReducedLine(s,g,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(x),this.strokeThickness,this.edgeRenderingMode,m,LineJoin.Miter);let w=0;for(let R=1;R<g.length;R++)w+=g[R].minus(g[R-1]).length;if(g.length<=10||Math.round(f.contourLevel/this.contourLevelStep)%this.labelStep!==0)continue;if(!this.multiLabel){this.addContourLabels(f,g,d,(g.length-1)*.5);continue}const C=Math.floor(w/this.labelSpacing);if(C===0){this.addContourLabels(f,g,d,(g.length-1)*.5);continue}let A=0,_=0,M=1,P=0;const E=(w-(C-1)*this.labelSpacing)/2;for(let R=0;R<C;R++){let B=0;M===1?P=E:P=E+R*this.labelSpacing;for(let z=M;z<g.length;z++){if(A+=g[z].minus(g[z-1]).length,A>P){B=z-1+(P-_)/(A-_),M=z+1;break}_=A}this.addContourLabels(f,g,d,B)}}for(const f of d)await this.renderLabelBackground(s,f);for(const f of d)await this.renderLabel(s,f)}setDefaultValues(){this.color.isAutomatic()&&(this.lineStyle=this.plotModel.getDefaultLineStyle(),this.defaultColor=this.plotModel.getDefaultColor())}updateMaxMin(){this.minX=Math.min(...this.columnCoordinates),this.maxX=Math.max(...this.columnCoordinates),this.minY=Math.min(...this.rowCoordinates),this.maxY=Math.max(...this.rowCoordinates)}static indexOf(s,d){let m=Number_MAX_VALUE,f=-1;for(let g=0;g<s.length;g++){const x=Math.abs(s[g]-d);x<m&&(m=x,f=g)}return f}addContourLabels(s,d,m,f){if(d.length<2)return;const g=Math.floor(f),x=g+1,w=d[x].x-d[g].x,C=d[x].y-d[g].y,A=d[g].x+w*(f-g),_=d[g].y+C*(f-g),M=new ScreenPoint(A,_);let P=Math.atan2(C,w)*180/Math.PI;P>90&&(P-=180),P<-90&&(P+=180);const E=this.labelStringFormatter?this.labelStringFormatter(s.contourLevel,[]):s.contourLevel.toString();m.push({position:M,angle:P,text:E})}joinContourSegments(s=1e-10){this.contours=new Array;const d=f=>{const g=new SegmentPoint(f.startPoint),x=new SegmentPoint(f.endPoint);return g.partner=x,x.partner=g,[g,x]},m=groupBy(this.segments,"contourLevel");for(const f of m){const g=f[0],x=f[1].flatMap(w=>d(w)).sort((w,C)=>w.point.x-C.point.x);for(let w=0;w<x.length-1;w++){const C=x[w];if(C.join)continue;const A=Math.sqrt(Math.pow(C.point.x,2)+Math.pow(C.point.y,2))*s,_=C.point.x+A;let M=w+1,P;for(;;){if(M>=x.length){P=void 0;break}if(P=x[M],M++,!P.join){if(P.point.x>_){P=void 0;break}if(Math.sqrt(Math.pow(P.point.x-C.point.x,2)+Math.pow(P.point.y-C.point.y,2))<A)break}}P&&(C.join=P,P.join=C)}for(const w of x){if(w.processed)continue;let C=w;for(;C.join&&(C=C.join.partner,C!==w););const A=new Array(C.point,C.partner.point);for(C.processed=!0,C=C.partner,C.processed=!0;C.join&&(C=C.join,!C.processed);)C.processed=!0,C=C.partner,C.processed=!0,A.push(C.point);const _=new Contour(A,g);this.contours.push(_)}}}async renderLabel(s,d){this.actualFontSize>0&&await s.drawText(d.position,d.text,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,d.angle,HorizontalAlignment.Center,VerticalAlignment.Middle)}async renderLabelBackground(s,d){if(this.labelBackground.isInvisible())return;const m=s.measureText(d.text,this.actualFont,this.actualFontSize,this.actualFontWeight),f=d.angle/180*Math.PI,g=Math.cos(f),x=Math.sin(f),w=g*.6,C=x*.6,A=-x*.5,_=g*.5,M=d.position.x,P=d.position.y,E=[new ScreenPoint(M-m.width*w-m.height*A,P-m.width*C-m.height*_),new ScreenPoint(M+m.width*w-m.height*A,P+m.width*C-m.height*_),new ScreenPoint(M+m.width*w+m.height*A,P+m.width*C+m.height*_),new ScreenPoint(M-m.width*w+m.height*A,P-m.width*C+m.height*_)];await s.drawPolygon(E,this.labelBackground,OxyColors.Undefined,0,this.edgeRenderingMode)}};D(xe,"DefaultTrackerFormatString",a=>`${a.title}
${a.xTitle}: ${a.xValue}
${a.yTitle}: ${a.yValue}
${a.zTitle}: ${a.contourLevel}`);let ContourSeries=xe;class SegmentPoint{constructor(s){D(this,"partner"),D(this,"join"),D(this,"processed"),D(this,"point"),this.point=s,this.processed=!1}}class Contour{constructor(s,d){D(this,"contourLevel"),D(this,"points"),D(this,"color"),this.points=s,this.contourLevel=d,this.color=OxyColors.Automatic}}class StairStepSeries extends LineSeries{constructor(s){super(s),D(this,"verticalStrokeThickness"),D(this,"verticalLineStyle"),this.verticalStrokeThickness=NaN,this.verticalLineStyle=this.lineStyle,s&&Object.assign(this,removeUndef(s))}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis)return;let m=16*16,f=this.getNearestPointInternal(this.actualPoints,0,s);if(!d&&f&&f.position.distanceToSquared(s)<m)return f.text=this.formatDefaultTrackerString(f.item,f.dataPoint),f;f=void 0;const g=this.actualPoints.length;for(let x=0;x<g;x++){const w=this.actualPoints[x],C=this.actualPoints[x+1<g?x+1:x],A=PlotElementExtensions.transform(this,w.x,w.y),_=PlotElementExtensions.transform(this,C.x,w.y),M=_.x-A.x,P=_.y-A.y;let E=(s.x-A.x)*M+(s.y-A.y)*P,R=M*M+P*P;if(M*M+P*P<4&&(E=0,R=1),Math.abs(R)<=0)continue;const B=E/R;if(B<0||B>1)continue;const z=A.x+B*M,F=A.y+B*P,I=s.x-z,L=s.y-F,W=I*I+L*L;if(W>=m)continue;const G=w.x+B*(C.x-w.x),q=w.y,K=this.getItem(x),Z=this.formatDefaultTrackerString(K,new DataPoint(G,q));f=new TrackerHitResult({series:this,dataPoint:new DataPoint(G,q),position:new ScreenPoint(z,F),item:K,index:x,text:Z}),m=W}return f}async render(s){if(!this.actualPoints||this.actualPoints.length===0)return;this.verifyAxes();const d=this.actualDashArray,m=LineStyleHelper.getDashArray(this.verticalLineStyle),f=this.actualLineStyle,g=isNaN(this.verticalStrokeThickness)?this.strokeThickness:this.verticalStrokeThickness,x=this.getSelectableColor(this.actualColor),w=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness),C=async(R,B)=>{if(this.strokeThickness>0&&f!==LineStyle.None)if(g!==this.strokeThickness||this.verticalLineStyle!==f){const z=[],F=[];if(R.length>=2){z.push(R[0]),z.push(R[1]);for(let I=1;I+2<R.length;I+=2)F.push(R[I]),F.push(R[I+1]),z.push(R[I+1]),z.push(R[I+2])}await s.drawLineSegments(z,x,this.strokeThickness,w,d,this.lineJoin),await s.drawLineSegments(F,x,g,w,m,this.lineJoin)}else await s.drawLine(R,x,this.strokeThickness,w,d,this.lineJoin);this.markerType!==MarkerType.None&&await RenderingExtensions.drawMarkers(s,B,this.markerType,this.markerOutline,[this.markerSize],this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)},A=this.actualPoints;let _=0,M=Number_MAX_VALUE;if(this.isXMonotonic){const R=this.xAxis.clipMinimum;M=this.xAxis.clipMaximum,this.windowStartIndex=this.updateWindowStartIndex(A,B=>B.x,R,this.windowStartIndex),_=this.windowStartIndex}const P=[],E=[];for(let R=_;R<A.length;){const{valid:B,validOffset:z,endOffset:F}=this.findNextValidSegment(A,R,M);if(!B)break;let I=new ScreenPoint(0,0),L=DataPoint.Undefined,W=!1,G=!1;for(R=z;R<F;++R){const q=A[R];W=W||q.x>L.x,G=G||q.x<L.x,W&&G&&(P.push(this.transform(L)),P.push(this.transform(L)),W=q.x>L.x,G=q.x<L.x),I=this.transform(q),q.y!==L.y&&(isNaN(L.y)||P.push(this.transform(new DataPoint(q.x,L.y))),P.push(I),W=!1,G=!1),L=q,E.push(I)}R<A.length&&this.xAxis.isValidValue(A[R].x)?P.push(this.transform(new DataPoint(A[R].x,L.y))):P.push(I),await C(P,E),P.length=0,E.length=0}this.labelStringFormatter&&await this.renderPointLabels(s)}findNextValidSegment(s,d,m){for(;;++d){if(d>=s.length)return{valid:!1,validOffset:0,endOffset:0};const g=s[d];if(g.x>m)return{valid:!1,validOffset:0,endOffset:0};if(this.isValidPoint(g))break}const f=d;for(;!(d>=s.length);++d){const g=s[d];if(!this.isValidPoint(g)||g.x>m)break}return{valid:!0,validOffset:f,endOffset:d}}}const Ne=class Ji extends XYAxisSeries{constructor(s){super(s),D(this,"itemsSourceItems",[]),D(this,"trackerStringFormatter"),D(this,"boxWidth"),D(this,"fill"),D(this,"items"),D(this,"lineStyle"),D(this,"medianPointSize"),D(this,"medianThickness"),D(this,"meanPointSize"),D(this,"meanThickness"),D(this,"outlierSize"),D(this,"outlierTrackerStringFormatter"),D(this,"outlierType"),D(this,"outlierOutline"),D(this,"showBox"),D(this,"showMedianAsDot"),D(this,"showMeanAsDot"),D(this,"stroke"),D(this,"strokeThickness"),D(this,"whiskerWidth"),this.items=[],this.trackerStringFormatter=Ji.DefaultTrackerFormatString,this.outlierTrackerStringFormatter=d=>`${d.title||""}
${d.xTitle}: ${d.xValue}
Y: ${d.outlier.toFixed(2)}`,this.title=void 0,this.fill=OxyColors.Automatic,this.stroke=OxyColors.Black,this.boxWidth=.3,this.strokeThickness=1,this.medianThickness=2,this.meanThickness=2,this.outlierSize=2,this.outlierType=MarkerType.Circle,this.medianPointSize=2,this.meanPointSize=2,this.whiskerWidth=.5,this.lineStyle=LineStyle.Solid,this.showMedianAsDot=!1,this.showMeanAsDot=!1,this.showBox=!0,s&&Object.assign(this,removeUndef(s))}get actualItems(){return this.itemsSource?this.itemsSourceItems:this.items}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis)return;let m=Number_MAX_VALUE,f;for(const g of this.actualItems){for(const M of g.outliers){const P=PlotElementExtensions.transform(this,g.x,M),E=P.minus(s).lengthSquared;if(E<m){const R=this.outlierTrackerStringFormatter({item:g,title:this.title,xTitle:this.xAxis.title||XYAxisSeries.defaultXAxisTitle,xValue:this.xAxis.getValue(g.x),outlier:M});f=new TrackerHitResult({series:this,dataPoint:new DataPoint(g.x,M),position:P,item:g,text:R}),m=E}}let x=DataPoint.Undefined;if(this.getBoxRect(g).containsPoint(s)){const M=this.inverseTransform(s);x=new DataPoint(g.x,M.y),m=0}const w=PlotElementExtensions.transform(this,g.x,g.upperWhisker),C=PlotElementExtensions.transform(this,g.x,g.lowerWhisker),A=ScreenPointHelper.findPointOnLine(s,w,C),_=A.minus(s).lengthSquared;if(_<m&&(x=this.inverseTransform(A),m=_),x.isDefined()){const M=this.trackerStringFormatter({item:g,title:this.title,xTitle:this.xAxis.title||XYAxisSeries.defaultXAxisTitle,xValue:this.xAxis.getValue(g.x),upperWhisker:this.yAxis.getValue(g.upperWhisker),boxTop:this.yAxis.getValue(g.boxTop),median:this.yAxis.getValue(g.median),boxBottom:this.yAxis.getValue(g.boxBottom),lowerWhisker:this.yAxis.getValue(g.lowerWhisker),mean:this.yAxis.getValue(g.mean!==void 0?g.mean:NaN)});f=new TrackerHitResult({series:this,dataPoint:x,position:this.transform(x),item:g,text:M})}}if(m<Number_MAX_VALUE)return f}isValidPointBoxPlot(s,d,m){const f=getBoxPlotItemValues(s);return!isNaN(s.x)&&!isInfinity(s.x)&&!f.some(isNaN)&&!f.some(isInfinity)&&d&&d.isValidValue(s.x)&&m&&f.every(g=>m.isValidValue(g))}async render(s){if(this.actualItems.length===0)return;const d=this.getClippingRect(),m=[],f=this.boxWidth*.5,g=f*this.whiskerWidth,x=this.getSelectableColor(this.stroke),w=this.getSelectableFillColor(this.fill),C=LineStyleHelper.getDashArray(this.lineStyle),A=PlotElementExtensions.transform,_=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);for(const M of this.actualItems){const P=M.mean!==void 0?M.mean:NaN;m.push(...M.outliers.map(F=>A(this,M.x,F)));const E=A(this,M.x,M.upperWhisker),R=A(this,M.x,M.boxTop),B=A(this,M.x,M.boxBottom),z=A(this,M.x,M.lowerWhisker);if(this.strokeThickness>0&&this.lineStyle!==LineStyle.None&&(await s.drawLine([E,R],x,this.strokeThickness,_,C,LineJoin.Miter),await s.drawLine([B,z],x,this.strokeThickness,_,C,LineJoin.Miter)),this.whiskerWidth>0){const F=A(this,M.x-g,M.upperWhisker),I=A(this,M.x+g,M.upperWhisker),L=A(this,M.x-g,M.lowerWhisker),W=A(this,M.x+g,M.lowerWhisker);await s.drawLine([F,I],x,this.strokeThickness,_,void 0,LineJoin.Miter),await s.drawLine([L,W],x,this.strokeThickness,_,void 0,LineJoin.Miter)}if(this.showBox){const F=this.getBoxRect(M);await s.drawRectangle(F,w,x,this.strokeThickness,_)}if(this.showMedianAsDot){const F=A(this,M.x,M.median);if(d.containsPoint(F)){const I=new OxyRect(F.x-this.medianPointSize,F.y-this.medianPointSize,this.medianPointSize*2,this.medianPointSize*2);await s.drawEllipse(I,w,OxyColors.Undefined,0,this.edgeRenderingMode)}}else{const F=A(this,M.x-f,M.median),I=A(this,M.x+f,M.median);await s.drawLine([F,I],x,this.strokeThickness*this.medianThickness,_,void 0,LineJoin.Miter)}if(!this.showMeanAsDot&&!isNaN(P)){const F=A(this,M.x-f,P),I=A(this,M.x+f,P);await s.drawLine([F,I],x,this.strokeThickness*this.meanThickness,_,LineStyleHelper.getDashArray(LineStyle.Dash),LineJoin.Miter)}else if(!isNaN(P)){const F=A(this,M.x,P);if(d.containsPoint(F)){const I=new OxyRect(F.x-this.meanPointSize,F.y-this.meanPointSize,this.meanPointSize*2,this.meanPointSize*2);await s.drawEllipse(I,w,OxyColors.Undefined,0,this.edgeRenderingMode)}}}if(this.outlierType!==MarkerType.None){const M=m.map(P=>this.outlierSize);await RenderingExtensions.drawMarkers(s,m,this.outlierType,this.outlierOutline,M,w,x,this.strokeThickness,this.edgeRenderingMode)}}async renderLegend(s,d){const m=(d.left+d.right)/2,f=d.top+(d.bottom-d.top)*.7,g=d.top+(d.bottom-d.top)*.3,x=(f+g)*.5,w=d.width*.24,C=w*this.whiskerWidth,A=1,_=this.getSelectableColor(this.stroke),M=this.getSelectableFillColor(this.fill),P=LineStyleHelper.getDashArray(LineStyle.Solid),E=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferGeometricAccuracy);if(await s.drawLine([new ScreenPoint(m,d.top),new ScreenPoint(m,g)],_,A,E,P,LineJoin.Miter),await s.drawLine([new ScreenPoint(m,f),new ScreenPoint(m,d.bottom)],_,A,E,P,LineJoin.Miter),this.whiskerWidth>0&&(await s.drawLine([new ScreenPoint(m-C,d.bottom),new ScreenPoint(m+C,d.bottom)],_,A,E,P,LineJoin.Miter),await s.drawLine([new ScreenPoint(m-C,d.top),new ScreenPoint(m+C,d.top)],_,A,E,P,LineJoin.Miter)),this.showBox&&await s.drawRectangle(new OxyRect(m-w,g,2*w,f-g),M,_,A,E),!this.showMedianAsDot)await s.drawLine([new ScreenPoint(m-w,x),new ScreenPoint(m+w,x)],_,A*this.medianThickness,E,P,LineJoin.Miter);else{const R=new OxyRect(m-this.medianPointSize,x-this.medianPointSize,this.medianPointSize*2,this.medianPointSize*2);await s.drawEllipse(R,M,OxyColors.Undefined,0,E)}}updateData(){this.itemsSource&&(this.clearItemsSourceItems(),this.itemsSourceItems.push(...this.itemsSource),this.itemsSourceItems.forEach(s=>{s.mean===void 0&&(s.median=NaN)}))}updateMaxMin(){super.updateMaxMin(),this.internalUpdateBoxPlotMaxMin(this.actualItems)}internalUpdateBoxPlotMaxMin(s){if(!s||s.length===0)return;let d=this.minX,m=this.minY,f=this.maxX,g=this.maxY;for(const x of s){if(!this.isValidPointBoxPlot(x,this.xAxis,this.yAxis))continue;const w=x.x;(w<d||isNaN(d))&&(d=w),(w>f||isNaN(f))&&(f=w);const C=getBoxPlotItemValues(x);for(const A of C)(A<m||isNaN(m))&&(m=A),(A>g||isNaN(g))&&(g=A)}this.minX=d,this.minY=m,this.maxX=f,this.maxY=g}getItem(s){return this.itemsSource||!this.actualItems||this.actualItems.length===0?super.getItem(s):this.actualItems[s]}getBoxRect(s){const d=this.boxWidth*.5,m=PlotElementExtensions.transform(this,s.x-d,s.boxTop),f=PlotElementExtensions.transform(this,s.x+d,s.boxBottom);return OxyRect.fromScreenPoints(m,f)}clearItemsSourceItems(){this.itemsSourceItems.length=0}};D(Ne,"DefaultTrackerFormatString",a=>`${a.title||""}
${a.xTitle}: ${a.xValue}
Upper Whisker: ${a.upperWhisker.toFixed(2)}
Third Quartil: ${a.boxTop.toFixed(2)}
Median: ${a.median.toFixed(2)}
First Quartil: ${a.boxBottom.toFixed(2)}
Lower Whisker: ${a.lowerWhisker.toFixed(2)}
Mean: ${a.mean.toFixed(2)}`);let BoxPlotSeries=Ne;function getBoxPlotItemValues(a){const s=[a.lowerWhisker,a.boxBottom,a.median,a.boxTop,a.upperWhisker];return a.mean!==void 0&&!isNaN(a.mean)&&s.push(a.mean),s.push(...a.outliers),s}class StemSeries extends LineSeries{constructor(s){super(s),D(this,"base"),this.base=0,s&&(this.base=s.base??0)}getNearestPoint(s,d){if(!this.xAxis||!this.yAxis||d)return;let m,f=Number_MAX_VALUE;const g=this.actualPoints;for(let x=0;x<g.length;x++){const w=g[x],C=new DataPoint(w.x,this.base),A=this.transform(w),_=this.transform(C);let M=ScreenPointHelper.findPositionOnLine(s,A,_);isNaN(M)&&(M=1),(M<0||M>1)&&(M=1);const P=A.plus(_.minus(A).times(M)),E=s.minus(P).lengthSquared;if(E<f){const R=this.getItem(x),B=this.formatDefaultTrackerString(R,w);m=new TrackerHitResult({series:this,dataPoint:new DataPoint(w.x,w.y),position:new ScreenPoint(A.x,A.y),item:this.getItem(x),index:x,text:B}),f=E}}return m}async render(s){if(this.actualPoints.length===0)return;this.verifyAxes();const d=this.minimumSegmentLength*this.minimumSegmentLength,m=this.actualDashArray,f=this.getSelectableColor(this.actualColor),g=[],x=this.markerType!==MarkerType.None?[]:void 0;for(const w of this.actualPoints)if(this.isValidPoint(w)){if(g[0]=PlotElementExtensions.transform(this,w.x,this.base),g[1]=PlotElementExtensions.transform(this,w.x,w.y),this.strokeThickness>0&&this.actualLineStyle!==LineStyle.None){const C=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness);await RenderingExtensions.drawReducedLine(s,g,d,f,this.strokeThickness,C,m,this.lineJoin)}x&&x.push(g[1])}x&&x.length>0&&await RenderingExtensions.drawMarkers(s,x,this.markerType,this.markerOutline,[this.markerSize],this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)}}function getActualFillColor(a){return a.fill.getActualColor(a.defaultFillColor)}const Ie=class Qi extends ItemsSeries{constructor(s){super(s),D(this,"slicePoints",[]),D(this,"total",0),D(this,"angleIncrement"),D(this,"angleSpan"),D(this,"areInsideLabelsAngled",!1),D(this,"colorField"),D(this,"diameter"),D(this,"explodedDistance",0),D(this,"innerDiameter"),D(this,"insideLabelColor"),D(this,"insideLabelFormatter"),D(this,"insideLabelPosition"),D(this,"isExplodedField"),D(this,"labelField"),D(this,"outsideLabelFormatter"),D(this,"slices",[]),D(this,"startAngle"),D(this,"stroke"),D(this,"strokeThickness"),D(this,"tickDistance"),D(this,"tickHorizontalLength"),D(this,"tickLabelDistance"),D(this,"tickRadialLength"),D(this,"valueField"),D(this,"trackerStringFormatter"),this.stroke=OxyColors.White,this.strokeThickness=1,this.diameter=1,this.innerDiameter=0,this.startAngle=0,this.angleSpan=360,this.angleIncrement=1,this.outsideLabelFormatter=(d,m)=>`${round(m,0)} %`,this.insideLabelColor=OxyColors.Automatic,this.insideLabelFormatter=(d,m)=>d.label,this.tickDistance=0,this.tickRadialLength=6,this.tickHorizontalLength=8,this.tickLabelDistance=4,this.insideLabelPosition=.5,this.fontSize=12,this.trackerStringFormatter=Qi.DefaultTrackerStringFormatter,s&&Object.assign(this,s)}getNearestPoint(s,d){const m=this.trackerStringFormatter;for(let f=0;f<this.slicePoints.length;f++)if(ScreenPointHelper.isPointInPolygon(s,this.slicePoints[f])){const g=this.slices[f],x=this.getItem(f),w=m?m({item:x,title:this.title,xTitle:g.label,xValue:g.value,percent:g.value/this.total*100}):void 0;return new TrackerHitResult({series:this,position:s,item:x,index:f,text:w})}}async render(s){if(this.slicePoints=[],this.slices.length===0||(this.total=this.slices.reduce((w,C)=>w+C.value,0),Math.abs(this.total)<=0))return;const d=Math.min(this.plotModel.plotArea.width,this.plotModel.plotArea.height)/2,m=d*(this.diameter-this.explodedDistance),f=d*this.innerDiameter;let g=this.startAngle;const x=new ScreenPoint((this.plotModel.plotArea.left+this.plotModel.plotArea.right)*.5,(this.plotModel.plotArea.top+this.plotModel.plotArea.bottom)*.5);for(const w of this.slices){const C=[],A=[],_=w.value/this.total*this.angleSpan,M=g+_,P=w.isExploded?this.explodedDistance*d:0,E=g+_/2,R=E*Math.PI/180,B=new ScreenPoint(x.x+P*Math.cos(R),x.y+P*Math.sin(R));for(;;){let F=!1;g>=M&&(g=M,F=!0);const I=g*Math.PI/180,L=new ScreenPoint(B.x+m*Math.cos(I),B.y+m*Math.sin(I));C.push(L);const W=new ScreenPoint(B.x+f*Math.cos(I),B.y+f*Math.sin(I));if(f+P>0&&A.push(W),F)break;g+=this.angleIncrement}A.reverse(),A.length===0&&A.push(B),A.push(C[0]);const z=[...C,...A];if(await s.drawPolygon(z,getActualFillColor(w),this.stroke,this.strokeThickness,this.edgeRenderingMode,void 0,LineJoin.Bevel),this.slicePoints.push(z),this.outsideLabelFormatter){const F=this.outsideLabelFormatter(w,w.value/this.total*100),I=Math.sign(Math.cos(R)),L=new ScreenPoint(B.x+(m+this.tickDistance)*Math.cos(R),B.y+(m+this.tickDistance)*Math.sin(R)),W=new ScreenPoint(L.x+this.tickRadialLength*Math.cos(R),L.y+this.tickRadialLength*Math.sin(R)),G=new ScreenPoint(W.x+this.tickHorizontalLength*I,W.y);await s.drawLine([L,W,G],this.actualTextColor,1,this.edgeRenderingMode,void 0,LineJoin.Bevel);const q=new ScreenPoint(G.x+this.tickLabelDistance*I,G.y);await s.drawText(q,F,this.actualTextColor,this.actualFont,this.actualFontSize,this.actualFontWeight,0,I>0?HorizontalAlignment.Left:HorizontalAlignment.Right,VerticalAlignment.Middle)}if(this.insideLabelFormatter&&!this.insideLabelColor.isUndefined()){const F=this.insideLabelFormatter(w,w.value/this.total*100),I=f*(1-this.insideLabelPosition)+m*this.insideLabelPosition,L=new ScreenPoint(B.x+I*Math.cos(R),B.y+I*Math.sin(R));let W=0;this.areInsideLabelsAngled&&(W=E,Math.cos(R)<0&&(W+=180));const G=this.insideLabelColor.isAutomatic()?this.actualTextColor:this.insideLabelColor;await s.drawText(L,F,G,this.actualFont,this.actualFontSize,this.actualFontWeight,W,HorizontalAlignment.Center,VerticalAlignment.Middle)}}}async renderLegend(s,d){}areAxesRequired(){return!1}ensureAxes(){}isUsing(s){return!1}setDefaultValues(){for(const s of this.slices)s.fill=s.fill||OxyColors.Automatic,s.fill.isAutomatic()&&(s.defaultFillColor=this.plotModel.getDefaultColor())}updateAxisMaxMin(){}updateData(){if(this.itemsSource){this.slices=[];for(const s of this.itemsSource){const d=getOrDefault(s,this.labelField,""),m=getOrDefault(s,this.valueField,NaN),f=getOrDefault(s,this.colorField,OxyColors.Automatic),g=getOrDefault(s,this.isExplodedField,!1);this.slices.push({label:d,value:m,fill:f,isExploded:g})}}}updateMaxMin(){}};D(Ie,"DefaultTrackerStringFormatter",a=>`${a.xTitle}: ${round(a.xValue,3)} (${toPercent((a.percent||0)/100)})`);let PieSeries=Ie;class AreaSeries extends LineSeries{constructor(s){super(s),D(this,"_points2",[]),D(this,"itemsSourcePoints2",[]),D(this,"_actualPoints2"),D(this,"constantY2",0),D(this,"dataFieldX2"),D(this,"dataFieldY2"),D(this,"color2"),D(this,"fill"),D(this,"reverse2",!1),D(this,"windowStartIndex2",0),D(this,"isPoints2Defined",!1),this.reverse2=!0,this.color2=OxyColors.Automatic,this.fill=OxyColors.Automatic,s&&Object.assign(this,removeUndef(s))}get actualColor2(){return this.color2.getActualColor(this.actualColor)}get actualFill(){return this.fill.getActualColor(OxyColor.fromAColor(100,this.actualColor))}get points2(){return this._points2}get actualPoints2(){return this.itemsSource?this.itemsSourcePoints2:this._actualPoints2}getNearestPoint(s,d){const m=this.isXMonotonic?this.windowStartIndex:0,f=this.isXMonotonic?this.windowStartIndex2:0;let g,x;d&&this.canTrackerInterpolatePoints?(g=this.getNearestInterpolatedPointInternal(this.actualPoints,m,s),x=this.getNearestInterpolatedPointInternal(this.actualPoints2,f,s)):(g=this.getNearestPointInternal(this.actualPoints,m,s),x=this.getNearestPointInternal(this.actualPoints2,f,s));let w;if(g&&x){const C=g.position.distanceTo(s),A=x.position.distanceTo(s);w=C<A?g:x}else w=g??x;return w&&(w.text=this.formatDefaultTrackerString(w.item,w.dataPoint)),w}async render(s){this.verifyAxes();const d=this.actualPoints;if(!d||d.length===0)return;const m=this.actualPoints2;if(!m||m.length===0)return;let f=0,g=0,x=Number_MAX_VALUE;if(this.isXMonotonic){const M=this.xAxis.clipMinimum;x=this.xAxis.clipMaximum,this.windowStartIndex=this.updateWindowStartIndex(d,P=>P.x,M,this.windowStartIndex),this.windowStartIndex2=this.updateWindowStartIndex(m,P=>P.x,M,this.windowStartIndex2),f=this.windowStartIndex,g=this.windowStartIndex2}const w=this.minimumSegmentLength*this.minimumSegmentLength,C={points:d,windowStartIndex:f,xMax:x,renderContext:s,minDistSquared:w,reverse:!1,color:this.actualColor,dashArray:this.actualDashArray},A=await this.renderChunkedPoints(C);C.points=m,C.windowStartIndex=g,C.reverse=this.reverse2,C.color=this.actualColor2;const _=await this.renderChunkedPoints(C);if(A.length===_.length)for(let M=0;M<A.length;M++){const P=A[M],E=_[M],R=[];R.push(...E),R.push(...P),await RenderingExtensions.drawReducedPolygon(s,R,w,this.getSelectableFillColor(this.actualFill),OxyColors.Undefined,0,this.edgeRenderingMode);const B=[this.markerSize];await RenderingExtensions.drawMarkers(s,P,this.markerType,void 0,B,this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,1),await RenderingExtensions.drawMarkers(s,E,this.markerType,void 0,B,this.markerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,1)}}async renderLegend(s,d){const m=d.top*.2+d.bottom*.8,f=d.top*.4+d.bottom*.6,g=d.top*.8+d.bottom*.2,x=[new ScreenPoint(d.left,m),new ScreenPoint(d.right,m)],w=[new ScreenPoint(d.right,g),new ScreenPoint(d.left,f)],C=[...x,...w];if(this.strokeThickness>0&&this.actualLineStyle!==LineStyle.None){const A=LineStyleHelper.getDashArray(this.actualLineStyle);await s.drawLine(x,this.getSelectableColor(this.actualColor),this.strokeThickness,this.edgeRenderingMode,A),await s.drawLine(w,this.getSelectableColor(this.actualColor2),this.strokeThickness,this.edgeRenderingMode,A)}await s.drawPolygon(C,this.getSelectableFillColor(this.actualFill),OxyColors.Undefined,0,this.edgeRenderingMode)}updateData(){if(super.updateData(),!this.itemsSource){this.isPoints2Defined=this._points2.length>0,this.isPoints2Defined?this._actualPoints2=this._points2:this._actualPoints2=this.getConstantPoints2();return}if(this.itemsSourcePoints2.length=0,this.isPoints2Defined=!!(this.dataFieldX2&&this.dataFieldY2),this.isPoints2Defined)for(const s of this.itemsSource){if(!s)continue;const d=getOrDefault(s,this.dataFieldX2,Number.NaN),m=getOrDefault(s,this.dataFieldY2,Number.NaN),f=new DataPoint(this.xAxis.itemToDouble(d),this.yAxis.itemToDouble(m));this.itemsSourcePoints2.push(f)}else this.itemsSourcePoints2.push(...this.getConstantPoints2())}updateMaxMin(){super.updateMaxMin(),this.internalUpdateMaxMin(this.actualPoints2)}async renderChunkedPoints(s){const d=[];let m=[],f=0;const g=s.points;for(let x=s.windowStartIndex;x<g.length;x++){const w=g[x];if(isNaN(w.y)){if(m.length===0)continue;d.push(await this.renderScreenPoints(s,m)),m=[]}else{const C=PlotElementExtensions.transform(this,w.x,w.y);m.push(C)}if(f+=w.x>s.xMax?1:0,f>1)break}return m.length>0&&d.push(await this.renderScreenPoints(s,m)),d}async renderScreenPoints(s,d){let m=d;if(s.reverse&&m.reverse(),this.interpolationAlgorithm){const f=ScreenPointHelper.resamplePoints(m,this.minimumSegmentLength);m=this.interpolationAlgorithm.createSplineSp(f,!1,.25)}return await RenderingExtensions.drawReducedLine(s.renderContext,m,s.minDistSquared,this.getSelectableColor(s.color),this.strokeThickness,this.edgeRenderingMode,s.dashArray,this.lineJoin),m}getConstantPoints2(){const s=this.actualPoints,d=[];if(!isNaN(this.constantY2)&&s.length>0){const m=s[0].x,f=s[s.length-1].x;d.push(new DataPoint(m,this.constantY2)),d.push(new DataPoint(f,this.constantY2))}return d}}var HeatMapCoordinateDefinition=(a=>(a[a.Center=0]="Center",a[a.Edge=1]="Edge",a))(HeatMapCoordinateDefinition||{}),HeatMapRenderMethod=(a=>(a[a.Bitmap=0]="Bitmap",a[a.Rectangles=1]="Rectangles",a))(HeatMapRenderMethod||{});const se=class bi extends XYAxisSeries{constructor(s){super(s),D(this,"dataHash",0),D(this,"colorAxisHash",0),D(this,"image"),D(this,"x0",0),D(this,"x1",0),D(this,"y0",0),D(this,"y1",0),D(this,"data"),D(this,"interpolate",!0),D(this,"minValue",0),D(this,"maxValue",0),D(this,"colorAxis"),D(this,"colorAxisKey"),D(this,"coordinateDefinition",0),D(this,"renderMethod",0),D(this,"labelStringFormatter",d=>d.toFixed(2)),D(this,"labelFontSize",0),this.trackerStringFormatter=bi.DefaultTrackerFormatString,this.interpolate=!0,this.labelFontSize=0,s&&Object.assign(this,removeUndef(s))}invalidate(){this.image=void 0}async render(s){if(!this.data){this.image=void 0;return}if(!this.colorAxis)throw new Error("Color axis not specified.");let d=this.x0,m=this.x1,f=this.y0,g=this.y1;const x=this.data.length,w=this.data[0].length,C=(this.x1-this.x0)/(x-1),A=(this.y1-this.y0)/(w-1);if(this.coordinateDefinition===0){if(this.xAxis.isLogarithmic()){const F=Math.log(this.x1/this.x0)/(x-1);d*=Math.exp(F/-2),m*=Math.exp(F/2)}else d-=C/2,m+=C/2;if(this.yAxis.isLogarithmic()){const F=Math.log(this.y1/this.y0)/(w-1);f*=Math.exp(F/-2),g*=Math.exp(F/2)}else f-=A/2,g+=A/2}const _=PlotElementExtensions.transform(this,d,f),M=PlotElementExtensions.transform(this,m,g),P=OxyRect.fromScreenPoints(_,M),E=this.renderMethod===0,R=calculateHashcode(this.data),B=this.colorAxis.getElementHashCode();(E&&!this.image||R!==this.dataHash||B!==this.colorAxisHash)&&(E&&await this.updateImage(),this.dataHash=R,this.colorAxisHash=B);const z=PlotElementExtensions.orientate;if(E)this.image&&await RenderingExtensions.drawImage(s,this.image,P.left,P.top,P.width,P.height,1,this.interpolate);else{const F=z(this,_),I=z(this,M),L=(I.x-F.x)/x,W=(I.y-F.y)/w,G=ColorAxisExtensions.getColor;for(let q=0;q<x;q++)for(let K=0;K<w;K++){const Z=G(this.colorAxis,this.data[q][K]),J=z(this,new ScreenPoint(F.x+q*L,F.y+K*W)),te=z(this,new ScreenPoint(F.x+(q+1)*L,F.y+(K+1)*W)),Q=OxyRect.fromScreenPoints(J,te);await s.drawRectangle(Q,Z,OxyColors.Undefined,0,this.edgeRenderingMode)}}this.labelFontSize>0&&await this.renderLabels(s,P)}getNearestPoint(s,d){if(!this.data)return;this.interpolate||(d=!1);let m=this.inverseTransform(s);if(!this.isPointInRange(m))return;let f,g;if(this.xAxis.isLogarithmic()){const _=Math.log(this.x1/this.x0)/(this.data.length-1);f=Math.log(m.x/this.x0)/_}else{const _=(this.x1-this.x0)/(this.data.length-1);f=(m.x-this.x0)/_}if(this.yAxis.isLogarithmic()){const _=Math.log(this.y1/this.y0)/(this.data[0].length-1);g=Math.log(m.y/this.y0)/_}else{const _=(this.y1-this.y0)/(this.data[0].length-1);g=(m.y-this.y0)/_}if(!d){f=Math.round(f),g=Math.round(g);let _,M;if(this.xAxis.isLogarithmic()){const P=Math.log(this.x1/this.x0)/(this.data.length-1);_=this.x0*Math.exp(f*P)}else{const P=(this.x1-this.x0)/(this.data.length-1);_=f*P+this.x0}if(this.yAxis.isLogarithmic()){const P=Math.log(this.y1/this.y0)/(this.data[0].length-1);M=this.y0*Math.exp(g*P)}else{const P=(this.y1-this.y0)/(this.data[0].length-1);M=g*P+this.y0}m=new DataPoint(_,M),s=this.transform(m)}if(f<-.5||f>this.data.length-.5||g<-.5||g>this.data[0].length-.5)return;const x=bi.getValue(this.data,f,g),w=this.colorAxis,C=(w==null?void 0:w.title)??bi.DefaultColorAxisTitle,A=this.formatDefaultTrackerString(void 0,m,_=>{_.colorAxisTitle=C,_.value=x});return new TrackerHitResult({series:this,dataPoint:m,position:s,item:null,index:-1,text:A})}ensureAxes(){super.ensureAxes(),this.colorAxis=this.colorAxisKey?this.plotModel.getAxis(this.colorAxisKey):this.plotModel.defaultColorAxis}updateMaxMinXY(){if(!this.data)return;const s=this.data.length,d=this.data[0].length;if(this.minX=Math.min(this.x0,this.x1),this.maxX=Math.max(this.x0,this.x1),this.minY=Math.min(this.y0,this.y1),this.maxY=Math.max(this.y0,this.y1),this.coordinateDefinition===0){if(this.xAxis.isLogarithmic()){const m=Math.log(this.maxX/this.minX)/(s-1);this.minX*=Math.exp(m/-2),this.maxX*=Math.exp(m/2)}else{const m=(this.maxX-this.minX)/(s-1);this.minX-=m/2,this.maxX+=m/2}if(this.yAxis.isLogarithmic()){const m=Math.log(this.maxY/this.minY)/(d-1);this.minY*=Math.exp(m/-2),this.maxY*=Math.exp(m/2)}else{const m=(this.maxY-this.minY)/(d-1);this.minY-=m/2,this.maxY+=m/2}}}updateMaxMin(){if(super.updateMaxMin(),this.updateMaxMinXY(),!this.data)return;const s=this.data.flat().filter(d=>!isNaN(d));this.minValue=minValueOfArray(s),this.maxValue=maxValueOfArray(s)}updateAxisMaxMin(){super.updateAxisMaxMin();const s=this.colorAxis;s&&(s.include(this.minValue),s.include(this.maxValue))}async renderLabels(s,d){if(!this.data)return;const m=this.data.length,f=this.data[0].length,g=d.height/f*this.labelFontSize,x=this.x0,w=this.x1,C=this.y0,A=this.y1,_=PlotElementExtensions.orientate,M=PlotElementExtensions.transform,P=_(this,M(this,x,C)),E=_(this,M(this,w,A)),R=(E.x-P.x)/(m-1),B=(E.y-P.y)/(f-1),z=ColorAxisExtensions.getColor;for(let F=0;F<m;F++)for(let I=0;I<f;I++){const L=_(this,new ScreenPoint(P.x+F*R,P.y+I*B)),W=bi.getValue(this.data,F,I),G=z(this.colorAxis,W),q=OxyColorExtensions.toHsv(G)[2]>.6?OxyColors.Black:OxyColors.White,K=this.getLabel(W,F,I);await s.drawText(L,K,q,this.actualFont,g,500,0,HorizontalAlignment.Center,VerticalAlignment.Middle)}}getLabel(s,d,m){return this.labelStringFormatter(s,[])}static getValue(s,d,m){d=Math.max(d,0),m=Math.max(m,0);const f=Math.floor(d),g=f+1<s.length?f+1:f,x=Math.floor(m),w=x+1<s[0].length?x+1:x;if(d=Math.min(d,g),m=Math.min(m,w),d===f&&m===x)return s[f][x];if(d!==f&&m===x){if(isNaN(s[f][x])||isNaN(s[g][x]))return NaN;const C=d-f;return f!==g?s[f][x]*(1-C)+s[g][x]*C:s[f][x]}if(d===f&&m!==x){if(isNaN(s[f][x])||isNaN(s[f][w]))return NaN;const C=m-x;return x!==w?s[f][x]*(1-C)+s[f][w]*C:s[f][x]}else{if(isNaN(s[f][x])||isNaN(s[g][x])||isNaN(s[f][w])||isNaN(s[g][w]))return NaN;const C=d-f,A=m-x;let _,M;return f!==g?(_=s[f][x]*(1-C)+s[g][x]*C,M=s[f][w]*(1-C)+s[g][w]*C):(_=s[f][x],M=s[f][w]),x!==w?_*(1-A)+M*A:_}}isPointInRange(s){return this.updateMaxMinXY(),s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}async updateImage(){if(!this.data)return;const s=this.xAxis.transform(this.x0)>this.xAxis.transform(this.x1),d=this.yAxis.transform(this.y0)>this.yAxis.transform(this.y1),m=PlotElementExtensions.isTransposed(this),f=this.data.length,g=this.data[0].length,x=m?new TwoDimensionalArray(g,f):new TwoDimensionalArray(f,g),w=ColorAxisExtensions.getColor;for(let C=0;C<f;C++){const A=s?f-1-C:C;for(let _=0;_<g;_++){const M=d?g-1-_:_,P=w(this.colorAxis,this.data[A][M]);m?x.set(_,C,P):x.set(C,_,P)}}this.image=await OxyImage.create(x,ImageFormat.Png)}};D(se,"DefaultTrackerFormatString",a=>`${a.title}
${a.xTitle}: ${a.xValue}
${a.yTitle}: ${a.yValue}
${a.colorAxisTitle}: ${a.value}`),D(se,"DefaultColorAxisTitle","Value");let HeatMapSeries=se;function calculateHashcode(a){return hashCode(a.flat())}const Fe=class{constructor(s,d,m,f,g){D(this,"a"),D(this,"b"),D(this,"value"),typeof s=="number"?(this.a=new DataPoint(s,m),this.b=new DataPoint(d,f),this.value=g):(this.a=s,this.b=d,this.value=m)}contains(s){return s.x<=this.b.x&&s.x>=this.a.x&&s.y<=this.b.y&&s.y>=this.a.y||s.x<=this.a.x&&s.x>=this.b.x&&s.y<=this.a.y&&s.y>=this.b.y}equals(s){return this.a.equals(s.a)&&this.b.equals(s.b)&&this.value===s.value}toString(){return`${this.a} ${this.b} ${this.value}`}isDefined(){return this.a.isDefined()&&this.b.isDefined()&&!isNaN(this.value)}};D(Fe,"Undefined",new Fe(DataPoint.Undefined,DataPoint.Undefined,Number.NaN));let RectangleItem=Fe;const fe=class Li extends XYAxisSeries{constructor(s){super(s),D(this,"_actualItems",[]),D(this,"_minValue",0),D(this,"_maxValue",0),D(this,"_colorAxis"),D(this,"colorAxisKey"),D(this,"labelStringFormatter",d=>d.toFixed(2)),D(this,"labelFontSize"),D(this,"mapping"),D(this,"items",[]),this.trackerStringFormatter=Li.DefaultTrackerFormatString,this.labelFontSize=0,s&&Object.assign(this,removeUndef(s))}get minValue(){return this._minValue}get maxValue(){return this._maxValue}get colorAxis(){return this._colorAxis}set colorAxis(s){this._colorAxis=s}get actualItems(){return this.itemsSource?this._actualItems:this.items}async render(s){this.verifyAxes(),await this.renderRectangles(s,this.actualItems)}updateData(){this.itemsSource&&this.updateActualItems()}getItem(s){const d=this.actualItems;return!this.itemsSource&&d&&s<d.length?d[s]:super.getItem(s)}clearActualItems(){this._actualItems.length=0}updateActualItems(){if(this.clearActualItems(),!(!this.itemsSource||this.itemsSource.length==0)){for(const s of this.itemsSource)if(s){if(s instanceof RectangleItem){this._actualItems.push(s);continue}if(this.mapping){this._actualItems.push(this.mapping(s));continue}throw new Error("Invalid itemsSource")}}}async renderRectangles(s,d){const m=RenderingExtensions.getActualEdgeRenderingMode(this.edgeRenderingMode,EdgeRenderingMode.PreferSharpness),f=PlotElementExtensions.transform;for(const g of d){const x=ColorAxisExtensions.getColor(this.colorAxis,g.value),w=f(this,g.a.x,g.a.y),C=f(this,g.b.x,g.b.y),A=OxyRect.fromScreenPoints(w,C);await s.drawRectangle(A,x,OxyColors.Undefined,0,m),this.labelFontSize>0&&await s.drawText(A.center,this.labelStringFormatter(g.value,[]),this.actualTextColor,this.actualFont,this.labelFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Middle)}}getNearestPoint(s,d){const m=this.inverseTransform(s);if(!this.isPointInRange(m)||!this.actualItems)return;const f=this.colorAxis,g=(f==null?void 0:f.title)??Li.DefaultColorAxisTitle;for(const x of this.actualItems)if(x.contains(m)){const w=this.formatDefaultTrackerString(x,m,C=>{C.colorAxisTitle=g,C.value=x.value});return new TrackerHitResult({series:this,dataPoint:m,position:s,item:null,index:-1,text:w})}}ensureAxes(){super.ensureAxes(),this.colorAxis=this.colorAxisKey?this.plotModel.getAxis(this.colorAxisKey):this.plotModel.defaultColorAxis}updateMaxMinXY(){if(this.actualItems&&this.actualItems.length>0){const s=minValueOfArray(this.actualItems.map(A=>A.a.x)),d=minValueOfArray(this.actualItems.map(A=>A.b.x)),m=maxValueOfArray(this.actualItems.map(A=>A.a.x)),f=maxValueOfArray(this.actualItems.map(A=>A.b.x)),g=minValueOfArray(this.actualItems.map(A=>A.a.y)),x=minValueOfArray(this.actualItems.map(A=>A.b.y)),w=maxValueOfArray(this.actualItems.map(A=>A.a.y)),C=maxValueOfArray(this.actualItems.map(A=>A.b.y));this.minX=Math.min(s,d),this.maxX=Math.max(m,f),this.minY=Math.min(g,x),this.maxY=Math.max(w,C)}}updateMaxMin(){super.updateMaxMin();const s=[];if(pushMany(s,this.actualItems.map(d=>d.a)),pushMany(s,this.actualItems.map(d=>d.b)),this.internalUpdateMaxMin(s),this.updateMaxMinXY(),this.actualItems&&this.actualItems.length>0){const d=this.actualItems.map(m=>m.value);this._minValue=minValueOfArray(d),this._maxValue=minValueOfArray(d)}}updateAxisMaxMin(){super.updateAxisMaxMin();const s=this.colorAxis;s&&(s.include(this.minValue),s.include(this.maxValue))}isPointInRange(s){return this.updateMaxMinXY(),s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}};D(fe,"DefaultTrackerFormatString",a=>`${a.title}
${a.xTitle}: ${a.xValue}
${a.yTitle}: ${a.yValue}
${a.colorAxisTitle}: ${a.value}`),D(fe,"DefaultColorAxisTitle","Value");let RectangleSeries=fe;class ThreeColorLineSeries extends LineSeries{constructor(s){super(s),D(this,"defaultColorLo",OxyColors.Undefined),D(this,"defaultColorHi",OxyColors.Undefined),D(this,"colorLo"),D(this,"colorHi"),D(this,"limitHi"),D(this,"limitLo"),D(this,"dashesHi"),D(this,"dashesLo"),D(this,"lineStyleHi"),D(this,"lineStyleLo"),this.limitLo=-5,this.colorLo=OxyColor.fromRgb(0,0,255),this.lineStyleLo=LineStyle.Solid,this.limitHi=5,this.colorHi=OxyColor.fromRgb(255,0,0),this.lineStyleHi=LineStyle.Solid,s&&Object.assign(this,removeUndef(s))}get actualColorLo(){return this.colorLo.getActualColor(this.defaultColorLo)}get actualColorHi(){return this.colorHi.getActualColor(this.defaultColorHi)}get actualLineStyleHi(){return this.lineStyleHi!==LineStyle.Automatic?this.lineStyleHi:LineStyle.Solid}get actualLineStyleLo(){return this.lineStyleLo!==LineStyle.Automatic?this.lineStyleLo:LineStyle.Solid}get actualDashArrayHi(){return this.dashesHi??LineStyleHelper.getDashArray(this.actualLineStyleHi)}get actualDashArrayLo(){return this.dashesLo??LineStyleHelper.getDashArray(this.actualLineStyleLo)}setDefaultValues(){super.setDefaultValues(),this.colorLo.isAutomatic()&&(this.defaultColorLo=this.plotModel.getDefaultColor()),this.lineStyleLo===LineStyle.Automatic&&(this.lineStyleLo=this.plotModel.getDefaultLineStyle()),this.colorHi.isAutomatic()&&(this.defaultColorHi=this.plotModel.getDefaultColor()),this.lineStyleHi===LineStyle.Automatic&&(this.lineStyleHi=this.plotModel.getDefaultLineStyle())}async renderLine(s,d){const m=this.getClippingRect(),f=this.inverseTransform(m.bottomLeft),g=this.inverseTransform(m.topRight),x=PlotElementExtensions.transform;let w=x(this,f.x,Math.min(f.y,g.y)),C=x(this,g.x,this.limitLo);const A=OxyRect.fromScreenPoints(w,C).clip(m);w=x(this,f.x,this.limitLo),C=x(this,g.x,this.limitHi);const _=OxyRect.fromScreenPoints(w,C).clip(m);w=x(this,f.x,Math.max(f.y,g.y)),C=x(this,g.x,this.limitHi);const M=OxyRect.fromScreenPoints(w,C).clip(m);if(this.strokeThickness<=0||this.actualLineStyle===LineStyle.None)return;const P=async R=>{await RenderingExtensions.drawReducedLine(s,d,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(R),this.strokeThickness,this.edgeRenderingMode,this.actualDashArray,this.lineJoin)};let E=RenderingExtensions.autoResetClip(s,_);await P(this.actualColor),E.dispose(),E=RenderingExtensions.autoResetClip(s,A),await P(this.actualColorLo),E.dispose(),E=RenderingExtensions.autoResetClip(s,M),await P(this.actualColorHi),E.dispose()}}class TwoColorAreaSeries extends AreaSeries{constructor(s){super(s),D(this,"defaultColor2",OxyColors.Undefined),D(this,"abovePoints",[]),D(this,"belowPoints",[]),D(this,"markerStartIndex",0),D(this,"fill2"),D(this,"dashes2"),D(this,"lineStyle2"),D(this,"markerFill2"),D(this,"markerStroke2"),D(this,"limit",0),this.color2=OxyColor.fromRgb(0,0,255),this.fill=OxyColors.Automatic,this.fill2=OxyColors.Automatic,this.markerFill2=OxyColors.Automatic,this.markerStroke2=OxyColors.Automatic,this.lineStyle2=LineStyle.Solid,s&&Object.assign(this,removeUndef(s))}get actualFill2(){return this.fill2.getActualColor(OxyColor.fromAColor(100,this.actualColor2))}get actualColor2(){return this.color2.getActualColor(this.defaultColor2)}get actualLineStyle2(){return this.lineStyle2!==LineStyle.Automatic?this.lineStyle2:LineStyle.Solid}get actualDashArray2(){return this.dashes2??LineStyleHelper.getDashArray(this.actualLineStyle2)}getNearestPoint(s,d){let m;return d&&this.canTrackerInterpolatePoints?m=this.getNearestInterpolatedPointInternal(this.actualPoints,0,s):m=this.getNearestPointInternal(this.actualPoints,0,s),m&&(m.text=this.formatDefaultTrackerString(m.item,m.dataPoint)),m}async render(s){const d=this.xAxis.clipMinimum,m=this.xAxis.clipMaximum,f=w=>w.x;this.windowStartIndex=this.updateWindowStartIndex(this.abovePoints,f,d,this.windowStartIndex),this.windowStartIndex2=this.updateWindowStartIndex(this.belowPoints,f,d,this.windowStartIndex2);const g=this.minimumSegmentLength*this.minimumSegmentLength,x={points:this.abovePoints,windowStartIndex:this.windowStartIndex,xMax:m,renderContext:s,minDistSquared:g,reverse:!1,color:this.actualColor,fill:this.actualFill,markerFill:this.actualMarkerFill,markerStroke:this.markerStroke,dashArray:this.actualDashArray,baseline:this.limit};if(await this.renderChunkedPoints(x),x.points=this.belowPoints,x.windowStartIndex=this.windowStartIndex2,x.reverse=this.reverse2,x.color=this.actualColor2,x.fill=this.actualFill2,x.markerFill=this.markerFill2,x.markerStroke=this.markerStroke2,x.dashArray=this.actualDashArray2,this.isPoints2Defined&&(x.baseline=this.constantY2),await this.renderChunkedPoints(x),!this.isPoints2Defined){const w=[this.markerSize],C=this.limit,A=this.actualPoints,_=[],M=[];this.markerStartIndex=this.updateWindowStartIndex(A,f,d,this.markerStartIndex);let P=0;for(let E=this.markerStartIndex;E<A.length;E++){const R=A[E];if((R.y>=C?_:M).push(this.transform(R)),P+=R.x>m?1:0,P>1)break}await RenderingExtensions.drawMarkers(s,_,this.markerType,void 0,w,this.actualMarkerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,1),await RenderingExtensions.drawMarkers(s,M,this.markerType,void 0,w,this.markerFill2,this.markerStroke2,this.markerStrokeThickness,this.edgeRenderingMode,1)}}setDefaultValues(){super.setDefaultValues(),this.color2.isAutomatic()&&(this.defaultColor2=this.plotModel.getDefaultColor()),this.lineStyle2===LineStyle.Automatic&&(this.lineStyle2=this.plotModel.getDefaultLineStyle())}updateData(){super.updateData(),this.isPoints2Defined?(this.abovePoints=this.actualPoints,this.belowPoints=this.actualPoints2):this.splitPoints(this.actualPoints)}async renderScreenPoints(s,d){const m=await super.renderScreenPoints(s,d),f=s,g=[...this.getConstantScreenPoints2(m,f.baseline),...m],x=s.renderContext;if(await RenderingExtensions.drawReducedPolygon(x,g,s.minDistSquared,this.getSelectableFillColor(f.fill),OxyColors.Undefined,0,this.edgeRenderingMode),this.isPoints2Defined){const w=[this.markerSize];await RenderingExtensions.drawMarkers(x,m,this.markerType,void 0,w,f.markerFill,f.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode,1)}return m}splitPoints(s){const d=new DataPoint(Number.NaN,Number.NaN),m=this.limit;this.abovePoints=new Array,this.belowPoints=new Array;let f=!1,g=null;for(const x of s){const w=x.y>=m;if(g&&w!==f){const C=new DataPoint(this.getInterpolatedX(g,x,m),m);this.abovePoints.push(w?d:C),this.abovePoints.push(w?C:d),this.belowPoints.push(w?C:d),this.belowPoints.push(w?d:C)}(w?this.abovePoints:this.belowPoints).push(x),g=x,f=w}}getConstantScreenPoints2(s,d){const m=[];if(isNaN(d)||s.length<=0)return m;let f=this.inverseTransform(s[0]);f=new DataPoint(f.x,d),m.push(this.transform(f));let g=this.inverseTransform(s[s.length-1]);return g=new DataPoint(g.x,d),m.push(this.transform(g)),this.reverse2&&m.reverse(),m}getInterpolatedX(s,d,m){return(m-s.y)/(d.y-s.y)*(d.x-s.x)+s.x}}class TwoColorLineSeries extends LineSeries{constructor(s){super(s),D(this,"defaultColor2",OxyColors.Undefined),D(this,"color2"),D(this,"limit"),this.limit=0,this.color2=OxyColor.fromRgb(0,0,255),s&&Object.assign(this,removeUndef(s))}get actualColor2(){return this.color2.getActualColor(this.defaultColor2)}setDefaultValues(){super.setDefaultValues(),this.color2.isAutomatic()&&(this.defaultColor2=this.plotModel.getDefaultColor())}async renderLine(s,d){const m=this.getClippingRect(),f=this.inverseTransform(m.bottomLeft),g=this.inverseTransform(m.topRight),x=PlotElementExtensions.transform;let w=x(this,f.x,Math.min(f.y,g.y));const C=x(this,g.x,this.limit),A=OxyRect.fromScreenPoints(w,C).clip(m);w=x(this,f.x,Math.max(f.y,g.y));const _=OxyRect.fromScreenPoints(w,C).clip(m);if(this.strokeThickness<=0||this.actualLineStyle===LineStyle.None)return;const M=async E=>{await RenderingExtensions.drawReducedLine(s,d,this.minimumSegmentLength*this.minimumSegmentLength,this.getSelectableColor(E),this.strokeThickness,this.edgeRenderingMode,this.actualDashArray,this.lineJoin)};let P=RenderingExtensions.autoResetClip(s,A);await M(this.actualColor2),P.dispose(),P=RenderingExtensions.autoResetClip(s,_),await M(this.actualColor),P.dispose()}}var xmlbuilder2_min={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal$1,function(){return function(d){var m={};function f(g){if(m[g])return m[g].exports;var x=m[g]={i:g,l:!1,exports:{}};return d[g].call(x.exports,x,x.exports,f),x.l=!0,x.exports}return f.m=d,f.c=m,f.d=function(g,x,w){f.o(g,x)||Object.defineProperty(g,x,{enumerable:!0,get:w})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,x){if(1&x&&(g=f(g)),8&x||4&x&&typeof g=="object"&&g&&g.__esModule)return g;var w=Object.create(null);if(f.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:g}),2&x&&typeof g!="string")for(var C in g)f.d(w,C,(function(A){return g[A]}).bind(null,C));return w},f.n=function(g){var x=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(x,"a",x),x},f.o=function(g,x){return Object.prototype.hasOwnProperty.call(g,x)},f.p="",f(f.s=184)}([function(d,m,f){function g(x){for(var w in x)m.hasOwnProperty(w)||(m[w]=x[w])}Object.defineProperty(m,"__esModule",{value:!0}),g(f(240)),g(f(251)),g(f(175)),g(f(107)),g(f(29)),g(f(73)),g(f(106)),g(f(30)),g(f(252)),g(f(52)),g(f(97)),g(f(253)),g(f(37)),g(f(51)),g(f(173)),g(f(176)),g(f(172)),g(f(108)),g(f(254)),g(f(255)),g(f(256)),g(f(72)),g(f(177)),g(f(105)),g(f(17)),g(f(257)),g(f(12)),g(f(174))},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),function(g){g[g.Before=0]="Before",g[g.Equal=1]="Equal",g[g.After=2]="After"}(m.BoundaryPosition||(m.BoundaryPosition={})),function(g){g[g.None=0]="None",g[g.Capturing=1]="Capturing",g[g.AtTarget=2]="AtTarget",g[g.Bubbling=3]="Bubbling"}(m.EventPhase||(m.EventPhase={})),function(g){g[g.Element=1]="Element",g[g.Attribute=2]="Attribute",g[g.Text=3]="Text",g[g.CData=4]="CData",g[g.EntityReference=5]="EntityReference",g[g.Entity=6]="Entity",g[g.ProcessingInstruction=7]="ProcessingInstruction",g[g.Comment=8]="Comment",g[g.Document=9]="Document",g[g.DocumentType=10]="DocumentType",g[g.DocumentFragment=11]="DocumentFragment",g[g.Notation=12]="Notation"}(m.NodeType||(m.NodeType={})),function(g){g[g.Disconnected=1]="Disconnected",g[g.Preceding=2]="Preceding",g[g.Following=4]="Following",g[g.Contains=8]="Contains",g[g.ContainedBy=16]="ContainedBy",g[g.ImplementationSpecific=32]="ImplementationSpecific"}(m.Position||(m.Position={})),function(g){g[g.Accept=1]="Accept",g[g.Reject=2]="Reject",g[g.Skip=3]="Skip"}(m.FilterResult||(m.FilterResult={})),function(g){g[g.All=4294967295]="All",g[g.Element=1]="Element",g[g.Attribute=2]="Attribute",g[g.Text=4]="Text",g[g.CDataSection=8]="CDataSection",g[g.EntityReference=16]="EntityReference",g[g.Entity=32]="Entity",g[g.ProcessingInstruction=64]="ProcessingInstruction",g[g.Comment=128]="Comment",g[g.Document=256]="Document",g[g.DocumentType=512]="DocumentType",g[g.DocumentFragment=1024]="DocumentFragment",g[g.Notation=2048]="Notation"}(m.WhatToShow||(m.WhatToShow={})),function(g){g[g.StartToStart=0]="StartToStart",g[g.StartToEnd=1]="StartToEnd",g[g.EndToEnd=2]="EndToEnd",g[g.EndToStart=3]="EndToStart"}(m.HowToCompare||(m.HowToCompare={}))},function(d,m,f){var g=this&&this.__values||function(L){var W=typeof Symbol=="function"&&Symbol.iterator,G=W&&L[W],q=0;if(G)return G.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&q>=L.length&&(L=void 0),{value:L&&L[q++],done:!L}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(212);m.FixedSizeSet=x.FixedSizeSet;var w=f(213);m.ObjectCache=w.ObjectCache;var C=f(214);m.CompareCache=C.CompareCache;var A=f(215);m.Lazy=A.Lazy;var _=f(216);function M(L,W,G){if(F(L))L.forEach(function(K,Z){return W.call(G,Z,K)});else for(var q in L)L.hasOwnProperty(q)&&W.call(G,q,L[q])}function P(L){var W,G;if(E(L))return L;if(B(L)){var q=[];try{for(var K=g(L),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;q.push(P(J))}}catch(me){W={error:me}}finally{try{Z&&!Z.done&&(G=K.return)&&G.call(K)}finally{if(W)throw W.error}}return q}if(R(L)){q={};for(var te in L)if(L.hasOwnProperty(te)){var Q=L[te];q[te]=P(Q)}return q}return L}function E(L){return!!L&&Object.prototype.toString.call(L)==="[object Function]"}function R(L){var W=typeof L;return!!L&&(W==="function"||W==="object")}function B(L){return Array.isArray(L)}function z(L){return L instanceof Set}function F(L){return L instanceof Map}function I(L){if(R(L)){var W=Object.getPrototypeOf(L),G=W.constructor;return W&&G&&typeof G=="function"&&G instanceof G&&Function.prototype.toString.call(G)===Function.prototype.toString.call(Object)}return!1}m.StringWalker=_.StringWalker,m.applyMixin=function(L,W){for(var G=[],q=2;q<arguments.length;q++)G[q-2]=arguments[q];Object.getOwnPropertyNames(W.prototype).forEach(function(K){if(K!=="constructor"){if(G.indexOf(K)!==-1){var Z=Object.getOwnPropertyDescriptor(L.prototype,K);Z&&Object.defineProperty(L.prototype,"_"+K,Z)}var J=Object.getOwnPropertyDescriptor(W.prototype,K);J&&Object.defineProperty(L.prototype,K,J)}})},m.applyDefaults=function L(W,G,q){q===void 0&&(q=!1);var K=P(W||{});return M(G,function(Z,J){I(J)?K[Z]=L(K[Z],J,q):(q||K[Z]===void 0)&&(K[Z]=J)}),K},m.forEachArray=function(L,W,G){L.forEach(W,G)},m.forEachObject=M,m.arrayLength=function(L){return z(L)?L.size:L.length},m.objectLength=function(L){return F(L)?L.size:Object.keys(L).length},m.getObjectValue=function(L,W){return F(L)?L.get(W):L[W]},m.removeObjectValue=function(L,W){F(L)?L.delete(W):delete L[W]},m.clone=P,m.isBoolean=function(L){return typeof L=="boolean"},m.isNumber=function(L){return typeof L=="number"},m.isString=function(L){return typeof L=="string"},m.isFunction=E,m.isObject=R,m.isArray=B,m.isSet=z,m.isMap=F,m.isEmpty=function(L){if(B(L))return!L.length;if(z(L)||F(L))return!L.size;if(R(L)){for(var W in L)if(L.hasOwnProperty(W))return!1;return!0}return!1},m.isPlainObject=I,m.isIterable=function(L){return L&&typeof L[Symbol.iterator]=="function"},m.getValue=function(L){return E(L.valueOf)?L.valueOf():L},m.utf8Encode=function(L){for(var W=new Uint8Array(4*L.length),G=0,q=0;q<L.length;q++){var K=L.charCodeAt(q);if(K<128)W[G++]=K;else{if(K<2048)W[G++]=K>>6|192;else{if(K>55295&&K<56320){if(++q>=L.length)throw new Error("Incomplete surrogate pair.");var Z=L.charCodeAt(q);if(Z<56320||Z>57343)throw new Error("Invalid surrogate character.");K=65536+((1023&K)<<10)+(1023&Z),W[G++]=K>>18|240,W[G++]=K>>12&63|128}else W[G++]=K>>12|224;W[G++]=K>>6&63|128}W[G++]=63&K|128}}return W.subarray(0,G)},m.utf8Decode=function(L){for(var W="",G=0;G<L.length;){var q=L[G++];if(q>127)if(q>191&&q<224){if(G>=L.length)throw new Error("Incomplete 2-byte sequence.");q=(31&q)<<6|63&L[G++]}else if(q>223&&q<240){if(G+1>=L.length)throw new Error("Incomplete 3-byte sequence.");q=(15&q)<<12|(63&L[G++])<<6|63&L[G++]}else{if(!(q>239&&q<248))throw new Error("Unknown multi-byte start.");if(G+2>=L.length)throw new Error("Incomplete 4-byte sequence.");q=(7&q)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++]}if(q<=65535)W+=String.fromCharCode(q);else{if(!(q<=1114111))throw new Error("Code point exceeds UTF-16 limit.");q-=65536,W+=String.fromCharCode(q>>10|55296),W+=String.fromCharCode(1023&q|56320)}}return W}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(241);m.Cast=g.Cast;var x=f(150);m.Guard=x.Guard;var w=f(242);m.EmptySet=w.EmptySet},function(d,m,f){var g=f(11),x=f(55).f,w=f(21),C=f(25),A=f(80),_=f(119),M=f(123);d.exports=function(P,E){var R,B,z,F,I,L=P.target,W=P.global,G=P.stat;if(R=W?g:G?g[L]||A(L,{}):(g[L]||{}).prototype)for(B in E){if(F=E[B],z=P.noTargetGet?(I=x(R,B))&&I.value:R[B],!M(W?B:L+(G?".":"#")+B,P.forced)&&z!==void 0){if(typeof F==typeof z)continue;_(F,z)}(P.sham||z&&z.sham)&&w(F,"sham",!0),C(R,B,F,P)}}},function(d,m,f){var g=f(11),x=f(81),w=f(14),C=f(58),A=f(86),_=f(124),M=x("wks"),P=g.Symbol,E=_?P:P&&P.withoutSetter||C;d.exports=function(R){return w(M,R)||(A&&w(P,R)?M[R]=P[R]:M[R]=E("Symbol."+R)),M[R]}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(2),x=f(29),w=function(){function C(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new g.CompareCache,this._rangeList=new g.FixedSizeSet}return C.prototype.setFeatures=function(A){if(A===void 0&&(A=!0),g.isObject(A))for(var _ in A)this._features[_]=A[_]||!1;else for(var _ in this._features)this._features[_]=A},Object.defineProperty(C.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"window",{get:function(){return this._window===null&&(this._window=x.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(C,"instance",{get:function(){return C._instance||(C._instance=new C),C._instance},enumerable:!0,configurable:!0}),C}();m.dom=w.instance},function(d,m,f){var g=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var L={};if(I!=null)for(var W in I)Object.hasOwnProperty.call(I,W)&&(L[W]=I[W]);return L.default=I,L};Object.defineProperty(m,"__esModule",{value:!0});var x=g(f(228));m.base64=x;var w=g(f(146));m.byte=w;var C=g(f(147));m.byteSequence=C;var A=g(f(96));m.codePoint=A;var _=g(f(232));m.json=_;var M=g(f(233));m.list=M;var P=g(f(234));m.map=P;var E=g(f(235));m.namespace=E;var R=g(f(236));m.queue=R;var B=g(f(237));m.set=B;var z=g(f(238));m.stack=z;var F=g(f(239));m.string=F},function(d,m){d.exports=function(f){try{return!!f()}catch{return!0}}},function(d,m,f){var g,x=this&&this.__extends||(g=function(je,Ke){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Je,at){Je.__proto__=at}||function(Je,at){for(var nt in at)at.hasOwnProperty(nt)&&(Je[nt]=at[nt])})(je,Ke)},function(je,Ke){function Je(){this.constructor=je}g(je,Ke),je.prototype=Ke===null?Object.create(Ke):(Je.prototype=Ke.prototype,new Je)});Object.defineProperty(m,"__esModule",{value:!0});var w=function(je){function Ke(Je,at){at===void 0&&(at="");var nt=je.call(this,at)||this;return nt.name=Je,nt}return x(Ke,je),Ke}(Error);m.DOMException=w;var C=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"DOMStringSizeError",Je)||this}return x(Ke,je),Ke}(w);m.DOMStringSizeError=C;var A=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"WrongDocumentError","The object is in the wrong document. "+Je)||this}return x(Ke,je),Ke}(w);m.WrongDocumentError=A;var _=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NoDataAllowedError",Je)||this}return x(Ke,je),Ke}(w);m.NoDataAllowedError=_;var M=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NoModificationAllowedError","The object can not be modified. "+Je)||this}return x(Ke,je),Ke}(w);m.NoModificationAllowedError=M;var P=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NotSupportedError","The operation is not supported. "+Je)||this}return x(Ke,je),Ke}(w);m.NotSupportedError=P;var E=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InUseAttributeError",Je)||this}return x(Ke,je),Ke}(w);m.InUseAttributeError=E;var R=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InvalidStateError","The object is in an invalid state. "+Je)||this}return x(Ke,je),Ke}(w);m.InvalidStateError=R;var B=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InvalidModificationError","The object can not be modified in this way. "+Je)||this}return x(Ke,je),Ke}(w);m.InvalidModificationError=B;var z=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+Je)||this}return x(Ke,je),Ke}(w);m.NamespaceError=z;var F=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InvalidAccessError","The object does not support the operation or argument. "+Je)||this}return x(Ke,je),Ke}(w);m.InvalidAccessError=F;var I=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"ValidationError",Je)||this}return x(Ke,je),Ke}(w);m.ValidationError=I;var L=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"TypeMismatchError",Je)||this}return x(Ke,je),Ke}(w);m.TypeMismatchError=L;var W=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"SecurityError","The operation is insecure. "+Je)||this}return x(Ke,je),Ke}(w);m.SecurityError=W;var G=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NetworkError","A network error occurred. "+Je)||this}return x(Ke,je),Ke}(w);m.NetworkError=G;var q=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"AbortError","The operation was aborted. "+Je)||this}return x(Ke,je),Ke}(w);m.AbortError=q;var K=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"URLMismatchError","The given URL does not match another URL. "+Je)||this}return x(Ke,je),Ke}(w);m.URLMismatchError=K;var Z=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"QuotaExceededError","The quota has been exceeded. "+Je)||this}return x(Ke,je),Ke}(w);m.QuotaExceededError=Z;var J=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"TimeoutError","The operation timed out. "+Je)||this}return x(Ke,je),Ke}(w);m.TimeoutError=J;var te=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+Je)||this}return x(Ke,je),Ke}(w);m.InvalidNodeTypeError=te;var Q=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"DataCloneError","The object can not be cloned. "+Je)||this}return x(Ke,je),Ke}(w);m.DataCloneError=Q;var me=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+Je)||this}return x(Ke,je),Ke}(w);m.NotImplementedError=me;var Xe=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+Je)||this}return x(Ke,je),Ke}(w);m.HierarchyRequestError=Xe;var Ve=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"NotFoundError","The object can not be found here. "+Je)||this}return x(Ke,je),Ke}(w);m.NotFoundError=Ve;var Ye=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"IndexSizeError","The index is not in the allowed range. "+Je)||this}return x(Ke,je),Ke}(w);m.IndexSizeError=Ye;var qe=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"SyntaxError","The string did not match the expected pattern. "+Je)||this}return x(Ke,je),Ke}(w);m.SyntaxError=qe;var et=function(je){function Ke(Je){return Je===void 0&&(Je=""),je.call(this,"InvalidCharacterError","The string contains invalid characters. "+Je)||this}return x(Ke,je),Ke}(w);m.InvalidCharacterError=et},function(d,m,f){var g=f(53),x=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],w=["scalar","sequence","mapping"];d.exports=function(C,A){var _,M;if(A=A||{},Object.keys(A).forEach(function(P){if(x.indexOf(P)===-1)throw new g('Unknown option "'+P+'" is met in definition of "'+C+'" YAML type.')}),this.tag=C,this.kind=A.kind||null,this.resolve=A.resolve||function(){return!0},this.construct=A.construct||function(P){return P},this.instanceOf=A.instanceOf||null,this.predicate=A.predicate||null,this.represent=A.represent||null,this.defaultStyle=A.defaultStyle||null,this.styleAliases=(_=A.styleAliases||null,M={},_!==null&&Object.keys(_).forEach(function(P){_[P].forEach(function(E){M[String(E)]=P})}),M),w.indexOf(this.kind)===-1)throw new g('Unknown kind "'+this.kind+'" is specified for "'+C+'" YAML type.')}},function(d,m,f){(function(g){var x=function(w){return w&&w.Math==Math&&w};d.exports=x(typeof globalThis=="object"&&globalThis)||x(typeof window=="object"&&window)||x(typeof self=="object"&&self)||x(typeof g=="object"&&g)||Function("return this")()}).call(this,f(78))},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.idl_defineConst=function(g,x,w){Object.defineProperty(g,x,{writable:!1,enumerable:!0,configurable:!1,value:w})}},function(d,m){d.exports=function(f){return typeof f=="object"?f!==null:typeof f=="function"}},function(d,m){var f={}.hasOwnProperty;d.exports=function(g,x){return f.call(g,x)}},function(d,m,f){var g=f(16),x=f(115),w=f(18),C=f(56),A=Object.defineProperty;m.f=g?A:function(_,M,P){if(w(_),M=C(M,!0),w(P),x)try{return A(_,M,P)}catch{}if("get"in P||"set"in P)throw TypeError("Accessors not supported");return"value"in P&&(_[M]=P.value),_}},function(d,m,f){var g=f(8);d.exports=!g(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(d,m,f){var g=this&&this.__values||function(L){var W=typeof Symbol=="function"&&Symbol.iterator,G=W&&L[W],q=0;if(G)return G.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&q>=L.length&&(L=void 0),{value:L&&L[q++],done:!L}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(3),w=f(1);function C(L,W,G){if(G===void 0&&(G=!1),G&&x.Guard.isElementNode(W)&&x.Guard.isShadowRoot(W.shadowRoot)&&W.shadowRoot._firstChild)return W.shadowRoot._firstChild;if(W._firstChild)return W._firstChild;if(W===L)return null;if(W._nextSibling)return W._nextSibling;for(var q=W._parent;q&&q!==L;){if(q._nextSibling)return q._nextSibling;q=q._parent}return null}function A(){var L;return(L={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},L}function _(L,W,G,q){W===void 0&&(W=!1),G===void 0&&(G=!1);for(var K=W?L:C(L,L,G);K&&q&&!q(K);)K=C(L,K,G);return K}function M(L,W,G,q,K){q===void 0&&(q=!1);for(var Z=C(L,W,q);Z&&K&&!K(Z);)Z=C(L,Z,q);return Z}function P(L,W,G,q){var K;return W===void 0&&(W=!1),G===void 0&&(G=!1),W||L._children.size!==0?((K={})[Symbol.iterator]=function(){var Z=W?L:C(L,L,G);return{next:function(){for(;Z&&q&&!q(Z);)Z=C(L,Z,G);if(Z===null)return{done:!0,value:null};var J={done:!1,value:Z};return Z=C(L,Z,G),J}}},K):A()}function E(L,W,G){W===void 0&&(W=!1);for(var q=W?L:L._parent;q&&G&&!G(q);)q=q._parent;return q}function R(L,W,G,q){for(var K=W._parent;K&&q&&!q(K);)K=K._parent;return K}function B(L){return x.Guard.isDocumentTypeNode(L)?0:x.Guard.isCharacterDataNode(L)?L._data.length:L._children.size}function z(L,W){if(W===void 0&&(W=!1),W){var G=z(L,!1);return x.Guard.isShadowRoot(G)?z(G._host,!0):G}return L._parent?z(L._parent):L}function F(L,W,G,q){G===void 0&&(G=!1),q===void 0&&(q=!1);for(var K=G?L:q&&x.Guard.isShadowRoot(L)?L._host:L._parent;K!==null;){if(K===W)return!0;K=q&&x.Guard.isShadowRoot(K)?K._host:K._parent}return!1}function I(L){for(var W=z(L),G=0,q=_(W);q!==null;){if(G++,q===L)return G;q=M(W,q)}return-1}m.tree_getFirstDescendantNode=_,m.tree_getNextDescendantNode=M,m.tree_getDescendantNodes=P,m.tree_getDescendantElements=function(L,W,G,q){var K;return W===void 0&&(W=!1),G===void 0&&(G=!1),W||L._children.size!==0?((K={})[Symbol.iterator]=function(){var Z=P(L,W,G,function(te){return x.Guard.isElementNode(te)})[Symbol.iterator](),J=Z.next().value;return{next:function(){for(;J&&q&&!q(J);)J=Z.next().value;if(J===null)return{done:!0,value:null};var te={done:!1,value:J};return J=Z.next().value,te}}},K):A()},m.tree_getSiblingNodes=function(L,W,G){var q;return W===void 0&&(W=!1),L._parent&&L._parent._children.size!==0?((q={})[Symbol.iterator]=function(){var K=L._parent?L._parent._firstChild:null;return{next:function(){for(;K&&(G&&!G(K)||!W&&K===L);)K=K._nextSibling;if(K===null)return{done:!0,value:null};var Z={done:!1,value:K};return K=K._nextSibling,Z}}},q):A()},m.tree_getFirstAncestorNode=E,m.tree_getNextAncestorNode=R,m.tree_getAncestorNodes=function(L,W,G){var q;return W===void 0&&(W=!1),W||L._parent?((q={})[Symbol.iterator]=function(){var K=E(L,W,G);return{next:function(){if(K===null)return{done:!0,value:null};var Z={done:!1,value:K};return K=R(0,K,W,G),Z}}},q):A()},m.tree_getCommonAncestor=function(L,W){if(L===W)return L._parent;for(var G=[],q=[],K=E(L,!0);K!==null;)G.push(K),K=R(0,K);for(var Z=E(W,!0);Z!==null;)q.push(Z),Z=R(0,Z);for(var J=G.length,te=q.length,Q=null,me=Math.min(J,te);me>0;me--){var Xe=G[--J];if(Xe!==q[--te])break;Q=Xe}return Q},m.tree_getFollowingNode=function(L,W){if(W._firstChild)return W._firstChild;if(W._nextSibling)return W._nextSibling;for(;;){var G=W._parent;if(G===null||G===L)return null;if(G._nextSibling)return G._nextSibling;W=G}},m.tree_getPrecedingNode=function(L,W){return W===L?null:W._previousSibling?(W=W._previousSibling)._lastChild?W._lastChild:W:W._parent},m.tree_isConstrained=function L(W){var G,q,K,Z,J,te;switch(W._nodeType){case w.NodeType.Document:var Q=!1,me=!1;try{for(var Xe=g(W._children),Ve=Xe.next();!Ve.done;Ve=Xe.next())switch(Ve.value._nodeType){case w.NodeType.ProcessingInstruction:case w.NodeType.Comment:break;case w.NodeType.DocumentType:if(Q||me)return!1;Q=!0;break;case w.NodeType.Element:if(me)return!1;me=!0;break;default:return!1}}catch(Ke){G={error:Ke}}finally{try{Ve&&!Ve.done&&(q=Xe.return)&&q.call(Xe)}finally{if(G)throw G.error}}break;case w.NodeType.DocumentFragment:case w.NodeType.Element:try{for(var Ye=g(W._children),qe=Ye.next();!qe.done;qe=Ye.next())switch(qe.value._nodeType){case w.NodeType.Element:case w.NodeType.Text:case w.NodeType.ProcessingInstruction:case w.NodeType.CData:case w.NodeType.Comment:break;default:return!1}}catch(Ke){K={error:Ke}}finally{try{qe&&!qe.done&&(Z=Ye.return)&&Z.call(Ye)}finally{if(K)throw K.error}}break;case w.NodeType.DocumentType:case w.NodeType.Text:case w.NodeType.ProcessingInstruction:case w.NodeType.CData:case w.NodeType.Comment:return!W.hasChildNodes()}try{for(var et=g(W._children),je=et.next();!je.done;je=et.next())if(!L(je.value))return!1}catch(Ke){J={error:Ke}}finally{try{je&&!je.done&&(te=et.return)&&te.call(et)}finally{if(J)throw J.error}}return!0},m.tree_nodeLength=B,m.tree_isEmpty=function(L){return B(L)===0},m.tree_rootNode=z,m.tree_isDescendantOf=function(L,W,G,q){G===void 0&&(G=!1),q===void 0&&(q=!1);for(var K=_(L,G,q);K!==null;){if(K===W)return!0;K=M(L,K,G,q)}return!1},m.tree_isAncestorOf=F,m.tree_isHostIncludingAncestorOf=function L(W,G,q){if(q===void 0&&(q=!1),F(W,G,q))return!0;var K=z(W);return!(!x.Guard.isDocumentFragmentNode(K)||K._host===null||!L(K._host,G,q))},m.tree_isSiblingOf=function(L,W,G){return G===void 0&&(G=!1),L!==W?L._parent!==null&&L._parent===W._parent:!!G},m.tree_isPreceding=function(L,W){var G=I(L),q=I(W);return G!==-1&&q!==-1&&z(L)===z(W)&&q<G},m.tree_isFollowing=function(L,W){var G=I(L),q=I(W);return G!==-1&&q!==-1&&z(L)===z(W)&&q>G},m.tree_isParentOf=function(L,W){return L._parent===W},m.tree_isChildOf=function(L,W){return W._parent===L},m.tree_previousSibling=function(L){return L._previousSibling},m.tree_nextSibling=function(L){return L._nextSibling},m.tree_firstChild=function(L){return L._firstChild},m.tree_lastChild=function(L){return L._lastChild},m.tree_treePosition=I,m.tree_index=function(L){for(var W=0;L._previousSibling!==null;)W++,L=L._previousSibling;return W},m.tree_retarget=function(L,W){for(;;){if(!L||!x.Guard.isNode(L))return L;var G=z(L);if(!x.Guard.isShadowRoot(G)||W&&x.Guard.isNode(W)&&F(G,W,!0,!0))return L;L=G.host}}},function(d,m,f){var g=f(13);d.exports=function(x){if(!g(x))throw TypeError(String(x)+" is not an object");return x}},function(d,m,f){var g=f(24),x=f(130),w=f(49),C=f(43),A=f(88),_=C.set,M=C.getterFor("Array Iterator");d.exports=A(Array,"Array",function(P,E){_(this,{type:"Array Iterator",target:g(P),index:0,kind:E})},function(){var P=M(this),E=P.target,R=P.kind,B=P.index++;return!E||B>=E.length?(P.target=void 0,{value:void 0,done:!0}):R=="keys"?{value:B,done:!1}:R=="values"?{value:E[B],done:!1}:{value:[B,E[B]],done:!1}},"values"),w.Arguments=w.Array,x("keys"),x("values"),x("entries")},function(d,m,f){var g=f(90),x=f(25),w=f(202);g||x(Object.prototype,"toString",w,{unsafe:!0})},function(d,m,f){var g=f(16),x=f(15),w=f(40);d.exports=g?function(C,A,_){return x.f(C,A,w(1,_))}:function(C,A,_){return C[A]=_,C}},function(d,m,f){var g=f(137).charAt,x=f(43),w=f(88),C=x.set,A=x.getterFor("String Iterator");w(String,"String",function(_){C(this,{type:"String Iterator",string:String(_),index:0})},function(){var _,M=A(this),P=M.string,E=M.index;return E>=P.length?{value:void 0,done:!0}:(_=g(P,E),M.index+=_.length,{value:_,done:!1})})},function(d,m,f){var g=f(11),x=f(203),w=f(19),C=f(21),A=f(5),_=A("iterator"),M=A("toStringTag"),P=w.values;for(var E in x){var R=g[E],B=R&&R.prototype;if(B){if(B[_]!==P)try{C(B,_,P)}catch{B[_]=P}if(B[M]||C(B,M,E),x[E]){for(var z in w)if(B[z]!==w[z])try{C(B,z,w[z])}catch{B[z]=w[z]}}}}},function(d,m,f){var g=f(41),x=f(35);d.exports=function(w){return g(x(w))}},function(d,m,f){var g=f(11),x=f(21),w=f(14),C=f(80),A=f(117),_=f(43),M=_.get,P=_.enforce,E=String(String).split("String");(d.exports=function(R,B,z,F){var I=!!F&&!!F.unsafe,L=!!F&&!!F.enumerable,W=!!F&&!!F.noTargetGet;typeof z=="function"&&(typeof B!="string"||w(z,"name")||x(z,"name",B),P(z).source=E.join(typeof B=="string"?B:"")),R!==g?(I?!W&&R[B]&&(L=!0):delete R[B],L?R[B]=z:x(R,B,z)):L?R[B]=z:C(B,z)})(Function.prototype,"toString",function(){return typeof this=="function"&&M(this).source||A(this)})},function(d,m,f){var g=f(47),x=Math.min;d.exports=function(w){return w>0?x(g(w),9007199254740991):0}},function(d,m,f){var g=f(35);d.exports=function(x){return Object(g(x))}},function(d,m,f){var g=f(16),x=f(8),w=f(14),C=Object.defineProperty,A={},_=function(M){throw M};d.exports=function(M,P){if(w(A,M))return A[M];P||(P={});var E=[][M],R=!!w(P,"ACCESSORS")&&P.ACCESSORS,B=w(P,0)?P[0]:_,z=w(P,1)?P[1]:void 0;return A[M]=!!E&&!x(function(){if(R&&!g)return!0;var F={length:-1};R?C(F,1,{enumerable:!0,get:_}):F[1]=1,E.call(F,B,z)})}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(148),x=f(149),w=f(151),C=f(98),A=f(153),_=f(154),M=f(155),P=f(99),E=f(100),R=f(156),B=f(157),z=f(101),F=f(158),I=f(159),L=f(160),W=f(161),G=f(162),q=f(163),K=f(164),Z=f(165),J=f(166),te=f(167),Q=f(168),me=f(169),Xe=f(170);m.create_domImplementation=function(Ve){return g.DOMImplementationImpl._create(Ve)},m.create_window=function(){return x.WindowImpl._create()},m.create_xmlDocument=function(){return new w.XMLDocumentImpl},m.create_document=function(){return new C.DocumentImpl},m.create_abortController=function(){return new A.AbortControllerImpl},m.create_abortSignal=function(){return _.AbortSignalImpl._create()},m.create_documentType=function(Ve,Ye,qe,et){return M.DocumentTypeImpl._create(Ve,Ye,qe,et)},m.create_element=function(Ve,Ye,qe,et){return P.ElementImpl._create(Ve,Ye,qe,et)},m.create_htmlElement=function(Ve,Ye,qe,et){return P.ElementImpl._create(Ve,Ye,qe,et)},m.create_htmlUnknownElement=function(Ve,Ye,qe,et){return P.ElementImpl._create(Ve,Ye,qe,et)},m.create_documentFragment=function(Ve){return E.DocumentFragmentImpl._create(Ve)},m.create_shadowRoot=function(Ve,Ye){return R.ShadowRootImpl._create(Ve,Ye)},m.create_attr=function(Ve,Ye){return B.AttrImpl._create(Ve,Ye)},m.create_text=function(Ve,Ye){return z.TextImpl._create(Ve,Ye)},m.create_cdataSection=function(Ve,Ye){return F.CDATASectionImpl._create(Ve,Ye)},m.create_comment=function(Ve,Ye){return I.CommentImpl._create(Ve,Ye)},m.create_processingInstruction=function(Ve,Ye,qe){return L.ProcessingInstructionImpl._create(Ve,Ye,qe)},m.create_htmlCollection=function(Ve,Ye){return Ye===void 0&&(Ye=function(){return!0}),W.HTMLCollectionImpl._create(Ve,Ye)},m.create_nodeList=function(Ve){return G.NodeListImpl._create(Ve)},m.create_nodeListStatic=function(Ve,Ye){return q.NodeListStaticImpl._create(Ve,Ye)},m.create_namedNodeMap=function(Ve){return K.NamedNodeMapImpl._create(Ve)},m.create_range=function(Ve,Ye){return Z.RangeImpl._create(Ve,Ye)},m.create_nodeIterator=function(Ve,Ye,qe){return J.NodeIteratorImpl._create(Ve,Ye,qe)},m.create_treeWalker=function(Ve,Ye){return te.TreeWalkerImpl._create(Ve,Ye)},m.create_nodeFilter=function(){return Q.NodeFilterImpl._create()},m.create_mutationRecord=function(Ve,Ye,qe,et,je,Ke,Je,at,nt){return me.MutationRecordImpl._create(Ve,Ye,qe,et,je,Ke,Je,at,nt)},m.create_domTokenList=function(Ve,Ye){return Xe.DOMTokenListImpl._create(Ve,Ye)}},function(d,m,f){var g=this&&this.__values||function(B){var z=typeof Symbol=="function"&&Symbol.iterator,F=z&&B[z],I=0;if(F)return F.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&I>=B.length&&(B=void 0),{value:B&&B[I++],done:!B}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(17),C=f(3),A=f(72),_=new Map;function M(B,z){if(z!==B._root&&w.tree_isAncestorOf(B._reference,z,!0)){if(B._pointerBeforeReference)for(;;){var F=w.tree_getFollowingNode(B._root,z);if(F!==null&&w.tree_isDescendantOf(B._root,F,!0)&&!w.tree_isDescendantOf(z,F,!0))return void(B._reference=F);if(F===null)return void(B._pointerBeforeReference=!1)}if(z._previousSibling===null)z._parent!==null&&(B._reference=z._parent);else{for(var I=z._previousSibling,L=w.tree_getFirstDescendantNode(z._previousSibling,!0,!1);L!==null;)L!==null&&(I=L),L=w.tree_getNextDescendantNode(z._previousSibling,L,!0,!1);B._reference=I}}}function P(B,z,F,I,L){if(C.Guard.isSlot(B)&&z==="name"&&L===null){if(I===F||I===null&&F===""||I===""&&F===null)return;B._name=I===null||I===""?"":I,A.shadowTree_assignSlotablesForATree(w.tree_rootNode(B))}}function E(B,z,F,I,L){if(C.Guard.isSlotable(B)&&z==="slot"&&L===null){if(I===F||I===null&&F===""||I===""&&F===null)return;B._name=I===null||I===""?"":I,A.shadowTree_isAssigned(B)&&A.shadowTree_assignSlotables(B._assignedSlot),A.shadowTree_assignASlot(B)}}function R(B,z,F,I){z==="id"&&I===null&&(B._uniqueIdentifier=F||void 0)}m.dom_runRemovingSteps=function(B,z){},m.dom_runCloningSteps=function(B,z,F,I){},m.dom_runAdoptingSteps=function(B,z){},m.dom_runAttributeChangeSteps=function(B,z,F,I,L){var W,G;x.dom.features.slots&&(E.call(B,B,z,F,I,L),P.call(B,B,z,F,I,L)),R.call(B,B,z,I,L);try{for(var q=g(B._attributeChangeSteps),K=q.next();!K.done;K=q.next())K.value.call(B,B,z,F,I,L)}catch(Z){W={error:Z}}finally{try{K&&!K.done&&(G=q.return)&&G.call(q)}finally{if(W)throw W.error}}},m.dom_runInsertionSteps=function(B){},m.dom_runNodeIteratorPreRemovingSteps=function(B,z){M.call(B,B,z)},m.dom_hasSupportedTokens=function(B){return _.has(B)},m.dom_getSupportedTokens=function(B){return _.get(B)||new Set},m.dom_runEventConstructingSteps=function(B){},m.dom_runChildTextContentChangeSteps=function(B){}},function(d,m,f){var g=f(4),x=f(11),w=f(46),C=f(44),A=f(16),_=f(86),M=f(124),P=f(8),E=f(14),R=f(59),B=f(13),z=f(18),F=f(27),I=f(24),L=f(56),W=f(40),G=f(60),q=f(61),K=f(82),Z=f(190),J=f(85),te=f(55),Q=f(15),me=f(79),Xe=f(21),Ve=f(25),Ye=f(81),qe=f(57),et=f(45),je=f(58),Ke=f(5),Je=f(125),at=f(126),nt=f(62),ct=f(43),pt=f(36).forEach,rt=qe("hidden"),ht=Ke("toPrimitive"),yt=ct.set,wt=ct.getterFor("Symbol"),ft=Object.prototype,He=x.Symbol,le=w("JSON","stringify"),be=te.f,we=Q.f,ze=Z.f,Ze=me.f,Qe=Ye("symbols"),st=Ye("op-symbols"),lt=Ye("string-to-symbol-registry"),ot=Ye("symbol-to-string-registry"),ut=Ye("wks"),gt=x.QObject,vt=!gt||!gt.prototype||!gt.prototype.findChild,xt=A&&P(function(){return G(we({},"a",{get:function(){return we(this,"a",{value:7}).a}})).a!=7})?function(At,Tt,kt){var Rt=be(ft,Tt);Rt&&delete ft[Tt],we(At,Tt,kt),Rt&&At!==ft&&we(ft,Tt,Rt)}:we,Pt=function(At,Tt){var kt=Qe[At]=G(He.prototype);return yt(kt,{type:"Symbol",tag:At,description:Tt}),A||(kt.description=Tt),kt},bt=M?function(At){return typeof At=="symbol"}:function(At){return Object(At)instanceof He},Dt=function(At,Tt,kt){At===ft&&Dt(st,Tt,kt),z(At);var Rt=L(Tt,!0);return z(kt),E(Qe,Rt)?(kt.enumerable?(E(At,rt)&&At[rt][Rt]&&(At[rt][Rt]=!1),kt=G(kt,{enumerable:W(0,!1)})):(E(At,rt)||we(At,rt,W(1,{})),At[rt][Rt]=!0),xt(At,Rt,kt)):we(At,Rt,kt)},tt=function(At,Tt){z(At);var kt=I(Tt),Rt=q(kt).concat(dt(kt));return pt(Rt,function(Ft){A&&!Et.call(kt,Ft)||Dt(At,Ft,kt[Ft])}),At},Et=function(At){var Tt=L(At,!0),kt=Ze.call(this,Tt);return!(this===ft&&E(Qe,Tt)&&!E(st,Tt))&&(!(kt||!E(this,Tt)||!E(Qe,Tt)||E(this,rt)&&this[rt][Tt])||kt)},Ct=function(At,Tt){var kt=I(At),Rt=L(Tt,!0);if(kt!==ft||!E(Qe,Rt)||E(st,Rt)){var Ft=be(kt,Rt);return!Ft||!E(Qe,Rt)||E(kt,rt)&&kt[rt][Rt]||(Ft.enumerable=!0),Ft}},Mt=function(At){var Tt=ze(I(At)),kt=[];return pt(Tt,function(Rt){E(Qe,Rt)||E(et,Rt)||kt.push(Rt)}),kt},dt=function(At){var Tt=At===ft,kt=ze(Tt?st:I(At)),Rt=[];return pt(kt,function(Ft){!E(Qe,Ft)||Tt&&!E(ft,Ft)||Rt.push(Qe[Ft])}),Rt};_||(Ve((He=function(){if(this instanceof He)throw TypeError("Symbol is not a constructor");var At=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,Tt=je(At),kt=function(Rt){this===ft&&kt.call(st,Rt),E(this,rt)&&E(this[rt],Tt)&&(this[rt][Tt]=!1),xt(this,Tt,W(1,Rt))};return A&&vt&&xt(ft,Tt,{configurable:!0,set:kt}),Pt(Tt,At)}).prototype,"toString",function(){return wt(this).tag}),Ve(He,"withoutSetter",function(At){return Pt(je(At),At)}),me.f=Et,Q.f=Dt,te.f=Ct,K.f=Z.f=Mt,J.f=dt,Je.f=function(At){return Pt(Ke(At),At)},A&&(we(He.prototype,"description",{configurable:!0,get:function(){return wt(this).description}}),C||Ve(ft,"propertyIsEnumerable",Et,{unsafe:!0}))),g({global:!0,wrap:!0,forced:!_,sham:!_},{Symbol:He}),pt(q(ut),function(At){at(At)}),g({target:"Symbol",stat:!0,forced:!_},{for:function(At){var Tt=String(At);if(E(lt,Tt))return lt[Tt];var kt=He(Tt);return lt[Tt]=kt,ot[kt]=Tt,kt},keyFor:function(At){if(!bt(At))throw TypeError(At+" is not a symbol");if(E(ot,At))return ot[At]},useSetter:function(){vt=!0},useSimple:function(){vt=!1}}),g({target:"Object",stat:!0,forced:!_,sham:!A},{create:function(At,Tt){return Tt===void 0?G(At):tt(G(At),Tt)},defineProperty:Dt,defineProperties:tt,getOwnPropertyDescriptor:Ct}),g({target:"Object",stat:!0,forced:!_},{getOwnPropertyNames:Mt,getOwnPropertySymbols:dt}),g({target:"Object",stat:!0,forced:P(function(){J.f(1)})},{getOwnPropertySymbols:function(At){return J.f(F(At))}}),le&&g({target:"JSON",stat:!0,forced:!_||P(function(){var At=He();return le([At])!="[null]"||le({a:At})!="{}"||le(Object(At))!="{}"})},{stringify:function(At,Tt,kt){for(var Rt,Ft=[At],It=1;arguments.length>It;)Ft.push(arguments[It++]);if(Rt=Tt,(B(Tt)||At!==void 0)&&!bt(At))return R(Tt)||(Tt=function(Vt,Ut){if(typeof Rt=="function"&&(Ut=Rt.call(this,Vt,Ut)),!bt(Ut))return Ut}),Ft[1]=Tt,le.apply(null,Ft)}}),He.prototype[ht]||Xe(He.prototype,ht,He.prototype.valueOf),nt(He,"Symbol"),et[rt]=!0},function(d,m,f){var g=f(4),x=f(16),w=f(11),C=f(14),A=f(13),_=f(15).f,M=f(119),P=w.Symbol;if(x&&typeof P=="function"&&(!("description"in P.prototype)||P().description!==void 0)){var E={},R=function(){var L=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),W=this instanceof R?new P(L):L===void 0?P():P(L);return L===""&&(E[W]=!0),W};M(R,P);var B=R.prototype=P.prototype;B.constructor=R;var z=B.toString,F=String(P("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;_(B,"description",{configurable:!0,get:function(){var L=A(this)?this.valueOf():this,W=z.call(L);if(C(E,L))return"";var G=F?W.slice(7,-1):W.replace(I,"$1");return G===""?void 0:G}}),g({global:!0,forced:!0},{Symbol:R})}},function(d,m,f){f(126)("iterator")},function(d,m,f){var g,x=this&&this.__extends||(g=function(F,I){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,W){L.__proto__=W}||function(L,W){for(var G in W)W.hasOwnProperty(G)&&(L[G]=W[G])})(F,I)},function(F,I){function L(){this.constructor=F}g(F,I),F.prototype=I===null?Object.create(I):(L.prototype=I.prototype,new L)}),w=this&&this.__values||function(F){var I=typeof Symbol=="function"&&Symbol.iterator,L=I&&F[I],W=0;if(L)return L.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(6),A=f(1),_=f(70),M=f(3),P=f(9),E=f(0),R=f(152),B=f(12),z=function(F){function I(){var L=F.call(this)||this;return L._parent=null,L._firstChild=null,L._lastChild=null,L._previousSibling=null,L._nextSibling=null,L}return x(I,F),Object.defineProperty(I.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=E.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||C.dom.window._associatedDocument},set:function(L){this._nodeDocumentOverride=L},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"nodeName",{get:function(){return M.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:M.Guard.isAttrNode(this)?this._qualifiedName:M.Guard.isExclusiveTextNode(this)?"#text":M.Guard.isCDATASectionNode(this)?"#cdata-section":M.Guard.isProcessingInstructionNode(this)?this._target:M.Guard.isCommentNode(this)?"#comment":M.Guard.isDocumentNode(this)?"#document":M.Guard.isDocumentTypeNode(this)?this._name:M.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"baseURI",{get:function(){return R.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"isConnected",{get:function(){return M.Guard.isElementNode(this)&&E.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"ownerDocument",{get:function(){return this._nodeType===A.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),I.prototype.getRootNode=function(L){return E.tree_rootNode(this,!!L&&L.composed)},Object.defineProperty(I.prototype,"parentNode",{get:function(){return this._nodeType===A.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"parentElement",{get:function(){return this._parent&&M.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),I.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(I.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"nodeValue",{get:function(){return M.Guard.isAttrNode(this)?this._value:M.Guard.isCharacterDataNode(this)?this._data:null},set:function(L){L===null&&(L=""),M.Guard.isAttrNode(this)?E.attr_setAnExistingAttributeValue(this,L):M.Guard.isCharacterDataNode(this)&&E.characterData_replaceData(this,0,this._data.length,L)},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"textContent",{get:function(){return M.Guard.isDocumentFragmentNode(this)||M.Guard.isElementNode(this)?E.text_descendantTextContent(this):M.Guard.isAttrNode(this)?this._value:M.Guard.isCharacterDataNode(this)?this._data:null},set:function(L){L===null&&(L=""),M.Guard.isDocumentFragmentNode(this)||M.Guard.isElementNode(this)?E.node_stringReplaceAll(L,this):M.Guard.isAttrNode(this)?E.attr_setAnExistingAttributeValue(this,L):M.Guard.isCharacterDataNode(this)&&E.characterData_replaceData(this,0,E.tree_nodeLength(this),L)},enumerable:!0,configurable:!0}),I.prototype.normalize=function(){for(var L,W,G,q,K=[],Z=E.tree_getFirstDescendantNode(this,!1,!1,function(pt){return M.Guard.isExclusiveTextNode(pt)});Z!==null;)K.push(Z),Z=E.tree_getNextDescendantNode(this,Z,!1,!1,function(pt){return M.Guard.isExclusiveTextNode(pt)});for(var J=0;J<K.length;J++){var te=K[J];if(te._parent!==null){var Q=E.tree_nodeLength(te);if(Q!==0){var me=[],Xe="";try{for(var Ve=(L=void 0,w(E.text_contiguousExclusiveTextNodes(te))),Ye=Ve.next();!Ye.done;Ye=Ve.next()){var qe=Ye.value;me.push(qe),Xe+=qe._data}}catch(pt){L={error:pt}}finally{try{Ye&&!Ye.done&&(W=Ve.return)&&W.call(Ve)}finally{if(L)throw L.error}}if(E.characterData_replaceData(te,Q,0,Xe),C.dom.rangeList.size!==0)for(var et=te._nextSibling;et!==null&&M.Guard.isExclusiveTextNode(et);){var je=et,Ke=E.tree_index(je);try{for(var Je=(G=void 0,w(C.dom.rangeList)),at=Je.next();!at.done;at=Je.next()){var nt=at.value;nt._start[0]===je&&(nt._start[0]=te,nt._start[1]+=Q),nt._end[0]===je&&(nt._end[0]=te,nt._end[1]+=Q),nt._start[0]===je._parent&&nt._start[1]===Ke&&(nt._start[0]=te,nt._start[1]=Q),nt._end[0]===je._parent&&nt._end[1]===Ke&&(nt._end[0]=te,nt._end[1]=Q)}}catch(pt){G={error:pt}}finally{try{at&&!at.done&&(q=Je.return)&&q.call(Je)}finally{if(G)throw G.error}}Q+=E.tree_nodeLength(et),et=et._nextSibling}for(var ct=0;ct<me.length;ct++)(qe=me[ct])._parent!==null&&E.mutation_remove(qe,qe._parent)}else E.mutation_remove(te,te._parent)}}},I.prototype.cloneNode=function(L){if(L===void 0&&(L=!1),M.Guard.isShadowRoot(this))throw new P.NotSupportedError;return E.node_clone(this,null,L)},I.prototype.isEqualNode=function(L){return L===void 0&&(L=null),L!==null&&E.node_equals(this,L)},I.prototype.isSameNode=function(L){return L===void 0&&(L=null),this===L},I.prototype.compareDocumentPosition=function(L){if(L===this)return 0;var W=L,G=this,q=null,K=null;if(M.Guard.isAttrNode(W)&&(W=(q=W)._element),M.Guard.isAttrNode(G)&&(G=(K=G)._element,q&&W&&W===G))for(var Z=0;Z<G._attributeList.length;Z++){var J=G._attributeList[Z];if(E.node_equals(J,q))return A.Position.ImplementationSpecific|A.Position.Preceding;if(E.node_equals(J,K))return A.Position.ImplementationSpecific|A.Position.Following}return W===null||G===null||E.tree_rootNode(W)!==E.tree_rootNode(G)?A.Position.Disconnected|A.Position.ImplementationSpecific|(C.dom.compareCache.check(this,L)?A.Position.Preceding:A.Position.Following):!q&&E.tree_isAncestorOf(G,W)||K&&W===G?A.Position.Contains|A.Position.Preceding:!K&&E.tree_isDescendantOf(G,W)||q&&W===G?A.Position.ContainedBy|A.Position.Following:E.tree_isPreceding(G,W)?A.Position.Preceding:A.Position.Following},I.prototype.contains=function(L){return L!==null&&E.tree_isDescendantOf(this,L,!0)},I.prototype.lookupPrefix=function(L){return L?M.Guard.isElementNode(this)?E.node_locateANamespacePrefix(this,L):M.Guard.isDocumentNode(this)?this.documentElement===null?null:E.node_locateANamespacePrefix(this.documentElement,L):M.Guard.isDocumentTypeNode(this)||M.Guard.isDocumentFragmentNode(this)?null:M.Guard.isAttrNode(this)?this._element===null?null:E.node_locateANamespacePrefix(this._element,L):this._parent!==null&&M.Guard.isElementNode(this._parent)?E.node_locateANamespacePrefix(this._parent,L):null:null},I.prototype.lookupNamespaceURI=function(L){return E.node_locateANamespace(this,L||null)},I.prototype.isDefaultNamespace=function(L){return L||(L=null),E.node_locateANamespace(this,null)===L},I.prototype.insertBefore=function(L,W){return E.mutation_preInsert(L,this,W)},I.prototype.appendChild=function(L){return E.mutation_append(L,this)},I.prototype.replaceChild=function(L,W){return E.mutation_replace(W,L,this)},I.prototype.removeChild=function(L){return E.mutation_preRemove(L,this)},I.prototype._getTheParent=function(L){return M.Guard.isSlotable(this)&&E.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},I.ELEMENT_NODE=1,I.ATTRIBUTE_NODE=2,I.TEXT_NODE=3,I.CDATA_SECTION_NODE=4,I.ENTITY_REFERENCE_NODE=5,I.ENTITY_NODE=6,I.PROCESSING_INSTRUCTION_NODE=7,I.COMMENT_NODE=8,I.DOCUMENT_NODE=9,I.DOCUMENT_TYPE_NODE=10,I.DOCUMENT_FRAGMENT_NODE=11,I.NOTATION_NODE=12,I.DOCUMENT_POSITION_DISCONNECTED=1,I.DOCUMENT_POSITION_PRECEDING=2,I.DOCUMENT_POSITION_FOLLOWING=4,I.DOCUMENT_POSITION_CONTAINS=8,I.DOCUMENT_POSITION_CONTAINED_BY=16,I.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,I}(_.EventTargetImpl);m.NodeImpl=z,z.prototype._children=new M.EmptySet,B.idl_defineConst(z.prototype,"ELEMENT_NODE",1),B.idl_defineConst(z.prototype,"ATTRIBUTE_NODE",2),B.idl_defineConst(z.prototype,"TEXT_NODE",3),B.idl_defineConst(z.prototype,"CDATA_SECTION_NODE",4),B.idl_defineConst(z.prototype,"ENTITY_REFERENCE_NODE",5),B.idl_defineConst(z.prototype,"ENTITY_NODE",6),B.idl_defineConst(z.prototype,"PROCESSING_INSTRUCTION_NODE",7),B.idl_defineConst(z.prototype,"COMMENT_NODE",8),B.idl_defineConst(z.prototype,"DOCUMENT_NODE",9),B.idl_defineConst(z.prototype,"DOCUMENT_TYPE_NODE",10),B.idl_defineConst(z.prototype,"DOCUMENT_FRAGMENT_NODE",11),B.idl_defineConst(z.prototype,"NOTATION_NODE",12),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_PRECEDING",2),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_FOLLOWING",4),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_CONTAINS",8),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),B.idl_defineConst(z.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(d,m){d.exports=function(f){if(f==null)throw TypeError("Can't call method on "+f);return f}},function(d,m,f){var g=f(87),x=f(41),w=f(27),C=f(26),A=f(128),_=[].push,M=function(P){var E=P==1,R=P==2,B=P==3,z=P==4,F=P==6,I=P==5||F;return function(L,W,G,q){for(var K,Z,J=w(L),te=x(J),Q=g(W,G,3),me=C(te.length),Xe=0,Ve=q||A,Ye=E?Ve(L,me):R?Ve(L,0):void 0;me>Xe;Xe++)if((I||Xe in te)&&(Z=Q(K=te[Xe],Xe,J),P)){if(E)Ye[Xe]=Z;else if(Z)switch(P){case 3:return!0;case 5:return K;case 6:return Xe;case 2:_.call(Ye,K)}else if(z)return!1}return F?-1:B||z?z:Ye}};d.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},function(d,m,f){var g=this&&this.__values||function(J){var te=typeof Symbol=="function"&&Symbol.iterator,Q=te&&J[te],me=0;if(Q)return Q.call(J);if(J&&typeof J.length=="number")return{next:function(){return J&&me>=J.length&&(J=void 0),{value:J&&J[me++],done:!J}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(J,te){var Q=typeof Symbol=="function"&&J[Symbol.iterator];if(!Q)return J;var me,Xe,Ve=Q.call(J),Ye=[];try{for(;(te===void 0||te-- >0)&&!(me=Ve.next()).done;)Ye.push(me.value)}catch(qe){Xe={error:qe}}finally{try{me&&!me.done&&(Q=Ve.return)&&Q.call(Ve)}finally{if(Xe)throw Xe.error}}return Ye},w=this&&this.__spread||function(){for(var J=[],te=0;te<arguments.length;te++)J=J.concat(x(arguments[te]));return J};Object.defineProperty(m,"__esModule",{value:!0});var C=f(6),A=f(9),_=f(1),M=f(3),P=f(2),E=f(7),R=f(73),B=f(17),z=f(172),F=f(72),I=f(51),L=f(30),W=f(106);function G(J,te,Q){var me,Xe,Ve,Ye,qe,et,je,Ke,Je=te._nodeType,at=J._nodeType,nt=Q?Q._nodeType:null;if(Je!==_.NodeType.Document&&Je!==_.NodeType.DocumentFragment&&Je!==_.NodeType.Element)throw new A.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+te.nodeName+".");if(B.tree_isHostIncludingAncestorOf(te,J,!0))throw new A.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+J.nodeName+", parent node is "+te.nodeName+".");if(Q!==null&&Q._parent!==te)throw new A.NotFoundError("The reference child node cannot be found under parent node. Child node is "+Q.nodeName+", parent node is "+te.nodeName+".");if(at!==_.NodeType.DocumentFragment&&at!==_.NodeType.DocumentType&&at!==_.NodeType.Element&&at!==_.NodeType.Text&&at!==_.NodeType.ProcessingInstruction&&at!==_.NodeType.CData&&at!==_.NodeType.Comment)throw new A.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+J.nodeName+".");if(at===_.NodeType.Text&&Je===_.NodeType.Document)throw new A.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+J.nodeName+".");if(at===_.NodeType.DocumentType&&Je!==_.NodeType.Document)throw new A.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+te.nodeName+".");if(Je===_.NodeType.Document){if(at===_.NodeType.DocumentFragment){var ct=0;try{for(var pt=g(J._children),rt=pt.next();!rt.done;rt=pt.next()){var ht=rt.value;if(ht._nodeType===_.NodeType.Element)ct++;else if(ht._nodeType===_.NodeType.Text)throw new A.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+ht.nodeName+".")}}catch(Ze){me={error:Ze}}finally{try{rt&&!rt.done&&(Xe=pt.return)&&Xe.call(pt)}finally{if(me)throw me.error}}if(ct>1)throw new A.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+ct+" element nodes.");if(ct===1){try{for(var yt=g(te._children),wt=yt.next();!wt.done;wt=yt.next())if(wt.value._nodeType===_.NodeType.Element)throw new A.HierarchyRequestError("The document node already has a document element node.")}catch(Ze){Ve={error:Ze}}finally{try{wt&&!wt.done&&(Ye=yt.return)&&Ye.call(yt)}finally{if(Ve)throw Ve.error}}if(Q){if(nt===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var ft=Q._nextSibling;ft;){if(ft._nodeType===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node.");ft=ft._nextSibling}}}}else if(at===_.NodeType.Element){try{for(var He=g(te._children),le=He.next();!le.done;le=He.next())if(le.value._nodeType===_.NodeType.Element)throw new A.HierarchyRequestError("Document already has a document element node. Node is "+J.nodeName+".")}catch(Ze){qe={error:Ze}}finally{try{le&&!le.done&&(et=He.return)&&et.call(He)}finally{if(qe)throw qe.error}}if(Q){if(nt===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+J.nodeName+".");for(ft=Q._nextSibling;ft;){if(ft._nodeType===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+J.nodeName+".");ft=ft._nextSibling}}}else if(at===_.NodeType.DocumentType){try{for(var be=g(te._children),we=be.next();!we.done;we=be.next())if(we.value._nodeType===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Document already has a document type node. Node is "+J.nodeName+".")}catch(Ze){je={error:Ze}}finally{try{we&&!we.done&&(Ke=be.return)&&Ke.call(be)}finally{if(je)throw je.error}}if(Q)for(var ze=Q._previousSibling;ze;){if(ze._nodeType===_.NodeType.Element)throw new A.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+J.nodeName+".");ze=ze._previousSibling}else for(ze=te._firstChild;ze;){if(ze._nodeType===_.NodeType.Element)throw new A.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+J.nodeName+".");ze=ze._nextSibling}}}}function q(J,te,Q){G(J,te,Q);var me=Q;return me===J&&(me=J._nextSibling),W.document_adopt(J,te._nodeDocument),K(J,te,me),J}function K(J,te,Q,me){var Xe,Ve;if(Q!==null||J._nodeType===_.NodeType.DocumentFragment){var Ye=J._nodeType===_.NodeType.DocumentFragment?J._children.size:1;if(Q!==null&&C.dom.rangeList.size!==0){var qe=B.tree_index(Q);try{for(var et=g(C.dom.rangeList),je=et.next();!je.done;je=et.next()){var Ke=je.value;Ke._start[0]===te&&Ke._start[1]>qe&&(Ke._start[1]+=Ye),Ke._end[0]===te&&Ke._end[1]>qe&&(Ke._end[1]+=Ye)}}catch(wt){Xe={error:wt}}finally{try{je&&!je.done&&(Ve=et.return)&&Ve.call(et)}finally{if(Xe)throw Xe.error}}}var Je=J._nodeType===_.NodeType.DocumentFragment?new(Array.bind.apply(Array,w([void 0],J._children))):[J];if(J._nodeType===_.NodeType.DocumentFragment)for(;J._firstChild;)Z(J._firstChild,J,!0);C.dom.features.mutationObservers&&J._nodeType===_.NodeType.DocumentFragment&&I.observer_queueTreeMutationRecord(J,[],Je,null,null);for(var at=Q?Q._previousSibling:te._lastChild,nt=Q===null?-1:B.tree_index(Q),ct=0;ct<Je.length;ct++){var pt=Je[ct];if(M.Guard.isElementNode(pt)&&(M.Guard.isDocumentNode(te)&&(te._documentElement=pt),pt._nodeDocument._hasNamespaces||pt._namespace===null&&pt._namespacePrefix===null||(pt._nodeDocument._hasNamespaces=!0)),pt._parent=te,Q===null?E.set.append(te._children,pt):(E.set.insert(te._children,pt,nt),nt++),te._firstChild===null)pt._previousSibling=null,pt._nextSibling=null,te._firstChild=pt,te._lastChild=pt;else{var rt=Q?Q._previousSibling:te._lastChild,ht=Q||null;pt._previousSibling=rt,pt._nextSibling=ht,rt&&(rt._nextSibling=pt),ht&&(ht._previousSibling=pt),rt||(te._firstChild=pt),ht||(te._lastChild=pt)}C.dom.features.slots&&te._shadowRoot!==null&&M.Guard.isSlotable(pt)&&F.shadowTree_assignASlot(pt),C.dom.features.steps&&M.Guard.isTextNode(pt)&&L.dom_runChildTextContentChangeSteps(te),C.dom.features.slots&&M.Guard.isShadowRoot(B.tree_rootNode(te))&&M.Guard.isSlot(te)&&P.isEmpty(te._assignedNodes)&&F.shadowTree_signalASlotChange(te),C.dom.features.slots&&F.shadowTree_assignSlotablesForATree(B.tree_rootNode(pt));for(var yt=B.tree_getFirstDescendantNode(pt,!0,!0);yt!==null;)C.dom.features.steps&&L.dom_runInsertionSteps(yt),C.dom.features.customElements&&M.Guard.isElementNode(yt)&&F.shadowTree_isConnected(yt)&&(M.Guard.isCustomElementNode(yt)?R.customElement_enqueueACustomElementCallbackReaction(yt,"connectedCallback",[]):R.customElement_tryToUpgrade(yt)),yt=B.tree_getNextDescendantNode(pt,yt,!0,!0)}C.dom.features.mutationObservers&&(me||I.observer_queueTreeMutationRecord(te,Je,[],at,Q))}else(function(wt,ft,He){var le=ft._lastChild;if(M.Guard.isElementNode(wt)&&(M.Guard.isDocumentNode(ft)&&(ft._documentElement=wt),wt._nodeDocument._hasNamespaces||wt._namespace===null&&wt._namespacePrefix===null||(wt._nodeDocument._hasNamespaces=!0)),wt._parent=ft,ft._children.add(wt),ft._firstChild===null)wt._previousSibling=null,wt._nextSibling=null,ft._firstChild=wt,ft._lastChild=wt;else{var be=ft._lastChild;wt._previousSibling=be,wt._nextSibling=null,be&&(be._nextSibling=wt),be||(ft._firstChild=wt),ft._lastChild=wt}C.dom.features.slots&&ft._shadowRoot!==null&&M.Guard.isSlotable(wt)&&F.shadowTree_assignASlot(wt),C.dom.features.steps&&M.Guard.isTextNode(wt)&&L.dom_runChildTextContentChangeSteps(ft),C.dom.features.slots&&M.Guard.isShadowRoot(B.tree_rootNode(ft))&&M.Guard.isSlot(ft)&&P.isEmpty(ft._assignedNodes)&&F.shadowTree_signalASlotChange(ft),C.dom.features.slots&&F.shadowTree_assignSlotablesForATree(B.tree_rootNode(wt)),C.dom.features.steps&&L.dom_runInsertionSteps(wt),C.dom.features.customElements&&M.Guard.isElementNode(wt)&&F.shadowTree_isConnected(wt)&&(M.Guard.isCustomElementNode(wt)?R.customElement_enqueueACustomElementCallbackReaction(wt,"connectedCallback",[]):R.customElement_tryToUpgrade(wt)),C.dom.features.mutationObservers&&(He||I.observer_queueTreeMutationRecord(ft,[wt],[],le,null))})(J,te,me)}function Z(J,te,Q){var me,Xe,Ve,Ye,qe,et,je,Ke;if(C.dom.rangeList.size!==0){var Je=B.tree_index(J);try{for(var at=g(C.dom.rangeList),nt=at.next();!nt.done;nt=at.next()){var ct=nt.value;B.tree_isDescendantOf(J,ct._start[0],!0)&&(ct._start=[te,Je]),B.tree_isDescendantOf(J,ct._end[0],!0)&&(ct._end=[te,Je]),ct._start[0]===te&&ct._start[1]>Je&&ct._start[1]--,ct._end[0]===te&&ct._end[1]>Je&&ct._end[1]--}}catch(lt){me={error:lt}}finally{try{nt&&!nt.done&&(Xe=at.return)&&Xe.call(at)}finally{if(me)throw me.error}}try{for(var pt=g(C.dom.rangeList),rt=pt.next();!rt.done;rt=pt.next())(ct=rt.value)._start[0]===te&&ct._start[1]>Je&&(ct._start[1]-=1),ct._end[0]===te&&ct._end[1]>Je&&(ct._end[1]-=1)}catch(lt){Ve={error:lt}}finally{try{rt&&!rt.done&&(Ye=pt.return)&&Ye.call(pt)}finally{if(Ve)throw Ve.error}}}if(C.dom.features.steps)try{for(var ht=g(z.nodeIterator_iteratorList()),yt=ht.next();!yt.done;yt=ht.next()){var wt=yt.value;wt._root._nodeDocument===J._nodeDocument&&L.dom_runNodeIteratorPreRemovingSteps(wt,J)}}catch(lt){qe={error:lt}}finally{try{yt&&!yt.done&&(et=ht.return)&&et.call(ht)}finally{if(qe)throw qe.error}}var ft=J._previousSibling,He=J._nextSibling;M.Guard.isDocumentNode(te)&&M.Guard.isElementNode(J)&&(te._documentElement=null),J._parent=null,te._children.delete(J);var le=J._previousSibling,be=J._nextSibling;J._previousSibling=null,J._nextSibling=null,le&&(le._nextSibling=be),be&&(be._previousSibling=le),le||(te._firstChild=be),be||(te._lastChild=le),C.dom.features.slots&&M.Guard.isSlotable(J)&&J._assignedSlot!==null&&F.shadowTree_isAssigned(J)&&F.shadowTree_assignSlotables(J._assignedSlot),C.dom.features.slots&&M.Guard.isShadowRoot(B.tree_rootNode(te))&&M.Guard.isSlot(te)&&P.isEmpty(te._assignedNodes)&&F.shadowTree_signalASlotChange(te),C.dom.features.slots&&B.tree_getFirstDescendantNode(J,!0,!1,function(lt){return M.Guard.isSlot(lt)})!==null&&(F.shadowTree_assignSlotablesForATree(B.tree_rootNode(te)),F.shadowTree_assignSlotablesForATree(J)),C.dom.features.steps&&L.dom_runRemovingSteps(J,te),C.dom.features.customElements&&M.Guard.isCustomElementNode(J)&&R.customElement_enqueueACustomElementCallbackReaction(J,"disconnectedCallback",[]);for(var we=B.tree_getFirstDescendantNode(J,!1,!0);we!==null;)C.dom.features.steps&&L.dom_runRemovingSteps(we,J),C.dom.features.customElements&&M.Guard.isCustomElementNode(we)&&R.customElement_enqueueACustomElementCallbackReaction(we,"disconnectedCallback",[]),we=B.tree_getNextDescendantNode(J,we,!1,!0);if(C.dom.features.mutationObservers)for(var ze=B.tree_getFirstAncestorNode(te,!0);ze!==null;){try{for(var Ze=(je=void 0,g(ze._registeredObserverList)),Qe=Ze.next();!Qe.done;Qe=Ze.next()){var st=Qe.value;st.options.subtree&&J._registeredObserverList.push({observer:st.observer,options:st.options,source:st})}}catch(lt){je={error:lt}}finally{try{Qe&&!Qe.done&&(Ke=Ze.return)&&Ke.call(Ze)}finally{if(je)throw je.error}}ze=B.tree_getNextAncestorNode(te,ze,!0)}C.dom.features.mutationObservers&&(Q||I.observer_queueTreeMutationRecord(te,[],[J],ft,He)),C.dom.features.steps&&M.Guard.isTextNode(J)&&L.dom_runChildTextContentChangeSteps(te)}m.mutation_ensurePreInsertionValidity=G,m.mutation_preInsert=q,m.mutation_insert=K,m.mutation_append=function(J,te){return q(J,te,null)},m.mutation_replace=function(J,te,Q){var me,Xe,Ve,Ye,qe,et,je,Ke;if(Q._nodeType!==_.NodeType.Document&&Q._nodeType!==_.NodeType.DocumentFragment&&Q._nodeType!==_.NodeType.Element)throw new A.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+Q.nodeName+".");if(B.tree_isHostIncludingAncestorOf(Q,te,!0))throw new A.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+te.nodeName+", parent node is "+Q.nodeName+".");if(J._parent!==Q)throw new A.NotFoundError("The reference child node cannot be found under parent node. Child node is "+J.nodeName+", parent node is "+Q.nodeName+".");if(te._nodeType!==_.NodeType.DocumentFragment&&te._nodeType!==_.NodeType.DocumentType&&te._nodeType!==_.NodeType.Element&&te._nodeType!==_.NodeType.Text&&te._nodeType!==_.NodeType.ProcessingInstruction&&te._nodeType!==_.NodeType.CData&&te._nodeType!==_.NodeType.Comment)throw new A.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+te.nodeName+".");if(te._nodeType===_.NodeType.Text&&Q._nodeType===_.NodeType.Document)throw new A.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+te.nodeName+".");if(te._nodeType===_.NodeType.DocumentType&&Q._nodeType!==_.NodeType.Document)throw new A.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+Q.nodeName+".");if(Q._nodeType===_.NodeType.Document){if(te._nodeType===_.NodeType.DocumentFragment){var Je=0;try{for(var at=g(te._children),nt=at.next();!nt.done;nt=at.next()){var ct=nt.value;if(ct._nodeType===_.NodeType.Element)Je++;else if(ct._nodeType===_.NodeType.Text)throw new A.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+ct.nodeName+".")}}catch(st){me={error:st}}finally{try{nt&&!nt.done&&(Xe=at.return)&&Xe.call(at)}finally{if(me)throw me.error}}if(Je>1)throw new A.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+Je+" element nodes.");if(Je===1){try{for(var pt=g(Q._children),rt=pt.next();!rt.done;rt=pt.next())if((le=rt.value)._nodeType===_.NodeType.Element&&le!==J)throw new A.HierarchyRequestError("The document node already has a document element node.")}catch(st){Ve={error:st}}finally{try{rt&&!rt.done&&(Ye=pt.return)&&Ye.call(pt)}finally{if(Ve)throw Ve.error}}for(var ht=J._nextSibling;ht;){if(ht._nodeType===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node.");ht=ht._nextSibling}}}else if(te._nodeType===_.NodeType.Element){try{for(var yt=g(Q._children),wt=yt.next();!wt.done;wt=yt.next())if((le=wt.value)._nodeType===_.NodeType.Element&&le!==J)throw new A.HierarchyRequestError("Document already has a document element node. Node is "+te.nodeName+".")}catch(st){qe={error:st}}finally{try{wt&&!wt.done&&(et=yt.return)&&et.call(yt)}finally{if(qe)throw qe.error}}for(ht=J._nextSibling;ht;){if(ht._nodeType===_.NodeType.DocumentType)throw new A.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+te.nodeName+".");ht=ht._nextSibling}}else if(te._nodeType===_.NodeType.DocumentType){try{for(var ft=g(Q._children),He=ft.next();!He.done;He=ft.next()){var le;if((le=He.value)._nodeType===_.NodeType.DocumentType&&le!==J)throw new A.HierarchyRequestError("Document already has a document type node. Node is "+te.nodeName+".")}}catch(st){je={error:st}}finally{try{He&&!He.done&&(Ke=ft.return)&&Ke.call(ft)}finally{if(je)throw je.error}}for(var be=J._previousSibling;be;){if(be._nodeType===_.NodeType.Element)throw new A.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+te.nodeName+".");be=be._previousSibling}}}var we=J._nextSibling;we===te&&(we=te._nextSibling);var ze=J._previousSibling;W.document_adopt(te,Q._nodeDocument);var Ze=[];J._parent!==null&&(Ze.push(J),Z(J,J._parent,!0));var Qe=[];return te._nodeType===_.NodeType.DocumentFragment?Qe=Array.from(te._children):Qe.push(te),K(te,Q,we,!0),C.dom.features.mutationObservers&&I.observer_queueTreeMutationRecord(Q,Qe,Ze,ze,we),J},m.mutation_replaceAll=function(J,te){var Q,me;J!==null&&W.document_adopt(J,te._nodeDocument);var Xe=Array.from(te._children),Ve=[];J&&J._nodeType===_.NodeType.DocumentFragment?Ve=Array.from(J._children):J!==null&&Ve.push(J);try{for(var Ye=g(Xe),qe=Ye.next();!qe.done;qe=Ye.next())Z(qe.value,te,!0)}catch(et){Q={error:et}}finally{try{qe&&!qe.done&&(me=Ye.return)&&me.call(Ye)}finally{if(Q)throw Q.error}}J!==null&&K(J,te,null,!0),C.dom.features.mutationObservers&&I.observer_queueTreeMutationRecord(te,Ve,Xe,null,null)},m.mutation_preRemove=function(J,te){if(J._parent!==te)throw new A.NotFoundError("The child node cannot be found under parent node. Child node is "+J.nodeName+", parent node is "+te.nodeName+".");return Z(J,te),J},m.mutation_remove=Z},function(d,m,f){function g(x){return x==null}d.exports.isNothing=g,d.exports.isObject=function(x){return typeof x=="object"&&x!==null},d.exports.toArray=function(x){return Array.isArray(x)?x:g(x)?[]:[x]},d.exports.repeat=function(x,w){var C,A="";for(C=0;C<w;C+=1)A+=x;return A},d.exports.isNegativeZero=function(x){return x===0&&Number.NEGATIVE_INFINITY===1/x},d.exports.extend=function(x,w){var C,A,_,M;if(w)for(C=0,A=(M=Object.keys(w)).length;C<A;C+=1)x[_=M[C]]=w[_];return x}},function(d,m,f){var g=f(38),x=f(53),w=f(10);function C(_,M,P){var E=[];return _.include.forEach(function(R){P=C(R,M,P)}),_[M].forEach(function(R){P.forEach(function(B,z){B.tag===R.tag&&B.kind===R.kind&&E.push(z)}),P.push(R)}),P.filter(function(R,B){return E.indexOf(B)===-1})}function A(_){this.include=_.include||[],this.implicit=_.implicit||[],this.explicit=_.explicit||[],this.implicit.forEach(function(M){if(M.loadKind&&M.loadKind!=="scalar")throw new x("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=C(this,"implicit",[]),this.compiledExplicit=C(this,"explicit",[]),this.compiledTypeMap=function(){var M,P,E={scalar:{},sequence:{},mapping:{},fallback:{}};function R(B){E[B.kind][B.tag]=E.fallback[B.tag]=B}for(M=0,P=arguments.length;M<P;M+=1)arguments[M].forEach(R);return E}(this.compiledImplicit,this.compiledExplicit)}A.DEFAULT=null,A.create=function(){var _,M;switch(arguments.length){case 1:_=A.DEFAULT,M=arguments[0];break;case 2:_=arguments[0],M=arguments[1];break;default:throw new x("Wrong number of arguments for Schema.create function")}if(_=g.toArray(_),M=g.toArray(M),!_.every(function(P){return P instanceof A}))throw new x("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!M.every(function(P){return P instanceof w}))throw new x("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new A({include:_,explicit:M})},d.exports=A},function(d,m){d.exports=function(f,g){return{enumerable:!(1&f),configurable:!(2&f),writable:!(4&f),value:g}}},function(d,m,f){var g=f(8),x=f(42),w="".split;d.exports=g(function(){return!Object("z").propertyIsEnumerable(0)})?function(C){return x(C)=="String"?w.call(C,""):Object(C)}:Object},function(d,m){var f={}.toString;d.exports=function(g){return f.call(g).slice(8,-1)}},function(d,m,f){var g,x,w,C=f(186),A=f(11),_=f(13),M=f(21),P=f(14),E=f(57),R=f(45),B=A.WeakMap;if(C){var z=new B,F=z.get,I=z.has,L=z.set;g=function(G,q){return L.call(z,G,q),q},x=function(G){return F.call(z,G)||{}},w=function(G){return I.call(z,G)}}else{var W=E("state");R[W]=!0,g=function(G,q){return M(G,W,q),q},x=function(G){return P(G,W)?G[W]:{}},w=function(G){return P(G,W)}}d.exports={set:g,get:x,has:w,enforce:function(G){return w(G)?x(G):g(G,{})},getterFor:function(G){return function(q){var K;if(!_(q)||(K=x(q)).type!==G)throw TypeError("Incompatible receiver, "+G+" required");return K}}}},function(d,m){d.exports=!1},function(d,m){d.exports={}},function(d,m,f){var g=f(120),x=f(11),w=function(C){return typeof C=="function"?C:void 0};d.exports=function(C,A){return arguments.length<2?w(g[C])||w(x[C]):g[C]&&g[C][A]||x[C]&&x[C][A]}},function(d,m){var f=Math.ceil,g=Math.floor;d.exports=function(x){return isNaN(x=+x)?0:(x>0?g:f)(x)}},function(d,m,f){var g=f(8);d.exports=function(x,w){var C=[][x];return!!C&&g(function(){C.call(null,w||function(){throw 1},1)})}},function(d,m){d.exports={}},function(d,m,f){f(31),f(32),f(33),f(220),f(64),f(19),f(65),f(20),f(68),f(66),f(92),f(144),f(22),f(94),f(23);var g=this&&this.__values||function(B){var z=typeof Symbol=="function"&&Symbol.iterator,F=z&&B[z],I=0;if(F)return F.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&I>=B.length&&(B=void 0),{value:B&&B[I++],done:!B}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(B,z){var F=typeof Symbol=="function"&&B[Symbol.iterator];if(!F)return B;var I,L,W=F.call(B),G=[];try{for(;(z===void 0||z-- >0)&&!(I=W.next()).done;)G.push(I.value)}catch(q){L={error:q}}finally{try{I&&!I.done&&(F=W.return)&&F.call(W)}finally{if(L)throw L.error}}return G},w=this&&this.__spread||function(){for(var B=[],z=0;z<arguments.length;z++)B=B.concat(x(arguments[z]));return B};Object.defineProperty(m,"__esModule",{value:!0});var C=f(1),A=f(69),_=f(95),M=f(7),P=f(0),E=f(258),R=function(){function B(z){this.level=0,this._builderOptions=z}return B.prototype.declaration=function(z,F,I){},B.prototype.docType=function(z,F,I){},B.prototype.comment=function(z){},B.prototype.text=function(z){},B.prototype.instruction=function(z,F){},B.prototype.cdata=function(z){},B.prototype.openTagBegin=function(z){},B.prototype.openTagEnd=function(z,F,I){},B.prototype.closeTag=function(z){},B.prototype.attributes=function(z){var F,I;try{for(var L=g(z),W=L.next();!W.done;W=L.next()){var G=W.value;this.attribute(G[1]===null?G[2]:G[1]+":"+G[2],G[3])}}catch(q){F={error:q}}finally{try{W&&!W.done&&(I=L.return)&&I.call(L)}finally{if(F)throw F.error}}},B.prototype.attribute=function(z,F){},B.prototype.beginElement=function(z){},B.prototype.endElement=function(z){},B.prototype.serializeNode=function(z,F){var I=z._nodeDocument!==void 0&&z._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=z,I){var L=new _.NamespacePrefixMap;L.set("xml",M.namespace.XML),this._serializeNodeNS(z,null,L,{value:1},F)}else this._serializeNode(z,F)},B.prototype._serializeNodeNS=function(z,F,I,L,W){switch(this.currentNode=z,z.nodeType){case C.NodeType.Element:this._serializeElementNS(z,F,I,L,W);break;case C.NodeType.Document:this._serializeDocumentNS(z,F,I,L,W);break;case C.NodeType.Comment:this._serializeComment(z,W);break;case C.NodeType.Text:this._serializeText(z,W);break;case C.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(z,F,I,L,W);break;case C.NodeType.DocumentType:this._serializeDocumentType(z,W);break;case C.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(z,W);break;case C.NodeType.CData:this._serializeCData(z,W);break;default:throw new Error("Unknown node type: "+z.nodeType)}},B.prototype._serializeNode=function(z,F){switch(this.currentNode=z,z.nodeType){case C.NodeType.Element:this._serializeElement(z,F);break;case C.NodeType.Document:this._serializeDocument(z,F);break;case C.NodeType.Comment:this._serializeComment(z,F);break;case C.NodeType.Text:this._serializeText(z,F);break;case C.NodeType.DocumentFragment:this._serializeDocumentFragment(z,F);break;case C.NodeType.DocumentType:this._serializeDocumentType(z,F);break;case C.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(z,F);break;case C.NodeType.CData:this._serializeCData(z,F);break;default:throw new Error("Unknown node type: "+z.nodeType)}},B.prototype._serializeElementNS=function(z,F,I,L,W){var G,q,K=[];if(W&&(z.localName.indexOf(":")!==-1||!P.xml_isName(z.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var Z="",J=!1,te=!1,Q=I.copy(),me={},Xe=this._recordNamespaceInformation(z,Q,me),Ve=F,Ye=z.namespaceURI;if(Ve===Ye)Xe!==null&&(te=!0),Z=Ye===M.namespace.XML?"xml:"+z.localName:z.localName,this.beginElement(Z),this.openTagBegin(Z);else{var qe=z.prefix,et=null;if(qe===null&&Ye===Xe||(et=Q.get(qe,Ye)),qe==="xmlns"){if(W)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");et=qe}et!==null?(Z=et+":"+z.localName,Xe!==null&&Xe!==M.namespace.XML&&(Ve=Xe||null),this.beginElement(Z),this.openTagBegin(Z)):qe!==null?(qe in me&&(qe=this._generatePrefix(Ye,Q,L)),Q.set(qe,Ye),Z+=qe+":"+z.localName,this.beginElement(Z),this.openTagBegin(Z),K.push([null,"xmlns",qe,this._serializeAttributeValue(Ye,W)]),Xe!==null&&(Ve=Xe||null)):Xe===null||Xe!==null&&Xe!==Ye?(te=!0,Z+=z.localName,Ve=Ye,this.beginElement(Z),this.openTagBegin(Z),K.push([null,null,"xmlns",this._serializeAttributeValue(Ye,W)])):(Z+=z.localName,Ve=Ye,this.beginElement(Z),this.openTagBegin(Z))}K.push.apply(K,w(this._serializeAttributesNS(z,Q,L,me,te,W))),this.attributes(K);var je=Ye===M.namespace.HTML;if(je&&z.childNodes.length===0&&B._VoidElementNames.has(z.localName)?(this.openTagEnd(Z,!0,!0),this.endElement(Z),J=!0):je||z.childNodes.length!==0?this.openTagEnd(Z,!1,!1):(this.openTagEnd(Z,!0,!1),this.endElement(Z),J=!0),!J){if(!(je&&z.localName==="template"))try{for(var Ke=g(z.childNodes),Je=Ke.next();!Je.done;Je=Ke.next()){var at=Je.value;this.level++,this._serializeNodeNS(at,Ve,Q,L,W),this.level--}}catch(nt){G={error:nt}}finally{try{Je&&!Je.done&&(q=Ke.return)&&q.call(Ke)}finally{if(G)throw G.error}}this.closeTag(Z),this.endElement(Z)}},B.prototype._serializeElement=function(z,F){var I,L;if(F&&(z.localName.indexOf(":")!==-1||!P.xml_isName(z.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var W=!1,G=z.localName;this.beginElement(G),this.openTagBegin(G);var q=this._serializeAttributes(z,F);if(this.attributes(q),z.hasChildNodes()?this.openTagEnd(G,!1,!1):(this.openTagEnd(G,!0,!1),this.endElement(G),W=!0),!W){try{for(var K=g(z._children),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;this.level++,this._serializeNode(J,F),this.level--}}catch(te){I={error:te}}finally{try{Z&&!Z.done&&(L=K.return)&&L.call(K)}finally{if(I)throw I.error}}this.closeTag(G),this.endElement(G)}},B.prototype._serializeDocumentNS=function(z,F,I,L,W){var G,q;if(W&&z.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var K=g(z.childNodes),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;this._serializeNodeNS(J,F,I,L,W)}}catch(te){G={error:te}}finally{try{Z&&!Z.done&&(q=K.return)&&q.call(K)}finally{if(G)throw G.error}}},B.prototype._serializeDocument=function(z,F){var I,L;if(F&&z.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var W=g(z._children),G=W.next();!G.done;G=W.next()){var q=G.value;this._serializeNode(q,F)}}catch(K){I={error:K}}finally{try{G&&!G.done&&(L=W.return)&&L.call(W)}finally{if(I)throw I.error}}},B.prototype._serializeComment=function(z,F){if(F&&(!P.xml_isLegalChar(z.data)||z.data.indexOf("--")!==-1||z.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(z.data)},B.prototype._serializeText=function(z,F){if(F&&!P.xml_isLegalChar(z.data))throw new Error("Text data contains invalid characters (well-formed required).");var I=z.data.replace(E.nonEntityAmpersandRegex,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(I)},B.prototype._serializeDocumentFragmentNS=function(z,F,I,L,W){var G,q;try{for(var K=g(z.childNodes),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;this._serializeNodeNS(J,F,I,L,W)}}catch(te){G={error:te}}finally{try{Z&&!Z.done&&(q=K.return)&&q.call(K)}finally{if(G)throw G.error}}},B.prototype._serializeDocumentFragment=function(z,F){var I,L;try{for(var W=g(z._children),G=W.next();!G.done;G=W.next()){var q=G.value;this._serializeNode(q,F)}}catch(K){I={error:K}}finally{try{G&&!G.done&&(L=W.return)&&L.call(W)}finally{if(I)throw I.error}}},B.prototype._serializeDocumentType=function(z,F){if(F&&!P.xml_isPubidChar(z.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(F&&(!P.xml_isLegalChar(z.systemId)||z.systemId.indexOf('"')!==-1&&z.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(z.name,z.publicId,z.systemId)},B.prototype._serializeProcessingInstruction=function(z,F){if(F&&(z.target.indexOf(":")!==-1||/^xml$/i.test(z.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(F&&(!P.xml_isLegalChar(z.data)||z.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(z.target,z.data)},B.prototype._serializeCData=function(z,F){if(F&&z.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(z.data)},B.prototype._serializeAttributesNS=function(z,F,I,L,W,G){var q,K,Z=[],J=G?new A.LocalNameSet:void 0;try{for(var te=g(z.attributes),Q=te.next();!Q.done;Q=te.next()){var me=Q.value;if(G||W||me.namespaceURI!==null){if(G&&J&&J.has(me.namespaceURI,me.localName))throw new Error("Element contains duplicate attributes (well-formed required).");G&&J&&J.set(me.namespaceURI,me.localName);var Xe=me.namespaceURI,Ve=null;if(Xe!==null)if(Ve=F.get(me.prefix,Xe),Xe===M.namespace.XMLNS){if(me.value===M.namespace.XML||me.prefix===null&&W||me.prefix!==null&&(!(me.localName in L)||L[me.localName]!==me.value)&&F.has(me.localName,me.value))continue;if(G&&me.value===M.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(G&&me.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");me.prefix==="xmlns"&&(Ve="xmlns")}else Ve===null&&(Ve=me.prefix===null||F.hasPrefix(me.prefix)&&!F.has(me.prefix,Xe)?this._generatePrefix(Xe,F,I):me.prefix,Z.push([null,"xmlns",Ve,this._serializeAttributeValue(Xe,G)]));if(G&&(me.localName.indexOf(":")!==-1||!P.xml_isName(me.localName)||me.localName==="xmlns"&&Xe===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");Z.push([Xe,Ve,me.localName,this._serializeAttributeValue(me.value,G)])}else Z.push([null,null,me.localName,this._serializeAttributeValue(me.value,G)])}}catch(Ye){q={error:Ye}}finally{try{Q&&!Q.done&&(K=te.return)&&K.call(te)}finally{if(q)throw q.error}}return Z},B.prototype._serializeAttributes=function(z,F){var I,L,W=[],G=F?{}:void 0;try{for(var q=g(z.attributes),K=q.next();!K.done;K=q.next()){var Z=K.value;if(F){if(F&&G&&Z.localName in G)throw new Error("Element contains duplicate attributes (well-formed required).");if(F&&G&&(G[Z.localName]=!0),F&&(Z.localName.indexOf(":")!==-1||!P.xml_isName(Z.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");W.push([null,null,Z.localName,this._serializeAttributeValue(Z.value,F)])}else W.push([null,null,Z.localName,this._serializeAttributeValue(Z.value,F)])}}catch(J){I={error:J}}finally{try{K&&!K.done&&(L=q.return)&&L.call(q)}finally{if(I)throw I.error}}return W},B.prototype._recordNamespaceInformation=function(z,F,I){var L,W,G=null;try{for(var q=g(z.attributes),K=q.next();!K.done;K=q.next()){var Z=K.value,J=Z.namespaceURI,te=Z.prefix;if(J===M.namespace.XMLNS){if(te===null){G=Z.value;continue}var Q=Z.localName,me=Z.value;if(me===M.namespace.XML||(me===""&&(me=null),F.has(Q,me)))continue;F.set(Q,me),I[Q]=me||""}}}catch(Xe){L={error:Xe}}finally{try{K&&!K.done&&(W=q.return)&&W.call(q)}finally{if(L)throw L.error}}return G},B.prototype._generatePrefix=function(z,F,I){var L="ns"+I.value.toString();return I.value++,F.set(L,z),L},B.prototype._serializeAttributeValue=function(z,F){if(F&&z!==null&&!P.xml_isLegalChar(z))throw new Error("Invalid characters in attribute value.");return z===null?"":z.replace(E.nonEntityAmpersandRegex,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},B._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),B}();m.BaseWriter=R},function(d,m,f){var g=this&&this.__values||function(z){var F=typeof Symbol=="function"&&Symbol.iterator,I=F&&z[F],L=0;if(I)return I.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&L>=z.length&&(z=void 0),{value:z&&z[L++],done:!z}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(z,F){var I=typeof Symbol=="function"&&z[Symbol.iterator];if(!I)return z;var L,W,G=I.call(z),q=[];try{for(;(F===void 0||F-- >0)&&!(L=G.next()).done;)q.push(L.value)}catch(K){W={error:K}}finally{try{L&&!L.done&&(I=G.return)&&I.call(G)}finally{if(W)throw W.error}}return q};Object.defineProperty(m,"__esModule",{value:!0});var w=f(6),C=f(3),A=f(7),_=f(29),M=f(17),P=f(97);function E(){var z=w.dom.window;z._mutationObserverMicrotaskQueued||(z._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){R()}))}function R(){var z,F,I,L,W=w.dom.window;W._mutationObserverMicrotaskQueued=!1;var G=A.set.clone(W._mutationObservers),q=A.set.clone(W._signalSlots);A.set.empty(W._signalSlots);var K=function(Xe){var Ve=A.list.clone(Xe._recordQueue);A.list.empty(Xe._recordQueue);for(var Ye=0;Ye<Xe._nodeList.length;Ye++){var qe=Xe._nodeList[Ye];A.list.remove(qe._registeredObserverList,function(et){return C.Guard.isTransientRegisteredObserver(et)&&et.observer===Xe})}if(!A.list.isEmpty(Ve))try{Xe._callback.call(Xe,Ve,Xe)}catch{}};try{for(var Z=g(G),J=Z.next();!J.done;J=Z.next())K(J.value)}catch(Xe){z={error:Xe}}finally{try{J&&!J.done&&(F=Z.return)&&F.call(Z)}finally{if(z)throw z.error}}if(w.dom.features.slots)try{for(var te=g(q),Q=te.next();!Q.done;Q=te.next()){var me=Q.value;P.event_fireAnEvent("slotchange",me,void 0,{bubbles:!0})}}catch(Xe){I={error:Xe}}finally{try{Q&&!Q.done&&(L=te.return)&&L.call(te)}finally{if(I)throw I.error}}}function B(z,F,I,L,W,G,q,K,Z){for(var J,te,Q=new Map,me=M.tree_getFirstAncestorNode(F,!0);me!==null;){for(var Xe=0;Xe<me._registeredObserverList.length;Xe++){var Ve=me._registeredObserverList[Xe],Ye=Ve.options;if((me===F||Ye.subtree)&&(z!=="attributes"||Ye.attributes)&&(z!=="attributes"||!Ye.attributeFilter||Ye.attributeFilter.indexOf(I||"")&&L===null)&&(z!=="characterData"||Ye.characterData)&&(z!=="childList"||Ye.childList)){var qe=Ve.observer;Q.has(qe)||Q.set(qe,null),(z==="attributes"&&Ye.attributeOldValue||z==="characterData"&&Ye.characterDataOldValue)&&Q.set(qe,W)}}me=M.tree_getNextAncestorNode(F,me,!0)}try{for(var et=g(Q),je=et.next();!je.done;je=et.next()){var Ke=x(je.value,2),Je=Ke[0],at=Ke[1],nt=_.create_mutationRecord(z,F,_.create_nodeListStatic(F,G),_.create_nodeListStatic(F,q),K,Z,I,L,at);Je._recordQueue.push(nt)}}catch(ct){J={error:ct}}finally{try{je&&!je.done&&(te=et.return)&&te.call(et)}finally{if(J)throw J.error}}E()}m.observer_queueAMutationObserverMicrotask=E,m.observer_notifyMutationObservers=R,m.observer_queueMutationRecord=B,m.observer_queueTreeMutationRecord=function(z,F,I,L,W){B("childList",z,null,null,null,F,I,L,W)},m.observer_queueAttributeMutationRecord=function(z,F,I,L){B("attributes",z,F,I,L,[],[],null,null)}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(6),x=f(7),w=f(3),C=f(9),A=f(29),_=f(73),M=f(51),P=f(30),E=f(37),R=f(106);function B(G,q,K){g.dom.features.mutationObservers&&M.observer_queueAttributeMutationRecord(q,G._localName,G._namespace,G._value),g.dom.features.customElements&&w.Guard.isCustomElementNode(q)&&_.customElement_enqueueACustomElementCallbackReaction(q,"attributeChangedCallback",[G._localName,G._value,K,G._namespace]),g.dom.features.steps&&P.dom_runAttributeChangeSteps(q,G._localName,G._value,K,G._namespace),G._value=K}function z(G,q){g.dom.features.mutationObservers&&M.observer_queueAttributeMutationRecord(q,G._localName,G._namespace,null),g.dom.features.customElements&&w.Guard.isCustomElementNode(q)&&_.customElement_enqueueACustomElementCallbackReaction(q,"attributeChangedCallback",[G._localName,null,G._value,G._namespace]),g.dom.features.steps&&P.dom_runAttributeChangeSteps(q,G._localName,null,G._value,G._namespace),q._attributeList._asArray().push(G),G._element=q,q._nodeDocument._hasNamespaces||G._namespace===null&&G._namespacePrefix===null&&G._localName!=="xmlns"||(q._nodeDocument._hasNamespaces=!0)}function F(G,q){g.dom.features.mutationObservers&&M.observer_queueAttributeMutationRecord(q,G._localName,G._namespace,G._value),g.dom.features.customElements&&w.Guard.isCustomElementNode(q)&&_.customElement_enqueueACustomElementCallbackReaction(q,"attributeChangedCallback",[G._localName,G._value,null,G._namespace]),g.dom.features.steps&&P.dom_runAttributeChangeSteps(q,G._localName,G._value,null,G._namespace);var K=q._attributeList._asArray().indexOf(G);q._attributeList._asArray().splice(K,1),G._element=null}function I(G,q,K){g.dom.features.mutationObservers&&M.observer_queueAttributeMutationRecord(K,G._localName,G._namespace,G._value),g.dom.features.customElements&&w.Guard.isCustomElementNode(K)&&_.customElement_enqueueACustomElementCallbackReaction(K,"attributeChangedCallback",[G._localName,G._value,q._value,G._namespace]),g.dom.features.steps&&P.dom_runAttributeChangeSteps(K,G._localName,G._value,q._value,G._namespace);var Z=K._attributeList._asArray().indexOf(G);Z!==-1&&(K._attributeList._asArray()[Z]=q),G._element=null,q._element=K,K._nodeDocument._hasNamespaces||q._namespace===null&&q._namespacePrefix===null&&q._localName!=="xmlns"||(K._nodeDocument._hasNamespaces=!0)}function L(G,q){return q._namespace===x.namespace.HTML&&q._nodeDocument._type==="html"&&(G=G.toLowerCase()),q._attributeList._asArray().find(function(K){return K._qualifiedName===G})||null}function W(G,q,K){var Z=G||null;return K._attributeList._asArray().find(function(J){return J._namespace===Z&&J._localName===q})||null}m.element_has=function(G,q){return q._attributeList._asArray().indexOf(G)!==-1},m.element_change=B,m.element_append=z,m.element_remove=F,m.element_replace=I,m.element_getAnAttributeByName=L,m.element_getAnAttributeByNamespaceAndLocalName=W,m.element_getAnAttributeValue=function(G,q,K){K===void 0&&(K="");var Z=W(K,q,G);return Z===null?"":Z._value},m.element_setAnAttribute=function(G,q){if(G._element!==null&&G._element!==q)throw new C.InUseAttributeError("This attribute already exists in the document: "+G._qualifiedName+" as a child of "+G._element._qualifiedName+".");var K=W(G._namespace||"",G._localName,q);return K===G?G:(K!==null?I(K,G,q):z(G,q),K)},m.element_setAnAttributeValue=function(G,q,K,Z,J){Z===void 0&&(Z=null),J===void 0&&(J=null);var te=W(J||"",q,G);if(te===null){var Q=A.create_attr(G._nodeDocument,q);return Q._namespace=J,Q._namespacePrefix=Z,Q._value=K,void z(Q,G)}B(te,G,K)},m.element_removeAnAttributeByName=function(G,q){var K=L(G,q);return K!==null&&F(K,q),K},m.element_removeAnAttributeByNamespaceAndLocalName=function(G,q,K){var Z=W(G,q,K);return Z!==null&&F(Z,K),Z},m.element_createAnElement=function(G,q,K,Z,J,te){Z===void 0&&(Z=null),J===void 0&&(J=null),te===void 0&&(te=!1);var Q=null;if(!g.dom.features.customElements)return(Q=A.create_element(G,q,K,Z))._customElementState="uncustomized",Q._customElementDefinition=null,Q._is=J,Q;var me=_.customElement_lookUpACustomElementDefinition(G,K,q,J);if(me!==null&&me.name!==me.localName)(Q=new(R.document_elementInterface(q,x.namespace.HTML)))._localName=q,Q._namespace=x.namespace.HTML,Q._namespacePrefix=Z,Q._customElementState="undefined",Q._customElementDefinition=null,Q._is=J,Q._nodeDocument=G,te?_.customElement_upgrade(me,Q):_.customElement_enqueueACustomElementUpgradeReaction(Q,me);else if(me!==null)if(te)try{var Xe=new me.constructor;if(console.assert(Xe._customElementState!==void 0),console.assert(Xe._customElementDefinition!==void 0),console.assert(Xe._namespace===x.namespace.HTML),Xe._attributeList.length!==0)throw new C.NotSupportedError("Custom element already has attributes.");if(Xe._children.size!==0)throw new C.NotSupportedError("Custom element already has child nodes.");if(Xe._parent!==null)throw new C.NotSupportedError("Custom element already has a parent node.");if(Xe._nodeDocument!==G)throw new C.NotSupportedError("Custom element is already in a document.");if(Xe._localName!==q)throw new C.NotSupportedError("Custom element has a different local name.");Xe._namespacePrefix=Z,Xe._is=null}catch{(Q=A.create_htmlUnknownElement(G,q,x.namespace.HTML,Z))._customElementState="failed",Q._customElementDefinition=null,Q._is=null}else(Q=A.create_htmlElement(G,q,x.namespace.HTML,Z))._customElementState="undefined",Q._customElementDefinition=null,Q._is=null,_.customElement_enqueueACustomElementUpgradeReaction(Q,me);else(Q=new(R.document_elementInterface(q,K)))._localName=q,Q._namespace=K,Q._namespacePrefix=Z,Q._customElementState="uncustomized",Q._customElementDefinition=null,Q._is=J,Q._nodeDocument=G,K!==x.namespace.HTML||J===null&&!_.customElement_isValidCustomElementName(q)||(Q._customElementState="undefined");if(Q===null)throw new Error("Unable to create element.");return Q},m.element_insertAdjacent=function(G,q,K){switch(q.toLowerCase()){case"beforebegin":return G._parent===null?null:E.mutation_preInsert(K,G._parent,G);case"afterbegin":return E.mutation_preInsert(K,G,G._firstChild);case"beforeend":return E.mutation_preInsert(K,G,null);case"afterend":return G._parent===null?null:E.mutation_preInsert(K,G._parent,G._nextSibling);default:throw new C.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(d,m,f){function g(x,w){Error.call(this),this.name="YAMLException",this.reason=x,this.mark=w,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g.prototype.toString=function(x){var w=this.name+": ";return w+=this.reason||"(unknown reason)",!x&&this.mark&&(w+=" "+this.mark.toString()),w},d.exports=g},function(d,m,f){var g=f(39);d.exports=new g({include:[f(181)],implicit:[f(294),f(295)],explicit:[f(296),f(297),f(298),f(299)]})},function(d,m,f){var g=f(16),x=f(79),w=f(40),C=f(24),A=f(56),_=f(14),M=f(115),P=Object.getOwnPropertyDescriptor;m.f=g?P:function(E,R){if(E=C(E),R=A(R,!0),M)try{return P(E,R)}catch{}if(_(E,R))return w(!x.f.call(E,R),E[R])}},function(d,m,f){var g=f(13);d.exports=function(x,w){if(!g(x))return x;var C,A;if(w&&typeof(C=x.toString)=="function"&&!g(A=C.call(x))||typeof(C=x.valueOf)=="function"&&!g(A=C.call(x))||!w&&typeof(C=x.toString)=="function"&&!g(A=C.call(x)))return A;throw TypeError("Can't convert object to primitive value")}},function(d,m,f){var g=f(81),x=f(58),w=g("keys");d.exports=function(C){return w[C]||(w[C]=x(C))}},function(d,m){var f=0,g=Math.random();d.exports=function(x){return"Symbol("+String(x===void 0?"":x)+")_"+(++f+g).toString(36)}},function(d,m,f){var g=f(42);d.exports=Array.isArray||function(x){return g(x)=="Array"}},function(d,m,f){var g,x=f(18),w=f(188),C=f(84),A=f(45),_=f(189),M=f(116),P=f(57),E=P("IE_PROTO"),R=function(){},B=function(F){return"<script>"+F+"<\/script>"},z=function(){try{g=document.domain&&new ActiveXObject("htmlfile")}catch{}var F,I;z=g?function(W){W.write(B("")),W.close();var G=W.parentWindow.Object;return W=null,G}(g):((I=M("iframe")).style.display="none",_.appendChild(I),I.src="javascript:",(F=I.contentWindow.document).open(),F.write(B("document.F=Object")),F.close(),F.F);for(var L=C.length;L--;)delete z.prototype[C[L]];return z()};A[E]=!0,d.exports=Object.create||function(F,I){var L;return F!==null?(R.prototype=x(F),L=new R,R.prototype=null,L[E]=F):L=z(),I===void 0?L:w(L,I)}},function(d,m,f){var g=f(121),x=f(84);d.exports=Object.keys||function(w){return g(w,x)}},function(d,m,f){var g=f(15).f,x=f(14),w=f(5)("toStringTag");d.exports=function(C,A,_){C&&!x(C=_?C:C.prototype,w)&&g(C,w,{configurable:!0,value:A})}},function(d,m,f){var g=f(8),x=f(5),w=f(129),C=x("species");d.exports=function(A){return w>=51||!g(function(){var _=[];return(_.constructor={})[C]=function(){return{foo:1}},_[A](Boolean).foo!==1})}},function(d,m,f){var g=f(4),x=f(122).indexOf,w=f(48),C=f(28),A=[].indexOf,_=!!A&&1/[1].indexOf(1,-0)<0,M=w("indexOf"),P=C("indexOf",{ACCESSORS:!0,1:0});g({target:"Array",proto:!0,forced:_||!M||!P},{indexOf:function(E){return _?A.apply(this,arguments)||0:x(this,E,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(16),x=f(15).f,w=Function.prototype,C=w.toString,A=/^\s*function ([^ (]*)/;g&&!("name"in w)&&x(w,"name",{configurable:!0,get:function(){try{return C.call(this).match(A)[1]}catch{return""}}})},function(d,m,f){var g=f(25),x=f(18),w=f(8),C=f(136),A=RegExp.prototype,_=A.toString,M=w(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),P=_.name!="toString";(M||P)&&g(RegExp.prototype,"toString",function(){var E=x(this),R=String(E.source),B=E.flags;return"/"+R+"/"+String(B===void 0&&E instanceof RegExp&&!("flags"in A)?C.call(E):B)},{unsafe:!0})},function(d,m,f){f(31),f(32),f(33),f(19),f(138),f(20),f(66),f(22),f(23);var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)}),w=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(2),A=f(1),_=function(M){function P(E,R){var B=M.call(this,E)||this;return B._writerOptions=C.applyDefaults(R,{format:"object",wellFormed:!1,group:!1,verbose:!1}),B}return x(P,M),P.prototype.serialize=function(E){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(E,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},P.prototype._process=function(E,R){var B,z,F,I,L,W,G;if(E.length===0)return{};for(var q={},K=!1,Z=0,J=0,te=0,Q=0,me=0;me<E.length;me++){var Xe=E[me];switch(ft=Object.keys(Xe)[0]){case"@":continue;case"#":Z++;break;case"!":J++;break;case"?":te++;break;case"$":Q++;break;default:q[ft]?K=!0:q[ft]=!0}}var Ve=this._getAttrKey(),Ye=this._getNodeKey(A.NodeType.Text),qe=this._getNodeKey(A.NodeType.Comment),et=this._getNodeKey(A.NodeType.ProcessingInstruction),je=this._getNodeKey(A.NodeType.CData);if(Z===1&&E.length===1&&C.isString(E[0]["#"]))return E[0]["#"];if(K){var Ke={};for(me=0;me<E.length;me++)if(Xe=E[me],(ft=Object.keys(Xe)[0])==="@"){var Je=Xe["@"];(He=Object.keys(Je)).length===1?Ke[Ve+He[0]]=Je[He[0]]:Ke[Ve]=Xe["@"]}var at=[];for(me=0;me<E.length;me++)switch(Xe=E[me],ft=Object.keys(Xe)[0]){case"@":break;case"#":at.push(((B={})[Ye]=Xe["#"],B));break;case"!":at.push(((z={})[qe]=Xe["!"],z));break;case"?":at.push(((F={})[et]=Xe["?"],F));break;case"$":at.push(((I={})[je]=Xe.$,I));break;default:if((be=Xe)[ft].length!==0&&C.isArray(be[ft][0])){for(var nt=[],ct=be[ft],pt=0;pt<ct.length;pt++)nt.push(this._process(ct[pt],R));at.push(((L={})[ft]=nt,L))}else R.verbose?at.push(((W={})[ft]=[this._process(be[ft],R)],W)):at.push(((G={})[ft]=this._process(be[ft],R),G))}return Ke[Ye]=at,Ke}var rt=1,ht=1,yt=1,wt=1;for(Ke={},me=0;me<E.length;me++){var ft;switch(Xe=E[me],ft=Object.keys(Xe)[0]){case"@":Je=Xe["@"];var He=Object.keys(Je);if(R.group&&He.length!==1)Ke[Ve]=Je;else for(var le in Je)Ke[Ve+le]=Je[le];break;case"#":rt=this._processSpecItem(Xe["#"],Ke,R.group,Ye,Z,rt);break;case"!":ht=this._processSpecItem(Xe["!"],Ke,R.group,qe,J,ht);break;case"?":yt=this._processSpecItem(Xe["?"],Ke,R.group,et,te,yt);break;case"$":wt=this._processSpecItem(Xe.$,Ke,R.group,je,Q,wt);break;default:var be;if((be=Xe)[ft].length!==0&&C.isArray(be[ft][0])){nt=[],ct=be[ft];for(var we=0;we<ct.length;we++)nt.push(this._process(ct[we],R));Ke[ft]=nt}else R.verbose?Ke[ft]=[this._process(be[ft],R)]:Ke[ft]=this._process(be[ft],R)}}return Ke},P.prototype._processSpecItem=function(E,R,B,z,F,I){var L,W;if(!B&&C.isArray(E)&&F+E.length>2)try{for(var G=w(E),q=G.next();!q.done;q=G.next()){var K=q.value;R[z+(I++).toString()]=K}}catch(Z){L={error:Z}}finally{try{q&&!q.done&&(W=G.return)&&W.call(G)}finally{if(L)throw L.error}}else R[F>1?z+(I++).toString():z]=E;return I},P.prototype.beginElement=function(E){var R,B,z=[];if(this._currentList.length===0)this._currentList.push(((R={})[E]=z,R));else{var F=this._currentList[this._currentList.length-1];this._isElementNode(F,E)?F[E].length!==0&&C.isArray(F[E][0])?F[E].push(z):F[E]=[F[E],z]:this._currentList.push(((B={})[E]=z,B))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=z:this._listRegister.push(z),this._currentList=z},P.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},P.prototype.attribute=function(E,R){var B,z;if(this._currentList.length===0)this._currentList.push({"@":(B={},B[E]=R,B)});else{var F=this._currentList[this._currentList.length-1];this._isAttrNode(F)?F["@"][E]=R:this._currentList.push({"@":(z={},z[E]=R,z)})}},P.prototype.comment=function(E){if(this._currentList.length===0)this._currentList.push({"!":E});else{var R=this._currentList[this._currentList.length-1];this._isCommentNode(R)?C.isArray(R["!"])?R["!"].push(E):R["!"]=[R["!"],E]:this._currentList.push({"!":E})}},P.prototype.text=function(E){if(this._currentList.length===0)this._currentList.push({"#":E});else{var R=this._currentList[this._currentList.length-1];this._isTextNode(R)?C.isArray(R["#"])?R["#"].push(E):R["#"]=[R["#"],E]:this._currentList.push({"#":E})}},P.prototype.instruction=function(E,R){var B=R===""?E:E+" "+R;if(this._currentList.length===0)this._currentList.push({"?":B});else{var z=this._currentList[this._currentList.length-1];this._isInstructionNode(z)?C.isArray(z["?"])?z["?"].push(B):z["?"]=[z["?"],B]:this._currentList.push({"?":B})}},P.prototype.cdata=function(E){if(this._currentList.length===0)this._currentList.push({$:E});else{var R=this._currentList[this._currentList.length-1];this._isCDATANode(R)?C.isArray(R.$)?R.$.push(E):R.$=[R.$,E]:this._currentList.push({$:E})}},P.prototype._isAttrNode=function(E){return"@"in E},P.prototype._isTextNode=function(E){return"#"in E},P.prototype._isCommentNode=function(E){return"!"in E},P.prototype._isInstructionNode=function(E){return"?"in E},P.prototype._isCDATANode=function(E){return"$"in E},P.prototype._isElementNode=function(E,R){return R in E},P.prototype._getAttrKey=function(){return this._builderOptions.convert.att},P.prototype._getNodeKey=function(E){switch(E){case A.NodeType.Comment:return this._builderOptions.convert.comment;case A.NodeType.Text:return this._builderOptions.convert.text;case A.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case A.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},P}(f(50).BaseWriter);m.ObjectWriter=_},function(d,m,f){var g=f(4),x=f(93);g({target:"RegExp",proto:!0,forced:/./.exec!==x},{exec:x})},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(){this._items={},this._nullItems={}}return x.prototype.set=function(w,C){w===null?this._nullItems[C]=!0:(this._items[w]||(this._items[w]={}),this._items[w][C]=!0)},x.prototype.has=function(w,C){return w===null?this._nullItems[C]===!0:!!this._items[w]&&this._items[w][C]===!0},x}();m.LocalNameSet=g},function(d,m,f){var g=this&&this.__read||function(_,M){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var E,R,B=P.call(_),z=[];try{for(;(M===void 0||M-- >0)&&!(E=B.next()).done;)z.push(E.value)}catch(F){R={error:F}}finally{try{E&&!E.done&&(P=B.return)&&P.call(B)}finally{if(R)throw R.error}}return z};Object.defineProperty(m,"__esModule",{value:!0});var x=f(9),w=f(3),C=f(0),A=function(){function _(){}return Object.defineProperty(_.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),_.prototype.addEventListener=function(M,P,E){E===void 0&&(E={passive:!1,once:!1,capture:!1});var R,B=g(C.eventTarget_flattenMore(E),3),z=B[0],F=B[1],I=B[2];P&&(R=w.Guard.isEventListener(P)?P:{handleEvent:P},C.eventTarget_addEventListener(this,{type:M,callback:R,capture:z,passive:F,once:I,removed:!1}))},_.prototype.removeEventListener=function(M,P,E){E===void 0&&(E={capture:!1});var R=C.eventTarget_flatten(E);if(P)for(var B=0;B<this._eventListenerList.length;B++){var z=this._eventListenerList[B];if(z.type===M&&z.capture===R){if(w.Guard.isEventListener(P)&&z.callback===P){C.eventTarget_removeEventListener(this,z,B);break}if(P&&z.callback.handleEvent===P){C.eventTarget_removeEventListener(this,z,B);break}}}},_.prototype.dispatchEvent=function(M){if(M._dispatchFlag||!M._initializedFlag)throw new x.InvalidStateError;return M._isTrusted=!1,C.event_dispatch(M,this)},_.prototype._getTheParent=function(M){return null},_}();m.EventTargetImpl=A},function(d,m,f){var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(34),C=f(0),A=function(_){function M(P){var E=_.call(this)||this;return E._data=P,E}return x(M,_),Object.defineProperty(M.prototype,"data",{get:function(){return this._data},set:function(P){C.characterData_replaceData(this,0,this._data.length,P)},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),M.prototype.substringData=function(P,E){return C.characterData_substringData(this,P,E)},M.prototype.appendData=function(P){return C.characterData_replaceData(this,this._data.length,0,P)},M.prototype.insertData=function(P,E){C.characterData_replaceData(this,P,0,E)},M.prototype.deleteData=function(P,E){C.characterData_replaceData(this,P,E,"")},M.prototype.replaceData=function(P,E,R){C.characterData_replaceData(this,P,E,R)},Object.defineProperty(M.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),M.prototype.before=function(){for(var P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];throw new Error("Mixin: ChildNode not implemented.")},M.prototype.after=function(){for(var P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];throw new Error("Mixin: ChildNode not implemented.")},M.prototype.replaceWith=function(){for(var P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];throw new Error("Mixin: ChildNode not implemented.")},M.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},M}(w.NodeImpl);m.CharacterDataImpl=A},function(d,m,f){var g=this&&this.__values||function(F){var I=typeof Symbol=="function"&&Symbol.iterator,L=I&&F[I],W=0;if(L)return L.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(F,I){var L=typeof Symbol=="function"&&F[Symbol.iterator];if(!L)return F;var W,G,q=L.call(F),K=[];try{for(;(I===void 0||I-- >0)&&!(W=q.next()).done;)K.push(W.value)}catch(Z){G={error:Z}}finally{try{W&&!W.done&&(L=q.return)&&L.call(q)}finally{if(G)throw G.error}}return K},w=this&&this.__spread||function(){for(var F=[],I=0;I<arguments.length;I++)F=F.concat(x(arguments[I]));return F};Object.defineProperty(m,"__esModule",{value:!0});var C=f(6),A=f(3),_=f(2),M=f(17),P=f(51);function E(F){C.dom.window._signalSlots.add(F),P.observer_queueAMutationObserverMicrotask()}function R(F,I){I===void 0&&(I=!1);var L=A.Cast.asNode(F)._parent;if(L===null)return null;var W=L._shadowRoot||null;if(W===null||I&&W._mode!=="open")return null;for(var G=M.tree_getFirstDescendantNode(W,!1,!0,function(q){return A.Guard.isSlot(q)});G!==null;){if(G._name===F._name)return G;G=M.tree_getNextDescendantNode(W,G,!1,!0,function(q){return A.Guard.isSlot(q)})}return null}function B(F){var I,L,W=[],G=M.tree_rootNode(F);if(!A.Guard.isShadowRoot(G))return W;var q=G._host;try{for(var K=g(q._children),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;A.Guard.isSlotable(J)&&R(J)===F&&W.push(J)}}catch(te){I={error:te}}finally{try{Z&&!Z.done&&(L=K.return)&&L.call(K)}finally{if(I)throw I.error}}return W}function z(F){var I,L,W=B(F);if(W.length===F._assignedNodes.length){for(var G=!0,q=0;q<W.length;q++)if(W[q]!==F._assignedNodes[q]){G=!1;break}G||E(F)}F._assignedNodes=W;try{for(var K=g(W),Z=K.next();!Z.done;Z=K.next())Z.value._assignedSlot=F}catch(J){I={error:J}}finally{try{Z&&!Z.done&&(L=K.return)&&L.call(K)}finally{if(I)throw I.error}}}m.shadowTree_signalASlotChange=E,m.shadowTree_isConnected=function(F){return A.Guard.isDocumentNode(M.tree_rootNode(F,!0))},m.shadowTree_isAssigned=function(F){return F._assignedSlot!==null},m.shadowTree_findASlot=R,m.shadowTree_findSlotables=B,m.shadowTree_findFlattenedSlotables=function F(I){var L,W,G,q,K=[],Z=M.tree_rootNode(I);if(!A.Guard.isShadowRoot(Z))return K;var J=B(I);if(_.isEmpty(J))try{for(var te=g(I._children),Q=te.next();!Q.done;Q=te.next()){var me=Q.value;A.Guard.isSlotable(me)&&J.push(me)}}catch(et){L={error:et}}finally{try{Q&&!Q.done&&(W=te.return)&&W.call(te)}finally{if(L)throw L.error}}try{for(var Xe=g(J),Ve=Xe.next();!Ve.done;Ve=Xe.next()){var Ye=Ve.value;if(A.Guard.isSlot(Ye)&&A.Guard.isShadowRoot(M.tree_rootNode(Ye))){var qe=F(Ye);K.push.apply(K,w(qe))}else K.push(Ye)}}catch(et){G={error:et}}finally{try{Ve&&!Ve.done&&(q=Xe.return)&&q.call(Xe)}finally{if(G)throw G.error}}return K},m.shadowTree_assignSlotables=z,m.shadowTree_assignSlotablesForATree=function(F){for(var I=M.tree_getFirstDescendantNode(F,!0,!1,function(L){return A.Guard.isSlot(L)});I!==null;)z(I),I=M.tree_getNextDescendantNode(F,I,!0,!1,function(L){return A.Guard.isSlot(L)})},m.shadowTree_assignASlot=function(F){var I=R(F);I!==null&&z(I)}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,x=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),w=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),C=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),A=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);m.customElement_isValidCustomElementName=function(_){return!!g.test(_)&&!x.has(_)},m.customElement_isValidElementName=function(_){return w.has(_)},m.customElement_isVoidElementName=function(_){return C.has(_)},m.customElement_isValidShadowHostName=function(_){return A.has(_)},m.customElement_enqueueACustomElementUpgradeReaction=function(_,M){},m.customElement_enqueueACustomElementCallbackReaction=function(_,M,P){},m.customElement_upgrade=function(_,M){},m.customElement_tryToUpgrade=function(_){},m.customElement_lookUpACustomElementDefinition=function(_,M,P,E){return null}},function(d,m,f){f(4)({target:"String",proto:!0},{repeat:f(260)})},function(d,m,f){f(279),f(68),f(179),f(94),Object.defineProperty(m,"__esModule",{value:!0});var g=f(109),x=function(){function w(C){this._builderOptions=C,C.parser&&Object.assign(this,C.parser)}return w.prototype._docType=function(C,A,_,M){return C.dtd({name:A,pubID:_,sysID:M})},w.prototype._comment=function(C,A){return C.com(A)},w.prototype._text=function(C,A){return C.txt(A)},w.prototype._instruction=function(C,A,_){return C.ins(A,_)},w.prototype._cdata=function(C,A){return C.dat(A)},w.prototype._element=function(C,A,_){return A===void 0?C.ele(_):C.ele(A,_)},w.prototype._attribute=function(C,A,_,M){return A===void 0?C.att(_,M):C.att(A,_,M)},w.prototype._sanitize=function(C){return g.sanitizeInput(C,this._builderOptions.invalidCharReplacement)},w.prototype._decodeText=function(C){return C==null?C:C.replace(/&(quot|amp|apos|lt|gt);/g,function(A,_){return w._entityTable[_]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(A,_,M){return String.fromCodePoint(parseInt(_||M,_?16:10))})},w.prototype._decodeAttributeValue=function(C){return this._decodeText(C)},w.prototype.parse=function(C,A){return this._parse(C,A)},w.prototype.docType=function(C,A,_,M){return this._docType(C,A,_,M)},w.prototype.comment=function(C,A){return this._comment(C,A)},w.prototype.text=function(C,A){return this._text(C,A)},w.prototype.instruction=function(C,A,_){return this._instruction(C,A,_)},w.prototype.cdata=function(C,A){return this._cdata(C,A)},w.prototype.element=function(C,A,_){return this._element(C,A,_)},w.prototype.attribute=function(C,A,_,M){return this._attribute(C,A,_,M)},w.prototype.sanitize=function(C){return this._sanitize(C)},w._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},w}();m.BaseReader=x},function(d,m,f){var g=f(39);d.exports=g.DEFAULT=new g({include:[f(54)],explicit:[f(300),f(301),f(302)]})},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(185);m.XMLBuilderImpl=g.XMLBuilderImpl;var x=f(305);m.XMLBuilderCBImpl=x.XMLBuilderCBImpl;var w=f(183);m.builder=w.builder,m.create=w.create,m.fragment=w.fragment,m.convert=w.convert;var C=f(310);m.createCB=C.createCB,m.fragmentCB=C.fragmentCB},function(d,m){var f;f=function(){return this}();try{f=f||new Function("return this")()}catch{typeof window=="object"&&(f=window)}d.exports=f},function(d,m,f){var g={}.propertyIsEnumerable,x=Object.getOwnPropertyDescriptor,w=x&&!g.call({1:2},1);m.f=w?function(C){var A=x(this,C);return!!A&&A.enumerable}:g},function(d,m,f){var g=f(11),x=f(21);d.exports=function(w,C){try{x(g,w,C)}catch{g[w]=C}return C}},function(d,m,f){var g=f(44),x=f(118);(d.exports=function(w,C){return x[w]||(x[w]=C!==void 0?C:{})})("versions",[]).push({version:"3.6.5",mode:g?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(d,m,f){var g=f(121),x=f(84).concat("length","prototype");m.f=Object.getOwnPropertyNames||function(w){return g(w,x)}},function(d,m,f){var g=f(47),x=Math.max,w=Math.min;d.exports=function(C,A){var _=g(C);return _<0?x(_+A,0):w(_,A)}},function(d,m){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(d,m){m.f=Object.getOwnPropertySymbols},function(d,m,f){var g=f(8);d.exports=!!Object.getOwnPropertySymbols&&!g(function(){return!String(Symbol())})},function(d,m,f){var g=f(127);d.exports=function(x,w,C){if(g(x),w===void 0)return x;switch(C){case 0:return function(){return x.call(w)};case 1:return function(A){return x.call(w,A)};case 2:return function(A,_){return x.call(w,A,_)};case 3:return function(A,_,M){return x.call(w,A,_,M)}}return function(){return x.apply(w,arguments)}}},function(d,m,f){var g=f(4),x=f(195),w=f(132),C=f(133),A=f(62),_=f(21),M=f(25),P=f(5),E=f(44),R=f(49),B=f(131),z=B.IteratorPrototype,F=B.BUGGY_SAFARI_ITERATORS,I=P("iterator"),L=function(){return this};d.exports=function(W,G,q,K,Z,J,te){x(q,G,K);var Q,me,Xe,Ve=function(at){if(at===Z&&Ke)return Ke;if(!F&&at in et)return et[at];switch(at){case"keys":case"values":case"entries":return function(){return new q(this,at)}}return function(){return new q(this)}},Ye=G+" Iterator",qe=!1,et=W.prototype,je=et[I]||et["@@iterator"]||Z&&et[Z],Ke=!F&&je||Ve(Z),Je=G=="Array"&&et.entries||je;if(Je&&(Q=w(Je.call(new W)),z!==Object.prototype&&Q.next&&(E||w(Q)===z||(C?C(Q,z):typeof Q[I]!="function"&&_(Q,I,L)),A(Q,Ye,!0,!0),E&&(R[Ye]=L))),Z=="values"&&je&&je.name!=="values"&&(qe=!0,Ke=function(){return je.call(this)}),E&&!te||et[I]===Ke||_(et,I,Ke),R[G]=Ke,Z)if(me={values:Ve("values"),keys:J?Ke:Ve("keys"),entries:Ve("entries")},te)for(Xe in me)(F||qe||!(Xe in et))&&M(et,Xe,me[Xe]);else g({target:G,proto:!0,forced:F||qe},me);return me}},function(d,m,f){var g=f(4),x=f(13),w=f(59),C=f(83),A=f(26),_=f(24),M=f(134),P=f(5),E=f(63),R=f(28),B=E("slice"),z=R("slice",{ACCESSORS:!0,0:0,1:2}),F=P("species"),I=[].slice,L=Math.max;g({target:"Array",proto:!0,forced:!B||!z},{slice:function(W,G){var q,K,Z,J=_(this),te=A(J.length),Q=C(W,te),me=C(G===void 0?te:G,te);if(w(J)&&(typeof(q=J.constructor)!="function"||q!==Array&&!w(q.prototype)?x(q)&&(q=q[F])===null&&(q=void 0):q=void 0,q===Array||q===void 0))return I.call(J,Q,me);for(K=new(q===void 0?Array:q)(L(me-Q,0)),Z=0;Q<me;Q++,Z++)Q in J&&M(K,Z,J[Q]);return K.length=Z,K}})},function(d,m,f){var g={};g[f(5)("toStringTag")]="z",d.exports=String(g)==="[object z]"},function(d,m,f){f(19),f(138),f(20),f(92),f(22),f(23),Object.defineProperty(m,"__esModule",{value:!0}),m.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,skipWhitespaceOnlyText:!0,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},m.XMLBuilderOptionKeys=new Set(Object.keys(m.DefaultBuilderOptions)),m.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(d,m,f){var g=f(139),x=f(143);d.exports=g("Set",function(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}},x)},function(d,m,f){var g,x,w=f(136),C=f(221),A=RegExp.prototype.exec,_=String.prototype.replace,M=A,P=(g=/a/,x=/b*/g,A.call(g,"a"),A.call(x,"a"),g.lastIndex!==0||x.lastIndex!==0),E=C.UNSUPPORTED_Y||C.BROKEN_CARET,R=/()??/.exec("")[1]!==void 0;(P||R||E)&&(M=function(B){var z,F,I,L,W=this,G=E&&W.sticky,q=w.call(W),K=W.source,Z=0,J=B;return G&&((q=q.replace("y","")).indexOf("g")===-1&&(q+="g"),J=String(B).slice(W.lastIndex),W.lastIndex>0&&(!W.multiline||W.multiline&&B[W.lastIndex-1]!==`
`)&&(K="(?: "+K+")",J=" "+J,Z++),F=new RegExp("^(?:"+K+")",q)),R&&(F=new RegExp("^"+K+"$(?!\\s)",q)),P&&(z=W.lastIndex),I=A.call(G?F:W,J),G?I?(I.input=I.input.slice(Z),I[0]=I[0].slice(Z),I.index=W.lastIndex,W.lastIndex+=I[0].length):W.lastIndex=0:P&&I&&(W.lastIndex=W.global?I.index+I[0].length:z),R&&I&&I.length>1&&_.call(I[0],F,function(){for(L=1;L<arguments.length-2;L++)arguments[L]===void 0&&(I[L]=void 0)}),I}),d.exports=M},function(d,m,f){var g=f(225),x=f(18),w=f(27),C=f(26),A=f(47),_=f(35),M=f(226),P=f(227),E=Math.max,R=Math.min,B=Math.floor,z=/\$([$&'`]|\d\d?|<[^>]*>)/g,F=/\$([$&'`]|\d\d?)/g;g("replace",2,function(I,L,W,G){var q=G.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,K=G.REPLACE_KEEPS_$0,Z=q?"$":"$0";return[function(te,Q){var me=_(this),Xe=te==null?void 0:te[I];return Xe!==void 0?Xe.call(te,me,Q):L.call(String(me),te,Q)},function(te,Q){if(!q&&K||typeof Q=="string"&&Q.indexOf(Z)===-1){var me=W(L,te,this,Q);if(me.done)return me.value}var Xe=x(te),Ve=String(this),Ye=typeof Q=="function";Ye||(Q=String(Q));var qe=Xe.global;if(qe){var et=Xe.unicode;Xe.lastIndex=0}for(var je=[];;){var Ke=P(Xe,Ve);if(Ke===null||(je.push(Ke),!qe))break;String(Ke[0])===""&&(Xe.lastIndex=M(Ve,C(Xe.lastIndex),et))}for(var Je,at="",nt=0,ct=0;ct<je.length;ct++){Ke=je[ct];for(var pt=String(Ke[0]),rt=E(R(A(Ke.index),Ve.length),0),ht=[],yt=1;yt<Ke.length;yt++)ht.push((Je=Ke[yt])===void 0?Je:String(Je));var wt=Ke.groups;if(Ye){var ft=[pt].concat(ht,rt,Ve);wt!==void 0&&ft.push(wt);var He=String(Q.apply(void 0,ft))}else He=J(pt,Ve,rt,ht,wt,Q);rt>=nt&&(at+=Ve.slice(nt,rt)+He,nt=rt+pt.length)}return at+Ve.slice(nt)}];function J(te,Q,me,Xe,Ve,Ye){var qe=me+te.length,et=Xe.length,je=F;return Ve!==void 0&&(Ve=w(Ve),je=z),L.call(Ye,je,function(Ke,Je){var at;switch(Je.charAt(0)){case"$":return"$";case"&":return te;case"`":return Q.slice(0,me);case"'":return Q.slice(qe);case"<":at=Ve[Je.slice(1,-1)];break;default:var nt=+Je;if(nt===0)return Ke;if(nt>et){var ct=B(nt/10);return ct===0?Ke:ct<=et?Xe[ct-1]===void 0?Je.charAt(1):Xe[ct-1]+Je.charAt(1):Ke}at=Xe[nt-1]}return at===void 0?"":at})}})},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(){this._items={},this._nullItems=[]}return x.prototype.copy=function(){var w=new x;for(var C in this._items)w._items[C]=this._items[C].slice(0);return w._nullItems=this._nullItems.slice(0),w},x.prototype.get=function(w,C){var A=C===null?this._nullItems:this._items[C]||null;if(A===null)return null;for(var _=null,M=0;M<A.length;M++)if((_=A[M])===w)return _;return _},x.prototype.has=function(w,C){var A=C===null?this._nullItems:this._items[C]||null;return A!==null&&A.indexOf(w)!==-1},x.prototype.hasPrefix=function(w){if(this._nullItems.indexOf(w)!==-1)return!0;for(var C in this._items)if(this._items[C].indexOf(w)!==-1)return!0;return!1},x.prototype.set=function(w,C){var A=C===null?this._nullItems:this._items[C]||null;C!==null&&A===null?this._items[C]=[w]:A.push(w)},x}();m.NamespacePrefixMap=g},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.Surrogate=/[\uD800-\uDFFF]/,m.ScalarValue=/[\uD800-\uDFFF]/,m.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,m.ASCIICodePoint=/[\u0000-\u007F]/,m.ASCIITabOrNewLine=/[\t\n\r]/,m.ASCIIWhiteSpace=/[\t\n\f\r ]/,m.C0Control=/[\u0000-\u001F]/,m.C0ControlOrSpace=/[\u0000-\u001F ]/,m.Control=/[\u0000-\u001F\u007F-\u009F]/,m.ASCIIDigit=/[0-9]/,m.ASCIIUpperHexDigit=/[0-9A-F]/,m.ASCIILowerHexDigit=/[0-9a-f]/,m.ASCIIHexDigit=/[0-9A-Fa-f]/,m.ASCIIUpperAlpha=/[A-Z]/,m.ASCIILowerAlpha=/[a-z]/,m.ASCIIAlpha=/[A-Za-z]/,m.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(d,m,f){var g=this&&this.__values||function(Q){var me=typeof Symbol=="function"&&Symbol.iterator,Xe=me&&Q[me],Ve=0;if(Xe)return Xe.call(Q);if(Q&&typeof Q.length=="number")return{next:function(){return Q&&Ve>=Q.length&&(Q=void 0),{value:Q&&Q[Ve++],done:!Q}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(Q,me){var Xe=typeof Symbol=="function"&&Q[Symbol.iterator];if(!Xe)return Q;var Ve,Ye,qe=Xe.call(Q),et=[];try{for(;(me===void 0||me-- >0)&&!(Ve=qe.next()).done;)et.push(Ve.value)}catch(je){Ye={error:je}}finally{try{Ve&&!Ve.done&&(Xe=qe.return)&&Xe.call(qe)}finally{if(Ye)throw Ye.error}}return et},w=this&&this.__spread||function(){for(var Q=[],me=0;me<arguments.length;me++)Q=Q.concat(x(arguments[me]));return Q};Object.defineProperty(m,"__esModule",{value:!0});var C=f(6),A=f(1),_=f(3),M=f(171),P=f(104),E=f(9),R=f(17),B=f(72),z=f(30);function F(Q,me){me===void 0&&(me=void 0),me===void 0&&(me=null);var Xe=I(Q,me,new Date,{});return Xe._isTrusted=!0,Xe}function I(Q,me,Xe,Ve){var Ye=new Q("");return Ye._initializedFlag=!0,Ye._timeStamp=Xe.getTime(),Object.assign(Ye,Ve),C.dom.features.steps&&z.dom_runEventConstructingSteps(Ye),Ye}function L(Q,me,Xe,Ve){var Ye,qe,et,je;Xe===void 0&&(Xe=!1),Ve===void 0&&(Ve={value:!1});var Ke=!1;Q._dispatchFlag=!0;var Je=me;if(Xe){var at=me._associatedDocument;_.Guard.isDocumentNode(at)&&(Je=at)}var nt=null,ct=R.tree_retarget(Q._relatedTarget,me);if(me!==ct||me===Q._relatedTarget){var pt=[];try{for(var rt=g(Q._touchTargetList),ht=rt.next();!ht.done;ht=rt.next()){var yt=ht.value;pt.push(R.tree_retarget(yt,me))}}catch(ut){Ye={error:ut}}finally{try{ht&&!ht.done&&(qe=rt.return)&&qe.call(rt)}finally{if(Ye)throw Ye.error}}W(Q,me,Je,ct,pt,!1);var wt=_.Guard.isMouseEvent(Q)&&Q._type==="click";wt&&me._activationBehavior!==void 0&&(nt=me);for(var ft=_.Guard.isSlotable(me)&&B.shadowTree_isAssigned(me)?me:null,He=!1,le=me._getTheParent(Q);le!==null&&_.Guard.isNode(le);){if(ft!==null){if(!_.Guard.isSlot(le))throw new Error("Parent node of a slotable should be a slot.");ft=null;var be=R.tree_rootNode(le,!0);_.Guard.isShadowRoot(be)&&be._mode==="closed"&&(He=!0)}_.Guard.isSlotable(le)&&B.shadowTree_isAssigned(le)&&(ft=le),ct=R.tree_retarget(Q._relatedTarget,le),pt=[];try{for(var we=(et=void 0,g(Q._touchTargetList)),ze=we.next();!ze.done;ze=we.next())yt=ze.value,pt.push(R.tree_retarget(yt,le))}catch(ut){et={error:ut}}finally{try{ze&&!ze.done&&(je=we.return)&&je.call(we)}finally{if(et)throw et.error}}_.Guard.isWindow(le)||_.Guard.isNode(le)&&_.Guard.isNode(me)&&R.tree_isAncestorOf(R.tree_rootNode(me,!0),le,!0,!0)?(wt&&Q._bubbles&&nt===null&&le._activationBehavior&&(nt=le),W(Q,le,null,ct,pt,He)):le===ct?le=null:(me=le,wt&&nt===null&&me._activationBehavior&&(nt=me),W(Q,le,me,ct,pt,He)),le!==null&&(le=le._getTheParent(Q)),He=!1}for(var Ze=null,Qe=Q._path,st=Qe.length-1;st>=0;st--)if((ot=Qe[st]).shadowAdjustedTarget!==null){Ze=ot;break}if(Ze!==null)if(_.Guard.isNode(Ze.shadowAdjustedTarget)&&_.Guard.isShadowRoot(R.tree_rootNode(Ze.shadowAdjustedTarget,!0)))Ke=!0;else if(_.Guard.isNode(Ze.relatedTarget)&&_.Guard.isShadowRoot(R.tree_rootNode(Ze.relatedTarget,!0)))Ke=!0;else for(var lt=0;lt<Ze.touchTargetList.length;lt++){var ot=Ze.touchTargetList[lt];if(_.Guard.isNode(ot)&&_.Guard.isShadowRoot(R.tree_rootNode(ot,!0))){Ke=!0;break}}for(nt!==null&&nt._legacyPreActivationBehavior!==void 0&&nt._legacyPreActivationBehavior(Q),st=Qe.length-1;st>=0;st--)(ot=Qe[st]).shadowAdjustedTarget!==null?Q._eventPhase=A.EventPhase.AtTarget:Q._eventPhase=A.EventPhase.Capturing,G(ot,Q,"capturing",Ve);for(st=0;st<Qe.length;st++){if((ot=Qe[st]).shadowAdjustedTarget!==null)Q._eventPhase=A.EventPhase.AtTarget;else{if(!Q._bubbles)continue;Q._eventPhase=A.EventPhase.Bubbling}G(ot,Q,"bubbling",Ve)}}return Q._eventPhase=A.EventPhase.None,Q._currentTarget=null,Q._path=[],Q._dispatchFlag=!1,Q._stopPropagationFlag=!1,Q._stopImmediatePropagationFlag=!1,Ke&&(Q._target=null,Q._relatedTarget=null,Q._touchTargetList=[]),nt!==null&&(Q._canceledFlag||nt._activationBehavior===void 0?nt._legacyCanceledActivationBehavior!==void 0&&nt._legacyCanceledActivationBehavior(Q):nt._activationBehavior(Q)),!Q._canceledFlag}function W(Q,me,Xe,Ve,Ye,qe){var et=!1;_.Guard.isNode(me)&&_.Guard.isShadowRoot(R.tree_rootNode(me))&&(et=!0);var je=!1;_.Guard.isShadowRoot(me)&&me._mode==="closed"&&(je=!0),Q._path.push({invocationTarget:me,invocationTargetInShadowTree:et,shadowAdjustedTarget:Xe,relatedTarget:Ve,touchTargetList:Ye,rootOfClosedTree:je,slotInClosedTree:qe})}function G(Q,me,Xe,Ve){Ve===void 0&&(Ve={value:!1});for(var Ye=me._path,qe=-1,et=0;et<Ye.length;et++)if(Ye[et]===Q){qe=et;break}if(qe!==-1){var je=Ye[qe];(je.shadowAdjustedTarget!==null||qe>0&&(je=Ye[qe-1]).shadowAdjustedTarget!==null)&&(me._target=je.shadowAdjustedTarget)}if(me._relatedTarget=Q.relatedTarget,me._touchTargetList=Q.touchTargetList,!me._stopPropagationFlag){me._currentTarget=Q.invocationTarget;var Ke=me._currentTarget._eventListenerList,Je=new(Array.bind.apply(Array,w([void 0],Ke)));if(!q(me,Je,Xe,Q,Ve)&&me._isTrusted){var at=me._type;at==="animationend"?me._type="webkitAnimationEnd":at==="animationiteration"?me._type="webkitAnimationIteration":at==="animationstart"?me._type="webkitAnimationStart":at==="transitionend"&&(me._type="webkitTransitionEnd"),q(me,Je,Xe,Q,Ve),me._type=at}}}function q(Q,me,Xe,Ve,Ye){Ye===void 0&&(Ye={value:!1});for(var qe=!1,et=0;et<me.length;et++){var je=me[et];if(!je.removed){if(Q._type!==je.type||(qe=!0,Xe==="capturing"&&!je.capture)||Xe==="bubbling"&&je.capture)continue;if(je.once&&Q._currentTarget!==null){for(var Ke=Q._currentTarget,Je=-1,at=0;at<Ke._eventListenerList.length;at++)if(Ke._eventListenerList[at]===je){Je=at;break}Je!==-1&&Ke._eventListenerList.splice(Je,1)}var nt=void 0,ct=void 0;_.Guard.isWindow(nt)&&(ct=nt._currentEvent,Ve.invocationTargetInShadowTree===!1&&(nt._currentEvent=Q)),je.passive&&(Q._inPassiveListenerFlag=!0);try{je.callback.handleEvent.call(Q._currentTarget,Q)}catch{Ye.value=!0}if(je.passive&&(Q._inPassiveListenerFlag=!1),_.Guard.isWindow(nt)&&(nt._currentEvent=ct),Q._stopImmediatePropagationFlag)return qe}}return qe}function K(Q,me){return null}function Z(Q,me){return null}function J(Q,me){}function te(Q,me){}m.event_setTheCanceledFlag=function(Q){Q._cancelable&&!Q._inPassiveListenerFlag&&(Q._canceledFlag=!0)},m.event_initialize=function(Q,me,Xe,Ve){Q._initializedFlag=!0,Q._stopPropagationFlag=!1,Q._stopImmediatePropagationFlag=!1,Q._canceledFlag=!1,Q._isTrusted=!1,Q._target=null,Q._type=me,Q._bubbles=Xe,Q._cancelable=Ve},m.event_createAnEvent=F,m.event_innerEventCreationSteps=I,m.event_dispatch=L,m.event_appendToAnEventPath=W,m.event_invoke=G,m.event_innerInvoke=q,m.event_fireAnEvent=function(Q,me,Xe,Ve,Ye){Xe===void 0&&(Xe=P.EventImpl);var qe=F(Xe);if(qe._type=Q,Ve)for(var et in Ve)qe[et]=Ve[et];return L(qe,me,Ye)},m.event_createLegacyEvent=function(Q){var me=null;switch(Q.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":me=M.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":me=P.EventImpl}if(me===null)throw new E.NotSupportedError("Event constructor not found for interface "+Q+".");var Xe=new me("");return Xe._type="",Xe._timeStamp=new Date().getTime(),Xe._isTrusted=!1,Xe._initializedFlag=!1,Xe},m.event_getterEventHandlerIDLAttribute=function(Q,me){return null},m.event_setterEventHandlerIDLAttribute=function(Q,me,Xe){},m.event_determineTheTargetOfAnEventHandler=K,m.event_getTheCurrentValueOfAnEventHandler=Z,m.event_activateAnEventHandler=J,m.event_deactivateAnEventHandler=te},function(d,m,f){var g,x=this&&this.__extends||(g=function(W,G){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,K){q.__proto__=K}||function(q,K){for(var Z in K)K.hasOwnProperty(Z)&&(q[Z]=K[Z])})(W,G)},function(W,G){function q(){this.constructor=W}g(W,G),W.prototype=G===null?Object.create(G):(q.prototype=G.prototype,new q)}),w=this&&this.__values||function(W){var G=typeof Symbol=="function"&&Symbol.iterator,q=G&&W[G],K=0;if(q)return q.call(W);if(W&&typeof W.length=="number")return{next:function(){return W&&K>=W.length&&(W=void 0),{value:W&&W[K++],done:!W}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")},C=this&&this.__read||function(W,G){var q=typeof Symbol=="function"&&W[Symbol.iterator];if(!q)return W;var K,Z,J=q.call(W),te=[];try{for(;(G===void 0||G-- >0)&&!(K=J.next()).done;)te.push(K.value)}catch(Q){Z={error:Q}}finally{try{K&&!K.done&&(q=J.return)&&q.call(J)}finally{if(Z)throw Z.error}}return te};Object.defineProperty(m,"__esModule",{value:!0});var A=f(6),_=f(1),M=f(9),P=f(34),E=f(3),R=f(2),B=f(7),z=f(152),F=f(0),I=f(12),L=function(W){function G(){var q=W.call(this)||this;return q._children=new Set,q._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},q._contentType="application/xml",q._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},q._origin=null,q._type="xml",q._mode="no-quirks",q._documentElement=null,q._hasNamespaces=!1,q._nodeDocumentOverwrite=null,q}return x(G,W),Object.defineProperty(G.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(q){this._nodeDocumentOverwrite=q},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=F.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"URL",{get:function(){return z.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"doctype",{get:function(){var q,K;try{for(var Z=w(this._children),J=Z.next();!J.done;J=Z.next()){var te=J.value;if(E.Guard.isDocumentTypeNode(te))return te}}catch(Q){q={error:Q}}finally{try{J&&!J.done&&(K=Z.return)&&K.call(Z)}finally{if(q)throw q.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),G.prototype.getElementsByTagName=function(q){return F.node_listOfElementsWithQualifiedName(q,this)},G.prototype.getElementsByTagNameNS=function(q,K){return F.node_listOfElementsWithNamespace(q,K,this)},G.prototype.getElementsByClassName=function(q){return F.node_listOfElementsWithClassNames(q,this)},G.prototype.createElement=function(q,K){if(!F.xml_isName(q))throw new M.InvalidCharacterError;this._type==="html"&&(q=q.toLowerCase());var Z=null;K!==void 0&&(Z=R.isString(K)?K:K.is);var J=this._type==="html"||this._contentType==="application/xhtml+xml"?B.namespace.HTML:null;return F.element_createAnElement(this,q,J,null,Z,!0)},G.prototype.createElementNS=function(q,K,Z){return F.document_internalCreateElementNS(this,q,K,Z)},G.prototype.createDocumentFragment=function(){return F.create_documentFragment(this)},G.prototype.createTextNode=function(q){return F.create_text(this,q)},G.prototype.createCDATASection=function(q){if(this._type==="html")throw new M.NotSupportedError;if(q.indexOf("]]>")!==-1)throw new M.InvalidCharacterError;return F.create_cdataSection(this,q)},G.prototype.createComment=function(q){return F.create_comment(this,q)},G.prototype.createProcessingInstruction=function(q,K){if(!F.xml_isName(q))throw new M.InvalidCharacterError;if(K.indexOf("?>")!==-1)throw new M.InvalidCharacterError;return F.create_processingInstruction(this,q,K)},G.prototype.importNode=function(q,K){if(K===void 0&&(K=!1),E.Guard.isDocumentNode(q)||E.Guard.isShadowRoot(q))throw new M.NotSupportedError;return F.node_clone(q,this,K)},G.prototype.adoptNode=function(q){if(E.Guard.isDocumentNode(q))throw new M.NotSupportedError;if(E.Guard.isShadowRoot(q))throw new M.HierarchyRequestError;return F.document_adopt(q,this),q},G.prototype.createAttribute=function(q){if(!F.xml_isName(q))throw new M.InvalidCharacterError;return this._type==="html"&&(q=q.toLowerCase()),F.create_attr(this,q)},G.prototype.createAttributeNS=function(q,K){var Z=C(F.namespace_validateAndExtract(q,K),3),J=Z[0],te=Z[1],Q=Z[2],me=F.create_attr(this,Q);return me._namespace=J,me._namespacePrefix=te,me},G.prototype.createEvent=function(q){return F.event_createLegacyEvent(q)},G.prototype.createRange=function(){var q=F.create_range();return q._start=[this,0],q._end=[this,0],q},G.prototype.createNodeIterator=function(q,K,Z){K===void 0&&(K=_.WhatToShow.All),Z===void 0&&(Z=null);var J=F.create_nodeIterator(q,q,!0);return J._whatToShow=K,J._iteratorCollection=F.create_nodeList(q),R.isFunction(Z)?(J._filter=F.create_nodeFilter(),J._filter.acceptNode=Z):J._filter=Z,J},G.prototype.createTreeWalker=function(q,K,Z){K===void 0&&(K=_.WhatToShow.All),Z===void 0&&(Z=null);var J=F.create_treeWalker(q,q);return J._whatToShow=K,R.isFunction(Z)?(J._filter=F.create_nodeFilter(),J._filter.acceptNode=Z):J._filter=Z,J},G.prototype._getTheParent=function(q){return q._type==="load"?null:A.dom.window},G.prototype.getElementById=function(q){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(G.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),G.prototype.prepend=function(){for(var q=[],K=0;K<arguments.length;K++)q[K]=arguments[K];throw new Error("Mixin: ParentNode not implemented.")},G.prototype.append=function(){for(var q=[],K=0;K<arguments.length;K++)q[K]=arguments[K];throw new Error("Mixin: ParentNode not implemented.")},G.prototype.querySelector=function(q){throw new Error("Mixin: ParentNode not implemented.")},G.prototype.querySelectorAll=function(q){throw new Error("Mixin: ParentNode not implemented.")},G}(P.NodeImpl);m.DocumentImpl=L,I.idl_defineConst(L.prototype,"_nodeType",_.NodeType.Document)},function(d,m,f){var g,x=this&&this.__extends||(g=function(z,F){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,L){I.__proto__=L}||function(I,L){for(var W in L)L.hasOwnProperty(W)&&(I[W]=L[W])})(z,F)},function(z,F){function I(){this.constructor=z}g(z,F),z.prototype=F===null?Object.create(F):(I.prototype=F.prototype,new I)}),w=this&&this.__values||function(z){var F=typeof Symbol=="function"&&Symbol.iterator,I=F&&z[F],L=0;if(I)return I.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&L>=z.length&&(z=void 0),{value:z&&z[L++],done:!z}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")},C=this&&this.__read||function(z,F){var I=typeof Symbol=="function"&&z[Symbol.iterator];if(!I)return z;var L,W,G=I.call(z),q=[];try{for(;(F===void 0||F-- >0)&&!(L=G.next()).done;)q.push(L.value)}catch(K){W={error:K}}finally{try{L&&!L.done&&(I=G.return)&&I.call(G)}finally{if(W)throw W.error}}return q};Object.defineProperty(m,"__esModule",{value:!0});var A=f(1),_=f(34),M=f(9),P=f(7),E=f(0),R=f(12),B=function(z){function F(){var I=z.call(this)||this;return I._children=new Set,I._namespace=null,I._namespacePrefix=null,I._localName="",I._customElementState="undefined",I._customElementDefinition=null,I._is=null,I._shadowRoot=null,I._attributeList=E.create_namedNodeMap(I),I._attributeChangeSteps=[],I._name="",I._assignedSlot=null,I}return x(F,z),Object.defineProperty(F.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"id",{get:function(){return E.element_getAnAttributeValue(this,"id")},set:function(I){E.element_setAnAttributeValue(this,"id",I)},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"className",{get:function(){return E.element_getAnAttributeValue(this,"class")},set:function(I){E.element_setAnAttributeValue(this,"class",I)},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"classList",{get:function(){var I=E.element_getAnAttributeByName("class",this);return I===null&&(I=E.create_attr(this._nodeDocument,"class")),E.create_domTokenList(this,I)},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"slot",{get:function(){return E.element_getAnAttributeValue(this,"slot")},set:function(I){E.element_setAnAttributeValue(this,"slot",I)},enumerable:!0,configurable:!0}),F.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(F.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),F.prototype.getAttributeNames=function(){var I,L,W=[];try{for(var G=w(this._attributeList),q=G.next();!q.done;q=G.next()){var K=q.value;W.push(K._qualifiedName)}}catch(Z){I={error:Z}}finally{try{q&&!q.done&&(L=G.return)&&L.call(G)}finally{if(I)throw I.error}}return W},F.prototype.getAttribute=function(I){var L=E.element_getAnAttributeByName(I,this);return L?L._value:null},F.prototype.getAttributeNS=function(I,L){var W=E.element_getAnAttributeByNamespaceAndLocalName(I,L,this);return W?W._value:null},F.prototype.setAttribute=function(I,L){if(!E.xml_isName(I))throw new M.InvalidCharacterError;this._namespace===P.namespace.HTML&&this._nodeDocument._type==="html"&&(I=I.toLowerCase());for(var W=null,G=0;G<this._attributeList.length;G++){var q=this._attributeList[G];if(q._qualifiedName===I){W=q;break}}if(W===null)return(W=E.create_attr(this._nodeDocument,I))._value=L,void E.element_append(W,this);E.element_change(W,this,L)},F.prototype.setAttributeNS=function(I,L,W){var G=C(E.namespace_validateAndExtract(I,L),3),q=G[0],K=G[1],Z=G[2];E.element_setAnAttributeValue(this,Z,W,K,q)},F.prototype.removeAttribute=function(I){E.element_removeAnAttributeByName(I,this)},F.prototype.removeAttributeNS=function(I,L){E.element_removeAnAttributeByNamespaceAndLocalName(I,L,this)},F.prototype.hasAttribute=function(I){this._namespace===P.namespace.HTML&&this._nodeDocument._type==="html"&&(I=I.toLowerCase());for(var L=0;L<this._attributeList.length;L++)if(this._attributeList[L]._qualifiedName===I)return!0;return!1},F.prototype.toggleAttribute=function(I,L){if(!E.xml_isName(I))throw new M.InvalidCharacterError;this._namespace===P.namespace.HTML&&this._nodeDocument._type==="html"&&(I=I.toLowerCase());for(var W=null,G=0;G<this._attributeList.length;G++){var q=this._attributeList[G];if(q._qualifiedName===I){W=q;break}}return W===null?(L===void 0||L===!0)&&((W=E.create_attr(this._nodeDocument,I))._value="",E.element_append(W,this),!0):L!==void 0&&L!==!1||(E.element_removeAnAttributeByName(I,this),!1)},F.prototype.hasAttributeNS=function(I,L){for(var W=I||null,G=0;G<this._attributeList.length;G++){var q=this._attributeList[G];if(q._namespace===W&&q._localName===L)return!0}return!1},F.prototype.getAttributeNode=function(I){return E.element_getAnAttributeByName(I,this)},F.prototype.getAttributeNodeNS=function(I,L){return E.element_getAnAttributeByNamespaceAndLocalName(I,L,this)},F.prototype.setAttributeNode=function(I){return E.element_setAnAttribute(I,this)},F.prototype.setAttributeNodeNS=function(I){return E.element_setAnAttribute(I,this)},F.prototype.removeAttributeNode=function(I){for(var L=!1,W=0;W<this._attributeList.length;W++)if(this._attributeList[W]===I){L=!0;break}if(!L)throw new M.NotFoundError;return E.element_remove(I,this),I},F.prototype.attachShadow=function(I){if(this._namespace!==P.namespace.HTML)throw new M.NotSupportedError;if(!E.customElement_isValidCustomElementName(this._localName)&&!E.customElement_isValidShadowHostName(this._localName))throw new M.NotSupportedError;if(E.customElement_isValidCustomElementName(this._localName)||this._is!==null){var L=E.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(L!==null&&L.disableShadow===!0)throw new M.NotSupportedError}if(this._shadowRoot!==null)throw new M.NotSupportedError;var W=E.create_shadowRoot(this._nodeDocument,this);return W._mode=I.mode,this._shadowRoot=W,W},Object.defineProperty(F.prototype,"shadowRoot",{get:function(){var I=this._shadowRoot;return I===null||I.mode==="closed"?null:I},enumerable:!0,configurable:!0}),F.prototype.closest=function(I){throw new M.NotImplementedError},F.prototype.matches=function(I){throw new M.NotImplementedError},F.prototype.webkitMatchesSelector=function(I){return this.matches(I)},F.prototype.getElementsByTagName=function(I){return E.node_listOfElementsWithQualifiedName(I,this)},F.prototype.getElementsByTagNameNS=function(I,L){return E.node_listOfElementsWithNamespace(I,L,this)},F.prototype.getElementsByClassName=function(I){return E.node_listOfElementsWithClassNames(I,this)},F.prototype.insertAdjacentElement=function(I,L){return E.element_insertAdjacent(this,I,L)},F.prototype.insertAdjacentText=function(I,L){var W=E.create_text(this._nodeDocument,L);E.element_insertAdjacent(this,I,W)},Object.defineProperty(F.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"_htmlUppercasedQualifiedName",{get:function(){var I=this._qualifiedName;return this._namespace===P.namespace.HTML&&this._nodeDocument._type==="html"&&(I=I.toUpperCase()),I},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),F.prototype.prepend=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];throw new Error("Mixin: ParentNode not implemented.")},F.prototype.append=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];throw new Error("Mixin: ParentNode not implemented.")},F.prototype.querySelector=function(I){throw new Error("Mixin: ParentNode not implemented.")},F.prototype.querySelectorAll=function(I){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(F.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),F.prototype.before=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];throw new Error("Mixin: ChildNode not implemented.")},F.prototype.after=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];throw new Error("Mixin: ChildNode not implemented.")},F.prototype.replaceWith=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];throw new Error("Mixin: ChildNode not implemented.")},F.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(F.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),F._create=function(I,L,W,G){W===void 0&&(W=null),G===void 0&&(G=null);var q=new F;return q._localName=L,q._namespace=W,q._namespacePrefix=G,q._nodeDocument=I,q},F}(_.NodeImpl);m.ElementImpl=B,R.idl_defineConst(B.prototype,"_nodeType",A.NodeType.Element)},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(34),A=f(12),_=function(M){function P(E){E===void 0&&(E=null);var R=M.call(this)||this;return R._children=new Set,R._host=E,R}return x(P,M),P.prototype.getElementById=function(E){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(P.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),P.prototype.prepend=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];throw new Error("Mixin: ParentNode not implemented.")},P.prototype.append=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];throw new Error("Mixin: ParentNode not implemented.")},P.prototype.querySelector=function(E){throw new Error("Mixin: ParentNode not implemented.")},P.prototype.querySelectorAll=function(E){throw new Error("Mixin: ParentNode not implemented.")},P._create=function(E,R){R===void 0&&(R=null);var B=new P(R);return B._nodeDocument=E,B},P}(C.NodeImpl);m.DocumentFragmentImpl=_,A.idl_defineConst(_.prototype,"_nodeType",w.NodeType.DocumentFragment)},function(d,m,f){var g,x=this&&this.__extends||(g=function(E,R){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,z){B.__proto__=z}||function(B,z){for(var F in z)z.hasOwnProperty(F)&&(B[F]=z[F])})(E,R)},function(E,R){function B(){this.constructor=E}g(E,R),E.prototype=R===null?Object.create(R):(B.prototype=R.prototype,new B)}),w=this&&this.__values||function(E){var R=typeof Symbol=="function"&&Symbol.iterator,B=R&&E[R],z=0;if(B)return B.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&z>=E.length&&(E=void 0),{value:E&&E[z++],done:!E}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(1),A=f(71),_=f(0),M=f(12),P=function(E){function R(B){B===void 0&&(B="");var z=E.call(this,B)||this;return z._name="",z._assignedSlot=null,z}return x(R,E),Object.defineProperty(R.prototype,"wholeText",{get:function(){var B,z,F="";try{for(var I=w(_.text_contiguousTextNodes(this,!0)),L=I.next();!L.done;L=I.next())F+=L.value._data}catch(W){B={error:W}}finally{try{L&&!L.done&&(z=I.return)&&z.call(I)}finally{if(B)throw B.error}}return F},enumerable:!0,configurable:!0}),R.prototype.splitText=function(B){return _.text_split(this,B)},Object.defineProperty(R.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),R._create=function(B,z){z===void 0&&(z="");var F=new R(z);return F._nodeDocument=B,F},R}(A.CharacterDataImpl);m.TextImpl=P,M.idl_defineConst(P.prototype,"_nodeType",C.NodeType.Text)},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(){}return Object.defineProperty(x.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),x}();m.AbstractRangeImpl=g},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=function(){function w(C){this._activeFlag=!1,this._root=C,this._whatToShow=g.WhatToShow.All,this._filter=null}return Object.defineProperty(w.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),w}();m.TraverserImpl=x},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=f(0),w=f(12),C=function(){function A(_,M){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=g.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=_,M&&(this._bubbles=M.bubbles||!1,this._cancelable=M.cancelable||!1,this._composedFlag=M.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(A.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),A.prototype.composedPath=function(){var _=[],M=this._path;if(M.length===0)return _;var P=this._currentTarget;if(P===null)throw new Error("Event currentTarget is null.");_.push(P);for(var E=0,R=0,B=M.length-1;B>=0;){if(M[B].rootOfClosedTree&&R++,M[B].invocationTarget===P){E=B;break}M[B].slotInClosedTree&&R--,B--}var z=R,F=R;for(B=E-1;B>=0;)M[B].rootOfClosedTree&&z++,z<=F&&_.unshift(M[B].invocationTarget),M[B].slotInClosedTree&&--z<F&&(F=z),B--;for(z=R,F=R,B=E+1;B<M.length;)M[B].slotInClosedTree&&z++,z<=F&&_.push(M[B].invocationTarget),M[B].rootOfClosedTree&&--z<F&&(F=z),B++;return _},Object.defineProperty(A.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),A.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(A.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(_){_&&this.stopPropagation()},enumerable:!0,configurable:!0}),A.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(A.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(_){_||x.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),A.prototype.preventDefault=function(){x.event_setTheCanceledFlag(this)},Object.defineProperty(A.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),A.prototype.initEvent=function(_,M,P){M===void 0&&(M=!1),P===void 0&&(P=!1),this._dispatchFlag||x.event_initialize(this,_,M,P)},A.NONE=0,A.CAPTURING_PHASE=1,A.AT_TARGET=2,A.BUBBLING_PHASE=3,A}();m.EventImpl=C,w.idl_defineConst(C.prototype,"NONE",0),w.idl_defineConst(C.prototype,"CAPTURING_PHASE",1),w.idl_defineConst(C.prototype,"AT_TARGET",2),w.idl_defineConst(C.prototype,"BUBBLING_PHASE",3)},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=f(9);m.traversal_filter=function(w,C){if(w._activeFlag)throw new x.InvalidStateError;var A=1<<C._nodeType-1;if(!(w.whatToShow&A))return g.FilterResult.Skip;if(!w.filter)return g.FilterResult.Accept;w._activeFlag=!0;var _=g.FilterResult.Reject;try{_=w.filter.acceptNode(C)}catch(M){throw w._activeFlag=!1,M}return w._activeFlag=!1,_}},function(d,m,f){var g=this&&this.__read||function(F,I){var L=typeof Symbol=="function"&&F[Symbol.iterator];if(!L)return F;var W,G,q=L.call(F),K=[];try{for(;(I===void 0||I-- >0)&&!(W=q.next()).done;)K.push(W.value)}catch(Z){G={error:Z}}finally{try{W&&!W.done&&(L=q.return)&&L.call(q)}finally{if(G)throw G.error}}return K},x=this&&this.__values||function(F){var I=typeof Symbol=="function"&&Symbol.iterator,L=I&&F[I],W=0;if(L)return L.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var w=f(6),C=f(3),A=f(2),_=f(99),M=f(73),P=f(17),E=f(173),R=f(30),B=f(52),z=f(37);m.document_elementInterface=function(F,I){return _.ElementImpl},m.document_internalCreateElementNS=function(F,I,L,W){var G=g(E.namespace_validateAndExtract(I,L),3),q=G[0],K=G[1],Z=G[2],J=null;return W!==void 0&&(J=A.isString(W)?W:W.is),B.element_createAnElement(F,Z,q,K,J,!0)},m.document_adopt=function(F,I){var L,W;if(F._nodeDocument!==I||F._parent!==null){var G=F._nodeDocument;if(F._parent&&z.mutation_remove(F,F._parent),I!==G)for(var q=P.tree_getFirstDescendantNode(F,!0,!0);q!==null;){if(q._nodeDocument=I,C.Guard.isElementNode(q))try{for(var K=(L=void 0,x(q._attributeList._asArray())),Z=K.next();!Z.done;Z=K.next())Z.value._nodeDocument=I}catch(J){L={error:J}}finally{try{Z&&!Z.done&&(W=K.return)&&W.call(K)}finally{if(L)throw L.error}}w.dom.features.customElements&&C.Guard.isElementNode(q)&&q._customElementState==="custom"&&M.customElement_enqueueACustomElementCallbackReaction(q,"adoptedCallback",[G,I]),w.dom.features.steps&&R.dom_runAdoptingSteps(q,G),q=P.tree_getNextDescendantNode(F,q,!0,!0)}}}},function(d,m,f){var g=this&&this.__values||function(P){var E=typeof Symbol=="function"&&Symbol.iterator,R=E&&P[E],B=0;if(R)return R.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&B>=P.length&&(P=void 0),{value:P&&P[B++],done:!P}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(3),C=f(9),A=f(17),_=f(51),M=f(30);m.characterData_replaceData=function(P,E,R,B){var z,F,I=A.tree_nodeLength(P);if(E>I)throw new C.IndexSizeError("Offset exceeds character data length. Offset: "+E+", Length: "+I+", Node is "+P.nodeName+".");E+R>I&&(R=I-E),x.dom.features.mutationObservers&&_.observer_queueMutationRecord("characterData",P,null,null,P._data,[],[],null,null);var L=P._data.substring(0,E)+B+P._data.substring(E+R);P._data=L;try{for(var W=g(x.dom.rangeList),G=W.next();!G.done;G=W.next()){var q=G.value;q._start[0]===P&&q._start[1]>E&&q._start[1]<=E+R&&(q._start[1]=E),q._end[0]===P&&q._end[1]>E&&q._end[1]<=E+R&&(q._end[1]=E),q._start[0]===P&&q._start[1]>E+R&&(q._start[1]+=B.length-R),q._end[0]===P&&q._end[1]>E+R&&(q._end[1]+=B.length-R)}}catch(K){z={error:K}}finally{try{G&&!G.done&&(F=W.return)&&F.call(W)}finally{if(z)throw z.error}}x.dom.features.steps&&w.Guard.isTextNode(P)&&P._parent!==null&&M.dom_runChildTextContentChangeSteps(P._parent)},m.characterData_substringData=function(P,E,R){var B=A.tree_nodeLength(P);if(E>B)throw new C.IndexSizeError("Offset exceeds character data length. Offset: "+E+", Length: "+B+", Node is "+P.nodeName+".");return E+R>B?P._data.substr(E):P._data.substr(E,R)}},function(d,m,f){var g=this&&this.__read||function(M,P){var E=typeof Symbol=="function"&&M[Symbol.iterator];if(!E)return M;var R,B,z=E.call(M),F=[];try{for(;(P===void 0||P-- >0)&&!(R=z.next()).done;)F.push(R.value)}catch(I){B={error:I}}finally{try{R&&!R.done&&(E=z.return)&&E.call(z)}finally{if(B)throw B.error}}return F},x=this&&this.__spread||function(){for(var M=[],P=0;P<arguments.length;P++)M=M.concat(g(arguments[P]));return M},w=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(7);function A(M){var P=C.string.splitAStringOnASCIIWhitespace(M);return new Set(P)}function _(M){return x(M).join(" ")}m.orderedSet_parse=A,m.orderedSet_serialize=_,m.orderedSet_sanitize=function(M){return _(A(M))},m.orderedSet_contains=function(M,P,E){var R,B,z,F;try{for(var I=w(P),L=I.next();!L.done;L=I.next()){var W=L.value,G=!1;try{for(var q=(z=void 0,w(M)),K=q.next();!K.done;K=q.next()){var Z=K.value;if(E){if(Z===W){G=!0;break}}else if(Z.toUpperCase()===W.toUpperCase()){G=!0;break}}}catch(J){z={error:J}}finally{try{K&&!K.done&&(F=q.return)&&F.call(q)}finally{if(z)throw z.error}}if(!G)return!1}}catch(J){R={error:J}}finally{try{L&&!L.done&&(B=I.return)&&B.call(I)}finally{if(R)throw R.error}}return!0}},function(d,m,f){f(179),Object.defineProperty(m,"__esModule",{value:!0});var g=f(263),x=f(110),w=f(2);x.dom.setFeatures(!1),m.createDocument=function(){var C=new g.DOMImplementation().createDocument(null,"root",null);return C.documentElement&&C.removeChild(C.documentElement),C},m.sanitizeInput=function(C,A){if(C==null)return C;if(A===void 0)return C+"";var _="";C+="";for(var M=0;M<C.length;M++){var P=C.charCodeAt(M);if(P===9||P===10||P===13||P>=32&&P<=55295||P>=57344&&P<=65533)_+=C.charAt(M);else if(P>=55296&&P<=56319&&M<C.length-1){var E=C.charCodeAt(M+1);E>=56320&&E<=57343?(P=1024*(P-55296)+E-56320+65536,_+=String.fromCodePoint(P),M++):_+=w.isString(A)?A:A(C.charAt(M),M,C)}else _+=w.isString(A)?A:A(C.charAt(M),M,C)}return _}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(2),x=f(153);m.AbortController=x.AbortControllerImpl;var w=f(154);m.AbortSignal=w.AbortSignalImpl;var C=f(102);m.AbstractRange=C.AbstractRangeImpl;var A=f(157);m.Attr=A.AttrImpl;var _=f(158);m.CDATASection=_.CDATASectionImpl;var M=f(71);m.CharacterData=M.CharacterDataImpl;var P=f(264),E=f(159);m.Comment=E.CommentImpl;var R=f(171);m.CustomEvent=R.CustomEventImpl;var B=f(100);m.DocumentFragment=B.DocumentFragmentImpl;var z=f(98);m.Document=z.DocumentImpl;var F=f(265),I=f(155);m.DocumentType=I.DocumentTypeImpl;var L=f(6);m.dom=L.dom;var W=f(148);m.DOMImplementation=W.DOMImplementationImpl;var G=f(170);m.DOMTokenList=G.DOMTokenListImpl;var q=f(99);m.Element=q.ElementImpl;var K=f(104);m.Event=K.EventImpl;var Z=f(70);m.EventTarget=Z.EventTargetImpl;var J=f(161);m.HTMLCollection=J.HTMLCollectionImpl;var te=f(266);m.MutationObserver=te.MutationObserverImpl;var Q=f(169);m.MutationRecord=Q.MutationRecordImpl;var me=f(164);m.NamedNodeMap=me.NamedNodeMapImpl;var Xe=f(168);m.NodeFilter=Xe.NodeFilterImpl;var Ve=f(34);m.Node=Ve.NodeImpl;var Ye=f(166);m.NodeIterator=Ye.NodeIteratorImpl;var qe=f(162);m.NodeList=qe.NodeListImpl;var et=f(163);m.NodeListStatic=et.NodeListStaticImpl;var je=f(267),Ke=f(268),Je=f(269),at=f(160);m.ProcessingInstruction=at.ProcessingInstructionImpl;var nt=f(165);m.Range=nt.RangeImpl;var ct=f(156);m.ShadowRoot=ct.ShadowRootImpl;var pt=f(270),rt=f(271);m.StaticRange=rt.StaticRangeImpl;var ht=f(101);m.Text=ht.TextImpl;var yt=f(103);m.Traverser=yt.TraverserImpl;var wt=f(167);m.TreeWalker=wt.TreeWalkerImpl;var ft=f(149);m.Window=ft.WindowImpl;var He=f(151);m.XMLDocument=He.XMLDocumentImpl,g.applyMixin(q.ElementImpl,P.ChildNodeImpl),g.applyMixin(M.CharacterDataImpl,P.ChildNodeImpl),g.applyMixin(I.DocumentTypeImpl,P.ChildNodeImpl),g.applyMixin(z.DocumentImpl,F.DocumentOrShadowRootImpl),g.applyMixin(ct.ShadowRootImpl,F.DocumentOrShadowRootImpl),g.applyMixin(q.ElementImpl,je.NonDocumentTypeChildNodeImpl),g.applyMixin(M.CharacterDataImpl,je.NonDocumentTypeChildNodeImpl),g.applyMixin(z.DocumentImpl,Ke.NonElementParentNodeImpl),g.applyMixin(B.DocumentFragmentImpl,Ke.NonElementParentNodeImpl),g.applyMixin(z.DocumentImpl,Je.ParentNodeImpl),g.applyMixin(B.DocumentFragmentImpl,Je.ParentNodeImpl),g.applyMixin(q.ElementImpl,Je.ParentNodeImpl),g.applyMixin(ht.TextImpl,pt.SlotableImpl),g.applyMixin(q.ElementImpl,pt.SlotableImpl)},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),function(g){g[g.EOF=0]="EOF",g[g.Declaration=1]="Declaration",g[g.DocType=2]="DocType",g[g.Element=3]="Element",g[g.Text=4]="Text",g[g.CDATA=5]="CDATA",g[g.PI=6]="PI",g[g.Comment=7]="Comment",g[g.ClosingTag=8]="ClosingTag"}(m.TokenType||(m.TokenType={}))},function(d,m,f){f(64),f(20),f(66);var g,x=this&&this.__extends||(g=function(A,_){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var E in P)P.hasOwnProperty(E)&&(M[E]=P[E])})(A,_)},function(A,_){function M(){this.constructor=A}g(A,_),A.prototype=_===null?Object.create(_):(M.prototype=_.prototype,new M)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(2),C=function(A){function _(){return A!==null&&A.apply(this,arguments)||this}return x(_,A),_.prototype._parse=function(M,P){var E=this,R=this._builderOptions,B=null;return w.isFunction(P)?B=this.parse(M,P.apply(this)):w.isArray(P)||w.isSet(P)?w.forEachArray(P,function(z){return B=E.parse(M,z)},this):w.isMap(P)||w.isObject(P)?w.forEachObject(P,function(z,F){if(w.isFunction(F)&&(F=F.apply(E)),R.ignoreConverters||z.indexOf(R.convert.att)!==0)if(R.ignoreConverters||z.indexOf(R.convert.text)!==0)if(R.ignoreConverters||z.indexOf(R.convert.cdata)!==0)if(R.ignoreConverters||z.indexOf(R.convert.comment)!==0)if(R.ignoreConverters||z.indexOf(R.convert.ins)!==0){if(!((w.isArray(F)||w.isSet(F))&&w.isEmpty(F))){if((w.isMap(F)||w.isObject(F))&&w.isEmpty(F))B=E.element(M,void 0,E.sanitize(z))||B;else if(R.keepNullNodes||F!=null)if(w.isArray(F)||w.isSet(F))w.forEachArray(F,function(q){var K={};K[z]=q,B=E.parse(M,K)},E);else if(w.isMap(F)||w.isObject(F))(I=E.element(M,void 0,E.sanitize(z)))&&(B=I,E.parse(I,F));else if(F!=null&&F!==""){var I;(I=E.element(M,void 0,E.sanitize(z)))&&(B=I,E.text(I,E._decodeText(E.sanitize(F))))}else B=E.element(M,void 0,E.sanitize(z))||B}}else if(w.isString(F)){var L=F.indexOf(" "),W=L===-1?F:F.substr(0,L),G=L===-1?"":F.substr(L+1);B=E.instruction(M,E.sanitize(W),E.sanitize(G))||B}else w.isArray(F)||w.isSet(F)?w.forEachArray(F,function(q){var K=q.indexOf(" "),Z=K===-1?q:q.substr(0,K),J=K===-1?"":q.substr(K+1);B=E.instruction(M,E.sanitize(Z),E.sanitize(J))||B},E):w.forEachObject(F,function(q,K){return B=E.instruction(M,E.sanitize(q),E.sanitize(K))||B},E);else w.isArray(F)||w.isSet(F)?w.forEachArray(F,function(q){return B=E.comment(M,E.sanitize(q))||B},E):B=E.comment(M,E.sanitize(F))||B;else w.isArray(F)||w.isSet(F)?w.forEachArray(F,function(q){return B=E.cdata(M,E.sanitize(q))||B},E):B=E.cdata(M,E.sanitize(F))||B;else B=w.isMap(F)||w.isObject(F)?E.parse(M,F):E.text(M,E._decodeText(E.sanitize(F)))||B;else if(z===R.convert.att){if(w.isArray(F)||w.isSet(F))throw new Error("Invalid attribute: "+F.toString()+". "+M._debugInfo());w.forEachObject(F,function(q,K){B=E.attribute(M,void 0,E.sanitize(q),E._decodeAttributeValue(E.sanitize(K)))||B})}else B=E.attribute(M,void 0,E.sanitize(z.substr(R.convert.att.length)),E._decodeAttributeValue(E.sanitize(F)))||B},this):(R.keepNullNodes||P!=null)&&(B=this.text(M,this._decodeText(this.sanitize(P)))||B),B||M},_}(f(75).BaseReader);m.ObjectReader=C},function(d,m,f){var g=f(39);d.exports=new g({explicit:[f(287),f(288),f(289)]})},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(x){this.level=0,this._builderOptions=x,this._writerOptions=x};m.BaseCBWriter=g},function(d,m,f){var g=f(16),x=f(8),w=f(116);d.exports=!g&&!x(function(){return Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a!=7})},function(d,m,f){var g=f(11),x=f(13),w=g.document,C=x(w)&&x(w.createElement);d.exports=function(A){return C?w.createElement(A):{}}},function(d,m,f){var g=f(118),x=Function.toString;typeof g.inspectSource!="function"&&(g.inspectSource=function(w){return x.call(w)}),d.exports=g.inspectSource},function(d,m,f){var g=f(11),x=f(80),w=g["__core-js_shared__"]||x("__core-js_shared__",{});d.exports=w},function(d,m,f){var g=f(14),x=f(187),w=f(55),C=f(15);d.exports=function(A,_){for(var M=x(_),P=C.f,E=w.f,R=0;R<M.length;R++){var B=M[R];g(A,B)||P(A,B,E(_,B))}}},function(d,m,f){var g=f(11);d.exports=g},function(d,m,f){var g=f(14),x=f(24),w=f(122).indexOf,C=f(45);d.exports=function(A,_){var M,P=x(A),E=0,R=[];for(M in P)!g(C,M)&&g(P,M)&&R.push(M);for(;_.length>E;)g(P,M=_[E++])&&(~w(R,M)||R.push(M));return R}},function(d,m,f){var g=f(24),x=f(26),w=f(83),C=function(A){return function(_,M,P){var E,R=g(_),B=x(R.length),z=w(P,B);if(A&&M!=M){for(;B>z;)if((E=R[z++])!=E)return!0}else for(;B>z;z++)if((A||z in R)&&R[z]===M)return A||z||0;return!A&&-1}};d.exports={includes:C(!0),indexOf:C(!1)}},function(d,m,f){var g=f(8),x=/#|\.prototype\./,w=function(P,E){var R=A[C(P)];return R==M||R!=_&&(typeof E=="function"?g(E):!!E)},C=w.normalize=function(P){return String(P).replace(x,".").toLowerCase()},A=w.data={},_=w.NATIVE="N",M=w.POLYFILL="P";d.exports=w},function(d,m,f){var g=f(86);d.exports=g&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(d,m,f){var g=f(5);m.f=g},function(d,m,f){var g=f(120),x=f(14),w=f(125),C=f(15).f;d.exports=function(A){var _=g.Symbol||(g.Symbol={});x(_,A)||C(_,A,{value:w.f(A)})}},function(d,m){d.exports=function(f){if(typeof f!="function")throw TypeError(String(f)+" is not a function");return f}},function(d,m,f){var g=f(13),x=f(59),w=f(5)("species");d.exports=function(C,A){var _;return x(C)&&(typeof(_=C.constructor)!="function"||_!==Array&&!x(_.prototype)?g(_)&&(_=_[w])===null&&(_=void 0):_=void 0),new(_===void 0?Array:_)(A===0?0:A)}},function(d,m,f){var g,x,w=f(11),C=f(193),A=w.process,_=A&&A.versions,M=_&&_.v8;M?x=(g=M.split("."))[0]+g[1]:C&&(!(g=C.match(/Edge\/(\d+)/))||g[1]>=74)&&(g=C.match(/Chrome\/(\d+)/))&&(x=g[1]),d.exports=x&&+x},function(d,m,f){var g=f(5),x=f(60),w=f(15),C=g("unscopables"),A=Array.prototype;A[C]==null&&w.f(A,C,{configurable:!0,value:x(null)}),d.exports=function(_){A[C][_]=!0}},function(d,m,f){var g,x,w,C=f(132),A=f(21),_=f(14),M=f(5),P=f(44),E=M("iterator"),R=!1;[].keys&&("next"in(w=[].keys())?(x=C(C(w)))!==Object.prototype&&(g=x):R=!0),g==null&&(g={}),P||_(g,E)||A(g,E,function(){return this}),d.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:R}},function(d,m,f){var g=f(14),x=f(27),w=f(57),C=f(196),A=w("IE_PROTO"),_=Object.prototype;d.exports=C?Object.getPrototypeOf:function(M){return M=x(M),g(M,A)?M[A]:typeof M.constructor=="function"&&M instanceof M.constructor?M.constructor.prototype:M instanceof Object?_:null}},function(d,m,f){var g=f(18),x=f(197);d.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var w,C=!1,A={};try{(w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(A,[]),C=A instanceof Array}catch{}return function(_,M){return g(_),x(M),C?w.call(_,M):_.__proto__=M,_}}():void 0)},function(d,m,f){var g=f(56),x=f(15),w=f(40);d.exports=function(C,A,_){var M=g(A);M in C?x.f(C,M,w(0,_)):C[M]=_}},function(d,m,f){var g=f(90),x=f(42),w=f(5)("toStringTag"),C=x(function(){return arguments}())=="Arguments";d.exports=g?x:function(A){var _,M,P;return A===void 0?"Undefined":A===null?"Null":typeof(M=function(E,R){try{return E[R]}catch{}}(_=Object(A),w))=="string"?M:C?x(_):(P=x(_))=="Object"&&typeof _.callee=="function"?"Arguments":P}},function(d,m,f){var g=f(18);d.exports=function(){var x=g(this),w="";return x.global&&(w+="g"),x.ignoreCase&&(w+="i"),x.multiline&&(w+="m"),x.dotAll&&(w+="s"),x.unicode&&(w+="u"),x.sticky&&(w+="y"),w}},function(d,m,f){var g=f(47),x=f(35),w=function(C){return function(A,_){var M,P,E=String(x(A)),R=g(_),B=E.length;return R<0||R>=B?C?"":void 0:(M=E.charCodeAt(R))<55296||M>56319||R+1===B||(P=E.charCodeAt(R+1))<56320||P>57343?C?E.charAt(R):M:C?E.slice(R,R+2):P-56320+(M-55296<<10)+65536}};d.exports={codeAt:w(!1),charAt:w(!0)}},function(d,m,f){var g=f(4),x=f(27),w=f(61);g({target:"Object",stat:!0,forced:f(8)(function(){w(1)})},{keys:function(C){return w(x(C))}})},function(d,m,f){var g=f(4),x=f(11),w=f(123),C=f(25),A=f(140),_=f(141),M=f(142),P=f(13),E=f(8),R=f(208),B=f(62),z=f(209);d.exports=function(F,I,L){var W=F.indexOf("Map")!==-1,G=F.indexOf("Weak")!==-1,q=W?"set":"add",K=x[F],Z=K&&K.prototype,J=K,te={},Q=function(et){var je=Z[et];C(Z,et,et=="add"?function(Ke){return je.call(this,Ke===0?0:Ke),this}:et=="delete"?function(Ke){return!(G&&!P(Ke))&&je.call(this,Ke===0?0:Ke)}:et=="get"?function(Ke){return G&&!P(Ke)?void 0:je.call(this,Ke===0?0:Ke)}:et=="has"?function(Ke){return!(G&&!P(Ke))&&je.call(this,Ke===0?0:Ke)}:function(Ke,Je){return je.call(this,Ke===0?0:Ke,Je),this})};if(w(F,typeof K!="function"||!(G||Z.forEach&&!E(function(){new K().entries().next()}))))J=L.getConstructor(I,F,W,q),A.REQUIRED=!0;else if(w(F,!0)){var me=new J,Xe=me[q](G?{}:-0,1)!=me,Ve=E(function(){me.has(1)}),Ye=R(function(et){new K(et)}),qe=!G&&E(function(){for(var et=new K,je=5;je--;)et[q](je,je);return!et.has(-0)});Ye||((J=I(function(et,je){M(et,J,F);var Ke=z(new K,et,J);return je!=null&&_(je,Ke[q],Ke,W),Ke})).prototype=Z,Z.constructor=J),(Ve||qe)&&(Q("delete"),Q("has"),W&&Q("get")),(qe||Xe)&&Q(q),G&&Z.clear&&delete Z.clear}return te[F]=J,g({global:!0,forced:J!=K},te),B(J,F),G||L.setStrong(J,F,W),J}},function(d,m,f){var g=f(45),x=f(13),w=f(14),C=f(15).f,A=f(58),_=f(204),M=A("meta"),P=0,E=Object.isExtensible||function(){return!0},R=function(z){C(z,M,{value:{objectID:"O"+ ++P,weakData:{}}})},B=d.exports={REQUIRED:!1,fastKey:function(z,F){if(!x(z))return typeof z=="symbol"?z:(typeof z=="string"?"S":"P")+z;if(!w(z,M)){if(!E(z))return"F";if(!F)return"E";R(z)}return z[M].objectID},getWeakData:function(z,F){if(!w(z,M)){if(!E(z))return!0;if(!F)return!1;R(z)}return z[M].weakData},onFreeze:function(z){return _&&B.REQUIRED&&E(z)&&!w(z,M)&&R(z),z}};g[M]=!0},function(d,m,f){var g=f(18),x=f(205),w=f(26),C=f(87),A=f(206),_=f(207),M=function(P,E){this.stopped=P,this.result=E};(d.exports=function(P,E,R,B,z){var F,I,L,W,G,q,K,Z=C(E,R,B?2:1);if(z)F=P;else{if(typeof(I=A(P))!="function")throw TypeError("Target is not iterable");if(x(I)){for(L=0,W=w(P.length);W>L;L++)if((G=B?Z(g(K=P[L])[0],K[1]):Z(P[L]))&&G instanceof M)return G;return new M(!1)}F=I.call(P)}for(q=F.next;!(K=q.call(F)).done;)if(typeof(G=_(F,Z,K.value,B))=="object"&&G&&G instanceof M)return G;return new M(!1)}).stop=function(P){return new M(!0,P)}},function(d,m){d.exports=function(f,g,x){if(!(f instanceof g))throw TypeError("Incorrect "+(x?x+" ":"")+"invocation");return f}},function(d,m,f){var g=f(15).f,x=f(60),w=f(210),C=f(87),A=f(142),_=f(141),M=f(88),P=f(211),E=f(16),R=f(140).fastKey,B=f(43),z=B.set,F=B.getterFor;d.exports={getConstructor:function(I,L,W,G){var q=I(function(te,Q){A(te,q,L),z(te,{type:L,index:x(null),first:void 0,last:void 0,size:0}),E||(te.size=0),Q!=null&&_(Q,te[G],te,W)}),K=F(L),Z=function(te,Q,me){var Xe,Ve,Ye=K(te),qe=J(te,Q);return qe?qe.value=me:(Ye.last=qe={index:Ve=R(Q,!0),key:Q,value:me,previous:Xe=Ye.last,next:void 0,removed:!1},Ye.first||(Ye.first=qe),Xe&&(Xe.next=qe),E?Ye.size++:te.size++,Ve!=="F"&&(Ye.index[Ve]=qe)),te},J=function(te,Q){var me,Xe=K(te),Ve=R(Q);if(Ve!=="F")return Xe.index[Ve];for(me=Xe.first;me;me=me.next)if(me.key==Q)return me};return w(q.prototype,{clear:function(){for(var te=K(this),Q=te.index,me=te.first;me;)me.removed=!0,me.previous&&(me.previous=me.previous.next=void 0),delete Q[me.index],me=me.next;te.first=te.last=void 0,E?te.size=0:this.size=0},delete:function(te){var Q=K(this),me=J(this,te);if(me){var Xe=me.next,Ve=me.previous;delete Q.index[me.index],me.removed=!0,Ve&&(Ve.next=Xe),Xe&&(Xe.previous=Ve),Q.first==me&&(Q.first=Xe),Q.last==me&&(Q.last=Ve),E?Q.size--:this.size--}return!!me},forEach:function(te){for(var Q,me=K(this),Xe=C(te,arguments.length>1?arguments[1]:void 0,3);Q=Q?Q.next:me.first;)for(Xe(Q.value,Q.key,this);Q&&Q.removed;)Q=Q.previous},has:function(te){return!!J(this,te)}}),w(q.prototype,W?{get:function(te){var Q=J(this,te);return Q&&Q.value},set:function(te,Q){return Z(this,te===0?0:te,Q)}}:{add:function(te){return Z(this,te=te===0?0:te,te)}}),E&&g(q.prototype,"size",{get:function(){return K(this).size}}),q},setStrong:function(I,L,W){var G=L+" Iterator",q=F(L),K=F(G);M(I,L,function(Z,J){z(this,{type:G,target:Z,state:q(Z),kind:J,last:void 0})},function(){for(var Z=K(this),J=Z.kind,te=Z.last;te&&te.removed;)te=te.previous;return Z.target&&(Z.last=te=te?te.next:Z.state.first)?J=="keys"?{value:te.key,done:!1}:J=="values"?{value:te.value,done:!1}:{value:[te.key,te.value],done:!1}:(Z.target=void 0,{value:void 0,done:!0})},W?"entries":"values",!W,!0),P(L)}}},function(d,m,f){var g,x=f(4),w=f(55).f,C=f(26),A=f(222),_=f(35),M=f(224),P=f(44),E="".endsWith,R=Math.min,B=M("endsWith");x({target:"String",proto:!0,forced:!!(P||B||(g=w(String.prototype,"endsWith"),!g||g.writable))&&!B},{endsWith:function(z){var F=String(_(this));A(z);var I=arguments.length>1?arguments[1]:void 0,L=C(F.length),W=I===void 0?L:R(C(I),L),G=String(z);return E?E.call(F,G,W):F.slice(W-G.length,W)===G}})},function(d,m,f){(function(g){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var x=f(229),w=f(230),C=f(231);function A(){return M.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(He,le){if(A()<le)throw new RangeError("Invalid typed array length");return M.TYPED_ARRAY_SUPPORT?(He=new Uint8Array(le)).__proto__=M.prototype:(He===null&&(He=new M(le)),He.length=le),He}function M(He,le,be){if(!(M.TYPED_ARRAY_SUPPORT||this instanceof M))return new M(He,le,be);if(typeof He=="number"){if(typeof le=="string")throw new Error("If encoding is specified then the first argument must be a string");return R(this,He)}return P(this,He,le,be)}function P(He,le,be,we){if(typeof le=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&le instanceof ArrayBuffer?function(ze,Ze,Qe,st){if(Ze.byteLength,Qe<0||Ze.byteLength<Qe)throw new RangeError("'offset' is out of bounds");if(Ze.byteLength<Qe+(st||0))throw new RangeError("'length' is out of bounds");return Ze=Qe===void 0&&st===void 0?new Uint8Array(Ze):st===void 0?new Uint8Array(Ze,Qe):new Uint8Array(Ze,Qe,st),M.TYPED_ARRAY_SUPPORT?(ze=Ze).__proto__=M.prototype:ze=B(ze,Ze),ze}(He,le,be,we):typeof le=="string"?function(ze,Ze,Qe){if(typeof Qe=="string"&&Qe!==""||(Qe="utf8"),!M.isEncoding(Qe))throw new TypeError('"encoding" must be a valid string encoding');var st=0|F(Ze,Qe),lt=(ze=_(ze,st)).write(Ze,Qe);return lt!==st&&(ze=ze.slice(0,lt)),ze}(He,le,be):function(ze,Ze){if(M.isBuffer(Ze)){var Qe=0|z(Ze.length);return(ze=_(ze,Qe)).length===0||Ze.copy(ze,0,0,Qe),ze}if(Ze){if(typeof ArrayBuffer<"u"&&Ze.buffer instanceof ArrayBuffer||"length"in Ze)return typeof Ze.length!="number"||(st=Ze.length)!=st?_(ze,0):B(ze,Ze);if(Ze.type==="Buffer"&&C(Ze.data))return B(ze,Ze.data)}var st;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(He,le)}function E(He){if(typeof He!="number")throw new TypeError('"size" argument must be a number');if(He<0)throw new RangeError('"size" argument must not be negative')}function R(He,le){if(E(le),He=_(He,le<0?0:0|z(le)),!M.TYPED_ARRAY_SUPPORT)for(var be=0;be<le;++be)He[be]=0;return He}function B(He,le){var be=le.length<0?0:0|z(le.length);He=_(He,be);for(var we=0;we<be;we+=1)He[we]=255&le[we];return He}function z(He){if(He>=A())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A().toString(16)+" bytes");return 0|He}function F(He,le){if(M.isBuffer(He))return He.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(He)||He instanceof ArrayBuffer))return He.byteLength;typeof He!="string"&&(He=""+He);var be=He.length;if(be===0)return 0;for(var we=!1;;)switch(le){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":case void 0:return yt(He).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*be;case"hex":return be>>>1;case"base64":return wt(He).length;default:if(we)return yt(He).length;le=(""+le).toLowerCase(),we=!0}}function I(He,le,be){var we=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((be===void 0||be>this.length)&&(be=this.length),be<=0)||(be>>>=0)<=(le>>>=0))return"";for(He||(He="utf8");;)switch(He){case"hex":return qe(this,le,be);case"utf8":case"utf-8":return Xe(this,le,be);case"ascii":return Ve(this,le,be);case"latin1":case"binary":return Ye(this,le,be);case"base64":return me(this,le,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,le,be);default:if(we)throw new TypeError("Unknown encoding: "+He);He=(He+"").toLowerCase(),we=!0}}function L(He,le,be){var we=He[le];He[le]=He[be],He[be]=we}function W(He,le,be,we,ze){if(He.length===0)return-1;if(typeof be=="string"?(we=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),be=+be,isNaN(be)&&(be=ze?0:He.length-1),be<0&&(be=He.length+be),be>=He.length){if(ze)return-1;be=He.length-1}else if(be<0){if(!ze)return-1;be=0}if(typeof le=="string"&&(le=M.from(le,we)),M.isBuffer(le))return le.length===0?-1:G(He,le,be,we,ze);if(typeof le=="number")return le&=255,M.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ze?Uint8Array.prototype.indexOf.call(He,le,be):Uint8Array.prototype.lastIndexOf.call(He,le,be):G(He,[le],be,we,ze);throw new TypeError("val must be string, number or Buffer")}function G(He,le,be,we,ze){var Ze,Qe=1,st=He.length,lt=le.length;if(we!==void 0&&((we=String(we).toLowerCase())==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(He.length<2||le.length<2)return-1;Qe=2,st/=2,lt/=2,be/=2}function ot(xt,Pt){return Qe===1?xt[Pt]:xt.readUInt16BE(Pt*Qe)}if(ze){var ut=-1;for(Ze=be;Ze<st;Ze++)if(ot(He,Ze)===ot(le,ut===-1?0:Ze-ut)){if(ut===-1&&(ut=Ze),Ze-ut+1===lt)return ut*Qe}else ut!==-1&&(Ze-=Ze-ut),ut=-1}else for(be+lt>st&&(be=st-lt),Ze=be;Ze>=0;Ze--){for(var gt=!0,vt=0;vt<lt;vt++)if(ot(He,Ze+vt)!==ot(le,vt)){gt=!1;break}if(gt)return Ze}return-1}function q(He,le,be,we){be=Number(be)||0;var ze=He.length-be;we?(we=Number(we))>ze&&(we=ze):we=ze;var Ze=le.length;if(Ze%2!=0)throw new TypeError("Invalid hex string");we>Ze/2&&(we=Ze/2);for(var Qe=0;Qe<we;++Qe){var st=parseInt(le.substr(2*Qe,2),16);if(isNaN(st))return Qe;He[be+Qe]=st}return Qe}function K(He,le,be,we){return ft(yt(le,He.length-be),He,be,we)}function Z(He,le,be,we){return ft(function(ze){for(var Ze=[],Qe=0;Qe<ze.length;++Qe)Ze.push(255&ze.charCodeAt(Qe));return Ze}(le),He,be,we)}function J(He,le,be,we){return Z(He,le,be,we)}function te(He,le,be,we){return ft(wt(le),He,be,we)}function Q(He,le,be,we){return ft(function(ze,Ze){for(var Qe,st,lt,ot=[],ut=0;ut<ze.length&&!((Ze-=2)<0);++ut)Qe=ze.charCodeAt(ut),st=Qe>>8,lt=Qe%256,ot.push(lt),ot.push(st);return ot}(le,He.length-be),He,be,we)}function me(He,le,be){return le===0&&be===He.length?x.fromByteArray(He):x.fromByteArray(He.slice(le,be))}function Xe(He,le,be){be=Math.min(He.length,be);for(var we=[],ze=le;ze<be;){var Ze,Qe,st,lt,ot=He[ze],ut=null,gt=ot>239?4:ot>223?3:ot>191?2:1;if(ze+gt<=be)switch(gt){case 1:ot<128&&(ut=ot);break;case 2:(192&(Ze=He[ze+1]))==128&&(lt=(31&ot)<<6|63&Ze)>127&&(ut=lt);break;case 3:Ze=He[ze+1],Qe=He[ze+2],(192&Ze)==128&&(192&Qe)==128&&(lt=(15&ot)<<12|(63&Ze)<<6|63&Qe)>2047&&(lt<55296||lt>57343)&&(ut=lt);break;case 4:Ze=He[ze+1],Qe=He[ze+2],st=He[ze+3],(192&Ze)==128&&(192&Qe)==128&&(192&st)==128&&(lt=(15&ot)<<18|(63&Ze)<<12|(63&Qe)<<6|63&st)>65535&&lt<1114112&&(ut=lt)}ut===null?(ut=65533,gt=1):ut>65535&&(ut-=65536,we.push(ut>>>10&1023|55296),ut=56320|1023&ut),we.push(ut),ze+=gt}return function(vt){var xt=vt.length;if(xt<=4096)return String.fromCharCode.apply(String,vt);for(var Pt="",bt=0;bt<xt;)Pt+=String.fromCharCode.apply(String,vt.slice(bt,bt+=4096));return Pt}(we)}m.Buffer=M,m.SlowBuffer=function(He){return+He!=He&&(He=0),M.alloc(+He)},m.INSPECT_MAX_BYTES=50,M.TYPED_ARRAY_SUPPORT=g.TYPED_ARRAY_SUPPORT!==void 0?g.TYPED_ARRAY_SUPPORT:function(){try{var He=new Uint8Array(1);return He.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},He.foo()===42&&typeof He.subarray=="function"&&He.subarray(1,1).byteLength===0}catch{return!1}}(),m.kMaxLength=A(),M.poolSize=8192,M._augment=function(He){return He.__proto__=M.prototype,He},M.from=function(He,le,be){return P(null,He,le,be)},M.TYPED_ARRAY_SUPPORT&&(M.prototype.__proto__=Uint8Array.prototype,M.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&M[Symbol.species]===M&&Object.defineProperty(M,Symbol.species,{value:null,configurable:!0})),M.alloc=function(He,le,be){return function(we,ze,Ze,Qe){return E(ze),ze<=0?_(we,ze):Ze!==void 0?typeof Qe=="string"?_(we,ze).fill(Ze,Qe):_(we,ze).fill(Ze):_(we,ze)}(null,He,le,be)},M.allocUnsafe=function(He){return R(null,He)},M.allocUnsafeSlow=function(He){return R(null,He)},M.isBuffer=function(He){return!(He==null||!He._isBuffer)},M.compare=function(He,le){if(!M.isBuffer(He)||!M.isBuffer(le))throw new TypeError("Arguments must be Buffers");if(He===le)return 0;for(var be=He.length,we=le.length,ze=0,Ze=Math.min(be,we);ze<Ze;++ze)if(He[ze]!==le[ze]){be=He[ze],we=le[ze];break}return be<we?-1:we<be?1:0},M.isEncoding=function(He){switch(String(He).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(He,le){if(!C(He))throw new TypeError('"list" argument must be an Array of Buffers');if(He.length===0)return M.alloc(0);var be;if(le===void 0)for(le=0,be=0;be<He.length;++be)le+=He[be].length;var we=M.allocUnsafe(le),ze=0;for(be=0;be<He.length;++be){var Ze=He[be];if(!M.isBuffer(Ze))throw new TypeError('"list" argument must be an Array of Buffers');Ze.copy(we,ze),ze+=Ze.length}return we},M.byteLength=F,M.prototype._isBuffer=!0,M.prototype.swap16=function(){var He=this.length;if(He%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<He;le+=2)L(this,le,le+1);return this},M.prototype.swap32=function(){var He=this.length;if(He%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<He;le+=4)L(this,le,le+3),L(this,le+1,le+2);return this},M.prototype.swap64=function(){var He=this.length;if(He%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<He;le+=8)L(this,le,le+7),L(this,le+1,le+6),L(this,le+2,le+5),L(this,le+3,le+4);return this},M.prototype.toString=function(){var He=0|this.length;return He===0?"":arguments.length===0?Xe(this,0,He):I.apply(this,arguments)},M.prototype.equals=function(He){if(!M.isBuffer(He))throw new TypeError("Argument must be a Buffer");return this===He||M.compare(this,He)===0},M.prototype.inspect=function(){var He="",le=m.INSPECT_MAX_BYTES;return this.length>0&&(He=this.toString("hex",0,le).match(/.{2}/g).join(" "),this.length>le&&(He+=" ... ")),"<Buffer "+He+">"},M.prototype.compare=function(He,le,be,we,ze){if(!M.isBuffer(He))throw new TypeError("Argument must be a Buffer");if(le===void 0&&(le=0),be===void 0&&(be=He?He.length:0),we===void 0&&(we=0),ze===void 0&&(ze=this.length),le<0||be>He.length||we<0||ze>this.length)throw new RangeError("out of range index");if(we>=ze&&le>=be)return 0;if(we>=ze)return-1;if(le>=be)return 1;if(this===He)return 0;for(var Ze=(ze>>>=0)-(we>>>=0),Qe=(be>>>=0)-(le>>>=0),st=Math.min(Ze,Qe),lt=this.slice(we,ze),ot=He.slice(le,be),ut=0;ut<st;++ut)if(lt[ut]!==ot[ut]){Ze=lt[ut],Qe=ot[ut];break}return Ze<Qe?-1:Qe<Ze?1:0},M.prototype.includes=function(He,le,be){return this.indexOf(He,le,be)!==-1},M.prototype.indexOf=function(He,le,be){return W(this,He,le,be,!0)},M.prototype.lastIndexOf=function(He,le,be){return W(this,He,le,be,!1)},M.prototype.write=function(He,le,be,we){if(le===void 0)we="utf8",be=this.length,le=0;else if(be===void 0&&typeof le=="string")we=le,be=this.length,le=0;else{if(!isFinite(le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");le|=0,isFinite(be)?(be|=0,we===void 0&&(we="utf8")):(we=be,be=void 0)}var ze=this.length-le;if((be===void 0||be>ze)&&(be=ze),He.length>0&&(be<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");for(var Ze=!1;;)switch(we){case"hex":return q(this,He,le,be);case"utf8":case"utf-8":return K(this,He,le,be);case"ascii":return Z(this,He,le,be);case"latin1":case"binary":return J(this,He,le,be);case"base64":return te(this,He,le,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,He,le,be);default:if(Ze)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Ze=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(He,le,be){var we="";be=Math.min(He.length,be);for(var ze=le;ze<be;++ze)we+=String.fromCharCode(127&He[ze]);return we}function Ye(He,le,be){var we="";be=Math.min(He.length,be);for(var ze=le;ze<be;++ze)we+=String.fromCharCode(He[ze]);return we}function qe(He,le,be){var we=He.length;(!le||le<0)&&(le=0),(!be||be<0||be>we)&&(be=we);for(var ze="",Ze=le;Ze<be;++Ze)ze+=ht(He[Ze]);return ze}function et(He,le,be){for(var we=He.slice(le,be),ze="",Ze=0;Ze<we.length;Ze+=2)ze+=String.fromCharCode(we[Ze]+256*we[Ze+1]);return ze}function je(He,le,be){if(He%1!=0||He<0)throw new RangeError("offset is not uint");if(He+le>be)throw new RangeError("Trying to access beyond buffer length")}function Ke(He,le,be,we,ze,Ze){if(!M.isBuffer(He))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>ze||le<Ze)throw new RangeError('"value" argument is out of bounds');if(be+we>He.length)throw new RangeError("Index out of range")}function Je(He,le,be,we){le<0&&(le=65535+le+1);for(var ze=0,Ze=Math.min(He.length-be,2);ze<Ze;++ze)He[be+ze]=(le&255<<8*(we?ze:1-ze))>>>8*(we?ze:1-ze)}function at(He,le,be,we){le<0&&(le=4294967295+le+1);for(var ze=0,Ze=Math.min(He.length-be,4);ze<Ze;++ze)He[be+ze]=le>>>8*(we?ze:3-ze)&255}function nt(He,le,be,we,ze,Ze){if(be+we>He.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function ct(He,le,be,we,ze){return ze||nt(He,0,be,4),w.write(He,le,be,we,23,4),be+4}function pt(He,le,be,we,ze){return ze||nt(He,0,be,8),w.write(He,le,be,we,52,8),be+8}M.prototype.slice=function(He,le){var be,we=this.length;if((He=~~He)<0?(He+=we)<0&&(He=0):He>we&&(He=we),(le=le===void 0?we:~~le)<0?(le+=we)<0&&(le=0):le>we&&(le=we),le<He&&(le=He),M.TYPED_ARRAY_SUPPORT)(be=this.subarray(He,le)).__proto__=M.prototype;else{var ze=le-He;be=new M(ze,void 0);for(var Ze=0;Ze<ze;++Ze)be[Ze]=this[Ze+He]}return be},M.prototype.readUIntLE=function(He,le,be){He|=0,le|=0,be||je(He,le,this.length);for(var we=this[He],ze=1,Ze=0;++Ze<le&&(ze*=256);)we+=this[He+Ze]*ze;return we},M.prototype.readUIntBE=function(He,le,be){He|=0,le|=0,be||je(He,le,this.length);for(var we=this[He+--le],ze=1;le>0&&(ze*=256);)we+=this[He+--le]*ze;return we},M.prototype.readUInt8=function(He,le){return le||je(He,1,this.length),this[He]},M.prototype.readUInt16LE=function(He,le){return le||je(He,2,this.length),this[He]|this[He+1]<<8},M.prototype.readUInt16BE=function(He,le){return le||je(He,2,this.length),this[He]<<8|this[He+1]},M.prototype.readUInt32LE=function(He,le){return le||je(He,4,this.length),(this[He]|this[He+1]<<8|this[He+2]<<16)+16777216*this[He+3]},M.prototype.readUInt32BE=function(He,le){return le||je(He,4,this.length),16777216*this[He]+(this[He+1]<<16|this[He+2]<<8|this[He+3])},M.prototype.readIntLE=function(He,le,be){He|=0,le|=0,be||je(He,le,this.length);for(var we=this[He],ze=1,Ze=0;++Ze<le&&(ze*=256);)we+=this[He+Ze]*ze;return we>=(ze*=128)&&(we-=Math.pow(2,8*le)),we},M.prototype.readIntBE=function(He,le,be){He|=0,le|=0,be||je(He,le,this.length);for(var we=le,ze=1,Ze=this[He+--we];we>0&&(ze*=256);)Ze+=this[He+--we]*ze;return Ze>=(ze*=128)&&(Ze-=Math.pow(2,8*le)),Ze},M.prototype.readInt8=function(He,le){return le||je(He,1,this.length),128&this[He]?-1*(255-this[He]+1):this[He]},M.prototype.readInt16LE=function(He,le){le||je(He,2,this.length);var be=this[He]|this[He+1]<<8;return 32768&be?4294901760|be:be},M.prototype.readInt16BE=function(He,le){le||je(He,2,this.length);var be=this[He+1]|this[He]<<8;return 32768&be?4294901760|be:be},M.prototype.readInt32LE=function(He,le){return le||je(He,4,this.length),this[He]|this[He+1]<<8|this[He+2]<<16|this[He+3]<<24},M.prototype.readInt32BE=function(He,le){return le||je(He,4,this.length),this[He]<<24|this[He+1]<<16|this[He+2]<<8|this[He+3]},M.prototype.readFloatLE=function(He,le){return le||je(He,4,this.length),w.read(this,He,!0,23,4)},M.prototype.readFloatBE=function(He,le){return le||je(He,4,this.length),w.read(this,He,!1,23,4)},M.prototype.readDoubleLE=function(He,le){return le||je(He,8,this.length),w.read(this,He,!0,52,8)},M.prototype.readDoubleBE=function(He,le){return le||je(He,8,this.length),w.read(this,He,!1,52,8)},M.prototype.writeUIntLE=function(He,le,be,we){He=+He,le|=0,be|=0,we||Ke(this,He,le,be,Math.pow(2,8*be)-1,0);var ze=1,Ze=0;for(this[le]=255&He;++Ze<be&&(ze*=256);)this[le+Ze]=He/ze&255;return le+be},M.prototype.writeUIntBE=function(He,le,be,we){He=+He,le|=0,be|=0,we||Ke(this,He,le,be,Math.pow(2,8*be)-1,0);var ze=be-1,Ze=1;for(this[le+ze]=255&He;--ze>=0&&(Ze*=256);)this[le+ze]=He/Ze&255;return le+be},M.prototype.writeUInt8=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,1,255,0),M.TYPED_ARRAY_SUPPORT||(He=Math.floor(He)),this[le]=255&He,le+1},M.prototype.writeUInt16LE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[le]=255&He,this[le+1]=He>>>8):Je(this,He,le,!0),le+2},M.prototype.writeUInt16BE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,2,65535,0),M.TYPED_ARRAY_SUPPORT?(this[le]=He>>>8,this[le+1]=255&He):Je(this,He,le,!1),le+2},M.prototype.writeUInt32LE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[le+3]=He>>>24,this[le+2]=He>>>16,this[le+1]=He>>>8,this[le]=255&He):at(this,He,le,!0),le+4},M.prototype.writeUInt32BE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,4,4294967295,0),M.TYPED_ARRAY_SUPPORT?(this[le]=He>>>24,this[le+1]=He>>>16,this[le+2]=He>>>8,this[le+3]=255&He):at(this,He,le,!1),le+4},M.prototype.writeIntLE=function(He,le,be,we){if(He=+He,le|=0,!we){var ze=Math.pow(2,8*be-1);Ke(this,He,le,be,ze-1,-ze)}var Ze=0,Qe=1,st=0;for(this[le]=255&He;++Ze<be&&(Qe*=256);)He<0&&st===0&&this[le+Ze-1]!==0&&(st=1),this[le+Ze]=(He/Qe>>0)-st&255;return le+be},M.prototype.writeIntBE=function(He,le,be,we){if(He=+He,le|=0,!we){var ze=Math.pow(2,8*be-1);Ke(this,He,le,be,ze-1,-ze)}var Ze=be-1,Qe=1,st=0;for(this[le+Ze]=255&He;--Ze>=0&&(Qe*=256);)He<0&&st===0&&this[le+Ze+1]!==0&&(st=1),this[le+Ze]=(He/Qe>>0)-st&255;return le+be},M.prototype.writeInt8=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,1,127,-128),M.TYPED_ARRAY_SUPPORT||(He=Math.floor(He)),He<0&&(He=255+He+1),this[le]=255&He,le+1},M.prototype.writeInt16LE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[le]=255&He,this[le+1]=He>>>8):Je(this,He,le,!0),le+2},M.prototype.writeInt16BE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,2,32767,-32768),M.TYPED_ARRAY_SUPPORT?(this[le]=He>>>8,this[le+1]=255&He):Je(this,He,le,!1),le+2},M.prototype.writeInt32LE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,4,2147483647,-2147483648),M.TYPED_ARRAY_SUPPORT?(this[le]=255&He,this[le+1]=He>>>8,this[le+2]=He>>>16,this[le+3]=He>>>24):at(this,He,le,!0),le+4},M.prototype.writeInt32BE=function(He,le,be){return He=+He,le|=0,be||Ke(this,He,le,4,2147483647,-2147483648),He<0&&(He=4294967295+He+1),M.TYPED_ARRAY_SUPPORT?(this[le]=He>>>24,this[le+1]=He>>>16,this[le+2]=He>>>8,this[le+3]=255&He):at(this,He,le,!1),le+4},M.prototype.writeFloatLE=function(He,le,be){return ct(this,He,le,!0,be)},M.prototype.writeFloatBE=function(He,le,be){return ct(this,He,le,!1,be)},M.prototype.writeDoubleLE=function(He,le,be){return pt(this,He,le,!0,be)},M.prototype.writeDoubleBE=function(He,le,be){return pt(this,He,le,!1,be)},M.prototype.copy=function(He,le,be,we){if(be||(be=0),we||we===0||(we=this.length),le>=He.length&&(le=He.length),le||(le=0),we>0&&we<be&&(we=be),we===be||He.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("sourceStart out of bounds");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),He.length-le<we-be&&(we=He.length-le+be);var ze,Ze=we-be;if(this===He&&be<le&&le<we)for(ze=Ze-1;ze>=0;--ze)He[ze+le]=this[ze+be];else if(Ze<1e3||!M.TYPED_ARRAY_SUPPORT)for(ze=0;ze<Ze;++ze)He[ze+le]=this[ze+be];else Uint8Array.prototype.set.call(He,this.subarray(be,be+Ze),le);return Ze},M.prototype.fill=function(He,le,be,we){if(typeof He=="string"){if(typeof le=="string"?(we=le,le=0,be=this.length):typeof be=="string"&&(we=be,be=this.length),He.length===1){var ze=He.charCodeAt(0);ze<256&&(He=ze)}if(we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!M.isEncoding(we))throw new TypeError("Unknown encoding: "+we)}else typeof He=="number"&&(He&=255);if(le<0||this.length<le||this.length<be)throw new RangeError("Out of range index");if(be<=le)return this;var Ze;if(le>>>=0,be=be===void 0?this.length:be>>>0,He||(He=0),typeof He=="number")for(Ze=le;Ze<be;++Ze)this[Ze]=He;else{var Qe=M.isBuffer(He)?He:yt(new M(He,we).toString()),st=Qe.length;for(Ze=0;Ze<be-le;++Ze)this[Ze+le]=Qe[Ze%st]}return this};var rt=/[^+\/0-9A-Za-z-_]/g;function ht(He){return He<16?"0"+He.toString(16):He.toString(16)}function yt(He,le){var be;le=le||1/0;for(var we=He.length,ze=null,Ze=[],Qe=0;Qe<we;++Qe){if((be=He.charCodeAt(Qe))>55295&&be<57344){if(!ze){if(be>56319){(le-=3)>-1&&Ze.push(239,191,189);continue}if(Qe+1===we){(le-=3)>-1&&Ze.push(239,191,189);continue}ze=be;continue}if(be<56320){(le-=3)>-1&&Ze.push(239,191,189),ze=be;continue}be=65536+(ze-55296<<10|be-56320)}else ze&&(le-=3)>-1&&Ze.push(239,191,189);if(ze=null,be<128){if((le-=1)<0)break;Ze.push(be)}else if(be<2048){if((le-=2)<0)break;Ze.push(be>>6|192,63&be|128)}else if(be<65536){if((le-=3)<0)break;Ze.push(be>>12|224,be>>6&63|128,63&be|128)}else{if(!(be<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;Ze.push(be>>18|240,be>>12&63|128,be>>6&63|128,63&be|128)}}return Ze}function wt(He){return x.toByteArray(function(le){if((le=function(be){return be.trim?be.trim():be.replace(/^\s+|\s+$/g,"")}(le).replace(rt,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(He))}function ft(He,le,be,we){for(var ze=0;ze<we&&!(ze+be>=le.length||ze>=He.length);++ze)le[ze+be]=He[ze];return ze}}).call(this,f(78))},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.isASCIIByte=function(g){return g>=0&&g<=127}},function(d,m,f){var g=this&&this.__read||function(w,C){var A=typeof Symbol=="function"&&w[Symbol.iterator];if(!A)return w;var _,M,P=A.call(w),E=[];try{for(;(C===void 0||C-- >0)&&!(_=P.next()).done;)E.push(_.value)}catch(R){M={error:R}}finally{try{_&&!_.done&&(A=P.return)&&A.call(P)}finally{if(M)throw M.error}}return E},x=this&&this.__spread||function(){for(var w=[],C=0;C<arguments.length;C++)w=w.concat(g(arguments[C]));return w};Object.defineProperty(m,"__esModule",{value:!0}),m.length=function(w){return w.length},m.byteLowercase=function(w){for(var C=0;C<w.length;C++){var A=w[C];A>=65&&A<=90&&(w[C]=A+32)}},m.byteUppercase=function(w){for(var C=0;C<w.length;C++){var A=w[C];A>=97&&A<=122&&(w[C]=A-32)}},m.byteCaseInsensitiveMatch=function(w,C){if(w.length!==C.length)return!1;for(var A=0;A<w.length;A++){var _=w[A],M=C[A];if(_>=65&&_<=90&&(_+=32),M>=65&&M<=90&&(M+=32),_!==M)return!1}return!0},m.startsWith=function(w,C){for(var A=0;;){if(A>=w.length)return!1;if(A>=C.length)return!0;if(w[A]!==C[A])return!1;A++}},m.byteLessThan=function(w,C){for(var A=0;;){if(A>=w.length)return!1;if(A>=C.length)return!0;var _=w[A],M=C[A];if(_<M)return!0;if(_>M)return!1;A++}},m.isomorphicDecode=function(w){return String.fromCodePoint.apply(String,x(w))}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(6),x=f(7),w=f(0),C=f(12),A=function(){function _(M){this._associatedDocument=M||g.dom.window.document}return _.prototype.createDocumentType=function(M,P,E){return w.namespace_validate(M),w.create_documentType(this._associatedDocument,M,P,E)},_.prototype.createDocument=function(M,P,E){E===void 0&&(E=null);var R=w.create_xmlDocument(),B=null;return P&&(B=w.document_internalCreateElementNS(R,M,P)),E&&R.appendChild(E),B&&R.appendChild(B),R._origin=this._associatedDocument._origin,M===x.namespace.HTML?R._contentType="application/xhtml+xml":M===x.namespace.SVG?R._contentType="image/svg+xml":R._contentType="application/xml",R},_.prototype.createHTMLDocument=function(M){var P=w.create_document();P._type="html",P._contentType="text/html",P.appendChild(w.create_documentType(P,"html","",""));var E=w.element_createAnElement(P,"html",x.namespace.HTML);P.appendChild(E);var R=w.element_createAnElement(P,"head",x.namespace.HTML);if(E.appendChild(R),M!==void 0){var B=w.element_createAnElement(P,"title",x.namespace.HTML);R.appendChild(B);var z=w.create_text(P,M);B.appendChild(z)}var F=w.element_createAnElement(P,"body",x.namespace.HTML);return E.appendChild(F),P._origin=this._associatedDocument._origin,P},_.prototype.hasFeature=function(){return!0},_._create=function(M){return new _(M)},_}();m.DOMImplementationImpl=A,C.idl_defineConst(A.prototype,"_ID","@oozcitak/dom")},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(70),C=f(2),A=f(0),_=function(M){function P(){var E=M.call(this)||this;return E._signalSlots=new Set,E._mutationObserverMicrotaskQueued=!1,E._mutationObservers=new Set,E._iteratorList=new C.FixedSizeSet,E._associatedDocument=A.create_document(),E}return x(P,M),Object.defineProperty(P.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),P._create=function(){return new P},P}(w.EventTargetImpl);m.WindowImpl=_},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=function(){function w(){}return w.isNode=function(C){return!!C&&C._nodeType!==void 0},w.isDocumentNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.Document},w.isDocumentTypeNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.DocumentType},w.isDocumentFragmentNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.DocumentFragment},w.isAttrNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.Attribute},w.isCharacterDataNode=function(C){if(!w.isNode(C))return!1;var A=C._nodeType;return A===g.NodeType.Text||A===g.NodeType.ProcessingInstruction||A===g.NodeType.Comment||A===g.NodeType.CData},w.isTextNode=function(C){return w.isNode(C)&&(C._nodeType===g.NodeType.Text||C._nodeType===g.NodeType.CData)},w.isExclusiveTextNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.Text},w.isCDATASectionNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.CData},w.isCommentNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.Comment},w.isProcessingInstructionNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.ProcessingInstruction},w.isElementNode=function(C){return w.isNode(C)&&C._nodeType===g.NodeType.Element},w.isCustomElementNode=function(C){return w.isElementNode(C)&&C._customElementState==="custom"},w.isShadowRoot=function(C){return!!C&&C.host!==void 0},w.isMouseEvent=function(C){return!!C&&C.screenX!==void 0&&C.screenY!=null},w.isSlotable=function(C){return!!C&&C._name!==void 0&&C._assignedSlot!==void 0&&(w.isTextNode(C)||w.isElementNode(C))},w.isSlot=function(C){return!!C&&C._name!==void 0&&C._assignedNodes!==void 0&&w.isElementNode(C)},w.isWindow=function(C){return!!C&&C.navigator!==void 0},w.isEventListener=function(C){return!!C&&C.handleEvent!==void 0},w.isRegisteredObserver=function(C){return!!C&&C.observer!==void 0&&C.options!==void 0},w.isTransientRegisteredObserver=function(C){return!!C&&C.source!==void 0&&w.isRegisteredObserver(C)},w}();m.Guard=x},function(d,m,f){var g,x=this&&this.__extends||(g=function(C,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var P in M)M.hasOwnProperty(P)&&(_[P]=M[P])})(C,A)},function(C,A){function _(){this.constructor=C}g(C,A),C.prototype=A===null?Object.create(A):(_.prototype=A.prototype,new _)});Object.defineProperty(m,"__esModule",{value:!0});var w=function(C){function A(){return C.call(this)||this}return x(A,C),A}(f(98).DocumentImpl);m.XMLDocumentImpl=w},function(d,m,f){var g=this&&this.__values||function(we){var ze=typeof Symbol=="function"&&Symbol.iterator,Ze=ze&&we[ze],Qe=0;if(Ze)return Ze.call(we);if(we&&typeof we.length=="number")return{next:function(){return we&&Qe>=we.length&&(we=void 0),{value:we&&we[Qe++],done:!we}}};throw new TypeError(ze?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(we,ze){var Ze=typeof Symbol=="function"&&we[Symbol.iterator];if(!Ze)return we;var Qe,st,lt=Ze.call(we),ot=[];try{for(;(ze===void 0||ze-- >0)&&!(Qe=lt.next()).done;)ot.push(Qe.value)}catch(ut){st={error:ut}}finally{try{Qe&&!Qe.done&&(Ze=lt.return)&&Ze.call(lt)}finally{if(st)throw st.error}}return ot};Object.defineProperty(m,"__esModule",{value:!0});var w,C=f(2),A=f(243),_=f(7),M=f(244),P={ftp:21,file:null,http:80,https:443,ws:80,wss:443},E=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,R=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,B=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,z=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,F=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,I=/[\0\t\f\r #%/:?@\[\\\]]/;function L(we){w!==void 0&&w.call(null,"Validation Error: "+we)}function W(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function G(we){return we in P}function q(we){return G(we.scheme)}function K(we){return P[we]||null}function Z(we){return we.username!==""||we.password!==""}function J(we,ze){var Ze,Qe;ze===void 0&&(ze=!1);var st=we.scheme+":";if(we.host!==null?(st+="//",Z(we)&&(st+=we.username,we.password!==""&&(st+=":"+we.password),st+="@"),st+=te(we.host),we.port!==null&&(st+=":"+we.port)):we.host===null&&we.scheme==="file"&&(st+="//"),we._cannotBeABaseURLFlag)st+=we.path[0];else try{for(var lt=g(we.path),ot=lt.next();!ot.done;ot=lt.next())st+="/"+ot.value}catch(ut){Ze={error:ut}}finally{try{ot&&!ot.done&&(Qe=lt.return)&&Qe.call(lt)}finally{if(Ze)throw Ze.error}}return we.query!==null&&(st+="?"+we.query),ze||we.fragment===null||(st+="#"+we.fragment),st}function te(we){return C.isNumber(we)?Q(we):C.isArray(we)?"["+me(we)+"]":we}function Q(we){for(var ze="",Ze=we,Qe=1;Qe<=4;Qe++)ze=(Ze%256).toString()+ze,Qe!==4&&(ze="."+ze),Ze=Math.floor(Ze/256);return ze}function me(we){for(var ze="",Ze=null,Qe=-1,st=0,lt=0,ot=0;ot<8;ot++)if(we[ot]===0){st=1;for(var ut=ot+1;ut<8&&we[ut]===0;ut++)st++;st>lt&&(lt=st,Qe=ot)}lt>1&&(Ze=Qe);for(var gt=!1,vt=0;vt<8;vt++)gt&&we[vt]===0||(gt&&(gt=!1),Ze!==vt?(ze+=we[vt].toString(16),vt!==7&&(ze+=":")):(ze+=vt===0?"::":":",gt=!0));return ze}function Xe(we,ze,Ze,Qe,st){var lt,ot,ut,gt;if(Qe===void 0){Qe={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var vt=/^[\u0000-\u001F\u0020]+/,xt=/[\u0000-\u001F\u0020]+$/;(vt.test(we)||xt.test(we))&&L("Input string contains leading or trailing control characters or space."),we=(we=we.replace(vt,"")).replace(xt,"")}var Pt=/[\u0009\u000A\u000D]/g;Pt.test(we)&&L("Input string contains tab or newline characters."),we=we.replace(Pt,"");var bt=st===void 0?A.ParserState.SchemeStart:st;ze===void 0&&(ze=null);for(var Dt=Ze===void 0||Ze==="replacement"||Ze==="UTF-16BE"||Ze==="UTF-16LE"?"UTF-8":Ze,tt="",Et=!1,Ct=!1,Mt=!1,dt=new C.StringWalker(we);;){switch(bt){case A.ParserState.SchemeStart:if(_.codePoint.ASCIIAlpha.test(dt.c()))tt+=dt.c().toLowerCase(),bt=A.ParserState.Scheme;else{if(st!==void 0)return L("Invalid scheme start character."),null;bt=A.ParserState.NoScheme,dt.pointer--}break;case A.ParserState.Scheme:if(_.codePoint.ASCIIAlphanumeric.test(dt.c())||dt.c()==="+"||dt.c()==="-"||dt.c()===".")tt+=dt.c().toLowerCase();else{if(dt.c()!==":"){if(st===void 0){tt="",bt=A.ParserState.NoScheme,dt.pointer=0;continue}return L("Invalid input string."),null}if(st!==void 0&&(G(Qe.scheme)&&!G(tt)||!G(Qe.scheme)&&G(tt)||(Z(Qe)||Qe.port!==null)&&tt==="file"||Qe.scheme==="file"&&(Qe.host===""||Qe.host===null)))return Qe;if(Qe.scheme=tt,st!==void 0)return Qe.port===K(Qe.scheme)&&(Qe.port=null),Qe;tt="",Qe.scheme==="file"?(dt.remaining().startsWith("//")||L("Invalid file URL scheme, '//' expected."),bt=A.ParserState.File):q(Qe)&&ze!==null&&ze.scheme===Qe.scheme?bt=A.ParserState.SpecialRelativeOrAuthority:q(Qe)?bt=A.ParserState.SpecialAuthoritySlashes:dt.remaining().startsWith("/")?(bt=A.ParserState.PathOrAuthority,dt.pointer++):(Qe._cannotBeABaseURLFlag=!0,Qe.path.push(""),bt=A.ParserState.CannotBeABaseURLPath)}break;case A.ParserState.NoScheme:if(ze===null||ze._cannotBeABaseURLFlag&&dt.c()!=="#")return L("Invalid input string."),null;ze._cannotBeABaseURLFlag&&dt.c()==="#"?(Qe.scheme=ze.scheme,Qe.path=_.list.clone(ze.path),Qe.query=ze.query,Qe.fragment="",Qe._cannotBeABaseURLFlag=!0,bt=A.ParserState.Fragment):ze.scheme!=="file"?(bt=A.ParserState.Relative,dt.pointer--):(bt=A.ParserState.File,dt.pointer--);break;case A.ParserState.SpecialRelativeOrAuthority:dt.c()==="/"&&dt.remaining().startsWith("/")?(bt=A.ParserState.SpecialAuthorityIgnoreSlashes,dt.pointer++):(L("Invalid input string."),bt=A.ParserState.Relative,dt.pointer--);break;case A.ParserState.PathOrAuthority:dt.c()==="/"?bt=A.ParserState.Authority:(bt=A.ParserState.Path,dt.pointer--);break;case A.ParserState.Relative:if(ze===null)throw new Error("Invalid parser state. Base URL is null.");switch(Qe.scheme=ze.scheme,dt.c()){case"":Qe.username=ze.username,Qe.password=ze.password,Qe.host=ze.host,Qe.port=ze.port,Qe.path=_.list.clone(ze.path),Qe.query=ze.query;break;case"/":bt=A.ParserState.RelativeSlash;break;case"?":Qe.username=ze.username,Qe.password=ze.password,Qe.host=ze.host,Qe.port=ze.port,Qe.path=_.list.clone(ze.path),Qe.query="",bt=A.ParserState.Query;break;case"#":Qe.username=ze.username,Qe.password=ze.password,Qe.host=ze.host,Qe.port=ze.port,Qe.path=_.list.clone(ze.path),Qe.query=ze.query,Qe.fragment="",bt=A.ParserState.Fragment;break;default:q(Qe)&&dt.c()==="\\"?(L("Invalid input string."),bt=A.ParserState.RelativeSlash):(Qe.username=ze.username,Qe.password=ze.password,Qe.host=ze.host,Qe.port=ze.port,Qe.path=_.list.clone(ze.path),Qe.path.length!==0&&Qe.path.splice(Qe.path.length-1,1),bt=A.ParserState.Path,dt.pointer--)}break;case A.ParserState.RelativeSlash:if(!q(Qe)||dt.c()!=="/"&&dt.c()!=="\\")if(dt.c()==="/")bt=A.ParserState.Authority;else{if(ze===null)throw new Error("Invalid parser state. Base URL is null.");Qe.username=ze.username,Qe.password=ze.password,Qe.host=ze.host,Qe.port=ze.port,bt=A.ParserState.Path,dt.pointer--}else dt.c()==="\\"&&L("Invalid input string."),bt=A.ParserState.SpecialAuthorityIgnoreSlashes;break;case A.ParserState.SpecialAuthoritySlashes:dt.c()==="/"&&dt.remaining().startsWith("/")?(bt=A.ParserState.SpecialAuthorityIgnoreSlashes,dt.pointer++):(L("Expected '//'."),bt=A.ParserState.SpecialAuthorityIgnoreSlashes,dt.pointer--);break;case A.ParserState.SpecialAuthorityIgnoreSlashes:dt.c()!=="/"&&dt.c()!=="\\"?(bt=A.ParserState.Authority,dt.pointer--):L("Unexpected '/' or '\\'.");break;case A.ParserState.Authority:if(dt.c()==="@"){L("Unexpected '@'."),Et&&(tt="%40"+tt),Et=!0;try{for(var At=(lt=void 0,g(tt)),Tt=At.next();!Tt.done;Tt=At.next()){var kt=Tt.value;if(kt!==":"||Mt){var Rt=ft(kt,z);Mt?Qe.password+=Rt:Qe.username+=Rt}else Mt=!0}}catch(Kt){lt={error:Kt}}finally{try{Tt&&!Tt.done&&(ot=At.return)&&ot.call(At)}finally{if(lt)throw lt.error}}tt=""}else if(dt.c()===""||dt.c()==="/"||dt.c()==="?"||dt.c()==="#"||q(Qe)&&dt.c()==="\\"){if(Et&&tt==="")return L("Invalid input string."),null;dt.pointer-=tt.length+1,tt="",bt=A.ParserState.Host}else tt+=dt.c();break;case A.ParserState.Host:case A.ParserState.Hostname:if(st!==void 0&&Qe.scheme==="file")dt.pointer--,bt=A.ParserState.FileHost;else if(dt.c()!==":"||Ct)if(dt.c()===""||dt.c()==="/"||dt.c()==="?"||dt.c()==="#"||q(Qe)&&dt.c()==="\\"){if(dt.pointer--,q(Qe)&&tt==="")return L("Invalid input string."),null;if(st!==void 0&&tt===""&&(Z(Qe)||Qe.port!==null))return L("Invalid input string."),Qe;if((It=Je(tt,!q(Qe)))===null)return null;if(Qe.host=It,tt="",bt=A.ParserState.PathStart,st!==void 0)return Qe}else dt.c()==="["&&(Ct=!0),dt.c()==="]"&&(Ct=!1),tt+=dt.c();else{if(tt==="")return L("Invalid input string."),null;if((It=Je(tt,!q(Qe)))===null)return null;if(Qe.host=It,tt="",bt=A.ParserState.Port,st===A.ParserState.Hostname)return Qe}break;case A.ParserState.Port:if(_.codePoint.ASCIIDigit.test(dt.c()))tt+=dt.c();else{if(!(dt.c()===""||dt.c()==="/"||dt.c()==="?"||dt.c()==="#"||q(Qe)&&dt.c()==="\\"||st))return L("Invalid input string."),null;if(tt!==""&&tt!==""){var Ft=parseInt(tt,10);if(Ft>Math.pow(2,16)-1)return L("Invalid port number."),null;Qe.port=Ft===K(Qe.scheme)?null:Ft,tt=""}if(st!==void 0)return Qe;bt=A.ParserState.PathStart,dt.pointer--}break;case A.ParserState.File:if(Qe.scheme="file",dt.c()==="/"||dt.c()==="\\")dt.c()==="\\"&&L("Invalid input string."),bt=A.ParserState.FileSlash;else if(ze!==null&&ze.scheme==="file")switch(dt.c()){case"":Qe.host=ze.host,Qe.path=_.list.clone(ze.path),Qe.query=ze.query;break;case"?":Qe.host=ze.host,Qe.path=_.list.clone(ze.path),Qe.query="",bt=A.ParserState.Query;break;case"#":Qe.host=ze.host,Qe.path=_.list.clone(ze.path),Qe.query=ze.query,Qe.fragment="",bt=A.ParserState.Fragment;break;default:Ke(dt.substring())?L("Unexpected windows drive letter in input string."):(Qe.host=ze.host,Qe.path=_.list.clone(ze.path),qe(Qe)),bt=A.ParserState.Path,dt.pointer--}else bt=A.ParserState.Path,dt.pointer--;break;case A.ParserState.FileSlash:dt.c()==="/"||dt.c()==="\\"?(dt.c()==="\\"&&L("Invalid input string."),bt=A.ParserState.FileHost):(ze===null||ze.scheme!=="file"||Ke(dt.substring())||(et(ze.path[0])?Qe.path.push(ze.path[0]):Qe.host=ze.host),bt=A.ParserState.Path,dt.pointer--);break;case A.ParserState.FileHost:if(dt.c()===""||dt.c()==="/"||dt.c()==="\\"||dt.c()==="?"||dt.c()==="#")if(dt.pointer--,st===void 0&&je(tt))L("Unexpected windows drive letter in input string."),bt=A.ParserState.Path;else if(tt===""){if(Qe.host="",st!==void 0)return Qe;bt=A.ParserState.PathStart}else{var It;if((It=Je(tt,!q(Qe)))===null)return null;if(It==="localhost"&&(It=""),Qe.host=It,st!==void 0)return Qe;tt="",bt=A.ParserState.PathStart}else tt+=dt.c();break;case A.ParserState.PathStart:q(Qe)?(dt.c()==="\\"&&L("Invalid input string."),bt=A.ParserState.Path,dt.c()!=="/"&&dt.c()!=="\\"&&dt.pointer--):st===void 0&&dt.c()==="?"?(Qe.query="",bt=A.ParserState.Query):st===void 0&&dt.c()==="#"?(Qe.fragment="",bt=A.ParserState.Fragment):dt.c()!==""&&(bt=A.ParserState.Path,dt.c()!=="/"&&dt.pointer--);break;case A.ParserState.Path:if(dt.c()===""||dt.c()==="/"||q(Qe)&&dt.c()==="\\"||st===void 0&&(dt.c()==="?"||dt.c()==="#")){if(q(Qe)&&dt.c()==="\\"&&L("Invalid input string."),Ye(tt))qe(Qe),dt.c()==="/"||q(Qe)&&dt.c()==="\\"||Qe.path.push("");else if(!Ve(tt)||dt.c()==="/"||q(Qe)&&dt.c()==="\\"){if(!Ve(tt)){if(Qe.scheme==="file"&&Qe.path.length===0&&je(tt)){Qe.host!==null&&Qe.host!==""&&(L("Invalid input string."),Qe.host="");var Vt=Array.from(tt);tt=Vt.slice(0,1)+":"+Vt.slice(2)}Qe.path.push(tt)}}else Qe.path.push("");if(tt="",Qe.scheme==="file"&&(dt.c()===""||dt.c()==="?"||dt.c()==="#"))for(;Qe.path.length>1&&Qe.path[0]==="";)L("Invalid input string."),Qe.path.splice(0,1);dt.c()==="?"&&(Qe.query="",bt=A.ParserState.Query),dt.c()==="#"&&(Qe.fragment="",bt=A.ParserState.Fragment)}else F.test(dt.c())||dt.c()==="%"||L("Character is not a URL code point or a percent encoded character."),dt.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(dt.remaining())||L("Percent encoded character must be followed by two hex digits."),tt+=ft(dt.c(),B);break;case A.ParserState.CannotBeABaseURLPath:dt.c()==="?"?(Qe.query="",bt=A.ParserState.Query):dt.c()==="#"?(Qe.fragment="",bt=A.ParserState.Fragment):(dt.c()===""||F.test(dt.c())||dt.c()==="%"||L("Character is not a URL code point or a percent encoded character."),dt.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(dt.remaining())||L("Percent encoded character must be followed by two hex digits."),dt.c()!==""&&(Qe.path[0]+=ft(dt.c(),E)));break;case A.ParserState.Query:if(Dt==="UTF-8"||q(Qe)&&Qe.scheme!=="ws"&&Qe.scheme!=="wss"||(Dt="UTF-8"),st===void 0&&dt.c()==="#")Qe.fragment="",bt=A.ParserState.Fragment;else if(dt.c()!==""){if(F.test(dt.c())||dt.c()==="%"||L("Character is not a URL code point or a percent encoded character."),dt.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(dt.remaining())||L("Percent encoded character must be followed by two hex digits."),Dt.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Ut=C.utf8Encode(dt.c());if(Ut.length>=3&&Ut[0]===38&&Ut[1]===35&&Ut[Ut.length-1]===59)Ut=Ut.subarray(2,Ut.length-1),Qe.query+="%26%23"+_.byteSequence.isomorphicDecode(Ut)+"%3B";else try{for(var Gt=(ut=void 0,g(Ut)),Yt=Gt.next();!Yt.done;Yt=Gt.next()){var jt=Yt.value;jt<33||jt>126||jt===34||jt===35||jt===60||jt===62||jt===39&&q(Qe)?Qe.query+=ht(jt):Qe.query+=String.fromCharCode(jt)}}catch(Kt){ut={error:Kt}}finally{try{Yt&&!Yt.done&&(gt=Gt.return)&&gt.call(Gt)}finally{if(ut)throw ut.error}}}break;case A.ParserState.Fragment:dt.c()===""||(dt.c()==="\0"?L("NULL character in input string."):(F.test(dt.c())||dt.c()==="%"||L("Unexpected character in fragment string."),dt.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(dt.remaining())||L("Unexpected character in fragment string."),Qe.fragment+=ft(dt.c(),R)))}if(dt.eof)break;dt.pointer++}return Qe}function Ve(we){return we==="."||we.toLowerCase()==="%2e"}function Ye(we){var ze=we.toLowerCase();return ze===".."||ze===".%2e"||ze==="%2e."||ze==="%2e%2e"}function qe(we){var ze=we.path;ze.length!==0&&(we.scheme==="file"&&ze.length===1&&et(ze[0])||we.path.splice(we.path.length-1,1))}function et(we){return we.length>=2&&_.codePoint.ASCIIAlpha.test(we[0])&&we[1]===":"}function je(we){return we.length>=2&&_.codePoint.ASCIIAlpha.test(we[0])&&(we[1]===":"||we[1]==="|")}function Ke(we){return we.length>=2&&je(we)&&(we.length===2||we[2]==="/"||we[2]==="\\"||we[2]==="?"||we[2]==="#")}function Je(we,ze){if(ze===void 0&&(ze=!1),we.startsWith("["))return we.endsWith("]")?ct(we.substring(1,we.length-1)):(L("Expected ']' after '['."),null);if(ze)return pt(we);var Ze=be(C.utf8Decode(wt(we)));if(Ze===null||I.test(Ze))return L("Invalid domain."),null;var Qe=nt(Ze);return Qe===null||C.isNumber(Qe)?Qe:Ze}function at(we,ze){ze===void 0&&(ze={value:!1});var Ze=10;return we.startsWith("0x")||we.startsWith("0X")?(ze.value=!0,we=we.substr(2),Ze=16):we.length>=2&&we[0]==="0"&&(ze.value=!0,we=we.substr(1),Ze=8),we===""?0:(Ze===10?/^[0-9]+$/:Ze===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(we)?parseInt(we,Ze):null}function nt(we){var ze,Ze,Qe,st,lt={value:!1},ot=we.split(".");if(ot[ot.length-1]===""&&(lt.value=!0,ot.length>1&&ot.pop()),ot.length>4)return we;var ut=[];try{for(var gt=g(ot),vt=gt.next();!vt.done;vt=gt.next()){var xt=vt.value;if(xt===""||(Ct=at(xt,lt))===null)return we;ut.push(Ct)}}catch(Mt){ze={error:Mt}}finally{try{vt&&!vt.done&&(Ze=gt.return)&&Ze.call(gt)}finally{if(ze)throw ze.error}}lt.value&&L("Invalid IP v4 address.");for(var Pt=0;Pt<ut.length;Pt++)if(ut[Pt]>255&&(L("Invalid IP v4 address."),Pt<ut.length-1))return null;if(ut[ut.length-1]>=Math.pow(256,5-ut.length))return L("Invalid IP v4 address."),null;var bt=ut[ut.length-1];ut.pop();var Dt=0;try{for(var tt=g(ut),Et=tt.next();!Et.done;Et=tt.next()){var Ct;bt+=(Ct=Et.value)*Math.pow(256,3-Dt),Dt++}}catch(Mt){Qe={error:Mt}}finally{try{Et&&!Et.done&&(st=tt.return)&&st.call(tt)}finally{if(Qe)throw Qe.error}}return bt}function ct(we){var ze,Ze=[0,0,0,0,0,0,0,0],Qe=0,st=null,lt=new C.StringWalker(we);if(lt.c()===":"){if(!lt.remaining().startsWith(":"))return L("Invalid IP v6 address."),null;lt.pointer+=2,st=Qe+=1}for(;lt.c()!=="";){if(Qe===8)return L("Invalid IP v6 address."),null;if(lt.c()!==":"){for(var ot=0,ut=0;ut<4&&_.codePoint.ASCIIHexDigit.test(lt.c());)ot=16*ot+parseInt(lt.c(),16),lt.pointer++,ut++;if(lt.c()==="."){if(ut===0||(lt.pointer-=ut,Qe>6))return L("Invalid IP v6 address."),null;for(var gt=0;lt.c()!=="";){var vt=null;if(gt>0){if(!(lt.c()==="."&&gt<4))return L("Invalid IP v6 address."),null;lt.pointer++}if(!_.codePoint.ASCIIDigit.test(lt.c()))return L("Invalid IP v6 address."),null;for(;_.codePoint.ASCIIDigit.test(lt.c());){var xt=parseInt(lt.c(),10);if(vt===null)vt=xt;else{if(vt===0)return L("Invalid IP v6 address."),null;vt=10*vt+xt}if(vt>255)return L("Invalid IP v6 address."),null;lt.pointer++}if(vt===null)return L("Invalid IP v6 address."),null;Ze[Qe]=256*Ze[Qe]+vt,++gt!==2&&gt!==4||Qe++}if(gt!==4)return L("Invalid IP v6 address."),null;break}if(lt.c()===":"){if(lt.pointer++,lt.c()==="")return L("Invalid IP v6 address."),null}else if(lt.c()!=="")return L("Invalid IP v6 address."),null;Ze[Qe]=ot,Qe++}else{if(st!==null)return L("Invalid IP v6 address."),null;lt.pointer++,st=++Qe}}if(st!==null){var Pt=Qe-st;for(Qe=7;Qe!==0&&Pt>0;)ze=x([Ze[st+Pt-1],Ze[Qe]],2),Ze[Qe]=ze[0],Ze[st+Pt-1]=ze[1],Qe--,Pt--}else if(st===null&&Qe!==8)return L("Invalid IP v6 address."),null;return Ze}function pt(we){var ze,Ze;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(we))return L("Invalid host string."),null;var Qe="";try{for(var st=g(we),lt=st.next();!lt.done;lt=st.next())Qe+=ft(lt.value,E)}catch(ot){ze={error:ot}}finally{try{lt&&!lt.done&&(Ze=st.return)&&Ze.call(st)}finally{if(ze)throw ze.error}}return Qe}function rt(we){return null}function ht(we){return"%"+("00"+we.toString(16).toUpperCase()).slice(-2)}function yt(we){for(var ze=function(ut){return ut>=48&&ut<=57||ut>=65&&ut<=70||ut>=97&&ut<=102},Ze=new Uint8Array(we.length),Qe=0,st=0;st<we.length;st++){var lt=we[st];if(lt!==37)Ze[Qe]=lt,Qe++;else if(lt===37&&st>=we.length-2)Ze[Qe]=lt,Qe++;else if(lt!==37||ze(we[st+1])&&ze(we[st+2])){var ot=parseInt(C.utf8Decode(Uint8Array.of(we[st+1],we[st+2])),16);Ze[Qe]=ot,Qe++,st+=2}else Ze[Qe]=lt,Qe++}return Ze.subarray(0,Qe)}function wt(we){return yt(C.utf8Encode(we))}function ft(we,ze){var Ze,Qe;if(!ze.test(we))return we;var st=C.utf8Encode(we),lt="";try{for(var ot=g(st),ut=ot.next();!ut.done;ut=ot.next())lt+=ht(ut.value)}catch(gt){Ze={error:gt}}finally{try{ut&&!ut.done&&(Qe=ot.return)&&Qe.call(ot)}finally{if(Ze)throw Ze.error}}return lt}function He(we){var ze,Ze,Qe,st,lt=[],ot=[];try{for(var ut=g(we),gt=ut.next();!gt.done;gt=ut.next()){var vt=gt.value;vt===38?(lt.push(Uint8Array.from(ot)),ot=[]):ot.push(vt)}}catch(Tt){ze={error:Tt}}finally{try{gt&&!gt.done&&(Ze=ut.return)&&Ze.call(ut)}finally{if(ze)throw ze.error}}ot.length!==0&&lt.push(Uint8Array.from(ot));var xt=[];try{for(var Pt=g(lt),bt=Pt.next();!bt.done;bt=Pt.next()){var Dt=bt.value;if(Dt.length!==0){for(var tt=Dt.indexOf(61),Et=tt!==-1?Dt.slice(0,tt):Dt,Ct=tt!==-1?Dt.slice(tt+1):new Uint8Array,Mt=0;Mt<Et.length;Mt++)Et[Mt]===43&&(Et[Mt]=32);for(Mt=0;Mt<Ct.length;Mt++)Ct[Mt]===43&&(Ct[Mt]=32);var dt=C.utf8Decode(Et),At=C.utf8Decode(Ct);xt.push([dt,At])}}}catch(Tt){Qe={error:Tt}}finally{try{bt&&!bt.done&&(st=Pt.return)&&st.call(Pt)}finally{if(Qe)throw Qe.error}}return xt}function le(we){var ze,Ze,Qe="";try{for(var st=g(we),lt=st.next();!lt.done;lt=st.next()){var ot=lt.value;Qe+=ot===32?"+":ot===42||ot===45||ot===46||ot>=48&&ot<=57||ot>=65&&ot<=90||ot===95||ot>=97&&ot<=122?String.fromCodePoint(ot):ht(ot)}}catch(ut){ze={error:ut}}finally{try{lt&&!lt.done&&(Ze=st.return)&&Ze.call(st)}finally{if(ze)throw ze.error}}return Qe}function be(we,ze){var Ze=M.domainToASCII(we);return Ze===""?(L("Invalid domain name."),null):Ze}m.setValidationErrorCallback=function(we){w=we},m.newURL=W,m.isSpecialScheme=G,m.isSpecial=q,m.defaultPort=K,m.includesCredentials=Z,m.cannotHaveAUsernamePasswordPort=function(we){return we.host===null||we.host===""||we._cannotBeABaseURLFlag||we.scheme==="file"},m.urlSerializer=J,m.hostSerializer=te,m.iPv4Serializer=Q,m.iPv6Serializer=me,m.urlParser=function(we,ze,Ze){var Qe=Xe(we,ze,Ze);return Qe===null?null:(Qe.scheme!=="blob"||(Qe._blobURLEntry=null),Qe)},m.basicURLParser=Xe,m.setTheUsername=function(we,ze){var Ze,Qe,st="";try{for(var lt=g(ze),ot=lt.next();!ot.done;ot=lt.next())st+=ft(ot.value,z)}catch(ut){Ze={error:ut}}finally{try{ot&&!ot.done&&(Qe=lt.return)&&Qe.call(lt)}finally{if(Ze)throw Ze.error}}we.username=st},m.setThePassword=function(we,ze){var Ze,Qe,st="";try{for(var lt=g(ze),ot=lt.next();!ot.done;ot=lt.next())st+=ft(ot.value,z)}catch(ut){Ze={error:ut}}finally{try{ot&&!ot.done&&(Qe=lt.return)&&Qe.call(lt)}finally{if(Ze)throw Ze.error}}we.password=st},m.isSingleDotPathSegment=Ve,m.isDoubleDotPathSegment=Ye,m.shorten=qe,m.isNormalizedWindowsDriveLetter=et,m.isWindowsDriveLetter=je,m.startsWithAWindowsDriveLetter=Ke,m.hostParser=Je,m.iPv4NumberParser=at,m.iPv4Parser=nt,m.iPv6Parser=ct,m.opaqueHostParser=pt,m.resolveABlobURL=rt,m.percentEncode=ht,m.percentDecode=yt,m.stringPercentDecode=wt,m.utf8PercentEncode=ft,m.hostEquals=function(we,ze){return we===ze},m.urlEquals=function(we,ze,Ze){return Ze===void 0&&(Ze=!1),J(we,Ze)===J(ze,Ze)},m.urlEncodedStringParser=function(we){return He(C.utf8Encode(we))},m.urlEncodedParser=He,m.urlEncodedByteSerializer=le,m.urlEncodedSerializer=function(we,ze){var Ze,Qe;if((ze===void 0||ze==="replacement"||ze==="UTF-16BE"||ze==="UTF-16LE"?"UTF-8":ze).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var st="";try{for(var lt=g(we),ot=lt.next();!ot.done;ot=lt.next()){var ut=ot.value,gt=le(C.utf8Encode(ut[0])),vt=ut[1];vt=le(C.utf8Encode(vt)),st!==""&&(st+="&"),st+=gt+"="+vt}}catch(xt){Ze={error:xt}}finally{try{ot&&!ot.done&&(Qe=lt.return)&&Qe.call(lt)}finally{if(Ze)throw Ze.error}}return st},m.origin=function we(ze){switch(ze.scheme){case"blob":ze._blobURLEntry;var Ze=Xe(ze.path[0]);return Ze===null?A.OpaqueOrigin:we(Ze);case"ftp":case"http":case"https":case"ws":case"wss":return[ze.scheme,ze.host===null?"":ze.host,ze.port,null];case"file":default:return A.OpaqueOrigin}},m.domainToASCII=be,m.domainToUnicode=function(we,ze){var Ze=M.domainToUnicode(we);return Ze===""&&L("Invalid domain name."),Ze},m.asciiSerializationOfAnOrigin=function(we){if(we[0]===""&&we[1]===""&&we[2]===null&&we[3]===null)return"null";var ze=we[0]+"://"+te(we[1]);return we[2]!==null&&(ze+=":"+we[2].toString()),ze}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(0),x=function(){function w(){this._signal=g.create_abortSignal()}return Object.defineProperty(w.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),w.prototype.abort=function(){g.abort_signalAbort(this._signal)},w}();m.AbortControllerImpl=x},function(d,m,f){var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(70),C=f(0),A=function(_){function M(){var P=_.call(this)||this;return P._abortedFlag=!1,P._abortAlgorithms=new Set,P}return x(M,_),Object.defineProperty(M.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"onabort",{get:function(){return C.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(P){C.event_setterEventHandlerIDLAttribute(this,"onabort",P)},enumerable:!0,configurable:!0}),M._create=function(){return new M},M}(w.EventTargetImpl);m.AbortSignalImpl=A},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(34),A=f(12),_=function(M){function P(E,R,B){var z=M.call(this)||this;return z._name="",z._publicId="",z._systemId="",z._name=E,z._publicId=R,z._systemId=B,z}return x(P,M),Object.defineProperty(P.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),P.prototype.before=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];throw new Error("Mixin: ChildNode not implemented.")},P.prototype.after=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];throw new Error("Mixin: ChildNode not implemented.")},P.prototype.replaceWith=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];throw new Error("Mixin: ChildNode not implemented.")},P.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},P._create=function(E,R,B,z){B===void 0&&(B=""),z===void 0&&(z="");var F=new P(R,B,z);return F._nodeDocument=E,F},P}(C.NodeImpl);m.DocumentTypeImpl=_,A.idl_defineConst(_.prototype,"_nodeType",w.NodeType.DocumentType)},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(100),C=f(2),A=f(0),_=function(M){function P(E,R){var B=M.call(this)||this;return B._host=E,B._mode=R,B}return x(P,M),Object.defineProperty(P.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),P.prototype._getTheParent=function(E){return E._composedFlag||C.isEmpty(E._path)||A.tree_rootNode(E._path[0].invocationTarget)!==this?this._host:null},P._create=function(E,R){return new P(R,"closed")},P}(w.DocumentFragmentImpl);m.ShadowRootImpl=_},function(d,m,f){var g,x=this&&this.__extends||(g=function(P,E){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,B){R.__proto__=B}||function(R,B){for(var z in B)B.hasOwnProperty(z)&&(R[z]=B[z])})(P,E)},function(P,E){function R(){this.constructor=P}g(P,E),P.prototype=E===null?Object.create(E):(R.prototype=E.prototype,new R)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(34),A=f(0),_=f(12),M=function(P){function E(R){var B=P.call(this)||this;return B._namespace=null,B._namespacePrefix=null,B._element=null,B._value="",B._localName=R,B}return x(E,P),Object.defineProperty(E.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"value",{get:function(){return this._value},set:function(R){A.attr_setAnExistingAttributeValue(this,R)},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),E._create=function(R,B){var z=new E(B);return z._nodeDocument=R,z},E}(C.NodeImpl);m.AttrImpl=M,_.idl_defineConst(M.prototype,"_nodeType",w.NodeType.Attribute),_.idl_defineConst(M.prototype,"specified",!0)},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(101),C=f(1),A=f(12),_=function(M){function P(E){return M.call(this,E)||this}return x(P,M),P._create=function(E,R){R===void 0&&(R="");var B=new P(R);return B._nodeDocument=E,B},P}(w.TextImpl);m.CDATASectionImpl=_,A.idl_defineConst(_.prototype,"_nodeType",C.NodeType.CData)},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(71),A=f(12),_=function(M){function P(E){return E===void 0&&(E=""),M.call(this,E)||this}return x(P,M),P._create=function(E,R){R===void 0&&(R="");var B=new P(R);return B._nodeDocument=E,B},P}(C.CharacterDataImpl);m.CommentImpl=_,A.idl_defineConst(_.prototype,"_nodeType",w.NodeType.Comment)},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(71),A=f(12),_=function(M){function P(E,R){var B=M.call(this,R)||this;return B._target=E,B}return x(P,M),Object.defineProperty(P.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),P._create=function(E,R,B){var z=new P(R,B);return z._nodeDocument=E,z},P}(C.CharacterDataImpl);m.ProcessingInstructionImpl=_,A.idl_defineConst(_.prototype,"_nodeType",w.NodeType.ProcessingInstruction)},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(7),x=f(0),w=f(3),C=f(2),A=function(){function _(M,P){return this._live=!0,this._root=M,this._filter=P,new Proxy(this,this)}return Object.defineProperty(_.prototype,"length",{get:function(){for(var M=this,P=0,E=x.tree_getFirstDescendantNode(this._root,!1,!1,function(R){return w.Guard.isElementNode(R)&&M._filter(R)});E!==null;)P++,E=x.tree_getNextDescendantNode(this._root,E,!1,!1,function(R){return w.Guard.isElementNode(R)&&M._filter(R)});return P},enumerable:!0,configurable:!0}),_.prototype.item=function(M){for(var P=this,E=0,R=x.tree_getFirstDescendantNode(this._root,!1,!1,function(B){return w.Guard.isElementNode(B)&&P._filter(B)});R!==null;){if(E===M)return R;E++,R=x.tree_getNextDescendantNode(this._root,R,!1,!1,function(B){return w.Guard.isElementNode(B)&&P._filter(B)})}return null},_.prototype.namedItem=function(M){var P=this;if(M==="")return null;for(var E=x.tree_getFirstDescendantNode(this._root,!1,!1,function(z){return w.Guard.isElementNode(z)&&P._filter(z)});E!=null;){if(E._uniqueIdentifier===M)return E;if(E._namespace===g.namespace.HTML)for(var R=0;R<E._attributeList.length;R++){var B=E._attributeList[R];if(B._localName==="name"&&B._namespace===null&&B._namespacePrefix===null&&B._value===M)return E}E=x.tree_getNextDescendantNode(this._root,E,!1,!1,function(z){return w.Guard.isElementNode(z)&&P._filter(z)})}return null},_.prototype[Symbol.iterator]=function(){var M=this._root,P=this._filter,E=x.tree_getFirstDescendantNode(M,!1,!1,function(R){return w.Guard.isElementNode(R)&&P(R)});return{next:function(){if(E===null)return{done:!0,value:null};var R={done:!1,value:E};return E=x.tree_getNextDescendantNode(M,E,!1,!1,function(B){return w.Guard.isElementNode(B)&&P(B)}),R}}},_.prototype.get=function(M,P,E){if(!C.isString(P)||_.reservedNames.indexOf(P)!==-1)return Reflect.get(M,P,E);var R=Number(P);return isNaN(R)?M.namedItem(P)||void 0:M.item(R)||void 0},_.prototype.set=function(M,P,E,R){if(!C.isString(P)||_.reservedNames.indexOf(P)!==-1)return Reflect.set(M,P,E,R);var B=Number(P),z=isNaN(B)?M.namedItem(P)||void 0:M.item(B)||void 0;return!(!z||!z._parent)&&(x.mutation_replace(z,E,z._parent),!0)},_._create=function(M,P){return P===void 0&&(P=function(){return!0}),new _(M,P)},_.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],_}();m.HTMLCollectionImpl=A},function(d,m,f){var g=this&&this.__values||function(_){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&_[M],E=0;if(P)return P.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&E>=_.length&&(_=void 0),{value:_&&_[E++],done:!_}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(2),C=f(0),A=function(){function _(M){return this._live=!0,this._filter=null,this._length=0,this._root=M,new Proxy(this,this)}return Object.defineProperty(_.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),_.prototype.item=function(M){if(M<0||M>this.length-1)return null;if(M<this.length/2){for(var P=0,E=this._root._firstChild;E!==null&&P!==M;)E=E._nextSibling,P++;return E}for(P=this.length-1,E=this._root._lastChild;E!==null&&P!==M;)E=E._previousSibling,P--;return E},_.prototype.keys=function(){var M;return(M={})[Symbol.iterator]=(function(){var P=0;return{next:(function(){return P===this.length?{done:!0,value:null}:{done:!1,value:P++}}).bind(this)}}).bind(this),M},_.prototype.values=function(){var M;return(M={})[Symbol.iterator]=(function(){var P=this[Symbol.iterator]();return{next:function(){return P.next()}}}).bind(this),M},_.prototype.entries=function(){var M;return(M={})[Symbol.iterator]=(function(){var P=this[Symbol.iterator](),E=0;return{next:function(){var R=P.next();return R.done?{done:!0,value:null}:{done:!1,value:[E++,R.value]}}}}).bind(this),M},_.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},_.prototype.forEach=function(M,P){var E,R;P===void 0&&(P=x.dom.window);var B=0;try{for(var z=g(this._root._children),F=z.next();!F.done;F=z.next()){var I=F.value;M.call(P,I,B++,this)}}catch(L){E={error:L}}finally{try{F&&!F.done&&(R=z.return)&&R.call(z)}finally{if(E)throw E.error}}},_.prototype.get=function(M,P,E){if(!w.isString(P))return Reflect.get(M,P,E);var R=Number(P);return isNaN(R)?Reflect.get(M,P,E):M.item(R)||void 0},_.prototype.set=function(M,P,E,R){if(!w.isString(P))return Reflect.set(M,P,E,R);var B=Number(P);if(isNaN(B))return Reflect.set(M,P,E,R);var z=M.item(B)||void 0;return!!z&&!!z._parent&&(C.mutation_replace(z,E,z._parent),!0)},_._create=function(M){return new _(M)},_}();m.NodeListImpl=A},function(d,m,f){var g=this&&this.__values||function(A){var _=typeof Symbol=="function"&&Symbol.iterator,M=_&&A[_],P=0;if(M)return M.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&P>=A.length&&(A=void 0),{value:A&&A[P++],done:!A}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(2),C=function(){function A(_){return this._live=!1,this._items=[],this._length=0,this._root=_,this._items=[],this._filter=function(M){return!0},new Proxy(this,this)}return Object.defineProperty(A.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),A.prototype.item=function(_){return _<0||_>this.length-1?null:this._items[_]},A.prototype.keys=function(){var _;return(_={})[Symbol.iterator]=(function(){var M=0;return{next:(function(){return M===this.length?{done:!0,value:null}:{done:!1,value:M++}}).bind(this)}}).bind(this),_},A.prototype.values=function(){var _;return(_={})[Symbol.iterator]=(function(){var M=this[Symbol.iterator]();return{next:function(){return M.next()}}}).bind(this),_},A.prototype.entries=function(){var _;return(_={})[Symbol.iterator]=(function(){var M=this[Symbol.iterator](),P=0;return{next:function(){var E=M.next();return E.done?{done:!0,value:null}:{done:!1,value:[P++,E.value]}}}}).bind(this),_},A.prototype[Symbol.iterator]=function(){var _=this._items[Symbol.iterator]();return{next:function(){return _.next()}}},A.prototype.forEach=function(_,M){var P,E;M===void 0&&(M=x.dom.window);var R=0;try{for(var B=g(this._items),z=B.next();!z.done;z=B.next()){var F=z.value;_.call(M,F,R++,this)}}catch(I){P={error:I}}finally{try{z&&!z.done&&(E=B.return)&&E.call(B)}finally{if(P)throw P.error}}},A.prototype.get=function(_,M,P){if(!w.isString(M))return Reflect.get(_,M,P);var E=Number(M);return isNaN(E)?Reflect.get(_,M,P):_._items[E]||void 0},A.prototype.set=function(_,M,P,E){if(!w.isString(M))return Reflect.set(_,M,P,E);var R=Number(M);return isNaN(R)?Reflect.set(_,M,P,E):R>=0&&R<_._items.length&&(_._items[R]=P,!0)},A._create=function(_,M){var P=new A(_);return P._items=M,P},A}();m.NodeListStaticImpl=C},function(d,m,f){var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(9),C=f(0),A=function(_){function M(P){var E=_.call(this)||this;return E._element=P,Object.setPrototypeOf(E,M.prototype),E}return x(M,_),M.prototype._asArray=function(){return this},M.prototype.item=function(P){return this[P]||null},M.prototype.getNamedItem=function(P){return C.element_getAnAttributeByName(P,this._element)},M.prototype.getNamedItemNS=function(P,E){return C.element_getAnAttributeByNamespaceAndLocalName(P||"",E,this._element)},M.prototype.setNamedItem=function(P){return C.element_setAnAttribute(P,this._element)},M.prototype.setNamedItemNS=function(P){return C.element_setAnAttribute(P,this._element)},M.prototype.removeNamedItem=function(P){var E=C.element_removeAnAttributeByName(P,this._element);if(E===null)throw new w.NotFoundError;return E},M.prototype.removeNamedItemNS=function(P,E){var R=C.element_removeAnAttributeByNamespaceAndLocalName(P||"",E,this._element);if(R===null)throw new w.NotFoundError;return R},M._create=function(P){return new M(P)},M}(Array);m.NamedNodeMapImpl=A},function(d,m,f){var g,x=this&&this.__extends||(g=function(z,F){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,L){I.__proto__=L}||function(I,L){for(var W in L)L.hasOwnProperty(W)&&(I[W]=L[W])})(z,F)},function(z,F){function I(){this.constructor=z}g(z,F),z.prototype=F===null?Object.create(F):(I.prototype=F.prototype,new I)}),w=this&&this.__values||function(z){var F=typeof Symbol=="function"&&Symbol.iterator,I=F&&z[F],L=0;if(I)return I.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&L>=z.length&&(z=void 0),{value:z&&z[L++],done:!z}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(6),A=f(1),_=f(102),M=f(9),P=f(0),E=f(12),R=f(3),B=function(z){function F(){var I=z.call(this)||this,L=C.dom.window._associatedDocument;return I._start=[L,0],I._end=[L,0],C.dom.rangeList.add(I),I}return x(F,z),Object.defineProperty(F.prototype,"commonAncestorContainer",{get:function(){for(var I=this._start[0];!P.tree_isAncestorOf(this._end[0],I,!0);){if(I._parent===null)throw new Error("Parent node  is null.");I=I._parent}return I},enumerable:!0,configurable:!0}),F.prototype.setStart=function(I,L){P.range_setTheStart(this,I,L)},F.prototype.setEnd=function(I,L){P.range_setTheEnd(this,I,L)},F.prototype.setStartBefore=function(I){var L=I._parent;if(L===null)throw new M.InvalidNodeTypeError;P.range_setTheStart(this,L,P.tree_index(I))},F.prototype.setStartAfter=function(I){var L=I._parent;if(L===null)throw new M.InvalidNodeTypeError;P.range_setTheStart(this,L,P.tree_index(I)+1)},F.prototype.setEndBefore=function(I){var L=I._parent;if(L===null)throw new M.InvalidNodeTypeError;P.range_setTheEnd(this,L,P.tree_index(I))},F.prototype.setEndAfter=function(I){var L=I._parent;if(L===null)throw new M.InvalidNodeTypeError;P.range_setTheEnd(this,L,P.tree_index(I)+1)},F.prototype.collapse=function(I){I?this._end=this._start:this._start=this._end},F.prototype.selectNode=function(I){P.range_select(I,this)},F.prototype.selectNodeContents=function(I){if(R.Guard.isDocumentTypeNode(I))throw new M.InvalidNodeTypeError;var L=P.tree_nodeLength(I);this._start=[I,0],this._end=[I,L]},F.prototype.compareBoundaryPoints=function(I,L){if(I!==A.HowToCompare.StartToStart&&I!==A.HowToCompare.StartToEnd&&I!==A.HowToCompare.EndToEnd&&I!==A.HowToCompare.EndToStart)throw new M.NotSupportedError;if(P.range_root(this)!==P.range_root(L))throw new M.WrongDocumentError;var W,G;switch(I){case A.HowToCompare.StartToStart:W=this._start,G=L._start;break;case A.HowToCompare.StartToEnd:W=this._end,G=L._start;break;case A.HowToCompare.EndToEnd:W=this._end,G=L._end;break;case A.HowToCompare.EndToStart:W=this._start,G=L._end;break;default:throw new M.NotSupportedError}var q=P.boundaryPoint_position(W,G);return q===A.BoundaryPosition.Before?-1:q===A.BoundaryPosition.After?1:0},F.prototype.deleteContents=function(){var I,L,W,G;if(!P.range_collapsed(this)){var q=this._startNode,K=this._startOffset,Z=this._endNode,J=this._endOffset;if(q===Z&&R.Guard.isCharacterDataNode(q))P.characterData_replaceData(q,K,J-K,"");else{var te,Q,me=[];try{for(var Xe=w(P.range_getContainedNodes(this)),Ve=Xe.next();!Ve.done;Ve=Xe.next()){var Ye=(Ke=Ve.value)._parent;Ye!==null&&P.range_isContained(Ye,this)||me.push(Ke)}}catch(Je){I={error:Je}}finally{try{Ve&&!Ve.done&&(L=Xe.return)&&L.call(Xe)}finally{if(I)throw I.error}}if(P.tree_isAncestorOf(Z,q,!0))te=q,Q=K;else{for(var qe=q;qe._parent!==null&&!P.tree_isAncestorOf(Z,qe._parent,!0);)qe=qe._parent;if(qe._parent===null)throw new Error("Parent node is null.");te=qe._parent,Q=P.tree_index(qe)+1}R.Guard.isCharacterDataNode(q)&&P.characterData_replaceData(q,K,P.tree_nodeLength(q)-K,"");try{for(var et=w(me),je=et.next();!je.done;je=et.next()){var Ke;(Ke=je.value)._parent&&P.mutation_remove(Ke,Ke._parent)}}catch(Je){W={error:Je}}finally{try{je&&!je.done&&(G=et.return)&&G.call(et)}finally{if(W)throw W.error}}R.Guard.isCharacterDataNode(Z)&&P.characterData_replaceData(Z,0,J,""),this._start=[te,Q],this._end=[te,Q]}}},F.prototype.extractContents=function(){return P.range_extract(this)},F.prototype.cloneContents=function(){return P.range_cloneTheContents(this)},F.prototype.insertNode=function(I){return P.range_insert(I,this)},F.prototype.surroundContents=function(I){var L,W;try{for(var G=w(P.range_getPartiallyContainedNodes(this)),q=G.next();!q.done;q=G.next()){var K=q.value;if(!R.Guard.isTextNode(K))throw new M.InvalidStateError}}catch(J){L={error:J}}finally{try{q&&!q.done&&(W=G.return)&&W.call(G)}finally{if(L)throw L.error}}if(R.Guard.isDocumentNode(I)||R.Guard.isDocumentTypeNode(I)||R.Guard.isDocumentFragmentNode(I))throw new M.InvalidNodeTypeError;var Z=P.range_extract(this);I._children.size!==0&&P.mutation_replaceAll(null,I),P.range_insert(I,this),P.mutation_append(Z,I),P.range_select(I,this)},F.prototype.cloneRange=function(){return P.create_range(this._start,this._end)},F.prototype.detach=function(){C.dom.rangeList.delete(this)},F.prototype.isPointInRange=function(I,L){if(P.tree_rootNode(I)!==P.range_root(this))return!1;if(R.Guard.isDocumentTypeNode(I))throw new M.InvalidNodeTypeError;if(L>P.tree_nodeLength(I))throw new M.IndexSizeError;var W=[I,L];return P.boundaryPoint_position(W,this._start)!==A.BoundaryPosition.Before&&P.boundaryPoint_position(W,this._end)!==A.BoundaryPosition.After},F.prototype.comparePoint=function(I,L){if(P.tree_rootNode(I)!==P.range_root(this))throw new M.WrongDocumentError;if(R.Guard.isDocumentTypeNode(I))throw new M.InvalidNodeTypeError;if(L>P.tree_nodeLength(I))throw new M.IndexSizeError;var W=[I,L];return P.boundaryPoint_position(W,this._start)===A.BoundaryPosition.Before?-1:P.boundaryPoint_position(W,this._end)===A.BoundaryPosition.After?1:0},F.prototype.intersectsNode=function(I){if(P.tree_rootNode(I)!==P.range_root(this))return!1;var L=I._parent;if(L===null)return!0;var W=P.tree_index(I);return P.boundaryPoint_position([L,W],this._end)===A.BoundaryPosition.Before&&P.boundaryPoint_position([L,W+1],this._start)===A.BoundaryPosition.After},F.prototype.toString=function(){var I,L,W="";if(this._startNode===this._endNode&&R.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);R.Guard.isTextNode(this._startNode)&&(W+=this._startNode._data.substring(this._startOffset));try{for(var G=w(P.range_getContainedNodes(this)),q=G.next();!q.done;q=G.next()){var K=q.value;R.Guard.isTextNode(K)&&(W+=K._data)}}catch(Z){I={error:Z}}finally{try{q&&!q.done&&(L=G.return)&&L.call(G)}finally{if(I)throw I.error}}return R.Guard.isTextNode(this._endNode)&&(W+=this._endNode._data.substring(0,this._endOffset)),W},F._create=function(I,L){var W=new F;return I&&(W._start=I),L&&(W._end=L),W},F.START_TO_START=0,F.START_TO_END=1,F.END_TO_END=2,F.END_TO_START=3,F}(_.AbstractRangeImpl);m.RangeImpl=B,E.idl_defineConst(B.prototype,"START_TO_START",0),E.idl_defineConst(B.prototype,"START_TO_END",1),E.idl_defineConst(B.prototype,"END_TO_END",2),E.idl_defineConst(B.prototype,"END_TO_START",3)},function(d,m,f){var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(103),C=f(0),A=function(_){function M(P,E,R){var B=_.call(this,P)||this;return B._iteratorCollection=void 0,B._reference=E,B._pointerBeforeReference=R,C.nodeIterator_iteratorList().add(B),B}return x(M,_),Object.defineProperty(M.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),M.prototype.nextNode=function(){return C.nodeIterator_traverse(this,!0)},M.prototype.previousNode=function(){return C.nodeIterator_traverse(this,!1)},M.prototype.detach=function(){C.nodeIterator_iteratorList().delete(this)},M._create=function(P,E,R){return new M(P,E,R)},M}(w.TraverserImpl);m.NodeIteratorImpl=A},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(1),C=f(103),A=f(0),_=function(M){function P(E,R){var B=M.call(this,E)||this;return B._current=R,B}return x(P,M),Object.defineProperty(P.prototype,"currentNode",{get:function(){return this._current},set:function(E){this._current=E},enumerable:!0,configurable:!0}),P.prototype.parentNode=function(){for(var E=this._current;E!==null&&E!==this._root;)if((E=E._parent)!==null&&A.traversal_filter(this,E)===w.FilterResult.Accept)return this._current=E,E;return null},P.prototype.firstChild=function(){return A.treeWalker_traverseChildren(this,!0)},P.prototype.lastChild=function(){return A.treeWalker_traverseChildren(this,!1)},P.prototype.nextSibling=function(){return A.treeWalker_traverseSiblings(this,!0)},P.prototype.previousNode=function(){for(var E=this._current;E!==this._root;){for(var R=E._previousSibling;R;){E=R;for(var B=A.traversal_filter(this,E);B!==w.FilterResult.Reject&&E._lastChild;)E=E._lastChild,B=A.traversal_filter(this,E);if(B===w.FilterResult.Accept)return this._current=E,E;R=E._previousSibling}if(E===this._root||E._parent===null)return null;if(E=E._parent,A.traversal_filter(this,E)===w.FilterResult.Accept)return this._current=E,E}return null},P.prototype.previousSibling=function(){return A.treeWalker_traverseSiblings(this,!1)},P.prototype.nextNode=function(){for(var E=this._current,R=w.FilterResult.Accept;;){for(;R!==w.FilterResult.Reject&&E._firstChild;)if(E=E._firstChild,(R=A.traversal_filter(this,E))===w.FilterResult.Accept)return this._current=E,E;for(var B=null,z=E;z!==null;){if(z===this._root)return null;if((B=z._nextSibling)!==null){E=B;break}z=z._parent}if((R=A.traversal_filter(this,E))===w.FilterResult.Accept)return this._current=E,E}},P._create=function(E,R){return new P(E,R)},P}(C.TraverserImpl);m.TreeWalkerImpl=_},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=f(12),w=function(){function C(){}return C.prototype.acceptNode=function(A){return g.FilterResult.Accept},C._create=function(){return new C},C.FILTER_ACCEPT=1,C.FILTER_REJECT=2,C.FILTER_SKIP=3,C.SHOW_ALL=4294967295,C.SHOW_ELEMENT=1,C.SHOW_ATTRIBUTE=2,C.SHOW_TEXT=4,C.SHOW_CDATA_SECTION=8,C.SHOW_ENTITY_REFERENCE=16,C.SHOW_ENTITY=32,C.SHOW_PROCESSING_INSTRUCTION=64,C.SHOW_COMMENT=128,C.SHOW_DOCUMENT=256,C.SHOW_DOCUMENT_TYPE=512,C.SHOW_DOCUMENT_FRAGMENT=1024,C.SHOW_NOTATION=2048,C}();m.NodeFilterImpl=w,x.idl_defineConst(w.prototype,"FILTER_ACCEPT",1),x.idl_defineConst(w.prototype,"FILTER_REJECT",2),x.idl_defineConst(w.prototype,"FILTER_SKIP",3),x.idl_defineConst(w.prototype,"SHOW_ALL",4294967295),x.idl_defineConst(w.prototype,"SHOW_ELEMENT",1),x.idl_defineConst(w.prototype,"SHOW_ATTRIBUTE",2),x.idl_defineConst(w.prototype,"SHOW_TEXT",4),x.idl_defineConst(w.prototype,"SHOW_CDATA_SECTION",8),x.idl_defineConst(w.prototype,"SHOW_ENTITY_REFERENCE",16),x.idl_defineConst(w.prototype,"SHOW_ENTITY",32),x.idl_defineConst(w.prototype,"SHOW_PROCESSING_INSTRUCTION",64),x.idl_defineConst(w.prototype,"SHOW_COMMENT",128),x.idl_defineConst(w.prototype,"SHOW_DOCUMENT",256),x.idl_defineConst(w.prototype,"SHOW_DOCUMENT_TYPE",512),x.idl_defineConst(w.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),x.idl_defineConst(w.prototype,"SHOW_NOTATION",2048)},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(w,C,A,_,M,P,E,R,B){this._type=w,this._target=C,this._addedNodes=A,this._removedNodes=_,this._previousSibling=M,this._nextSibling=P,this._attributeName=E,this._attributeNamespace=R,this._oldValue=B}return Object.defineProperty(x.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),x._create=function(w,C,A,_,M,P,E,R,B){return new x(w,C,A,_,M,P,E,R,B)},x}();m.MutationRecordImpl=g},function(d,m,f){var g=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(9),C=f(7),A=f(0),_=function(){function M(P,E){this._element=P,this._attribute=E,this._tokenSet=new Set;var R=E._localName,B=A.element_getAnAttributeValue(P,R),z=this;this._element._attributeChangeSteps.push(function(F,I,L,W,G){I===z._attribute._localName&&G===null&&(W?z._tokenSet=A.orderedSet_parse(W):z._tokenSet.clear())}),x.dom.features.steps&&A.dom_runAttributeChangeSteps(P,R,B,B,null)}return Object.defineProperty(M.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),M.prototype.item=function(P){var E,R,B=0;try{for(var z=g(this._tokenSet),F=z.next();!F.done;F=z.next()){var I=F.value;if(B===P)return I;B++}}catch(L){E={error:L}}finally{try{F&&!F.done&&(R=z.return)&&R.call(z)}finally{if(E)throw E.error}}return null},M.prototype.contains=function(P){return this._tokenSet.has(P)},M.prototype.add=function(){for(var P,E,R=[],B=0;B<arguments.length;B++)R[B]=arguments[B];try{for(var z=g(R),F=z.next();!F.done;F=z.next()){var I=F.value;if(I==="")throw new w.SyntaxError("Cannot add an empty token.");if(C.codePoint.ASCIIWhiteSpace.test(I))throw new w.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(I)}}catch(L){P={error:L}}finally{try{F&&!F.done&&(E=z.return)&&E.call(z)}finally{if(P)throw P.error}}A.tokenList_updateSteps(this)},M.prototype.remove=function(){for(var P,E,R=[],B=0;B<arguments.length;B++)R[B]=arguments[B];try{for(var z=g(R),F=z.next();!F.done;F=z.next()){var I=F.value;if(I==="")throw new w.SyntaxError("Cannot remove an empty token.");if(C.codePoint.ASCIIWhiteSpace.test(I))throw new w.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(I)}}catch(L){P={error:L}}finally{try{F&&!F.done&&(E=z.return)&&E.call(z)}finally{if(P)throw P.error}}A.tokenList_updateSteps(this)},M.prototype.toggle=function(P,E){if(E===void 0&&(E=void 0),P==="")throw new w.SyntaxError("Cannot toggle an empty token.");if(C.codePoint.ASCIIWhiteSpace.test(P))throw new w.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(P)?E!==void 0&&E!==!1||(this._tokenSet.delete(P),A.tokenList_updateSteps(this),!1):(E===void 0||E===!0)&&(this._tokenSet.add(P),A.tokenList_updateSteps(this),!0)},M.prototype.replace=function(P,E){if(P===""||E==="")throw new w.SyntaxError("Cannot replace an empty token.");if(C.codePoint.ASCIIWhiteSpace.test(P)||C.codePoint.ASCIIWhiteSpace.test(E))throw new w.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(P)&&(C.set.replace(this._tokenSet,P,E),A.tokenList_updateSteps(this),!0)},M.prototype.supports=function(P){return A.tokenList_validationSteps(this,P)},Object.defineProperty(M.prototype,"value",{get:function(){return A.tokenList_serializeSteps(this)},set:function(P){A.element_setAnAttributeValue(this._element,this._attribute._localName,P)},enumerable:!0,configurable:!0}),M.prototype[Symbol.iterator]=function(){var P=this._tokenSet[Symbol.iterator]();return{next:function(){return P.next()}}},M._create=function(P,E){return new M(P,E)},M}();m.DOMTokenListImpl=_},function(d,m,f){var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(104),C=f(0),A=function(_){function M(P,E){var R=_.call(this,P,E)||this;return R._detail=null,R._detail=E&&E.detail||null,R}return x(M,_),Object.defineProperty(M.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),M.prototype.initCustomEvent=function(P,E,R,B){E===void 0&&(E=!1),R===void 0&&(R=!1),B===void 0&&(B=null),this._dispatchFlag||(C.event_initialize(this,P,E,R),this._detail=B)},M}(w.EventImpl);m.CustomEventImpl=A},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(6),x=f(1),w=f(105),C=f(17);m.nodeIterator_traverse=function(A,_){for(var M=A._reference,P=A._pointerBeforeReference;;){if(_)if(P)P=!1;else{var E=C.tree_getFollowingNode(A._root,M);if(!E)return null;M=E}else if(P){var R=C.tree_getPrecedingNode(A.root,M);if(!R)return null;M=R}else P=!0;if(w.traversal_filter(A,M)===x.FilterResult.Accept)break}return A._reference=M,A._pointerBeforeReference=P,M},m.nodeIterator_iteratorList=function(){return g.dom.window._iteratorList}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(9),x=f(7),w=f(174);function C(A){if(!w.xml_isName(A))throw new g.InvalidCharacterError("Invalid XML name: "+A);if(!w.xml_isQName(A))throw new g.InvalidCharacterError("Invalid XML qualified name: "+A+".")}m.namespace_validate=C,m.namespace_validateAndExtract=function(A,_){A||(A=null),C(_);var M=_.split(":"),P=M.length===2?M[0]:null,E=M.length===2?M[1]:_;if(P&&A===null)throw new g.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(P==="xml"&&A!==x.namespace.XML)throw new g.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(A!==x.namespace.XMLNS&&(P==="xmlns"||_==="xmlns"))throw new g.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(A===x.namespace.XMLNS&&P!=="xmlns"&&_!=="xmlns")throw new g.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[A,P,E]},m.namespace_extractQName=function(A){C(A);var _=A.split(":");return[_.length===2?_[0]:null,_.length===2?_[1]:A]}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.xml_isName=function(g){for(var x=0;x<g.length;x++){var w=g.charCodeAt(x);if(!(w>=97&&w<=122||w>=65&&w<=90||w===58||w===95||w>=192&&w<=214||w>=216&&w<=246||w>=248&&w<=767||w>=880&&w<=893||w>=895&&w<=8191||w>=8204&&w<=8205||w>=8304&&w<=8591||w>=11264&&w<=12271||w>=12289&&w<=55295||w>=63744&&w<=64975||w>=65008&&w<=65533)&&(x===0||!(w===45||w===46||w>=48&&w<=57||w===183||w>=768&&w<=879||w>=8255&&w<=8256))){if(w>=55296&&w<=56319&&x<g.length-1){var C=g.charCodeAt(x+1);if(C>=56320&&C<=57343&&(x++,(w=1024*(w-55296)+C-56320+65536)>=65536&&w<=983039))continue}return!1}}return!0},m.xml_isQName=function(g){for(var x=!1,w=0;w<g.length;w++){var C=g.charCodeAt(w);if(!(C>=97&&C<=122||C>=65&&C<=90||C===95||C>=192&&C<=214||C>=216&&C<=246||C>=248&&C<=767||C>=880&&C<=893||C>=895&&C<=8191||C>=8204&&C<=8205||C>=8304&&C<=8591||C>=11264&&C<=12271||C>=12289&&C<=55295||C>=63744&&C<=64975||C>=65008&&C<=65533)&&(w===0||!(C===45||C===46||C>=48&&C<=57||C===183||C>=768&&C<=879||C>=8255&&C<=8256))){if(w===0||C!==58){if(C>=55296&&C<=56319&&w<g.length-1){var A=g.charCodeAt(w+1);if(A>=56320&&A<=57343&&(w++,(C=1024*(C-55296)+A-56320+65536)>=65536&&C<=983039))continue}return!1}if(x||w===g.length-1)return!1;x=!0}}return!0},m.xml_isLegalChar=function(g){for(var x=0;x<g.length;x++){var w=g.charCodeAt(x);if(!(w===9||w===10||w===13||w>=32&&w<=55295||w>=57344&&w<=65533)){if(w>=55296&&w<=56319&&x<g.length-1){var C=g.charCodeAt(x+1);if(C>=56320&&C<=57343&&(x++,(w=1024*(w-55296)+C-56320+65536)>=65536&&w<=1114111))continue}return!1}}return!0},m.xml_isPubidChar=function(g){for(var x=0;x<g.length;x++){var w=g.charCodeAt(x);if(!(w>=97&&w<=122||w>=65&&w<=90||w>=39&&w<=59||w===32||w===13||w===10||w>=35&&w<=37||w===33||w===61||w===63||w===64||w===95))return!1}return!0}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=f(17);m.boundaryPoint_position=function w(C,A){var _=C[0],M=C[1],P=A[0],E=A[1];if(console.assert(x.tree_rootNode(_)===x.tree_rootNode(P),"Boundary points must share the same root node."),_===P)return M===E?g.BoundaryPosition.Equal:M<E?g.BoundaryPosition.Before:g.BoundaryPosition.After;if(x.tree_isFollowing(P,_)){var R=w([P,E],[_,M]);if(R===g.BoundaryPosition.Before)return g.BoundaryPosition.After;if(R===g.BoundaryPosition.After)return g.BoundaryPosition.Before}if(x.tree_isAncestorOf(P,_)){for(var B=P;!x.tree_isChildOf(_,B);)B._parent!==null&&(B=B._parent);if(x.tree_index(B)<M)return g.BoundaryPosition.After}return g.BoundaryPosition.Before}},function(d,m,f){var g=this&&this.__values||function(R){var B=typeof Symbol=="function"&&Symbol.iterator,z=B&&R[B],F=0;if(z)return z.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&F>=R.length&&(R=void 0),{value:R&&R[F++],done:!R}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(3),C=f(7),A=f(29),_=f(108),M=f(30),P=f(37),E=f(52);m.node_stringReplaceAll=function(R,B){var z=null;R!==""&&(z=A.create_text(B._nodeDocument,R)),P.mutation_replaceAll(z,B)},m.node_clone=function R(B,z,F){var I,L,W,G,q;if(z===void 0&&(z=null),F===void 0&&(F=!1),z===null&&(z=B._nodeDocument),w.Guard.isElementNode(B)){q=E.element_createAnElement(z,B._localName,B._namespace,B._namespacePrefix,B._is,!1);try{for(var K=g(B._attributeList),Z=K.next();!Z.done;Z=K.next()){var J=R(Z.value,z);E.element_append(J,q)}}catch(Ye){I={error:Ye}}finally{try{Z&&!Z.done&&(L=K.return)&&L.call(K)}finally{if(I)throw I.error}}}else if(w.Guard.isDocumentNode(B)){var te=A.create_document();te._encoding=B._encoding,te._contentType=B._contentType,te._URL=B._URL,te._origin=B._origin,te._type=B._type,te._mode=B._mode,q=te}else if(w.Guard.isDocumentTypeNode(B))q=A.create_documentType(z,B._name,B._publicId,B._systemId);else if(w.Guard.isAttrNode(B)){var Q=A.create_attr(z,B.localName);Q._namespace=B._namespace,Q._namespacePrefix=B._namespacePrefix,Q._value=B._value,q=Q}else q=w.Guard.isExclusiveTextNode(B)?A.create_text(z,B._data):w.Guard.isCDATASectionNode(B)?A.create_cdataSection(z,B._data):w.Guard.isCommentNode(B)?A.create_comment(z,B._data):w.Guard.isProcessingInstructionNode(B)?A.create_processingInstruction(z,B._target,B._data):w.Guard.isDocumentFragmentNode(B)?A.create_documentFragment(z):Object.create(B);if(w.Guard.isDocumentNode(q)?(q._nodeDocument=q,z=q):q._nodeDocument=z,x.dom.features.steps&&M.dom_runCloningSteps(q,B,z,F),F)try{for(var me=g(B._children),Xe=me.next();!Xe.done;Xe=me.next()){var Ve=R(Xe.value,z,!0);P.mutation_append(Ve,q)}}catch(Ye){W={error:Ye}}finally{try{Xe&&!Xe.done&&(G=me.return)&&G.call(me)}finally{if(W)throw W.error}}return q},m.node_equals=function R(B,z){var F,I,L,W;if(B._nodeType!==z._nodeType)return!1;if(w.Guard.isDocumentTypeNode(B)&&w.Guard.isDocumentTypeNode(z)){if(B._name!==z._name||B._publicId!==z._publicId||B._systemId!==z._systemId)return!1}else if(w.Guard.isElementNode(B)&&w.Guard.isElementNode(z)){if(B._namespace!==z._namespace||B._namespacePrefix!==z._namespacePrefix||B._localName!==z._localName||B._attributeList.length!==z._attributeList.length)return!1}else if(w.Guard.isAttrNode(B)&&w.Guard.isAttrNode(z)){if(B._namespace!==z._namespace||B._localName!==z._localName||B._value!==z._value)return!1}else if(w.Guard.isProcessingInstructionNode(B)&&w.Guard.isProcessingInstructionNode(z)){if(B._target!==z._target||B._data!==z._data)return!1}else if(w.Guard.isCharacterDataNode(B)&&w.Guard.isCharacterDataNode(z)&&B._data!==z._data)return!1;if(w.Guard.isElementNode(B)&&w.Guard.isElementNode(z)){var G={};try{for(var q=g(B._attributeList),K=q.next();!K.done;K=q.next())G[(te=K.value)._localName]=te}catch(qe){F={error:qe}}finally{try{K&&!K.done&&(I=q.return)&&I.call(q)}finally{if(F)throw F.error}}try{for(var Z=g(z._attributeList),J=Z.next();!J.done;J=Z.next()){var te,Q=J.value;if(!(te=G[Q._localName])||!R(te,Q))return!1}}catch(qe){L={error:qe}}finally{try{J&&!J.done&&(W=Z.return)&&W.call(Z)}finally{if(L)throw L.error}}}if(B._children.size!==z._children.size)return!1;for(var me=B._children[Symbol.iterator](),Xe=z._children[Symbol.iterator](),Ve=me.next(),Ye=Xe.next();!Ve.done&&!Ye.done;){if(!R(Ve.value,Ye.value))return!1;Ve=me.next(),Ye=Xe.next()}return!0},m.node_listOfElementsWithQualifiedName=function(R,B){return R==="*"?A.create_htmlCollection(B):B._nodeDocument._type==="html"?A.create_htmlCollection(B,function(z){return z._namespace===C.namespace.HTML&&z._qualifiedName===R.toLowerCase()||z._namespace!==C.namespace.HTML&&z._qualifiedName===R}):A.create_htmlCollection(B,function(z){return z._qualifiedName===R})},m.node_listOfElementsWithNamespace=function(R,B,z){return R===""&&(R=null),R==="*"&&B==="*"?A.create_htmlCollection(z):R==="*"?A.create_htmlCollection(z,function(F){return F._localName===B}):B==="*"?A.create_htmlCollection(z,function(F){return F._namespace===R}):A.create_htmlCollection(z,function(F){return F._localName===B&&F._namespace===R})},m.node_listOfElementsWithClassNames=function(R,B){var z=_.orderedSet_parse(R);if(z.size===0)return A.create_htmlCollection(B,function(){return!1});var F=B._nodeDocument._mode!=="quirks";return A.create_htmlCollection(B,function(I){var L=I.classList;return _.orderedSet_contains(L._tokenSet,z,F)})},m.node_locateANamespacePrefix=function R(B,z){if(B._namespace===z&&B._namespacePrefix!==null)return B._namespacePrefix;for(var F=0;F<B._attributeList.length;F++){var I=B._attributeList[F];if(I._namespacePrefix==="xmlns"&&I._value===z)return I._localName}return B._parent&&w.Guard.isElementNode(B._parent)?R(B._parent,z):null},m.node_locateANamespace=function R(B,z){if(w.Guard.isElementNode(B)){if(B._namespace!==null&&B._namespacePrefix===z)return B._namespace;for(var F=0;F<B._attributeList.length;F++){var I=B._attributeList[F];if(I._namespace===C.namespace.XMLNS&&I._namespacePrefix==="xmlns"&&I._localName===z||z===null&&I._namespace===C.namespace.XMLNS&&I._namespacePrefix===null&&I._localName==="xmlns")return I._value||null}return B.parentElement===null?null:R(B.parentElement,z)}return w.Guard.isDocumentNode(B)?B.documentElement===null?null:R(B.documentElement,z):w.Guard.isDocumentTypeNode(B)||w.Guard.isDocumentFragmentNode(B)?null:w.Guard.isAttrNode(B)?B._element===null?null:R(B._element,z):B._parent&&w.Guard.isElementNode(B._parent)?R(B._parent,z):null}},function(d,m,f){var g=this&&this.__values||function(E){var R=typeof Symbol=="function"&&Symbol.iterator,B=R&&E[R],z=0;if(B)return B.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&z>=E.length&&(E=void 0),{value:E&&E[z++],done:!E}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(3),C=f(9),A=f(29),_=f(17),M=f(107),P=f(37);m.text_contiguousTextNodes=function(E,R){var B;return R===void 0&&(R=!1),(B={})[Symbol.iterator]=function(){for(var z=E;z&&w.Guard.isTextNode(z._previousSibling);)z=z._previousSibling;return{next:function(){if(z&&!R&&z===E&&(z=w.Guard.isTextNode(z._nextSibling)?z._nextSibling:null),z===null)return{done:!0,value:null};var F={done:!1,value:z};return z=w.Guard.isTextNode(z._nextSibling)?z._nextSibling:null,F}}},B},m.text_contiguousExclusiveTextNodes=function(E,R){var B;return R===void 0&&(R=!1),(B={})[Symbol.iterator]=function(){for(var z=E;z&&w.Guard.isExclusiveTextNode(z._previousSibling);)z=z._previousSibling;return{next:function(){if(z&&!R&&z===E&&(z=w.Guard.isExclusiveTextNode(z._nextSibling)?z._nextSibling:null),z===null)return{done:!0,value:null};var F={done:!1,value:z};return z=w.Guard.isExclusiveTextNode(z._nextSibling)?z._nextSibling:null,F}}},B},m.text_descendantTextContent=function(E){for(var R="",B=_.tree_getFirstDescendantNode(E,!1,!1,function(z){return w.Guard.isTextNode(z)});B!==null;)R+=B._data,B=_.tree_getNextDescendantNode(E,B,!1,!1,function(z){return w.Guard.isTextNode(z)});return R},m.text_split=function(E,R){var B,z,F=E._data.length;if(R>F)throw new C.IndexSizeError;var I=F-R,L=M.characterData_substringData(E,R,I),W=A.create_text(E._nodeDocument,L),G=E._parent;if(G!==null){P.mutation_insert(W,G,E._nextSibling);try{for(var q=g(x.dom.rangeList),K=q.next();!K.done;K=q.next()){var Z=K.value;Z._start[0]===E&&Z._start[1]>R&&(Z._start[0]=W,Z._start[1]-=R),Z._end[0]===E&&Z._end[1]>R&&(Z._end[0]=W,Z._end[1]-=R);var J=_.tree_index(E);Z._start[0]===G&&Z._start[1]===J+1&&Z._start[1]++,Z._end[0]===G&&Z._end[1]===J+1&&Z._end[1]++}}catch(te){B={error:te}}finally{try{K&&!K.done&&(z=q.return)&&z.call(q)}finally{if(B)throw B.error}}}return M.characterData_replaceData(E,R,I,""),W}},function(d,m,f){var g=f(4),x=f(41),w=f(24),C=f(48),A=[].join,_=x!=Object,M=C("join",",");g({target:"Array",proto:!0,forced:_||!M},{join:function(P){return A.call(w(this),P===void 0?",":P)}})},function(d,m,f){var g=f(4),x=f(83),w=String.fromCharCode,C=String.fromCodePoint;g({target:"String",stat:!0,forced:!!C&&C.length!=1},{fromCodePoint:function(A){for(var _,M=[],P=arguments.length,E=0;P>E;){if(_=+arguments[E++],x(_,1114111)!==_)throw RangeError(_+" is not a valid code point");M.push(_<65536?w(_):w(55296+((_-=65536)>>10),_%1024+56320))}return M.join("")}})},function(d,m,f){var g=this&&this.__read||function(C,A){var _=typeof Symbol=="function"&&C[Symbol.iterator];if(!_)return C;var M,P,E=_.call(C),R=[];try{for(;(A===void 0||A-- >0)&&!(M=E.next()).done;)R.push(M.value)}catch(B){P={error:B}}finally{try{M&&!M.done&&(_=E.return)&&_.call(E)}finally{if(P)throw P.error}}return R};Object.defineProperty(m,"__esModule",{value:!0});var x=f(111),w=function(){function C(A,_){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=A,this._index=0,this._length=A.length,_&&(this._options.skipWhitespaceOnlyText=_.skipWhitespaceOnlyText||!1)}return C.prototype.nextToken=function(){if(this.eof())return{type:x.TokenType.EOF};var A=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&A.type===x.TokenType.Text&&C.isWhiteSpaceToken(A)&&(A=this.nextToken()),A},C.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?C.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},C.prototype.declaration=function(){for(var A="",_="",M="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:x.TokenType.Declaration,version:A,encoding:_,standalone:M};var P=g(this.attribute(),2),E=P[0],R=P[1];E==="version"?A=R:E==="encoding"?_=R:E==="standalone"?M=R:this.throwError("Invalid attribute name: "+E)}this.throwError("Missing declaration end symbol `?>`")},C.prototype.doctype=function(){var A="",_="";this.skipSpace();var M=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(A=this.quotedString(),_=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(_=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:x.TokenType.DocType,name:M,pubId:A,sysId:_}},C.prototype.pi=function(){var A=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:x.TokenType.PI,target:A,data:""};var _=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:x.TokenType.PI,target:A,data:_}},C.prototype.text=function(){var A=this.takeUntil("<");return{type:x.TokenType.Text,data:A}},C.prototype.comment=function(){var A=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:x.TokenType.Comment,data:A}},C.prototype.cdata=function(){var A=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:x.TokenType.CDATA,data:A}},C.prototype.openTag=function(){this.skipSpace();var A=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:x.TokenType.Element,name:A,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:x.TokenType.Element,name:A,attributes:[],selfClosing:!0};for(var _=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:x.TokenType.Element,name:A,attributes:_,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:x.TokenType.Element,name:A,attributes:_,selfClosing:!0};var M=this.attribute();_.push(M)}this.throwError("Missing opening element tag end symbol `>`")},C.prototype.closeTag=function(){this.skipSpace();var A=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:x.TokenType.ClosingTag,name:A}},C.prototype.attribute=function(){this.skipSpace();var A=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[A,this.quotedString()]},C.prototype.quotedString=function(){this.skipSpace();var A=this.take(1);C.isQuote(A)||this.throwError("Missing start quote character before quoted value");var _=this.takeUntil(A);return this.skipIfStartsWith(A)||this.throwError("Missing end quote character after quoted value"),_},C.prototype.eof=function(){return this._index>=this._length},C.prototype.skipIfStartsWith=function(A){var _=A.length;if(_===1)return this._str[this._index]===A&&(this._index++,!0);for(var M=0;M<_;M++)if(this._str[this._index+M]!==A[M])return!1;return this._index+=_,!0},C.prototype.seek=function(A){this._index+=A,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},C.prototype.skipSpace=function(){for(;!this.eof()&&C.isSpace(this._str[this._index]);)this._index++},C.prototype.take=function(A){if(A===1)return this._str[this._index++];var _=this._index;return this.seek(A),this._str.slice(_,this._index)},C.prototype.takeUntil=function(A,_){_===void 0&&(_=!1);for(var M=this._index;this._index<this._length;){var P=this._str[this._index];if(P===A||_&&C.isSpace(P))break;this._index++}return this._str.slice(M,this._index)},C.prototype.takeUntil2=function(A,_,M){M===void 0&&(M=!1);for(var P=this._index;this._index<this._length;){var E=this._str[this._index];if(E===A||E===_||M&&C.isSpace(E))break;this._index++}return this._str.slice(P,this._index)},C.prototype.takeUntilStartsWith=function(A,_){_===void 0&&(_=!1);for(var M=this._index,P=A.length;this._index<this._length;){for(var E=!0,R=0;R<P;R++){var B=this._str[this._index+R],z=A[R];if(_&&C.isSpace(B))return this._str.slice(M,this._index);if(B!==z){this._index++,E=!1;break}}if(E)return this._str.slice(M,this._index)}return this._index=this._length,this._str.slice(M)},C.prototype.skipUntil=function(A){for(;this._index<this._length&&this._str[this._index]!==A;)this._index++},C.isWhiteSpaceToken=function(A){for(var _=A.data,M=0;M<_.length;M++){var P=_[M];if(P!==" "&&P!==`
`&&P!=="\r"&&P!=="	"&&P!=="\f")return!1}return!0},C.isSpace=function(A){return A===" "||A===`
`||A==="\r"||A==="	"},C.isQuote=function(A){return A==='"'||A==="'"},C.prototype.throwError=function(A){for(var _=/\r\n|\r|\n/g,M=null,P=0,E=0,R=this._str.length;(M=_.exec(this._str))!==null&&M!==null;)if(P++,M.index<this._index&&(E=_.lastIndex),M.index>this._index){R=M.index;break}throw this.err={line:P,col:this._index-E,index:this._index,str:this._str.substring(E,R)},new Error(A+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},C.prototype[Symbol.iterator]=function(){return this._index=0,{next:(function(){var A=this.nextToken();return A.type===x.TokenType.EOF?{done:!0,value:null}:{done:!1,value:A}}).bind(this)}},C}();m.XMLStringLexer=w},function(d,m,f){var g=f(39);d.exports=new g({include:[f(182)]})},function(d,m,f){var g=f(39);d.exports=new g({include:[f(113)],implicit:[f(290),f(291),f(292),f(293)]})},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(91),x=f(2),w=f(3),C=f(77),A=f(109);function _(R,B){var z=P(R===void 0||M(R)?R:g.DefaultBuilderOptions),F=M(R)?B:R,I=A.createDocument();E(I,z);var L=new C.XMLBuilderImpl(I);return F!==void 0&&L.ele(F),L}function M(R){if(!x.isPlainObject(R))return!1;for(var B in R)if(R.hasOwnProperty(B)&&!g.XMLBuilderOptionKeys.has(B))return!1;return!0}function P(R){R===void 0&&(R={});var B=x.applyDefaults(R,g.DefaultBuilderOptions);if(B.convert.att.length===0||B.convert.ins.length===0||B.convert.text.length===0||B.convert.cdata.length===0||B.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return B}function E(R,B,z){var F=R;F._xmlBuilderOptions=B,F._isFragment=z}m.builder=function(R,B){var z=P(M(R)?R:g.DefaultBuilderOptions),F=w.Guard.isNode(R)||x.isArray(R)?R:B;if(F===void 0)throw new Error("Invalid arguments.");if(x.isArray(F)){for(var I=[],L=0;L<F.length;L++){var W=new C.XMLBuilderImpl(F[L]);W.set(z),I.push(W)}return I}var G=new C.XMLBuilderImpl(F);return G.set(z),G},m.create=_,m.fragment=function(R,B){var z=P(R===void 0||M(R)?R:g.DefaultBuilderOptions),F=M(R)?B:R,I=A.createDocument();E(I,z,!0);var L=new C.XMLBuilderImpl(I.createDocumentFragment());return F!==void 0&&L.ele(F),L},m.convert=function(R,B,z){var F,I,L;return M(R)&&B!==void 0?(F=R,I=B,L=z):(F=g.DefaultBuilderOptions,I=R,L=B||void 0),_(F,I).end(L)}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(77);m.builder=g.builder,m.create=g.create,m.fragment=g.fragment,m.convert=g.convert,m.createCB=g.createCB,m.fragmentCB=g.fragmentCB},function(d,m,f){f(31),f(32),f(33),f(191),f(192),f(194),f(64),f(19),f(198),f(199),f(89),f(201),f(65),f(20),f(66),f(22),f(23);var g=this&&this.__read||function(F,I){var L=typeof Symbol=="function"&&F[Symbol.iterator];if(!L)return F;var W,G,q=L.call(F),K=[];try{for(;(I===void 0||I-- >0)&&!(W=q.next()).done;)K.push(W.value)}catch(Z){G={error:Z}}finally{try{W&&!W.done&&(L=q.return)&&L.call(q)}finally{if(G)throw G.error}}return K},x=this&&this.__values||function(F){var I=typeof Symbol=="function"&&Symbol.iterator,L=I&&F[I],W=0;if(L)return L.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var w=f(91),C=f(2),A=f(217),_=f(1),M=f(3),P=f(0),E=f(109),R=f(7),B=f(277),z=function(){function F(I){this._domNode=I}return Object.defineProperty(F.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),F.prototype.set=function(I){return this._options=C.applyDefaults(C.applyDefaults(this._options,I,!0),w.DefaultBuilderOptions),this},F.prototype.ele=function(I,L,W){var G,q,K,Z,J,te;if(C.isObject(I))return new B.ObjectReader(this._options).parse(this,I);if(I!==null&&/^\s*</.test(I))return new B.XMLReader(this._options).parse(this,I);if(I!==null&&/^\s*[\{\[]/.test(I))return new B.JSONReader(this._options).parse(this,I);if(I!==null&&/^(\s*|(#.*)|(%.*))*---/.test(I))return new B.YAMLReader(this._options).parse(this,I);if((I===null||C.isString(I))&&C.isString(L))Z=(G=g([I,L,W],3))[0],J=G[1],te=G[2];else{if(I===null)throw new Error("Element name cannot be null. "+this._debugInfo());Z=(q=g([void 0,I,C.isObject(L)?L:void 0],3))[0],J=q[1],te=q[2]}if(te&&(te=C.getValue(te)),Z=(K=g(this._extractNamespace(E.sanitizeInput(Z,this._options.invalidCharReplacement),E.sanitizeInput(J,this._options.invalidCharReplacement),!0),2))[0],J=K[1],Z===void 0){var Q=g(P.namespace_extractQName(J),1)[0];Z=this.node.lookupNamespaceURI(Q)}var me=Z!=null?this._doc.createElementNS(Z,J):this._doc.createElement(J);this.node.appendChild(me);var Xe=new F(me),Ve=this._doc.doctype;if(me===this._doc.documentElement&&Ve!==null){var Ye=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,Ve.publicId,Ve.systemId);this._doc.replaceChild(Ye,Ve)}return te&&!C.isEmpty(te)&&Xe.att(te),Xe},F.prototype.remove=function(){var I=this.up();return I.node.removeChild(this.node),I},F.prototype.att=function(I,L,W){var G,q,K,Z,J,te,Q=this;if(C.isMap(I)||C.isObject(I))return C.forEachObject(I,function(je,Ke){return Q.att(je,Ke)},this),this;if(I!=null&&(I=C.getValue(I+"")),L!=null&&(L=C.getValue(L+"")),W!=null&&(W=C.getValue(W+"")),I!==null&&!C.isString(I)||!C.isString(L)||W!==null&&!C.isString(W)){if(!C.isString(I)||L!=null&&!C.isString(L))throw new Error("Attribute name and value not specified. "+this._debugInfo());Z=(q=g([void 0,I,L],3))[0],J=q[1],te=q[2]}else Z=(G=g([I,L,W],3))[0],J=G[1],te=G[2];if(this._options.keepNullAttributes&&te==null)te="";else if(te==null)return this;if(!M.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var me=this.node;Z=(K=g(this._extractNamespace(Z,J,!1),2))[0],J=K[1],J=E.sanitizeInput(J,this._options.invalidCharReplacement),Z=E.sanitizeInput(Z,this._options.invalidCharReplacement),te=E.sanitizeInput(te,this._options.invalidCharReplacement);var Xe=g(P.namespace_extractQName(J),2),Ve=Xe[0],Ye=Xe[1],qe=g(P.namespace_extractQName(me.prefix?me.prefix+":"+me.localName:me.localName),1)[0],et=null;return Ve==="xmlns"?(Z=R.namespace.XMLNS,me.namespaceURI===null&&qe===Ye&&(et=te)):Ve===null&&Ye==="xmlns"&&qe===null&&(Z=R.namespace.XMLNS,et=te),et!==null&&(this._updateNamespace(et),me=this.node),Z!==void 0?me.setAttributeNS(Z,J,te):me.setAttribute(J,te),this},F.prototype.removeAtt=function(I,L){var W,G,q=this;if(!M.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(I=C.getValue(I),L!==void 0&&(L=C.getValue(L)),I!==null&&L===void 0)G=I;else{if(I!==null&&!C.isString(I)||L===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());W=I,G=L}return C.isArray(G)||C.isSet(G)?C.forEachArray(G,function(K){return W===void 0?q.removeAtt(K):q.removeAtt(W,K)},this):W!==void 0?(G=E.sanitizeInput(G,this._options.invalidCharReplacement),W=E.sanitizeInput(W,this._options.invalidCharReplacement),this.node.removeAttributeNS(W,G)):(G=E.sanitizeInput(G,this._options.invalidCharReplacement),this.node.removeAttribute(G)),this},F.prototype.txt=function(I){if(I==null){if(!this._options.keepNullNodes)return this;I=""}var L=this._doc.createTextNode(E.sanitizeInput(I,this._options.invalidCharReplacement));return this.node.appendChild(L),this},F.prototype.com=function(I){if(I==null){if(!this._options.keepNullNodes)return this;I=""}var L=this._doc.createComment(E.sanitizeInput(I,this._options.invalidCharReplacement));return this.node.appendChild(L),this},F.prototype.dat=function(I){if(I==null){if(!this._options.keepNullNodes)return this;I=""}var L=this._doc.createCDATASection(E.sanitizeInput(I,this._options.invalidCharReplacement));return this.node.appendChild(L),this},F.prototype.ins=function(I,L){var W=this;if(L===void 0&&(L=""),L==null){if(!this._options.keepNullNodes)return this;L=""}if(C.isArray(I)||C.isSet(I))C.forEachArray(I,function(q){var K=(q+="").indexOf(" "),Z=K===-1?q:q.substr(0,K),J=K===-1?"":q.substr(K+1);W.ins(Z,J)},this);else if(C.isMap(I)||C.isObject(I))C.forEachObject(I,function(q,K){return W.ins(q,K)},this);else{var G=this._doc.createProcessingInstruction(E.sanitizeInput(I,this._options.invalidCharReplacement),E.sanitizeInput(L,this._options.invalidCharReplacement));this.node.appendChild(G)}return this},F.prototype.dec=function(I){return this._options.version=I.version||"1.0",this._options.encoding=I.encoding,this._options.standalone=I.standalone,this},F.prototype.dtd=function(I){var L=E.sanitizeInput(I&&I.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),W=E.sanitizeInput(I&&I.pubID||"",this._options.invalidCharReplacement),G=E.sanitizeInput(I&&I.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&L!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var q=this._doc.implementation.createDocumentType(L,W,G);return this._doc.doctype!==null?this._doc.replaceChild(q,this._doc.doctype):this._doc.insertBefore(q,this._doc.documentElement),this},F.prototype.import=function(I){var L,W,G=this._domNode,q=this._doc,K=I.node;if(M.Guard.isDocumentNode(K)){var Z=K.documentElement;if(Z===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var J=q.importNode(Z,!0);G.appendChild(J);var te=g(P.namespace_extractQName(J.prefix?J.prefix+":"+J.localName:J.localName),1)[0],Q=G.lookupNamespaceURI(te);new F(J)._updateNamespace(Q)}else if(M.Guard.isDocumentFragmentNode(K))try{for(var me=x(K.childNodes),Xe=me.next();!Xe.done;Xe=me.next()){var Ve=Xe.value;J=q.importNode(Ve,!0),G.appendChild(J),M.Guard.isElementNode(J)&&(te=g(P.namespace_extractQName(J.prefix?J.prefix+":"+J.localName:J.localName),1)[0],Q=G.lookupNamespaceURI(te),new F(J)._updateNamespace(Q))}}catch(Ye){L={error:Ye}}finally{try{Xe&&!Xe.done&&(W=me.return)&&W.call(me)}finally{if(L)throw L.error}}else J=q.importNode(K,!0),G.appendChild(J),M.Guard.isElementNode(J)&&(te=g(P.namespace_extractQName(J.prefix?J.prefix+":"+J.localName:J.localName),1)[0],Q=G.lookupNamespaceURI(te),new F(J)._updateNamespace(Q));return this},F.prototype.doc=function(){if(this._doc._isFragment){for(var I=this.node;I&&I.nodeType!==_.NodeType.DocumentFragment;)I=I.parentNode;if(I===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new F(I)}return new F(this._doc)},F.prototype.root=function(){var I=this._doc.documentElement;if(!I)throw new Error("Document root element is null. "+this._debugInfo());return new F(I)},F.prototype.up=function(){var I=this._domNode.parentNode;if(!I)throw new Error("Parent node is null. "+this._debugInfo());return new F(I)},F.prototype.prev=function(){var I=this._domNode.previousSibling;if(!I)throw new Error("Previous sibling node is null. "+this._debugInfo());return new F(I)},F.prototype.next=function(){var I=this._domNode.nextSibling;if(!I)throw new Error("Next sibling node is null. "+this._debugInfo());return new F(I)},F.prototype.first=function(){var I=this._domNode.firstChild;if(!I)throw new Error("First child node is null. "+this._debugInfo());return new F(I)},F.prototype.last=function(){var I=this._domNode.lastChild;if(!I)throw new Error("Last child node is null. "+this._debugInfo());return new F(I)},F.prototype.each=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);for(var q=this._getFirstDescendantNode(this._domNode,L,W);q[0];){var K=this._getNextDescendantNode(this._domNode,q[0],W,q[1],q[2]);I.call(G,new F(q[0]),q[1],q[2]),q=K}return this},F.prototype.map=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);var q=[];return this.each(function(K,Z,J){return q.push(I.call(G,K,Z,J))},L,W),q},F.prototype.reduce=function(I,L,W,G,q){W===void 0&&(W=!1),G===void 0&&(G=!1);var K=L;return this.each(function(Z,J,te){return K=I.call(q,K,Z,J,te)},W,G),K},F.prototype.find=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);for(var q=this._getFirstDescendantNode(this._domNode,L,W);q[0];){var K=new F(q[0]);if(I.call(G,K,q[1],q[2]))return K;q=this._getNextDescendantNode(this._domNode,q[0],W,q[1],q[2])}},F.prototype.filter=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);var q=[];return this.each(function(K,Z,J){I.call(G,K,Z,J)&&q.push(K)},L,W),q},F.prototype.every=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);for(var q=this._getFirstDescendantNode(this._domNode,L,W);q[0];){var K=new F(q[0]);if(!I.call(G,K,q[1],q[2]))return!1;q=this._getNextDescendantNode(this._domNode,q[0],W,q[1],q[2])}return!0},F.prototype.some=function(I,L,W,G){L===void 0&&(L=!1),W===void 0&&(W=!1);for(var q=this._getFirstDescendantNode(this._domNode,L,W);q[0];){var K=new F(q[0]);if(I.call(G,K,q[1],q[2]))return!0;q=this._getNextDescendantNode(this._domNode,q[0],W,q[1],q[2])}return!1},F.prototype.toArray=function(I,L){I===void 0&&(I=!1),L===void 0&&(L=!1);var W=[];return this.each(function(G){return W.push(G)},I,L),W},F.prototype.toString=function(I){return(I=I||{}).format===void 0&&(I.format="xml"),this._serialize(I)},F.prototype.toObject=function(I){return(I=I||{}).format===void 0&&(I.format="object"),this._serialize(I)},F.prototype.end=function(I){return(I=I||{}).format===void 0&&(I.format="xml"),this.doc()._serialize(I)},F.prototype._getFirstDescendantNode=function(I,L,W){return L?[this._domNode,0,0]:W?this._getNextDescendantNode(I,I,W,0,0):[this._domNode.firstChild,0,1]},F.prototype._getNextDescendantNode=function(I,L,W,G,q){if(!W)return I===L?[L.firstChild,0,q+1]:[L.nextSibling,G+1,q];if(L.firstChild)return[L.firstChild,0,q+1];if(L===I)return[null,-1,-1];if(L.nextSibling)return[L.nextSibling,G+1,q];for(var K=L.parentNode;K&&K!==I;){if(K.nextSibling)return[K.nextSibling,P.tree_index(K.nextSibling),q-1];K=K.parentNode,q--}return[null,-1,-1]},F.prototype._serialize=function(I){if(I.format==="xml")return new A.XMLWriter(this._options,I).serialize(this.node);if(I.format==="map")return new A.MapWriter(this._options,I).serialize(this.node);if(I.format==="object")return new A.ObjectWriter(this._options,I).serialize(this.node);if(I.format==="json")return new A.JSONWriter(this._options,I).serialize(this.node);if(I.format==="yaml")return new A.YAMLWriter(this._options,I).serialize(this.node);throw new Error("Invalid writer format: "+I.format+". "+this._debugInfo())},F.prototype._extractNamespace=function(I,L,W){var G=L.indexOf("@");if(G>0&&(I===void 0&&(I=L.slice(G+1)),L=L.slice(0,G)),I===void 0)I=W?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(I!==null&&I[0]==="@"){var q=I.slice(1);if((I=this._options.namespaceAlias[q])===void 0)throw new Error("Namespace alias `"+q+"` is not defined. "+this._debugInfo())}return[I,L]},F.prototype._updateNamespace=function(I){var L,W,G,q,K=this._domNode;if(M.Guard.isElementNode(K)&&I!==null&&K.namespaceURI!==I){var Z=g(P.namespace_extractQName(K.prefix?K.prefix+":"+K.localName:K.localName),2),J=Z[0],te=Z[1],Q=P.create_element(this._doc,te,I,J);try{for(var me=x(K.attributes),Xe=me.next();!Xe.done;Xe=me.next()){var Ve=Xe.value,Ye=Ve.prefix?Ve.prefix+":"+Ve.localName:Ve.localName,qe=g(P.namespace_extractQName(Ye),1)[0],et=Ve.namespaceURI;et===null&&qe!==null&&(et=K.lookupNamespaceURI(qe)),et===null?Q.setAttribute(Ye,Ve.value):Q.setAttributeNS(et,Ye,Ve.value)}}catch(pt){L={error:pt}}finally{try{Xe&&!Xe.done&&(W=me.return)&&W.call(me)}finally{if(L)throw L.error}}var je=K.parentNode;if(je===null)throw new Error("Parent node is null."+this._debugInfo());je.replaceChild(Q,K),this._domNode=Q;try{for(var Ke=x(K.childNodes),Je=Ke.next();!Je.done;Je=Ke.next()){var at=Je.value.cloneNode(!0);if(Q.appendChild(at),M.Guard.isElementNode(at)){var nt=g(P.namespace_extractQName(at.prefix?at.prefix+":"+at.localName:at.localName),1)[0],ct=Q.lookupNamespaceURI(nt);new F(at)._updateNamespace(ct)}}}catch(pt){G={error:pt}}finally{try{Je&&!Je.done&&(q=Ke.return)&&q.call(Ke)}finally{if(G)throw G.error}}}},Object.defineProperty(F.prototype,"_doc",{get:function(){var I=this.node;if(M.Guard.isDocumentNode(I))return I;var L=I.ownerDocument;if(!L)throw new Error("Owner document is null. "+this._debugInfo());return L},enumerable:!0,configurable:!0}),F.prototype._debugInfo=function(I){var L=this.node,W=L.parentNode;I=I||L.nodeName;var G=W?W.nodeName:"";return G?"node: <"+I+">, parent: <"+G+">":"node: <"+I+">"},Object.defineProperty(F.prototype,"_options",{get:function(){var I=this._doc;if(I._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return I._xmlBuilderOptions},set:function(I){this._doc._xmlBuilderOptions=I},enumerable:!0,configurable:!0}),F}();m.XMLBuilderImpl=z},function(d,m,f){var g=f(11),x=f(117),w=g.WeakMap;d.exports=typeof w=="function"&&/native code/.test(x(w))},function(d,m,f){var g=f(46),x=f(82),w=f(85),C=f(18);d.exports=g("Reflect","ownKeys")||function(A){var _=x.f(C(A)),M=w.f;return M?_.concat(M(A)):_}},function(d,m,f){var g=f(16),x=f(15),w=f(18),C=f(61);d.exports=g?Object.defineProperties:function(A,_){w(A);for(var M,P=C(_),E=P.length,R=0;E>R;)x.f(A,M=P[R++],_[M]);return A}},function(d,m,f){var g=f(46);d.exports=g("document","documentElement")},function(d,m,f){var g=f(24),x=f(82).f,w={}.toString,C=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];d.exports.f=function(A){return C&&w.call(A)=="[object Window]"?function(_){try{return x(_)}catch{return C.slice()}}(A):x(g(A))}},function(d,m,f){var g=f(4),x=f(36).every,w=f(48),C=f(28),A=w("every"),_=C("every");g({target:"Array",proto:!0,forced:!A||!_},{every:function(M){return x(this,M,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(4),x=f(36).filter,w=f(63),C=f(28),A=w("filter"),_=C("filter");g({target:"Array",proto:!0,forced:!A||!_},{filter:function(M){return x(this,M,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(46);d.exports=g("navigator","userAgent")||""},function(d,m,f){var g=f(4),x=f(36).find,w=f(130),C=f(28),A=!0,_=C("find");"find"in[]&&Array(1).find(function(){A=!1}),g({target:"Array",proto:!0,forced:A||!_},{find:function(M){return x(this,M,arguments.length>1?arguments[1]:void 0)}}),w("find")},function(d,m,f){var g=f(131).IteratorPrototype,x=f(60),w=f(40),C=f(62),A=f(49),_=function(){return this};d.exports=function(M,P,E){var R=P+" Iterator";return M.prototype=x(g,{next:w(1,E)}),C(M,R,!1,!0),A[R]=_,M}},function(d,m,f){var g=f(8);d.exports=!g(function(){function x(){}return x.prototype.constructor=null,Object.getPrototypeOf(new x)!==x.prototype})},function(d,m,f){var g=f(13);d.exports=function(x){if(!g(x)&&x!==null)throw TypeError("Can't set "+String(x)+" as a prototype");return x}},function(d,m,f){var g=f(4),x=f(36).map,w=f(63),C=f(28),A=w("map"),_=C("map");g({target:"Array",proto:!0,forced:!A||!_},{map:function(M){return x(this,M,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(4),x=f(200).left,w=f(48),C=f(28),A=w("reduce"),_=C("reduce",{1:0});g({target:"Array",proto:!0,forced:!A||!_},{reduce:function(M){return x(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(127),x=f(27),w=f(41),C=f(26),A=function(_){return function(M,P,E,R){g(P);var B=x(M),z=w(B),F=C(B.length),I=_?F-1:0,L=_?-1:1;if(E<2)for(;;){if(I in z){R=z[I],I+=L;break}if(I+=L,_?I<0:F<=I)throw TypeError("Reduce of empty array with no initial value")}for(;_?I>=0:F>I;I+=L)I in z&&(R=P(R,z[I],I,B));return R}};d.exports={left:A(!1),right:A(!0)}},function(d,m,f){var g=f(4),x=f(36).some,w=f(48),C=f(28),A=w("some"),_=C("some");g({target:"Array",proto:!0,forced:!A||!_},{some:function(M){return x(this,M,arguments.length>1?arguments[1]:void 0)}})},function(d,m,f){var g=f(90),x=f(135);d.exports=g?{}.toString:function(){return"[object "+x(this)+"]"}},function(d,m){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(d,m,f){var g=f(8);d.exports=!g(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(d,m,f){var g=f(5),x=f(49),w=g("iterator"),C=Array.prototype;d.exports=function(A){return A!==void 0&&(x.Array===A||C[w]===A)}},function(d,m,f){var g=f(135),x=f(49),w=f(5)("iterator");d.exports=function(C){if(C!=null)return C[w]||C["@@iterator"]||x[g(C)]}},function(d,m,f){var g=f(18);d.exports=function(x,w,C,A){try{return A?w(g(C)[0],C[1]):w(C)}catch(M){var _=x.return;throw _!==void 0&&g(_.call(x)),M}}},function(d,m,f){var g=f(5)("iterator"),x=!1;try{var w=0,C={next:function(){return{done:!!w++}},return:function(){x=!0}};C[g]=function(){return this},Array.from(C,function(){throw 2})}catch{}d.exports=function(A,_){if(!_&&!x)return!1;var M=!1;try{var P={};P[g]=function(){return{next:function(){return{done:M=!0}}}},A(P)}catch{}return M}},function(d,m,f){var g=f(13),x=f(133);d.exports=function(w,C,A){var _,M;return x&&typeof(_=C.constructor)=="function"&&_!==A&&g(M=_.prototype)&&M!==A.prototype&&x(w,M),w}},function(d,m,f){var g=f(25);d.exports=function(x,w,C){for(var A in w)g(x,A,w[A],C);return x}},function(d,m,f){var g=f(46),x=f(15),w=f(5),C=f(16),A=w("species");d.exports=function(_){var M=g(_),P=x.f;C&&M&&!M[A]&&P(M,A,{configurable:!0,get:function(){return this}})}},function(d,m,f){var g=this&&this.__generator||function(C,A){var _,M,P,E,R={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return E={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function B(z){return function(F){return function(I){if(_)throw new TypeError("Generator is already executing.");for(;R;)try{if(_=1,M&&(P=2&I[0]?M.return:I[0]?M.throw||((P=M.return)&&P.call(M),0):M.next)&&!(P=P.call(M,I[1])).done)return P;switch(M=0,P&&(I=[2&I[0],P.value]),I[0]){case 0:case 1:P=I;break;case 4:return R.label++,{value:I[1],done:!1};case 5:R.label++,M=I[1],I=[0];continue;case 7:I=R.ops.pop(),R.trys.pop();continue;default:if(P=R.trys,!((P=P.length>0&&P[P.length-1])||I[0]!==6&&I[0]!==2)){R=0;continue}if(I[0]===3&&(!P||I[1]>P[0]&&I[1]<P[3])){R.label=I[1];break}if(I[0]===6&&R.label<P[1]){R.label=P[1],P=I;break}if(P&&R.label<P[2]){R.label=P[2],R.ops.push(I);break}P[2]&&R.ops.pop(),R.trys.pop();continue}I=A.call(C,R)}catch(L){I=[6,L],M=0}finally{_=P=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([z,F])}}},x=this&&this.__values||function(C){var A=typeof Symbol=="function"&&Symbol.iterator,_=A&&C[A],M=0;if(_)return _.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var w=function(){function C(A){A===void 0&&(A=1e3),this._items=new Set,this._limit=A}return C.prototype.add=function(A){if(this._items.add(A),this._items.size>this._limit){var _=this._items.values().next();_.done||this._items.delete(_.value)}return this},C.prototype.delete=function(A){return this._items.delete(A)},C.prototype.has=function(A){return this._items.has(A)},C.prototype.clear=function(){this._items.clear()},Object.defineProperty(C.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),C.prototype.forEach=function(A,_){var M=this;this._items.forEach(function(P){return A.call(_,P,P,M)})},C.prototype.keys=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.keys())];case 1:return A.sent(),[2]}})},C.prototype.values=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.values())];case 1:return A.sent(),[2]}})},C.prototype.entries=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.entries())];case 1:return A.sent(),[2]}})},C.prototype[Symbol.iterator]=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items)];case 1:return A.sent(),[2]}})},Object.defineProperty(C.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),C}();m.FixedSizeSet=w},function(d,m,f){var g=this&&this.__generator||function(C,A){var _,M,P,E,R={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return E={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function B(z){return function(F){return function(I){if(_)throw new TypeError("Generator is already executing.");for(;R;)try{if(_=1,M&&(P=2&I[0]?M.return:I[0]?M.throw||((P=M.return)&&P.call(M),0):M.next)&&!(P=P.call(M,I[1])).done)return P;switch(M=0,P&&(I=[2&I[0],P.value]),I[0]){case 0:case 1:P=I;break;case 4:return R.label++,{value:I[1],done:!1};case 5:R.label++,M=I[1],I=[0];continue;case 7:I=R.ops.pop(),R.trys.pop();continue;default:if(P=R.trys,!((P=P.length>0&&P[P.length-1])||I[0]!==6&&I[0]!==2)){R=0;continue}if(I[0]===3&&(!P||I[1]>P[0]&&I[1]<P[3])){R.label=I[1];break}if(I[0]===6&&R.label<P[1]){R.label=P[1],P=I;break}if(P&&R.label<P[2]){R.label=P[2],R.ops.push(I);break}P[2]&&R.ops.pop(),R.trys.pop();continue}I=A.call(C,R)}catch(L){I=[6,L],M=0}finally{_=P=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([z,F])}}},x=this&&this.__values||function(C){var A=typeof Symbol=="function"&&Symbol.iterator,_=A&&C[A],M=0;if(_)return _.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var w=function(){function C(A){A===void 0&&(A=1e3),this._items=new Map,this._limit=A}return C.prototype.get=function(A){return this._items.get(A)},C.prototype.set=function(A,_){if(this._items.set(A,_),this._items.size>this._limit){var M=this._items.keys().next();M.done||this._items.delete(M.value)}},C.prototype.delete=function(A){return this._items.delete(A)},C.prototype.has=function(A){return this._items.has(A)},C.prototype.clear=function(){this._items.clear()},Object.defineProperty(C.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),C.prototype.forEach=function(A,_){this._items.forEach(function(M,P){return A.call(_,P,M)})},C.prototype.keys=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.keys())];case 1:return A.sent(),[2]}})},C.prototype.values=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.values())];case 1:return A.sent(),[2]}})},C.prototype.entries=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items.entries())];case 1:return A.sent(),[2]}})},C.prototype[Symbol.iterator]=function(){return g(this,function(A){switch(A.label){case 0:return[5,x(this._items)];case 1:return A.sent(),[2]}})},Object.defineProperty(C.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),C}();m.ObjectCache=w},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(w){w===void 0&&(w=1e3),this._items=new Map,this._limit=w}return x.prototype.check=function(w,C){if(this._items.get(w)===C)return!0;if(this._items.get(C)===w)return!1;var A=Math.random()<.5;if(A?this._items.set(w,C):this._items.set(C,w),this._items.size>this._limit){var _=this._items.keys().next();_.done||this._items.delete(_.value)}return A},x}();m.CompareCache=g},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(w){this._initialized=!1,this._value=void 0,this._initFunc=w}return Object.defineProperty(x.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),x}();m.Lazy=g},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function x(w){this._pointer=0,this._chars=Array.from(w),this._length=this._chars.length}return Object.defineProperty(x.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),x.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var w=this._chars[this._pointer].codePointAt(0);this._codePoint=w!==void 0?w:-1}return this._codePoint},x.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},x.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},x.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(x.prototype,"pointer",{get:function(){return this._pointer},set:function(w){w!==this._pointer&&(this._pointer=w,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),x}();m.StringWalker=g},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(218);m.MapWriter=g.MapWriter;var x=f(259);m.XMLWriter=x.XMLWriter;var w=f(67);m.ObjectWriter=w.ObjectWriter;var C=f(261);m.JSONWriter=C.JSONWriter;var A=f(262);m.YAMLWriter=A.YAMLWriter},function(d,m,f){f(19),f(219),f(20),f(22),f(23);var g,x=this&&this.__extends||(g=function(_,M){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,E){P.__proto__=E}||function(P,E){for(var R in E)E.hasOwnProperty(R)&&(P[R]=E[R])})(_,M)},function(_,M){function P(){this.constructor=_}g(_,M),_.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(2),C=f(67),A=function(_){function M(P,E){var R=_.call(this,P)||this;return R._writerOptions=w.applyDefaults(E,{format:"map",wellFormed:!1,group:!1,verbose:!1}),R}return x(M,_),M.prototype.serialize=function(P){var E=w.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),R=new C.ObjectWriter(this._builderOptions,E).serialize(P);return this._convertObject(R)},M.prototype._convertObject=function(P){if(w.isArray(P)){for(var E=0;E<P.length;E++)P[E]=this._convertObject(P[E]);return P}if(w.isObject(P)){var R=new Map;for(var B in P)R.set(B,this._convertObject(P[B]));return R}return P},M}(f(50).BaseWriter);m.MapWriter=A},function(d,m,f){var g=f(139),x=f(143);d.exports=g("Map",function(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}},x)},function(d,m,f){var g=f(4),x=f(8),w=f(59),C=f(13),A=f(27),_=f(26),M=f(134),P=f(128),E=f(63),R=f(5),B=f(129),z=R("isConcatSpreadable"),F=B>=51||!x(function(){var W=[];return W[z]=!1,W.concat()[0]!==W}),I=E("concat"),L=function(W){if(!C(W))return!1;var G=W[z];return G!==void 0?!!G:w(W)};g({target:"Array",proto:!0,forced:!F||!I},{concat:function(W){var G,q,K,Z,J,te=A(this),Q=P(te,0),me=0;for(G=-1,K=arguments.length;G<K;G++)if(L(J=G===-1?te:arguments[G])){if(me+(Z=_(J.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(q=0;q<Z;q++,me++)q in J&&M(Q,me,J[q])}else{if(me>=9007199254740991)throw TypeError("Maximum allowed index exceeded");M(Q,me++,J)}return Q.length=me,Q}})},function(d,m,f){var g=f(8);function x(w,C){return RegExp(w,C)}m.UNSUPPORTED_Y=g(function(){var w=x("a","y");return w.lastIndex=2,w.exec("abcd")!=null}),m.BROKEN_CARET=g(function(){var w=x("^r","gy");return w.lastIndex=2,w.exec("str")!=null})},function(d,m,f){var g=f(223);d.exports=function(x){if(g(x))throw TypeError("The method doesn't accept regular expressions");return x}},function(d,m,f){var g=f(13),x=f(42),w=f(5)("match");d.exports=function(C){var A;return g(C)&&((A=C[w])!==void 0?!!A:x(C)=="RegExp")}},function(d,m,f){var g=f(5)("match");d.exports=function(x){var w=/./;try{"/./"[x](w)}catch{try{return w[g]=!1,"/./"[x](w)}catch{}}return!1}},function(d,m,f){f(68);var g=f(25),x=f(8),w=f(5),C=f(93),A=f(21),_=w("species"),M=!x(function(){var z=/./;return z.exec=function(){var F=[];return F.groups={a:"7"},F},"".replace(z,"$<a>")!=="7"}),P="a".replace(/./,"$0")==="$0",E=w("replace"),R=!!/./[E]&&/./[E]("a","$0")==="",B=!x(function(){var z=/(?:)/,F=z.exec;z.exec=function(){return F.apply(this,arguments)};var I="ab".split(z);return I.length!==2||I[0]!=="a"||I[1]!=="b"});d.exports=function(z,F,I,L){var W=w(z),G=!x(function(){var Q={};return Q[W]=function(){return 7},""[z](Q)!=7}),q=G&&!x(function(){var Q=!1,me=/a/;return z==="split"&&((me={}).constructor={},me.constructor[_]=function(){return me},me.flags="",me[W]=/./[W]),me.exec=function(){return Q=!0,null},me[W](""),!Q});if(!G||!q||z==="replace"&&(!M||!P||R)||z==="split"&&!B){var K=/./[W],Z=I(W,""[z],function(Q,me,Xe,Ve,Ye){return me.exec===C?G&&!Ye?{done:!0,value:K.call(me,Xe,Ve)}:{done:!0,value:Q.call(Xe,me,Ve)}:{done:!1}},{REPLACE_KEEPS_$0:P,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:R}),J=Z[0],te=Z[1];g(String.prototype,z,J),g(RegExp.prototype,W,F==2?function(Q,me){return te.call(Q,this,me)}:function(Q){return te.call(Q,this)})}L&&A(RegExp.prototype[W],"sham",!0)}},function(d,m,f){var g=f(137).charAt;d.exports=function(x,w,C){return w+(C?g(x,w).length:1)}},function(d,m,f){var g=f(42),x=f(93);d.exports=function(w,C){var A=w.exec;if(typeof A=="function"){var _=A.call(w,C);if(typeof _!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return _}if(g(w)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return x.call(w,C)}},function(d,m,f){(function(g){Object.defineProperty(m,"__esModule",{value:!0});var x=f(96);m.forgivingBase64Encode=function(w){return g.from(w).toString("base64")},m.forgivingBase64Decode=function(w){return w===""?"":((w=w.replace(x.ASCIIWhiteSpace,"")).length%4==0&&(w.endsWith("==")?w=w.substr(0,w.length-2):w.endsWith("=")&&(w=w.substr(0,w.length-1))),w.length%4==1?null:/[0-9A-Za-z+/]/.test(w)?g.from(w,"base64").toString("utf8"):null)}}).call(this,f(145).Buffer)},function(d,m,f){m.byteLength=function(E){var R=M(E),B=R[0],z=R[1];return 3*(B+z)/4-z},m.toByteArray=function(E){var R,B,z=M(E),F=z[0],I=z[1],L=new w(function(q,K,Z){return 3*(K+Z)/4-Z}(0,F,I)),W=0,G=I>0?F-4:F;for(B=0;B<G;B+=4)R=x[E.charCodeAt(B)]<<18|x[E.charCodeAt(B+1)]<<12|x[E.charCodeAt(B+2)]<<6|x[E.charCodeAt(B+3)],L[W++]=R>>16&255,L[W++]=R>>8&255,L[W++]=255&R;return I===2&&(R=x[E.charCodeAt(B)]<<2|x[E.charCodeAt(B+1)]>>4,L[W++]=255&R),I===1&&(R=x[E.charCodeAt(B)]<<10|x[E.charCodeAt(B+1)]<<4|x[E.charCodeAt(B+2)]>>2,L[W++]=R>>8&255,L[W++]=255&R),L},m.fromByteArray=function(E){for(var R,B=E.length,z=B%3,F=[],I=0,L=B-z;I<L;I+=16383)F.push(P(E,I,I+16383>L?L:I+16383));return z===1?(R=E[B-1],F.push(g[R>>2]+g[R<<4&63]+"==")):z===2&&(R=(E[B-2]<<8)+E[B-1],F.push(g[R>>10]+g[R>>4&63]+g[R<<2&63]+"=")),F.join("")};for(var g=[],x=[],w=typeof Uint8Array<"u"?Uint8Array:Array,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,_=C.length;A<_;++A)g[A]=C[A],x[C.charCodeAt(A)]=A;function M(E){var R=E.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var B=E.indexOf("=");return B===-1&&(B=R),[B,B===R?0:4-B%4]}function P(E,R,B){for(var z,F,I=[],L=R;L<B;L+=3)z=(E[L]<<16&16711680)+(E[L+1]<<8&65280)+(255&E[L+2]),I.push(g[(F=z)>>18&63]+g[F>>12&63]+g[F>>6&63]+g[63&F]);return I.join("")}x[45]=62,x[95]=63},function(d,m){m.read=function(f,g,x,w,C){var A,_,M=8*C-w-1,P=(1<<M)-1,E=P>>1,R=-7,B=x?C-1:0,z=x?-1:1,F=f[g+B];for(B+=z,A=F&(1<<-R)-1,F>>=-R,R+=M;R>0;A=256*A+f[g+B],B+=z,R-=8);for(_=A&(1<<-R)-1,A>>=-R,R+=w;R>0;_=256*_+f[g+B],B+=z,R-=8);if(A===0)A=1-E;else{if(A===P)return _?NaN:1/0*(F?-1:1);_+=Math.pow(2,w),A-=E}return(F?-1:1)*_*Math.pow(2,A-w)},m.write=function(f,g,x,w,C,A){var _,M,P,E=8*A-C-1,R=(1<<E)-1,B=R>>1,z=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=w?0:A-1,I=w?1:-1,L=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(M=isNaN(g)?1:0,_=R):(_=Math.floor(Math.log(g)/Math.LN2),g*(P=Math.pow(2,-_))<1&&(_--,P*=2),(g+=_+B>=1?z/P:z*Math.pow(2,1-B))*P>=2&&(_++,P/=2),_+B>=R?(M=0,_=R):_+B>=1?(M=(g*P-1)*Math.pow(2,C),_+=B):(M=g*Math.pow(2,B-1)*Math.pow(2,C),_=0));C>=8;f[x+F]=255&M,F+=I,M/=256,C-=8);for(_=_<<C|M,E+=C;E>0;f[x+F]=255&_,F+=I,_/=256,E-=8);f[x+F-I]|=128*L}},function(d,m){var f={}.toString;d.exports=Array.isArray||function(g){return f.call(g)=="[object Array]"}},function(d,m,f){var g=this&&this.__values||function(C){var A=typeof Symbol=="function"&&Symbol.iterator,_=A&&C[A],M=0;if(_)return _.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(2);function w(C){var A,_;if(C===null||x.isString(C)||x.isNumber(C))return C;if(x.isArray(C)){var M=new Array;try{for(var P=g(C),E=P.next();!E.done;E=P.next()){var R=E.value;M.push(w(R))}}catch(F){A={error:F}}finally{try{E&&!E.done&&(_=P.return)&&_.call(P)}finally{if(A)throw A.error}}return M}if(x.isObject(C)){M=new Map;for(var B in C)if(C.hasOwnProperty(B)){var z=C[B];M.set(B,w(z))}return M}return C}m.parseJSONFromBytes=function(C){var A=x.utf8Decode(C);return JSON.parse.call(void 0,A)},m.serializeJSONToBytes=function(C){var A=JSON.stringify.call(void 0,C);return x.utf8Encode(A)},m.parseJSONIntoInfraValues=function(C){return w(JSON.parse.call(void 0,C))},m.convertAJSONDerivedJavaScriptValueToAnInfraValue=w},function(d,m,f){var g=this&&this.__generator||function(_,M){var P,E,R,B,z={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return B={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function F(I){return function(L){return function(W){if(P)throw new TypeError("Generator is already executing.");for(;z;)try{if(P=1,E&&(R=2&W[0]?E.return:W[0]?E.throw||((R=E.return)&&R.call(E),0):E.next)&&!(R=R.call(E,W[1])).done)return R;switch(E=0,R&&(W=[2&W[0],R.value]),W[0]){case 0:case 1:R=W;break;case 4:return z.label++,{value:W[1],done:!1};case 5:z.label++,E=W[1],W=[0];continue;case 7:W=z.ops.pop(),z.trys.pop();continue;default:if(R=z.trys,!((R=R.length>0&&R[R.length-1])||W[0]!==6&&W[0]!==2)){z=0;continue}if(W[0]===3&&(!R||W[1]>R[0]&&W[1]<R[3])){z.label=W[1];break}if(W[0]===6&&z.label<R[1]){z.label=R[1],R=W;break}if(R&&z.label<R[2]){z.label=R[2],z.ops.push(W);break}R[2]&&z.ops.pop(),z.trys.pop();continue}W=M.call(_,z)}catch(G){W=[6,G],E=0}finally{P=R=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([I,L])}}},x=this&&this.__read||function(_,M){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var E,R,B=P.call(_),z=[];try{for(;(M===void 0||M-- >0)&&!(E=B.next()).done;)z.push(E.value)}catch(F){R={error:F}}finally{try{E&&!E.done&&(P=B.return)&&P.call(B)}finally{if(R)throw R.error}}return z},w=this&&this.__spread||function(){for(var _=[],M=0;M<arguments.length;M++)_=_.concat(x(arguments[M]));return _},C=this&&this.__values||function(_){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&_[M],E=0;if(P)return P.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&E>=_.length&&(_=void 0),{value:_&&_[E++],done:!_}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var A=f(2);m.append=function(_,M){_.push(M)},m.extend=function(_,M){_.push.apply(_,w(M))},m.prepend=function(_,M){_.unshift(M)},m.replace=function(_,M,P){var E,R,B=0;try{for(var z=C(_),F=z.next();!F.done;F=z.next()){var I=F.value;if(A.isFunction(M))M.call(null,I)&&(_[B]=P);else if(I===M)return void(_[B]=P);B++}}catch(L){E={error:L}}finally{try{F&&!F.done&&(R=z.return)&&R.call(z)}finally{if(E)throw E.error}}},m.insert=function(_,M,P){_.splice(P,0,M)},m.remove=function(_,M){for(var P=_.length;P--;){var E=_[P];if(A.isFunction(M))M.call(null,E)&&_.splice(P,1);else if(E===M)return void _.splice(P,1)}},m.empty=function(_){_.length=0},m.contains=function(_,M){var P,E;try{for(var R=C(_),B=R.next();!B.done;B=R.next()){var z=B.value;if(A.isFunction(M)){if(M.call(null,z))return!0}else if(z===M)return!0}}catch(F){P={error:F}}finally{try{B&&!B.done&&(E=R.return)&&E.call(R)}finally{if(P)throw P.error}}return!1},m.size=function(_,M){var P,E;if(M===void 0)return _.length;var R=0;try{for(var B=C(_),z=B.next();!z.done;z=B.next()){var F=z.value;M.call(null,F)&&R++}}catch(I){P={error:I}}finally{try{z&&!z.done&&(E=B.return)&&E.call(B)}finally{if(P)throw P.error}}return R},m.isEmpty=function(_){return _.length===0},m.forEach=function(_,M){var P,E,R,B,z,F;return g(this,function(I){switch(I.label){case 0:return M!==void 0?[3,2]:[5,C(_)];case 1:return I.sent(),[3,9];case 2:I.trys.push([2,7,8,9]),P=C(_),E=P.next(),I.label=3;case 3:return E.done?[3,6]:(R=E.value,M.call(null,R)?[4,R]:[3,5]);case 4:I.sent(),I.label=5;case 5:return E=P.next(),[3,3];case 6:return[3,9];case 7:return B=I.sent(),z={error:B},[3,9];case 8:try{E&&!E.done&&(F=P.return)&&F.call(P)}finally{if(z)throw z.error}return[7];case 9:return[2]}})},m.clone=function(_){return new(Array.bind.apply(Array,w([void 0],_)))},m.sortInAscendingOrder=function(_,M){return _.sort(function(P,E){return M.call(null,P,E)?-1:1})},m.sortInDescendingOrder=function(_,M){return _.sort(function(P,E){return M.call(null,P,E)?1:-1})}},function(d,m,f){var g=this&&this.__generator||function(_,M){var P,E,R,B,z={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return B={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function F(I){return function(L){return function(W){if(P)throw new TypeError("Generator is already executing.");for(;z;)try{if(P=1,E&&(R=2&W[0]?E.return:W[0]?E.throw||((R=E.return)&&R.call(E),0):E.next)&&!(R=R.call(E,W[1])).done)return R;switch(E=0,R&&(W=[2&W[0],R.value]),W[0]){case 0:case 1:R=W;break;case 4:return z.label++,{value:W[1],done:!1};case 5:z.label++,E=W[1],W=[0];continue;case 7:W=z.ops.pop(),z.trys.pop();continue;default:if(R=z.trys,!((R=R.length>0&&R[R.length-1])||W[0]!==6&&W[0]!==2)){z=0;continue}if(W[0]===3&&(!R||W[1]>R[0]&&W[1]<R[3])){z.label=W[1];break}if(W[0]===6&&z.label<R[1]){z.label=R[1],R=W;break}if(R&&z.label<R[2]){z.label=R[2],z.ops.push(W);break}R[2]&&z.ops.pop(),z.trys.pop();continue}W=M.call(_,z)}catch(G){W=[6,G],E=0}finally{P=R=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([I,L])}}},x=this&&this.__values||function(_){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&_[M],E=0;if(P)return P.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&E>=_.length&&(_=void 0),{value:_&&_[E++],done:!_}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},w=this&&this.__read||function(_,M){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var E,R,B=P.call(_),z=[];try{for(;(M===void 0||M-- >0)&&!(E=B.next()).done;)z.push(E.value)}catch(F){R={error:F}}finally{try{E&&!E.done&&(P=B.return)&&P.call(B)}finally{if(R)throw R.error}}return z},C=this&&this.__spread||function(){for(var _=[],M=0;M<arguments.length;M++)_=_.concat(w(arguments[M]));return _};Object.defineProperty(m,"__esModule",{value:!0});var A=f(2);m.get=function(_,M){return _.get(M)},m.set=function(_,M,P){_.set(M,P)},m.remove=function(_,M){var P,E,R,B;if(A.isFunction(M)){var z=[];try{for(var F=x(_),I=F.next();!I.done;I=F.next()){var L=I.value;M.call(null,L)&&z.push(L[0])}}catch(K){P={error:K}}finally{try{I&&!I.done&&(E=F.return)&&E.call(F)}finally{if(P)throw P.error}}try{for(var W=x(z),G=W.next();!G.done;G=W.next()){var q=G.value;_.delete(q)}}catch(K){R={error:K}}finally{try{G&&!G.done&&(B=W.return)&&B.call(W)}finally{if(R)throw R.error}}}else _.delete(M)},m.contains=function(_,M){var P,E;if(A.isFunction(M)){try{for(var R=x(_),B=R.next();!B.done;B=R.next()){var z=B.value;if(M.call(null,z))return!0}}catch(F){P={error:F}}finally{try{B&&!B.done&&(E=R.return)&&E.call(R)}finally{if(P)throw P.error}}return!1}return _.has(M)},m.keys=function(_){return new Set(_.keys())},m.values=function(_){return C(_.values())},m.size=function(_,M){var P,E;if(M===void 0)return _.size;var R=0;try{for(var B=x(_),z=B.next();!z.done;z=B.next()){var F=z.value;M.call(null,F)&&R++}}catch(I){P={error:I}}finally{try{z&&!z.done&&(E=B.return)&&E.call(B)}finally{if(P)throw P.error}}return R},m.isEmpty=function(_){return _.size===0},m.forEach=function(_,M){var P,E,R,B,z,F;return g(this,function(I){switch(I.label){case 0:return M!==void 0?[3,2]:[5,x(_)];case 1:return I.sent(),[3,9];case 2:I.trys.push([2,7,8,9]),P=x(_),E=P.next(),I.label=3;case 3:return E.done?[3,6]:(R=E.value,M.call(null,R)?[4,R]:[3,5]);case 4:I.sent(),I.label=5;case 5:return E=P.next(),[3,3];case 6:return[3,9];case 7:return B=I.sent(),z={error:B},[3,9];case 8:try{E&&!E.done&&(F=P.return)&&F.call(P)}finally{if(z)throw z.error}return[7];case 9:return[2]}})},m.clone=function(_){return new Map(_)},m.sortInAscendingOrder=function(_,M){var P=new(Array.bind.apply(Array,C([void 0],_)));return P.sort(function(E,R){return M.call(null,E,R)?-1:1}),new Map(P)},m.sortInDescendingOrder=function(_,M){var P=new(Array.bind.apply(Array,C([void 0],_)));return P.sort(function(E,R){return M.call(null,E,R)?1:-1}),new Map(P)}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.HTML="http://www.w3.org/1999/xhtml",m.XML="http://www.w3.org/XML/1998/namespace",m.XMLNS="http://www.w3.org/2000/xmlns/",m.MathML="http://www.w3.org/1998/Math/MathML",m.SVG="http://www.w3.org/2000/svg",m.XLink="http://www.w3.org/1999/xlink"},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.enqueue=function(g,x){g.push(x)},m.dequeue=function(g){return g.shift()||null}},function(d,m,f){var g=this&&this.__generator||function(M,P){var E,R,B,z,F={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return z={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function I(L){return function(W){return function(G){if(E)throw new TypeError("Generator is already executing.");for(;F;)try{if(E=1,R&&(B=2&G[0]?R.return:G[0]?R.throw||((B=R.return)&&B.call(R),0):R.next)&&!(B=B.call(R,G[1])).done)return B;switch(R=0,B&&(G=[2&G[0],B.value]),G[0]){case 0:case 1:B=G;break;case 4:return F.label++,{value:G[1],done:!1};case 5:F.label++,R=G[1],G=[0];continue;case 7:G=F.ops.pop(),F.trys.pop();continue;default:if(B=F.trys,!((B=B.length>0&&B[B.length-1])||G[0]!==6&&G[0]!==2)){F=0;continue}if(G[0]===3&&(!B||G[1]>B[0]&&G[1]<B[3])){F.label=G[1];break}if(G[0]===6&&F.label<B[1]){F.label=B[1],B=G;break}if(B&&F.label<B[2]){F.label=B[2],F.ops.push(G);break}B[2]&&F.ops.pop(),F.trys.pop();continue}G=P.call(M,F)}catch(q){G=[6,q],R=0}finally{E=B=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([L,W])}}},x=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")},w=this&&this.__read||function(M,P){var E=typeof Symbol=="function"&&M[Symbol.iterator];if(!E)return M;var R,B,z=E.call(M),F=[];try{for(;(P===void 0||P-- >0)&&!(R=z.next()).done;)F.push(R.value)}catch(I){B={error:I}}finally{try{R&&!R.done&&(E=z.return)&&E.call(z)}finally{if(B)throw B.error}}return F},C=this&&this.__spread||function(){for(var M=[],P=0;P<arguments.length;P++)M=M.concat(w(arguments[P]));return M};Object.defineProperty(m,"__esModule",{value:!0});var A=f(2);function _(M,P){var E,R;try{for(var B=x(M),z=B.next();!z.done;z=B.next()){var F=z.value;if(!P.has(F))return!1}}catch(I){E={error:I}}finally{try{z&&!z.done&&(R=B.return)&&R.call(B)}finally{if(E)throw E.error}}return!0}m.append=function(M,P){M.add(P)},m.extend=function(M,P){P.forEach(M.add,M)},m.prepend=function(M,P){var E=new Set(M);M.clear(),M.add(P),E.forEach(M.add,M)},m.replace=function(M,P,E){var R,B,z=new Set;try{for(var F=x(M),I=F.next();!I.done;I=F.next()){var L=I.value;A.isFunction(P)?P.call(null,L)?z.add(E):z.add(L):L===P?z.add(E):z.add(L)}}catch(W){R={error:W}}finally{try{I&&!I.done&&(B=F.return)&&B.call(F)}finally{if(R)throw R.error}}M.clear(),z.forEach(M.add,M)},m.insert=function(M,P,E){var R,B,z=new Set,F=0;try{for(var I=x(M),L=I.next();!L.done;L=I.next()){var W=L.value;F===E&&z.add(P),z.add(W),F++}}catch(G){R={error:G}}finally{try{L&&!L.done&&(B=I.return)&&B.call(I)}finally{if(R)throw R.error}}M.clear(),z.forEach(M.add,M)},m.remove=function(M,P){var E,R,B,z;if(A.isFunction(P)){var F=[];try{for(var I=x(M),L=I.next();!L.done;L=I.next()){var W=L.value;P.call(null,W)&&F.push(W)}}catch(Z){E={error:Z}}finally{try{L&&!L.done&&(R=I.return)&&R.call(I)}finally{if(E)throw E.error}}try{for(var G=x(F),q=G.next();!q.done;q=G.next()){var K=q.value;M.delete(K)}}catch(Z){B={error:Z}}finally{try{q&&!q.done&&(z=G.return)&&z.call(G)}finally{if(B)throw B.error}}}else M.delete(P)},m.empty=function(M){M.clear()},m.contains=function(M,P){var E,R;if(!A.isFunction(P))return M.has(P);try{for(var B=x(M),z=B.next();!z.done;z=B.next()){var F=z.value;if(P.call(null,F))return!0}}catch(I){E={error:I}}finally{try{z&&!z.done&&(R=B.return)&&R.call(B)}finally{if(E)throw E.error}}return!1},m.size=function(M,P){var E,R;if(P===void 0)return M.size;var B=0;try{for(var z=x(M),F=z.next();!F.done;F=z.next()){var I=F.value;P.call(null,I)&&B++}}catch(L){E={error:L}}finally{try{F&&!F.done&&(R=z.return)&&R.call(z)}finally{if(E)throw E.error}}return B},m.isEmpty=function(M){return M.size===0},m.forEach=function(M,P){var E,R,B,z,F,I;return g(this,function(L){switch(L.label){case 0:return P!==void 0?[3,2]:[5,x(M)];case 1:return L.sent(),[3,9];case 2:L.trys.push([2,7,8,9]),E=x(M),R=E.next(),L.label=3;case 3:return R.done?[3,6]:(B=R.value,P.call(null,B)?[4,B]:[3,5]);case 4:L.sent(),L.label=5;case 5:return R=E.next(),[3,3];case 6:return[3,9];case 7:return z=L.sent(),F={error:z},[3,9];case 8:try{R&&!R.done&&(I=E.return)&&I.call(E)}finally{if(F)throw F.error}return[7];case 9:return[2]}})},m.clone=function(M){return new Set(M)},m.sortInAscendingOrder=function(M,P){var E=new(Array.bind.apply(Array,C([void 0],M)));return E.sort(function(R,B){return P.call(null,R,B)?-1:1}),new Set(E)},m.sortInDescendingOrder=function(M,P){var E=new(Array.bind.apply(Array,C([void 0],M)));return E.sort(function(R,B){return P.call(null,R,B)?1:-1}),new Set(E)},m.isSubsetOf=_,m.isSupersetOf=function(M,P){return _(P,M)},m.intersection=function(M,P){var E,R,B=new Set;try{for(var z=x(M),F=z.next();!F.done;F=z.next()){var I=F.value;P.has(I)&&B.add(I)}}catch(L){E={error:L}}finally{try{F&&!F.done&&(R=z.return)&&R.call(z)}finally{if(E)throw E.error}}return B},m.union=function(M,P){var E=new Set(M);return P.forEach(E.add,E),E},m.range=function(M,P){for(var E=new Set,R=M;R<=P;R++)E.add(R);return E}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.push=function(g,x){g.push(x)},m.pop=function(g){return g.pop()||null}},function(d,m,f){var g=this&&this.__values||function(F){var I=typeof Symbol=="function"&&Symbol.iterator,L=I&&F[I],W=0;if(L)return L.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&W>=F.length&&(F=void 0),{value:F&&F[W++],done:!F}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(96),w=f(147),C=f(146),A=f(2);function _(F,I){for(var L=0;;){var W=L<F.length?F.charCodeAt(L):null,G=L<I.length?I.charCodeAt(L):null;if(W===null)return!0;if(W!==G)return!1;L++}}function M(F){var I,L,W=Array.from(F),G=new Uint8Array(W.length),q=0;try{for(var K=g(F),Z=K.next();!Z.done;Z=K.next()){var J=Z.value.codePointAt(0);console.assert(J!==void 0&&J<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),J!==void 0&&J<=255&&(G[q++]=J)}}catch(te){I={error:te}}finally{try{Z&&!Z.done&&(L=K.return)&&L.call(K)}finally{if(I)throw I.error}}return G}function P(F){return/^[\u0000-\u007F]*$/.test(F)}function E(F){var I,L,W="";try{for(var G=g(F),q=G.next();!q.done;q=G.next()){var K=q.value,Z=K.codePointAt(0);W+=Z!==void 0&&Z>=65&&Z<=90?String.fromCodePoint(Z+32):K}}catch(J){I={error:J}}finally{try{q&&!q.done&&(L=G.return)&&L.call(G)}finally{if(I)throw I.error}}return W}function R(F){return F.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function B(F,I,L){if(!A.isArray(I))return B(F,Array.from(I),L);for(var W="";L.position<I.length&&F.call(null,I[L.position]);)W+=I[L.position],L.position++;return W}function z(F,I){B(function(L){return x.ASCIIWhiteSpace.test(L)},F,I)}m.isCodeUnitPrefix=_,m.isCodeUnitLessThan=function(F,I){if(_(I,F))return!1;if(_(F,I))return!0;for(var L=0;L<Math.min(F.length,I.length);L++){var W=F.charCodeAt(L),G=I.charCodeAt(L);if(W!==G)return W<G}return!1},m.isomorphicEncode=M,m.isASCIIString=P,m.asciiLowercase=E,m.asciiUppercase=function(F){var I,L,W="";try{for(var G=g(F),q=G.next();!q.done;q=G.next()){var K=q.value,Z=K.codePointAt(0);W+=Z!==void 0&&Z>=97&&Z<=122?String.fromCodePoint(Z-32):K}}catch(J){I={error:J}}finally{try{q&&!q.done&&(L=G.return)&&L.call(G)}finally{if(I)throw I.error}}return W},m.asciiCaseInsensitiveMatch=function(F,I){return E(F)===E(I)},m.asciiEncode=function(F){return console.assert(P(F),"asciiEncode requires an ASCII string."),M(F)},m.asciiDecode=function(F){var I,L;try{for(var W=g(F),G=W.next();!G.done;G=W.next()){var q=G.value;console.assert(C.isASCIIByte(q),"asciiDecode requires an ASCII byte sequence.")}}catch(K){I={error:K}}finally{try{G&&!G.done&&(L=W.return)&&L.call(W)}finally{if(I)throw I.error}}return w.isomorphicDecode(F)},m.stripNewlines=function(F){return F.replace(/[\n\r]/g,"")},m.normalizeNewlines=function(F){return F.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},m.stripLeadingAndTrailingASCIIWhitespace=R,m.stripAndCollapseASCIIWhitespace=function(F){return R(F.replace(/[\t\n\f\r ]{2,}/g," "))},m.collectASequenceOfCodePoints=B,m.skipASCIIWhitespace=z,m.strictlySplit=function F(I,L){if(!A.isArray(I))return F(Array.from(I),L);var W={position:0},G=[],q=B(function(K){return L!==K},I,W);for(G.push(q);W.position<I.length;)console.assert(I[W.position]===L,"strictlySplit found no delimiter in input string."),W.position++,q=B(function(K){return L!==K},I,W),G.push(q);return G},m.splitAStringOnASCIIWhitespace=function F(I){if(!A.isArray(I))return F(Array.from(I));var L={position:0},W=[];for(z(I,L);L.position<I.length;){var G=B(function(q){return!x.ASCIIWhiteSpace.test(q)},I,L);W.push(G),z(I,L)}return W},m.splitAStringOnCommas=function F(I){if(!A.isArray(I))return F(Array.from(I));for(var L={position:0},W=[];L.position<I.length;){var G=B(function(q){return q!==","},I,L);W.push(R(G)),L.position<I.length&&(console.assert(I[L.position]===",","splitAStringOnCommas found no delimiter in input string."),L.position++)}return W},m.concatenate=function(F,I){return I===void 0&&(I=""),F.length===0?"":F.join(I)}},function(d,m,f){var g=this&&this.__values||function(w){var C=typeof Symbol=="function"&&Symbol.iterator,A=C&&w[C],_=0;if(A)return A.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&_>=w.length&&(w=void 0),{value:w&&w[_++],done:!w}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(97);m.abort_add=function(w,C){C._abortedFlag||C._abortAlgorithms.add(w)},m.abort_remove=function(w,C){C._abortAlgorithms.delete(w)},m.abort_signalAbort=function(w){var C,A;if(!w._abortedFlag){w._abortedFlag=!0;try{for(var _=g(w._abortAlgorithms),M=_.next();!M.done;M=_.next())M.value.call(w)}catch(P){C={error:P}}finally{try{M&&!M.done&&(A=_.return)&&A.call(_)}finally{if(C)throw C.error}}w._abortAlgorithms.clear(),x.event_fireAnEvent("abort",w)}}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(150),x=function(){function w(){}return w.asNode=function(C){if(g.Guard.isNode(C))return C;throw new Error("Invalid object. Node expected.")},w}();m.Cast=x},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){function w(){}return Object.defineProperty(w.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),w.prototype.add=function(C){throw new Error("Cannot add to an empty set.")},w.prototype.clear=function(){},w.prototype.delete=function(C){return!1},w.prototype.forEach=function(C,A){},w.prototype.has=function(C){return!1},w.prototype[Symbol.iterator]=function(){return new x},w.prototype.entries=function(){return new x},w.prototype.keys=function(){return new x},w.prototype.values=function(){return new x},Object.defineProperty(w.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),w}();m.EmptySet=g;var x=function(){function w(){}return w.prototype[Symbol.iterator]=function(){return this},w.prototype.next=function(){return{done:!0,value:null}},w}()},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),function(g){g[g.SchemeStart=0]="SchemeStart",g[g.Scheme=1]="Scheme",g[g.NoScheme=2]="NoScheme",g[g.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",g[g.PathOrAuthority=4]="PathOrAuthority",g[g.Relative=5]="Relative",g[g.RelativeSlash=6]="RelativeSlash",g[g.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",g[g.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",g[g.Authority=9]="Authority",g[g.Host=10]="Host",g[g.Hostname=11]="Hostname",g[g.Port=12]="Port",g[g.File=13]="File",g[g.FileSlash=14]="FileSlash",g[g.FileHost=15]="FileHost",g[g.PathStart=16]="PathStart",g[g.Path=17]="Path",g[g.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",g[g.Query=19]="Query",g[g.Fragment=20]="Fragment"}(m.ParserState||(m.ParserState={})),m.OpaqueOrigin=["","",null,null]},function(d,m,f){var g=f(245),x=f(247);function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}m.parse=G,m.resolve=function(q,K){return G(q,!1,!0).resolve(K)},m.resolveObject=function(q,K){return q?G(q,!1,!0).resolveObject(K):K},m.format=function(q){return x.isString(q)&&(q=G(q)),q instanceof w?q.format():w.prototype.format.call(q)},m.Url=w;var C=/^([a-z0-9.+-]+:)/i,A=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,M=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),P=["'"].concat(M),E=["%","/","?",";","#"].concat(P),R=["/","?","#"],B=/^[+a-z0-9A-Z_-]{0,63}$/,z=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,F={javascript:!0,"javascript:":!0},I={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=f(248);function G(q,K,Z){if(q&&x.isObject(q)&&q instanceof w)return q;var J=new w;return J.parse(q,K,Z),J}w.prototype.parse=function(q,K,Z){if(!x.isString(q))throw new TypeError("Parameter 'url' must be a string, not "+typeof q);var J=q.indexOf("?"),te=J!==-1&&J<q.indexOf("#")?"?":"#",Q=q.split(te);Q[0]=Q[0].replace(/\\/g,"/");var me=q=Q.join(te);if(me=me.trim(),!Z&&q.split("#").length===1){var Xe=_.exec(me);if(Xe)return this.path=me,this.href=me,this.pathname=Xe[1],Xe[2]?(this.search=Xe[2],this.query=K?W.parse(this.search.substr(1)):this.search.substr(1)):K&&(this.search="",this.query={}),this}var Ve=C.exec(me);if(Ve){var Ye=(Ve=Ve[0]).toLowerCase();this.protocol=Ye,me=me.substr(Ve.length)}if(Z||Ve||me.match(/^\/\/[^@\/]+@[^@\/]+/)){var qe=me.substr(0,2)==="//";!qe||Ve&&I[Ve]||(me=me.substr(2),this.slashes=!0)}if(!I[Ve]&&(qe||Ve&&!L[Ve])){for(var et,je,Ke=-1,Je=0;Je<R.length;Je++)(at=me.indexOf(R[Je]))!==-1&&(Ke===-1||at<Ke)&&(Ke=at);for((je=Ke===-1?me.lastIndexOf("@"):me.lastIndexOf("@",Ke))!==-1&&(et=me.slice(0,je),me=me.slice(je+1),this.auth=decodeURIComponent(et)),Ke=-1,Je=0;Je<E.length;Je++){var at;(at=me.indexOf(E[Je]))!==-1&&(Ke===-1||at<Ke)&&(Ke=at)}Ke===-1&&(Ke=me.length),this.host=me.slice(0,Ke),me=me.slice(Ke),this.parseHost(),this.hostname=this.hostname||"";var nt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!nt)for(var ct=this.hostname.split(/\./),pt=(Je=0,ct.length);Je<pt;Je++){var rt=ct[Je];if(rt&&!rt.match(B)){for(var ht="",yt=0,wt=rt.length;yt<wt;yt++)rt.charCodeAt(yt)>127?ht+="x":ht+=rt[yt];if(!ht.match(B)){var ft=ct.slice(0,Je),He=ct.slice(Je+1),le=rt.match(z);le&&(ft.push(le[1]),He.unshift(le[2])),He.length&&(me="/"+He.join(".")+me),this.hostname=ft.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),nt||(this.hostname=g.toASCII(this.hostname));var be=this.port?":"+this.port:"",we=this.hostname||"";this.host=we+be,this.href+=this.host,nt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!F[Ye])for(Je=0,pt=P.length;Je<pt;Je++){var ze=P[Je];if(me.indexOf(ze)!==-1){var Ze=encodeURIComponent(ze);Ze===ze&&(Ze=escape(ze)),me=me.split(ze).join(Ze)}}var Qe=me.indexOf("#");Qe!==-1&&(this.hash=me.substr(Qe),me=me.slice(0,Qe));var st=me.indexOf("?");if(st!==-1?(this.search=me.substr(st),this.query=me.substr(st+1),K&&(this.query=W.parse(this.query)),me=me.slice(0,st)):K&&(this.search="",this.query={}),me&&(this.pathname=me),L[Ye]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){be=this.pathname||"";var lt=this.search||"";this.path=be+lt}return this.href=this.format(),this},w.prototype.format=function(){var q=this.auth||"";q&&(q=(q=encodeURIComponent(q)).replace(/%3A/i,":"),q+="@");var K=this.protocol||"",Z=this.pathname||"",J=this.hash||"",te=!1,Q="";this.host?te=q+this.host:this.hostname&&(te=q+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(te+=":"+this.port)),this.query&&x.isObject(this.query)&&Object.keys(this.query).length&&(Q=W.stringify(this.query));var me=this.search||Q&&"?"+Q||"";return K&&K.substr(-1)!==":"&&(K+=":"),this.slashes||(!K||L[K])&&te!==!1?(te="//"+(te||""),Z&&Z.charAt(0)!=="/"&&(Z="/"+Z)):te||(te=""),J&&J.charAt(0)!=="#"&&(J="#"+J),me&&me.charAt(0)!=="?"&&(me="?"+me),K+te+(Z=Z.replace(/[?#]/g,function(Xe){return encodeURIComponent(Xe)}))+(me=me.replace("#","%23"))+J},w.prototype.resolve=function(q){return this.resolveObject(G(q,!1,!0)).format()},w.prototype.resolveObject=function(q){if(x.isString(q)){var K=new w;K.parse(q,!1,!0),q=K}for(var Z=new w,J=Object.keys(this),te=0;te<J.length;te++){var Q=J[te];Z[Q]=this[Q]}if(Z.hash=q.hash,q.href==="")return Z.href=Z.format(),Z;if(q.slashes&&!q.protocol){for(var me=Object.keys(q),Xe=0;Xe<me.length;Xe++){var Ve=me[Xe];Ve!=="protocol"&&(Z[Ve]=q[Ve])}return L[Z.protocol]&&Z.hostname&&!Z.pathname&&(Z.path=Z.pathname="/"),Z.href=Z.format(),Z}if(q.protocol&&q.protocol!==Z.protocol){if(!L[q.protocol]){for(var Ye=Object.keys(q),qe=0;qe<Ye.length;qe++){var et=Ye[qe];Z[et]=q[et]}return Z.href=Z.format(),Z}if(Z.protocol=q.protocol,q.host||I[q.protocol])Z.pathname=q.pathname;else{for(var je=(q.pathname||"").split("/");je.length&&!(q.host=je.shift()););q.host||(q.host=""),q.hostname||(q.hostname=""),je[0]!==""&&je.unshift(""),je.length<2&&je.unshift(""),Z.pathname=je.join("/")}if(Z.search=q.search,Z.query=q.query,Z.host=q.host||"",Z.auth=q.auth,Z.hostname=q.hostname||q.host,Z.port=q.port,Z.pathname||Z.search){var Ke=Z.pathname||"",Je=Z.search||"";Z.path=Ke+Je}return Z.slashes=Z.slashes||q.slashes,Z.href=Z.format(),Z}var at=Z.pathname&&Z.pathname.charAt(0)==="/",nt=q.host||q.pathname&&q.pathname.charAt(0)==="/",ct=nt||at||Z.host&&q.pathname,pt=ct,rt=Z.pathname&&Z.pathname.split("/")||[],ht=(je=q.pathname&&q.pathname.split("/")||[],Z.protocol&&!L[Z.protocol]);if(ht&&(Z.hostname="",Z.port=null,Z.host&&(rt[0]===""?rt[0]=Z.host:rt.unshift(Z.host)),Z.host="",q.protocol&&(q.hostname=null,q.port=null,q.host&&(je[0]===""?je[0]=q.host:je.unshift(q.host)),q.host=null),ct=ct&&(je[0]===""||rt[0]==="")),nt)Z.host=q.host||q.host===""?q.host:Z.host,Z.hostname=q.hostname||q.hostname===""?q.hostname:Z.hostname,Z.search=q.search,Z.query=q.query,rt=je;else if(je.length)rt||(rt=[]),rt.pop(),rt=rt.concat(je),Z.search=q.search,Z.query=q.query;else if(!x.isNullOrUndefined(q.search))return ht&&(Z.hostname=Z.host=rt.shift(),(le=!!(Z.host&&Z.host.indexOf("@")>0)&&Z.host.split("@"))&&(Z.auth=le.shift(),Z.host=Z.hostname=le.shift())),Z.search=q.search,Z.query=q.query,x.isNull(Z.pathname)&&x.isNull(Z.search)||(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.href=Z.format(),Z;if(!rt.length)return Z.pathname=null,Z.search?Z.path="/"+Z.search:Z.path=null,Z.href=Z.format(),Z;for(var yt=rt.slice(-1)[0],wt=(Z.host||q.host||rt.length>1)&&(yt==="."||yt==="..")||yt==="",ft=0,He=rt.length;He>=0;He--)(yt=rt[He])==="."?rt.splice(He,1):yt===".."?(rt.splice(He,1),ft++):ft&&(rt.splice(He,1),ft--);if(!ct&&!pt)for(;ft--;ft)rt.unshift("..");!ct||rt[0]===""||rt[0]&&rt[0].charAt(0)==="/"||rt.unshift(""),wt&&rt.join("/").substr(-1)!=="/"&&rt.push("");var le,be=rt[0]===""||rt[0]&&rt[0].charAt(0)==="/";return ht&&(Z.hostname=Z.host=be?"":rt.length?rt.shift():"",(le=!!(Z.host&&Z.host.indexOf("@")>0)&&Z.host.split("@"))&&(Z.auth=le.shift(),Z.host=Z.hostname=le.shift())),(ct=ct||Z.host&&rt.length)&&!be&&rt.unshift(""),rt.length?Z.pathname=rt.join("/"):(Z.pathname=null,Z.path=null),x.isNull(Z.pathname)&&x.isNull(Z.search)||(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.auth=q.auth||Z.auth,Z.slashes=Z.slashes||q.slashes,Z.href=Z.format(),Z},w.prototype.parseHost=function(){var q=this.host,K=A.exec(q);K&&((K=K[0])!==":"&&(this.port=K.substr(1)),q=q.substr(0,q.length-K.length)),q&&(this.hostname=q)}},function(d,m,f){(function(g,x){var w;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(C){m&&m.nodeType,g&&g.nodeType;var A=typeof x=="object"&&x;A.global!==A&&A.window!==A&&A.self;var _,M=2147483647,P=/^xn--/,E=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=Math.floor,F=String.fromCharCode;function I(Q){throw new RangeError(B[Q])}function L(Q,me){for(var Xe=Q.length,Ve=[];Xe--;)Ve[Xe]=me(Q[Xe]);return Ve}function W(Q,me){var Xe=Q.split("@"),Ve="";return Xe.length>1&&(Ve=Xe[0]+"@",Q=Xe[1]),Ve+L((Q=Q.replace(R,".")).split("."),me).join(".")}function G(Q){for(var me,Xe,Ve=[],Ye=0,qe=Q.length;Ye<qe;)(me=Q.charCodeAt(Ye++))>=55296&&me<=56319&&Ye<qe?(64512&(Xe=Q.charCodeAt(Ye++)))==56320?Ve.push(((1023&me)<<10)+(1023&Xe)+65536):(Ve.push(me),Ye--):Ve.push(me);return Ve}function q(Q){return L(Q,function(me){var Xe="";return me>65535&&(Xe+=F((me-=65536)>>>10&1023|55296),me=56320|1023&me),Xe+=F(me)}).join("")}function K(Q,me){return Q+22+75*(Q<26)-((me!=0)<<5)}function Z(Q,me,Xe){var Ve=0;for(Q=Xe?z(Q/700):Q>>1,Q+=z(Q/me);Q>455;Ve+=36)Q=z(Q/35);return z(Ve+36*Q/(Q+38))}function J(Q){var me,Xe,Ve,Ye,qe,et,je,Ke,Je,at,nt,ct=[],pt=Q.length,rt=0,ht=128,yt=72;for((Xe=Q.lastIndexOf("-"))<0&&(Xe=0),Ve=0;Ve<Xe;++Ve)Q.charCodeAt(Ve)>=128&&I("not-basic"),ct.push(Q.charCodeAt(Ve));for(Ye=Xe>0?Xe+1:0;Ye<pt;){for(qe=rt,et=1,je=36;Ye>=pt&&I("invalid-input"),((Ke=(nt=Q.charCodeAt(Ye++))-48<10?nt-22:nt-65<26?nt-65:nt-97<26?nt-97:36)>=36||Ke>z((M-rt)/et))&&I("overflow"),rt+=Ke*et,!(Ke<(Je=je<=yt?1:je>=yt+26?26:je-yt));je+=36)et>z(M/(at=36-Je))&&I("overflow"),et*=at;yt=Z(rt-qe,me=ct.length+1,qe==0),z(rt/me)>M-ht&&I("overflow"),ht+=z(rt/me),rt%=me,ct.splice(rt++,0,ht)}return q(ct)}function te(Q){var me,Xe,Ve,Ye,qe,et,je,Ke,Je,at,nt,ct,pt,rt,ht,yt=[];for(ct=(Q=G(Q)).length,me=128,Xe=0,qe=72,et=0;et<ct;++et)(nt=Q[et])<128&&yt.push(F(nt));for(Ve=Ye=yt.length,Ye&&yt.push("-");Ve<ct;){for(je=M,et=0;et<ct;++et)(nt=Q[et])>=me&&nt<je&&(je=nt);for(je-me>z((M-Xe)/(pt=Ve+1))&&I("overflow"),Xe+=(je-me)*pt,me=je,et=0;et<ct;++et)if((nt=Q[et])<me&&++Xe>M&&I("overflow"),nt==me){for(Ke=Xe,Je=36;!(Ke<(at=Je<=qe?1:Je>=qe+26?26:Je-qe));Je+=36)ht=Ke-at,rt=36-at,yt.push(F(K(at+ht%rt,0))),Ke=z(ht/rt);yt.push(F(K(Ke,0))),qe=Z(Xe,pt,Ve==Ye),Xe=0,++Ve}++Xe,++me}return yt.join("")}_={version:"1.4.1",ucs2:{decode:G,encode:q},decode:J,encode:te,toASCII:function(Q){return W(Q,function(me){return E.test(me)?"xn--"+te(me):me})},toUnicode:function(Q){return W(Q,function(me){return P.test(me)?J(me.slice(4).toLowerCase()):me})}},(w=(function(){return _}).call(m,f,m,g))===void 0||(g.exports=w)})()}).call(this,f(246)(d),f(78))},function(d,m){d.exports=function(f){return f.webpackPolyfill||(f.deprecate=function(){},f.paths=[],f.children||(f.children=[]),Object.defineProperty(f,"loaded",{enumerable:!0,get:function(){return f.l}}),Object.defineProperty(f,"id",{enumerable:!0,get:function(){return f.i}}),f.webpackPolyfill=1),f}},function(d,m,f){d.exports={isString:function(g){return typeof g=="string"},isObject:function(g){return typeof g=="object"&&g!==null},isNull:function(g){return g===null},isNullOrUndefined:function(g){return g==null}}},function(d,m,f){m.decode=m.parse=f(249),m.encode=m.stringify=f(250)},function(d,m,f){function g(w,C){return Object.prototype.hasOwnProperty.call(w,C)}d.exports=function(w,C,A,_){C=C||"&",A=A||"=";var M={};if(typeof w!="string"||w.length===0)return M;var P=/\+/g;w=w.split(C);var E=1e3;_&&typeof _.maxKeys=="number"&&(E=_.maxKeys);var R=w.length;E>0&&R>E&&(R=E);for(var B=0;B<R;++B){var z,F,I,L,W=w[B].replace(P,"%20"),G=W.indexOf(A);G>=0?(z=W.substr(0,G),F=W.substr(G+1)):(z=W,F=""),I=decodeURIComponent(z),L=decodeURIComponent(F),g(M,I)?x(M[I])?M[I].push(L):M[I]=[M[I],L]:M[I]=L}return M};var x=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"}},function(d,m,f){var g=function(A){switch(typeof A){case"string":return A;case"boolean":return A?"true":"false";case"number":return isFinite(A)?A:"";default:return""}};d.exports=function(A,_,M,P){return _=_||"&",M=M||"=",A===null&&(A=void 0),typeof A=="object"?w(C(A),function(E){var R=encodeURIComponent(g(E))+M;return x(A[E])?w(A[E],function(B){return R+encodeURIComponent(g(B))}).join(_):R+encodeURIComponent(g(A[E]))}).join(_):P?encodeURIComponent(g(P))+M+encodeURIComponent(g(A)):""};var x=Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"};function w(A,_){if(A.map)return A.map(_);for(var M=[],P=0;P<A.length;P++)M.push(_(A[P],P));return M}var C=Object.keys||function(A){var _=[];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&_.push(M);return _}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(52);m.attr_setAnExistingAttributeValue=function(x,w){x._element===null?x._value=w:g.element_change(x,x._element,w)}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(108),x=f(30),w=f(52);m.tokenList_validationSteps=function(C,A){if(!x.dom_hasSupportedTokens(C._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+C._attribute._localName+"'.");return x.dom_getSupportedTokens(C._attribute._localName).has(A.toLowerCase())},m.tokenList_updateSteps=function(C){(C._element.hasAttribute(C._attribute._localName)||C._tokenSet.size!==0)&&w.element_setAnAttributeValue(C._element,C._attribute._localName,g.orderedSet_serialize(C._tokenSet))},m.tokenList_serializeSteps=function(C){return w.element_getAnAttributeValue(C._element,C._attribute._localName)}},function(d,m,f){var g=this&&this.__values||function(C){var A=typeof Symbol=="function"&&Symbol.iterator,_=A&&C[A],M=0;if(_)return _.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(2);function w(C){return x.isBoolean(C)?C:C.capture||!1}m.eventTarget_flatten=w,m.eventTarget_flattenMore=function(C){var A=w(C),_=!1,M=!1;return x.isBoolean(C)||(_=C.once||!1,M=C.passive||!1),[A,M,_]},m.eventTarget_addEventListener=function(C,A){if(A.callback!==null){for(var _=0;_<C._eventListenerList.length;_++){var M=C._eventListenerList[_];if(M.type===A.type&&M.callback.handleEvent===A.callback.handleEvent&&M.capture===A.capture)return}C._eventListenerList.push(A)}},m.eventTarget_removeEventListener=function(C,A,_){A.removed=!0,C._eventListenerList.splice(_,1)},m.eventTarget_removeAllEventListeners=function(C){var A,_;try{for(var M=g(C._eventListenerList),P=M.next();!P.done;P=M.next())P.value.removed=!0}catch(E){A={error:E}}finally{try{P&&!P.done&&(_=M.return)&&_.call(M)}finally{if(A)throw A.error}}C._eventListenerList.length=0}},function(d,m,f){var g=this&&this.__values||function(C){var A=typeof Symbol=="function"&&Symbol.iterator,_=A&&C[A],M=0;if(_)return _.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(2),w=f(29);m.parentNode_convertNodesIntoANode=function(C,A){for(var _,M,P=null,E=0;E<C.length;E++){var R=C[E];if(x.isString(R)){var B=w.create_text(A,R);C[E]=B}}if(C.length===1)P=C[0];else{var z=P=w.create_documentFragment(A);try{for(var F=g(C),I=F.next();!I.done;I=F.next())R=I.value,z.appendChild(R)}catch(L){_={error:L}}finally{try{I&&!I.done&&(M=F.return)&&M.call(F)}finally{if(_)throw _.error}}}return P}},function(d,m,f){var g=this&&this.__values||function(K){var Z=typeof Symbol=="function"&&Symbol.iterator,J=Z&&K[Z],te=0;if(J)return J.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&te>=K.length&&(K=void 0),{value:K&&K[te++],done:!K}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")},x=this&&this.__read||function(K,Z){var J=typeof Symbol=="function"&&K[Symbol.iterator];if(!J)return K;var te,Q,me=J.call(K),Xe=[];try{for(;(Z===void 0||Z-- >0)&&!(te=me.next()).done;)Xe.push(te.value)}catch(Ve){Q={error:Ve}}finally{try{te&&!te.done&&(J=me.return)&&J.call(me)}finally{if(Q)throw Q.error}}return Xe},w=this&&this.__spread||function(){for(var K=[],Z=0;Z<arguments.length;Z++)K=K.concat(x(arguments[Z]));return K};Object.defineProperty(m,"__esModule",{value:!0});var C=f(1),A=f(9),_=f(3),M=f(29),P=f(17),E=f(175),R=f(107),B=f(176),z=f(37),F=f(177);function I(K){return K._startNode===K._endNode&&K._startOffset===K._endOffset}function L(K){return P.tree_rootNode(K._startNode)}function W(K,Z){return P.tree_rootNode(K)===L(Z)&&E.boundaryPoint_position([K,0],Z._start)===C.BoundaryPosition.After&&E.boundaryPoint_position([K,P.tree_nodeLength(K)],Z._end)===C.BoundaryPosition.Before}function G(K,Z){var J=P.tree_isAncestorOf(Z._startNode,K,!0),te=P.tree_isAncestorOf(Z._endNode,K,!0);return J&&!te||!J&&te}function q(K){var Z,J,te,Q,me,Xe,Ve=M.create_documentFragment(K._startNode._nodeDocument);if(I(K))return Ve;var Ye=K._startNode,qe=K._startOffset,et=K._endNode,je=K._endOffset;if(Ye===et&&_.Guard.isCharacterDataNode(Ye))return(we=B.node_clone(Ye))._data=R.characterData_substringData(Ye,qe,je-qe),z.mutation_append(we,Ve),R.characterData_replaceData(Ye,qe,je-qe,""),Ve;for(var Ke=Ye;!P.tree_isAncestorOf(et,Ke,!0);){if(Ke._parent===null)throw new Error("Parent node  is null.");Ke=Ke._parent}var Je=null;if(!P.tree_isAncestorOf(et,Ye,!0))try{for(var at=g(Ke._children),nt=at.next();!nt.done;nt=at.next())if(G(ht=nt.value,K)){Je=ht;break}}catch(lt){Z={error:lt}}finally{try{nt&&!nt.done&&(J=at.return)&&J.call(at)}finally{if(Z)throw Z.error}}var ct=null;if(!P.tree_isAncestorOf(Ye,et,!0))for(var pt=w(Ke._children),rt=pt.length-1;rt>0;rt--){var ht;if(G(ht=pt[rt],K)){ct=ht;break}}var yt,wt,ft=[];try{for(var He=g(Ke._children),le=He.next();!le.done;le=He.next())if(W(st=le.value,K)){if(_.Guard.isDocumentTypeNode(st))throw new A.HierarchyRequestError;ft.push(st)}}catch(lt){te={error:lt}}finally{try{le&&!le.done&&(Q=He.return)&&Q.call(He)}finally{if(te)throw te.error}}if(P.tree_isAncestorOf(et,Ye,!0))yt=Ye,wt=qe;else{for(var be=Ye;be._parent!==null&&!P.tree_isAncestorOf(et,be._parent);)be=be._parent;if(be._parent===null)throw new Error("Parent node is null.");yt=be._parent,wt=1+P.tree_index(be)}if(_.Guard.isCharacterDataNode(Je))(we=B.node_clone(Ye))._data=R.characterData_substringData(Ye,qe,P.tree_nodeLength(Ye)-qe),z.mutation_append(we,Ve),R.characterData_replaceData(Ye,qe,P.tree_nodeLength(Ye)-qe,"");else if(Je!==null){var we=B.node_clone(Je);z.mutation_append(we,Ve);var ze=q(M.create_range([Ye,qe],[Je,P.tree_nodeLength(Je)]));z.mutation_append(ze,we)}try{for(var Ze=g(ft),Qe=Ze.next();!Qe.done;Qe=Ze.next()){var st=Qe.value;z.mutation_append(st,Ve)}}catch(lt){me={error:lt}}finally{try{Qe&&!Qe.done&&(Xe=Ze.return)&&Xe.call(Ze)}finally{if(me)throw me.error}}return _.Guard.isCharacterDataNode(ct)?((we=B.node_clone(et))._data=R.characterData_substringData(et,0,je),z.mutation_append(we,Ve),R.characterData_replaceData(et,0,je,"")):ct!==null&&(we=B.node_clone(ct),z.mutation_append(we,Ve),ze=q(M.create_range([ct,0],[et,je])),z.mutation_append(ze,we)),K._start=[yt,wt],K._end=[yt,wt],Ve}m.range_collapsed=I,m.range_root=L,m.range_isContained=W,m.range_isPartiallyContained=G,m.range_setTheStart=function(K,Z,J){if(_.Guard.isDocumentTypeNode(Z))throw new A.InvalidNodeTypeError;if(J>P.tree_nodeLength(Z))throw new A.IndexSizeError;var te=[Z,J];L(K)===P.tree_rootNode(Z)&&E.boundaryPoint_position(te,K._end)!==C.BoundaryPosition.After||(K._end=te),K._start=te},m.range_setTheEnd=function(K,Z,J){if(_.Guard.isDocumentTypeNode(Z))throw new A.InvalidNodeTypeError;if(J>P.tree_nodeLength(Z))throw new A.IndexSizeError;var te=[Z,J];L(K)===P.tree_rootNode(Z)&&E.boundaryPoint_position(te,K._start)!==C.BoundaryPosition.Before||(K._start=te),K._end=te},m.range_select=function(K,Z){var J=K._parent;if(J===null)throw new A.InvalidNodeTypeError;var te=P.tree_index(K);Z._start=[J,te],Z._end=[J,te+1]},m.range_extract=q,m.range_cloneTheContents=function K(Z){var J,te,Q,me,Xe,Ve,Ye=M.create_documentFragment(Z._startNode._nodeDocument);if(I(Z))return Ye;var qe=Z._startNode,et=Z._startOffset,je=Z._endNode,Ke=Z._endOffset;qe===je&&_.Guard.isCharacterDataNode(qe)&&((le=B.node_clone(qe))._data=R.characterData_substringData(qe,et,Ke-et),z.mutation_append(le,Ye));for(var Je=qe;!P.tree_isAncestorOf(je,Je,!0);){if(Je._parent===null)throw new Error("Parent node  is null.");Je=Je._parent}var at=null;if(!P.tree_isAncestorOf(je,qe,!0))try{for(var nt=g(Je._children),ct=nt.next();!ct.done;ct=nt.next())if(G(yt=ct.value,Z)){at=yt;break}}catch(Qe){J={error:Qe}}finally{try{ct&&!ct.done&&(te=nt.return)&&te.call(nt)}finally{if(J)throw J.error}}var pt=null;if(!P.tree_isAncestorOf(qe,je,!0))for(var rt=w(Je._children),ht=rt.length-1;ht>0;ht--){var yt;if(G(yt=rt[ht],Z)){pt=yt;break}}var wt=[];try{for(var ft=g(Je._children),He=ft.next();!He.done;He=ft.next())if(W(Ze=He.value,Z)){if(_.Guard.isDocumentTypeNode(Ze))throw new A.HierarchyRequestError;wt.push(Ze)}}catch(Qe){Q={error:Qe}}finally{try{He&&!He.done&&(me=ft.return)&&me.call(ft)}finally{if(Q)throw Q.error}}if(_.Guard.isCharacterDataNode(at))(le=B.node_clone(qe))._data=R.characterData_substringData(qe,et,P.tree_nodeLength(qe)-et),z.mutation_append(le,Ye);else if(at!==null){var le=B.node_clone(at);z.mutation_append(le,Ye);var be=K(M.create_range([qe,et],[at,P.tree_nodeLength(at)]));z.mutation_append(be,le)}try{for(var we=g(wt),ze=we.next();!ze.done;ze=we.next()){var Ze=ze.value,le=B.node_clone(Ze);z.mutation_append(le,Ye)}}catch(Qe){Xe={error:Qe}}finally{try{ze&&!ze.done&&(Ve=we.return)&&Ve.call(we)}finally{if(Xe)throw Xe.error}}return _.Guard.isCharacterDataNode(pt)?((le=B.node_clone(je))._data=R.characterData_substringData(je,0,Ke),z.mutation_append(le,Ye)):pt!==null&&(le=B.node_clone(pt),Ye.append(le),be=q(M.create_range([pt,0],[je,Ke])),z.mutation_append(be,le)),Ye},m.range_insert=function(K,Z){var J,te;if(_.Guard.isProcessingInstructionNode(Z._startNode)||_.Guard.isCommentNode(Z._startNode)||_.Guard.isTextNode(Z._startNode)&&Z._startNode._parent===null||Z._startNode===K)throw new A.HierarchyRequestError;var Q,me=null;if(_.Guard.isTextNode(Z._startNode))me=Z._startNode;else{var Xe=0;try{for(var Ve=g(Z._startNode._children),Ye=Ve.next();!Ye.done;Ye=Ve.next()){var qe=Ye.value;if(Xe===Z._startOffset){me=qe;break}Xe++}}catch(je){J={error:je}}finally{try{Ye&&!Ye.done&&(te=Ve.return)&&te.call(Ve)}finally{if(J)throw J.error}}}if(me===null)Q=Z._startNode;else{if(me._parent===null)throw new Error("Parent node is null.");Q=me._parent}z.mutation_ensurePreInsertionValidity(K,Q,me),_.Guard.isTextNode(Z._startNode)&&(me=F.text_split(Z._startNode,Z._startOffset)),K===me&&(me=K._nextSibling),K._parent!==null&&z.mutation_remove(K,K._parent);var et=me===null?P.tree_nodeLength(Q):P.tree_index(me);_.Guard.isDocumentFragmentNode(K)?et+=P.tree_nodeLength(K):et++,z.mutation_preInsert(K,Q,me),I(Z)&&(Z._end=[Q,et])},m.range_getContainedNodes=function(K){var Z;return(Z={})[Symbol.iterator]=function(){var J=K.commonAncestorContainer,te=P.tree_getFirstDescendantNode(J);return{next:function(){for(;te&&!W(te,K);)te=P.tree_getNextDescendantNode(J,te);if(te===null)return{done:!0,value:null};var Q={done:!1,value:te};return te=P.tree_getNextDescendantNode(J,te),Q}}},Z},m.range_getPartiallyContainedNodes=function(K){var Z;return(Z={})[Symbol.iterator]=function(){var J=K.commonAncestorContainer,te=P.tree_getFirstDescendantNode(J);return{next:function(){for(;te&&!G(te,K);)te=P.tree_getNextDescendantNode(J,te);if(te===null)return{done:!0,value:null};var Q={done:!1,value:te};return te=P.tree_getNextDescendantNode(J,te),Q}}},Z}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(9);m.selectors_scopeMatchASelectorsString=function(x,w){throw new g.NotSupportedError}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(1),x=f(105);m.treeWalker_traverseChildren=function(w,C){for(var A=C?w._current._firstChild:w._current._lastChild;A!==null;){var _=x.traversal_filter(w,A);if(_===g.FilterResult.Accept)return w._current=A,A;if(_===g.FilterResult.Skip){var M=C?A._firstChild:A._lastChild;if(M!==null){A=M;continue}}for(;A!==null;){var P=C?A._nextSibling:A._previousSibling;if(P!==null){A=P;break}var E=A._parent;if(E===null||E===w._root||E===w._current)return null;A=E}}return null},m.treeWalker_traverseSiblings=function(w,C){var A=w._current;if(A===w._root)return null;for(;;){for(var _=C?A._nextSibling:A._previousSibling;_!==null;){A=_;var M=x.traversal_filter(w,A);if(M===g.FilterResult.Accept)return w._current=A,A;_=C?A._firstChild:A._lastChild,M!==g.FilterResult.Reject&&_!==null||(_=C?A._nextSibling:A._previousSibling)}if((A=A._parent)===null||A===w._root||x.traversal_filter(w,A)===g.FilterResult.Accept)return null}}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),m.nonEntityAmpersandRegex=/&(?![A-Za-z]+;|#\d+;)/g},function(d,m,f){f(89),f(74);var g,x=this&&this.__extends||(g=function(P,E){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,B){R.__proto__=B}||function(R,B){for(var z in B)B.hasOwnProperty(z)&&(R[z]=B[z])})(P,E)},function(P,E){function R(){this.constructor=P}g(P,E),P.prototype=E===null?Object.create(E):(R.prototype=E.prototype,new R)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(2),C=f(1),A=f(50),_=f(3),M=function(P){function E(R,B){var z=P.call(this,R)||this;return z._indentation={},z._lengthToLastNewline=0,z._writerOptions=w.applyDefaults(B,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),z}return x(E,P),E.prototype.serialize=function(R){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},R.nodeType!==C.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(R,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},E.prototype.declaration=function(R,B,z){this._beginLine(),this._refs.markup+='<?xml version="'+R+'"',B!==void 0&&(this._refs.markup+=' encoding="'+B+'"'),z!==void 0&&(this._refs.markup+=' standalone="'+(z?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},E.prototype.docType=function(R,B,z){this._beginLine(),this._refs.markup+=B&&z?"<!DOCTYPE "+R+' PUBLIC "'+B+'" "'+z+'">':B?"<!DOCTYPE "+R+' PUBLIC "'+B+'">':z?"<!DOCTYPE "+R+' SYSTEM "'+z+'">':"<!DOCTYPE "+R+">",this._endLine()},E.prototype.openTagBegin=function(R){this._beginLine(),this._refs.markup+="<"+R},E.prototype.openTagEnd=function(R,B,z){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!B&&!z){for(var F=!0,I=!0,L=this.currentNode.firstChild,W=0,G=0;L;){if(_.Guard.isExclusiveTextNode(L))G++;else{if(!_.Guard.isCDATASectionNode(L)){F=!1,I=!1;break}W++}L.data!==""&&(I=!1),L=L.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&F&&(W<=1&&G===0||W===0),this._refs.emptyNode=I}(z||B||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+R+">":this._refs.markup+=z?" />":B||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},E.prototype.closeTag=function(R){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+R+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},E.prototype.attribute=function(R,B){var z=R+'="'+B+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+z.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+z):this._refs.markup+=" "+z},E.prototype.text=function(R){R!==""&&(this._beginLine(),this._refs.markup+=R,this._endLine())},E.prototype.cdata=function(R){R!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+R+"]]>",this._endLine())},E.prototype.comment=function(R){this._beginLine(),this._refs.markup+="<!--"+R+"-->",this._endLine()},E.prototype.instruction=function(R,B){this._beginLine(),this._refs.markup+="<?"+(B===""?R:R+" "+B)+"?>",this._endLine()},E.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},E.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},E.prototype._indent=function(R){if(R<=0)return"";if(this._indentation[R]!==void 0)return this._indentation[R];var B=this._writerOptions.indent.repeat(R);return this._indentation[R]=B,B},E}(A.BaseWriter);m.XMLWriter=M},function(d,m,f){var g=f(47),x=f(35);d.exports="".repeat||function(w){var C=String(x(this)),A="",_=g(w);if(_<0||_==1/0)throw RangeError("Wrong number of repetitions");for(;_>0;(_>>>=1)&&(C+=C))1&_&&(A+=C);return A}},function(d,m,f){f(31),f(32),f(33),f(19),f(178),f(20),f(22),f(23);var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)}),w=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(67),A=f(2),_=function(M){function P(E,R){var B=M.call(this,E)||this;return B._writerOptions=A.applyDefaults(R,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),B}return x(P,M),P.prototype.serialize=function(E){var R=A.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),B=new C.ObjectWriter(this._builderOptions,R).serialize(E);return this._beginLine(this._writerOptions,0)+this._convertObject(B,this._writerOptions)},P.prototype._convertObject=function(E,R,B){var z,F,I=this;B===void 0&&(B=0);var L="",W=this._isLeafNode(E);if(A.isArray(E)){L+="[";var G=E.length,q=0;try{for(var K=w(E),Z=K.next();!Z.done;Z=K.next()){var J=Z.value;L+=this._endLine(R,B+1)+this._beginLine(R,B+1)+this._convertObject(J,R,B+1),q<G-1&&(L+=","),q++}}catch(me){z={error:me}}finally{try{Z&&!Z.done&&(F=K.return)&&F.call(K)}finally{if(z)throw z.error}}L+=this._endLine(R,B)+this._beginLine(R,B),L+="]"}else if(A.isObject(E)){L+="{";var te=A.objectLength(E),Q=0;A.forEachObject(E,function(me,Xe){W&&R.prettyPrint?L+=" ":L+=I._endLine(R,B+1)+I._beginLine(R,B+1),L+=I._key(me),R.prettyPrint&&(L+=" "),L+=I._convertObject(Xe,R,B+1),Q<te-1&&(L+=","),Q++},this),W&&R.prettyPrint?L+=" ":L+=this._endLine(R,B)+this._beginLine(R,B),L+="}"}else L+=this._val(E);return L},P.prototype._beginLine=function(E,R){if(!E.prettyPrint)return"";var B=E.offset+R+1;return B>0?new Array(B).join(E.indent):""},P.prototype._endLine=function(E,R){return E.prettyPrint?E.newline:""},P.prototype._key=function(E){return'"'+E+'":'},P.prototype._val=function(E){return JSON.stringify(E)},P.prototype._isLeafNode=function(E){return this._descendantCount(E)<=1},P.prototype._descendantCount=function(E,R){var B=this;return R===void 0&&(R=0),A.isArray(E)?A.forEachArray(E,function(z){return R+=B._descendantCount(z,R)},this):A.isObject(E)?A.forEachObject(E,function(z,F){return R+=B._descendantCount(F,R)},this):R++,R},P}(f(50).BaseWriter);m.JSONWriter=_},function(d,m,f){f(31),f(32),f(33),f(19),f(178),f(89),f(20),f(22),f(23);var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)}),w=this&&this.__values||function(M){var P=typeof Symbol=="function"&&Symbol.iterator,E=P&&M[P],R=0;if(E)return E.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&R>=M.length&&(M=void 0),{value:M&&M[R++],done:!M}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var C=f(67),A=f(2),_=function(M){function P(E,R){var B=M.call(this,E)||this;if(B._writerOptions=A.applyDefaults(R,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),B._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(B._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return B}return x(P,M),P.prototype.serialize=function(E){var R=A.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),B=new C.ObjectWriter(this._builderOptions,R).serialize(E),z=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(B,this._writerOptions,0);return z.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(z=z.slice(0,-this._writerOptions.newline.length)),z},P.prototype._convertObject=function(E,R,B,z){var F,I,L=this;z===void 0&&(z=!1);var W="";if(A.isArray(E))try{for(var G=w(E),q=G.next();!q.done;q=G.next()){var K=q.value;W+=this._beginLine(R,B,!0),A.isObject(K)?A.isEmpty(K)?W+='""'+this._endLine(R):W+=this._convertObject(K,R,B,!0):W+=this._val(K)+this._endLine(R)}}catch(Z){F={error:Z}}finally{try{q&&!q.done&&(I=G.return)&&I.call(G)}finally{if(F)throw F.error}}else A.forEachObject(E,function(Z,J){z?(W+=L._key(Z),z=!1):W+=L._beginLine(R,B)+L._key(Z),A.isObject(J)?A.isEmpty(J)?W+=' ""'+L._endLine(R):W+=L._endLine(R)+L._convertObject(J,R,B+1):W+=" "+L._val(J)+L._endLine(R)},this);return W},P.prototype._beginLine=function(E,R,B){B===void 0&&(B=!1);var z=E.offset+R+1,F=new Array(z).join(E.indent);return B?F.substr(0,F.length-2)+"-"+F.substr(-1,1):F},P.prototype._endLine=function(E){return E.newline},P.prototype._key=function(E){return'"'+E+'":'},P.prototype._val=function(E){return JSON.stringify(E)},P}(f(50).BaseWriter);m.YAMLWriter=_},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0}),f(110).dom.setFeatures(!0);var g=f(110);m.DOMImplementation=g.DOMImplementation;var x=f(272);m.DOMParser=x.DOMParser;var w=f(275);m.XMLSerializer=w.XMLSerializer},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(3),x=f(0),w=function(){function C(){}return C.prototype.before=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var M=g.Cast.asNode(this),P=M._parent;if(P!==null){for(var E=M._previousSibling,R=!0;R&&E;){R=!1;for(var B=0;B<A.length;B++){var z=A[B];if(z===E){E=E._previousSibling,R=!0;break}}}var F=x.parentNode_convertNodesIntoANode(A,M._nodeDocument);E=E===null?P._firstChild:E._nextSibling,x.mutation_preInsert(F,P,E)}},C.prototype.after=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var M=g.Cast.asNode(this),P=M._parent;if(P){for(var E=M._nextSibling,R=!0;R&&E;){R=!1;for(var B=0;B<A.length;B++){var z=A[B];if(z===E){E=E._nextSibling,R=!0;break}}}var F=x.parentNode_convertNodesIntoANode(A,M._nodeDocument);x.mutation_preInsert(F,P,E)}},C.prototype.replaceWith=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var M=g.Cast.asNode(this),P=M._parent;if(P){for(var E=M._nextSibling,R=!0;R&&E;){R=!1;for(var B=0;B<A.length;B++){var z=A[B];if(z===E){E=E._nextSibling,R=!0;break}}}var F=x.parentNode_convertNodesIntoANode(A,M._nodeDocument);M._parent===P?x.mutation_replace(M,F,P):x.mutation_preInsert(F,P,E)}},C.prototype.remove=function(){var A=g.Cast.asNode(this),_=A._parent;_&&x.mutation_remove(A,_)},C}();m.ChildNodeImpl=w},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=function(){};m.DocumentOrShadowRootImpl=g},function(d,m,f){var g=this&&this.__values||function(_){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&_[M],E=0;if(P)return P.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&E>=_.length&&(_=void 0),{value:_&&_[E++],done:!_}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(6),w=f(3),C=f(7),A=function(){function _(M){this._nodeList=[],this._recordQueue=[],this._callback=M;var P=x.dom.window;C.set.append(P._mutationObservers,this)}return _.prototype.observe=function(M,P){var E,R;if((P=P||{childList:!1,subtree:!1}).attributeOldValue===void 0&&P.attributeFilter===void 0||P.attributes!==void 0||(P.attributes=!0),P.characterDataOldValue!==void 0&&P.characterData===void 0&&(P.characterData=!0),!P.childList&&!P.attributes&&!P.characterData)throw new TypeError;if(P.attributeOldValue&&!P.attributes)throw new TypeError;if(P.attributeFilter!==void 0&&!P.attributes)throw new TypeError;if(P.characterDataOldValue&&!P.characterData)throw new TypeError;var B=!1,z=P,F=function(G){var q,K;if(G.observer===I){B=!0;try{for(var Z=(q=void 0,g(I._nodeList)),J=Z.next();!J.done;J=Z.next()){var te=J.value;C.list.remove(te._registeredObserverList,function(Q){return w.Guard.isTransientRegisteredObserver(Q)&&Q.source===G})}}catch(Q){q={error:Q}}finally{try{J&&!J.done&&(K=Z.return)&&K.call(Z)}finally{if(q)throw q.error}}G.options=z}},I=this;try{for(var L=g(M._registeredObserverList),W=L.next();!W.done;W=L.next())F(W.value)}catch(G){E={error:G}}finally{try{W&&!W.done&&(R=L.return)&&R.call(L)}finally{if(E)throw E.error}}B||(M._registeredObserverList.push({observer:this,options:P}),this._nodeList.push(M))},_.prototype.disconnect=function(){var M,P,E=this;try{for(var R=g(this._nodeList),B=R.next();!B.done;B=R.next()){var z=B.value;C.list.remove(z._registeredObserverList,function(F){return F.observer===E})}}catch(F){M={error:F}}finally{try{B&&!B.done&&(P=R.return)&&P.call(R)}finally{if(M)throw M.error}}this._recordQueue=[]},_.prototype.takeRecords=function(){var M=this._recordQueue;return this._recordQueue=[],M},_}();m.MutationObserverImpl=A},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(3),x=function(){function w(){}return Object.defineProperty(w.prototype,"previousElementSibling",{get:function(){for(var C=g.Cast.asNode(this)._previousSibling;C;){if(g.Guard.isElementNode(C))return C;C=C._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"nextElementSibling",{get:function(){for(var C=g.Cast.asNode(this)._nextSibling;C;){if(g.Guard.isElementNode(C))return C;C=C._nextSibling}return null},enumerable:!0,configurable:!0}),w}();m.NonDocumentTypeChildNodeImpl=x},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(3),x=f(0),w=function(){function C(){}return C.prototype.getElementById=function(A){for(var _=x.tree_getFirstDescendantNode(g.Cast.asNode(this),!1,!1,function(M){return g.Guard.isElementNode(M)});_!==null;){if(_._uniqueIdentifier===A)return _;_=x.tree_getNextDescendantNode(g.Cast.asNode(this),_,!1,!1,function(M){return g.Guard.isElementNode(M)})}return null},C}();m.NonElementParentNodeImpl=w},function(d,m,f){var g=this&&this.__values||function(A){var _=typeof Symbol=="function"&&Symbol.iterator,M=_&&A[_],P=0;if(M)return M.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&P>=A.length&&(A=void 0),{value:A&&A[P++],done:!A}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(3),w=f(0),C=function(){function A(){}return Object.defineProperty(A.prototype,"children",{get:function(){return w.create_htmlCollection(x.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"firstElementChild",{get:function(){for(var _=x.Cast.asNode(this)._firstChild;_;){if(x.Guard.isElementNode(_))return _;_=_._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"lastElementChild",{get:function(){for(var _=x.Cast.asNode(this)._lastChild;_;){if(x.Guard.isElementNode(_))return _;_=_._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"childElementCount",{get:function(){var _,M,P=0;try{for(var E=g(x.Cast.asNode(this)._children),R=E.next();!R.done;R=E.next()){var B=R.value;x.Guard.isElementNode(B)&&P++}}catch(z){_={error:z}}finally{try{R&&!R.done&&(M=E.return)&&M.call(E)}finally{if(_)throw _.error}}return P},enumerable:!0,configurable:!0}),A.prototype.prepend=function(){for(var _=[],M=0;M<arguments.length;M++)_[M]=arguments[M];var P=x.Cast.asNode(this),E=w.parentNode_convertNodesIntoANode(_,P._nodeDocument);w.mutation_preInsert(E,P,P._firstChild)},A.prototype.append=function(){for(var _=[],M=0;M<arguments.length;M++)_[M]=arguments[M];var P=x.Cast.asNode(this),E=w.parentNode_convertNodesIntoANode(_,P._nodeDocument);w.mutation_append(E,P)},A.prototype.querySelector=function(_){var M=x.Cast.asNode(this),P=w.selectors_scopeMatchASelectorsString(_,M);return P.length===0?null:P[0]},A.prototype.querySelectorAll=function(_){var M=x.Cast.asNode(this),P=w.selectors_scopeMatchASelectorsString(_,M);return w.create_nodeListStatic(M,P)},A}();m.ParentNodeImpl=C},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(0),x=function(){function w(){}return Object.defineProperty(w.prototype,"_name",{get:function(){return this.__name||""},set:function(C){this.__name=C},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(C){this.__assignedSlot=C},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"assignedSlot",{get:function(){return g.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),w}();m.SlotableImpl=x},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(102),C=f(9),A=f(3),_=function(M){function P(E){var R=M.call(this)||this;if(A.Guard.isDocumentTypeNode(E.startContainer)||A.Guard.isAttrNode(E.startContainer)||A.Guard.isDocumentTypeNode(E.endContainer)||A.Guard.isAttrNode(E.endContainer))throw new C.InvalidNodeTypeError;return R._start=[E.startContainer,E.startOffset],R._end=[E.endContainer,E.endOffset],R}return x(P,M),P}(w.AbstractRangeImpl);m.StaticRangeImpl=_},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(273);m.DOMParser=g.DOMParserImpl},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(0),x=f(274),w=function(){function C(){}return C.prototype.parseFromString=function(A,_){if(_==="text/html")throw new Error("HTML parser not implemented.");try{return(M=new x.XMLParserImpl().parse(A))._contentType=_,M}catch(B){var M,P="http://www.mozilla.org/newlayout/xml/parsererror.xml",E=(M=g.create_xmlDocument()).createElementNS(P,"parsererror"),R=M.createElementNS(P,"error");return R.setAttribute("message",B.message),E.appendChild(R),M.appendChild(E),M}},C}();m.DOMParserImpl=w},function(d,m,f){var g=this&&this.__read||function(E,R){var B=typeof Symbol=="function"&&E[Symbol.iterator];if(!B)return E;var z,F,I=B.call(E),L=[];try{for(;(R===void 0||R-- >0)&&!(z=I.next()).done;)L.push(z.value)}catch(W){F={error:W}}finally{try{z&&!z.done&&(B=I.return)&&B.call(I)}finally{if(F)throw F.error}}return L},x=this&&this.__values||function(E){var R=typeof Symbol=="function"&&Symbol.iterator,B=R&&E[R],z=0;if(B)return B.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&z>=E.length&&(E=void 0),{value:E&&E[z++],done:!E}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var w=f(180),C=f(111),A=f(7),_=f(0),M=f(69),P=function(){function E(){}return E.prototype.parse=function(R){for(var B,z,F,I,L=new w.XMLStringLexer(R,{skipWhitespaceOnlyText:!0}),W=_.create_document(),G=W,q=L.nextToken();q.type!==C.TokenType.EOF;){switch(q.type){case C.TokenType.Declaration:var K=q;if(K.version!=="1.0")throw new Error("Invalid xml version: "+K.version);break;case C.TokenType.DocType:var Z=q;if(!_.xml_isPubidChar(Z.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!_.xml_isLegalChar(Z.sysId)||Z.sysId.indexOf('"')!==-1&&Z.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");G.appendChild(W.implementation.createDocumentType(Z.name,Z.pubId,Z.sysId));break;case C.TokenType.CDATA:var J=q;if(!_.xml_isLegalChar(J.data)||J.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");G.appendChild(W.createCDATASection(J.data));break;case C.TokenType.Comment:var te=q;if(!_.xml_isLegalChar(te.data)||te.data.indexOf("--")!==-1||te.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");G.appendChild(W.createComment(te.data));break;case C.TokenType.PI:var Q=q;if(Q.target.indexOf(":")!==-1||/^xml$/i.test(Q.target))throw new Error("Processing instruction target contains invalid characters.");if(!_.xml_isLegalChar(Q.data)||Q.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");G.appendChild(W.createProcessingInstruction(Q.target,Q.data));break;case C.TokenType.Text:var me=q;if(!_.xml_isLegalChar(me.data))throw new Error("Text data contains invalid characters.");G.appendChild(W.createTextNode(this._decodeText(me.data)));break;case C.TokenType.Element:var Xe=q,Ve=g(_.namespace_extractQName(Xe.name),2),Ye=Ve[0],qe=Ve[1];if(qe.indexOf(":")!==-1||!_.xml_isName(qe))throw new Error("Node local name contains invalid characters.");if(Ye==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var et=G.lookupNamespaceURI(Ye),je={};try{for(var Ke=(B=void 0,x(Xe.attributes)),Je=Ke.next();!Je.done;Je=Ke.next()){var at=g(Je.value,2),nt=at[0],ct=at[1];if(nt==="xmlns")et=ct;else{var pt=g(_.namespace_extractQName(nt),2),rt=pt[0],ht=pt[1];rt==="xmlns"&&(ht===Ye&&(et=ct),je[ht]=ct)}}}catch(ze){B={error:ze}}finally{try{Je&&!Je.done&&(z=Ke.return)&&z.call(Ke)}finally{if(B)throw B.error}}var yt=et!==null?W.createElementNS(et,Xe.name):W.createElement(Xe.name);G.appendChild(yt);var wt=new M.LocalNameSet;try{for(var ft=(F=void 0,x(Xe.attributes)),He=ft.next();!He.done;He=ft.next()){var le=g(He.value,2),be=(nt=le[0],ct=le[1],g(_.namespace_extractQName(nt),2)),we=(rt=be[0],ht=be[1],null);if(rt==="xmlns"||rt===null&&ht==="xmlns"?we=A.namespace.XMLNS:(we=yt.lookupNamespaceURI(rt))!==null&&yt.isDefaultNamespace(we)?we=null:we===null&&rt!==null&&(we=je[rt]||null),wt.has(we,ht))throw new Error("Element contains duplicate attributes.");if(wt.set(we,ht),we===A.namespace.XMLNS&&ct===A.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(ht.indexOf(":")!==-1||!_.xml_isName(ht))throw new Error("Attribute local name contains invalid characters.");if(rt==="xmlns"&&ct==="")throw new Error("Empty XML namespace is not allowed.");we!==null?yt.setAttributeNS(we,nt,this._decodeAttributeValue(ct)):yt.setAttribute(nt,this._decodeAttributeValue(ct))}}catch(ze){F={error:ze}}finally{try{He&&!He.done&&(I=ft.return)&&I.call(ft)}finally{if(F)throw F.error}}Xe.selfClosing||(G=yt);break;case C.TokenType.ClosingTag:if(q.name!==G.nodeName)throw new Error("Closing tag name does not match opening tag name.");G._parent&&(G=G._parent)}q=L.nextToken()}return W},E.prototype._decodeText=function(R){return R==null?R:R.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},E.prototype._decodeAttributeValue=function(R){return R==null?R:R.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},E}();m.XMLParserImpl=P},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(276);m.XMLSerializer=g.XMLSerializerImpl},function(d,m,f){var g=this&&this.__values||function(E){var R=typeof Symbol=="function"&&Symbol.iterator,B=R&&E[R],z=0;if(B)return B.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&z>=E.length&&(E=void 0),{value:E&&E[z++],done:!E}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var x=f(1),w=f(69),C=f(95),A=f(9),_=f(7),M=f(0),P=function(){function E(){}return E.prototype.serializeToString=function(R){return this._xmlSerialization(R,!1)},E.prototype._xmlSerialization=function(R,B){if(R._nodeDocument===void 0||R._nodeDocument._hasNamespaces){var z=new C.NamespacePrefixMap;z.set("xml",_.namespace.XML);try{return this._serializeNodeNS(R,null,z,{value:1},B)}catch{throw new A.InvalidStateError}}else try{return this._serializeNode(R,B)}catch{throw new A.InvalidStateError}},E.prototype._serializeNodeNS=function(R,B,z,F,I){switch(R.nodeType){case x.NodeType.Element:return this._serializeElementNS(R,B,z,F,I);case x.NodeType.Document:return this._serializeDocumentNS(R,B,z,F,I);case x.NodeType.Comment:return this._serializeComment(R,I);case x.NodeType.Text:return this._serializeText(R,I);case x.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(R,B,z,F,I);case x.NodeType.DocumentType:return this._serializeDocumentType(R,I);case x.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(R,I);case x.NodeType.CData:return this._serializeCData(R,I);default:throw new Error("Unknown node type: "+R.nodeType)}},E.prototype._serializeNode=function(R,B){switch(R.nodeType){case x.NodeType.Element:return this._serializeElement(R,B);case x.NodeType.Document:return this._serializeDocument(R,B);case x.NodeType.Comment:return this._serializeComment(R,B);case x.NodeType.Text:return this._serializeText(R,B);case x.NodeType.DocumentFragment:return this._serializeDocumentFragment(R,B);case x.NodeType.DocumentType:return this._serializeDocumentType(R,B);case x.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(R,B);case x.NodeType.CData:return this._serializeCData(R,B);default:throw new Error("Unknown node type: "+R.nodeType)}},E.prototype._serializeElementNS=function(R,B,z,F,I){var L,W;if(I&&(R.localName.indexOf(":")!==-1||!M.xml_isName(R.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var G="<",q="",K=!1,Z=!1,J=z.copy(),te={},Q=this._recordNamespaceInformation(R,J,te),me=B,Xe=R.namespaceURI;if(me===Xe)Q!==null&&(Z=!0),G+=q=Xe===_.namespace.XML?"xml:"+R.localName:R.localName;else{var Ve=R.prefix,Ye=null;if(Ve===null&&Xe===Q||(Ye=J.get(Ve,Xe)),Ve==="xmlns"){if(I)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");Ye=Ve}Ye!==null?(q=Ye+":"+R.localName,Q!==null&&Q!==_.namespace.XML&&(me=Q||null),G+=q):Ve!==null?(Ve in te&&(Ve=this._generatePrefix(Xe,J,F)),J.set(Ve,Xe),G+=q+=Ve+":"+R.localName,G+=" xmlns:"+Ve+'="'+this._serializeAttributeValue(Xe,I)+'"',Q!==null&&(me=Q||null)):Q===null||Q!==null&&Q!==Xe?(Z=!0,me=Xe,G+=q+=R.localName,G+=' xmlns="'+this._serializeAttributeValue(Xe,I)+'"'):(me=Xe,G+=q+=R.localName)}G+=this._serializeAttributesNS(R,J,F,te,Z,I);var qe=Xe===_.namespace.HTML;if(qe&&R.childNodes.length===0&&E._VoidElementNames.has(R.localName)?(G+=" /",K=!0):qe||R.childNodes.length!==0||(G+="/",K=!0),G+=">",K)return G;if(!(qe&&R.localName==="template"))try{for(var et=g(R._children||R.childNodes),je=et.next();!je.done;je=et.next()){var Ke=je.value;G+=this._serializeNodeNS(Ke,me,J,F,I)}}catch(Je){L={error:Je}}finally{try{je&&!je.done&&(W=et.return)&&W.call(et)}finally{if(L)throw L.error}}return G+="</"+q+">"},E.prototype._serializeDocumentNS=function(R,B,z,F,I){var L,W;if(I&&R.documentElement===null)throw new Error("Missing document element (well-formed required).");var G="";try{for(var q=g(R._children||R.childNodes),K=q.next();!K.done;K=q.next()){var Z=K.value;G+=this._serializeNodeNS(Z,B,z,F,I)}}catch(J){L={error:J}}finally{try{K&&!K.done&&(W=q.return)&&W.call(q)}finally{if(L)throw L.error}}return G},E.prototype._serializeComment=function(R,B){if(B&&(!M.xml_isLegalChar(R.data)||R.data.indexOf("--")!==-1||R.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+R.data+"-->"},E.prototype._serializeText=function(R,B){if(B&&!M.xml_isLegalChar(R.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var z="",F=0;F<R.data.length;F++){var I=R.data[F];z+=I==="&"?"&amp;":I==="<"?"&lt;":I===">"?"&gt;":I}return z},E.prototype._serializeDocumentFragmentNS=function(R,B,z,F,I){var L,W,G="";try{for(var q=g(R._children||R.childNodes),K=q.next();!K.done;K=q.next()){var Z=K.value;G+=this._serializeNodeNS(Z,B,z,F,I)}}catch(J){L={error:J}}finally{try{K&&!K.done&&(W=q.return)&&W.call(q)}finally{if(L)throw L.error}}return G},E.prototype._serializeDocumentType=function(R,B){if(B&&!M.xml_isPubidChar(R.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(B&&(!M.xml_isLegalChar(R.systemId)||R.systemId.indexOf('"')!==-1&&R.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return R.publicId&&R.systemId?"<!DOCTYPE "+R.name+' PUBLIC "'+R.publicId+'" "'+R.systemId+'">':R.publicId?"<!DOCTYPE "+R.name+' PUBLIC "'+R.publicId+'">':R.systemId?"<!DOCTYPE "+R.name+' SYSTEM "'+R.systemId+'">':"<!DOCTYPE "+R.name+">"},E.prototype._serializeProcessingInstruction=function(R,B){if(B&&(R.target.indexOf(":")!==-1||/^xml$/i.test(R.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(B&&(!M.xml_isLegalChar(R.data)||R.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(R.data===""?R.target:R.target+" "+R.data)+"?>"},E.prototype._serializeCData=function(R,B){if(B&&R.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+R.data+"]]>"},E.prototype._serializeAttributesNS=function(R,B,z,F,I,L){var W,G,q="",K=L?new w.LocalNameSet:void 0;try{for(var Z=g(R.attributes),J=Z.next();!J.done;J=Z.next()){var te=J.value;if(I||L||te.namespaceURI!==null){if(L&&K&&K.has(te.namespaceURI,te.localName))throw new Error("Element contains duplicate attributes (well-formed required).");L&&K&&K.set(te.namespaceURI,te.localName);var Q=te.namespaceURI,me=null;if(Q!==null)if(me=B.get(te.prefix,Q),Q===_.namespace.XMLNS){if(te.value===_.namespace.XML||te.prefix===null&&I||te.prefix!==null&&(!(te.localName in F)||F[te.localName]!==te.value)&&B.has(te.localName,te.value))continue;if(L&&te.value===_.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(L&&te.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");te.prefix==="xmlns"&&(me="xmlns")}else me===null&&(q+=" xmlns:"+(me=te.prefix===null||B.hasPrefix(te.prefix)&&!B.has(te.prefix,Q)?this._generatePrefix(Q,B,z):te.prefix)+'="'+this._serializeAttributeValue(Q,L)+'"');if(q+=" ",me!==null&&(q+=me+":"),L&&(te.localName.indexOf(":")!==-1||!M.xml_isName(te.localName)||te.localName==="xmlns"&&Q===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");q+=te.localName+'="'+this._serializeAttributeValue(te.value,L)+'"'}else q+=" "+te.localName+'="'+this._serializeAttributeValue(te.value,L)+'"'}}catch(Xe){W={error:Xe}}finally{try{J&&!J.done&&(G=Z.return)&&G.call(Z)}finally{if(W)throw W.error}}return q},E.prototype._recordNamespaceInformation=function(R,B,z){var F,I,L=null;try{for(var W=g(R.attributes),G=W.next();!G.done;G=W.next()){var q=G.value,K=q.namespaceURI,Z=q.prefix;if(K===_.namespace.XMLNS){if(Z===null){L=q.value;continue}var J=q.localName,te=q.value;if(te===_.namespace.XML||(te===""&&(te=null),B.has(J,te)))continue;B.set(J,te),z[J]=te||""}}}catch(Q){F={error:Q}}finally{try{G&&!G.done&&(I=W.return)&&I.call(W)}finally{if(F)throw F.error}}return L},E.prototype._generatePrefix=function(R,B,z){var F="ns"+z.value;return z.value++,B.set(F,R),F},E.prototype._serializeAttributeValue=function(R,B){if(B&&R!==null&&!M.xml_isLegalChar(R))throw new Error("Invalid characters in attribute value.");if(R===null)return"";for(var z="",F=0;F<R.length;F++){var I=R[F];z+=I==='"'?"&quot;":I==="&"?"&amp;":I==="<"?"&lt;":I===">"?"&gt;":I}return z},E.prototype._serializeElement=function(R,B){var z,F;if(B&&(R.localName.indexOf(":")!==-1||!M.xml_isName(R.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var I=!1,L=R.localName,W="<"+L;if(W+=this._serializeAttributes(R,B),R._children.size===0&&(W+="/",I=!0),W+=">",I)return W;try{for(var G=g(R._children),q=G.next();!q.done;q=G.next()){var K=q.value;W+=this._serializeNode(K,B)}}catch(Z){z={error:Z}}finally{try{q&&!q.done&&(F=G.return)&&F.call(G)}finally{if(z)throw z.error}}return W+="</"+L+">"},E.prototype._serializeDocument=function(R,B){var z,F;if(B&&R.documentElement===null)throw new Error("Missing document element (well-formed required).");var I="";try{for(var L=g(R._children),W=L.next();!W.done;W=L.next()){var G=W.value;I+=this._serializeNode(G,B)}}catch(q){z={error:q}}finally{try{W&&!W.done&&(F=L.return)&&F.call(L)}finally{if(z)throw z.error}}return I},E.prototype._serializeDocumentFragment=function(R,B){var z,F,I="";try{for(var L=g(R._children),W=L.next();!W.done;W=L.next()){var G=W.value;I+=this._serializeNode(G,B)}}catch(q){z={error:q}}finally{try{W&&!W.done&&(F=L.return)&&F.call(L)}finally{if(z)throw z.error}}return I},E.prototype._serializeAttributes=function(R,B){var z,F,I="",L=B?{}:void 0;try{for(var W=g(R.attributes),G=W.next();!G.done;G=W.next()){var q=G.value;if(B&&L&&q.localName in L)throw new Error("Element contains duplicate attributes (well-formed required).");if(B&&L&&(L[q.localName]=!0),B&&(q.localName.indexOf(":")!==-1||!M.xml_isName(q.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");I+=" "+q.localName+'="'+this._serializeAttributeValue(q.value,B)+'"'}}catch(K){z={error:K}}finally{try{G&&!G.done&&(F=W.return)&&F.call(W)}finally{if(z)throw z.error}}return I},E._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),E}();m.XMLSerializerImpl=P},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(278);m.XMLReader=g.XMLReader;var x=f(112);m.ObjectReader=x.ObjectReader;var w=f(281);m.JSONReader=w.JSONReader;var C=f(282);m.YAMLReader=C.YAMLReader},function(d,m,f){f(31),f(32),f(33),f(19),f(65),f(20),f(22),f(23);var g,x=this&&this.__extends||(g=function(B,z){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,I){F.__proto__=I}||function(F,I){for(var L in I)I.hasOwnProperty(L)&&(F[L]=I[L])})(B,z)},function(B,z){function F(){this.constructor=B}g(B,z),B.prototype=z===null?Object.create(z):(F.prototype=z.prototype,new F)}),w=this&&this.__read||function(B,z){var F=typeof Symbol=="function"&&B[Symbol.iterator];if(!F)return B;var I,L,W=F.call(B),G=[];try{for(;(z===void 0||z-- >0)&&!(I=W.next()).done;)G.push(I.value)}catch(q){L={error:q}}finally{try{I&&!I.done&&(F=W.return)&&F.call(W)}finally{if(L)throw L.error}}return G},C=this&&this.__values||function(B){var z=typeof Symbol=="function"&&Symbol.iterator,F=z&&B[z],I=0;if(F)return F.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&I>=B.length&&(B=void 0),{value:B&&B[I++],done:!B}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(m,"__esModule",{value:!0});var A=f(180),_=f(111),M=f(1),P=f(7),E=f(0),R=function(B){function z(){return B!==null&&B.apply(this,arguments)||this}return x(z,B),z.prototype._parse=function(F,I){for(var L,W,G,q,K=new A.XMLStringLexer(I,{skipWhitespaceOnlyText:this._builderOptions.skipWhitespaceOnlyText}),Z=F,J=F,te=K.nextToken();te.type!==_.TokenType.EOF;){switch(te.type){case _.TokenType.Declaration:var Q=te,me=this.sanitize(Q.version);if(me!=="1.0")throw new Error("Invalid xml version: "+me);var Xe={version:me};Q.encoding&&(Xe.encoding=this.sanitize(Q.encoding)),Q.standalone&&(Xe.standalone=this.sanitize(Q.standalone)==="yes"),J.set(Xe);break;case _.TokenType.DocType:var Ve=te;J=this.docType(J,this.sanitize(Ve.name),this.sanitize(Ve.pubId),this.sanitize(Ve.sysId))||J;break;case _.TokenType.CDATA:var Ye=te;J=this.cdata(J,this.sanitize(Ye.data))||J;break;case _.TokenType.Comment:var qe=te;J=this.comment(J,this.sanitize(qe.data))||J;break;case _.TokenType.PI:var et=te;J=this.instruction(J,this.sanitize(et.target),this.sanitize(et.data))||J;break;case _.TokenType.Text:if(J.node.nodeType===M.NodeType.Document)break;var je=te;J=this.text(J,this._decodeText(this.sanitize(je.data)))||J;break;case _.TokenType.Element:var Ke=te,Je=this.sanitize(Ke.name),at=w(E.namespace_extractQName(Je),1)[0],nt=J.node.lookupNamespaceURI(at),ct={};try{for(var pt=(L=void 0,C(Ke.attributes)),rt=pt.next();!rt.done;rt=pt.next()){var ht=w(rt.value,2),yt=ht[0],wt=ht[1];if(yt=this.sanitize(yt),wt=this.sanitize(wt),yt==="xmlns")nt=wt;else{var ft=w(E.namespace_extractQName(yt),2),He=ft[0],le=ft[1];He==="xmlns"&&(le===at&&(nt=wt),ct[le]=wt)}}}catch(lt){L={error:lt}}finally{try{rt&&!rt.done&&(W=pt.return)&&W.call(pt)}finally{if(L)throw L.error}}var be=nt!==null?this.element(J,nt,Je):this.element(J,void 0,Je);if(be===void 0)break;J.node===F.node&&(Z=be);try{for(var we=(G=void 0,C(Ke.attributes)),ze=we.next();!ze.done;ze=we.next()){var Ze=w(ze.value,2);yt=Ze[0],wt=Ze[1],yt=this.sanitize(yt),wt=this.sanitize(wt);var Qe=w(E.namespace_extractQName(yt),2),st=(He=Qe[0],le=Qe[1],null);He==="xmlns"||He===null&&le==="xmlns"?st=P.namespace.XMLNS:(st=be.node.lookupNamespaceURI(He))!==null&&be.node.isDefaultNamespace(st)?st=null:st===null&&He!==null&&(st=ct[He]||null),st!==null?this.attribute(be,st,yt,this._decodeAttributeValue(wt)):this.attribute(be,void 0,yt,this._decodeAttributeValue(wt))}}catch(lt){G={error:lt}}finally{try{ze&&!ze.done&&(q=we.return)&&q.call(we)}finally{if(G)throw G.error}}Ke.selfClosing||(J=be);break;case _.TokenType.ClosingTag:J.node.parentNode&&(J=J.up())}te=K.nextToken()}return Z},z}(f(75).BaseReader);m.XMLReader=R},function(d,m,f){var g=f(4),x=f(280);g({target:"Object",stat:!0,forced:Object.assign!==x},{assign:x})},function(d,m,f){var g=f(16),x=f(8),w=f(61),C=f(85),A=f(79),_=f(27),M=f(41),P=Object.assign,E=Object.defineProperty;d.exports=!P||x(function(){if(g&&P({b:1},P(E({},"a",{enumerable:!0,get:function(){E(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var R={},B={},z=Symbol();return R[z]=7,"abcdefghijklmnopqrst".split("").forEach(function(F){B[F]=F}),P({},R)[z]!=7||w(P({},B)).join("")!="abcdefghijklmnopqrst"})?function(R,B){for(var z=_(R),F=arguments.length,I=1,L=C.f,W=A.f;F>I;)for(var G,q=M(arguments[I++]),K=L?w(q).concat(L(q)):w(q),Z=K.length,J=0;Z>J;)G=K[J++],g&&!W.call(q,G)||(z[G]=q[G]);return z}:P},function(d,m,f){var g,x=this&&this.__extends||(g=function(A,_){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var E in P)P.hasOwnProperty(E)&&(M[E]=P[E])})(A,_)},function(A,_){function M(){this.constructor=A}g(A,_),A.prototype=_===null?Object.create(_):(M.prototype=_.prototype,new M)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(112),C=function(A){function _(){return A!==null&&A.apply(this,arguments)||this}return x(_,A),_.prototype._parse=function(M,P){return new w.ObjectReader(this._builderOptions).parse(M,JSON.parse(P))},_}(f(75).BaseReader);m.JSONReader=C},function(d,m,f){var g,x=this&&this.__extends||(g=function(M,P){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var B in R)R.hasOwnProperty(B)&&(E[B]=R[B])})(M,P)},function(M,P){function E(){this.constructor=M}g(M,P),M.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});Object.defineProperty(m,"__esModule",{value:!0});var w=f(112),C=f(75),A=f(283),_=function(M){function P(){return M!==null&&M.apply(this,arguments)||this}return x(P,M),P.prototype._parse=function(E,R){var B=A.safeLoad(R);if(B===void 0)throw new Error("Unable to parse YAML document.");return new w.ObjectReader(this._builderOptions).parse(E,B)},P}(C.BaseReader);m.YAMLReader=_},function(d,m,f){var g=f(284);d.exports=g},function(d,m,f){var g=f(285),x=f(304);function w(C){return function(){throw new Error("Function "+C+" is deprecated and cannot be used.")}}d.exports.Type=f(10),d.exports.Schema=f(39),d.exports.FAILSAFE_SCHEMA=f(113),d.exports.JSON_SCHEMA=f(182),d.exports.CORE_SCHEMA=f(181),d.exports.DEFAULT_SAFE_SCHEMA=f(54),d.exports.DEFAULT_FULL_SCHEMA=f(76),d.exports.load=g.load,d.exports.loadAll=g.loadAll,d.exports.safeLoad=g.safeLoad,d.exports.safeLoadAll=g.safeLoadAll,d.exports.dump=x.dump,d.exports.safeDump=x.safeDump,d.exports.YAMLException=f(53),d.exports.MINIMAL_SCHEMA=f(113),d.exports.SAFE_SCHEMA=f(54),d.exports.DEFAULT_SCHEMA=f(76),d.exports.scan=w("scan"),d.exports.parse=w("parse"),d.exports.compose=w("compose"),d.exports.addConstructor=w("addConstructor")},function(d,m,f){var g=f(38),x=f(53),w=f(286),C=f(54),A=f(76),_=Object.prototype.hasOwnProperty,M=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,P=/[\x85\u2028\u2029]/,E=/[,\[\]\{\}]/,R=/^(?:!|!!|![a-z\-]+!)$/i,B=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function z(le){return Object.prototype.toString.call(le)}function F(le){return le===10||le===13}function I(le){return le===9||le===32}function L(le){return le===9||le===32||le===10||le===13}function W(le){return le===44||le===91||le===93||le===123||le===125}function G(le){var be;return 48<=le&&le<=57?le-48:97<=(be=32|le)&&be<=102?be-97+10:-1}function q(le){return le===48?"\0":le===97?"\x07":le===98?"\b":le===116||le===9?"	":le===110?`
`:le===118?"\v":le===102?"\f":le===114?"\r":le===101?"\x1B":le===32?" ":le===34?'"':le===47?"/":le===92?"\\":le===78?"":le===95?"":le===76?"\u2028":le===80?"\u2029":""}function K(le){return le<=65535?String.fromCharCode(le):String.fromCharCode(55296+(le-65536>>10),56320+(le-65536&1023))}for(var Z=new Array(256),J=new Array(256),te=0;te<256;te++)Z[te]=q(te)?1:0,J[te]=q(te);function Q(le,be){this.input=le,this.filename=be.filename||null,this.schema=be.schema||A,this.onWarning=be.onWarning||null,this.legacy=be.legacy||!1,this.json=be.json||!1,this.listener=be.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=le.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function me(le,be){return new x(be,new w(le.filename,le.input,le.position,le.line,le.position-le.lineStart))}function Xe(le,be){throw me(le,be)}function Ve(le,be){le.onWarning&&le.onWarning.call(null,me(le,be))}var Ye={YAML:function(le,be,we){var ze,Ze,Qe;le.version!==null&&Xe(le,"duplication of %YAML directive"),we.length!==1&&Xe(le,"YAML directive accepts exactly one argument"),(ze=/^([0-9]+)\.([0-9]+)$/.exec(we[0]))===null&&Xe(le,"ill-formed argument of the YAML directive"),Ze=parseInt(ze[1],10),Qe=parseInt(ze[2],10),Ze!==1&&Xe(le,"unacceptable YAML version of the document"),le.version=we[0],le.checkLineBreaks=Qe<2,Qe!==1&&Qe!==2&&Ve(le,"unsupported YAML version of the document")},TAG:function(le,be,we){var ze,Ze;we.length!==2&&Xe(le,"TAG directive accepts exactly two arguments"),ze=we[0],Ze=we[1],R.test(ze)||Xe(le,"ill-formed tag handle (first argument) of the TAG directive"),_.call(le.tagMap,ze)&&Xe(le,'there is a previously declared suffix for "'+ze+'" tag handle'),B.test(Ze)||Xe(le,"ill-formed tag prefix (second argument) of the TAG directive"),le.tagMap[ze]=Ze}};function qe(le,be,we,ze){var Ze,Qe,st,lt;if(be<we){if(lt=le.input.slice(be,we),ze)for(Ze=0,Qe=lt.length;Ze<Qe;Ze+=1)(st=lt.charCodeAt(Ze))===9||32<=st&&st<=1114111||Xe(le,"expected valid JSON character");else M.test(lt)&&Xe(le,"the stream contains non-printable characters");le.result+=lt}}function et(le,be,we,ze){var Ze,Qe,st,lt;for(g.isObject(we)||Xe(le,"cannot merge mappings; the provided source object is unacceptable"),st=0,lt=(Ze=Object.keys(we)).length;st<lt;st+=1)Qe=Ze[st],_.call(be,Qe)||(be[Qe]=we[Qe],ze[Qe]=!0)}function je(le,be,we,ze,Ze,Qe,st,lt){var ot,ut;if(Array.isArray(Ze))for(ot=0,ut=(Ze=Array.prototype.slice.call(Ze)).length;ot<ut;ot+=1)Array.isArray(Ze[ot])&&Xe(le,"nested arrays are not supported inside keys"),typeof Ze=="object"&&z(Ze[ot])==="[object Object]"&&(Ze[ot]="[object Object]");if(typeof Ze=="object"&&z(Ze)==="[object Object]"&&(Ze="[object Object]"),Ze=String(Ze),be===null&&(be={}),ze==="tag:yaml.org,2002:merge")if(Array.isArray(Qe))for(ot=0,ut=Qe.length;ot<ut;ot+=1)et(le,be,Qe[ot],we);else et(le,be,Qe,we);else le.json||_.call(we,Ze)||!_.call(be,Ze)||(le.line=st||le.line,le.position=lt||le.position,Xe(le,"duplicated mapping key")),be[Ze]=Qe,delete we[Ze];return be}function Ke(le){var be;(be=le.input.charCodeAt(le.position))===10?le.position++:be===13?(le.position++,le.input.charCodeAt(le.position)===10&&le.position++):Xe(le,"a line break is expected"),le.line+=1,le.lineStart=le.position}function Je(le,be,we){for(var ze=0,Ze=le.input.charCodeAt(le.position);Ze!==0;){for(;I(Ze);)Ze=le.input.charCodeAt(++le.position);if(be&&Ze===35)do Ze=le.input.charCodeAt(++le.position);while(Ze!==10&&Ze!==13&&Ze!==0);if(!F(Ze))break;for(Ke(le),Ze=le.input.charCodeAt(le.position),ze++,le.lineIndent=0;Ze===32;)le.lineIndent++,Ze=le.input.charCodeAt(++le.position)}return we!==-1&&ze!==0&&le.lineIndent<we&&Ve(le,"deficient indentation"),ze}function at(le){var be,we=le.position;return!((be=le.input.charCodeAt(we))!==45&&be!==46||be!==le.input.charCodeAt(we+1)||be!==le.input.charCodeAt(we+2)||(we+=3,(be=le.input.charCodeAt(we))!==0&&!L(be)))}function nt(le,be){be===1?le.result+=" ":be>1&&(le.result+=g.repeat(`
`,be-1))}function ct(le,be){var we,ze,Ze=le.tag,Qe=le.anchor,st=[],lt=!1;for(le.anchor!==null&&(le.anchorMap[le.anchor]=st),ze=le.input.charCodeAt(le.position);ze!==0&&ze===45&&L(le.input.charCodeAt(le.position+1));)if(lt=!0,le.position++,Je(le,!0,-1)&&le.lineIndent<=be)st.push(null),ze=le.input.charCodeAt(le.position);else if(we=le.line,ht(le,be,3,!1,!0),st.push(le.result),Je(le,!0,-1),ze=le.input.charCodeAt(le.position),(le.line===we||le.lineIndent>be)&&ze!==0)Xe(le,"bad indentation of a sequence entry");else if(le.lineIndent<be)break;return!!lt&&(le.tag=Ze,le.anchor=Qe,le.kind="sequence",le.result=st,!0)}function pt(le){var be,we,ze,Ze,Qe=!1,st=!1;if((Ze=le.input.charCodeAt(le.position))!==33)return!1;if(le.tag!==null&&Xe(le,"duplication of a tag property"),(Ze=le.input.charCodeAt(++le.position))===60?(Qe=!0,Ze=le.input.charCodeAt(++le.position)):Ze===33?(st=!0,we="!!",Ze=le.input.charCodeAt(++le.position)):we="!",be=le.position,Qe){do Ze=le.input.charCodeAt(++le.position);while(Ze!==0&&Ze!==62);le.position<le.length?(ze=le.input.slice(be,le.position),Ze=le.input.charCodeAt(++le.position)):Xe(le,"unexpected end of the stream within a verbatim tag")}else{for(;Ze!==0&&!L(Ze);)Ze===33&&(st?Xe(le,"tag suffix cannot contain exclamation marks"):(we=le.input.slice(be-1,le.position+1),R.test(we)||Xe(le,"named tag handle cannot contain such characters"),st=!0,be=le.position+1)),Ze=le.input.charCodeAt(++le.position);ze=le.input.slice(be,le.position),E.test(ze)&&Xe(le,"tag suffix cannot contain flow indicator characters")}return ze&&!B.test(ze)&&Xe(le,"tag name cannot contain such characters: "+ze),Qe?le.tag=ze:_.call(le.tagMap,we)?le.tag=le.tagMap[we]+ze:we==="!"?le.tag="!"+ze:we==="!!"?le.tag="tag:yaml.org,2002:"+ze:Xe(le,'undeclared tag handle "'+we+'"'),!0}function rt(le){var be,we;if((we=le.input.charCodeAt(le.position))!==38)return!1;for(le.anchor!==null&&Xe(le,"duplication of an anchor property"),we=le.input.charCodeAt(++le.position),be=le.position;we!==0&&!L(we)&&!W(we);)we=le.input.charCodeAt(++le.position);return le.position===be&&Xe(le,"name of an anchor node must contain at least one character"),le.anchor=le.input.slice(be,le.position),!0}function ht(le,be,we,ze,Ze){var Qe,st,lt,ot,ut,gt,vt,xt,Pt=1,bt=!1,Dt=!1;if(le.listener!==null&&le.listener("open",le),le.tag=null,le.anchor=null,le.kind=null,le.result=null,Qe=st=lt=we===4||we===3,ze&&Je(le,!0,-1)&&(bt=!0,le.lineIndent>be?Pt=1:le.lineIndent===be?Pt=0:le.lineIndent<be&&(Pt=-1)),Pt===1)for(;pt(le)||rt(le);)Je(le,!0,-1)?(bt=!0,lt=Qe,le.lineIndent>be?Pt=1:le.lineIndent===be?Pt=0:le.lineIndent<be&&(Pt=-1)):lt=!1;if(lt&&(lt=bt||Ze),Pt!==1&&we!==4||(vt=we===1||we===2?be:be+1,xt=le.position-le.lineStart,Pt===1?lt&&(ct(le,xt)||function(tt,Et,Ct){var Mt,dt,At,Tt,kt,Rt=tt.tag,Ft=tt.anchor,It={},Vt={},Ut=null,Gt=null,Yt=null,jt=!1,Kt=!1;for(tt.anchor!==null&&(tt.anchorMap[tt.anchor]=It),kt=tt.input.charCodeAt(tt.position);kt!==0;){if(Mt=tt.input.charCodeAt(tt.position+1),At=tt.line,Tt=tt.position,kt!==63&&kt!==58||!L(Mt)){if(!ht(tt,Ct,2,!1,!0))break;if(tt.line===At){for(kt=tt.input.charCodeAt(tt.position);I(kt);)kt=tt.input.charCodeAt(++tt.position);if(kt===58)L(kt=tt.input.charCodeAt(++tt.position))||Xe(tt,"a whitespace character is expected after the key-value separator within a block mapping"),jt&&(je(tt,It,Vt,Ut,Gt,null),Ut=Gt=Yt=null),Kt=!0,jt=!1,dt=!1,Ut=tt.tag,Gt=tt.result;else{if(!Kt)return tt.tag=Rt,tt.anchor=Ft,!0;Xe(tt,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Kt)return tt.tag=Rt,tt.anchor=Ft,!0;Xe(tt,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else kt===63?(jt&&(je(tt,It,Vt,Ut,Gt,null),Ut=Gt=Yt=null),Kt=!0,jt=!0,dt=!0):jt?(jt=!1,dt=!0):Xe(tt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),tt.position+=1,kt=Mt;if((tt.line===At||tt.lineIndent>Et)&&(ht(tt,Et,4,!0,dt)&&(jt?Gt=tt.result:Yt=tt.result),jt||(je(tt,It,Vt,Ut,Gt,Yt,At,Tt),Ut=Gt=Yt=null),Je(tt,!0,-1),kt=tt.input.charCodeAt(tt.position)),tt.lineIndent>Et&&kt!==0)Xe(tt,"bad indentation of a mapping entry");else if(tt.lineIndent<Et)break}return jt&&je(tt,It,Vt,Ut,Gt,null),Kt&&(tt.tag=Rt,tt.anchor=Ft,tt.kind="mapping",tt.result=It),Kt}(le,xt,vt))||function(tt,Et){var Ct,Mt,dt,At,Tt,kt,Rt,Ft,It,Vt,Ut=!0,Gt=tt.tag,Yt=tt.anchor,jt={};if((Vt=tt.input.charCodeAt(tt.position))===91)dt=93,kt=!1,Mt=[];else{if(Vt!==123)return!1;dt=125,kt=!0,Mt={}}for(tt.anchor!==null&&(tt.anchorMap[tt.anchor]=Mt),Vt=tt.input.charCodeAt(++tt.position);Vt!==0;){if(Je(tt,!0,Et),(Vt=tt.input.charCodeAt(tt.position))===dt)return tt.position++,tt.tag=Gt,tt.anchor=Yt,tt.kind=kt?"mapping":"sequence",tt.result=Mt,!0;Ut||Xe(tt,"missed comma between flow collection entries"),It=null,At=Tt=!1,Vt===63&&L(tt.input.charCodeAt(tt.position+1))&&(At=Tt=!0,tt.position++,Je(tt,!0,Et)),Ct=tt.line,ht(tt,Et,1,!1,!0),Ft=tt.tag,Rt=tt.result,Je(tt,!0,Et),Vt=tt.input.charCodeAt(tt.position),!Tt&&tt.line!==Ct||Vt!==58||(At=!0,Vt=tt.input.charCodeAt(++tt.position),Je(tt,!0,Et),ht(tt,Et,1,!1,!0),It=tt.result),kt?je(tt,Mt,jt,Ft,Rt,It):At?Mt.push(je(tt,null,jt,Ft,Rt,It)):Mt.push(Rt),Je(tt,!0,Et),(Vt=tt.input.charCodeAt(tt.position))===44?(Ut=!0,Vt=tt.input.charCodeAt(++tt.position)):Ut=!1}Xe(tt,"unexpected end of the stream within a flow collection")}(le,vt)?Dt=!0:(st&&function(tt,Et){var Ct,Mt,dt,At,Tt,kt=1,Rt=!1,Ft=!1,It=Et,Vt=0,Ut=!1;if((At=tt.input.charCodeAt(tt.position))===124)Mt=!1;else{if(At!==62)return!1;Mt=!0}for(tt.kind="scalar",tt.result="";At!==0;)if((At=tt.input.charCodeAt(++tt.position))===43||At===45)kt===1?kt=At===43?3:2:Xe(tt,"repeat of a chomping mode identifier");else{if(!((dt=48<=(Tt=At)&&Tt<=57?Tt-48:-1)>=0))break;dt===0?Xe(tt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ft?Xe(tt,"repeat of an indentation width identifier"):(It=Et+dt-1,Ft=!0)}if(I(At)){do At=tt.input.charCodeAt(++tt.position);while(I(At));if(At===35)do At=tt.input.charCodeAt(++tt.position);while(!F(At)&&At!==0)}for(;At!==0;){for(Ke(tt),tt.lineIndent=0,At=tt.input.charCodeAt(tt.position);(!Ft||tt.lineIndent<It)&&At===32;)tt.lineIndent++,At=tt.input.charCodeAt(++tt.position);if(!Ft&&tt.lineIndent>It&&(It=tt.lineIndent),F(At))Vt++;else{if(tt.lineIndent<It){kt===3?tt.result+=g.repeat(`
`,Rt?1+Vt:Vt):kt===1&&Rt&&(tt.result+=`
`);break}for(Mt?I(At)?(Ut=!0,tt.result+=g.repeat(`
`,Rt?1+Vt:Vt)):Ut?(Ut=!1,tt.result+=g.repeat(`
`,Vt+1)):Vt===0?Rt&&(tt.result+=" "):tt.result+=g.repeat(`
`,Vt):tt.result+=g.repeat(`
`,Rt?1+Vt:Vt),Rt=!0,Ft=!0,Vt=0,Ct=tt.position;!F(At)&&At!==0;)At=tt.input.charCodeAt(++tt.position);qe(tt,Ct,tt.position,!1)}}return!0}(le,vt)||function(tt,Et){var Ct,Mt,dt;if((Ct=tt.input.charCodeAt(tt.position))!==39)return!1;for(tt.kind="scalar",tt.result="",tt.position++,Mt=dt=tt.position;(Ct=tt.input.charCodeAt(tt.position))!==0;)if(Ct===39){if(qe(tt,Mt,tt.position,!0),(Ct=tt.input.charCodeAt(++tt.position))!==39)return!0;Mt=tt.position,tt.position++,dt=tt.position}else F(Ct)?(qe(tt,Mt,dt,!0),nt(tt,Je(tt,!1,Et)),Mt=dt=tt.position):tt.position===tt.lineStart&&at(tt)?Xe(tt,"unexpected end of the document within a single quoted scalar"):(tt.position++,dt=tt.position);Xe(tt,"unexpected end of the stream within a single quoted scalar")}(le,vt)||function(tt,Et){var Ct,Mt,dt,At,Tt,kt,Rt;if((kt=tt.input.charCodeAt(tt.position))!==34)return!1;for(tt.kind="scalar",tt.result="",tt.position++,Ct=Mt=tt.position;(kt=tt.input.charCodeAt(tt.position))!==0;){if(kt===34)return qe(tt,Ct,tt.position,!0),tt.position++,!0;if(kt===92){if(qe(tt,Ct,tt.position,!0),F(kt=tt.input.charCodeAt(++tt.position)))Je(tt,!1,Et);else if(kt<256&&Z[kt])tt.result+=J[kt],tt.position++;else if((Tt=(Rt=kt)===120?2:Rt===117?4:Rt===85?8:0)>0){for(dt=Tt,At=0;dt>0;dt--)(Tt=G(kt=tt.input.charCodeAt(++tt.position)))>=0?At=(At<<4)+Tt:Xe(tt,"expected hexadecimal character");tt.result+=K(At),tt.position++}else Xe(tt,"unknown escape sequence");Ct=Mt=tt.position}else F(kt)?(qe(tt,Ct,Mt,!0),nt(tt,Je(tt,!1,Et)),Ct=Mt=tt.position):tt.position===tt.lineStart&&at(tt)?Xe(tt,"unexpected end of the document within a double quoted scalar"):(tt.position++,Mt=tt.position)}Xe(tt,"unexpected end of the stream within a double quoted scalar")}(le,vt)?Dt=!0:function(tt){var Et,Ct,Mt;if((Mt=tt.input.charCodeAt(tt.position))!==42)return!1;for(Mt=tt.input.charCodeAt(++tt.position),Et=tt.position;Mt!==0&&!L(Mt)&&!W(Mt);)Mt=tt.input.charCodeAt(++tt.position);return tt.position===Et&&Xe(tt,"name of an alias node must contain at least one character"),Ct=tt.input.slice(Et,tt.position),_.call(tt.anchorMap,Ct)||Xe(tt,'unidentified alias "'+Ct+'"'),tt.result=tt.anchorMap[Ct],Je(tt,!0,-1),!0}(le)?(Dt=!0,le.tag===null&&le.anchor===null||Xe(le,"alias node should not have any properties")):function(tt,Et,Ct){var Mt,dt,At,Tt,kt,Rt,Ft,It,Vt=tt.kind,Ut=tt.result;if(L(It=tt.input.charCodeAt(tt.position))||W(It)||It===35||It===38||It===42||It===33||It===124||It===62||It===39||It===34||It===37||It===64||It===96||(It===63||It===45)&&(L(Mt=tt.input.charCodeAt(tt.position+1))||Ct&&W(Mt)))return!1;for(tt.kind="scalar",tt.result="",dt=At=tt.position,Tt=!1;It!==0;){if(It===58){if(L(Mt=tt.input.charCodeAt(tt.position+1))||Ct&&W(Mt))break}else if(It===35){if(L(tt.input.charCodeAt(tt.position-1)))break}else{if(tt.position===tt.lineStart&&at(tt)||Ct&&W(It))break;if(F(It)){if(kt=tt.line,Rt=tt.lineStart,Ft=tt.lineIndent,Je(tt,!1,-1),tt.lineIndent>=Et){Tt=!0,It=tt.input.charCodeAt(tt.position);continue}tt.position=At,tt.line=kt,tt.lineStart=Rt,tt.lineIndent=Ft;break}}Tt&&(qe(tt,dt,At,!1),nt(tt,tt.line-kt),dt=At=tt.position,Tt=!1),I(It)||(At=tt.position+1),It=tt.input.charCodeAt(++tt.position)}return qe(tt,dt,At,!1),!!tt.result||(tt.kind=Vt,tt.result=Ut,!1)}(le,vt,we===1)&&(Dt=!0,le.tag===null&&(le.tag="?")),le.anchor!==null&&(le.anchorMap[le.anchor]=le.result)):Pt===0&&(Dt=lt&&ct(le,xt))),le.tag!==null&&le.tag!=="!")if(le.tag==="?"){for(le.result!==null&&le.kind!=="scalar"&&Xe(le,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+le.kind+'"'),ot=0,ut=le.implicitTypes.length;ot<ut;ot+=1)if((gt=le.implicitTypes[ot]).resolve(le.result)){le.result=gt.construct(le.result),le.tag=gt.tag,le.anchor!==null&&(le.anchorMap[le.anchor]=le.result);break}}else _.call(le.typeMap[le.kind||"fallback"],le.tag)?(gt=le.typeMap[le.kind||"fallback"][le.tag],le.result!==null&&gt.kind!==le.kind&&Xe(le,"unacceptable node kind for !<"+le.tag+'> tag; it should be "'+gt.kind+'", not "'+le.kind+'"'),gt.resolve(le.result)?(le.result=gt.construct(le.result),le.anchor!==null&&(le.anchorMap[le.anchor]=le.result)):Xe(le,"cannot resolve a node with !<"+le.tag+"> explicit tag")):Xe(le,"unknown tag !<"+le.tag+">");return le.listener!==null&&le.listener("close",le),le.tag!==null||le.anchor!==null||Dt}function yt(le){var be,we,ze,Ze,Qe=le.position,st=!1;for(le.version=null,le.checkLineBreaks=le.legacy,le.tagMap={},le.anchorMap={};(Ze=le.input.charCodeAt(le.position))!==0&&(Je(le,!0,-1),Ze=le.input.charCodeAt(le.position),!(le.lineIndent>0||Ze!==37));){for(st=!0,Ze=le.input.charCodeAt(++le.position),be=le.position;Ze!==0&&!L(Ze);)Ze=le.input.charCodeAt(++le.position);for(ze=[],(we=le.input.slice(be,le.position)).length<1&&Xe(le,"directive name must not be less than one character in length");Ze!==0;){for(;I(Ze);)Ze=le.input.charCodeAt(++le.position);if(Ze===35){do Ze=le.input.charCodeAt(++le.position);while(Ze!==0&&!F(Ze));break}if(F(Ze))break;for(be=le.position;Ze!==0&&!L(Ze);)Ze=le.input.charCodeAt(++le.position);ze.push(le.input.slice(be,le.position))}Ze!==0&&Ke(le),_.call(Ye,we)?Ye[we](le,we,ze):Ve(le,'unknown document directive "'+we+'"')}Je(le,!0,-1),le.lineIndent===0&&le.input.charCodeAt(le.position)===45&&le.input.charCodeAt(le.position+1)===45&&le.input.charCodeAt(le.position+2)===45?(le.position+=3,Je(le,!0,-1)):st&&Xe(le,"directives end mark is expected"),ht(le,le.lineIndent-1,4,!1,!0),Je(le,!0,-1),le.checkLineBreaks&&P.test(le.input.slice(Qe,le.position))&&Ve(le,"non-ASCII line breaks are interpreted as content"),le.documents.push(le.result),le.position===le.lineStart&&at(le)?le.input.charCodeAt(le.position)===46&&(le.position+=3,Je(le,!0,-1)):le.position<le.length-1&&Xe(le,"end of the stream or a document separator is expected")}function wt(le,be){be=be||{},(le=String(le)).length!==0&&(le.charCodeAt(le.length-1)!==10&&le.charCodeAt(le.length-1)!==13&&(le+=`
`),le.charCodeAt(0)===65279&&(le=le.slice(1)));var we=new Q(le,be),ze=le.indexOf("\0");for(ze!==-1&&(we.position=ze,Xe(we,"null byte is not allowed in input")),we.input+="\0";we.input.charCodeAt(we.position)===32;)we.lineIndent+=1,we.position+=1;for(;we.position<we.length-1;)yt(we);return we.documents}function ft(le,be,we){be!==null&&typeof be=="object"&&we===void 0&&(we=be,be=null);var ze=wt(le,we);if(typeof be!="function")return ze;for(var Ze=0,Qe=ze.length;Ze<Qe;Ze+=1)be(ze[Ze])}function He(le,be){var we=wt(le,be);if(we.length!==0){if(we.length===1)return we[0];throw new x("expected a single document in the stream, but found more")}}d.exports.loadAll=ft,d.exports.load=He,d.exports.safeLoadAll=function(le,be,we){return typeof be=="object"&&be!==null&&we===void 0&&(we=be,be=null),ft(le,be,g.extend({schema:C},we))},d.exports.safeLoad=function(le,be){return He(le,g.extend({schema:C},be))}},function(d,m,f){var g=f(38);function x(w,C,A,_,M){this.name=w,this.buffer=C,this.position=A,this.line=_,this.column=M}x.prototype.getSnippet=function(w,C){var A,_,M,P,E;if(!this.buffer)return null;for(w=w||4,C=C||75,A="",_=this.position;_>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(_-1))===-1;)if(_-=1,this.position-_>C/2-1){A=" ... ",_+=5;break}for(M="",P=this.position;P<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(P))===-1;)if((P+=1)-this.position>C/2-1){M=" ... ",P-=5;break}return E=this.buffer.slice(_,P),g.repeat(" ",w)+A+E+M+`
`+g.repeat(" ",w+this.position-_+A.length)+"^"},x.prototype.toString=function(w){var C,A="";return this.name&&(A+='in "'+this.name+'" '),A+="at line "+(this.line+1)+", column "+(this.column+1),w||(C=this.getSnippet())&&(A+=`:
`+C),A},d.exports=x},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:str",{kind:"scalar",construct:function(x){return x!==null?x:""}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(x){return x!==null?x:[]}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:map",{kind:"mapping",construct:function(x){return x!==null?x:{}}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(x){if(x===null)return!0;var w=x.length;return w===1&&x==="~"||w===4&&(x==="null"||x==="Null"||x==="NULL")},construct:function(){return null},predicate:function(x){return x===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(x){if(x===null)return!1;var w=x.length;return w===4&&(x==="true"||x==="True"||x==="TRUE")||w===5&&(x==="false"||x==="False"||x==="FALSE")},construct:function(x){return x==="true"||x==="True"||x==="TRUE"},predicate:function(x){return Object.prototype.toString.call(x)==="[object Boolean]"},represent:{lowercase:function(x){return x?"true":"false"},uppercase:function(x){return x?"TRUE":"FALSE"},camelcase:function(x){return x?"True":"False"}},defaultStyle:"lowercase"})},function(d,m,f){var g=f(38),x=f(10);function w(A){return 48<=A&&A<=55}function C(A){return 48<=A&&A<=57}d.exports=new x("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(A){if(A===null)return!1;var _,M,P=A.length,E=0,R=!1;if(!P)return!1;if((_=A[E])!=="-"&&_!=="+"||(_=A[++E]),_==="0"){if(E+1===P)return!0;if((_=A[++E])==="b"){for(E++;E<P;E++)if((_=A[E])!=="_"){if(_!=="0"&&_!=="1")return!1;R=!0}return R&&_!=="_"}if(_==="x"){for(E++;E<P;E++)if((_=A[E])!=="_"){if(!(48<=(M=A.charCodeAt(E))&&M<=57||65<=M&&M<=70||97<=M&&M<=102))return!1;R=!0}return R&&_!=="_"}for(;E<P;E++)if((_=A[E])!=="_"){if(!w(A.charCodeAt(E)))return!1;R=!0}return R&&_!=="_"}if(_==="_")return!1;for(;E<P;E++)if((_=A[E])!=="_"){if(_===":")break;if(!C(A.charCodeAt(E)))return!1;R=!0}return!(!R||_==="_")&&(_!==":"||/^(:[0-5]?[0-9])+$/.test(A.slice(E)))},construct:function(A){var _,M,P=A,E=1,R=[];return P.indexOf("_")!==-1&&(P=P.replace(/_/g,"")),(_=P[0])!=="-"&&_!=="+"||(_==="-"&&(E=-1),_=(P=P.slice(1))[0]),P==="0"?0:_==="0"?P[1]==="b"?E*parseInt(P.slice(2),2):P[1]==="x"?E*parseInt(P,16):E*parseInt(P,8):P.indexOf(":")!==-1?(P.split(":").forEach(function(B){R.unshift(parseInt(B,10))}),P=0,M=1,R.forEach(function(B){P+=B*M,M*=60}),E*P):E*parseInt(P,10)},predicate:function(A){return Object.prototype.toString.call(A)==="[object Number]"&&A%1==0&&!g.isNegativeZero(A)},represent:{binary:function(A){return A>=0?"0b"+A.toString(2):"-0b"+A.toString(2).slice(1)},octal:function(A){return A>=0?"0"+A.toString(8):"-0"+A.toString(8).slice(1)},decimal:function(A){return A.toString(10)},hexadecimal:function(A){return A>=0?"0x"+A.toString(16).toUpperCase():"-0x"+A.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(d,m,f){var g=f(38),x=f(10),w=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),C=/^[-+]?[0-9]+e/;d.exports=new x("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(A){return A!==null&&!(!w.test(A)||A[A.length-1]==="_")},construct:function(A){var _,M,P,E;return M=(_=A.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,E=[],"+-".indexOf(_[0])>=0&&(_=_.slice(1)),_===".inf"?M===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:_===".nan"?NaN:_.indexOf(":")>=0?(_.split(":").forEach(function(R){E.unshift(parseFloat(R,10))}),_=0,P=1,E.forEach(function(R){_+=R*P,P*=60}),M*_):M*parseFloat(_,10)},predicate:function(A){return Object.prototype.toString.call(A)==="[object Number]"&&(A%1!=0||g.isNegativeZero(A))},represent:function(A,_){var M;if(isNaN(A))switch(_){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===A)switch(_){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===A)switch(_){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(g.isNegativeZero(A))return"-0.0";return M=A.toString(10),C.test(M)?M.replace("e",".e"):M},defaultStyle:"lowercase"})},function(d,m,f){var g=f(10),x=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),w=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");d.exports=new g("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(C){return C!==null&&(x.exec(C)!==null||w.exec(C)!==null)},construct:function(C){var A,_,M,P,E,R,B,z,F=0,I=null;if((A=x.exec(C))===null&&(A=w.exec(C)),A===null)throw new Error("Date resolve error");if(_=+A[1],M=+A[2]-1,P=+A[3],!A[4])return new Date(Date.UTC(_,M,P));if(E=+A[4],R=+A[5],B=+A[6],A[7]){for(F=A[7].slice(0,3);F.length<3;)F+="0";F=+F}return A[9]&&(I=6e4*(60*+A[10]+ +(A[11]||0)),A[9]==="-"&&(I=-I)),z=new Date(Date.UTC(_,M,P,E,R,B,F)),I&&z.setTime(z.getTime()-I),z},instanceOf:Date,represent:function(C){return C.toISOString()}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(x){return x==="<<"||x===null}})},function(d,m,f){var g;try{g=f(145).Buffer}catch{}var x=f(10),w=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;d.exports=new x("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(C){if(C===null)return!1;var A,_,M=0,P=C.length,E=w;for(_=0;_<P;_++)if(!((A=E.indexOf(C.charAt(_)))>64)){if(A<0)return!1;M+=6}return M%8==0},construct:function(C){var A,_,M=C.replace(/[\r\n=]/g,""),P=M.length,E=w,R=0,B=[];for(A=0;A<P;A++)A%4==0&&A&&(B.push(R>>16&255),B.push(R>>8&255),B.push(255&R)),R=R<<6|E.indexOf(M.charAt(A));return(_=P%4*6)===0?(B.push(R>>16&255),B.push(R>>8&255),B.push(255&R)):_===18?(B.push(R>>10&255),B.push(R>>2&255)):_===12&&B.push(R>>4&255),g?g.from?g.from(B):new g(B):B},predicate:function(C){return g&&g.isBuffer(C)},represent:function(C){var A,_,M="",P=0,E=C.length,R=w;for(A=0;A<E;A++)A%3==0&&A&&(M+=R[P>>18&63],M+=R[P>>12&63],M+=R[P>>6&63],M+=R[63&P]),P=(P<<8)+C[A];return(_=E%3)===0?(M+=R[P>>18&63],M+=R[P>>12&63],M+=R[P>>6&63],M+=R[63&P]):_===2?(M+=R[P>>10&63],M+=R[P>>4&63],M+=R[P<<2&63],M+=R[64]):_===1&&(M+=R[P>>2&63],M+=R[P<<4&63],M+=R[64],M+=R[64]),M}})},function(d,m,f){var g=f(10),x=Object.prototype.hasOwnProperty,w=Object.prototype.toString;d.exports=new g("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(C){if(C===null)return!0;var A,_,M,P,E,R=[],B=C;for(A=0,_=B.length;A<_;A+=1){if(M=B[A],E=!1,w.call(M)!=="[object Object]")return!1;for(P in M)if(x.call(M,P)){if(E)return!1;E=!0}if(!E||R.indexOf(P)!==-1)return!1;R.push(P)}return!0},construct:function(C){return C!==null?C:[]}})},function(d,m,f){var g=f(10),x=Object.prototype.toString;d.exports=new g("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(w){if(w===null)return!0;var C,A,_,M,P,E=w;for(P=new Array(E.length),C=0,A=E.length;C<A;C+=1){if(_=E[C],x.call(_)!=="[object Object]"||(M=Object.keys(_)).length!==1)return!1;P[C]=[M[0],_[M[0]]]}return!0},construct:function(w){if(w===null)return[];var C,A,_,M,P,E=w;for(P=new Array(E.length),C=0,A=E.length;C<A;C+=1)_=E[C],M=Object.keys(_),P[C]=[M[0],_[M[0]]];return P}})},function(d,m,f){var g=f(10),x=Object.prototype.hasOwnProperty;d.exports=new g("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(w){if(w===null)return!0;var C,A=w;for(C in A)if(x.call(A,C)&&A[C]!==null)return!1;return!0},construct:function(w){return w!==null?w:{}}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(x){return x===void 0},represent:function(){return""}})},function(d,m,f){var g=f(10);d.exports=new g("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(x){if(x===null||x.length===0)return!1;var w=x,C=/\/([gim]*)$/.exec(x),A="";return!(w[0]==="/"&&(C&&(A=C[1]),A.length>3||w[w.length-A.length-1]!=="/"))},construct:function(x){var w=x,C=/\/([gim]*)$/.exec(x),A="";return w[0]==="/"&&(C&&(A=C[1]),w=w.slice(1,w.length-A.length-1)),new RegExp(w,A)},predicate:function(x){return Object.prototype.toString.call(x)==="[object RegExp]"},represent:function(x){var w="/"+x.source+"/";return x.global&&(w+="g"),x.multiline&&(w+="m"),x.ignoreCase&&(w+="i"),w}})},function(d,m,f){var g;try{g=f(303)}catch{typeof window<"u"&&(g=window.esprima)}var x=f(10);d.exports=new x("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(w){if(w===null)return!1;try{var C="("+w+")",A=g.parse(C,{range:!0});return A.type==="Program"&&A.body.length===1&&A.body[0].type==="ExpressionStatement"&&(A.body[0].expression.type==="ArrowFunctionExpression"||A.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(w){var C,A="("+w+")",_=g.parse(A,{range:!0}),M=[];if(_.type!=="Program"||_.body.length!==1||_.body[0].type!=="ExpressionStatement"||_.body[0].expression.type!=="ArrowFunctionExpression"&&_.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return _.body[0].expression.params.forEach(function(P){M.push(P.name)}),C=_.body[0].expression.body.range,_.body[0].expression.body.type==="BlockStatement"?new Function(M,A.slice(C[0]+1,C[1]-1)):new Function(M,"return "+A.slice(C[0],C[1]))},predicate:function(w){return Object.prototype.toString.call(w)==="[object Function]"},represent:function(w){return w.toString()}})},function(d,m,f){var g;g=function(){return function(x){var w={};function C(A){if(w[A])return w[A].exports;var _=w[A]={exports:{},id:A,loaded:!1};return x[A].call(_.exports,_,_.exports,C),_.loaded=!0,_.exports}return C.m=x,C.c=w,C.p="",C(0)}([function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(1),_=C(3),M=C(8),P=C(15);function E(B,z,F){var I=null,L=function(te,Q){F&&F(te,Q),I&&I.visit(te,Q)},W=typeof F=="function"?L:null,G=!1;if(z){G=typeof z.comment=="boolean"&&z.comment;var q=typeof z.attachComment=="boolean"&&z.attachComment;(G||q)&&((I=new A.CommentHandler).attach=q,z.comment=!0,W=L)}var K,Z=!1;z&&typeof z.sourceType=="string"&&(Z=z.sourceType==="module"),K=z&&typeof z.jsx=="boolean"&&z.jsx?new _.JSXParser(B,z,W):new M.Parser(B,z,W);var J=Z?K.parseModule():K.parseScript();return G&&I&&(J.comments=I.comments),K.config.tokens&&(J.tokens=K.tokens),K.config.tolerant&&(J.errors=K.errorHandler.errors),J}w.parse=E,w.parseModule=function(B,z,F){var I=z||{};return I.sourceType="module",E(B,I,F)},w.parseScript=function(B,z,F){var I=z||{};return I.sourceType="script",E(B,I,F)},w.tokenize=function(B,z,F){var I,L=new P.Tokenizer(B,z);I=[];try{for(;;){var W=L.getNextToken();if(!W)break;F&&(W=F(W)),I.push(W)}}catch(G){L.errorHandler.tolerate(G)}return L.errorHandler.tolerant&&(I.errors=L.errors()),I};var R=C(2);w.Syntax=R.Syntax,w.version="4.0.1"},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(2),_=function(){function M(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return M.prototype.insertInnerComments=function(P,E){if(P.type===A.Syntax.BlockStatement&&P.body.length===0){for(var R=[],B=this.leading.length-1;B>=0;--B){var z=this.leading[B];E.end.offset>=z.start&&(R.unshift(z.comment),this.leading.splice(B,1),this.trailing.splice(B,1))}R.length&&(P.innerComments=R)}},M.prototype.findTrailingComments=function(P){var E=[];if(this.trailing.length>0){for(var R=this.trailing.length-1;R>=0;--R){var B=this.trailing[R];B.start>=P.end.offset&&E.unshift(B.comment)}return this.trailing.length=0,E}var z=this.stack[this.stack.length-1];if(z&&z.node.trailingComments){var F=z.node.trailingComments[0];F&&F.range[0]>=P.end.offset&&(E=z.node.trailingComments,delete z.node.trailingComments)}return E},M.prototype.findLeadingComments=function(P){for(var E,R=[];this.stack.length>0&&(F=this.stack[this.stack.length-1])&&F.start>=P.start.offset;)E=F.node,this.stack.pop();if(E){for(var B=(E.leadingComments?E.leadingComments.length:0)-1;B>=0;--B){var z=E.leadingComments[B];z.range[1]<=P.start.offset&&(R.unshift(z),E.leadingComments.splice(B,1))}return E.leadingComments&&E.leadingComments.length===0&&delete E.leadingComments,R}for(B=this.leading.length-1;B>=0;--B){var F;(F=this.leading[B]).start<=P.start.offset&&(R.unshift(F.comment),this.leading.splice(B,1))}return R},M.prototype.visitNode=function(P,E){if(!(P.type===A.Syntax.Program&&P.body.length>0)){this.insertInnerComments(P,E);var R=this.findTrailingComments(E),B=this.findLeadingComments(E);B.length>0&&(P.leadingComments=B),R.length>0&&(P.trailingComments=R),this.stack.push({node:P,start:E.start.offset})}},M.prototype.visitComment=function(P,E){var R=P.type[0]==="L"?"Line":"Block",B={type:R,value:P.value};if(P.range&&(B.range=P.range),P.loc&&(B.loc=P.loc),this.comments.push(B),this.attach){var z={comment:{type:R,value:P.value,range:[E.start.offset,E.end.offset]},start:E.start.offset};P.loc&&(z.comment.loc=P.loc),P.type=R,this.leading.push(z),this.trailing.push(z)}},M.prototype.visit=function(P,E){P.type==="LineComment"||P.type==="BlockComment"?this.visitComment(P,E):this.attach&&this.visitNode(P,E)},M}();w.CommentHandler=_},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(x,w,C){var A,_=this&&this.__extends||(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,G){W.__proto__=G}||function(W,G){for(var q in G)G.hasOwnProperty(q)&&(W[q]=G[q])},function(W,G){function q(){this.constructor=W}A(W,G),W.prototype=G===null?Object.create(G):(q.prototype=G.prototype,new q)});Object.defineProperty(w,"__esModule",{value:!0});var M=C(4),P=C(5),E=C(6),R=C(7),B=C(8),z=C(13),F=C(14);function I(W){var G;switch(W.type){case E.JSXSyntax.JSXIdentifier:G=W.name;break;case E.JSXSyntax.JSXNamespacedName:var q=W;G=I(q.namespace)+":"+I(q.name);break;case E.JSXSyntax.JSXMemberExpression:var K=W;G=I(K.object)+"."+I(K.property)}return G}z.TokenName[100]="JSXIdentifier",z.TokenName[101]="JSXText";var L=function(W){function G(q,K,Z){return W.call(this,q,K,Z)||this}return _(G,W),G.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():W.prototype.parsePrimaryExpression.call(this)},G.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},G.prototype.finishJSX=function(){this.nextToken()},G.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},G.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},G.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},G.prototype.scanXHTMLEntity=function(q){for(var K="&",Z=!0,J=!1,te=!1,Q=!1;!this.scanner.eof()&&Z&&!J;){var me=this.scanner.source[this.scanner.index];if(me===q)break;if(J=me===";",K+=me,++this.scanner.index,!J)switch(K.length){case 2:te=me==="#";break;case 3:te&&(Z=(Q=me==="x")||M.Character.isDecimalDigit(me.charCodeAt(0)),te=te&&!Q);break;default:Z=(Z=Z&&!(te&&!M.Character.isDecimalDigit(me.charCodeAt(0))))&&!(Q&&!M.Character.isHexDigit(me.charCodeAt(0)))}}if(Z&&J&&K.length>2){var Xe=K.substr(1,K.length-2);te&&Xe.length>1?K=String.fromCharCode(parseInt(Xe.substr(1),10)):Q&&Xe.length>2?K=String.fromCharCode(parseInt("0"+Xe.substr(1),16)):te||Q||!F.XHTMLEntities[Xe]||(K=F.XHTMLEntities[Xe])}return K},G.prototype.lexJSX=function(){var q=this.scanner.source.charCodeAt(this.scanner.index);if(q===60||q===62||q===47||q===58||q===61||q===123||q===125)return{type:7,value:me=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(q===34||q===39){for(var K=this.scanner.index,Z=this.scanner.source[this.scanner.index++],J="";!this.scanner.eof()&&(Xe=this.scanner.source[this.scanner.index++])!==Z;)J+=Xe==="&"?this.scanXHTMLEntity(Z):Xe;return{type:8,value:J,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:K,end:this.scanner.index}}if(q===46){var te=this.scanner.source.charCodeAt(this.scanner.index+1),Q=this.scanner.source.charCodeAt(this.scanner.index+2),me=te===46&&Q===46?"...":".";return K=this.scanner.index,this.scanner.index+=me.length,{type:7,value:me,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:K,end:this.scanner.index}}if(q===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(M.Character.isIdentifierStart(q)&&q!==92){for(K=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var Xe=this.scanner.source.charCodeAt(this.scanner.index);if(M.Character.isIdentifierPart(Xe)&&Xe!==92)++this.scanner.index;else{if(Xe!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(K,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:K,end:this.scanner.index}}return this.scanner.lex()},G.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var q=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(q)),q},G.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var q=this.scanner.index,K="";!this.scanner.eof();){var Z=this.scanner.source[this.scanner.index];if(Z==="{"||Z==="<")break;++this.scanner.index,K+=Z,M.Character.isLineTerminator(Z.charCodeAt(0))&&(++this.scanner.lineNumber,Z==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var J={type:101,value:K,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:q,end:this.scanner.index};return K.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(J)),J},G.prototype.peekJSXToken=function(){var q=this.scanner.saveState();this.scanner.scanComments();var K=this.lexJSX();return this.scanner.restoreState(q),K},G.prototype.expectJSX=function(q){var K=this.nextJSXToken();K.type===7&&K.value===q||this.throwUnexpectedToken(K)},G.prototype.matchJSX=function(q){var K=this.peekJSXToken();return K.type===7&&K.value===q},G.prototype.parseJSXIdentifier=function(){var q=this.createJSXNode(),K=this.nextJSXToken();return K.type!==100&&this.throwUnexpectedToken(K),this.finalize(q,new P.JSXIdentifier(K.value))},G.prototype.parseJSXElementName=function(){var q=this.createJSXNode(),K=this.parseJSXIdentifier();if(this.matchJSX(":")){var Z=K;this.expectJSX(":");var J=this.parseJSXIdentifier();K=this.finalize(q,new P.JSXNamespacedName(Z,J))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var te=K;this.expectJSX(".");var Q=this.parseJSXIdentifier();K=this.finalize(q,new P.JSXMemberExpression(te,Q))}return K},G.prototype.parseJSXAttributeName=function(){var q,K=this.createJSXNode(),Z=this.parseJSXIdentifier();if(this.matchJSX(":")){var J=Z;this.expectJSX(":");var te=this.parseJSXIdentifier();q=this.finalize(K,new P.JSXNamespacedName(J,te))}else q=Z;return q},G.prototype.parseJSXStringLiteralAttribute=function(){var q=this.createJSXNode(),K=this.nextJSXToken();K.type!==8&&this.throwUnexpectedToken(K);var Z=this.getTokenRaw(K);return this.finalize(q,new R.Literal(K.value,Z))},G.prototype.parseJSXExpressionAttribute=function(){var q=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var K=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(q,new P.JSXExpressionContainer(K))},G.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},G.prototype.parseJSXNameValueAttribute=function(){var q=this.createJSXNode(),K=this.parseJSXAttributeName(),Z=null;return this.matchJSX("=")&&(this.expectJSX("="),Z=this.parseJSXAttributeValue()),this.finalize(q,new P.JSXAttribute(K,Z))},G.prototype.parseJSXSpreadAttribute=function(){var q=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var K=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(q,new P.JSXSpreadAttribute(K))},G.prototype.parseJSXAttributes=function(){for(var q=[];!this.matchJSX("/")&&!this.matchJSX(">");){var K=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();q.push(K)}return q},G.prototype.parseJSXOpeningElement=function(){var q=this.createJSXNode();this.expectJSX("<");var K=this.parseJSXElementName(),Z=this.parseJSXAttributes(),J=this.matchJSX("/");return J&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(q,new P.JSXOpeningElement(K,J,Z))},G.prototype.parseJSXBoundaryElement=function(){var q=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var K=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(q,new P.JSXClosingElement(K))}var Z=this.parseJSXElementName(),J=this.parseJSXAttributes(),te=this.matchJSX("/");return te&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(q,new P.JSXOpeningElement(Z,te,J))},G.prototype.parseJSXEmptyExpression=function(){var q=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(q,new P.JSXEmptyExpression)},G.prototype.parseJSXExpressionContainer=function(){var q,K=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(q=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),q=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(K,new P.JSXExpressionContainer(q))},G.prototype.parseJSXChildren=function(){for(var q=[];!this.scanner.eof();){var K=this.createJSXChildNode(),Z=this.nextJSXText();if(Z.start<Z.end){var J=this.getTokenRaw(Z),te=this.finalize(K,new P.JSXText(Z.value,J));q.push(te)}if(this.scanner.source[this.scanner.index]!=="{")break;var Q=this.parseJSXExpressionContainer();q.push(Q)}return q},G.prototype.parseComplexJSXElement=function(q){for(var K=[];!this.scanner.eof();){q.children=q.children.concat(this.parseJSXChildren());var Z=this.createJSXChildNode(),J=this.parseJSXBoundaryElement();if(J.type===E.JSXSyntax.JSXOpeningElement){var te=J;if(te.selfClosing){var Q=this.finalize(Z,new P.JSXElement(te,[],null));q.children.push(Q)}else K.push(q),q={node:Z,opening:te,closing:null,children:[]}}if(J.type===E.JSXSyntax.JSXClosingElement){q.closing=J;var me=I(q.opening.name);if(me!==I(q.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",me),!(K.length>0))break;Q=this.finalize(q.node,new P.JSXElement(q.opening,q.children,q.closing)),(q=K[K.length-1]).children.push(Q),K.pop()}}return q},G.prototype.parseJSXElement=function(){var q=this.createJSXNode(),K=this.parseJSXOpeningElement(),Z=[],J=null;if(!K.selfClosing){var te=this.parseComplexJSXElement({node:q,opening:K,closing:J,children:Z});Z=te.children,J=te.closing}return this.finalize(q,new P.JSXElement(K,Z,J))},G.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var q=this.parseJSXElement();return this.finishJSX(),q},G.prototype.isStartOfExpression=function(){return W.prototype.isStartOfExpression.call(this)||this.match("<")},G}(B.Parser);w.JSXParser=L},function(x,w){Object.defineProperty(w,"__esModule",{value:!0});var C={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};w.Character={fromCodePoint:function(A){return A<65536?String.fromCharCode(A):String.fromCharCode(55296+(A-65536>>10))+String.fromCharCode(56320+(A-65536&1023))},isWhiteSpace:function(A){return A===32||A===9||A===11||A===12||A===160||A>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(A)>=0},isLineTerminator:function(A){return A===10||A===13||A===8232||A===8233},isIdentifierStart:function(A){return A===36||A===95||A>=65&&A<=90||A>=97&&A<=122||A===92||A>=128&&C.NonAsciiIdentifierStart.test(w.Character.fromCodePoint(A))},isIdentifierPart:function(A){return A===36||A===95||A>=65&&A<=90||A>=97&&A<=122||A>=48&&A<=57||A===92||A>=128&&C.NonAsciiIdentifierPart.test(w.Character.fromCodePoint(A))},isDecimalDigit:function(A){return A>=48&&A<=57},isHexDigit:function(A){return A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102},isOctalDigit:function(A){return A>=48&&A<=55}}},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(6),_=function(G){this.type=A.JSXSyntax.JSXClosingElement,this.name=G};w.JSXClosingElement=_;var M=function(G,q,K){this.type=A.JSXSyntax.JSXElement,this.openingElement=G,this.children=q,this.closingElement=K};w.JSXElement=M;var P=function(){this.type=A.JSXSyntax.JSXEmptyExpression};w.JSXEmptyExpression=P;var E=function(G){this.type=A.JSXSyntax.JSXExpressionContainer,this.expression=G};w.JSXExpressionContainer=E;var R=function(G){this.type=A.JSXSyntax.JSXIdentifier,this.name=G};w.JSXIdentifier=R;var B=function(G,q){this.type=A.JSXSyntax.JSXMemberExpression,this.object=G,this.property=q};w.JSXMemberExpression=B;var z=function(G,q){this.type=A.JSXSyntax.JSXAttribute,this.name=G,this.value=q};w.JSXAttribute=z;var F=function(G,q){this.type=A.JSXSyntax.JSXNamespacedName,this.namespace=G,this.name=q};w.JSXNamespacedName=F;var I=function(G,q,K){this.type=A.JSXSyntax.JSXOpeningElement,this.name=G,this.selfClosing=q,this.attributes=K};w.JSXOpeningElement=I;var L=function(G){this.type=A.JSXSyntax.JSXSpreadAttribute,this.argument=G};w.JSXSpreadAttribute=L;var W=function(G,q){this.type=A.JSXSyntax.JSXText,this.value=G,this.raw=q};w.JSXText=W},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(2),_=function(_t){this.type=A.Syntax.ArrayExpression,this.elements=_t};w.ArrayExpression=_;var M=function(_t){this.type=A.Syntax.ArrayPattern,this.elements=_t};w.ArrayPattern=M;var P=function(_t,it,mt){this.type=A.Syntax.ArrowFunctionExpression,this.id=null,this.params=_t,this.body=it,this.generator=!1,this.expression=mt,this.async=!1};w.ArrowFunctionExpression=P;var E=function(_t,it,mt){this.type=A.Syntax.AssignmentExpression,this.operator=_t,this.left=it,this.right=mt};w.AssignmentExpression=E;var R=function(_t,it){this.type=A.Syntax.AssignmentPattern,this.left=_t,this.right=it};w.AssignmentPattern=R;var B=function(_t,it,mt){this.type=A.Syntax.ArrowFunctionExpression,this.id=null,this.params=_t,this.body=it,this.generator=!1,this.expression=mt,this.async=!0};w.AsyncArrowFunctionExpression=B;var z=function(_t,it,mt){this.type=A.Syntax.FunctionDeclaration,this.id=_t,this.params=it,this.body=mt,this.generator=!1,this.expression=!1,this.async=!0};w.AsyncFunctionDeclaration=z;var F=function(_t,it,mt){this.type=A.Syntax.FunctionExpression,this.id=_t,this.params=it,this.body=mt,this.generator=!1,this.expression=!1,this.async=!0};w.AsyncFunctionExpression=F;var I=function(_t){this.type=A.Syntax.AwaitExpression,this.argument=_t};w.AwaitExpression=I;var L=function(_t,it,mt){var St=_t==="||"||_t==="&&";this.type=St?A.Syntax.LogicalExpression:A.Syntax.BinaryExpression,this.operator=_t,this.left=it,this.right=mt};w.BinaryExpression=L;var W=function(_t){this.type=A.Syntax.BlockStatement,this.body=_t};w.BlockStatement=W;var G=function(_t){this.type=A.Syntax.BreakStatement,this.label=_t};w.BreakStatement=G;var q=function(_t,it){this.type=A.Syntax.CallExpression,this.callee=_t,this.arguments=it};w.CallExpression=q;var K=function(_t,it){this.type=A.Syntax.CatchClause,this.param=_t,this.body=it};w.CatchClause=K;var Z=function(_t){this.type=A.Syntax.ClassBody,this.body=_t};w.ClassBody=Z;var J=function(_t,it,mt){this.type=A.Syntax.ClassDeclaration,this.id=_t,this.superClass=it,this.body=mt};w.ClassDeclaration=J;var te=function(_t,it,mt){this.type=A.Syntax.ClassExpression,this.id=_t,this.superClass=it,this.body=mt};w.ClassExpression=te;var Q=function(_t,it){this.type=A.Syntax.MemberExpression,this.computed=!0,this.object=_t,this.property=it};w.ComputedMemberExpression=Q;var me=function(_t,it,mt){this.type=A.Syntax.ConditionalExpression,this.test=_t,this.consequent=it,this.alternate=mt};w.ConditionalExpression=me;var Xe=function(_t){this.type=A.Syntax.ContinueStatement,this.label=_t};w.ContinueStatement=Xe;var Ve=function(){this.type=A.Syntax.DebuggerStatement};w.DebuggerStatement=Ve;var Ye=function(_t,it){this.type=A.Syntax.ExpressionStatement,this.expression=_t,this.directive=it};w.Directive=Ye;var qe=function(_t,it){this.type=A.Syntax.DoWhileStatement,this.body=_t,this.test=it};w.DoWhileStatement=qe;var et=function(){this.type=A.Syntax.EmptyStatement};w.EmptyStatement=et;var je=function(_t){this.type=A.Syntax.ExportAllDeclaration,this.source=_t};w.ExportAllDeclaration=je;var Ke=function(_t){this.type=A.Syntax.ExportDefaultDeclaration,this.declaration=_t};w.ExportDefaultDeclaration=Ke;var Je=function(_t,it,mt){this.type=A.Syntax.ExportNamedDeclaration,this.declaration=_t,this.specifiers=it,this.source=mt};w.ExportNamedDeclaration=Je;var at=function(_t,it){this.type=A.Syntax.ExportSpecifier,this.exported=it,this.local=_t};w.ExportSpecifier=at;var nt=function(_t){this.type=A.Syntax.ExpressionStatement,this.expression=_t};w.ExpressionStatement=nt;var ct=function(_t,it,mt){this.type=A.Syntax.ForInStatement,this.left=_t,this.right=it,this.body=mt,this.each=!1};w.ForInStatement=ct;var pt=function(_t,it,mt){this.type=A.Syntax.ForOfStatement,this.left=_t,this.right=it,this.body=mt};w.ForOfStatement=pt;var rt=function(_t,it,mt,St){this.type=A.Syntax.ForStatement,this.init=_t,this.test=it,this.update=mt,this.body=St};w.ForStatement=rt;var ht=function(_t,it,mt,St){this.type=A.Syntax.FunctionDeclaration,this.id=_t,this.params=it,this.body=mt,this.generator=St,this.expression=!1,this.async=!1};w.FunctionDeclaration=ht;var yt=function(_t,it,mt,St){this.type=A.Syntax.FunctionExpression,this.id=_t,this.params=it,this.body=mt,this.generator=St,this.expression=!1,this.async=!1};w.FunctionExpression=yt;var wt=function(_t){this.type=A.Syntax.Identifier,this.name=_t};w.Identifier=wt;var ft=function(_t,it,mt){this.type=A.Syntax.IfStatement,this.test=_t,this.consequent=it,this.alternate=mt};w.IfStatement=ft;var He=function(_t,it){this.type=A.Syntax.ImportDeclaration,this.specifiers=_t,this.source=it};w.ImportDeclaration=He;var le=function(_t){this.type=A.Syntax.ImportDefaultSpecifier,this.local=_t};w.ImportDefaultSpecifier=le;var be=function(_t){this.type=A.Syntax.ImportNamespaceSpecifier,this.local=_t};w.ImportNamespaceSpecifier=be;var we=function(_t,it){this.type=A.Syntax.ImportSpecifier,this.local=_t,this.imported=it};w.ImportSpecifier=we;var ze=function(_t,it){this.type=A.Syntax.LabeledStatement,this.label=_t,this.body=it};w.LabeledStatement=ze;var Ze=function(_t,it){this.type=A.Syntax.Literal,this.value=_t,this.raw=it};w.Literal=Ze;var Qe=function(_t,it){this.type=A.Syntax.MetaProperty,this.meta=_t,this.property=it};w.MetaProperty=Qe;var st=function(_t,it,mt,St,Ot){this.type=A.Syntax.MethodDefinition,this.key=_t,this.computed=it,this.value=mt,this.kind=St,this.static=Ot};w.MethodDefinition=st;var lt=function(_t){this.type=A.Syntax.Program,this.body=_t,this.sourceType="module"};w.Module=lt;var ot=function(_t,it){this.type=A.Syntax.NewExpression,this.callee=_t,this.arguments=it};w.NewExpression=ot;var ut=function(_t){this.type=A.Syntax.ObjectExpression,this.properties=_t};w.ObjectExpression=ut;var gt=function(_t){this.type=A.Syntax.ObjectPattern,this.properties=_t};w.ObjectPattern=gt;var vt=function(_t,it,mt,St,Ot,Nt){this.type=A.Syntax.Property,this.key=it,this.computed=mt,this.value=St,this.kind=_t,this.method=Ot,this.shorthand=Nt};w.Property=vt;var xt=function(_t,it,mt,St){this.type=A.Syntax.Literal,this.value=_t,this.raw=it,this.regex={pattern:mt,flags:St}};w.RegexLiteral=xt;var Pt=function(_t){this.type=A.Syntax.RestElement,this.argument=_t};w.RestElement=Pt;var bt=function(_t){this.type=A.Syntax.ReturnStatement,this.argument=_t};w.ReturnStatement=bt;var Dt=function(_t){this.type=A.Syntax.Program,this.body=_t,this.sourceType="script"};w.Script=Dt;var tt=function(_t){this.type=A.Syntax.SequenceExpression,this.expressions=_t};w.SequenceExpression=tt;var Et=function(_t){this.type=A.Syntax.SpreadElement,this.argument=_t};w.SpreadElement=Et;var Ct=function(_t,it){this.type=A.Syntax.MemberExpression,this.computed=!1,this.object=_t,this.property=it};w.StaticMemberExpression=Ct;var Mt=function(){this.type=A.Syntax.Super};w.Super=Mt;var dt=function(_t,it){this.type=A.Syntax.SwitchCase,this.test=_t,this.consequent=it};w.SwitchCase=dt;var At=function(_t,it){this.type=A.Syntax.SwitchStatement,this.discriminant=_t,this.cases=it};w.SwitchStatement=At;var Tt=function(_t,it){this.type=A.Syntax.TaggedTemplateExpression,this.tag=_t,this.quasi=it};w.TaggedTemplateExpression=Tt;var kt=function(_t,it){this.type=A.Syntax.TemplateElement,this.value=_t,this.tail=it};w.TemplateElement=kt;var Rt=function(_t,it){this.type=A.Syntax.TemplateLiteral,this.quasis=_t,this.expressions=it};w.TemplateLiteral=Rt;var Ft=function(){this.type=A.Syntax.ThisExpression};w.ThisExpression=Ft;var It=function(_t){this.type=A.Syntax.ThrowStatement,this.argument=_t};w.ThrowStatement=It;var Vt=function(_t,it,mt){this.type=A.Syntax.TryStatement,this.block=_t,this.handler=it,this.finalizer=mt};w.TryStatement=Vt;var Ut=function(_t,it){this.type=A.Syntax.UnaryExpression,this.operator=_t,this.argument=it,this.prefix=!0};w.UnaryExpression=Ut;var Gt=function(_t,it,mt){this.type=A.Syntax.UpdateExpression,this.operator=_t,this.argument=it,this.prefix=mt};w.UpdateExpression=Gt;var Yt=function(_t,it){this.type=A.Syntax.VariableDeclaration,this.declarations=_t,this.kind=it};w.VariableDeclaration=Yt;var jt=function(_t,it){this.type=A.Syntax.VariableDeclarator,this.id=_t,this.init=it};w.VariableDeclarator=jt;var Kt=function(_t,it){this.type=A.Syntax.WhileStatement,this.test=_t,this.body=it};w.WhileStatement=Kt;var oi=function(_t,it){this.type=A.Syntax.WithStatement,this.object=_t,this.body=it};w.WithStatement=oi;var di=function(_t,it){this.type=A.Syntax.YieldExpression,this.argument=_t,this.delegate=it};w.YieldExpression=di},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(9),_=C(10),M=C(11),P=C(7),E=C(12),R=C(2),B=C(13),z=function(){function F(I,L,W){L===void 0&&(L={}),this.config={range:typeof L.range=="boolean"&&L.range,loc:typeof L.loc=="boolean"&&L.loc,source:null,tokens:typeof L.tokens=="boolean"&&L.tokens,comment:typeof L.comment=="boolean"&&L.comment,tolerant:typeof L.tolerant=="boolean"&&L.tolerant},this.config.loc&&L.source&&L.source!==null&&(this.config.source=String(L.source)),this.delegate=W,this.errorHandler=new _.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new E.Scanner(I,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return F.prototype.throwError=function(I){for(var L=[],W=1;W<arguments.length;W++)L[W-1]=arguments[W];var G=Array.prototype.slice.call(arguments,1),q=I.replace(/%(\d)/g,function(te,Q){return A.assert(Q<G.length,"Message reference must be in range"),G[Q]}),K=this.lastMarker.index,Z=this.lastMarker.line,J=this.lastMarker.column+1;throw this.errorHandler.createError(K,Z,J,q)},F.prototype.tolerateError=function(I){for(var L=[],W=1;W<arguments.length;W++)L[W-1]=arguments[W];var G=Array.prototype.slice.call(arguments,1),q=I.replace(/%(\d)/g,function(te,Q){return A.assert(Q<G.length,"Message reference must be in range"),G[Q]}),K=this.lastMarker.index,Z=this.scanner.lineNumber,J=this.lastMarker.column+1;this.errorHandler.tolerateError(K,Z,J,q)},F.prototype.unexpectedTokenError=function(I,L){var W,G=L||M.Messages.UnexpectedToken;if(I?(L||(G=I.type===2?M.Messages.UnexpectedEOS:I.type===3?M.Messages.UnexpectedIdentifier:I.type===6?M.Messages.UnexpectedNumber:I.type===8?M.Messages.UnexpectedString:I.type===10?M.Messages.UnexpectedTemplate:M.Messages.UnexpectedToken,I.type===4&&(this.scanner.isFutureReservedWord(I.value)?G=M.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(I.value)&&(G=M.Messages.StrictReservedWord))),W=I.value):W="ILLEGAL",G=G.replace("%0",W),I&&typeof I.lineNumber=="number"){var q=I.start,K=I.lineNumber,Z=this.lastMarker.index-this.lastMarker.column,J=I.start-Z+1;return this.errorHandler.createError(q,K,J,G)}return q=this.lastMarker.index,K=this.lastMarker.line,J=this.lastMarker.column+1,this.errorHandler.createError(q,K,J,G)},F.prototype.throwUnexpectedToken=function(I,L){throw this.unexpectedTokenError(I,L)},F.prototype.tolerateUnexpectedToken=function(I,L){this.errorHandler.tolerate(this.unexpectedTokenError(I,L))},F.prototype.collectComments=function(){if(this.config.comment){var I=this.scanner.scanComments();if(I.length>0&&this.delegate)for(var L=0;L<I.length;++L){var W=I[L],G=void 0;G={type:W.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(W.slice[0],W.slice[1])},this.config.range&&(G.range=W.range),this.config.loc&&(G.loc=W.loc);var q={start:{line:W.loc.start.line,column:W.loc.start.column,offset:W.range[0]},end:{line:W.loc.end.line,column:W.loc.end.column,offset:W.range[1]}};this.delegate(G,q)}}else this.scanner.scanComments()},F.prototype.getTokenRaw=function(I){return this.scanner.source.slice(I.start,I.end)},F.prototype.convertToken=function(I){var L={type:B.TokenName[I.type],value:this.getTokenRaw(I)};if(this.config.range&&(L.range=[I.start,I.end]),this.config.loc&&(L.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),I.type===9){var W=I.pattern,G=I.flags;L.regex={pattern:W,flags:G}}return L},F.prototype.nextToken=function(){var I=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var L=this.scanner.lex();return this.hasLineTerminator=I.lineNumber!==L.lineNumber,L&&this.context.strict&&L.type===3&&this.scanner.isStrictModeReservedWord(L.value)&&(L.type=4),this.lookahead=L,this.config.tokens&&L.type!==2&&this.tokens.push(this.convertToken(L)),I},F.prototype.nextRegexToken=function(){this.collectComments();var I=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(I))),this.lookahead=I,this.nextToken(),I},F.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},F.prototype.startNode=function(I,L){L===void 0&&(L=0);var W=I.start-I.lineStart,G=I.lineNumber;return W<0&&(W+=L,G--),{index:I.start,line:G,column:W}},F.prototype.finalize=function(I,L){if(this.config.range&&(L.range=[I.index,this.lastMarker.index]),this.config.loc&&(L.loc={start:{line:I.line,column:I.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(L.loc.source=this.config.source)),this.delegate){var W={start:{line:I.line,column:I.column,offset:I.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(L,W)}return L},F.prototype.expect=function(I){var L=this.nextToken();L.type===7&&L.value===I||this.throwUnexpectedToken(L)},F.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var I=this.lookahead;I.type===7&&I.value===","?this.nextToken():I.type===7&&I.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(I)):this.tolerateUnexpectedToken(I,M.Messages.UnexpectedToken)}else this.expect(",")},F.prototype.expectKeyword=function(I){var L=this.nextToken();L.type===4&&L.value===I||this.throwUnexpectedToken(L)},F.prototype.match=function(I){return this.lookahead.type===7&&this.lookahead.value===I},F.prototype.matchKeyword=function(I){return this.lookahead.type===4&&this.lookahead.value===I},F.prototype.matchContextualKeyword=function(I){return this.lookahead.type===3&&this.lookahead.value===I},F.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var I=this.lookahead.value;return I==="="||I==="*="||I==="**="||I==="/="||I==="%="||I==="+="||I==="-="||I==="<<="||I===">>="||I===">>>="||I==="&="||I==="^="||I==="|="},F.prototype.isolateCoverGrammar=function(I){var L=this.context.isBindingElement,W=this.context.isAssignmentTarget,G=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var q=I.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=L,this.context.isAssignmentTarget=W,this.context.firstCoverInitializedNameError=G,q},F.prototype.inheritCoverGrammar=function(I){var L=this.context.isBindingElement,W=this.context.isAssignmentTarget,G=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var q=I.call(this);return this.context.isBindingElement=this.context.isBindingElement&&L,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&W,this.context.firstCoverInitializedNameError=G||this.context.firstCoverInitializedNameError,q},F.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},F.prototype.parsePrimaryExpression=function(){var I,L,W,G=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),I=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(G,new P.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,M.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,L=this.nextToken(),W=this.getTokenRaw(L),I=this.finalize(G,new P.Literal(L.value,W));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,L=this.nextToken(),W=this.getTokenRaw(L),I=this.finalize(G,new P.Literal(L.value==="true",W));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,L=this.nextToken(),W=this.getTokenRaw(L),I=this.finalize(G,new P.Literal(null,W));break;case 10:I=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,I=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":I=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":I=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,L=this.nextRegexToken(),W=this.getTokenRaw(L),I=this.finalize(G,new P.RegexLiteral(L.regex,W,L.pattern,L.flags));break;default:I=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?I=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?I=this.finalize(G,new P.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?I=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),I=this.finalize(G,new P.ThisExpression)):I=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:I=this.throwUnexpectedToken(this.nextToken())}return I},F.prototype.parseSpreadElement=function(){var I=this.createNode();this.expect("...");var L=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(I,new P.SpreadElement(L))},F.prototype.parseArrayInitializer=function(){var I=this.createNode(),L=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),L.push(null);else if(this.match("...")){var W=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),L.push(W)}else L.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(I,new P.ArrayExpression(L))},F.prototype.parsePropertyMethod=function(I){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var L=this.context.strict,W=this.context.allowStrictDirective;this.context.allowStrictDirective=I.simple;var G=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&I.firstRestricted&&this.tolerateUnexpectedToken(I.firstRestricted,I.message),this.context.strict&&I.stricted&&this.tolerateUnexpectedToken(I.stricted,I.message),this.context.strict=L,this.context.allowStrictDirective=W,G},F.prototype.parsePropertyMethodFunction=function(){var I=this.createNode(),L=this.context.allowYield;this.context.allowYield=!0;var W=this.parseFormalParameters(),G=this.parsePropertyMethod(W);return this.context.allowYield=L,this.finalize(I,new P.FunctionExpression(null,W.params,G,!1))},F.prototype.parsePropertyMethodAsyncFunction=function(){var I=this.createNode(),L=this.context.allowYield,W=this.context.await;this.context.allowYield=!1,this.context.await=!0;var G=this.parseFormalParameters(),q=this.parsePropertyMethod(G);return this.context.allowYield=L,this.context.await=W,this.finalize(I,new P.AsyncFunctionExpression(null,G.params,q))},F.prototype.parseObjectPropertyKey=function(){var I,L=this.createNode(),W=this.nextToken();switch(W.type){case 8:case 6:this.context.strict&&W.octal&&this.tolerateUnexpectedToken(W,M.Messages.StrictOctalLiteral);var G=this.getTokenRaw(W);I=this.finalize(L,new P.Literal(W.value,G));break;case 3:case 1:case 5:case 4:I=this.finalize(L,new P.Identifier(W.value));break;case 7:W.value==="["?(I=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):I=this.throwUnexpectedToken(W);break;default:I=this.throwUnexpectedToken(W)}return I},F.prototype.isPropertyKey=function(I,L){return I.type===R.Syntax.Identifier&&I.name===L||I.type===R.Syntax.Literal&&I.value===L},F.prototype.parseObjectProperty=function(I){var L,W=this.createNode(),G=this.lookahead,q=null,K=null,Z=!1,J=!1,te=!1,Q=!1;if(G.type===3){var me=G.value;this.nextToken(),Z=this.match("["),q=(Q=!(this.hasLineTerminator||me!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(W,new P.Identifier(me))}else this.match("*")?this.nextToken():(Z=this.match("["),q=this.parseObjectPropertyKey());var Xe=this.qualifiedPropertyName(this.lookahead);if(G.type===3&&!Q&&G.value==="get"&&Xe)L="get",Z=this.match("["),q=this.parseObjectPropertyKey(),this.context.allowYield=!1,K=this.parseGetterMethod();else if(G.type===3&&!Q&&G.value==="set"&&Xe)L="set",Z=this.match("["),q=this.parseObjectPropertyKey(),K=this.parseSetterMethod();else if(G.type===7&&G.value==="*"&&Xe)L="init",Z=this.match("["),q=this.parseObjectPropertyKey(),K=this.parseGeneratorMethod(),J=!0;else if(q||this.throwUnexpectedToken(this.lookahead),L="init",this.match(":")&&!Q)!Z&&this.isPropertyKey(q,"__proto__")&&(I.value&&this.tolerateError(M.Messages.DuplicateProtoProperty),I.value=!0),this.nextToken(),K=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))K=Q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),J=!0;else if(G.type===3)if(me=this.finalize(W,new P.Identifier(G.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),te=!0;var Ve=this.isolateCoverGrammar(this.parseAssignmentExpression);K=this.finalize(W,new P.AssignmentPattern(me,Ve))}else te=!0,K=me;else this.throwUnexpectedToken(this.nextToken());return this.finalize(W,new P.Property(L,q,Z,K,J,te))},F.prototype.parseObjectInitializer=function(){var I=this.createNode();this.expect("{");for(var L=[],W={value:!1};!this.match("}");)L.push(this.parseObjectProperty(W)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(I,new P.ObjectExpression(L))},F.prototype.parseTemplateHead=function(){A.assert(this.lookahead.head,"Template literal must start with a template head");var I=this.createNode(),L=this.nextToken(),W=L.value,G=L.cooked;return this.finalize(I,new P.TemplateElement({raw:W,cooked:G},L.tail))},F.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var I=this.createNode(),L=this.nextToken(),W=L.value,G=L.cooked;return this.finalize(I,new P.TemplateElement({raw:W,cooked:G},L.tail))},F.prototype.parseTemplateLiteral=function(){var I=this.createNode(),L=[],W=[],G=this.parseTemplateHead();for(W.push(G);!G.tail;)L.push(this.parseExpression()),G=this.parseTemplateElement(),W.push(G);return this.finalize(I,new P.TemplateLiteral(W,L))},F.prototype.reinterpretExpressionAsPattern=function(I){switch(I.type){case R.Syntax.Identifier:case R.Syntax.MemberExpression:case R.Syntax.RestElement:case R.Syntax.AssignmentPattern:break;case R.Syntax.SpreadElement:I.type=R.Syntax.RestElement,this.reinterpretExpressionAsPattern(I.argument);break;case R.Syntax.ArrayExpression:I.type=R.Syntax.ArrayPattern;for(var L=0;L<I.elements.length;L++)I.elements[L]!==null&&this.reinterpretExpressionAsPattern(I.elements[L]);break;case R.Syntax.ObjectExpression:for(I.type=R.Syntax.ObjectPattern,L=0;L<I.properties.length;L++)this.reinterpretExpressionAsPattern(I.properties[L].value);break;case R.Syntax.AssignmentExpression:I.type=R.Syntax.AssignmentPattern,delete I.operator,this.reinterpretExpressionAsPattern(I.left)}},F.prototype.parseGroupExpression=function(){var I;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),I={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var L=this.lookahead,W=[];if(this.match("..."))I=this.parseRestElement(W),this.expect(")"),this.match("=>")||this.expect("=>"),I={type:"ArrowParameterPlaceHolder",params:[I],async:!1};else{var G=!1;if(this.context.isBindingElement=!0,I=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var q=[];for(this.context.isAssignmentTarget=!1,q.push(I);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var K=0;K<q.length;K++)this.reinterpretExpressionAsPattern(q[K]);G=!0,I={type:"ArrowParameterPlaceHolder",params:q,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),q.push(this.parseRestElement(W)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,K=0;K<q.length;K++)this.reinterpretExpressionAsPattern(q[K]);G=!0,I={type:"ArrowParameterPlaceHolder",params:q,async:!1}}else q.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(G)break}G||(I=this.finalize(this.startNode(L),new P.SequenceExpression(q)))}if(!G){if(this.expect(")"),this.match("=>")&&(I.type===R.Syntax.Identifier&&I.name==="yield"&&(G=!0,I={type:"ArrowParameterPlaceHolder",params:[I],async:!1}),!G)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),I.type===R.Syntax.SequenceExpression)for(K=0;K<I.expressions.length;K++)this.reinterpretExpressionAsPattern(I.expressions[K]);else this.reinterpretExpressionAsPattern(I);I={type:"ArrowParameterPlaceHolder",params:I.type===R.Syntax.SequenceExpression?I.expressions:[I],async:!1}}this.context.isBindingElement=!1}}}return I},F.prototype.parseArguments=function(){this.expect("(");var I=[];if(!this.match(")"))for(;;){var L=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(I.push(L),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),I},F.prototype.isIdentifierName=function(I){return I.type===3||I.type===4||I.type===1||I.type===5},F.prototype.parseIdentifierName=function(){var I=this.createNode(),L=this.nextToken();return this.isIdentifierName(L)||this.throwUnexpectedToken(L),this.finalize(I,new P.Identifier(L.value))},F.prototype.parseNewExpression=function(){var I,L=this.createNode(),W=this.parseIdentifierName();if(A.assert(W.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var G=this.parseIdentifierName();I=new P.MetaProperty(W,G)}else this.throwUnexpectedToken(this.lookahead);else{var q=this.isolateCoverGrammar(this.parseLeftHandSideExpression),K=this.match("(")?this.parseArguments():[];I=new P.NewExpression(q,K),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(L,I)},F.prototype.parseAsyncArgument=function(){var I=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,I},F.prototype.parseAsyncArguments=function(){this.expect("(");var I=[];if(!this.match(")"))for(;;){var L=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(I.push(L),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),I},F.prototype.parseLeftHandSideExpressionAllowCall=function(){var I,L=this.lookahead,W=this.matchContextualKeyword("async"),G=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(I=this.createNode(),this.nextToken(),I=this.finalize(I,new P.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):I=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var q=this.parseIdentifierName();I=this.finalize(this.startNode(L),new P.StaticMemberExpression(I,q))}else if(this.match("(")){var K=W&&L.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var Z=K?this.parseAsyncArguments():this.parseArguments();if(I=this.finalize(this.startNode(L),new P.CallExpression(I,Z)),K&&this.match("=>")){for(var J=0;J<Z.length;++J)this.reinterpretExpressionAsPattern(Z[J]);I={type:"ArrowParameterPlaceHolder",params:Z,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),q=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),I=this.finalize(this.startNode(L),new P.ComputedMemberExpression(I,q));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var te=this.parseTemplateLiteral();I=this.finalize(this.startNode(L),new P.TaggedTemplateExpression(I,te))}return this.context.allowIn=G,I},F.prototype.parseSuper=function(){var I=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(I,new P.Super)},F.prototype.parseLeftHandSideExpression=function(){A.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var I=this.startNode(this.lookahead),L=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var W=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),L=this.finalize(I,new P.ComputedMemberExpression(L,W))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),W=this.parseIdentifierName(),L=this.finalize(I,new P.StaticMemberExpression(L,W));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var G=this.parseTemplateLiteral();L=this.finalize(I,new P.TaggedTemplateExpression(L,G))}return L},F.prototype.parseUpdateExpression=function(){var I,L=this.lookahead;if(this.match("++")||this.match("--")){var W=this.startNode(L),G=this.nextToken();I=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&I.type===R.Syntax.Identifier&&this.scanner.isRestrictedWord(I.name)&&this.tolerateError(M.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(M.Messages.InvalidLHSInAssignment);var q=!0;I=this.finalize(W,new P.UpdateExpression(G.value,I,q)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(I=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&I.type===R.Syntax.Identifier&&this.scanner.isRestrictedWord(I.name)&&this.tolerateError(M.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(M.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var K=this.nextToken().value;q=!1,I=this.finalize(this.startNode(L),new P.UpdateExpression(K,I,q))}return I},F.prototype.parseAwaitExpression=function(){var I=this.createNode();this.nextToken();var L=this.parseUnaryExpression();return this.finalize(I,new P.AwaitExpression(L))},F.prototype.parseUnaryExpression=function(){var I;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var L=this.startNode(this.lookahead),W=this.nextToken();I=this.inheritCoverGrammar(this.parseUnaryExpression),I=this.finalize(L,new P.UnaryExpression(W.value,I)),this.context.strict&&I.operator==="delete"&&I.argument.type===R.Syntax.Identifier&&this.tolerateError(M.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else I=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return I},F.prototype.parseExponentiationExpression=function(){var I=this.lookahead,L=this.inheritCoverGrammar(this.parseUnaryExpression);if(L.type!==R.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var W=L,G=this.isolateCoverGrammar(this.parseExponentiationExpression);L=this.finalize(this.startNode(I),new P.BinaryExpression("**",W,G))}return L},F.prototype.binaryPrecedence=function(I){var L=I.value;return I.type===7?this.operatorPrecedence[L]||0:I.type===4&&(L==="instanceof"||this.context.allowIn&&L==="in")?7:0},F.prototype.parseBinaryExpression=function(){var I=this.lookahead,L=this.inheritCoverGrammar(this.parseExponentiationExpression),W=this.lookahead,G=this.binaryPrecedence(W);if(G>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var q=[I,this.lookahead],K=L,Z=this.isolateCoverGrammar(this.parseExponentiationExpression),J=[K,W.value,Z],te=[G];!((G=this.binaryPrecedence(this.lookahead))<=0);){for(;J.length>2&&G<=te[te.length-1];){Z=J.pop();var Q=J.pop();te.pop(),K=J.pop(),q.pop();var me=this.startNode(q[q.length-1]);J.push(this.finalize(me,new P.BinaryExpression(Q,K,Z)))}J.push(this.nextToken().value),te.push(G),q.push(this.lookahead),J.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var Xe=J.length-1;L=J[Xe];for(var Ve=q.pop();Xe>1;){var Ye=q.pop(),qe=Ve&&Ve.lineStart;me=this.startNode(Ye,qe),Q=J[Xe-1],L=this.finalize(me,new P.BinaryExpression(Q,J[Xe-2],L)),Xe-=2,Ve=Ye}}return L},F.prototype.parseConditionalExpression=function(){var I=this.lookahead,L=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var W=this.context.allowIn;this.context.allowIn=!0;var G=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=W,this.expect(":");var q=this.isolateCoverGrammar(this.parseAssignmentExpression);L=this.finalize(this.startNode(I),new P.ConditionalExpression(L,G,q)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return L},F.prototype.checkPatternParam=function(I,L){switch(L.type){case R.Syntax.Identifier:this.validateParam(I,L,L.name);break;case R.Syntax.RestElement:this.checkPatternParam(I,L.argument);break;case R.Syntax.AssignmentPattern:this.checkPatternParam(I,L.left);break;case R.Syntax.ArrayPattern:for(var W=0;W<L.elements.length;W++)L.elements[W]!==null&&this.checkPatternParam(I,L.elements[W]);break;case R.Syntax.ObjectPattern:for(W=0;W<L.properties.length;W++)this.checkPatternParam(I,L.properties[W].value)}I.simple=I.simple&&L instanceof P.Identifier},F.prototype.reinterpretAsCoverFormalsList=function(I){var L,W=[I],G=!1;switch(I.type){case R.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":W=I.params,G=I.async;break;default:return null}L={simple:!0,paramSet:{}};for(var q=0;q<W.length;++q)(K=W[q]).type===R.Syntax.AssignmentPattern?K.right.type===R.Syntax.YieldExpression&&(K.right.argument&&this.throwUnexpectedToken(this.lookahead),K.right.type=R.Syntax.Identifier,K.right.name="yield",delete K.right.argument,delete K.right.delegate):G&&K.type===R.Syntax.Identifier&&K.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(L,K),W[q]=K;if(this.context.strict||!this.context.allowYield)for(q=0;q<W.length;++q){var K;(K=W[q]).type===R.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(L.message===M.Messages.StrictParamDupe){var Z=this.context.strict?L.stricted:L.firstRestricted;this.throwUnexpectedToken(Z,L.message)}return{simple:L.simple,params:W,stricted:L.stricted,firstRestricted:L.firstRestricted,message:L.message}},F.prototype.parseAssignmentExpression=function(){var I;if(!this.context.allowYield&&this.matchKeyword("yield"))I=this.parseYieldExpression();else{var L=this.lookahead,W=L;if(I=this.parseConditionalExpression(),W.type===3&&W.lineNumber===this.lookahead.lineNumber&&W.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var G=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(G),I={type:"ArrowParameterPlaceHolder",params:[G],async:!0}}if(I.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var q=I.async,K=this.reinterpretAsCoverFormalsList(I);if(K){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var Z=this.context.strict,J=this.context.allowStrictDirective;this.context.allowStrictDirective=K.simple;var te=this.context.allowYield,Q=this.context.await;this.context.allowYield=!0,this.context.await=q;var me=this.startNode(L);this.expect("=>");var Xe=void 0;if(this.match("{")){var Ve=this.context.allowIn;this.context.allowIn=!0,Xe=this.parseFunctionSourceElements(),this.context.allowIn=Ve}else Xe=this.isolateCoverGrammar(this.parseAssignmentExpression);var Ye=Xe.type!==R.Syntax.BlockStatement;this.context.strict&&K.firstRestricted&&this.throwUnexpectedToken(K.firstRestricted,K.message),this.context.strict&&K.stricted&&this.tolerateUnexpectedToken(K.stricted,K.message),I=q?this.finalize(me,new P.AsyncArrowFunctionExpression(K.params,Xe,Ye)):this.finalize(me,new P.ArrowFunctionExpression(K.params,Xe,Ye)),this.context.strict=Z,this.context.allowStrictDirective=J,this.context.allowYield=te,this.context.await=Q}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(M.Messages.InvalidLHSInAssignment),this.context.strict&&I.type===R.Syntax.Identifier){var qe=I;this.scanner.isRestrictedWord(qe.name)&&this.tolerateUnexpectedToken(W,M.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(qe.name)&&this.tolerateUnexpectedToken(W,M.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(I):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var et=(W=this.nextToken()).value,je=this.isolateCoverGrammar(this.parseAssignmentExpression);I=this.finalize(this.startNode(L),new P.AssignmentExpression(et,I,je)),this.context.firstCoverInitializedNameError=null}}return I},F.prototype.parseExpression=function(){var I=this.lookahead,L=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var W=[];for(W.push(L);this.lookahead.type!==2&&this.match(",");)this.nextToken(),W.push(this.isolateCoverGrammar(this.parseAssignmentExpression));L=this.finalize(this.startNode(I),new P.SequenceExpression(W))}return L},F.prototype.parseStatementListItem=function(){var I;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,M.Messages.IllegalExportDeclaration),I=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,M.Messages.IllegalImportDeclaration),I=this.parseImportDeclaration();break;case"const":I=this.parseLexicalDeclaration({inFor:!1});break;case"function":I=this.parseFunctionDeclaration();break;case"class":I=this.parseClassDeclaration();break;case"let":I=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:I=this.parseStatement()}else I=this.parseStatement();return I},F.prototype.parseBlock=function(){var I=this.createNode();this.expect("{");for(var L=[];!this.match("}");)L.push(this.parseStatementListItem());return this.expect("}"),this.finalize(I,new P.BlockStatement(L))},F.prototype.parseLexicalBinding=function(I,L){var W=this.createNode(),G=this.parsePattern([],I);this.context.strict&&G.type===R.Syntax.Identifier&&this.scanner.isRestrictedWord(G.name)&&this.tolerateError(M.Messages.StrictVarName);var q=null;return I==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),q=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(M.Messages.DeclarationMissingInitializer,"const")):(!L.inFor&&G.type!==R.Syntax.Identifier||this.match("="))&&(this.expect("="),q=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(W,new P.VariableDeclarator(G,q))},F.prototype.parseBindingList=function(I,L){for(var W=[this.parseLexicalBinding(I,L)];this.match(",");)this.nextToken(),W.push(this.parseLexicalBinding(I,L));return W},F.prototype.isLexicalDeclaration=function(){var I=this.scanner.saveState();this.scanner.scanComments();var L=this.scanner.lex();return this.scanner.restoreState(I),L.type===3||L.type===7&&L.value==="["||L.type===7&&L.value==="{"||L.type===4&&L.value==="let"||L.type===4&&L.value==="yield"},F.prototype.parseLexicalDeclaration=function(I){var L=this.createNode(),W=this.nextToken().value;A.assert(W==="let"||W==="const","Lexical declaration must be either let or const");var G=this.parseBindingList(W,I);return this.consumeSemicolon(),this.finalize(L,new P.VariableDeclaration(G,W))},F.prototype.parseBindingRestElement=function(I,L){var W=this.createNode();this.expect("...");var G=this.parsePattern(I,L);return this.finalize(W,new P.RestElement(G))},F.prototype.parseArrayPattern=function(I,L){var W=this.createNode();this.expect("[");for(var G=[];!this.match("]");)if(this.match(","))this.nextToken(),G.push(null);else{if(this.match("...")){G.push(this.parseBindingRestElement(I,L));break}G.push(this.parsePatternWithDefault(I,L)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(W,new P.ArrayPattern(G))},F.prototype.parsePropertyPattern=function(I,L){var W,G,q=this.createNode(),K=!1,Z=!1;if(this.lookahead.type===3){var J=this.lookahead;W=this.parseVariableIdentifier();var te=this.finalize(q,new P.Identifier(J.value));if(this.match("=")){I.push(J),Z=!0,this.nextToken();var Q=this.parseAssignmentExpression();G=this.finalize(this.startNode(J),new P.AssignmentPattern(te,Q))}else this.match(":")?(this.expect(":"),G=this.parsePatternWithDefault(I,L)):(I.push(J),Z=!0,G=te)}else K=this.match("["),W=this.parseObjectPropertyKey(),this.expect(":"),G=this.parsePatternWithDefault(I,L);return this.finalize(q,new P.Property("init",W,K,G,!1,Z))},F.prototype.parseObjectPattern=function(I,L){var W=this.createNode(),G=[];for(this.expect("{");!this.match("}");)G.push(this.parsePropertyPattern(I,L)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(W,new P.ObjectPattern(G))},F.prototype.parsePattern=function(I,L){var W;return this.match("[")?W=this.parseArrayPattern(I,L):this.match("{")?W=this.parseObjectPattern(I,L):(!this.matchKeyword("let")||L!=="const"&&L!=="let"||this.tolerateUnexpectedToken(this.lookahead,M.Messages.LetInLexicalBinding),I.push(this.lookahead),W=this.parseVariableIdentifier(L)),W},F.prototype.parsePatternWithDefault=function(I,L){var W=this.lookahead,G=this.parsePattern(I,L);if(this.match("=")){this.nextToken();var q=this.context.allowYield;this.context.allowYield=!0;var K=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=q,G=this.finalize(this.startNode(W),new P.AssignmentPattern(G,K))}return G},F.prototype.parseVariableIdentifier=function(I){var L=this.createNode(),W=this.nextToken();return W.type===4&&W.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(W,M.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(W):W.type!==3?this.context.strict&&W.type===4&&this.scanner.isStrictModeReservedWord(W.value)?this.tolerateUnexpectedToken(W,M.Messages.StrictReservedWord):(this.context.strict||W.value!=="let"||I!=="var")&&this.throwUnexpectedToken(W):(this.context.isModule||this.context.await)&&W.type===3&&W.value==="await"&&this.tolerateUnexpectedToken(W),this.finalize(L,new P.Identifier(W.value))},F.prototype.parseVariableDeclaration=function(I){var L=this.createNode(),W=this.parsePattern([],"var");this.context.strict&&W.type===R.Syntax.Identifier&&this.scanner.isRestrictedWord(W.name)&&this.tolerateError(M.Messages.StrictVarName);var G=null;return this.match("=")?(this.nextToken(),G=this.isolateCoverGrammar(this.parseAssignmentExpression)):W.type===R.Syntax.Identifier||I.inFor||this.expect("="),this.finalize(L,new P.VariableDeclarator(W,G))},F.prototype.parseVariableDeclarationList=function(I){var L={inFor:I.inFor},W=[];for(W.push(this.parseVariableDeclaration(L));this.match(",");)this.nextToken(),W.push(this.parseVariableDeclaration(L));return W},F.prototype.parseVariableStatement=function(){var I=this.createNode();this.expectKeyword("var");var L=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(I,new P.VariableDeclaration(L,"var"))},F.prototype.parseEmptyStatement=function(){var I=this.createNode();return this.expect(";"),this.finalize(I,new P.EmptyStatement)},F.prototype.parseExpressionStatement=function(){var I=this.createNode(),L=this.parseExpression();return this.consumeSemicolon(),this.finalize(I,new P.ExpressionStatement(L))},F.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(M.Messages.StrictFunction),this.parseStatement()},F.prototype.parseIfStatement=function(){var I,L=this.createNode(),W=null;this.expectKeyword("if"),this.expect("(");var G=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),I=this.finalize(this.createNode(),new P.EmptyStatement)):(this.expect(")"),I=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),W=this.parseIfClause())),this.finalize(L,new P.IfStatement(G,I,W))},F.prototype.parseDoWhileStatement=function(){var I=this.createNode();this.expectKeyword("do");var L=this.context.inIteration;this.context.inIteration=!0;var W=this.parseStatement();this.context.inIteration=L,this.expectKeyword("while"),this.expect("(");var G=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(I,new P.DoWhileStatement(W,G))},F.prototype.parseWhileStatement=function(){var I,L=this.createNode();this.expectKeyword("while"),this.expect("(");var W=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),I=this.finalize(this.createNode(),new P.EmptyStatement);else{this.expect(")");var G=this.context.inIteration;this.context.inIteration=!0,I=this.parseStatement(),this.context.inIteration=G}return this.finalize(L,new P.WhileStatement(W,I))},F.prototype.parseForStatement=function(){var I,L,W,G=null,q=null,K=null,Z=!0,J=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){G=this.createNode(),this.nextToken();var te=this.context.allowIn;this.context.allowIn=!1;var Q=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=te,Q.length===1&&this.matchKeyword("in")){var me=Q[0];me.init&&(me.id.type===R.Syntax.ArrayPattern||me.id.type===R.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(M.Messages.ForInOfLoopInitializer,"for-in"),G=this.finalize(G,new P.VariableDeclaration(Q,"var")),this.nextToken(),I=G,L=this.parseExpression(),G=null}else Q.length===1&&Q[0].init===null&&this.matchContextualKeyword("of")?(G=this.finalize(G,new P.VariableDeclaration(Q,"var")),this.nextToken(),I=G,L=this.parseAssignmentExpression(),G=null,Z=!1):(G=this.finalize(G,new P.VariableDeclaration(Q,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){G=this.createNode();var Xe=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(te=this.context.allowIn,this.context.allowIn=!1,Q=this.parseBindingList(Xe,{inFor:!0}),this.context.allowIn=te,Q.length===1&&Q[0].init===null&&this.matchKeyword("in")?(G=this.finalize(G,new P.VariableDeclaration(Q,Xe)),this.nextToken(),I=G,L=this.parseExpression(),G=null):Q.length===1&&Q[0].init===null&&this.matchContextualKeyword("of")?(G=this.finalize(G,new P.VariableDeclaration(Q,Xe)),this.nextToken(),I=G,L=this.parseAssignmentExpression(),G=null,Z=!1):(this.consumeSemicolon(),G=this.finalize(G,new P.VariableDeclaration(Q,Xe)))):(G=this.finalize(G,new P.Identifier(Xe)),this.nextToken(),I=G,L=this.parseExpression(),G=null)}else{var Ve=this.lookahead;if(te=this.context.allowIn,this.context.allowIn=!1,G=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=te,this.matchKeyword("in"))this.context.isAssignmentTarget&&G.type!==R.Syntax.AssignmentExpression||this.tolerateError(M.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(G),I=G,L=this.parseExpression(),G=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&G.type!==R.Syntax.AssignmentExpression||this.tolerateError(M.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(G),I=G,L=this.parseAssignmentExpression(),G=null,Z=!1;else{if(this.match(",")){for(var Ye=[G];this.match(",");)this.nextToken(),Ye.push(this.isolateCoverGrammar(this.parseAssignmentExpression));G=this.finalize(this.startNode(Ve),new P.SequenceExpression(Ye))}this.expect(";")}}if(I===void 0&&(this.match(";")||(q=this.parseExpression()),this.expect(";"),this.match(")")||(K=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),W=this.finalize(this.createNode(),new P.EmptyStatement);else{this.expect(")");var qe=this.context.inIteration;this.context.inIteration=!0,W=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=qe}return I===void 0?this.finalize(J,new P.ForStatement(G,q,K,W)):Z?this.finalize(J,new P.ForInStatement(I,L,W)):this.finalize(J,new P.ForOfStatement(I,L,W))},F.prototype.parseContinueStatement=function(){var I=this.createNode();this.expectKeyword("continue");var L=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var W=this.parseVariableIdentifier();L=W;var G="$"+W.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,G)||this.throwError(M.Messages.UnknownLabel,W.name)}return this.consumeSemicolon(),L!==null||this.context.inIteration||this.throwError(M.Messages.IllegalContinue),this.finalize(I,new P.ContinueStatement(L))},F.prototype.parseBreakStatement=function(){var I=this.createNode();this.expectKeyword("break");var L=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var W=this.parseVariableIdentifier(),G="$"+W.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,G)||this.throwError(M.Messages.UnknownLabel,W.name),L=W}return this.consumeSemicolon(),L!==null||this.context.inIteration||this.context.inSwitch||this.throwError(M.Messages.IllegalBreak),this.finalize(I,new P.BreakStatement(L))},F.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(M.Messages.IllegalReturn);var I=this.createNode();this.expectKeyword("return");var L=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(I,new P.ReturnStatement(L))},F.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(M.Messages.StrictModeWith);var I,L=this.createNode();this.expectKeyword("with"),this.expect("(");var W=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),I=this.finalize(this.createNode(),new P.EmptyStatement)):(this.expect(")"),I=this.parseStatement()),this.finalize(L,new P.WithStatement(W,I))},F.prototype.parseSwitchCase=function(){var I,L=this.createNode();this.matchKeyword("default")?(this.nextToken(),I=null):(this.expectKeyword("case"),I=this.parseExpression()),this.expect(":");for(var W=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)W.push(this.parseStatementListItem());return this.finalize(L,new P.SwitchCase(I,W))},F.prototype.parseSwitchStatement=function(){var I=this.createNode();this.expectKeyword("switch"),this.expect("(");var L=this.parseExpression();this.expect(")");var W=this.context.inSwitch;this.context.inSwitch=!0;var G=[],q=!1;for(this.expect("{");!this.match("}");){var K=this.parseSwitchCase();K.test===null&&(q&&this.throwError(M.Messages.MultipleDefaultsInSwitch),q=!0),G.push(K)}return this.expect("}"),this.context.inSwitch=W,this.finalize(I,new P.SwitchStatement(L,G))},F.prototype.parseLabelledStatement=function(){var I,L=this.createNode(),W=this.parseExpression();if(W.type===R.Syntax.Identifier&&this.match(":")){this.nextToken();var G=W,q="$"+G.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,q)&&this.throwError(M.Messages.Redeclaration,"Label",G.name),this.context.labelSet[q]=!0;var K=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),K=this.parseClassDeclaration();else if(this.matchKeyword("function")){var Z=this.lookahead,J=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(Z,M.Messages.StrictFunction):J.generator&&this.tolerateUnexpectedToken(Z,M.Messages.GeneratorInLegacyContext),K=J}else K=this.parseStatement();delete this.context.labelSet[q],I=new P.LabeledStatement(G,K)}else this.consumeSemicolon(),I=new P.ExpressionStatement(W);return this.finalize(L,I)},F.prototype.parseThrowStatement=function(){var I=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(M.Messages.NewlineAfterThrow);var L=this.parseExpression();return this.consumeSemicolon(),this.finalize(I,new P.ThrowStatement(L))},F.prototype.parseCatchClause=function(){var I=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var L=[],W=this.parsePattern(L),G={},q=0;q<L.length;q++){var K="$"+L[q].value;Object.prototype.hasOwnProperty.call(G,K)&&this.tolerateError(M.Messages.DuplicateBinding,L[q].value),G[K]=!0}this.context.strict&&W.type===R.Syntax.Identifier&&this.scanner.isRestrictedWord(W.name)&&this.tolerateError(M.Messages.StrictCatchVariable),this.expect(")");var Z=this.parseBlock();return this.finalize(I,new P.CatchClause(W,Z))},F.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},F.prototype.parseTryStatement=function(){var I=this.createNode();this.expectKeyword("try");var L=this.parseBlock(),W=this.matchKeyword("catch")?this.parseCatchClause():null,G=this.matchKeyword("finally")?this.parseFinallyClause():null;return W||G||this.throwError(M.Messages.NoCatchOrFinally),this.finalize(I,new P.TryStatement(L,W,G))},F.prototype.parseDebuggerStatement=function(){var I=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(I,new P.DebuggerStatement)},F.prototype.parseStatement=function(){var I;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:I=this.parseExpressionStatement();break;case 7:var L=this.lookahead.value;I=L==="{"?this.parseBlock():L==="("?this.parseExpressionStatement():L===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:I=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":I=this.parseBreakStatement();break;case"continue":I=this.parseContinueStatement();break;case"debugger":I=this.parseDebuggerStatement();break;case"do":I=this.parseDoWhileStatement();break;case"for":I=this.parseForStatement();break;case"function":I=this.parseFunctionDeclaration();break;case"if":I=this.parseIfStatement();break;case"return":I=this.parseReturnStatement();break;case"switch":I=this.parseSwitchStatement();break;case"throw":I=this.parseThrowStatement();break;case"try":I=this.parseTryStatement();break;case"var":I=this.parseVariableStatement();break;case"while":I=this.parseWhileStatement();break;case"with":I=this.parseWithStatement();break;default:I=this.parseExpressionStatement()}break;default:I=this.throwUnexpectedToken(this.lookahead)}return I},F.prototype.parseFunctionSourceElements=function(){var I=this.createNode();this.expect("{");var L=this.parseDirectivePrologues(),W=this.context.labelSet,G=this.context.inIteration,q=this.context.inSwitch,K=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)L.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=W,this.context.inIteration=G,this.context.inSwitch=q,this.context.inFunctionBody=K,this.finalize(I,new P.BlockStatement(L))},F.prototype.validateParam=function(I,L,W){var G="$"+W;this.context.strict?(this.scanner.isRestrictedWord(W)&&(I.stricted=L,I.message=M.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(I.paramSet,G)&&(I.stricted=L,I.message=M.Messages.StrictParamDupe)):I.firstRestricted||(this.scanner.isRestrictedWord(W)?(I.firstRestricted=L,I.message=M.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(W)?(I.firstRestricted=L,I.message=M.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(I.paramSet,G)&&(I.stricted=L,I.message=M.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(I.paramSet,G,{value:!0,enumerable:!0,writable:!0,configurable:!0}):I.paramSet[G]=!0},F.prototype.parseRestElement=function(I){var L=this.createNode();this.expect("...");var W=this.parsePattern(I);return this.match("=")&&this.throwError(M.Messages.DefaultRestParameter),this.match(")")||this.throwError(M.Messages.ParameterAfterRestParameter),this.finalize(L,new P.RestElement(W))},F.prototype.parseFormalParameter=function(I){for(var L=[],W=this.match("...")?this.parseRestElement(L):this.parsePatternWithDefault(L),G=0;G<L.length;G++)this.validateParam(I,L[G],L[G].value);I.simple=I.simple&&W instanceof P.Identifier,I.params.push(W)},F.prototype.parseFormalParameters=function(I){var L;if(L={simple:!0,params:[],firstRestricted:I},this.expect("("),!this.match(")"))for(L.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(L),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:L.simple,params:L.params,stricted:L.stricted,firstRestricted:L.firstRestricted,message:L.message}},F.prototype.matchAsyncFunction=function(){var I=this.matchContextualKeyword("async");if(I){var L=this.scanner.saveState();this.scanner.scanComments();var W=this.scanner.lex();this.scanner.restoreState(L),I=L.lineNumber===W.lineNumber&&W.type===4&&W.value==="function"}return I},F.prototype.parseFunctionDeclaration=function(I){var L=this.createNode(),W=this.matchContextualKeyword("async");W&&this.nextToken(),this.expectKeyword("function");var G,q=!W&&this.match("*");q&&this.nextToken();var K=null,Z=null;if(!I||!this.match("(")){var J=this.lookahead;K=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(J.value)&&this.tolerateUnexpectedToken(J,M.Messages.StrictFunctionName):this.scanner.isRestrictedWord(J.value)?(Z=J,G=M.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(J.value)&&(Z=J,G=M.Messages.StrictReservedWord)}var te=this.context.await,Q=this.context.allowYield;this.context.await=W,this.context.allowYield=!q;var me=this.parseFormalParameters(Z),Xe=me.params,Ve=me.stricted;Z=me.firstRestricted,me.message&&(G=me.message);var Ye=this.context.strict,qe=this.context.allowStrictDirective;this.context.allowStrictDirective=me.simple;var et=this.parseFunctionSourceElements();return this.context.strict&&Z&&this.throwUnexpectedToken(Z,G),this.context.strict&&Ve&&this.tolerateUnexpectedToken(Ve,G),this.context.strict=Ye,this.context.allowStrictDirective=qe,this.context.await=te,this.context.allowYield=Q,W?this.finalize(L,new P.AsyncFunctionDeclaration(K,Xe,et)):this.finalize(L,new P.FunctionDeclaration(K,Xe,et,q))},F.prototype.parseFunctionExpression=function(){var I=this.createNode(),L=this.matchContextualKeyword("async");L&&this.nextToken(),this.expectKeyword("function");var W,G=!L&&this.match("*");G&&this.nextToken();var q,K=null,Z=this.context.await,J=this.context.allowYield;if(this.context.await=L,this.context.allowYield=!G,!this.match("(")){var te=this.lookahead;K=this.context.strict||G||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(te.value)&&this.tolerateUnexpectedToken(te,M.Messages.StrictFunctionName):this.scanner.isRestrictedWord(te.value)?(q=te,W=M.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(te.value)&&(q=te,W=M.Messages.StrictReservedWord)}var Q=this.parseFormalParameters(q),me=Q.params,Xe=Q.stricted;q=Q.firstRestricted,Q.message&&(W=Q.message);var Ve=this.context.strict,Ye=this.context.allowStrictDirective;this.context.allowStrictDirective=Q.simple;var qe=this.parseFunctionSourceElements();return this.context.strict&&q&&this.throwUnexpectedToken(q,W),this.context.strict&&Xe&&this.tolerateUnexpectedToken(Xe,W),this.context.strict=Ve,this.context.allowStrictDirective=Ye,this.context.await=Z,this.context.allowYield=J,L?this.finalize(I,new P.AsyncFunctionExpression(K,me,qe)):this.finalize(I,new P.FunctionExpression(K,me,qe,G))},F.prototype.parseDirective=function(){var I=this.lookahead,L=this.createNode(),W=this.parseExpression(),G=W.type===R.Syntax.Literal?this.getTokenRaw(I).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(L,G?new P.Directive(W,G):new P.ExpressionStatement(W))},F.prototype.parseDirectivePrologues=function(){for(var I=null,L=[];;){var W=this.lookahead;if(W.type!==8)break;var G=this.parseDirective();L.push(G);var q=G.directive;if(typeof q!="string")break;q==="use strict"?(this.context.strict=!0,I&&this.tolerateUnexpectedToken(I,M.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(W,M.Messages.IllegalLanguageModeDirective)):!I&&W.octal&&(I=W)}return L},F.prototype.qualifiedPropertyName=function(I){switch(I.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return I.value==="["}return!1},F.prototype.parseGetterMethod=function(){var I=this.createNode(),L=this.context.allowYield;this.context.allowYield=!0;var W=this.parseFormalParameters();W.params.length>0&&this.tolerateError(M.Messages.BadGetterArity);var G=this.parsePropertyMethod(W);return this.context.allowYield=L,this.finalize(I,new P.FunctionExpression(null,W.params,G,!1))},F.prototype.parseSetterMethod=function(){var I=this.createNode(),L=this.context.allowYield;this.context.allowYield=!0;var W=this.parseFormalParameters();W.params.length!==1?this.tolerateError(M.Messages.BadSetterArity):W.params[0]instanceof P.RestElement&&this.tolerateError(M.Messages.BadSetterRestParameter);var G=this.parsePropertyMethod(W);return this.context.allowYield=L,this.finalize(I,new P.FunctionExpression(null,W.params,G,!1))},F.prototype.parseGeneratorMethod=function(){var I=this.createNode(),L=this.context.allowYield;this.context.allowYield=!0;var W=this.parseFormalParameters();this.context.allowYield=!1;var G=this.parsePropertyMethod(W);return this.context.allowYield=L,this.finalize(I,new P.FunctionExpression(null,W.params,G,!0))},F.prototype.isStartOfExpression=function(){var I=!0,L=this.lookahead.value;switch(this.lookahead.type){case 7:I=L==="["||L==="("||L==="{"||L==="+"||L==="-"||L==="!"||L==="~"||L==="++"||L==="--"||L==="/"||L==="/=";break;case 4:I=L==="class"||L==="delete"||L==="function"||L==="let"||L==="new"||L==="super"||L==="this"||L==="typeof"||L==="void"||L==="yield"}return I},F.prototype.parseYieldExpression=function(){var I=this.createNode();this.expectKeyword("yield");var L=null,W=!1;if(!this.hasLineTerminator){var G=this.context.allowYield;this.context.allowYield=!1,(W=this.match("*"))?(this.nextToken(),L=this.parseAssignmentExpression()):this.isStartOfExpression()&&(L=this.parseAssignmentExpression()),this.context.allowYield=G}return this.finalize(I,new P.YieldExpression(L,W))},F.prototype.parseClassElement=function(I){var L=this.lookahead,W=this.createNode(),G="",q=null,K=null,Z=!1,J=!1,te=!1,Q=!1;if(this.match("*"))this.nextToken();else if(Z=this.match("["),(q=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(L=this.lookahead,te=!0,Z=this.match("["),this.match("*")?this.nextToken():q=this.parseObjectPropertyKey()),L.type===3&&!this.hasLineTerminator&&L.value==="async"){var me=this.lookahead.value;me!==":"&&me!=="("&&me!=="*"&&(Q=!0,L=this.lookahead,q=this.parseObjectPropertyKey(),L.type===3&&L.value==="constructor"&&this.tolerateUnexpectedToken(L,M.Messages.ConstructorIsAsync))}var Xe=this.qualifiedPropertyName(this.lookahead);return L.type===3?L.value==="get"&&Xe?(G="get",Z=this.match("["),q=this.parseObjectPropertyKey(),this.context.allowYield=!1,K=this.parseGetterMethod()):L.value==="set"&&Xe&&(G="set",Z=this.match("["),q=this.parseObjectPropertyKey(),K=this.parseSetterMethod()):L.type===7&&L.value==="*"&&Xe&&(G="init",Z=this.match("["),q=this.parseObjectPropertyKey(),K=this.parseGeneratorMethod(),J=!0),!G&&q&&this.match("(")&&(G="init",K=Q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),J=!0),G||this.throwUnexpectedToken(this.lookahead),G==="init"&&(G="method"),Z||(te&&this.isPropertyKey(q,"prototype")&&this.throwUnexpectedToken(L,M.Messages.StaticPrototype),!te&&this.isPropertyKey(q,"constructor")&&((G!=="method"||!J||K&&K.generator)&&this.throwUnexpectedToken(L,M.Messages.ConstructorSpecialMethod),I.value?this.throwUnexpectedToken(L,M.Messages.DuplicateConstructor):I.value=!0,G="constructor")),this.finalize(W,new P.MethodDefinition(q,Z,K,G,te))},F.prototype.parseClassElementList=function(){var I=[],L={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():I.push(this.parseClassElement(L));return this.expect("}"),I},F.prototype.parseClassBody=function(){var I=this.createNode(),L=this.parseClassElementList();return this.finalize(I,new P.ClassBody(L))},F.prototype.parseClassDeclaration=function(I){var L=this.createNode(),W=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var G=I&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),q=null;this.matchKeyword("extends")&&(this.nextToken(),q=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var K=this.parseClassBody();return this.context.strict=W,this.finalize(L,new P.ClassDeclaration(G,q,K))},F.prototype.parseClassExpression=function(){var I=this.createNode(),L=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var W=this.lookahead.type===3?this.parseVariableIdentifier():null,G=null;this.matchKeyword("extends")&&(this.nextToken(),G=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var q=this.parseClassBody();return this.context.strict=L,this.finalize(I,new P.ClassExpression(W,G,q))},F.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var I=this.createNode(),L=this.parseDirectivePrologues();this.lookahead.type!==2;)L.push(this.parseStatementListItem());return this.finalize(I,new P.Module(L))},F.prototype.parseScript=function(){for(var I=this.createNode(),L=this.parseDirectivePrologues();this.lookahead.type!==2;)L.push(this.parseStatementListItem());return this.finalize(I,new P.Script(L))},F.prototype.parseModuleSpecifier=function(){var I=this.createNode();this.lookahead.type!==8&&this.throwError(M.Messages.InvalidModuleSpecifier);var L=this.nextToken(),W=this.getTokenRaw(L);return this.finalize(I,new P.Literal(L.value,W))},F.prototype.parseImportSpecifier=function(){var I,L,W=this.createNode();return this.lookahead.type===3?(L=I=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),L=this.parseVariableIdentifier())):(L=I=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),L=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(W,new P.ImportSpecifier(L,I))},F.prototype.parseNamedImports=function(){this.expect("{");for(var I=[];!this.match("}");)I.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),I},F.prototype.parseImportDefaultSpecifier=function(){var I=this.createNode(),L=this.parseIdentifierName();return this.finalize(I,new P.ImportDefaultSpecifier(L))},F.prototype.parseImportNamespaceSpecifier=function(){var I=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(M.Messages.NoAsAfterImportNamespace),this.nextToken();var L=this.parseIdentifierName();return this.finalize(I,new P.ImportNamespaceSpecifier(L))},F.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(M.Messages.IllegalImportDeclaration);var I,L=this.createNode();this.expectKeyword("import");var W=[];if(this.lookahead.type===8)I=this.parseModuleSpecifier();else{if(this.match("{")?W=W.concat(this.parseNamedImports()):this.match("*")?W.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(W.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?W.push(this.parseImportNamespaceSpecifier()):this.match("{")?W=W.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var G=this.lookahead.value?M.Messages.UnexpectedToken:M.Messages.MissingFromClause;this.throwError(G,this.lookahead.value)}this.nextToken(),I=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(L,new P.ImportDeclaration(W,I))},F.prototype.parseExportSpecifier=function(){var I=this.createNode(),L=this.parseIdentifierName(),W=L;return this.matchContextualKeyword("as")&&(this.nextToken(),W=this.parseIdentifierName()),this.finalize(I,new P.ExportSpecifier(L,W))},F.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(M.Messages.IllegalExportDeclaration);var I,L=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var W=this.parseFunctionDeclaration(!0);I=this.finalize(L,new P.ExportDefaultDeclaration(W))}else this.matchKeyword("class")?(W=this.parseClassDeclaration(!0),I=this.finalize(L,new P.ExportDefaultDeclaration(W))):this.matchContextualKeyword("async")?(W=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),I=this.finalize(L,new P.ExportDefaultDeclaration(W))):(this.matchContextualKeyword("from")&&this.throwError(M.Messages.UnexpectedToken,this.lookahead.value),W=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),I=this.finalize(L,new P.ExportDefaultDeclaration(W)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var G=this.lookahead.value?M.Messages.UnexpectedToken:M.Messages.MissingFromClause;this.throwError(G,this.lookahead.value)}this.nextToken();var q=this.parseModuleSpecifier();this.consumeSemicolon(),I=this.finalize(L,new P.ExportAllDeclaration(q))}else if(this.lookahead.type===4){switch(W=void 0,this.lookahead.value){case"let":case"const":W=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":W=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}I=this.finalize(L,new P.ExportNamedDeclaration(W,[],null))}else if(this.matchAsyncFunction())W=this.parseFunctionDeclaration(),I=this.finalize(L,new P.ExportNamedDeclaration(W,[],null));else{var K=[],Z=null,J=!1;for(this.expect("{");!this.match("}");)J=J||this.matchKeyword("default"),K.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),Z=this.parseModuleSpecifier(),this.consumeSemicolon()):J?(G=this.lookahead.value?M.Messages.UnexpectedToken:M.Messages.MissingFromClause,this.throwError(G,this.lookahead.value)):this.consumeSemicolon(),I=this.finalize(L,new P.ExportNamedDeclaration(null,K,Z))}return I},F}();w.Parser=z},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.assert=function(C,A){if(!C)throw new Error("ASSERT: "+A)}},function(x,w){Object.defineProperty(w,"__esModule",{value:!0});var C=function(){function A(){this.errors=[],this.tolerant=!1}return A.prototype.recordError=function(_){this.errors.push(_)},A.prototype.tolerate=function(_){if(!this.tolerant)throw _;this.recordError(_)},A.prototype.constructError=function(_,M){var P=new Error(_);try{throw P}catch(E){Object.create&&Object.defineProperty&&(P=Object.create(E),Object.defineProperty(P,"column",{value:M}))}return P},A.prototype.createError=function(_,M,P,E){var R="Line "+M+": "+E,B=this.constructError(R,P);return B.index=_,B.lineNumber=M,B.description=E,B},A.prototype.throwError=function(_,M,P,E){throw this.createError(_,M,P,E)},A.prototype.tolerateError=function(_,M,P,E){var R=this.createError(_,M,P,E);if(!this.tolerant)throw R;this.recordError(R)},A}();w.ErrorHandler=C},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(9),_=C(4),M=C(11);function P(B){return"0123456789abcdef".indexOf(B.toLowerCase())}function E(B){return"01234567".indexOf(B)}var R=function(){function B(z,F){this.source=z,this.errorHandler=F,this.trackComment=!1,this.isModule=!1,this.length=z.length,this.index=0,this.lineNumber=z.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return B.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},B.prototype.restoreState=function(z){this.index=z.index,this.lineNumber=z.lineNumber,this.lineStart=z.lineStart},B.prototype.eof=function(){return this.index>=this.length},B.prototype.throwUnexpectedToken=function(z){return z===void 0&&(z=M.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,z)},B.prototype.tolerateUnexpectedToken=function(z){z===void 0&&(z=M.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,z)},B.prototype.skipSingleLineComment=function(z){var F,I,L=[];for(this.trackComment&&(L=[],F=this.index-z,I={start:{line:this.lineNumber,column:this.index-this.lineStart-z},end:{}});!this.eof();){var W=this.source.charCodeAt(this.index);if(++this.index,_.Character.isLineTerminator(W)){if(this.trackComment){I.end={line:this.lineNumber,column:this.index-this.lineStart-1};var G={multiLine:!1,slice:[F+z,this.index-1],range:[F,this.index-1],loc:I};L.push(G)}return W===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,L}}return this.trackComment&&(I.end={line:this.lineNumber,column:this.index-this.lineStart},G={multiLine:!1,slice:[F+z,this.index],range:[F,this.index],loc:I},L.push(G)),L},B.prototype.skipMultiLineComment=function(){var z,F,I=[];for(this.trackComment&&(I=[],z=this.index-2,F={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var L=this.source.charCodeAt(this.index);if(_.Character.isLineTerminator(L))L===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(L===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){F.end={line:this.lineNumber,column:this.index-this.lineStart};var W={multiLine:!0,slice:[z+2,this.index-2],range:[z,this.index],loc:F};I.push(W)}return I}++this.index}else++this.index}return this.trackComment&&(F.end={line:this.lineNumber,column:this.index-this.lineStart},W={multiLine:!0,slice:[z+2,this.index],range:[z,this.index],loc:F},I.push(W)),this.tolerateUnexpectedToken(),I},B.prototype.scanComments=function(){var z;this.trackComment&&(z=[]);for(var F=this.index===0;!this.eof();){var I=this.source.charCodeAt(this.index);if(_.Character.isWhiteSpace(I))++this.index;else if(_.Character.isLineTerminator(I))++this.index,I===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,F=!0;else if(I===47)if((I=this.source.charCodeAt(this.index+1))===47){this.index+=2;var L=this.skipSingleLineComment(2);this.trackComment&&(z=z.concat(L)),F=!0}else{if(I!==42)break;this.index+=2,L=this.skipMultiLineComment(),this.trackComment&&(z=z.concat(L))}else if(F&&I===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,L=this.skipSingleLineComment(3),this.trackComment&&(z=z.concat(L))}else{if(I!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,L=this.skipSingleLineComment(4),this.trackComment&&(z=z.concat(L))}}return z},B.prototype.isFutureReservedWord=function(z){switch(z){case"enum":case"export":case"import":case"super":return!0;default:return!1}},B.prototype.isStrictModeReservedWord=function(z){switch(z){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},B.prototype.isRestrictedWord=function(z){return z==="eval"||z==="arguments"},B.prototype.isKeyword=function(z){switch(z.length){case 2:return z==="if"||z==="in"||z==="do";case 3:return z==="var"||z==="for"||z==="new"||z==="try"||z==="let";case 4:return z==="this"||z==="else"||z==="case"||z==="void"||z==="with"||z==="enum";case 5:return z==="while"||z==="break"||z==="catch"||z==="throw"||z==="const"||z==="yield"||z==="class"||z==="super";case 6:return z==="return"||z==="typeof"||z==="delete"||z==="switch"||z==="export"||z==="import";case 7:return z==="default"||z==="finally"||z==="extends";case 8:return z==="function"||z==="continue"||z==="debugger";case 10:return z==="instanceof";default:return!1}},B.prototype.codePointAt=function(z){var F=this.source.charCodeAt(z);if(F>=55296&&F<=56319){var I=this.source.charCodeAt(z+1);I>=56320&&I<=57343&&(F=1024*(F-55296)+I-56320+65536)}return F},B.prototype.scanHexEscape=function(z){for(var F=z==="u"?4:2,I=0,L=0;L<F;++L){if(this.eof()||!_.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;I=16*I+P(this.source[this.index++])}return String.fromCharCode(I)},B.prototype.scanUnicodeCodePointEscape=function(){var z=this.source[this.index],F=0;for(z==="}"&&this.throwUnexpectedToken();!this.eof()&&(z=this.source[this.index++],_.Character.isHexDigit(z.charCodeAt(0)));)F=16*F+P(z);return(F>1114111||z!=="}")&&this.throwUnexpectedToken(),_.Character.fromCodePoint(F)},B.prototype.getIdentifier=function(){for(var z=this.index++;!this.eof();){var F=this.source.charCodeAt(this.index);if(F===92)return this.index=z,this.getComplexIdentifier();if(F>=55296&&F<57343)return this.index=z,this.getComplexIdentifier();if(!_.Character.isIdentifierPart(F))break;++this.index}return this.source.slice(z,this.index)},B.prototype.getComplexIdentifier=function(){var z,F=this.codePointAt(this.index),I=_.Character.fromCodePoint(F);for(this.index+=I.length,F===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,z=this.scanUnicodeCodePointEscape()):(z=this.scanHexEscape("u"))!==null&&z!=="\\"&&_.Character.isIdentifierStart(z.charCodeAt(0))||this.throwUnexpectedToken(),I=z);!this.eof()&&(F=this.codePointAt(this.index),_.Character.isIdentifierPart(F));)I+=z=_.Character.fromCodePoint(F),this.index+=z.length,F===92&&(I=I.substr(0,I.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,z=this.scanUnicodeCodePointEscape()):(z=this.scanHexEscape("u"))!==null&&z!=="\\"&&_.Character.isIdentifierPart(z.charCodeAt(0))||this.throwUnexpectedToken(),I+=z);return I},B.prototype.octalToDecimal=function(z){var F=z!=="0",I=E(z);return!this.eof()&&_.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(F=!0,I=8*I+E(this.source[this.index++]),"0123".indexOf(z)>=0&&!this.eof()&&_.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(I=8*I+E(this.source[this.index++]))),{code:I,octal:F}},B.prototype.scanIdentifier=function(){var z,F=this.index,I=this.source.charCodeAt(F)===92?this.getComplexIdentifier():this.getIdentifier();if((z=I.length===1?3:this.isKeyword(I)?4:I==="null"?5:I==="true"||I==="false"?1:3)!=3&&F+I.length!==this.index){var L=this.index;this.index=F,this.tolerateUnexpectedToken(M.Messages.InvalidEscapedReservedWord),this.index=L}return{type:z,value:I,lineNumber:this.lineNumber,lineStart:this.lineStart,start:F,end:this.index}},B.prototype.scanPunctuator=function(){var z=this.index,F=this.source[this.index];switch(F){case"(":case"{":F==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,F="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(F=this.source.substr(this.index,4))===">>>="?this.index+=4:(F=F.substr(0,3))==="==="||F==="!=="||F===">>>"||F==="<<="||F===">>="||F==="**="?this.index+=3:(F=F.substr(0,2))==="&&"||F==="||"||F==="=="||F==="!="||F==="+="||F==="-="||F==="*="||F==="/="||F==="++"||F==="--"||F==="<<"||F===">>"||F==="&="||F==="|="||F==="^="||F==="%="||F==="<="||F===">="||F==="=>"||F==="**"?this.index+=2:(F=this.source[this.index],"<>=!+-*%&|^/".indexOf(F)>=0&&++this.index)}return this.index===z&&this.throwUnexpectedToken(),{type:7,value:F,lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.scanHexLiteral=function(z){for(var F="";!this.eof()&&_.Character.isHexDigit(this.source.charCodeAt(this.index));)F+=this.source[this.index++];return F.length===0&&this.throwUnexpectedToken(),_.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+F,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.scanBinaryLiteral=function(z){for(var F,I="";!this.eof()&&((F=this.source[this.index])==="0"||F==="1");)I+=this.source[this.index++];return I.length===0&&this.throwUnexpectedToken(),this.eof()||(F=this.source.charCodeAt(this.index),(_.Character.isIdentifierStart(F)||_.Character.isDecimalDigit(F))&&this.throwUnexpectedToken()),{type:6,value:parseInt(I,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.scanOctalLiteral=function(z,F){var I="",L=!1;for(_.Character.isOctalDigit(z.charCodeAt(0))?(L=!0,I="0"+this.source[this.index++]):++this.index;!this.eof()&&_.Character.isOctalDigit(this.source.charCodeAt(this.index));)I+=this.source[this.index++];return L||I.length!==0||this.throwUnexpectedToken(),(_.Character.isIdentifierStart(this.source.charCodeAt(this.index))||_.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(I,8),octal:L,lineNumber:this.lineNumber,lineStart:this.lineStart,start:F,end:this.index}},B.prototype.isImplicitOctalLiteral=function(){for(var z=this.index+1;z<this.length;++z){var F=this.source[z];if(F==="8"||F==="9")return!1;if(!_.Character.isOctalDigit(F.charCodeAt(0)))return!0}return!0},B.prototype.scanNumericLiteral=function(){var z=this.index,F=this.source[z];A.assert(_.Character.isDecimalDigit(F.charCodeAt(0))||F===".","Numeric literal must start with a decimal digit or a decimal point");var I="";if(F!=="."){if(I=this.source[this.index++],F=this.source[this.index],I==="0"){if(F==="x"||F==="X")return++this.index,this.scanHexLiteral(z);if(F==="b"||F==="B")return++this.index,this.scanBinaryLiteral(z);if(F==="o"||F==="O")return this.scanOctalLiteral(F,z);if(F&&_.Character.isOctalDigit(F.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(F,z)}for(;_.Character.isDecimalDigit(this.source.charCodeAt(this.index));)I+=this.source[this.index++];F=this.source[this.index]}if(F==="."){for(I+=this.source[this.index++];_.Character.isDecimalDigit(this.source.charCodeAt(this.index));)I+=this.source[this.index++];F=this.source[this.index]}if(F==="e"||F==="E")if(I+=this.source[this.index++],(F=this.source[this.index])!=="+"&&F!=="-"||(I+=this.source[this.index++]),_.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;_.Character.isDecimalDigit(this.source.charCodeAt(this.index));)I+=this.source[this.index++];else this.throwUnexpectedToken();return _.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(I),lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.scanStringLiteral=function(){var z=this.index,F=this.source[z];A.assert(F==="'"||F==='"',"String literal must starts with a quote"),++this.index;for(var I=!1,L="";!this.eof();){var W=this.source[this.index++];if(W===F){F="";break}if(W==="\\")if((W=this.source[this.index++])&&_.Character.isLineTerminator(W.charCodeAt(0)))++this.lineNumber,W==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(W){case"u":if(this.source[this.index]==="{")++this.index,L+=this.scanUnicodeCodePointEscape();else{var G=this.scanHexEscape(W);G===null&&this.throwUnexpectedToken(),L+=G}break;case"x":var q=this.scanHexEscape(W);q===null&&this.throwUnexpectedToken(M.Messages.InvalidHexEscapeSequence),L+=q;break;case"n":L+=`
`;break;case"r":L+="\r";break;case"t":L+="	";break;case"b":L+="\b";break;case"f":L+="\f";break;case"v":L+="\v";break;case"8":case"9":L+=W,this.tolerateUnexpectedToken();break;default:if(W&&_.Character.isOctalDigit(W.charCodeAt(0))){var K=this.octalToDecimal(W);I=K.octal||I,L+=String.fromCharCode(K.code)}else L+=W}else{if(_.Character.isLineTerminator(W.charCodeAt(0)))break;L+=W}}return F!==""&&(this.index=z,this.throwUnexpectedToken()),{type:8,value:L,octal:I,lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.scanTemplate=function(){var z="",F=!1,I=this.index,L=this.source[I]==="`",W=!1,G=2;for(++this.index;!this.eof();){var q=this.source[this.index++];if(q==="`"){G=1,W=!0,F=!0;break}if(q==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,F=!0;break}z+=q}else if(q==="\\")if(q=this.source[this.index++],_.Character.isLineTerminator(q.charCodeAt(0)))++this.lineNumber,q==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(q){case"n":z+=`
`;break;case"r":z+="\r";break;case"t":z+="	";break;case"u":if(this.source[this.index]==="{")++this.index,z+=this.scanUnicodeCodePointEscape();else{var K=this.index,Z=this.scanHexEscape(q);Z!==null?z+=Z:(this.index=K,z+=q)}break;case"x":var J=this.scanHexEscape(q);J===null&&this.throwUnexpectedToken(M.Messages.InvalidHexEscapeSequence),z+=J;break;case"b":z+="\b";break;case"f":z+="\f";break;case"v":z+="\v";break;default:q==="0"?(_.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(M.Messages.TemplateOctalLiteral),z+="\0"):_.Character.isOctalDigit(q.charCodeAt(0))?this.throwUnexpectedToken(M.Messages.TemplateOctalLiteral):z+=q}else _.Character.isLineTerminator(q.charCodeAt(0))?(++this.lineNumber,q==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,z+=`
`):z+=q}return F||this.throwUnexpectedToken(),L||this.curlyStack.pop(),{type:10,value:this.source.slice(I+1,this.index-G),cooked:z,head:L,tail:W,lineNumber:this.lineNumber,lineStart:this.lineStart,start:I,end:this.index}},B.prototype.testRegExp=function(z,F){var I=z,L=this;F.indexOf("u")>=0&&(I=I.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(W,G,q){var K=parseInt(G||q,16);return K>1114111&&L.throwUnexpectedToken(M.Messages.InvalidRegExp),K<=65535?String.fromCharCode(K):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(I)}catch{this.throwUnexpectedToken(M.Messages.InvalidRegExp)}try{return new RegExp(z,F)}catch{return null}},B.prototype.scanRegExpBody=function(){var z=this.source[this.index];A.assert(z==="/","Regular expression literal must start with a slash");for(var F=this.source[this.index++],I=!1,L=!1;!this.eof();)if(F+=z=this.source[this.index++],z==="\\")z=this.source[this.index++],_.Character.isLineTerminator(z.charCodeAt(0))&&this.throwUnexpectedToken(M.Messages.UnterminatedRegExp),F+=z;else if(_.Character.isLineTerminator(z.charCodeAt(0)))this.throwUnexpectedToken(M.Messages.UnterminatedRegExp);else if(I)z==="]"&&(I=!1);else{if(z==="/"){L=!0;break}z==="["&&(I=!0)}return L||this.throwUnexpectedToken(M.Messages.UnterminatedRegExp),F.substr(1,F.length-2)},B.prototype.scanRegExpFlags=function(){for(var z="";!this.eof();){var F=this.source[this.index];if(!_.Character.isIdentifierPart(F.charCodeAt(0)))break;if(++this.index,F!=="\\"||this.eof())z+=F;else if((F=this.source[this.index])==="u"){++this.index;var I=this.index,L=this.scanHexEscape("u");if(L!==null)for(z+=L;I<this.index;++I)this.source[I];else this.index=I,z+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return z},B.prototype.scanRegExp=function(){var z=this.index,F=this.scanRegExpBody(),I=this.scanRegExpFlags();return{type:9,value:"",pattern:F,flags:I,regex:this.testRegExp(F,I),lineNumber:this.lineNumber,lineStart:this.lineStart,start:z,end:this.index}},B.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var z=this.source.charCodeAt(this.index);return _.Character.isIdentifierStart(z)?this.scanIdentifier():z===40||z===41||z===59?this.scanPunctuator():z===39||z===34?this.scanStringLiteral():z===46?_.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():_.Character.isDecimalDigit(z)?this.scanNumericLiteral():z===96||z===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():z>=55296&&z<57343&&_.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},B}();w.Scanner=R},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.TokenName={},w.TokenName[1]="Boolean",w.TokenName[2]="<end>",w.TokenName[3]="Identifier",w.TokenName[4]="Keyword",w.TokenName[5]="Null",w.TokenName[6]="Numeric",w.TokenName[7]="Punctuator",w.TokenName[8]="String",w.TokenName[9]="RegularExpression",w.TokenName[10]="Template"},function(x,w){Object.defineProperty(w,"__esModule",{value:!0}),w.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(x,w,C){Object.defineProperty(w,"__esModule",{value:!0});var A=C(10),_=C(12),M=C(13),P=function(){function R(){this.values=[],this.curly=this.paren=-1}return R.prototype.beforeFunctionExpression=function(B){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(B)>=0},R.prototype.isRegexStart=function(){var B=this.values[this.values.length-1],z=B!==null;switch(B){case"this":case"]":z=!1;break;case")":var F=this.values[this.paren-1];z=F==="if"||F==="while"||F==="for"||F==="with";break;case"}":if(z=!1,this.values[this.curly-3]==="function")z=!!(I=this.values[this.curly-4])&&!this.beforeFunctionExpression(I);else if(this.values[this.curly-4]==="function"){var I;z=!(I=this.values[this.curly-5])||!this.beforeFunctionExpression(I)}}return z},R.prototype.push=function(B){B.type===7||B.type===4?(B.value==="{"?this.curly=this.values.length:B.value==="("&&(this.paren=this.values.length),this.values.push(B.value)):this.values.push(null)},R}(),E=function(){function R(B,z){this.errorHandler=new A.ErrorHandler,this.errorHandler.tolerant=!!z&&typeof z.tolerant=="boolean"&&z.tolerant,this.scanner=new _.Scanner(B,this.errorHandler),this.scanner.trackComment=!!z&&typeof z.comment=="boolean"&&z.comment,this.trackRange=!!z&&typeof z.range=="boolean"&&z.range,this.trackLoc=!!z&&typeof z.loc=="boolean"&&z.loc,this.buffer=[],this.reader=new P}return R.prototype.errors=function(){return this.errorHandler.errors},R.prototype.getNextToken=function(){if(this.buffer.length===0){var B=this.scanner.scanComments();if(this.scanner.trackComment)for(var z=0;z<B.length;++z){var F=B[z],I=this.scanner.source.slice(F.slice[0],F.slice[1]),L={type:F.multiLine?"BlockComment":"LineComment",value:I};this.trackRange&&(L.range=F.range),this.trackLoc&&(L.loc=F.loc),this.buffer.push(L)}if(!this.scanner.eof()){var W=void 0;this.trackLoc&&(W={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var G=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(G);var q={type:M.TokenName[G.type],value:this.scanner.source.slice(G.start,G.end)};if(this.trackRange&&(q.range=[G.start,G.end]),this.trackLoc&&(W.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},q.loc=W),G.type===9){var K=G.pattern,Z=G.flags;q.regex={pattern:K,flags:Z}}this.buffer.push(q)}}return this.buffer.shift()},R}();w.Tokenizer=E}])},d.exports=g()},function(d,m,f){var g=f(38),x=f(53),w=f(76),C=f(54),A=Object.prototype.toString,_=Object.prototype.hasOwnProperty,M={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},P=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function E(Ve){var Ye,qe,et;if(Ye=Ve.toString(16).toUpperCase(),Ve<=255)qe="x",et=2;else if(Ve<=65535)qe="u",et=4;else{if(!(Ve<=4294967295))throw new x("code point within a string may not be greater than 0xFFFFFFFF");qe="U",et=8}return"\\"+qe+g.repeat("0",et-Ye.length)+Ye}function R(Ve){this.schema=Ve.schema||w,this.indent=Math.max(1,Ve.indent||2),this.noArrayIndent=Ve.noArrayIndent||!1,this.skipInvalid=Ve.skipInvalid||!1,this.flowLevel=g.isNothing(Ve.flowLevel)?-1:Ve.flowLevel,this.styleMap=function(Ye,qe){var et,je,Ke,Je,at,nt,ct;if(qe===null)return{};for(et={},Ke=0,Je=(je=Object.keys(qe)).length;Ke<Je;Ke+=1)at=je[Ke],nt=String(qe[at]),at.slice(0,2)==="!!"&&(at="tag:yaml.org,2002:"+at.slice(2)),(ct=Ye.compiledTypeMap.fallback[at])&&_.call(ct.styleAliases,nt)&&(nt=ct.styleAliases[nt]),et[at]=nt;return et}(this.schema,Ve.styles||null),this.sortKeys=Ve.sortKeys||!1,this.lineWidth=Ve.lineWidth||80,this.noRefs=Ve.noRefs||!1,this.noCompatMode=Ve.noCompatMode||!1,this.condenseFlow=Ve.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function B(Ve,Ye){for(var qe,et=g.repeat(" ",Ye),je=0,Ke=-1,Je="",at=Ve.length;je<at;)(Ke=Ve.indexOf(`
`,je))===-1?(qe=Ve.slice(je),je=at):(qe=Ve.slice(je,Ke+1),je=Ke+1),qe.length&&qe!==`
`&&(Je+=et),Je+=qe;return Je}function z(Ve,Ye){return`
`+g.repeat(" ",Ve.indent*Ye)}function F(Ve){return Ve===32||Ve===9}function I(Ve){return 32<=Ve&&Ve<=126||161<=Ve&&Ve<=55295&&Ve!==8232&&Ve!==8233||57344<=Ve&&Ve<=65533&&Ve!==65279||65536<=Ve&&Ve<=1114111}function L(Ve,Ye){return I(Ve)&&Ve!==65279&&Ve!==44&&Ve!==91&&Ve!==93&&Ve!==123&&Ve!==125&&Ve!==58&&(Ve!==35||Ye&&function(qe){return I(qe)&&!F(qe)&&qe!==65279&&qe!==13&&qe!==10}(Ye))}function W(Ve){return/^\n* /.test(Ve)}function G(Ve,Ye,qe,et,je){var Ke,Je,at,nt,ct=!1,pt=!1,rt=et!==-1,ht=-1,yt=I(nt=Ve.charCodeAt(0))&&nt!==65279&&!F(nt)&&nt!==45&&nt!==63&&nt!==58&&nt!==44&&nt!==91&&nt!==93&&nt!==123&&nt!==125&&nt!==35&&nt!==38&&nt!==42&&nt!==33&&nt!==124&&nt!==61&&nt!==62&&nt!==39&&nt!==34&&nt!==37&&nt!==64&&nt!==96&&!F(Ve.charCodeAt(Ve.length-1));if(Ye)for(Ke=0;Ke<Ve.length;Ke++){if(!I(Je=Ve.charCodeAt(Ke)))return 5;at=Ke>0?Ve.charCodeAt(Ke-1):null,yt=yt&&L(Je,at)}else{for(Ke=0;Ke<Ve.length;Ke++){if((Je=Ve.charCodeAt(Ke))===10)ct=!0,rt&&(pt=pt||Ke-ht-1>et&&Ve[ht+1]!==" ",ht=Ke);else if(!I(Je))return 5;at=Ke>0?Ve.charCodeAt(Ke-1):null,yt=yt&&L(Je,at)}pt=pt||rt&&Ke-ht-1>et&&Ve[ht+1]!==" "}return ct||pt?qe>9&&W(Ve)?5:pt?4:3:yt&&!je(Ve)?1:2}function q(Ve,Ye,qe,et){Ve.dump=function(){if(Ye.length===0)return"''";if(!Ve.noCompatMode&&P.indexOf(Ye)!==-1)return"'"+Ye+"'";var je=Ve.indent*Math.max(1,qe),Ke=Ve.lineWidth===-1?-1:Math.max(Math.min(Ve.lineWidth,40),Ve.lineWidth-je),Je=et||Ve.flowLevel>-1&&qe>=Ve.flowLevel;switch(G(Ye,Je,Ve.indent,Ke,function(at){return function(nt,ct){var pt,rt;for(pt=0,rt=nt.implicitTypes.length;pt<rt;pt+=1)if(nt.implicitTypes[pt].resolve(ct))return!0;return!1}(Ve,at)})){case 1:return Ye;case 2:return"'"+Ye.replace(/'/g,"''")+"'";case 3:return"|"+K(Ye,Ve.indent)+Z(B(Ye,je));case 4:return">"+K(Ye,Ve.indent)+Z(B(function(at,nt){for(var ct,pt,rt=/(\n+)([^\n]*)/g,ht=(wt=at.indexOf(`
`),wt=wt!==-1?wt:at.length,rt.lastIndex=wt,J(at.slice(0,wt),nt)),yt=at[0]===`
`||at[0]===" ",wt;pt=rt.exec(at);){var ft=pt[1],He=pt[2];ct=He[0]===" ",ht+=ft+(yt||ct||He===""?"":`
`)+J(He,nt),yt=ct}return ht}(Ye,Ke),je));case 5:return'"'+function(at){for(var nt,ct,pt,rt="",ht=0;ht<at.length;ht++)(nt=at.charCodeAt(ht))>=55296&&nt<=56319&&(ct=at.charCodeAt(ht+1))>=56320&&ct<=57343?(rt+=E(1024*(nt-55296)+ct-56320+65536),ht++):(pt=M[nt],rt+=!pt&&I(nt)?at[ht]:pt||E(nt));return rt}(Ye)+'"';default:throw new x("impossible error: invalid scalar style")}}()}function K(Ve,Ye){var qe=W(Ve)?String(Ye):"",et=Ve[Ve.length-1]===`
`;return qe+(et&&(Ve[Ve.length-2]===`
`||Ve===`
`)?"+":et?"":"-")+`
`}function Z(Ve){return Ve[Ve.length-1]===`
`?Ve.slice(0,-1):Ve}function J(Ve,Ye){if(Ve===""||Ve[0]===" ")return Ve;for(var qe,et,je=/ [^ ]/g,Ke=0,Je=0,at=0,nt="";qe=je.exec(Ve);)(at=qe.index)-Ke>Ye&&(et=Je>Ke?Je:at,nt+=`
`+Ve.slice(Ke,et),Ke=et+1),Je=at;return nt+=`
`,Ve.length-Ke>Ye&&Je>Ke?nt+=Ve.slice(Ke,Je)+`
`+Ve.slice(Je+1):nt+=Ve.slice(Ke),nt.slice(1)}function te(Ve,Ye,qe){var et,je,Ke,Je,at,nt;for(Ke=0,Je=(je=qe?Ve.explicitTypes:Ve.implicitTypes).length;Ke<Je;Ke+=1)if(((at=je[Ke]).instanceOf||at.predicate)&&(!at.instanceOf||typeof Ye=="object"&&Ye instanceof at.instanceOf)&&(!at.predicate||at.predicate(Ye))){if(Ve.tag=qe?at.tag:"?",at.represent){if(nt=Ve.styleMap[at.tag]||at.defaultStyle,A.call(at.represent)==="[object Function]")et=at.represent(Ye,nt);else{if(!_.call(at.represent,nt))throw new x("!<"+at.tag+'> tag resolver accepts not "'+nt+'" style');et=at.represent[nt](Ye,nt)}Ve.dump=et}return!0}return!1}function Q(Ve,Ye,qe,et,je,Ke){Ve.tag=null,Ve.dump=qe,te(Ve,qe,!1)||te(Ve,qe,!0);var Je=A.call(Ve.dump);et&&(et=Ve.flowLevel<0||Ve.flowLevel>Ye);var at,nt,ct=Je==="[object Object]"||Je==="[object Array]";if(ct&&(nt=(at=Ve.duplicates.indexOf(qe))!==-1),(Ve.tag!==null&&Ve.tag!=="?"||nt||Ve.indent!==2&&Ye>0)&&(je=!1),nt&&Ve.usedDuplicates[at])Ve.dump="*ref_"+at;else{if(ct&&nt&&!Ve.usedDuplicates[at]&&(Ve.usedDuplicates[at]=!0),Je==="[object Object]")et&&Object.keys(Ve.dump).length!==0?(function(rt,ht,yt,wt){var ft,He,le,be,we,ze,Ze="",Qe=rt.tag,st=Object.keys(yt);if(rt.sortKeys===!0)st.sort();else if(typeof rt.sortKeys=="function")st.sort(rt.sortKeys);else if(rt.sortKeys)throw new x("sortKeys must be a boolean or a function");for(ft=0,He=st.length;ft<He;ft+=1)ze="",wt&&ft===0||(ze+=z(rt,ht)),be=yt[le=st[ft]],Q(rt,ht+1,le,!0,!0,!0)&&((we=rt.tag!==null&&rt.tag!=="?"||rt.dump&&rt.dump.length>1024)&&(rt.dump&&rt.dump.charCodeAt(0)===10?ze+="?":ze+="? "),ze+=rt.dump,we&&(ze+=z(rt,ht)),Q(rt,ht+1,be,!0,we)&&(rt.dump&&rt.dump.charCodeAt(0)===10?ze+=":":ze+=": ",Ze+=ze+=rt.dump));rt.tag=Qe,rt.dump=Ze||"{}"}(Ve,Ye,Ve.dump,je),nt&&(Ve.dump="&ref_"+at+Ve.dump)):(function(rt,ht,yt){var wt,ft,He,le,be,we="",ze=rt.tag,Ze=Object.keys(yt);for(wt=0,ft=Ze.length;wt<ft;wt+=1)be="",wt!==0&&(be+=", "),rt.condenseFlow&&(be+='"'),le=yt[He=Ze[wt]],Q(rt,ht,He,!1,!1)&&(rt.dump.length>1024&&(be+="? "),be+=rt.dump+(rt.condenseFlow?'"':"")+":"+(rt.condenseFlow?"":" "),Q(rt,ht,le,!1,!1)&&(we+=be+=rt.dump));rt.tag=ze,rt.dump="{"+we+"}"}(Ve,Ye,Ve.dump),nt&&(Ve.dump="&ref_"+at+" "+Ve.dump));else if(Je==="[object Array]"){var pt=Ve.noArrayIndent&&Ye>0?Ye-1:Ye;et&&Ve.dump.length!==0?(function(rt,ht,yt,wt){var ft,He,le="",be=rt.tag;for(ft=0,He=yt.length;ft<He;ft+=1)Q(rt,ht+1,yt[ft],!0,!0)&&(wt&&ft===0||(le+=z(rt,ht)),rt.dump&&rt.dump.charCodeAt(0)===10?le+="-":le+="- ",le+=rt.dump);rt.tag=be,rt.dump=le||"[]"}(Ve,pt,Ve.dump,je),nt&&(Ve.dump="&ref_"+at+Ve.dump)):(function(rt,ht,yt){var wt,ft,He="",le=rt.tag;for(wt=0,ft=yt.length;wt<ft;wt+=1)Q(rt,ht,yt[wt],!1,!1)&&(wt!==0&&(He+=","+(rt.condenseFlow?"":" ")),He+=rt.dump);rt.tag=le,rt.dump="["+He+"]"}(Ve,pt,Ve.dump),nt&&(Ve.dump="&ref_"+at+" "+Ve.dump))}else{if(Je!=="[object String]"){if(Ve.skipInvalid)return!1;throw new x("unacceptable kind of an object to dump "+Je)}Ve.tag!=="?"&&q(Ve,Ve.dump,Ye,Ke)}Ve.tag!==null&&Ve.tag!=="?"&&(Ve.dump="!<"+Ve.tag+"> "+Ve.dump)}return!0}function me(Ve,Ye){var qe,et,je=[],Ke=[];for(function Je(at,nt,ct){var pt,rt,ht;if(at!==null&&typeof at=="object")if((rt=nt.indexOf(at))!==-1)ct.indexOf(rt)===-1&&ct.push(rt);else if(nt.push(at),Array.isArray(at))for(rt=0,ht=at.length;rt<ht;rt+=1)Je(at[rt],nt,ct);else for(pt=Object.keys(at),rt=0,ht=pt.length;rt<ht;rt+=1)Je(at[pt[rt]],nt,ct)}(Ve,je,Ke),qe=0,et=Ke.length;qe<et;qe+=1)Ye.duplicates.push(je[Ke[qe]]);Ye.usedDuplicates=new Array(et)}function Xe(Ve,Ye){var qe=new R(Ye=Ye||{});return qe.noRefs||me(Ve,qe),Q(qe,0,Ve,!0,!0)?qe.dump+`
`:""}d.exports.dump=Xe,d.exports.safeDump=function(Ve,Ye){return Xe(Ve,g.extend({schema:C},Ye))}},function(d,m,f){f(31),f(32),f(33),f(64),f(19),f(65),f(20),f(68),f(92),f(144),f(22),f(94),f(23);var g,x=this&&this.__extends||(g=function(G,q){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Z){K.__proto__=Z}||function(K,Z){for(var J in Z)Z.hasOwnProperty(J)&&(K[J]=Z[J])})(G,q)},function(G,q){function K(){this.constructor=G}g(G,q),G.prototype=q===null?Object.create(q):(K.prototype=q.prototype,new K)}),w=this&&this.__values||function(G){var q=typeof Symbol=="function"&&Symbol.iterator,K=q&&G[q],Z=0;if(K)return K.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&Z>=G.length&&(G=void 0),{value:G&&G[Z++],done:!G}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")},C=this&&this.__read||function(G,q){var K=typeof Symbol=="function"&&G[Symbol.iterator];if(!K)return G;var Z,J,te=K.call(G),Q=[];try{for(;(q===void 0||q-- >0)&&!(Z=te.next()).done;)Q.push(Z.value)}catch(me){J={error:me}}finally{try{Z&&!Z.done&&(K=te.return)&&K.call(te)}finally{if(J)throw J.error}}return Q};Object.defineProperty(m,"__esModule",{value:!0});var A=f(91),_=f(2),M=f(183),P=f(0),E=f(7),R=f(95),B=f(69),z=f(3),F=f(306),I=f(307),L=f(308),W=function(G){function q(K,Z){Z===void 0&&(Z=!1);var J=G.call(this)||this;return J._hasDeclaration=!1,J._docTypeName="",J._hasDocumentElement=!1,J._currentElementSerialized=!1,J._openTags=[],J._ended=!1,J._fragment=Z,J._options=_.applyDefaults(K||{},A.DefaultXMLBuilderCBOptions),J._builderOptions={defaultNamespace:J._options.defaultNamespace,namespaceAlias:J._options.namespaceAlias},J._options.format==="json"?J._writer=new I.JSONCBWriter(J._options):J._options.format==="yaml"?J._writer=new L.YAMLCBWriter(J._options):J._writer=new F.XMLCBWriter(J._options),J._options.data!==void 0&&J.on("data",J._options.data),J._options.end!==void 0&&J.on("end",J._options.end),J._options.error!==void 0&&J.on("error",J._options.error),J._prefixMap=new R.NamespacePrefixMap,J._prefixMap.set("xml",E.namespace.XML),J._prefixIndex={value:1},J._push(J._writer.frontMatter()),J}return x(q,G),q.prototype.ele=function(K,Z,J){var te,Q;if(_.isObject(K)||_.isString(K)&&(/^\s*</.test(K)||/^\s*[\{\[]/.test(K)||/^(\s*|(#.*)|(%.*))*---/.test(K))){var me=M.fragment().set(this._options);try{me.ele(K)}catch(qe){return this.emit("error",qe),this}try{for(var Xe=w(me.node.childNodes),Ve=Xe.next();!Ve.done;Ve=Xe.next()){var Ye=Ve.value;this._fromNode(Ye)}}catch(qe){te={error:qe}}finally{try{Ve&&!Ve.done&&(Q=Xe.return)&&Q.call(Xe)}finally{if(te)throw te.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=M.fragment(this._builderOptions).ele(K,Z,J)}catch(qe){return this.emit("error",qe),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},q.prototype.att=function(K,Z,J){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(K,Z,J)}catch(te){return this.emit("error",te),this}return this},q.prototype.com=function(K){var Z;this._serializeOpenTag(!0);try{Z=M.fragment(this._builderOptions).com(K).first().node}catch(J){return this.emit("error",J),this}return!this._options.wellFormed||P.xml_isLegalChar(Z.data)&&Z.data.indexOf("--")===-1&&!Z.data.endsWith("-")?(this._push(this._writer.comment(Z.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},q.prototype.txt=function(K){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var Z;this._serializeOpenTag(!0);try{Z=M.fragment(this._builderOptions).txt(K).first().node}catch(te){return this.emit("error",te),this}if(this._options.wellFormed&&!P.xml_isLegalChar(Z.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var J=Z.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(J)),this},q.prototype.ins=function(K,Z){var J;Z===void 0&&(Z=""),this._serializeOpenTag(!0);try{J=M.fragment(this._builderOptions).ins(K,Z).first().node}catch(te){return this.emit("error",te),this}return this._options.wellFormed&&(J.target.indexOf(":")!==-1||/^xml$/i.test(J.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!P.xml_isLegalChar(J.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(J.target,J.data)),this)},q.prototype.dat=function(K){var Z;this._serializeOpenTag(!0);try{Z=M.fragment(this._builderOptions).dat(K).first().node}catch(J){return this.emit("error",J),this}return this._push(this._writer.cdata(Z.data)),this},q.prototype.dec=function(K){return K===void 0&&(K={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(K.version||"1.0",K.encoding,K.standalone)),this._hasDeclaration=!0,this)},q.prototype.dtd=function(K){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var Z;try{Z=M.create().dtd(K).first().node}catch(J){return this.emit("error",J),this}return this._options.wellFormed&&!P.xml_isPubidChar(Z.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!P.xml_isLegalChar(Z.systemId)||Z.systemId.indexOf('"')!==-1&&Z.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=K.name,this._push(this._writer.docType(K.name,Z.publicId,Z.systemId)),this)},q.prototype.import=function(K){var Z,J,te=M.fragment().set(this._options);try{te.import(K)}catch(Ve){return this.emit("error",Ve),this}try{for(var Q=w(te.node.childNodes),me=Q.next();!me.done;me=Q.next()){var Xe=me.value;this._fromNode(Xe)}}catch(Ve){Z={error:Ve}}finally{try{me&&!me.done&&(J=Q.return)&&J.call(Q)}finally{if(Z)throw Z.error}}return this},q.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},q.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},q.prototype._serializeOpenTag=function(K){if(!this._currentElementSerialized&&this._currentElement!==void 0){var Z=this._currentElement.node;if(!this._options.wellFormed||Z.localName.indexOf(":")===-1&&P.xml_isName(Z.localName)){var J="",te=!1,Q=this._prefixMap.copy(),me={},Xe=this._recordNamespaceInformation(Z,Q,me),Ve=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],Ye=Z.namespaceURI;if(Ye===null&&(Ye=Ve),Ve===Ye)Xe!==null&&(te=!0),J=Ye===E.namespace.XML?"xml:"+Z.localName:Z.localName,this._writer.beginElement(J),this._push(this._writer.openTagBegin(J));else{var qe=Z.prefix,et=null;if(qe===null&&Ye===Xe||(et=Q.get(qe,Ye)),qe==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));et=qe}et!==null?(J=et+":"+Z.localName,Xe!==null&&Xe!==E.namespace.XML&&(Ve=Xe||null),this._writer.beginElement(J),this._push(this._writer.openTagBegin(J))):qe!==null?(qe in me&&(qe=this._generatePrefix(Ye,Q,this._prefixIndex)),Q.set(qe,Ye),J+=qe+":"+Z.localName,this._writer.beginElement(J),this._push(this._writer.openTagBegin(J)),this._push(this._writer.attribute("xmlns:"+qe,this._serializeAttributeValue(Ye,this._options.wellFormed))),Xe!==null&&(Ve=Xe||null)):Xe===null||Xe!==null&&Xe!==Ye?(te=!0,J+=Z.localName,Ve=Ye,this._writer.beginElement(J),this._push(this._writer.openTagBegin(J)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(Ye,this._options.wellFormed)))):(J+=Z.localName,Ve=Ye,this._writer.beginElement(J),this._push(this._writer.openTagBegin(J)))}this._serializeAttributes(Z,Q,this._prefixIndex,me,te,this._options.wellFormed);var je=Ye===E.namespace.HTML;je&&!K&&q._VoidElementNames.has(Z.localName)?(this._push(this._writer.openTagEnd(J,!0,!0)),this._writer.endElement(J)):je||K?this._push(this._writer.openTagEnd(J,!1,!1)):(this._push(this._writer.openTagEnd(J,!0,!1)),this._writer.endElement(J)),this._currentElementSerialized=!0,this._openTags.push([J,Ve,this._prefixMap,K]),this._isPrefixMapModified(this._prefixMap,Q)&&(this._prefixMap=Q),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},q.prototype._serializeCloseTag=function(){this._writer.level--;var K=this._openTags.pop();if(K!==void 0){var Z=C(K,4),J=Z[0],te=(Z[1],Z[2]),Q=Z[3];this._prefixMap=te,Q&&(this._push(this._writer.closeTag(J)),this._writer.endElement(J))}else this.emit("error",new Error("Last element is undefined."))},q.prototype._push=function(K){K===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):K.length!==0&&(this._writer.hasData=!0,this.emit("data",K,this._writer.level))},q.prototype._fromNode=function(K){var Z,J,te,Q;if(z.Guard.isElementNode(K)){var me=K.prefix?K.prefix+":"+K.localName:K.localName;K.namespaceURI!==null?this.ele(K.namespaceURI,me):this.ele(me);try{for(var Xe=w(K.attributes),Ve=Xe.next();!Ve.done;Ve=Xe.next()){var Ye=Ve.value,qe=Ye.prefix?Ye.prefix+":"+Ye.localName:Ye.localName;Ye.namespaceURI!==null?this.att(Ye.namespaceURI,qe,Ye.value):this.att(qe,Ye.value)}}catch(Je){Z={error:Je}}finally{try{Ve&&!Ve.done&&(J=Xe.return)&&J.call(Xe)}finally{if(Z)throw Z.error}}try{for(var et=w(K.childNodes),je=et.next();!je.done;je=et.next()){var Ke=je.value;this._fromNode(Ke)}}catch(Je){te={error:Je}}finally{try{je&&!je.done&&(Q=et.return)&&Q.call(et)}finally{if(te)throw te.error}}this.up()}else z.Guard.isExclusiveTextNode(K)&&K.data?this.txt(K.data):z.Guard.isCommentNode(K)?this.com(K.data):z.Guard.isCDATASectionNode(K)?this.dat(K.data):z.Guard.isProcessingInstructionNode(K)&&this.ins(K.target,K.data)},q.prototype._serializeAttributes=function(K,Z,J,te,Q,me){var Xe,Ve,Ye=me?new B.LocalNameSet:void 0;try{for(var qe=w(K.attributes),et=qe.next();!et.done;et=qe.next()){var je=et.value;if(me||Q||je.namespaceURI!==null){if(me&&Ye&&Ye.has(je.namespaceURI,je.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));me&&Ye&&Ye.set(je.namespaceURI,je.localName);var Ke=je.namespaceURI,Je=null;if(Ke!==null)if(Je=Z.get(je.prefix,Ke),Ke===E.namespace.XMLNS){if(je.value===E.namespace.XML||je.prefix===null&&Q||je.prefix!==null&&(!(je.localName in te)||te[je.localName]!==je.value)&&Z.has(je.localName,je.value))continue;if(me&&je.value===E.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(me&&je.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));je.prefix==="xmlns"&&(Je="xmlns")}else Je===null&&(Je=je.prefix===null||Z.hasPrefix(je.prefix)&&!Z.has(je.prefix,Ke)?this._generatePrefix(Ke,Z,J):je.prefix,this._push(this._writer.attribute("xmlns:"+Je,this._serializeAttributeValue(Ke,this._options.wellFormed))));if(me&&(je.localName.indexOf(":")!==-1||!P.xml_isName(je.localName)||je.localName==="xmlns"&&Ke===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((Je!==null?Je+":":"")+je.localName,this._serializeAttributeValue(je.value,this._options.wellFormed)))}else this._push(this._writer.attribute(je.localName,this._serializeAttributeValue(je.value,this._options.wellFormed)))}}catch(at){Xe={error:at}}finally{try{et&&!et.done&&(Ve=qe.return)&&Ve.call(qe)}finally{if(Xe)throw Xe.error}}},q.prototype._serializeAttributeValue=function(K,Z){return Z&&K!==null&&!P.xml_isLegalChar(K)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):K===null?"":K.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},q.prototype._recordNamespaceInformation=function(K,Z,J){var te,Q,me=null;try{for(var Xe=w(K.attributes),Ve=Xe.next();!Ve.done;Ve=Xe.next()){var Ye=Ve.value,qe=Ye.namespaceURI,et=Ye.prefix;if(qe===E.namespace.XMLNS){if(et===null){me=Ye.value;continue}var je=Ye.localName,Ke=Ye.value;if(Ke===E.namespace.XML||(Ke===""&&(Ke=null),Z.has(je,Ke)))continue;Z.set(je,Ke),J[je]=Ke||""}}}catch(Je){te={error:Je}}finally{try{Ve&&!Ve.done&&(Q=Xe.return)&&Q.call(Xe)}finally{if(te)throw te.error}}return me},q.prototype._generatePrefix=function(K,Z,J){var te="ns"+J.value;return J.value++,Z.set(te,K),te},q.prototype._isPrefixMapModified=function(K,Z){var J=K._items,te=Z._items,Q=K._nullItems,me=Z._nullItems;for(var Xe in te){var Ve=J[Xe];if(Ve===void 0)return!0;var Ye=te[Xe];if(Ve.length!==Ye.length)return!0;for(var qe=0;qe<Ve.length;qe++)if(Ve[qe]!==Ye[qe])return!0}if(Q.length!==me.length)return!0;for(qe=0;qe<Q.length;qe++)if(Q[qe]!==me[qe])return!0;return!1},q._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),q}(f(309).EventEmitter);m.XMLBuilderCBImpl=W},function(d,m,f){f(74);var g,x=this&&this.__extends||(g=function(C,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var P in M)M.hasOwnProperty(P)&&(_[P]=M[P])})(C,A)},function(C,A){function _(){this.constructor=C}g(C,A),C.prototype=A===null?Object.create(A):(_.prototype=A.prototype,new _)});Object.defineProperty(m,"__esModule",{value:!0});var w=function(C){function A(_){var M=C.call(this,_)||this;return M._lineLength=0,M}return x(A,C),A.prototype.frontMatter=function(){return""},A.prototype.declaration=function(_,M,P){var E=this._beginLine()+"<?xml";return E+=' version="'+_+'"',M!==void 0&&(E+=' encoding="'+M+'"'),P!==void 0&&(E+=' standalone="'+(P?"yes":"no")+'"'),E+="?>"},A.prototype.docType=function(_,M,P){var E=this._beginLine();return E+=M&&P?"<!DOCTYPE "+_+' PUBLIC "'+M+'" "'+P+'">':M?"<!DOCTYPE "+_+' PUBLIC "'+M+'">':P?"<!DOCTYPE "+_+' SYSTEM "'+P+'">':"<!DOCTYPE "+_+">"},A.prototype.comment=function(_){return this._beginLine()+"<!--"+_+"-->"},A.prototype.text=function(_){return this._beginLine()+_},A.prototype.instruction=function(_,M){return M?this._beginLine()+"<?"+_+" "+M+"?>":this._beginLine()+"<?"+_+"?>"},A.prototype.cdata=function(_){return this._beginLine()+"<![CDATA["+_+"]]>"},A.prototype.openTagBegin=function(_){return this._lineLength+=1+_.length,this._beginLine()+"<"+_},A.prototype.openTagEnd=function(_,M,P){return P?" />":M?this._writerOptions.allowEmptyTags?"></"+_+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},A.prototype.closeTag=function(_){return this._beginLine()+"</"+_+">"},A.prototype.attribute=function(_,M){var P=_+'="'+M+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+P.length>this._writerOptions.width?(P=this._beginLine()+this._indent(1)+P,this._lineLength=P.length,P):(this._lineLength+=1+P.length," "+P)},A.prototype.beginElement=function(_){},A.prototype.endElement=function(_){},A.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var _=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=_.length,_}return""},A.prototype._indent=function(_){return _<=0?"":this._writerOptions.indent.repeat(_)},A}(f(114).BaseCBWriter);m.XMLCBWriter=w},function(d,m,f){f(74);var g,x=this&&this.__extends||(g=function(C,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var P in M)M.hasOwnProperty(P)&&(_[P]=M[P])})(C,A)},function(C,A){function _(){this.constructor=C}g(C,A),C.prototype=A===null?Object.create(A):(_.prototype=A.prototype,new _)});Object.defineProperty(m,"__esModule",{value:!0});var w=function(C){function A(_){var M=C.call(this,_)||this;return M._hasChildren=[],M._additionalLevel=0,M}return x(A,C),A.prototype.frontMatter=function(){return""},A.prototype.declaration=function(_,M,P){return""},A.prototype.docType=function(_,M,P){return""},A.prototype.comment=function(_){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(_)+this._sep()+"}"},A.prototype.text=function(_){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(_)+this._sep()+"}"},A.prototype.instruction=function(_,M){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(M?_+" "+M:_)+this._sep()+"}"},A.prototype.cdata=function(_){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(_)+this._sep()+"}"},A.prototype.attribute=function(_,M){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+_)+this._sep()+this._val(M)+this._sep()+"}"},A.prototype.openTagBegin=function(_){var M=this._comma()+this._beginLine()+"{"+this._sep()+this._key(_)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,M+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),M},A.prototype.openTagEnd=function(_,M,P){if(M){var E=this._sep()+"]";return this._additionalLevel--,E+=this._beginLine()+"}"+this._sep()+"}"}return""},A.prototype.closeTag=function(_){var M=this._beginLine()+"]";return this._additionalLevel--,M+=this._beginLine()+"}"+this._sep()+"}"},A.prototype.beginElement=function(_){},A.prototype.endElement=function(_){this._hasChildren.pop()},A.prototype._beginLine=function(_){return _===void 0&&(_=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+_):""},A.prototype._indent=function(_){return _+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(_+this._additionalLevel)},A.prototype._comma=function(){var _=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),_},A.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},A.prototype._key=function(_){return'"'+_+'":'},A.prototype._val=function(_){return JSON.stringify(_)},A}(f(114).BaseCBWriter);m.JSONCBWriter=w},function(d,m,f){f(74);var g,x=this&&this.__extends||(g=function(C,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var P in M)M.hasOwnProperty(P)&&(_[P]=M[P])})(C,A)},function(C,A){function _(){this.constructor=C}g(C,A),C.prototype=A===null?Object.create(A):(_.prototype=A.prototype,new _)});Object.defineProperty(m,"__esModule",{value:!0});var w=function(C){function A(_){var M=C.call(this,_)||this;if(M._rootWritten=!1,M._additionalLevel=0,_.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(_.offset<0)throw new Error("YAML offset should be zero or a positive number.");return M}return x(A,C),A.prototype.frontMatter=function(){return this._beginLine()+"---"},A.prototype.declaration=function(_,M,P){return""},A.prototype.docType=function(_,M,P){return""},A.prototype.comment=function(_){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(_)},A.prototype.text=function(_){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(_)},A.prototype.instruction=function(_,M){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(M?_+" "+M:_)},A.prototype.cdata=function(_){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(_)},A.prototype.attribute=function(_,M){this._additionalLevel++;var P=this._beginLine()+this._key(this._builderOptions.convert.att+_)+" "+this._val(M);return this._additionalLevel--,P},A.prototype.openTagBegin=function(_){var M=this._beginLine()+this._key(_);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,M+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},A.prototype.openTagEnd=function(_,M,P){return M?" "+this._val(""):""},A.prototype.closeTag=function(_){return this._additionalLevel--,""},A.prototype.beginElement=function(_){},A.prototype.endElement=function(_){},A.prototype._beginLine=function(_){return _===void 0&&(_=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,_)},A.prototype._indent=function(_,M){if(_+this._additionalLevel<=0)return"";var P=this._writerOptions.indent.repeat(_+this._additionalLevel);return!M&&this._rootWritten?P.substr(0,P.length-2)+"-"+P.substr(-1,1):P},A.prototype._key=function(_){return'"'+_+'":'},A.prototype._val=function(_){return JSON.stringify(_)},A}(f(114).BaseCBWriter);m.YAMLCBWriter=w},function(d,m,f){var g,x=typeof Reflect=="object"?Reflect:null,w=x&&typeof x.apply=="function"?x.apply:function(L,W,G){return Function.prototype.apply.call(L,W,G)};g=x&&typeof x.ownKeys=="function"?x.ownKeys:Object.getOwnPropertySymbols?function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:function(L){return Object.getOwnPropertyNames(L)};var C=Number.isNaN||function(L){return L!=L};function A(){A.init.call(this)}d.exports=A,A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var _=10;function M(L){if(typeof L!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}function P(L){return L._maxListeners===void 0?A.defaultMaxListeners:L._maxListeners}function E(L,W,G,q){var K,Z,J,te;if(M(G),(Z=L._events)===void 0?(Z=L._events=Object.create(null),L._eventsCount=0):(Z.newListener!==void 0&&(L.emit("newListener",W,G.listener?G.listener:G),Z=L._events),J=Z[W]),J===void 0)J=Z[W]=G,++L._eventsCount;else if(typeof J=="function"?J=Z[W]=q?[G,J]:[J,G]:q?J.unshift(G):J.push(G),(K=P(L))>0&&J.length>K&&!J.warned){J.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=L,Q.type=W,Q.count=J.length,te=Q,console&&console.warn&&console.warn(te)}return L}function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(L,W,G){var q={fired:!1,wrapFn:void 0,target:L,type:W,listener:G},K=R.bind(q);return K.listener=G,q.wrapFn=K,K}function z(L,W,G){var q=L._events;if(q===void 0)return[];var K=q[W];return K===void 0?[]:typeof K=="function"?G?[K.listener||K]:[K]:G?function(Z){for(var J=new Array(Z.length),te=0;te<J.length;++te)J[te]=Z[te].listener||Z[te];return J}(K):I(K,K.length)}function F(L){var W=this._events;if(W!==void 0){var G=W[L];if(typeof G=="function")return 1;if(G!==void 0)return G.length}return 0}function I(L,W){for(var G=new Array(W),q=0;q<W;++q)G[q]=L[q];return G}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(L){if(typeof L!="number"||L<0||C(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");_=L}}),A.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||C(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this},A.prototype.getMaxListeners=function(){return P(this)},A.prototype.emit=function(L){for(var W=[],G=1;G<arguments.length;G++)W.push(arguments[G]);var q=L==="error",K=this._events;if(K!==void 0)q=q&&K.error===void 0;else if(!q)return!1;if(q){var Z;if(W.length>0&&(Z=W[0]),Z instanceof Error)throw Z;var J=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw J.context=Z,J}var te=K[L];if(te===void 0)return!1;if(typeof te=="function")w(te,this,W);else{var Q=te.length,me=I(te,Q);for(G=0;G<Q;++G)w(me[G],this,W)}return!0},A.prototype.addListener=function(L,W){return E(this,L,W,!1)},A.prototype.on=A.prototype.addListener,A.prototype.prependListener=function(L,W){return E(this,L,W,!0)},A.prototype.once=function(L,W){return M(W),this.on(L,B(this,L,W)),this},A.prototype.prependOnceListener=function(L,W){return M(W),this.prependListener(L,B(this,L,W)),this},A.prototype.removeListener=function(L,W){var G,q,K,Z,J;if(M(W),(q=this._events)===void 0)return this;if((G=q[L])===void 0)return this;if(G===W||G.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete q[L],q.removeListener&&this.emit("removeListener",L,G.listener||W));else if(typeof G!="function"){for(K=-1,Z=G.length-1;Z>=0;Z--)if(G[Z]===W||G[Z].listener===W){J=G[Z].listener,K=Z;break}if(K<0)return this;K===0?G.shift():function(te,Q){for(;Q+1<te.length;Q++)te[Q]=te[Q+1];te.pop()}(G,K),G.length===1&&(q[L]=G[0]),q.removeListener!==void 0&&this.emit("removeListener",L,J||W)}return this},A.prototype.off=A.prototype.removeListener,A.prototype.removeAllListeners=function(L){var W,G,q;if((G=this._events)===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[L]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete G[L]),this;if(arguments.length===0){var K,Z=Object.keys(G);for(q=0;q<Z.length;++q)(K=Z[q])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=G[L])=="function")this.removeListener(L,W);else if(W!==void 0)for(q=W.length-1;q>=0;q--)this.removeListener(L,W[q]);return this},A.prototype.listeners=function(L){return z(this,L,!0)},A.prototype.rawListeners=function(L){return z(this,L,!1)},A.listenerCount=function(L,W){return typeof L.listenerCount=="function"?L.listenerCount(W):F.call(L,W)},A.prototype.listenerCount=F,A.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},function(d,m,f){Object.defineProperty(m,"__esModule",{value:!0});var g=f(77);m.createCB=function(x){return new g.XMLBuilderCBImpl(x)},m.fragmentCB=function(x){return new g.XMLBuilderCBImpl(x,!0)}}])})})(xmlbuilder2_min);class FractionHelper{static convertToFractionString(s,d=1,m,f=1e-6,g){if(Math.abs(s)<f)return"0";s/=d;for(let x=1;x<=64;x++){const w=s*x,C=Math.round(w);if(Math.abs(w-C)<f){const A=!m||C!=1?C.toString():"";return x==1?`${A}${m}`:`${A}${m}/${x}`}}return g?g(s)+(m||""):`${s.toString()}${m||""}`}}class StringHelper{static splitLines(s){return s.split(/\r?\n/)}}class PlotModelUtilities{static isReversible(s){if(s.axes.length===0&&s.series.length===0)return!1;for(const d of s.axes){if(d.position===AxisPosition.None)return!1;const m=d.__isReversible;if(m!==void 0&&!m)return!1}for(const d of s.series){const m=d.constructor.name;if(!(d instanceof XYAxisSeries)||this.NonReversibleSeriesTypes.has(m))return!1}for(const d of s.annotations){const m=d.constructor.name;if(this.NonReversibleDataSpaceAnnotationTypes.has(m))return!1}return!0}static isTransposable(s){if(s.axes.length===0&&s.series.length===0)return!1;for(const d of s.axes)if(d.position===AxisPosition.None)return!1;for(const d of s.series){const m=d.constructor.name;if(!isTransposablePlotElement(d)||this.NonTransposableSeriesTypes.has(m))return!1}for(const d of s.annotations){const m=d.constructor.name;if(!isTransposablePlotElement(d)||this.NonTransposableDataSpaceAnnotationTypes.has(m))return!1}return!0}static reverseXAxis(s){s.title&&(s.title+=" (reversed X Axis)");let d=!1;for(const m of s.axes)m.position===AxisPosition.Bottom&&(m.startPosition=1-m.startPosition,m.endPosition=1-m.endPosition,d=!0);return d||s.axes.push(new LinearAxis({position:AxisPosition.Bottom,startPosition:1,endPosition:0})),s}static reverseYAxis(s){s.title&&(s.title+=" (reversed Y Axis)");let d=!1;for(const m of s.axes)m.position===AxisPosition.Left&&(m.startPosition=1-m.startPosition,m.endPosition=1-m.endPosition,d=!0);return d||s.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0})),s}static reverseAllAxes(s){s.title&&(s.title+=" (reversed all Axes)"),s.update(!1);for(const d of s.axes)(d.position===AxisPosition.Left||d.position===AxisPosition.Bottom||d.position===AxisPosition.Right||d.position===AxisPosition.Top)&&(d.startPosition=1-d.startPosition,d.endPosition=1-d.endPosition);return s}static transpose(s){s.title&&(s.title+=" (transposed)"),s.update(!1);for(const d of s.axes)switch(d.position){case AxisPosition.Bottom:d.position=AxisPosition.Left;break;case AxisPosition.Left:d.position=AxisPosition.Bottom;break;case AxisPosition.Right:d.position=AxisPosition.Top;break;case AxisPosition.Top:d.position=AxisPosition.Right;break;case AxisPosition.None:break;default:throw new Error("Invalid axis position")}for(const d of s.annotations)d.xAxis&&!d.xAxisKey&&(d.xAxis.key||(d.xAxis.key=this.XAXIS_KEY),d.xAxisKey=d.xAxis.key),d.yAxis&&!d.yAxisKey&&(d.yAxis.key||(d.yAxis.key=this.YAXIS_KEY),d.yAxisKey=d.yAxis.key);for(const d of s.series)d instanceof XYAxisSeries&&(d.xAxisKey||(d.xAxis?(d.xAxis.key||(d.xAxis.key=this.XAXIS_KEY),d.xAxisKey=d.xAxis.key):d.xAxisKey=this.XAXIS_KEY),d.yAxisKey||(d.yAxis?(d.yAxis.key||(d.yAxis.key=this.YAXIS_KEY),d.yAxisKey=d.yAxis.key):d.yAxisKey=this.YAXIS_KEY));return s}}D(PlotModelUtilities,"XAXIS_KEY","x"),D(PlotModelUtilities,"YAXIS_KEY","y"),D(PlotModelUtilities,"NonReversibleSeriesTypes",new Set),D(PlotModelUtilities,"NonReversibleDataSpaceAnnotationTypes",new Set([])),D(PlotModelUtilities,"NonTransposableSeriesTypes",new Set(["CandleStickAndVolumeSeries","OldCandleStickSeries"])),D(PlotModelUtilities,"NonTransposableDataSpaceAnnotationTypes",new Set);class ArrayBuilder{static createVector(s,d,m){if(m.toFixed(0)!==m.toString())throw new Error("use createVectorWithStep instead");const f=[];for(let g=0;g<m;g++)f[g]=Number((s+(d-s)*g/(m-1)).toFixed(8));return f}static createVectorWithStep(s,d,m){const f=Math.round((d-s)/m),g=[];for(let x=0;x<=f;x++)g[x]=Number((s+x*m).toFixed(8));return g}static evaluate(s,d,m){const f=d.length,g=m.length,x=[];for(let w=0;w<f;w++){x[w]=[];for(let C=0;C<g;C++)x[w][C]=s(d[w],m[C])}return x}static fill(s,d){for(let m=0;m<s.length;m++)s[m]=d}static fill2D(s,d){for(let m=0;m<s.length;m++)for(let f=0;f<s[m].length;f++)s[m][f]=d}}class TrackerHelper{static getNearestHit(s,d,m,f,g,x){if(s){if(m||f){const w=s.getNearestPoint(d,!1);if(this.shouldTrackerOpen(w,d,g))return w}if(!f){const w=s.getNearestPoint(d,!0);if(!x||this.shouldTrackerOpen(w,d,g))return w}}}static shouldTrackerOpen(s,d,m){return s!=null&&s.position?s.position.distanceTo(d)<m:!1}}class Conrec{static contour(s,d,m,f,g){let x=0,w=0,C=0,A=0;const _=new Array(5),M=new Array(5),P=new Array(5),E=new Array(5),R=0,B=s.length-1,z=0,F=s[0].length-1,I=f.length,L=[0,1,1,0],W=[0,0,1,1],G=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],q=(Z,J)=>(_[J]*P[Z]-_[Z]*P[J])/(_[J]-_[Z]),K=(Z,J)=>(_[J]*E[Z]-_[Z]*E[J])/(_[J]-_[Z]);for(let Z=F-1;Z>=z;Z--)for(let J=R;J<=B-1;J++){const te=Math.min(s[J][Z],s[J][Z+1]),Q=Math.min(s[J+1][Z],s[J+1][Z+1]),me=Math.min(te,Q),Xe=Math.max(s[J][Z],s[J][Z+1]),Ve=Math.max(s[J+1][Z],s[J+1][Z+1]),Ye=Math.max(Xe,Ve);if(Ye>=f[0]&&me<=f[I-1]){for(let qe=0;qe<I;qe++)if(f[qe]>=me&&f[qe]<=Ye){for(let et=4;et>=0;et--)et>0?(_[et]=s[J+L[et-1]][Z+W[et-1]]-f[qe],P[et]=d[J+L[et-1]],E[et]=m[Z+W[et-1]]):(_[0]=.25*(_[1]+_[2]+_[3]+_[4]),P[0]=.5*(d[J]+d[J+1]),E[0]=.5*(m[Z]+m[Z+1])),_[et]>0?M[et]=1:_[et]<0?M[et]=-1:M[et]=0;for(let et=1;et<=4;et++){const je=et,Ke=0,Je=et!==4?et+1:1,at=G[M[je]+1][M[Ke]+1][M[Je]+1];if(at!==0){switch(at){case 1:x=P[je],C=E[je],w=P[Ke],A=E[Ke];break;case 2:x=P[Ke],C=E[Ke],w=P[Je],A=E[Je];break;case 3:x=P[Je],C=E[Je],w=P[je],A=E[je];break;case 4:x=P[je],C=E[je],w=q(Ke,Je),A=K(Ke,Je);break;case 5:x=P[Ke],C=E[Ke],w=q(Je,je),A=K(Je,je);break;case 6:x=P[Je],C=E[Je],w=q(je,Ke),A=K(je,Ke);break;case 7:x=q(je,Ke),C=K(je,Ke),w=q(Ke,Je),A=K(Ke,Je);break;case 8:x=q(Ke,Je),C=K(Ke,Je),w=q(Je,je),A=K(Je,je);break;case 9:x=q(Je,je),C=K(Je,je),w=q(je,Ke),A=K(je,Ke);break}g(x,C,w,A,f[qe])}}}}}}}var BinningOutlierMode=(a=>(a[a.RejectOutliers=0]="RejectOutliers",a[a.IgnoreOutliers=1]="IgnoreOutliers",a[a.CountOutliers=2]="CountOutliers",a))(BinningOutlierMode||{}),BinningIntervalType=(a=>(a[a.InclusiveLowerBound=0]="InclusiveLowerBound",a[a.InclusiveUpperBound=1]="InclusiveUpperBound",a))(BinningIntervalType||{}),BinningExtremeValueMode=(a=>(a[a.ExcludeExtremeValues=0]="ExcludeExtremeValues",a[a.IncludeExtremeValues=1]="IncludeExtremeValues",a))(BinningExtremeValueMode||{});class BinningOptions{constructor(s,d,m){if(this.outlierMode=s,this.intervalType=d,this.extremeValuesMode=m,s!==0&&s!==2&&s!==1)throw new Error("Unsupported binning outlier mode");if(d!==0&&d!==1)throw new Error("Unsupported bin interval type");if(m!==0&&m!==1)throw new Error("Unsupported bin interval type")}}class HistogramHelpers{static createUniformBins(s,d,m){if(m<1)throw new Error("The bin count must be positive.");if(isNaN(s)||!isFinite(s))throw new Error("The start may not be NaN or infinite.");if(isNaN(d)||!isFinite(d))throw new Error("The start may not be NaN or infinite.");if(d<=s)throw new Error("The end must be strictly greater than the start.");const f=[];f.push(s);for(let g=1;g<m;g++)f.push(s+(d-s)*g/m);return f.push(d),f}static collect(s,d,m){if(!s)throw new Error("Samples cannot be undefined.");if(!d)throw new Error("Bin breaks cannot be undefined.");if(!m)throw new Error("Binning options cannot be undefined.");const f=Array.from(new Set(d)).sort((A,_)=>A-_);if(f.length<2)throw new Error("At least 2 distinct bin breaks must be provided.");if(f.some(A=>isNaN(A)||!isFinite(A)))throw new Error("Bin breaks may not be NaN or infinite.");const g=new Array(f.length-1).fill(0);let x=0;function w(A,_){return A-_}for(const A of s){if(isNaN(A)||!isFinite(A))throw new Error("Samples may not be NaN or infinite.");let _=HistogramHelpers.binarySearch(f,A,w),M=!1;if(_>=0?m.intervalType===BinningIntervalType.InclusiveUpperBound?_>0?(g[_-1]+=1,M=!0):m.extremeValuesMode===BinningExtremeValueMode.IncludeExtremeValues&&(g[_]+=1,M=!0):_<g.length?(g[_]+=1,M=!0):m.extremeValuesMode===BinningExtremeValueMode.IncludeExtremeValues&&(g[_-1]+=1,M=!0):(_=~_-1,_>=0&&_<g.length&&(g[_]+=1,M=!0)),M)x++;else switch(m.outlierMode){case BinningOutlierMode.RejectOutliers:throw new Error(`Sample with value ${A} could not be assigned to any bin.`);case BinningOutlierMode.IgnoreOutliers:break;case BinningOutlierMode.CountOutliers:x++;break}}x===0&&(x=1);const C=[];for(let A=0;A<f.length-1;A++){const _=g[A];C.push(new HistogramItem(f[A],f[A+1],_/x,_))}return C}static binarySearch(s,d,m){let f=0,g=s.length-1;for(;f<=g;){const x=g+f>>1,w=m(d,s[x]);if(w>0)f=x+1;else if(w<0)g=x-1;else return x}return-f-1}}function createNormalDistributionModel(){const a=new PlotModel({title:"Normal distribution",subtitle:"Probability density function"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-.05,maximum:1.05,majorStep:.2,minorStep:.05,tickStyle:TickStyle.Inside})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-5.25,maximum:5.25,majorStep:1,minorStep:.25,tickStyle:TickStyle.Inside})),a.series.push(createNormalDistributionSeries(-5,5,0,.2)),a.series.push(createNormalDistributionSeries(-5,5,0,1)),a.series.push(createNormalDistributionSeries(-5,5,0,5)),a.series.push(createNormalDistributionSeries(-5,5,-2,.5)),a}const createNormalDistributionSeries=(a,s,d,m,f=1001)=>{const g=new LineSeries;g.title=`=${d}, =${m}`;for(let x=0;x<f;x++){const w=a+(s-a)*x/(f-1),C=1/Math.sqrt(2*Math.PI*m)*Math.exp(-(w-d)*(w-d)/2/m);g.points.push(new DataPoint(w,C))}return g};function lineLegendPositionAtEnd(){const a=new PlotModel({title:"Average (Mean) monthly temperatures in 2003",plotMargins:new OxyThickness(60,4,60,40),plotAreaBorderThickness:new OxyThickness(0),isLegendVisible:!1}),s=A=>`${A.title}: ${Number(A.yValue).toFixed(1)}F`,d=new LineSeries({title:"Phoenix",lineLegendPosition:LineLegendPosition.End,trackerStringFormatter:s}),m=new LineSeries({title:"Raleigh",lineLegendPosition:LineLegendPosition.End,trackerStringFormatter:s}),f=new LineSeries({title:"Minneapolis",lineLegendPosition:LineLegendPosition.End,trackerStringFormatter:s}),g=[52.1,55.1,59.7,67.7,76.3,84.6,91.2,89.1,83.8,72.2,59.8,52.5],x=[40.5,42.2,49.2,59.5,67.4,74.4,77.5,76.5,70.6,60.2,50,41.2],w=[12.2,16.5,28.3,45.1,57.1,66.9,71.9,70.2,60,50,32.4,18.6];for(let A=0;A<12;A++)d.points.push(new DataPoint(A,g[A])),m.points.push(new DataPoint(A,x[A])),f.points.push(new DataPoint(A,w[A]));a.series.push(d),a.series.push(m),a.series.push(f);const C=new CategoryAxis({axislineStyle:LineStyle.Solid});return C.labels.push("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),a.axes.push(C),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Fahrenheit",axislineStyle:LineStyle.Solid})),a}const category$$="1 ShowCases",ShowCases$1={category:category$$,tags:["Showcase"],examples:[{title:"Normal distribution",example:{model:createNormalDistributionModel}},{title:"Average (Mean) monthly temperatures in 2003",example:{model:lineLegendPositionAtEnd}}]};function graph1(){const a=new PlotModel({title:"Q1 2003 Calls by Region",plotAreaBorderThickness:new OxyThickness(0)}),s=new CategoryAxis({axislineStyle:LineStyle.Solid,tickStyle:TickStyle.None,key:"y"});s.labels.push("North","East","South","West"),a.axes.push(s),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:6e3,majorStep:1e3,minorStep:1e3,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside,key:"x"}));const d=new BarSeries({fillColor:OxyColors.Black,xAxisKey:"x",yAxisKey:"y"});return d.items.push(new BarItem({value:3e3})),d.items.push(new BarItem({value:4500})),d.items.push(new BarItem({value:2100})),d.items.push(new BarItem({value:4800})),a.series.push(d),a}function graph2(){const a=new PlotModel({title:"2003 Sales",plotAreaBorderThickness:new OxyThickness(0),isLegendVisible:!1}),s=[1e3,1010,1020,1010,1020,1030,1e3,500,1e3,900,900,1e3],d=[2250,2500,2750,2500,2750,3e3,2500,2750,3100,2800,3100,3500],m=new CategoryAxis({axislineStyle:LineStyle.Solid,tickStyle:TickStyle.None});m.labels.push("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov"),a.axes.push(m),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:4e3,majorStep:500,minorStep:500,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside}));const f=new LineSeries({color:OxyColors.Orange});for(let x=0;x<12;x++)f.points.push(new DataPoint(x,s[x]));const g=new LineSeries({color:OxyColors.Gray});for(let x=0;x<12;x++)g.points.push(new DataPoint(x,d[x]));return a.series.push(f),a.series.push(g),a}function graph3(){const a=new PlotModel({title:"Headcount",plotAreaBorderThickness:new OxyThickness(0),plotMargins:new OxyThickness(100,40,20,40)}),s=new Map([["Manufacturing",240],["Sales",160],["Engineering",50],["Operations",45],["Finance",40],["Info Systems",39],["Legal",25],["Marketing",10]]);return a.axes.push(new CategoryAxis({position:AxisPosition.Left,itemsSource:Array.from(s),labelField:"0",tickStyle:TickStyle.None,axisTickToLabelDistance:10,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:250,majorStep:50,minorStep:50,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside,minimumPadding:0,maximumPadding:0})),a.series.push(new BarSeries({fillColor:OxyColors.Black,itemsSource:Array.from(s),valueField:"1"})),a}function graph4(){const a=new PlotModel({title:"Regional % of Total Expenses",plotAreaBorderThickness:new OxyThickness(0)}),s=new CategoryAxis({tickStyle:TickStyle.None,gapWidth:0,key:"y"});s.labels.push(`West
34%`,`East
30%`,`North
20%`,`South
16%`),a.axes.push(s),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:.35+Number.EPSILON,majorStep:.05,minorStep:.05,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside,stringFormatter:f=>`${Math.round(f*100)}%`,key:"x"}));const d=new BarSeries({barWidth:1,strokeColor:OxyColors.DarkGray,strokeThickness:1,fillColor:OxyColors.Black,xAxisKey:"x",yAxisKey:"y"}),m=[.34,.3,.2,.16];return d.items=m.map(f=>BarItem.fromValue(f)),a.series.push(d),a}function graph5(){const a=new PlotModel({title:"Actual to Plan Variance",plotAreaBorderThickness:new OxyThickness(0)}),s=new Map([["Sales",7],["Marketing",-7],["Systems",-2],["HR",-17],["Finance",5]]);return a.axes.push(new CategoryAxis({itemsSource:Array.from(s),labelField:"0",tickStyle:TickStyle.None,key:"y"})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-20,maximum:10,minorStep:5,majorStep:5,layer:AxisLayer.AboveSeries,axislineStyle:LineStyle.Solid,extraGridlines:[0],extraGridlineColor:OxyColors.Black,extraGridlineThickness:3,tickStyle:TickStyle.Outside,stringFormatter:d=>(d>0?"+":d<0?"-":"")+round(Math.abs(d),0),key:"x"})),a.series.push(new BarSeries({fillColor:OxyColors.Orange,negativeFillColor:OxyColors.Gray,itemsSource:Array.from(s),valueField:"1",xAxisKey:"x",yAxisKey:"y"})),a}function graph6(){const a=new PlotModel({title:"Order Count by Order Size",plotAreaBorderThickness:new OxyThickness(0),plotMargins:new OxyThickness(60,4,4,60)}),s=new Map([[" <$10",5e3],[`>=$10
    &
 <$20`,1500],[`>=$20
    &
 <$30`,1e3],[`>=$40
    &
 <$40`,500],[">=$40",200]]);return a.axes.push(new CategoryAxis({axislineStyle:LineStyle.Solid,itemsSource:Array.from(s),labelField:"0",tickStyle:TickStyle.None,key:"y"})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:6e3,majorStep:1e3,minorStep:1e3,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside,stringFormatter:d=>(d>0?"+":d<0?"-":"")+round(Math.abs(d),0),key:"x"})),a.series.push(new BarSeries({fillColor:OxyColors.Orange,itemsSource:Array.from(s),valueField:"1",xAxisKey:"x",yAxisKey:"y"})),a}function graph7(){const a=new PlotModel({title:"Correlation of Employee Heights and Salaries",plotAreaBorderThickness:new OxyThickness(0)}),s=[new DataPoint(62,39e3),new DataPoint(66,44e3),new DataPoint(64,5e4),new DataPoint(66,49500),new DataPoint(67,52e3),new DataPoint(68,5e4),new DataPoint(66,56e3),new DataPoint(67,56e3),new DataPoint(72,56e3),new DataPoint(68,58e3),new DataPoint(69,62e3),new DataPoint(71,63e3),new DataPoint(65,64e3),new DataPoint(68,71e3),new DataPoint(72,72e3),new DataPoint(74,69e3),new DataPoint(74,79e3),new DataPoint(77,81e3)];return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:3e4,maximum:9e4,majorStep:1e4,minorStep:1e4,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:60,maximum:80,majorStep:5,minorStep:5,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Outside})),a.series.push(new ScatterSeries({itemsSource:s,markerType:MarkerType.Circle,markerSize:3,markerFill:OxyColors.White,markerStroke:OxyColors.Black,dataFieldX:"x",dataFieldY:"y"})),a}const category$_="Examples from the book 'Show Me the Numbers'",ShowMeTheNumbersExamples={category:category$_,tags:["Showcase"],examples:[{title:"Q1 2003 Calls by Region",example:{model:graph1}},{title:"2003 Sales",example:{model:graph2}},{title:"Headcount",example:{model:graph3}},{title:"Regional % of Total Expenses",example:{model:graph4}},{title:"Actual to Plan Variance",example:{model:graph5}},{title:"Order Count by Order Size",example:{model:graph6}},{title:"Correlation of Employee Heights and Salaries",example:{model:graph7}}]},ShowCases=[ShowCases$1,ShowMeTheNumbersExamples];function toolTips$1(){const a=new PlotModel({title:"Tool tips"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new LineAnnotation({slope:.1,intercept:1,text:"LineAnnotation",toolTip:"This is a tool tip for the LineAnnotation"})),a.annotations.push(new RectangleAnnotation({minimumX:20,maximumX:70,minimumY:10,maximumY:40,textRotation:10,text:"RectangleAnnotation",toolTip:"This is a tooltip for the RectangleAnnotation",fill:OxyColor.fromAColor(99,OxyColors.Blue),stroke:OxyColors.Black,strokeThickness:2})),a.annotations.push(new EllipseAnnotation({x:20,y:60,width:20,height:15,text:"EllipseAnnotation",toolTip:"This is a tool tip for the EllipseAnnotation",textRotation:10,fill:OxyColor.fromAColor(99,OxyColors.Green),stroke:OxyColors.Black,strokeThickness:2})),a.annotations.push(new PointAnnotation({x:50,y:50,text:"P1",toolTip:"This is a tool tip for the PointAnnotation"})),a.annotations.push(new ArrowAnnotation({startPoint:new DataPoint(8,4),endPoint:new DataPoint(0,0),color:OxyColors.Green,text:"ArrowAnnotation",toolTip:"This is a tool tip for the ArrowAnnotation"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(60,60),text:"TextAnnotation",toolTip:"This is a tool tip for the TextAnnotation"})),a}const category$Z="Annotations",AnnotationExamples={category:category$Z,tags:["Annotations"],examples:[{title:"Tool tips",example:{model:toolTips$1}}]};function arrowAnnotation$1(){const a=new PlotModel;return a.title="ArrowAnnotations",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-40,maximum:60})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10})),a.annotations.push(new ArrowAnnotation({startPoint:new DataPoint(8,4),endPoint:new DataPoint(0,0),color:OxyColors.Green,text:"StartPoint and EndPoint"})),a.annotations.push(new ArrowAnnotation({arrowDirection:new ScreenVector(30,70),endPoint:new DataPoint(40,-3),color:OxyColors.Blue,text:"ArrowDirection and EndPoint"})),a.annotations.push(new ArrowAnnotation({arrowDirection:new ScreenVector(30,-70),endPoint:new DataPoint(10,-3),headLength:14,headWidth:6,veeness:4,color:OxyColors.Red,text:"HeadLength = 20, HeadWidth = 10, Veeness = 4"})),a}const category$Y="ArrowAnnotation",ArrowAnnotationExamples={category:category$Y,tags:["Annotations"],examples:[{title:"ArrowAnnotation",example:{model:arrowAnnotation$1}}]};function ellipseAnnotation(){const a=new PlotModel({title:"EllipseAnnotation"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new EllipseAnnotation({x:20,y:60,width:20,height:15,text:"EllipseAnnotation",textRotation:10,fill:OxyColor.fromAColor(99,OxyColors.Green),stroke:OxyColors.Black,strokeThickness:2})),a.annotations.push(new EllipseAnnotation({x:20,y:20,width:20,height:20,fill:OxyColor.fromAColor(99,OxyColors.Green),stroke:OxyColors.Black,strokeThickness:2})),a.annotations.push(new EllipseAnnotation({x:30,y:20,width:20,height:20,fill:OxyColor.fromAColor(99,OxyColors.Red),stroke:OxyColors.Black,strokeThickness:2})),a.annotations.push(new EllipseAnnotation({x:25,y:30,width:20,height:20,fill:OxyColor.fromAColor(99,OxyColors.Blue),stroke:OxyColors.Black,strokeThickness:2})),a}const category$X="EllipseAnnotation",EllipseAnnotationExamples={category:category$X,tags:["Annotations"],examples:[{title:"EllipseAnnotation",example:{model:ellipseAnnotation}}]};function annotation(){const a=new PlotModel;return a.title="FunctionAnnotation",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10})),a.annotations.push(new FunctionAnnotation({equation:Math.sin,strokeThickness:2,color:OxyColor.fromAColor(120,OxyColors.Blue),text:"f(x)=sin(x)"})),a.annotations.push(new FunctionAnnotation({equation:s=>s*s,strokeThickness:2,color:OxyColor.fromAColor(120,OxyColors.Red),type:FunctionAnnotationType.EquationY,text:"f(y)=y^2"})),a}const category$W="FunctionAnnotation",FunctionAnnotationExamples={category:category$W,tags:["Annotations"],examples:[{title:"FunctionAnnotation",example:{model:annotation}}]};async function imageAnnotation$1(){const a=window.oxyPlotImg;if(!a)throw new Error("window.oxyPlotImg not set");const s=new PlotModel({title:"ImageAnnotation",plotMargins:new OxyThickness(60,4,4,60)});s.axes.push(new LinearAxis({position:AxisPosition.Bottom})),s.axes.push(new LinearAxis({position:AxisPosition.Left}));const m=await getImageService().load(a);s.annotations.push(new ImageAnnotation({imageSource:m,opacity:.2,interpolate:!1,x:new PlotLength(.5,PlotLengthUnit.RelativeToPlotArea),y:new PlotLength(.5,PlotLengthUnit.RelativeToPlotArea),width:new PlotLength(1,PlotLengthUnit.RelativeToPlotArea),horizontalAlignment:HorizontalAlignment.Center,verticalAlignment:VerticalAlignment.Middle})),s.annotations.push(new ImageAnnotation({imageSource:m,x:new PlotLength(1,PlotLengthUnit.RelativeToPlotArea),y:new PlotLength(0,PlotLengthUnit.RelativeToPlotArea),width:new PlotLength(120,PlotLengthUnit.ScreenUnits),horizontalAlignment:HorizontalAlignment.Right,verticalAlignment:VerticalAlignment.Top})),s.annotations.push(new ImageAnnotation({imageSource:m,x:new PlotLength(0,PlotLengthUnit.RelativeToPlotArea),y:new PlotLength(0,PlotLengthUnit.RelativeToPlotArea),offsetY:new PlotLength(-5,PlotLengthUnit.ScreenUnits),height:new PlotLength(20,PlotLengthUnit.ScreenUnits),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Bottom})),s.annotations.push(new ImageAnnotation({imageSource:m,x:new PlotLength(50,PlotLengthUnit.Data),y:new PlotLength(50,PlotLengthUnit.Data),width:new PlotLength(200,PlotLengthUnit.ScreenUnits),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Top})),s.annotations.push(new ImageAnnotation({imageSource:m,x:new PlotLength(50,PlotLengthUnit.Data),y:new PlotLength(20,PlotLengthUnit.Data),width:new PlotLength(50,PlotLengthUnit.Data),horizontalAlignment:HorizontalAlignment.Center,verticalAlignment:VerticalAlignment.Top})),s.annotations.push(new ImageAnnotation({imageSource:m,x:new PlotLength(.5,PlotLengthUnit.RelativeToViewport),y:new PlotLength(1,PlotLengthUnit.RelativeToViewport),offsetY:new PlotLength(-35,PlotLengthUnit.ScreenUnits),height:new PlotLength(30,PlotLengthUnit.ScreenUnits),horizontalAlignment:HorizontalAlignment.Center,verticalAlignment:VerticalAlignment.Top}));for(let f=0;f<10;f++)s.annotations.push(new ImageAnnotation({imageSource:m,opacity:(f+1)/10,x:new PlotLength(10,PlotLengthUnit.Data),y:new PlotLength(f*2,PlotLengthUnit.Data),width:new PlotLength(100,PlotLengthUnit.ScreenUnits),horizontalAlignment:HorizontalAlignment.Center,verticalAlignment:VerticalAlignment.Bottom}));return s}async function imageAnnotationAsBackgroundGradient(){const a=new PlotModel({title:"Using ImageAnnotations to draw a gradient backgrounds",subtitle:"But do you really want this? This is called 'chartjunk'!",plotMargins:new OxyThickness(60,4,4,60)});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=256,d=new TwoDimensionalArray(1,s);for(let x=0;x<s;x++)d.set(0,x,OxyColor.interpolate(OxyColors.Blue,OxyColors.Red,x/(s-1)));const m=await OxyImage.create(d,ImageFormat.Png),f=TwoDimensionalArray.fromArray([[OxyColors.Yellow],[OxyColors.Gray]]),g=await OxyImage.create(f,ImageFormat.Png);return a.annotations.push(new ImageAnnotation({imageSource:g,interpolate:!0,layer:AnnotationLayer.BelowAxes,x:new PlotLength(0,PlotLengthUnit.RelativeToViewport),y:new PlotLength(0,PlotLengthUnit.RelativeToViewport),width:new PlotLength(1,PlotLengthUnit.RelativeToViewport),height:new PlotLength(1,PlotLengthUnit.RelativeToViewport),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Top})),a.annotations.push(new ImageAnnotation({imageSource:m,interpolate:!0,layer:AnnotationLayer.BelowAxes,x:new PlotLength(0,PlotLengthUnit.RelativeToPlotArea),y:new PlotLength(0,PlotLengthUnit.RelativeToPlotArea),width:new PlotLength(1,PlotLengthUnit.RelativeToPlotArea),height:new PlotLength(1,PlotLengthUnit.RelativeToPlotArea),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Top})),a.series.push(new FunctionSeries({f:Math.sin,x0:0,x1:7,dx:.01})),a}const fourColorPixels=TwoDimensionalArray.fromArray([[OxyColors.Blue,OxyColors.Yellow],[OxyColors.Green,OxyColors.Red]]);async function imageAnnotation_NormalAxes(){const a=new PlotModel({title:"ImageAnnotation - normal axes"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=fourColorPixels,d=await OxyImage.create(s,ImageFormat.Png);return a.annotations.push(new ImageAnnotation({imageSource:d,interpolate:!1,x:new PlotLength(0,PlotLengthUnit.Data),y:new PlotLength(0,PlotLengthUnit.Data),width:new PlotLength(80,PlotLengthUnit.Data),height:new PlotLength(50,PlotLengthUnit.Data),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Bottom})),a}async function imageAnnotation_ReverseHorizontalAxis(){const a=new PlotModel({title:"ImageAnnotation - reverse horizontal axis"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=fourColorPixels,d=await OxyImage.create(s,ImageFormat.Png);return a.annotations.push(new ImageAnnotation({imageSource:d,interpolate:!1,x:new PlotLength(100,PlotLengthUnit.Data),y:new PlotLength(0,PlotLengthUnit.Data),width:new PlotLength(80,PlotLengthUnit.Data),height:new PlotLength(50,PlotLengthUnit.Data),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Bottom})),a}async function imageAnnotation_ReverseVerticalAxis(){const a=new PlotModel({title:"ImageAnnotation - reverse vertical axis"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0}));const s=fourColorPixels,d=await OxyImage.create(s,ImageFormat.Png);return a.annotations.push(new ImageAnnotation({imageSource:d,interpolate:!1,x:new PlotLength(0,PlotLengthUnit.Data),y:new PlotLength(100,PlotLengthUnit.Data),width:new PlotLength(80,PlotLengthUnit.Data),height:new PlotLength(50,PlotLengthUnit.Data),horizontalAlignment:HorizontalAlignment.Left,verticalAlignment:VerticalAlignment.Bottom})),a}const category$V="ImageAnnotation",ImageAnnotationExamples={category:category$V,tags:["Annotations"],examples:[{title:"ImageAnnotation",example:{model:imageAnnotation$1}},{title:"ImageAnnotation - gradient backgrounds",example:{model:imageAnnotationAsBackgroundGradient}},{title:"ImageAnnotation - normal axes",example:{model:imageAnnotation_NormalAxes}},{title:"ImageAnnotation - reverse horizontal axis",example:{model:imageAnnotation_ReverseHorizontalAxis}},{title:"ImageAnnotation - reverse vertical axis",example:{model:imageAnnotation_ReverseVerticalAxis}}]};function lineAnnotationOnLinearAxes(){const a=new PlotModel;a.title="LineAnnotation on linear axes",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=OxyColorExtensions.changeOpacity(OxyColors.White,.75);return a.annotations.push(new LineAnnotation({slope:.1,intercept:1,text:"First",borderBackground:s,borderPadding:new OxyThickness(5)})),a.annotations.push(new LineAnnotation({slope:.3,intercept:2,maximumX:40,color:OxyColors.Red,text:"Second",borderBackground:s,borderPadding:new OxyThickness(5)})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,x:4,maximumY:10,color:OxyColors.Green,text:"Vertical",borderBackground:s,borderPadding:new OxyThickness(5)})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Horizontal,y:2,maximumX:4,color:OxyColors.Gold,text:"Horizontal",borderBackground:s,borderPadding:new OxyThickness(5)})),a}function lineAnnotationOnLogarithmicAxes(){const a=new PlotModel;return a.title="LineAnnotation on logarithmic axes",a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,minimum:1,maximum:80})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left,minimum:1,maximum:10})),a.annotations.push(new LineAnnotation({slope:.1,intercept:1,text:"First",textMargin:40})),a.annotations.push(new LineAnnotation({slope:.3,intercept:2,maximumX:40,color:OxyColors.Red,text:"Second"})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,x:4,maximumY:10,color:OxyColors.Green,text:"Vertical"})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Horizontal,y:2,maximumX:4,color:OxyColors.Gold,text:"Horizontal"})),a}function lineAnnotationOnLinearAxesWithTextOrientation(){const a=new PlotModel;return a.title="LineAnnotations",a.subtitle="with TextOrientation specified",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10})),a.annotations.push(new LineAnnotation({slope:.1,intercept:1,text:"Horizontal",textOrientation:AnnotationTextOrientation.Horizontal,textVerticalAlignment:VerticalAlignment.Bottom})),a.annotations.push(new LineAnnotation({slope:.3,intercept:2,maximumX:40,color:OxyColors.Red,text:"Vertical",textOrientation:AnnotationTextOrientation.Vertical})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,x:4,maximumY:10,color:OxyColors.Green,text:"Horizontal (x=4)",textPadding:8,textOrientation:AnnotationTextOrientation.Horizontal})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,x:45,maximumY:10,color:OxyColors.Green,text:"Horizontal (x=45)",textHorizontalAlignment:HorizontalAlignment.Left,textPadding:8,textOrientation:AnnotationTextOrientation.Horizontal})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Horizontal,y:2,maximumX:4,color:OxyColors.Gold,text:"Horizontal",textLinePosition:.5,textOrientation:AnnotationTextOrientation.Horizontal})),a}function linearAxesMultipleAxes(){const a=new PlotModel;return a.title="ClipByAxis property",a.subtitle="This property specifies if the annotation should be clipped by the current axes or by the full plot area.",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80,startPosition:0,endPosition:.45,textColor:OxyColors.Red})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10,startPosition:0,endPosition:.45,textColor:OxyColors.Green})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80,startPosition:.55,endPosition:1,textColor:OxyColors.Blue})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10,startPosition:.55,endPosition:1,textColor:OxyColors.Orange})),a.annotations.push(new LineAnnotation({clipByYAxis:!0,type:LineAnnotationType.Vertical,x:0,color:OxyColors.Green,text:"Vertical, ClipByAxis = true"})),a.annotations.push(new LineAnnotation({clipByYAxis:!1,type:LineAnnotationType.Vertical,x:20,color:OxyColors.Green,text:"Vertical, ClipByAxis = false"})),a.annotations.push(new LineAnnotation({clipByXAxis:!0,type:LineAnnotationType.Horizontal,y:2,color:OxyColors.Gold,text:"Horizontal, ClipByAxis = true"})),a.annotations.push(new LineAnnotation({clipByXAxis:!1,type:LineAnnotationType.Horizontal,y:8,color:OxyColors.Gold,text:"Horizontal, ClipByAxis = false"})),a}function reversedAxes(){const a=new PlotModel;return a.title="LineAnnotation on reversed axes",a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10,startPosition:1,endPosition:0})),a.annotations.push(new LineAnnotation({slope:.1,intercept:1,text:"First",textHorizontalAlignment:HorizontalAlignment.Left})),a.annotations.push(new LineAnnotation({slope:.3,intercept:2,maximumX:40,color:OxyColors.Red,text:"Second",textHorizontalAlignment:HorizontalAlignment.Left,textVerticalAlignment:VerticalAlignment.Bottom})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,x:4,maximumY:10,color:OxyColors.Green,text:"Vertical",textHorizontalAlignment:HorizontalAlignment.Right})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Horizontal,y:2,maximumX:4,color:OxyColors.Gold,text:"Horizontal",textHorizontalAlignment:HorizontalAlignment.Left})),a}const category$U="LineAnnotation",LineAnnotationExamples={category:category$U,tags:["Annotations"],examples:[{title:"LineAnnotation on linear axes",example:{model:lineAnnotationOnLinearAxes}},{title:"LineAnnotation on logarithmic axes",example:{model:lineAnnotationOnLogarithmicAxes}},{title:"LineAnnotation with text orientation specified",example:{model:lineAnnotationOnLinearAxesWithTextOrientation}},{title:"LineAnnotation - ClipByAxis property",example:{model:linearAxesMultipleAxes}},{title:"LineAnnotation on reversed axes",example:{model:reversedAxes}}]};function pointAnnotation(){const a=new PlotModel({title:"PointAnnotation"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new PointAnnotation({x:50,y:50,text:"P1"})),a}function pointAnnotationShapes(){const a=new PlotModel({title:"PointAnnotation - shapes"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,maximum:120})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new PointAnnotation({x:20,y:60,text:"Circle",shape:MarkerType.Circle,fill:OxyColors.LightGray,stroke:OxyColors.DarkGray,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:40,y:60,text:"Square",shape:MarkerType.Square,fill:OxyColors.LightBlue,stroke:OxyColors.DarkBlue,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:60,y:60,text:"Triangle",shape:MarkerType.Triangle,fill:OxyColors.IndianRed,stroke:OxyColors.Black,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:80,y:60,text:"Diamond",shape:MarkerType.Diamond,fill:OxyColors.ForestGreen,stroke:OxyColors.Black,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:100,y:60,text:"Custom",shape:MarkerType.Custom,customOutline:[new ScreenPoint(-1,-1),new ScreenPoint(1,1),new ScreenPoint(-1,1),new ScreenPoint(1,-1)],stroke:OxyColors.Black,fill:OxyColors.CadetBlue,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:20,y:40,text:"Cross",shape:MarkerType.Cross,stroke:OxyColors.IndianRed,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:40,y:40,text:"Plus",shape:MarkerType.Plus,stroke:OxyColors.Navy,strokeThickness:1})),a.annotations.push(new PointAnnotation({x:60,y:40,text:"Star",shape:MarkerType.Star,stroke:OxyColors.DarkOliveGreen,strokeThickness:1})),a}function pointAnnotationTextAlignment(){const a=new PlotModel({title:"PointAnnotation - text alignments"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-50,maximum:50})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-50,maximum:50}));for(let s=-1;s<=1;s++){const d=s,m=getEnumName(HorizontalAlignment,d);for(let f=-1;f<=1;f++){const g=f,x=getEnumName(VerticalAlignment,g);a.annotations.push(new PointAnnotation({x:s*20,y:f*20,size:10,text:`${m},${x}`,textHorizontalAlignment:d,textVerticalAlignment:g}))}}return a}const category$T="PointAnnotation",PointAnnotationExamples={category:category$T,tags:["Annotations"],examples:[{title:"PointAnnotation",example:{model:pointAnnotation}},{title:"PointAnnotation - shapes",example:{model:pointAnnotationShapes}},{title:"PointAnnotation - text alignments",example:{model:pointAnnotationTextAlignment}}]};function polygonAnnotation$1(){const a=new PlotModel({title:"PolygonAnnotation"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=new PolygonAnnotation({text:"Polygon 1"});return s.points.push(new DataPoint(4,-2),new DataPoint(8,-4),new DataPoint(17,7),new DataPoint(5,8),new DataPoint(2,5)),a.annotations.push(s),a}function polygonAnnotationTextPosition(){const a=new PlotModel({title:"PolygonAnnotation with fixed text position and alignment"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=new PolygonAnnotation({text:"Polygon 1",textHorizontalAlignment:HorizontalAlignment.Left,textVerticalAlignment:VerticalAlignment.Bottom,textPosition:new DataPoint(4.1,-1.9)});return s.points.push(new DataPoint(4,-2),new DataPoint(8,-2),new DataPoint(17,7),new DataPoint(5,8),new DataPoint(4,5)),a.annotations.push(s),a}function annotationLayerProperty(){const a=new PlotModel({title:"Annotation Layers"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:30,majorGridlineStyle:LineStyle.Solid,majorGridlineThickness:1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10,majorGridlineStyle:LineStyle.Solid,majorGridlineThickness:1}));const s=new PolygonAnnotation({layer:AnnotationLayer.BelowAxes,text:"Layer = BelowAxes",points:[new DataPoint(-11,-2),new DataPoint(-7,-4),new DataPoint(-3,7),new DataPoint(-10,8),new DataPoint(-13,5)]});a.annotations.push(s);const d=new PolygonAnnotation({layer:AnnotationLayer.BelowSeries,text:"Layer = BelowSeries",points:[new DataPoint(4,-2),new DataPoint(8,-4),new DataPoint(12,7),new DataPoint(5,8),new DataPoint(2,5)]});a.annotations.push(d);const m=new PolygonAnnotation({layer:AnnotationLayer.AboveSeries,text:"Layer = AboveSeries",points:[new DataPoint(19,-2),new DataPoint(23,-4),new DataPoint(27,7),new DataPoint(20,8),new DataPoint(17,5)]});return a.annotations.push(m),a.series.push(new FunctionSeries({f:Math.sin,x0:-20,x1:30,n:400})),a}function kockSnowflakes(){function a(x){return[new DataPoint(x.x,x.y+1),new DataPoint(x.x+Math.sin(Math.PI*2/3),x.y+Math.cos(Math.PI*2/3)),new DataPoint(x.x+Math.sin(Math.PI*4/3),x.y+Math.cos(Math.PI*4/3))]}const s=new PlotModel({title:"PolygonAnnotation",plotType:PlotType.Cartesian});s.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-4,maximum:4})),s.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-2,maximum:2}));const d=new PolygonAnnotation({text:"MSL = 4",minimumSegmentLength:4});let m=kochFractal(a(new DataPoint(-2,0)),8,!0,!0);pushMany(d.points,m),s.annotations.push(d);const f=new PolygonAnnotation({text:"MSL = 2",minimumSegmentLength:2});m=kochFractal(a(new DataPoint(0,0)),8,!0,!0),pushMany(f.points,m),s.annotations.push(f);const g=new PolygonAnnotation({text:"MSL = 1",minimumSegmentLength:1});return m=kochFractal(a(new DataPoint(2,0)),8,!0,!0),pushMany(g.points,m),s.annotations.push(g),s}function kochFractal(a,s,d,m){const f=Math.cos(Math.PI/3),g=Math.sin(Math.PI/3);let x=a;for(let w=0;w<s;w++){const C=new Array(m?x.length*4:x.length*4-3);for(let A=0;A<(m?x.length:x.length-1);A++){const _=x[A],M=x[(A+1)%x.length],P=(M.x-_.x)/3,E=(M.y-_.y)/3;let R,B;R=f*P-g*E,B=f*E+g*P,C[A*4]=_,C[A*4+1]=new DataPoint(_.x+P,_.y+E),C[A*4+2]=new DataPoint(_.x+P+R,_.y+E+B),C[A*4+3]=new DataPoint(_.x+P*2,_.y+E*2)}m||(C[C.length-1]=x[x.length-1]),x=C}return x}const PolygonAnnotationExamples={kochFractal},category$S="PolygonAnnotation",PolygonAnnotationExamples$1={category:category$S,tags:["Annotations"],examples:[{title:"PolygonAnnotation",example:{model:polygonAnnotation$1}},{title:"PolygonAnnotation with custom text position and alignment",example:{model:polygonAnnotationTextPosition}},{title:"AnnotationLayer property",example:{model:annotationLayerProperty}},{title:"Koch Snowflakes",example:{model:kockSnowflakes}}]};function polylineAnnotations(){const a=new PlotModel({title:"PolylineAnnotation"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:30})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:30}));const s=new PolylineAnnotation({text:"Polyline"});s.points.push(new DataPoint(0,10),new DataPoint(5,5),new DataPoint(20,1),new DataPoint(30,20));const d=new PolylineAnnotation({text:"Smooth Polyline",interpolationAlgorithm:InterpolationAlgorithms.CanonicalSpline});return d.points.push(new DataPoint(0,15),new DataPoint(3,23),new DataPoint(9,30),new DataPoint(20,12),new DataPoint(30,10)),a.annotations.push(s,d),a}function kochSurface(){function a(g){return[new DataPoint(g.x-1,g.y),new DataPoint(g.x+1,g.y)]}const s=new PlotModel({title:"PolygonAnnotation",plotType:PlotType.Cartesian});s.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-2,maximum:2})),s.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-2,maximum:2}));const d=new PolylineAnnotation({text:"MSL = 4",minimumSegmentLength:4,lineStyle:LineStyle.Solid,textPosition:new DataPoint(0,1)});d.points.push(...PolygonAnnotationExamples.kochFractal(a(new DataPoint(0,1)),8,!0,!1)),s.annotations.push(d);const m=new PolylineAnnotation({text:"MSL = 2",minimumSegmentLength:2,lineStyle:LineStyle.Solid,textPosition:new DataPoint(0,0)});m.points.push(...PolygonAnnotationExamples.kochFractal(a(new DataPoint(0,0)),8,!0,!1)),s.annotations.push(m);const f=new PolylineAnnotation({text:"MSL = 1",minimumSegmentLength:1,lineStyle:LineStyle.Solid,textPosition:new DataPoint(0,-1)});return f.points.push(...PolygonAnnotationExamples.kochFractal(a(new DataPoint(0,-1)),8,!0,!1)),s.annotations.push(f),s}const category$R="PolylineAnnotation",PolylineAnnotationExamples={category:category$R,tags:["Annotations"],examples:[{title:"PolylineAnnotation",example:{model:polylineAnnotations}},{title:"Koch Surfaces",example:{model:kochSurface}}]};function rectangleAnnotation(){const a=new PlotModel({title:"RectangleAnnotation"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new RectangleAnnotation({minimumX:20,maximumX:70,minimumY:10,maximumY:40,textRotation:10,text:"RectangleAnnotation",fill:OxyColor.fromAColor(99,OxyColors.Blue),stroke:OxyColors.Black,strokeThickness:2})),a}function rectangleAnnotationVerticalLimit(){const a=new PlotModel({title:"RectangleAnnotations - vertical limit"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.annotations.push(new RectangleAnnotation({maximumY:89.5,text:"Valid area",fill:OxyColor.fromAColor(99,OxyColors.Black)})),a}function rectangleAnnotationHorizontals(){const a=new PlotModel({title:"RectangleAnnotation - horizontal bands"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:10})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:87,maximum:97,majorStep:1,minorStep:1})),a.annotations.push(new RectangleAnnotation({minimumY:89.5,maximumY:90.8,text:"Invalid",fill:OxyColor.fromAColor(99,OxyColors.Red)})),a.annotations.push(new RectangleAnnotation({minimumY:90.8,maximumY:92.1,fill:OxyColor.fromAColor(99,OxyColors.Orange)})),a.annotations.push(new RectangleAnnotation({minimumY:92.1,maximumY:94.6,fill:OxyColor.fromAColor(99,OxyColors.Yellow)})),a.annotations.push(new RectangleAnnotation({minimumY:94.6,maximumY:96,text:"Ok",fill:OxyColor.fromAColor(99,OxyColors.Green)}));const s=new LineSeries({color:OxyColors.Black,strokeThickness:6,lineJoin:LineJoin.Round});return s.points.push(new DataPoint(.5,90.7)),s.points.push(new DataPoint(1.5,91.2)),s.points.push(new DataPoint(2.5,91)),s.points.push(new DataPoint(3.5,89.5)),s.points.push(new DataPoint(4.5,92.5)),s.points.push(new DataPoint(5.5,93.1)),s.points.push(new DataPoint(6.5,94.5)),s.points.push(new DataPoint(7.5,95.5)),s.points.push(new DataPoint(8.5,95.7)),s.points.push(new DataPoint(9.5,96)),a.series.push(s),a}function rectangleAnnotationVerticals(){const a=new PlotModel({title:"RectangleAnnotation - vertical bands"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:10})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:87,maximum:97,majorStep:1,minorStep:1})),a.annotations.push(new RectangleAnnotation({minimumX:2.5,maximumX:2.8,textRotation:90,text:"Red",fill:OxyColor.fromAColor(99,OxyColors.Red)})),a.annotations.push(new RectangleAnnotation({minimumX:2.8,maximumX:6.1,textRotation:90,text:"Orange",fill:OxyColor.fromAColor(99,OxyColors.Orange)})),a.annotations.push(new RectangleAnnotation({minimumX:6.1,maximumX:7.6,textRotation:90,text:"Yellow",fill:OxyColor.fromAColor(99,OxyColors.Yellow)})),a.annotations.push(new RectangleAnnotation({minimumX:7.6,maximumX:9.7,textRotation:270,text:"Green",fill:OxyColor.fromAColor(99,OxyColors.Green)}));const s=new LineSeries({color:OxyColors.Black,strokeThickness:6,lineJoin:LineJoin.Round});return s.points.push(new DataPoint(.5,90.7)),s.points.push(new DataPoint(1.5,91.2)),s.points.push(new DataPoint(2.5,91)),s.points.push(new DataPoint(3.5,89.5)),s.points.push(new DataPoint(4.5,92.5)),s.points.push(new DataPoint(5.5,93.1)),s.points.push(new DataPoint(6.5,94.5)),s.points.push(new DataPoint(7.5,95.5)),s.points.push(new DataPoint(8.5,95.7)),s.points.push(new DataPoint(9.5,96)),a.series.push(s),a}const category$Q="RectangleAnnotation",RectangleAnnotationExamples={category:category$Q,tags:["Annotations"],examples:[{title:"RectangleAnnotation",example:{model:rectangleAnnotation}},{title:"RectangleAnnotations - vertical limit",example:{model:rectangleAnnotationVerticalLimit}},{title:"RectangleAnnotation - horizontal bands",example:{model:rectangleAnnotationHorizontals}},{title:"RectangleAnnotation - vertical bands",example:{model:rectangleAnnotationVerticals}}]};function textAnnotations(){const a=new PlotModel({title:"TextAnnotation"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-15,maximum:25})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-5,maximum:18})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(-6,0),text:"Text annotation 1"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(-7,10),textRotation:80,text:"Text annotation 2"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(2,2),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Right,textVerticalAlignment:VerticalAlignment.Top,text:"Right/Top"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(2,4),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Right,textVerticalAlignment:VerticalAlignment.Middle,text:"Right/Middle"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(2,6),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Right,textVerticalAlignment:VerticalAlignment.Bottom,text:"Right/Bottom"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(10,2),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Center,textVerticalAlignment:VerticalAlignment.Top,text:"Center/Top"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(10,4),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Center,textVerticalAlignment:VerticalAlignment.Middle,text:"Center/Middle"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(10,6),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Center,textVerticalAlignment:VerticalAlignment.Bottom,text:"Center/Bottom"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(18,2),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Left,textVerticalAlignment:VerticalAlignment.Top,text:"Left/Top"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(18,4),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Left,textVerticalAlignment:VerticalAlignment.Middle,text:"Left/Middle"})),a.annotations.push(new TextAnnotation({textPosition:new DataPoint(18,6),textRotation:20,textHorizontalAlignment:HorizontalAlignment.Left,textVerticalAlignment:VerticalAlignment.Bottom,text:"Left/Bottom"}));const s=.05,d=(m,f)=>{const g=new PolygonAnnotation({layer:AnnotationLayer.BelowAxes,points:[new DataPoint(m-s,f-s),new DataPoint(m+s,f-s),new DataPoint(m+s,f+s),new DataPoint(m-s,f+s),new DataPoint(m-s,f-s)]});a.annotations.push(g)};for(const m of[...a.annotations]){const f=m;f&&d(f.textPosition.x,f.textPosition.y)}return a}function rotations(){const a=new PlotModel({title:"TextAnnotation Rotations"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-5,maximum:45})),a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0,minimum:-1,maximum:8}));for(let s=0;s<360;s+=5)a.annotations.push(new TextAnnotation({textRotation:s,textPosition:new DataPoint(s%45,s/45),text:`${s}`,textVerticalAlignment:VerticalAlignment.Middle,textHorizontalAlignment:HorizontalAlignment.Center}));return a}const category$P="TextAnnotation",TextAnnotationExamples={category:category$P,tags:["Annotations"],examples:[{title:"TextAnnotation",example:{model:textAnnotations}},{title:"Rotations",example:{model:rotations}}]},Annotations=[AnnotationExamples,ArrowAnnotationExamples,EllipseAnnotationExamples,FunctionAnnotationExamples,ImageAnnotationExamples,LineAnnotationExamples,PointAnnotationExamples,PolygonAnnotationExamples$1,PolylineAnnotationExamples,RectangleAnnotationExamples,TextAnnotationExamples];class ErrorItem{constructor(s,d,m,f){$t(this,"x");$t(this,"y");$t(this,"xError");$t(this,"yError");this.x=s||0,this.y=d||0,this.xError=m||0,this.yError=f||0}}class ErrorSeries extends XYAxisSeries{constructor(){super();$t(this,"points",[]);$t(this,"color");$t(this,"strokeThickness");this.color=OxyColors.Black,this.strokeThickness=1}get pointsList(){return this.points}async render(d){const m=this.points;if(m.length===0)return;this.verifyAxes();const f=m.length,g=[];for(let x=0;x<f;x++){const w=this.xAxis.transformPoint(m[x].x,m[x].y,this.yAxis),C=m[x],A=C?C.xError*this.xAxis.scale:0,_=C?C.yError*Math.abs(this.yAxis.scale):0,M=4;if(A>0){const P=new ScreenPoint(w.x-A*.5,w.y),E=new ScreenPoint(w.x+A*.5,w.y);g.push(P,E,new ScreenPoint(P.x,P.y-M),new ScreenPoint(P.x,P.y+M),new ScreenPoint(E.x,E.y-M),new ScreenPoint(E.x,E.y+M))}if(_>0){const P=new ScreenPoint(w.x,w.y-_*.5),E=new ScreenPoint(w.x,w.y+_*.5);g.push(P,E,new ScreenPoint(P.x-M,P.y),new ScreenPoint(P.x+M,P.y),new ScreenPoint(E.x-M,E.y),new ScreenPoint(E.x+M,E.y))}}for(let x=0;x+1<g.length;x+=2)await RenderingExtensions.drawReducedLine(d,[g[x],g[x+1]],0,this.getSelectableColor(this.color),this.strokeThickness,this.edgeRenderingMode,void 0,LineJoin.Bevel)}async renderLegend(d,m){const f=(m.left+m.right)/2,g=(m.top+m.bottom)/2,x=[new ScreenPoint(m.left,g),new ScreenPoint(m.right,g),new ScreenPoint(m.left,g-2),new ScreenPoint(m.left,g+3),new ScreenPoint(m.right,g-2),new ScreenPoint(m.right,g+3),new ScreenPoint(f,m.top),new ScreenPoint(f,m.bottom),new ScreenPoint(f-2,m.top),new ScreenPoint(f+3,m.top),new ScreenPoint(f-2,m.bottom),new ScreenPoint(f+3,m.bottom)];await d.drawLineSegments(x,this.getSelectableColor(this.color),this.strokeThickness,this.edgeRenderingMode,void 0,LineJoin.Miter)}updateMaxMin(){super.updateMaxMin(),this.internalUpdateMaxMin3(this.points,d=>d.x-d.xError,d=>d.x+d.xError,d=>d.y-d.yError,d=>d.y+d.yError)}}class FlagSeries extends ItemsSeries{constructor(){super();$t(this,"symbolPosition",0);$t(this,"symbolSize",OxySize.Empty);$t(this,"color");$t(this,"maximumX",0);$t(this,"minimumX",0);$t(this,"symbol");$t(this,"_values",[]);$t(this,"xAxis");$t(this,"xAxisKey");this.color=OxyColors.Black,this.fontSize=10,this.symbol="",this.font="Wingdings 2",this.trackerStringFormatter=d=>`${d.title}: ${d.item}`}get values(){return this._values}getNearestPoint(d,m){if(this.xAxis)for(const f of this.values){if(isNaN(f)||f<this.xAxis.actualMinimum||f>this.xAxis.actualMaximum)continue;const g=this.xAxis.transform(f);if(new OxyRect(g-this.symbolSize.width/2,this.symbolPosition-this.symbolSize.height,this.symbolSize.width,this.symbolSize.height).containsPoint(d)){const w=this.trackerStringFormatter({item:f,title:this.title});return new TrackerHitResult({series:this,dataPoint:new DataPoint(f,NaN),position:new ScreenPoint(g,this.symbolPosition-this.symbolSize.height),text:w})}}}async render(d){if(this.xAxis){this.symbolPosition=this.plotModel.plotArea.bottom,this.symbolSize=d.measureText(this.symbol,this.actualFont,this.actualFontSize,this.actualFontWeight);for(const m of this.values){if(isNaN(m)||m<this.xAxis.clipMinimum||m>this.xAxis.clipMaximum)continue;const f=this.xAxis.transform(m);await d.drawText(new ScreenPoint(f,this.symbolPosition),this.symbol,this.color,this.actualFont,this.actualFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Bottom)}}}async renderLegend(d,m){await d.drawText(m.center,this.symbol,this.color,this.actualFont,this.actualFontSize,this.actualFontWeight,0,HorizontalAlignment.Center,VerticalAlignment.Middle)}areAxesRequired(){return!0}ensureAxes(){this.xAxis=this.xAxisKey!==void 0?this.plotModel.getAxis(this.xAxisKey):this.plotModel.defaultXAxis}isUsing(d){return d===this.xAxis}setDefaultValues(){}updateAxisMaxMin(){this.xAxis.include(this.minimumX),this.xAxis.include(this.maximumX)}updateData(){}updateMaxMin(){this.minimumX=minValueOfArray(this.values),this.maximumX=maxValueOfArray(this.values)}}class LineSegmentSeries extends LineSeries{constructor(){super();$t(this,"showVerticals");$t(this,"epsilon");this.showVerticals=!0,this.epsilon=1e-8}async render(d){if(this.points.length===0)return;if(this.points.length%2!==0)throw new Error("The number of points should be even.");if(!this.xAxis||!this.yAxis)throw new Error("Axis has not been defined.");const m=this.points.map(g=>this.transform(g)),f=[];for(let g=0;g<m.length;g+=2)m[g].distanceToSquared(m[g+1])<this.strokeThickness&&(m[g]=new ScreenPoint(m[g].x-this.strokeThickness*.5,m[g].y),m[g+1]=new ScreenPoint(m[g].x+this.strokeThickness*.5,m[g].y)),this.showVerticals&&g>0&&Math.abs(m[g-1].x-m[g].x)<this.epsilon&&(f.push(m[g-1]),f.push(m[g]));if(this.strokeThickness>0){if(this.lineStyle!==LineStyle.None){const g=LineStyleHelper.getDashArray(this.lineStyle);await d.drawLineSegments(m,this.actualColor,this.strokeThickness,this.edgeRenderingMode,g,this.lineJoin)}await d.drawLineSegments(f,this.actualColor,this.strokeThickness/3,this.edgeRenderingMode,LineStyleHelper.getDashArray(LineStyle.Dash),this.lineJoin)}await RenderingExtensions.drawMarkers(d,m,this.markerType,void 0,[this.markerSize],this.markerFill,this.markerStroke,this.markerStrokeThickness,this.edgeRenderingMode)}getNearestPoint(d,m){const f=this.points;if(!f)return;let g,x,w=-1,C=Number.MAX_VALUE;for(let A=0;A+1<f.length;A+=2){const _=f[A],M=f[A+1];if(!this.isValidPoint(_)||!this.isValidPoint(M))continue;const P=this.transform(_),E=this.transform(M),R=ScreenPointHelper.findPointOnLine(d,P,E);if(ScreenPoint.isUndefined(R))continue;const B=d.distanceToSquared(R);if(B<C){const z=R.distanceTo(P)/E.distanceTo(P);x=new DataPoint(_.x+z*(M.x-_.x),_.y+z*(M.y-_.y)),g=R,C=B,w=A+z}}if(C<Number.MAX_VALUE){const A=this.getItem(Math.floor(w));return new TrackerHitResult({series:this,dataPoint:x,position:g,item:A,index:w,text:`${this.title||""}
x: ${A.x}
y: ${A.y}`})}}}class MatrixSeries extends XYAxisSeries{constructor(d){super(d);$t(this,"image");$t(this,"_matrix");$t(this,"gridInterval");$t(this,"showDiagonal");$t(this,"minimumGridLineDistance");$t(this,"gridColor");$t(this,"borderColor");$t(this,"notZeroColor");$t(this,"zeroTolerance");this.gridInterval=1,this.showDiagonal=!1,this.minimumGridLineDistance=4,this.gridColor=OxyColors.LightGray,this.borderColor=OxyColors.Gray,this.notZeroColor=OxyColors.Black,this.zeroTolerance=0,this.trackerStringFormatter=m=>`${m.title||""}
[${m.xValue},${m.yValue}] = ${m.item}`,d&&Object.assign(this,removeUndef(d))}get matrix(){return this._matrix}set matrix(d){this._matrix=d,this.image=void 0}get matrixValue(){return this.matrix}set matrixValue(d){this.image=void 0,this.matrix=d}async render(d){if(!this.matrixValue)return;const m=PlotElementExtensions.transform,f=this.matrixValue.length,g=this.matrixValue[0].length,x=m(this,0,0),w=m(this,g,f);if(!this.image){const E=new TwoDimensionalArray(g,f);for(let R=0;R<f;R++)for(let B=0;B<g;B++){const z=Math.abs(this.matrixValue[R][B])<=this.zeroTolerance?OxyColors.Transparent:this.notZeroColor;E.set(B,R,z)}this.image=await OxyImage.create(E,ImageFormat.Png)}const C=Math.min(x.x,w.x),A=Math.min(x.y,w.y),_=Math.abs(x.x-w.x),M=Math.abs(x.y-w.y);await RenderingExtensions.drawImage(d,this.image,C,A,_,M,1,!1);const P=[];if(this.gridInterval>0){const E=m(this,this.gridInterval,this.gridInterval);if(Math.abs(E.y-x.y)>this.minimumGridLineDistance)for(let R=1;R<g;R+=this.gridInterval)P.push(m(this,0,R)),P.push(m(this,g,R));if(Math.abs(E.x-x.x)>this.minimumGridLineDistance)for(let R=1;R<f;R+=this.gridInterval)P.push(m(this,R,0)),P.push(m(this,R,f))}if(this.showDiagonal&&(P.push(m(this,0,0)),P.push(m(this,g,f))),await d.drawLineSegments(P,this.gridColor,1,this.edgeRenderingMode,void 0,LineJoin.Miter),this.borderColor.isVisible()){const E=[m(this,0,0),m(this,f,0),m(this,0,g),m(this,f,g),m(this,0,0),m(this,0,g),m(this,f,0),m(this,f,g)];await d.drawLineSegments(E,this.borderColor,1,this.edgeRenderingMode,void 0,LineJoin.Miter)}}getNearestPoint(d,m){if(!this.matrix)return;const f=this.inverseTransform(d),g=Math.floor(f.y),x=Math.floor(f.x);if(g>=0&&g<this.matrix.length&&x>=0&&x<this.matrix[0].length){const w=this.matrix[g][x];return new TrackerHitResult({series:this,dataPoint:f,position:d,item:null,index:-1,text:this.trackerStringFormatter({item:w,title:this.title,xValue:x,yValue:g})})}}updateMaxMin(){super.updateMaxMin(),this.matrix&&(this.minX=0,this.maxX=this.matrix[0].length,this.minY=0,this.maxY=this.matrix.length)}}class PolarHeatMapSeries extends XYAxisSeries{constructor(d){super(d);$t(this,"image");$t(this,"pixels");$t(this,"imageSize",0);$t(this,"angle0",0);$t(this,"angle1",0);$t(this,"magnitude0",0);$t(this,"magnitude1",0);$t(this,"data");$t(this,"interpolate");$t(this,"minValue",0);$t(this,"maxValue",0);$t(this,"colorAxis");$t(this,"colorAxisKey");this.interpolate=!0,d&&Object.assign(this,removeUndef(d))}async render(d){if(!this.data){this.image=void 0;return}this.imageSize>0?await this.renderFixed(d,this.plotModel):await this.renderDynamic(d,this.plotModel)}async renderDynamic(d,m){if(!this.data)return;const f=this.data.length,g=this.data[0].length,x=m.plotArea,w=Math.floor(x.width),C=Math.floor(x.height);if(w===0||C===0)return;(!this.pixels||this.pixels.height!==C||this.pixels.width!==w)&&(this.pixels=new TwoDimensionalArray(w,C));const A=this.pixels,_=ColorAxisExtensions.getColor;for(let M=0;M<C;M++)for(let P=0;P<w;P++){const E=new ScreenPoint(x.left+P,x.top+M),R=this.inverseTransform(E);let B,z;if(this.plotModel.plotType!==PlotType.Polar)B=Math.atan2(R.y,R.x)/Math.PI*180,z=Math.sqrt(R.x*R.x+R.y*R.y);else{for(B=R.y/Math.PI*180,z=R.x;B<0;)B+=360;for(;B>360;)B-=360}const F=(B-this.angle0)/(this.angle1-this.angle0)*f,I=(z-this.magnitude0)/(this.magnitude1-this.magnitude0)*g;if(F>=0&&F<f&&I>=0&&I<g){const L=this.getValue(F,I),W=OxyColor.fromAColor(160,_(this.colorAxis,L));A.set(P,M,W)}else A.set(P,M,OxyColors.Transparent)}this.image=await OxyImage.create(A,ImageFormat.Png),await RenderingExtensions.drawImage(d,this.image,x.left,x.top,x.width,x.height,1,!1)}async renderFixed(d,m){if(!this.data)return;if(!this.image){const x=this.data.length,w=this.data[0].length,C=this.imageSize,A=this.imageSize;(this.pixels===void 0||this.pixels.height!==A||this.pixels.width!==C)&&(this.pixels=new TwoDimensionalArray(C,A));const _=ColorAxisExtensions.getColor,M=this.pixels;for(let P=0;P<A;P++)for(let E=0;E<C;E++){const R=(E-C*.5)/(C*.5)*this.magnitude1,B=-(P-A*.5)/(A*.5)*this.magnitude1;let z=Math.atan2(B,R)/Math.PI*180;const F=Math.sqrt(R*R+B*B);for(;z<0;)z+=360;for(;z>360;)z-=360;const I=(z-this.angle0)/(this.angle1-this.angle0)*x,L=(F-this.magnitude0)/(this.magnitude1-this.magnitude0)*w;if(I>=0&&I<x&&L>=0&&L<w){const W=this.getValue(I,L),G=OxyColor.fromAColor(160,_(this.colorAxis,W));M.set(E,P,G)}else M.set(E,P,OxyColors.Transparent)}this.image=await OxyImage.create(M,ImageFormat.Png)}if(!this.image)return;const f=PlotElementExtensions.transform;let g;if(this.plotModel.plotType!==PlotType.Polar){const x=f(this,-this.magnitude1,this.magnitude1),w=f(this,this.magnitude1,-this.magnitude1);g=new OxyRect(x.x,x.y,w.x-x.x,w.y-x.y)}else{const x=f(this,this.magnitude1,90),w=f(this,this.magnitude1,270),C=f(this,this.magnitude1,180),A=f(this,this.magnitude1,0);g=new OxyRect(C.x,x.y,A.x-C.x,w.y-x.y)}await RenderingExtensions.drawImage(d,this.image,g.left,g.top,g.width,g.height,1,!1)}getValue(d,m){if(!this.data)return NaN;if(!this.interpolate){const I=Math.floor(d),L=Math.floor(m);return this.data[I][L]}d-=.5,m-=.5;const f=Math.floor(d),g=Math.floor(m),x=f>0?f:0,w=f+1<this.data.length?f+1:f,C=g>0?g:0,A=g+1<this.data[0].length?g+1:g,_=this.data[x][C],M=this.data[x][A],P=this.data[w][C],E=this.data[w][A],R=d-f,B=m-g,z=_*(1-B)+M*B,F=P*(1-B)+E*B;return z*(1-R)+F*R}getNearestPoint(d,m){}ensureAxes(){super.ensureAxes(),this.colorAxis=this.colorAxisKey?this.plotModel.getAxis(this.colorAxisKey):this.plotModel.defaultColorAxis}updateMaxMin(){super.updateMaxMin();const d=this.getData();this.minValue=minValueOfArray(d),this.maxValue=maxValueOfArray(d);const m=this.colorAxis;m&&(m.include(this.minValue),m.include(this.maxValue))}getData(){if(!this.data)return[];const d=this.data.length,m=[],f=this.data[0].length;for(let g=0;g<d;g++)for(let x=0;x<f;x++)m.push(this.data[g][x]);return m}}function errorSeries(){const s=new PlotModel({title:"ErrorSeries"}),d=new Legend({legendPosition:LegendPosition.BottomRight});s.legends.push(d);const m=new ErrorSeries;m.title="Measurements";const f=Math.random();let g=0,x=0;for(let w=0;w<20;w++){g+=2+f*10,x+=1+f;const C=1+f*2,A=1+f*2;m.pointsList.push(new ErrorItem(g,x,C,A))}return s.series.push(m),s}function lineSegmentSeries(){const a=new PlotModel({title:"LineSegmentSeries"}),s=new LineSegmentSeries;s.title="The first series",s.points.push(new DataPoint(0,3),new DataPoint(2,3.2)),s.points.push(new DataPoint(2,2.7),new DataPoint(7,2.9)),a.series.push(s);const d=new LineSegmentSeries;return d.title="The second series",d.points.push(new DataPoint(1,-3),new DataPoint(2,10)),d.points.push(new DataPoint(0,4.8),new DataPoint(7,2.3)),d.points.push(new DataPoint(6,4),new DataPoint(6,4+1e-8)),a.series.push(d),a}function flagSeries(){const a=new PlotModel({title:"FlagSeries"}),s=new FlagSeries;return s.title="Incidents",s.color=OxyColors.Red,s.values.push(2,3,5,7,11,13,17,19),a.series.push(s),a}function diagonalMatrix(){const a=new PlotModel,s=[[1,0,0],[0,2,0],[0,0,3],[5,5,5]];return a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.series.push(new MatrixSeries({matrix:s,showDiagonal:!0})),a}function polarHeatMap(){const a=new PlotModel({title:"Polar heat map",plotMargins:new OxyThickness(40,80,40,40),plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)}),s=[[0,2],[1.5,.2]];return a.axes.push(new AngleAxis({startAngle:0,endAngle:360,minimum:0,maximum:360,majorStep:30,minorStep:15})),a.axes.push(new MagnitudeAxis({minimum:0,maximum:100,majorStep:25,minorStep:5})),a.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.rainbow(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black})),a.series.push(new PolarHeatMapSeries({data:s,angle0:30,angle1:150,magnitude0:0,magnitude1:80,interpolate:!1})),a}function polarHeatMapReversedAngleAxis(){const a=polarHeatMap();return a.axes[0]=new AngleAxis({startAngle:360,endAngle:0,minimum:0,maximum:360,majorStep:30,minorStep:15}),a}function polarHeatMapRotatedCounterClockwise90(){const a=polarHeatMap();return a.axes[0]=new AngleAxis({startAngle:90,endAngle:450,minimum:0,maximum:360,majorStep:30,minorStep:15}),a}function polarHeatMapRotatedCounterClockwisePi(){const a=polarHeatMap();return a.axes[0]=new AngleAxis({startAngle:Math.PI,endAngle:Math.PI+360,minimum:0,maximum:360,majorStep:30,minorStep:15}),a}function polarHeatMapInterpolated(){const a=polarHeatMap();return a.title="Polar heat map (interpolated)",a.series[0].interpolate=!0,a}function polarHeatMapFixed(){const a=polarHeatMap();return a.title="Polar heat map with fixed size image",a.series[0].imageSize=800,a}function polarHeatMapLinearAxes(){const a=new PlotModel({title:"Polar heat map on linear axes"}),s=[[0,2],[1.5,.2]];return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-100,maximum:100})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:100})),a.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.rainbow(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black})),a.series.push(new PolarHeatMapSeries({data:s,angle0:30,angle1:150,magnitude0:0,magnitude1:80,interpolate:!0})),a}function polarHeatMapLinearAxesFixed256(){const a=polarHeatMapLinearAxes();return a.title="Polar heat map on linear axes & fixed size image (256x256)",a.series[0].imageSize=256,a}function polarHeatMapLinearAxesFixed1000(){const a=polarHeatMapLinearAxes();return a.title="Polar heat map on linear axes & fixed size image (1000x1000)",a.series[0].imageSize=1e3,a}function designStructureMatrix(){const a=new TwoDimensionalArray(7,7,0);a.set(1,0,1),a.set(5,0,1),a.set(3,1,1),a.set(0,2,1),a.set(6,2,1),a.set(4,3,1),a.set(1,4,1),a.set(5,4,1),a.set(2,5,1),a.set(0,6,1),a.set(4,6,1);for(let g=0;g<7;g++)a.set(g,g,-1);const s=new PlotModel({title:"Design structure matrix (DSM)"});s.axes.push(new LinearColorAxis({position:AxisPosition.None,palette:new OxyPalette([OxyColors.White,OxyColors.LightGreen]),lowColor:OxyColors.Black,minimum:0,isAxisVisible:!1}));const d=new CategoryAxis({position:AxisPosition.Top});d.labels.push("A","B","C","D","E","F","G"),s.axes.push(d);const m=new CategoryAxis({position:AxisPosition.Left,startPosition:1,endPosition:0});m.labels.push("Element A","Element B","Element C","Element D","Element E","Element F","Element G"),s.axes.push(m);const f=new DesignStructureMatrixSeries({data:a.toArray(),interpolate:!1,labelStringFormatter:(g,x)=>`${g||""}`,labelFontSize:.25,x0:0,x1:a.width-1,y0:0,y1:a.height-1});return s.series.push(f),s}class DesignStructureMatrixSeries extends HeatMapSeries{constructor(s){super(s)}getLabel(s,d,m){return d===m?this.xAxis.labels[d]:super.getLabel(s,d,m)}}const category$O="Custom series",CustomSeriesExamples={category:category$O,tags:["Series"],examples:[{title:"ErrorSeries",example:{model:errorSeries}},{title:"LineSegmentSeries",example:{model:lineSegmentSeries}},{title:"FlagSeries",example:{model:flagSeries}},{title:"MatrixSeries - diagonal matrix",example:{model:diagonalMatrix}},{title:"PolarHeatMap",example:{model:polarHeatMap}},{title:"PolarHeatMap Reversed Angle Axis",example:{model:polarHeatMapReversedAngleAxis}},{title:"PolarHeatMap Rotated CounterClockwise 90",example:{model:polarHeatMapRotatedCounterClockwise90}},{title:"PolarHeatMap Rotated CounterClockwise on PI degrees",example:{model:polarHeatMapRotatedCounterClockwisePi}},{title:"PolarHeatMap (interpolated)",example:{model:polarHeatMapInterpolated}},{title:"PolarHeatMap fixed size image",example:{model:polarHeatMapFixed}},{title:"PolarHeatMap on linear axes",example:{model:polarHeatMapLinearAxes}},{title:"PolarHeatMap linear axes, fixed size image (256x256)",example:{model:polarHeatMapLinearAxesFixed256}},{title:"PolarHeatMap linear axes, fixed size image (1000x1000)",example:{model:polarHeatMapLinearAxesFixed1000}},{title:"Design structure matrix (DSM)",example:{model:designStructureMatrix}}]},CustomSeries=[CustomSeriesExamples];class Random{constructor(s){}next(s,d){return isUndef(s)&&isUndef(d)?Math.random():(s=s||0,d=isNullOrUndef(d)?1:d,Math.floor(Math.random()*(d-s+1))+s)}}function tickStyleNone$1(){return createTickStyleExample(TickStyle.None)}function tickStyleInside$1(){return createTickStyleExample(TickStyle.Inside)}function tickStyleCrossing$1(){return createTickStyleExample(TickStyle.Crossing)}function tickStyleOutside$1(){return createTickStyleExample(TickStyle.Outside)}function tickLineColor(){const a=new PlotModel({title:"Color major and minor ticks differently"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,majorGridlineThickness:3,minorGridlineThickness:3,ticklineColor:OxyColors.Blue,minorTicklineColor:OxyColors.Gray})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,majorGridlineThickness:3,minorGridlineThickness:3,ticklineColor:OxyColors.Blue,minorTicklineColor:OxyColors.Gray})),a}function gridlineStyleNone(){const a=new PlotModel({title:"No gridlines"});return a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a}function gridLinestyleVertical(){const a=new PlotModel({title:"Vertical gridlines"});return a.axes.push(new LinearAxis),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom})),a}function gridLinestyleHorizontal(){const a=new PlotModel({title:"Horizontal gridlines"});return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a}function gridLinestyleBoth(){const a=new PlotModel({title:"Horizontal and vertical gridlines"});return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom})),a}function axisPositionLeftAndBottom(){const a=new PlotModel;return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,title:"Left"})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom,title:"Bottom"})),a}function axisPositionTopRight(){const a=new PlotModel;return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Right,title:"Right"})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Top,title:"Top"})),a}function axisAngle45(){const a=new PlotModel({plotMargins:new OxyThickness(60,40,60,30)});return a.axes.push(new LinearAxis({angle:45,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,title:"Left"})),a.axes.push(new LinearAxis({angle:45,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom,title:"Bottom"})),a}function zeroCrossing(){const a=new PlotModel({title:"PositionAtZeroCrossing = true",plotAreaBorderThickness:new OxyThickness(0),plotMargins:new OxyThickness(10,10,10,10)});return a.axes.push(new LinearAxis({maximum:50,minimum:-30,positionAtZeroCrossing:!0,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Crossing})),a.axes.push(new LinearAxis({maximum:70,minimum:-50,position:AxisPosition.Bottom,positionAtZeroCrossing:!0,axislineStyle:LineStyle.Solid,tickStyle:TickStyle.Crossing})),a}function horizontalZeroCrossing(){const a=new PlotModel({title:"Bottom axis: PositionAtZeroCrossing = true"});return a.axes.push(new LinearAxis({maximum:50,minimum:-30,position:AxisPosition.Left,positionAtZeroCrossing:!1})),a.axes.push(new LinearAxis({maximum:70,minimum:-50,position:AxisPosition.Bottom,positionAtZeroCrossing:!0,axislineStyle:LineStyle.Solid})),a}function verticalZeroCrossing(){const a=new PlotModel({title:"Left axis: PositionAtZeroCrossing = true"});return a.axes.push(new LinearAxis({maximum:50,minimum:-30,position:AxisPosition.Left,positionAtZeroCrossing:!0,axislineStyle:LineStyle.Solid})),a.axes.push(new LinearAxis({maximum:70,minimum:-50,position:AxisPosition.Bottom,positionAtZeroCrossing:!1})),a}function reversed(){const a=new PlotModel({title:"EndPosition = 0, StartPosition = 1"});return a.axes.push(new LinearAxis({endPosition:0,startPosition:1,maximum:50,minimum:-30,position:AxisPosition.Left})),a.axes.push(new LinearAxis({endPosition:0,startPosition:1,maximum:70,minimum:-50,position:AxisPosition.Bottom})),a}function sharingY(){const a=new PlotModel;a.axes.push(new LinearAxis({endPosition:0,startPosition:1,maximum:1.5,minimum:-1.5,position:AxisPosition.Left}));const s=new LinearAxis({startPosition:0,endPosition:.45,maximum:7,minimum:0,position:AxisPosition.Bottom,key:"x1"});a.axes.push(s);const d=new LinearAxis({startPosition:.55,endPosition:1,maximum:10,minimum:0,position:AxisPosition.Bottom,key:"x2"});return a.axes.push(d),a.series.push(new FunctionSeries({f:Math.sin,x0:0,x1:10,n:1e3,xAxisKey:s.key})),a.series.push(new FunctionSeries({f:Math.sin,x0:0,x1:10,n:1e3,xAxisKey:d.key})),a}function fourAxes(){const a=new PlotModel;return a.axes.push(new LinearAxis({maximum:36,minimum:0,title:"km/h"})),a.axes.push(new LinearAxis({maximum:10,minimum:0,position:AxisPosition.Right,title:"m/s"})),a.axes.push(new LinearAxis({maximum:10,minimum:0,position:AxisPosition.Bottom,title:"meter"})),a.axes.push(new LinearAxis({maximum:1e4,minimum:0,position:AxisPosition.Top,title:"millimeter"})),a}function fiveAxes(){const a=new PlotModel;return a.axes.push(new LinearAxis({endPosition:.25,maximum:1,minimum:-1,title:"C1"})),a.axes.push(new LinearAxis({endPosition:.5,maximum:1,minimum:-1,position:AxisPosition.Right,startPosition:.25,title:"C2"})),a.axes.push(new LinearAxis({endPosition:.75,maximum:1,minimum:-1,startPosition:.5,title:"C3"})),a.axes.push(new LinearAxis({maximum:1,minimum:-1,position:AxisPosition.Right,startPosition:.75,title:"C4"})),a.axes.push(new LinearAxis({maximum:100,minimum:0,position:AxisPosition.Bottom,title:"s"})),a}function logarithmicAxes(){const a=new PlotModel;return a.axes.push(new LogarithmicAxis({maximum:1e6,minimum:1,title:"Log axis",useSuperExponentialFormat:!0})),a.axes.push(new LogarithmicAxis({maximum:1e4,minimum:.001,position:AxisPosition.Bottom,title:"Log axis",useSuperExponentialFormat:!0})),a}const cartesianPlotLogarithmicAxes=()=>new PlotModel({plotType:PlotType.Cartesian,axes:[new LogarithmicAxis({maximum:1e6,minimum:1,title:"Log x axis",useSuperExponentialFormat:!0,majorGridlineStyle:LineStyle.Solid,isPanEnabled:!0}),new LogarithmicAxis({maximum:1e4,minimum:.001,position:AxisPosition.Bottom,title:"Log y axis",useSuperExponentialFormat:!0,majorGridlineStyle:LineStyle.Solid,isPanEnabled:!0})]});function bigNumbers(){const a=new PlotModel;return a.axes.push(new LinearAxis({maximum:6e32,minimum:-1e47,title:"big numbers"})),a.axes.push(new LinearAxis({maximum:3e50,minimum:-1e40,position:AxisPosition.Bottom,title:"big numbers"})),a}function bigNumbersSuperExponentialFormat(){const a=new PlotModel;return a.axes.push(new LinearAxis({maximum:6e32,minimum:-1e47,title:"big numbers",useSuperExponentialFormat:!0})),a.axes.push(new LinearAxis({maximum:3e50,minimum:-1e40,position:AxisPosition.Bottom,title:"big numbers",useSuperExponentialFormat:!0})),a}function smallNumbers(){const a=new PlotModel;return a.axes.push(new LinearAxis({maximum:6e-15,minimum:-5e-15,title:"small numbers"})),a.axes.push(new LinearAxis({maximum:3e-15,minimum:-4e-15,position:AxisPosition.Bottom,title:"small numbers"})),a}function defaultPadding(){const a=new PlotModel({title:"Default padding"});a.axes.push(new LinearAxis),a.axes.push(new LinearAxis({position:AxisPosition.Bottom}));const s=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6)});return s.points.push(new DataPoint(10,4)),s.points.push(new DataPoint(12,7)),s.points.push(new DataPoint(16,3)),s.points.push(new DataPoint(20,9)),a.series.push(s),a}function noPadding(){const a=new PlotModel({title:"No padding"});a.axes.push(new LinearAxis({maximumPadding:0,minimumPadding:0})),a.axes.push(new LinearAxis({maximumPadding:0,minimumPadding:0,position:AxisPosition.Bottom}));const s=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6)});return s.points.push(new DataPoint(10,4)),s.points.push(new DataPoint(12,7)),s.points.push(new DataPoint(16,3)),s.points.push(new DataPoint(20,9)),a.series.push(s),a}function padding(){const a=new PlotModel({title:"Padding 10%"});a.axes.push(new LinearAxis({maximumPadding:.1,minimumPadding:.1})),a.axes.push(new LinearAxis({maximumPadding:.1,minimumPadding:.1,position:AxisPosition.Bottom}));const s=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6)});return s.points.push(new DataPoint(10,4)),s.points.push(new DataPoint(12,7)),s.points.push(new DataPoint(16,3)),s.points.push(new DataPoint(20,9)),a.series.push(s),a}function xaxisMinimumPadding(){const a=new PlotModel({title:"X-axis MinimumPadding=0.1"});a.axes.push(new LinearAxis),a.axes.push(new LinearAxis({minimumPadding:.1,position:AxisPosition.Bottom}));const s=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6)});return s.points.push(new DataPoint(10,4)),s.points.push(new DataPoint(12,7)),s.points.push(new DataPoint(16,3)),s.points.push(new DataPoint(20,9)),a.series.push(s),a}function xaxisMaximumPadding(){const a=new PlotModel({title:"X-axis MaximumPadding=0.1"});a.axes.push(new LinearAxis),a.axes.push(new LinearAxis({maximumPadding:.1,position:AxisPosition.Bottom}));const s=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6)});return s.points.push(new DataPoint(10,4)),s.points.push(new DataPoint(12,7)),s.points.push(new DataPoint(16,3)),s.points.push(new DataPoint(20,9)),a.series.push(s),a}function absoluteMinimumAndMaximum(){const a=new PlotModel({title:"AbsoluteMinimum=-17, AbsoluteMaximum=63",subtitle:"Zooming and panning is limited to these values."});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:50,absoluteMinimum:-17,absoluteMaximum:63})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:50,absoluteMinimum:-17,absoluteMaximum:63})),a}function minimumRange(){const a=new PlotModel({title:"MinimumRange = 400"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimumRange:400})),a}function maximumRange(){const a=new PlotModel({title:"MaximumRange = 40"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,maximumRange:40})),a}function titleWithUnit(){const a=new PlotModel({title:"Axis titles with units"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Speed",unit:"km/h"})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C"})),a}function invisibleVerticalAxis(){const a=new PlotModel({title:"Invisible vertical axis"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left,isAxisVisible:!1})),a.series.push(new FunctionSeries({f:s=>Math.sin(s)/s,x0:-5,x1:5,dx:.1})),a}function invisibleHorizontalAxis(){const a=new PlotModel({title:"Invisible horizontal axis"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,isAxisVisible:!1})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.series.push(new FunctionSeries({f:s=>Math.sin(s)*s*s,x0:-5,x1:5,dx:.1})),a}function zoomingDisabled(){const a=new PlotModel({title:"Zooming disabled"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,isZoomEnabled:!1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,isZoomEnabled:!1})),a}function panningDisabled(){const a=new PlotModel({title:"Panning disabled"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,isPanEnabled:!1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,isPanEnabled:!1})),a}function denseIntervals(){const a=new PlotModel({title:"Dense intervals"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,intervalLength:30})),a.axes.push(new LinearAxis({position:AxisPosition.Left,intervalLength:20})),a}function graphPaper(){const a=new PlotModel({title:"Graph Paper"}),s=OxyColors.DarkBlue;return a.plotType=PlotType.Cartesian,a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a}function logLogPaper(){const a=new PlotModel({title:"Log-Log Paper"}),s=OxyColors.DarkBlue;return a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,title:"X",minimum:.1,maximum:1e3,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left,title:"Y",minimum:.1,maximum:1e3,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a}function onBlack(){const a=new PlotModel({title:"Black background",background:OxyColors.Black,textColor:OxyColors.White,plotAreaBorderColor:OxyColors.White}),s=OxyColors.White;return a.plotType=PlotType.Cartesian,a.series.push(new FunctionSeries({f:Math.sin,x0:0,x1:Math.PI*2,n:1e3,title:"f(x)=sin(x)"})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"x",majorStep:Math.PI/2,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:"",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s),ticklineColor:OxyColors.White})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"f(x)",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s),ticklineColor:OxyColors.White})),a}function backgrounds(){const a=new PlotModel({title:"Background and PlotAreaBackground",background:OxyColors.Silver,plotAreaBackground:OxyColors.Gray,plotAreaBorderColor:OxyColors.Black,plotAreaBorderThickness:new OxyThickness(3)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function currentCulture(){const a=new PlotModel({title:"Current culture"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-1,maximum:1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-1,maximum:1})),a.series.push(new FunctionSeries({f:Math.sin,x0:-1,x1:1,n:100})),a}function longAxisTitlesClipped90(){const a="Long title 12345678901234567890123456789012345678901234567890123456789012345678901234567890",s="The tool tip is "+a,d=new PlotModel({title:"Long axis titles (clipped at 90%)"});return d.axes.push(new LinearAxis({position:AxisPosition.Left,title:a,toolTip:s})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:a,toolTip:s})),d}function longAxisTitlesClipped100(){const a="Long title 12345678901234567890123456789012345678901234567890123456789012345678901234567890",s="The tool tip is "+a,d=new PlotModel({title:"Long axis titles (clipped at 100%)"});return d.axes.push(new LinearAxis({position:AxisPosition.Left,title:a,toolTip:s,titleClippingLength:1})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:a,toolTip:s,titleClippingLength:1})),d}function longAxisTitlesNotClipped(){const a="Long title 12345678901234567890123456789012345678901234567890123456789012345678901234567890",s="The tool tip is "+a,d=new PlotModel({title:"Long axis titles (not clipped)"});return d.axes.push(new LinearAxis({position:AxisPosition.Left,title:a,toolTip:s,clipTitle:!1})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:a,toolTip:s,clipTitle:!1})),d}function positionTier(){const a=new PlotModel,s=new LinearAxis({maximum:1,minimum:-1,title:"PositionTier=0"});a.axes.push(s);const d=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:2,minimum:-2,positionTier:1,title:"PositionTier=1"});a.axes.push(d);const m=new LinearAxis({maximum:1,minimum:-1,position:AxisPosition.Right,title:"PositionTier=0"});a.axes.push(m);const f=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:2,minimum:-2,position:AxisPosition.Right,positionTier:1,title:"PositionTier=1"});a.axes.push(f);const g=new LinearAxis({maximum:1,minimum:-1,position:AxisPosition.Top,title:"PositionTier=0"});a.axes.push(g);const x=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:2,minimum:-2,position:AxisPosition.Top,positionTier:1,title:"PositionTier=1"});a.axes.push(x);const w=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:10,minimum:-10,position:AxisPosition.Top,positionTier:2,title:"PositionTier=2"});a.axes.push(w);const C=new LinearAxis({maximum:1,minimum:-1,position:AxisPosition.Bottom,title:"PositionTier=0"});a.axes.push(C);const A=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:2,minimum:-2,position:AxisPosition.Bottom,positionTier:1,title:"PositionTier=1"});a.axes.push(A);const _=new LinearAxis({axislineStyle:LineStyle.Solid,maximum:10,minimum:-10,position:AxisPosition.Bottom,positionTier:2,title:"PositionTier=2"});return a.axes.push(_),a}function titleColor(){const a=new PlotModel({title:"Custom axis title color"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-1,maximum:1,title:"Bottom axis",titleColor:OxyColors.Red})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-1,maximum:1,title:"Left axis",titleColor:OxyColors.Blue})),a.series.push(new FunctionSeries({f:Math.sin,x0:-1,x1:1,n:100})),a}function labelColor(){const a=new PlotModel({title:"Custom axis label color"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-1,maximum:1,title:"Bottom axis",textColor:OxyColors.Red})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-1,maximum:1,title:"Left axis",textColor:OxyColors.Blue})),a.series.push(new FunctionSeries({f:Math.sin,x0:-1,x1:1,n:100})),a}function angledAxisNumbers(){const a=new PlotModel({title:"Angled axis numbers"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-1,maximum:1,title:"Bottom axis",angle:45})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-1,maximum:1,title:"Left axis",angle:45})),a.axes.push(new LinearAxis({position:AxisPosition.Top,minimum:-1,maximum:1,title:"Top axis",angle:45})),a.axes.push(new LinearAxis({position:AxisPosition.Right,minimum:-1,maximum:1,title:"Right axis",angle:45})),a}function axisDistance(){const a=new PlotModel({title:"AxisDistance = 20"});return a.axes.push(new LinearAxis({axislineStyle:LineStyle.Solid,axisDistance:20,position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({axislineStyle:LineStyle.Solid,axisDistance:20,position:AxisPosition.Left})),a.axes.push(new LinearAxis({axislineStyle:LineStyle.Solid,axisDistance:20,position:AxisPosition.Right})),a.axes.push(new LinearAxis({axislineStyle:LineStyle.Solid,axisDistance:20,position:AxisPosition.Top})),a}function noAxesDefined(){const a=new PlotModel({title:"No axes defined",subtitle:"Bottom and left axes are auto-generated."});return a.series.push(new FunctionSeries({f:Math.sin,x0:0,x1:10,n:400})),a}function labelFormatter$1(){const a=new PlotModel({title:"LabelFormatter"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-10,maximum:10,labelFormatter:d=>Math.abs(d)<Number.EPSILON?"ZERO":d.toString()}));const s=65;return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:25,majorStep:1,minorStep:1,maximumPadding:0,minimumPadding:0,labelFormatter:d=>String.fromCharCode(d+s)})),a}function toolTips(){const a=new PlotModel({title:"Tool tips"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Left axis",toolTip:"Tool tip for the left axis"})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Bottom axis",toolTip:"Tool tip for the bottom axis"})),a}function subSuperscriptInAxisTitles(){const a=new PlotModel({title:"Sub- and superscript in axis titles"});return a.axes.push(new LinearAxis({title:"Title with^{super}_{sub}script"})),a.axes.push(new LinearAxis({title:"Title with^{super}_{sub}script",position:AxisPosition.Bottom})),a}function minimumMajorStep(){const a=new PlotModel({title:"Axes with MinimumMajorStep"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"MinimuMajorStep = 1",minimum:0,maximum:2,minimumMajorStep:1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"MinimuMajorStep = 10",minimum:0,maximum:15,minimumMajorStep:10})),a.axes.push(new LinearAxis({position:AxisPosition.Top,title:"MinimuMajorStep = 0 (default)",minimum:0,maximum:2})),a.axes.push(new LinearAxis({position:AxisPosition.Right,title:"MinimuMajorStep = 0 (default)",minimum:0,maximum:15})),a}function minimumMinorStep(){const a=new PlotModel({title:"Axes with MinimumMinorStep"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"MinimumMinorStep = 1",minimum:0,maximum:20,minimumMinorStep:1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"MinimumMinorStep = 10",minimum:0,maximum:150,minimumMinorStep:10})),a.axes.push(new LinearAxis({position:AxisPosition.Top,title:"MinimumMinorStep = 0 (default)",minimum:0,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Right,title:"MinimumMinorStep = 0 (default)",minimum:0,maximum:150})),a}function defaultAxisTitleDistance(){const a=new PlotModel({title:"AxisTitleDistance = 4 (default)"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Bottom",minimum:0,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Left",minimum:0,maximum:150})),a.axes.push(new LinearAxis({position:AxisPosition.Top,title:"Top",minimum:0,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Right,title:"Right",minimum:0,maximum:150})),a}function customAxisTitleDistance(){const a=new PlotModel({title:"AxisTitleDistance = 40"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Bottom",minimum:0,maximum:20,axisTitleDistance:40})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Left",minimum:0,maximum:150,axisTitleDistance:40})),a.axes.push(new LinearAxis({position:AxisPosition.Top,title:"Top",minimum:0,maximum:20,axisTitleDistance:40})),a.axes.push(new LinearAxis({position:AxisPosition.Right,title:"Right",minimum:0,maximum:150,axisTitleDistance:40})),a}function majorGridlineStyle(){const a=new PlotModel({title:"MajorGridlineStyle and MajorGridlineThickness"});return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,majorGridlineThickness:10})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,majorGridlineThickness:10,position:AxisPosition.Bottom})),a}function gridlineCroppingBoth(){const a=new PlotModel({title:"Gridline cropping"});return a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,extraGridlines:[46],extraGridlineColor:OxyColors.Red,startPosition:.1,endPosition:.4,cropGridlines:!0})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,extraGridlines:[46],extraGridlineColor:OxyColors.Red,startPosition:.6,endPosition:.9,cropGridlines:!0})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom,extraGridlines:[46],extraGridlineColor:OxyColors.Red,startPosition:.1,endPosition:.4,cropGridlines:!0})),a.axes.push(new LinearAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dot,position:AxisPosition.Bottom,extraGridlines:[46],extraGridlineColor:OxyColors.Red,startPosition:.6,endPosition:.9,cropGridlines:!0})),a}function multiVerticalAxes(){const a="axisY_Temperature",s="axisY_Pressure",d="axisY_Humidity",m=new PlotModel({title:"Multi vertical axes with lineSeries"}),f=new Legend({legendBackground:OxyColors.White});m.legends.push(f);const g=new DateTimeAxis({title:"Time",position:AxisPosition.Bottom,majorGridlineStyle:LineStyle.Solid,fontSize:13});m.axes.push(g);let x=null,w=null,C=null,A=null,_=null,M=null;A=new LinearAxis({title:"Temperature",position:AxisPosition.Left,majorGridlineStyle:LineStyle.None,positionTier:1,key:a,isAxisVisible:!0}),x=new LineSeries({title:"Temperature",color:OxyColors.Tomato,lineStyle:LineStyle.Solid,markerType:MarkerType.Circle,markerSize:3,markerFill:OxyColors.Red,yAxisKey:a,isVisible:!0}),m.axes.push(A),m.series.push(x),_=new LinearAxis({title:"Pressure",position:AxisPosition.Left,majorGridlineStyle:LineStyle.None,positionTier:2,key:s,isAxisVisible:!0}),w=new LineSeries({title:"Pressure",color:OxyColors.Peru,lineStyle:LineStyle.Solid,markerType:MarkerType.Circle,markerSize:3,markerFill:OxyColors.Sienna,yAxisKey:s,isVisible:!0}),m.axes.push(_),m.series.push(w),M=new LinearAxis({title:"Humidity",position:AxisPosition.Left,majorGridlineStyle:LineStyle.None,positionTier:3,key:d,isAxisVisible:!0}),C=new LineSeries({title:"Humidity",color:OxyColors.LightSkyBlue,lineStyle:LineStyle.Solid,markerType:MarkerType.Circle,markerSize:3,markerFill:OxyColors.DeepSkyBlue,yAxisKey:d,isVisible:!0}),m.axes.push(M),m.series.push(C);{x.points.length=0,w.points.length=0,C.points.length=0;const P=TimeSpan.fromMilliseconds(1e3),E=getDateService();let R=new Date(2018,8,10);const B=100;for(let z=1;z<=B;z++){const F=20+Math.sin(z),I=760+1.5*Math.cos(1.5*z),L=50+2*Math.sin(2*z);x.points.push(DateTimeAxis.createDataPoint(R,F)),w.points.push(DateTimeAxis.createDataPoint(R,I)),C.points.push(DateTimeAxis.createDataPoint(R,L)),R=E.addTimespan(R,P)}A.minimum=10,A.maximum=23,_.minimum=750,_.maximum=770,M.minimum=47,M.maximum=60}return m}function autoMargin(){const a=new PlotModel({title:"Auto-adjusting plot margins",subtitle:"When zooming in and out the plot margins should adjust accordingly"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X Axis",titleFontSize:16})),a}function manualMargins(){const a=new PlotModel({title:"Manual Margins",subtitle:"PlotMargins = 40",plotMargins:new OxyThickness(40)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a}function manualLeftMargin(){const a=new PlotModel({title:"Manual Left Margin",subtitle:"PlotMargins = 40,NaN,NaN,NaN",plotMargins:new OxyThickness(40,NaN,NaN,NaN)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a}function autoMarginWideLabels(){const a=new PlotModel({title:"Auto-adjusting plot margins - wide axis labels",subtitle:"There should be enough space reserved such that the axis labels always fit in the viewport"});return a.axes.push(getLongLabelSeries()),a}function autoMarginWideLabelsRotated(){const a=new PlotModel({title:"Auto-adjusting plot margins - wide rotated axis labels",subtitle:"There should be enough space reserved such that the axis labels always fit in the viewport"}),s=getLongLabelSeries();return s.angle=-90,a.axes.push(s),a}function autoMarginWideLabelsFixedRange(){const a=new PlotModel({title:"Auto-adjusting plot margins - wide axis labels, fixed range",subtitle:"When the axis range is fixed there should be no unnecessary space reserved for axis labels"}),s=getLongLabelSeries();return s.isPanEnabled=!1,s.isZoomEnabled=!1,a.axes.push(s),a}function autoMarginWideLabelsFixedRange2(){const a=new PlotModel({title:"Auto-adjusting plot margins - wide axis labels, fixed range",subtitle:"The axis labels should exactly fit in the viewport"}),s=getLongLabelSeries();return s.isPanEnabled=!1,s.isZoomEnabled=!1,s.minimum=-.01,s.maximum=3.01,a.axes.push(s),a}function getLongLabelSeries(){const a=new CategoryAxis({position:AxisPosition.Bottom});return a.labels.push("Label"),a.labels.push("Long Label"),a.labels.push("Longer Label"),a.labels.push("Even Longer Label"),a}function minimumAndMaximumDataMargins(){const a=new PlotModel({title:"Normal distribution",subtitle:"Probability density function"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,minimum:0,tickStyle:TickStyle.Inside})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,tickStyle:TickStyle.Inside})),a.series.push(createNormalDistributionSeries(-5,5,0,.2)),a.series.push(createNormalDistributionSeries(-5,5,0,1)),a.series.push(createNormalDistributionSeries(-5,5,0,5)),a.series.push(createNormalDistributionSeries(-5,5,-2,.5)),a}function minimumAndMaximumDataMarginsZeroCrossing(){const a=new PlotModel({title:"Normal distribution",subtitle:"Probability density function"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,minimum:0,tickStyle:TickStyle.Crossing,axislineStyle:LineStyle.Solid,positionAtZeroCrossing:!0})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,tickStyle:TickStyle.Crossing,axislineStyle:LineStyle.Solid,positionAtZeroCrossing:!0})),a.series.push(createNormalDistributionSeries(-5,5,0,.2)),a.series.push(createNormalDistributionSeries(-5,5,0,1)),a.series.push(createNormalDistributionSeries(-5,5,0,5)),a.series.push(createNormalDistributionSeries(-5,5,-2,.5)),a}function minimumAndMaximumDataMarginsLog(){const a=new PlotModel({title:"Exponentials"});a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,tickStyle:TickStyle.Inside})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left,minimumPadding:0,maximumPadding:0,minimumDataMargin:20,maximumDataMargin:20,tickStyle:TickStyle.Inside}));for(let s=1;s<=5;s++)a.series.push(new FunctionSeries({f:d=>Math.pow(s,d),x0:0,x1:10,dx:.01,title:`${s}^x`}));return a}function minimumAndMaximumMarginsPolar(){const a=new PlotModel({title:"Spiral",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({majorStep:Math.PI/4,minorStep:Math.PI/16,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:"",minimum:0,maximum:2*Math.PI})),a.axes.push(new MagnitudeAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,minimumPadding:0,maximumPadding:0,minimumDataMargin:0,maximumDataMargin:20})),a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:0,t1:Math.PI*6,dt:.01})),a}function axisOutMargins(){const a=new PlotModel({title:"YAxes are evenly distributed with a constant gap",plotAreaBorderThickness:new OxyThickness(0)});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,axislineStyle:LineStyle.Solid,key:"X"}));const s=4,d=10;for(let m=0;m<s;m++)a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:m/s,endPosition:(m+1)/s,minimumMargin:m/s*d,maximumMargin:(s-m-1)/s*d,axislineStyle:LineStyle.Solid,key:`Y${m}`})),a.series.push(new FunctionSeries({f:f=>Math.sin(f*(m+1)),x0:1,x1:10,dx:.01,title:`x^${m}`,xAxisKey:"X",yAxisKey:`Y${m}`}));return a}function axisMarginsClipping(){const a=new PlotModel({title:"Axis Margins Clipping",subtitle:"Data Points and Visual Elements are clipped outside the Clip Bounds"});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimumPadding:0,maximumPadding:0,minimumMargin:20,maximumMargin:20})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:0,minimumMargin:20,maximumMargin:20}));const s=new Random(1),d=new ScatterSeries({markerType:MarkerType.Diamond});for(let m=0;m<100;m++)d.points.push({x:s.next(),y:s.next()});return a.series.push(d),a}function polarOuterMargins(){const a=new PlotModel({title:"Spiral",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({majorStep:Math.PI/4,minorStep:Math.PI/16,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:"",minimum:0,maximum:2*Math.PI})),a.axes.push(new MagnitudeAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,minimumPadding:0,maximumPadding:0,minimumMargin:0,maximumMargin:100})),a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:0,t1:Math.PI*6,dt:.01})),a}function marginsAndPadding(){const a=new PlotModel({title:"Try resizing the plot",subtitle:`ClipMinimum/Maximum are Blue
ActualMinimum/Maximum are Red
DataMinimum/Maximum are Green`}),s=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.1,maximumPadding:.1,minimumDataMargin:20,maximumDataMargin:20,minimumMargin:30,maximumMargin:30,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dash,cropGridlines:!0});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left,minimumPadding:.1,maximumPadding:.1,minimumDataMargin:20,maximumDataMargin:20,minimumMargin:30,maximumMargin:30,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dash,cropGridlines:!0});a.axes.push(d);const m=new LineSeries;return m.color=OxyColors.Green,m.points.push(new DataPoint(-5,0)),m.points.push(new DataPoint(-5,20)),m.points.push(new DataPoint(25,20)),m.points.push(new DataPoint(25,0)),m.points.push(new DataPoint(-5,0)),a.series.push(m),_addAxisMarginAnnotations(a),a}function _addAxisMarginAnnotations(a){a.annotations.push(new DelegateAnnotation(async s=>{const d=RenderingExtensions.drawLine;for(const m of a.axes)if(m.isHorizontal()){const f=m;await d(s,f.transform(f.clipMinimum),0,f.transform(f.clipMinimum),a.height,new OxyPen(OxyColors.Blue,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,f.transform(f.clipMaximum),0,f.transform(f.clipMaximum),a.height,new OxyPen(OxyColors.Blue,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,f.transform(f.actualMinimum),0,f.transform(f.actualMinimum),a.height,new OxyPen(OxyColors.Red,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,f.transform(f.actualMaximum),0,f.transform(f.actualMaximum),a.height,new OxyPen(OxyColors.Red,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,f.transform(f.dataMinimum),0,f.transform(f.dataMinimum),a.height,new OxyPen(OxyColors.Green,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,f.transform(f.dataMaximum),0,f.transform(f.dataMaximum),a.height,new OxyPen(OxyColors.Green,1,LineStyle.Dot),EdgeRenderingMode.Automatic)}else{const f=m;await d(s,0,f.transform(f.clipMinimum),a.width,f.transform(f.clipMinimum),new OxyPen(OxyColors.Blue,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,0,f.transform(f.clipMaximum),a.width,f.transform(f.clipMaximum),new OxyPen(OxyColors.Blue,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,0,f.transform(f.actualMinimum),a.width,f.transform(f.actualMinimum),new OxyPen(OxyColors.Red,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,0,f.transform(f.actualMaximum),a.width,f.transform(f.actualMaximum),new OxyPen(OxyColors.Red,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,0,f.transform(f.dataMinimum),a.width,f.transform(f.dataMinimum),new OxyPen(OxyColors.Green,1,LineStyle.Dot),EdgeRenderingMode.Automatic),await d(s,0,f.transform(f.dataMaximum),a.width,f.transform(f.dataMaximum),new OxyPen(OxyColors.Green,1,LineStyle.Dot),EdgeRenderingMode.Automatic)}}))}function marginsAndPaddingAsymmetrical(){const a=new PlotModel({title:"Try resizing the plot",subtitle:`ClipMinimum/Maximum are Blue
ActualMinimum/Maximum are Red
DataMinimum/Maximum are Green`}),s=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.1,maximumPadding:.05,minimumDataMargin:20,maximumDataMargin:10,minimumMargin:30,maximumMargin:15,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dash,cropGridlines:!0});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left,minimumPadding:.2,maximumPadding:.1,minimumDataMargin:40,maximumDataMargin:20,minimumMargin:60,maximumMargin:30,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Dash,cropGridlines:!0});a.axes.push(d);const m=new LineSeries;return m.color=OxyColors.Green,m.points.push(new DataPoint(-5,0)),m.points.push(new DataPoint(-5,20)),m.points.push(new DataPoint(25,20)),m.points.push(new DataPoint(25,0)),m.points.push(new DataPoint(-5,0)),a.series.push(m),_addAxisMarginAnnotations(a),a}function minimumMajorIntervalCount(){const a=new PlotModel({title:"MinimumMajorIntervalCount = 10"}),s=new LinearAxis({position:AxisPosition.Bottom,minimumMajorIntervalCount:10});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left,minimumMajorIntervalCount:10});return a.axes.push(d),a}function maximumMajorIntervalCount(){const a=new PlotModel({title:"MaximumMajorIntervalCount = 5"}),s=new LinearAxis({position:AxisPosition.Bottom,maximumMajorIntervalCount:5});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left,maximumMajorIntervalCount:5});return a.axes.push(d),a}function minimumAndMaximumMajorIntervalCount(){const a=new PlotModel({title:"MinimumMajorIntervalCount = MaximumMajorIntervalCount = 4"}),s=new LinearAxis({position:AxisPosition.Bottom,minimumMajorIntervalCount:4,maximumMajorIntervalCount:4});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left,minimumMajorIntervalCount:4,maximumMajorIntervalCount:4});return a.axes.push(d),a}function createTickStyleExample(a){const s=getEnumName(TickStyle,a),d=new PlotModel({title:"TickStyle = "+s});return d.axes.push(new LinearAxis({position:AxisPosition.Left,tickStyle:a})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,tickStyle:a})),d}const category$N="Axis examples",AxisExamples={category:category$N,tags:["Axes"],examples:[{title:"TickStyle: None",example:{model:tickStyleNone$1}},{title:"TickStyle: Inside",example:{model:tickStyleInside$1}},{title:"TickStyle: Crossing",example:{model:tickStyleCrossing$1}},{title:"TickStyle: Outside",example:{model:tickStyleOutside$1}},{title:"TickStyle: Color major and minor ticks differently",example:{model:tickLineColor}},{title:"GridLinestyle: None (default)",example:{model:gridlineStyleNone}},{title:"GridLinestyle: Vertical",example:{model:gridLinestyleVertical}},{title:"GridLinestyle: Horizontal",example:{model:gridLinestyleHorizontal}},{title:"GridLinestyle: Horizontal and vertical",example:{model:gridLinestyleBoth}},{title:"Axis position left/bottom",example:{model:axisPositionLeftAndBottom}},{title:"Axis position top/right",example:{model:axisPositionTopRight}},{title:"Axis label angle 45deg",example:{model:axisAngle45}},{title:"Zero crossing axis",example:{model:zeroCrossing}},{title:"Horizontal zero crossing axis",example:{model:horizontalZeroCrossing}},{title:"Vertical zero crossing axis",example:{model:verticalZeroCrossing}},{title:"Reversed",example:{model:reversed}},{title:"Sharing Y axis",example:{model:sharingY}},{title:"Four axes",example:{model:fourAxes}},{title:"Five axes",example:{model:fiveAxes}},{title:"Logarithmic axes",example:{model:logarithmicAxes}},{title:"Logarithmic axes Cartesian Plot",example:{model:cartesianPlotLogarithmicAxes}},{title:"Big numbers",example:{model:bigNumbers}},{title:"Big numbers with super exponential format",example:{model:bigNumbersSuperExponentialFormat}},{title:"Small numbers",example:{model:smallNumbers}},{title:"Default padding",example:{model:defaultPadding}},{title:"No padding",example:{model:noPadding}},{title:"Padding 10%",example:{model:padding}},{title:"X-axis MinimumPadding=0.1",example:{model:xaxisMinimumPadding}},{title:"X-axis MaximumPadding=0.1",example:{model:xaxisMaximumPadding}},{title:"AbsoluteMinimum and AbsoluteMaximum",example:{model:absoluteMinimumAndMaximum}},{title:"MinimumRange",example:{model:minimumRange}},{title:"MaximumRange",example:{model:maximumRange}},{title:"Title with unit",example:{model:titleWithUnit}},{title:"Invisible vertical axis",example:{model:invisibleVerticalAxis}},{title:"Invisible horizontal axis",example:{model:invisibleHorizontalAxis}},{title:"Zooming disabled",example:{model:zoomingDisabled}},{title:"Panning disabled",example:{model:panningDisabled}},{title:"Dense intervals",example:{model:denseIntervals}},{title:"Graph Paper",example:{model:graphPaper}},{title:"Log-Log Paper",example:{model:logLogPaper}},{title:"Black background",example:{model:onBlack}},{title:"Background and PlotAreaBackground",example:{model:backgrounds}},{title:"Current culture",example:{model:currentCulture}},{title:"Long axis titles (clipped at 90%)",example:{model:longAxisTitlesClipped90}},{title:"Long axis titles (clipped at 100%)",example:{model:longAxisTitlesClipped100}},{title:"Long axis titles (not clipped)",example:{model:longAxisTitlesNotClipped}},{title:"PositionTier",example:{model:positionTier}},{title:"Custom axis title color",example:{model:titleColor}},{title:"Custom axis label color",example:{model:labelColor}},{title:"Angled axis numbers",example:{model:angledAxisNumbers}},{title:"Axis distance",example:{model:axisDistance}},{title:"No axes defined",example:{model:noAxesDefined}},{title:"LabelFormatter",example:{model:labelFormatter$1}},{title:"Tool tips",example:{model:toolTips}},{title:"Sub- and superscript in axis titles",example:{model:subSuperscriptInAxisTitles}},{title:"MinimumMajorStep",example:{model:minimumMajorStep}},{title:"MinimumMinorStep",example:{model:minimumMinorStep}},{title:"Default AxisTitleDistance",example:{model:defaultAxisTitleDistance}},{title:"Custom AxisTitleDistance",example:{model:customAxisTitleDistance}},{title:"MajorGridlineStyle",example:{model:majorGridlineStyle}},{title:"Gridlines Cropping: Horizontal and vertical",example:{model:gridlineCroppingBoth}},{title:"Multi vertical axes with lineSeries",example:{model:multiVerticalAxes}},{title:"Auto Margins",example:{model:autoMargin}},{title:"Manual Margins",example:{model:manualMargins}},{title:"Manual Left Margin",example:{model:manualLeftMargin}},{title:"Auto Margins - Wide Labels",example:{model:autoMarginWideLabels}},{title:"Auto Margins - Wide Labels, rotated",example:{model:autoMarginWideLabelsRotated}},{title:"Auto Margins - Wide Labels, fixed Range",example:{model:autoMarginWideLabelsFixedRange}},{title:"Auto Margins - Wide Labels, fixed Range 2",example:{model:autoMarginWideLabelsFixedRange2}},{title:"Data Margins",example:{model:minimumAndMaximumDataMargins}},{title:"Data Margins with Zero-Crossing",example:{model:minimumAndMaximumDataMarginsZeroCrossing}},{title:"Data Margins on Log Axis",example:{model:minimumAndMaximumDataMarginsLog}},{title:"Data Margins on Polar Plot",example:{model:minimumAndMaximumMarginsPolar}},{title:"Axis Margins",example:{model:axisOutMargins}},{title:"Axis Margins Clipping",example:{model:axisMarginsClipping}},{title:"Axis Margins on Polar Plot",example:{model:polarOuterMargins}},{title:"Axis Margins, Data Margins, and Padding",example:{model:marginsAndPadding}},{title:"Axis Margins, Data Margins, and Padding, Asymmetrical",example:{model:marginsAndPaddingAsymmetrical}},{title:"Minimum Major Interval Count",example:{model:minimumMajorIntervalCount}},{title:"Maximum Major Interval Count",example:{model:maximumMajorIntervalCount}},{title:"Minimum and Maximum Major Interval Count",example:{model:minimumAndMaximumMajorIntervalCount}}]};function functionSeries$1(){const a=new PlotModel({title:"Trigonometric functions",plotType:PlotType.Cartesian});return a.series.push(FunctionSeries.fromDx(Math.sin,-10,10,.1,"sin(x)")),a.series.push(FunctionSeries.fromDx(Math.cos,-10,10,.1,"cos(x)")),a.series.push(FunctionSeries.fromFxFyN(s=>5*Math.cos(s),s=>5*Math.sin(s),0,2*Math.PI,1e3,"cos(t),sin(t)")),a}function clover$1(){const a=new PlotModel({title:"Parametric function",plotType:PlotType.Cartesian});return a.series.push(FunctionSeries.fromFxFyN(s=>2*Math.cos(2*s)*Math.cos(s),s=>2*Math.cos(2*s)*Math.sin(s),0,Math.PI*2,1e3,"2cos(2t)cos(t) , 2cos(2t)sin(t)")),a}function absoluteYmin(){const a=new PlotModel({title:"Y: AbsoluteMinimum = 0",plotType:PlotType.Cartesian}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function absoluteYmin2(){const a=new PlotModel({title:"Y: AbsoluteMinimum = 0",subtitle:"AutoAdjustPlotMargins = false",plotType:PlotType.Cartesian,plotMargins:new OxyThickness(60,4,4,40)}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function absoluteYminXmin(){const a=new PlotModel({title:"X: AbsoluteMinimum = -10, Y: AbsoluteMinimum = 0",plotType:PlotType.Cartesian}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",absoluteMinimum:-10,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function absoluteYminYmax(){const a=new PlotModel({title:"Y: AbsoluteMinimum = 0, AbsoluteMaximum = 2",plotType:PlotType.Cartesian}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,absoluteMaximum:2,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function absoluteYminXminXmax(){const a=new PlotModel({title:"Y: AbsoluteMinimum = 0, X: AbsoluteMinimum = -10, AbsoluteMaximum = 10",plotType:PlotType.Cartesian}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",absoluteMinimum:-10,absoluteMaximum:10,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function absoluteYminYmaxXminXmax(){const a=new PlotModel({title:"Y: AbsoluteMinimum = 0, AbsoluteMaximum = 2, X: AbsoluteMinimum = -10, AbsoluteMaximum = 10",plotType:PlotType.Cartesian}),s=OxyColors.DarkBlue;return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis",absoluteMinimum:-10,absoluteMaximum:10,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis",absoluteMinimum:0,minimum:0,absoluteMaximum:2,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColor.fromAColor(40,s),minorGridlineColor:OxyColor.fromAColor(20,s)})),a.series.push(createTestSeries()),a}function createTestSeries(){const a=new LineSeries;return a.points.push(new DataPoint(-8,0),new DataPoint(-7.5,.1),new DataPoint(-7,.2),new DataPoint(-6,.4),new DataPoint(-5,.5),new DataPoint(-4,.6),new DataPoint(-3,.7),new DataPoint(-2,.8),new DataPoint(-1,.9),new DataPoint(0,1),new DataPoint(1,.9),new DataPoint(2,.8),new DataPoint(3,.7),new DataPoint(4,.6),new DataPoint(5,.5),new DataPoint(6,.4),new DataPoint(7,.2),new DataPoint(7.5,.1),new DataPoint(8,0),DataPoint.Undefined,new DataPoint(-.5,.5),new DataPoint(-.5,1.5),new DataPoint(.5,1.5),new DataPoint(.5,.5),new DataPoint(-.5,.5)),a}const category$M="Cartesian axes",CartesianAxesExamples={category:category$M,tags:["Axes"],examples:[{title:"Trigonometric functions",example:{model:functionSeries$1}},{title:"Clover",example:{model:clover$1}},{title:"AbsoluteMinimum Y",example:{model:absoluteYmin}},{title:"AbsoluteMinimum Y, manual plotmargins",example:{model:absoluteYmin2}},{title:"AbsoluteMinimum X/Y",example:{model:absoluteYminXmin}},{title:"AbsoluteMinimum/Maximum Y",example:{model:absoluteYminYmax}},{title:"AbsoluteMinimum Y, AbsoluteMinimum/Maximum X",example:{model:absoluteYminXminXmax}},{title:"AbsoluteMinimum/Maximum X/Y",example:{model:absoluteYminYmaxXminXmax}}]};function standardCategoryAxis(){const a=new PlotModel({title:"Standard"}),s=new CategoryAxis;s.labels.push("1","2","3","4","5","6","7","8","9","10","11","12"),a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});return a.axes.push(d),a}function itemsSourceStrings(){const a=new PlotModel({title:"CategoryAxis with string[] as ItemsSource"});a.axes.push(new CategoryAxis({stringFormatter:d=>`Item ${d}`,itemsSource:["A","B","C"]}));const s=new LinearAxis({position:AxisPosition.Left});return a.axes.push(s),a}function itemsSourceValues(){const a=new PlotModel({title:"CategoryAxis with int[] as ItemsSource"});a.axes.push(new CategoryAxis({stringFormatter:d=>`Item ${d}`,itemsSource:[10,100,123]}));const s=new LinearAxis({position:AxisPosition.Left});return a.axes.push(s),a}function majorStepCategoryAxis(){const a=new PlotModel({title:"Major Step = 4, IsTickCentered = false"}),s=new CategoryAxis({isTickCentered:!1,majorStep:4});s.labels.push("1","2","3","4","5","6","7","8","9","10","11","12"),a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});return a.axes.push(d),a}function majorStepCategoryTickCenteredAxis(){const a=new PlotModel({title:"Major Step = 4, IsTickCentered = true"}),s=new CategoryAxis({isTickCentered:!0,majorStep:4});s.labels.push("1","2","3","4","5","6","7","8","9","10","11","12"),a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});return a.axes.push(d),a}const category$L="CategoryAxis",CategoryAxisExamples={category:category$L,tags:["Axes"],examples:[{title:"Standard",example:{model:standardCategoryAxis}},{title:"ItemsSource - string[]",example:{model:itemsSourceStrings}},{title:"ItemsSource - int[]",example:{model:itemsSourceValues}},{title:"MajorStep",example:{model:majorStepCategoryAxis}},{title:"MajorStep, TickCentered",example:{model:majorStepCategoryTickCenteredAxis}}]};function standardCategoryColorAxis(){const a=new PlotModel({title:"CategoryColorAxis"}),s=new CategoryColorAxis({key:"ccc",palette:OxyPalettes.blackWhiteRed(12)});s.labels.push("1","2","3","4","5","6","7","8","9","10","11","12"),a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left}),m=new ScatterSeries({colorAxisKey:s.key});return m.points.push({x:0,y:0,size:NaN,value:0}),m.points.push({x:3,y:0,size:NaN,value:3}),a.series.push(m),a.axes.push(d),a}function majorStep4(){const a=new PlotModel({title:"Major Step = 4, IsTickCentered = true"}),s=new CategoryColorAxis({palette:OxyPalettes.blackWhiteRed(3),isTickCentered:!0,majorStep:4});s.labels.push("1","2","3","4","5","6","7","8","9","10","11","12"),a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});return a.axes.push(d),a}const category$K="CategoryColorAxis",CategoryColorAxisExamples={category:category$K,tags:["Axes"],examples:[{title:"CategoryColorAxis",example:{model:standardCategoryColorAxis}},{title:"Centered ticks, MajorStep = 4",example:{model:majorStep4}}]};function customArrowAxis(){const a=new PlotModel({plotAreaBorderThickness:new OxyThickness(0),plotMargins:new OxyThickness(60,60,60,60)});return a.axes.push(new ArrowAxis({position:AxisPosition.Bottom,axislineStyle:LineStyle.Solid})),a.axes.push(new ArrowAxis({position:AxisPosition.Left,axislineStyle:LineStyle.Solid})),a}class ArrowAxis extends LinearAxis{async render(s,d){await super.render(s,d);const m=[];if(this.isHorizontal()){const f=this.transform(this.actualMaximum);m.push(new ScreenPoint(f+4,this.plotModel.plotArea.bottom-4)),m.push(new ScreenPoint(f+18,this.plotModel.plotArea.bottom)),m.push(new ScreenPoint(f+4,this.plotModel.plotArea.bottom+4))}else{const f=this.transform(this.actualMaximum);m.push(new ScreenPoint(this.plotModel.plotArea.left-4,f-4)),m.push(new ScreenPoint(this.plotModel.plotArea.left,f-18)),m.push(new ScreenPoint(this.plotModel.plotArea.left+4,f-4))}await s.drawPolygon(m,OxyColors.Black,OxyColors.Undefined,0,this.edgeRenderingMode)}}const category$J="Custom axes",CustomAxisExamples={category:category$J,tags:["Axes"],examples:[{title:"ArrowAxis",example:{model:customArrowAxis}}]};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var dayjs_min={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal,function(){var d=1e3,m=6e4,f=36e5,g="millisecond",x="second",w="minute",C="hour",A="day",_="week",M="month",P="quarter",E="year",R="date",B="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ve){var Ye=["th","st","nd","rd"],qe=Ve%100;return"["+Ve+(Ye[(qe-20)%10]||Ye[qe]||Ye[0])+"]"}},L=function(Ve,Ye,qe){var et=String(Ve);return!et||et.length>=Ye?Ve:""+Array(Ye+1-et.length).join(qe)+Ve},W={s:L,z:function(Ve){var Ye=-Ve.utcOffset(),qe=Math.abs(Ye),et=Math.floor(qe/60),je=qe%60;return(Ye<=0?"+":"-")+L(et,2,"0")+":"+L(je,2,"0")},m:function Ve(Ye,qe){if(Ye.date()<qe.date())return-Ve(qe,Ye);var et=12*(qe.year()-Ye.year())+(qe.month()-Ye.month()),je=Ye.clone().add(et,M),Ke=qe-je<0,Je=Ye.clone().add(et+(Ke?-1:1),M);return+(-(et+(qe-je)/(Ke?je-Je:Je-je))||0)},a:function(Ve){return Ve<0?Math.ceil(Ve)||0:Math.floor(Ve)},p:function(Ve){return{M,y:E,w:_,d:A,D:R,h:C,m:w,s:x,ms:g,Q:P}[Ve]||String(Ve||"").toLowerCase().replace(/s$/,"")},u:function(Ve){return Ve===void 0}},G="en",q={};q[G]=I;var K="$isDayjsObject",Z=function(Ve){return Ve instanceof me||!(!Ve||!Ve[K])},J=function Ve(Ye,qe,et){var je;if(!Ye)return G;if(typeof Ye=="string"){var Ke=Ye.toLowerCase();q[Ke]&&(je=Ke),qe&&(q[Ke]=qe,je=Ke);var Je=Ye.split("-");if(!je&&Je.length>1)return Ve(Je[0])}else{var at=Ye.name;q[at]=Ye,je=at}return!et&&je&&(G=je),je||!et&&G},te=function(Ve,Ye){if(Z(Ve))return Ve.clone();var qe=typeof Ye=="object"?Ye:{};return qe.date=Ve,qe.args=arguments,new me(qe)},Q=W;Q.l=J,Q.i=Z,Q.w=function(Ve,Ye){return te(Ve,{locale:Ye.$L,utc:Ye.$u,x:Ye.$x,$offset:Ye.$offset})};var me=function(){function Ve(qe){this.$L=J(qe.locale,null,!0),this.parse(qe),this.$x=this.$x||qe.x||{},this[K]=!0}var Ye=Ve.prototype;return Ye.parse=function(qe){this.$d=function(et){var je=et.date,Ke=et.utc;if(je===null)return new Date(NaN);if(Q.u(je))return new Date;if(je instanceof Date)return new Date(je);if(typeof je=="string"&&!/Z$/i.test(je)){var Je=je.match(z);if(Je){var at=Je[2]-1||0,nt=(Je[7]||"0").substring(0,3);return Ke?new Date(Date.UTC(Je[1],at,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,nt)):new Date(Je[1],at,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,nt)}}return new Date(je)}(qe),this.init()},Ye.init=function(){var qe=this.$d;this.$y=qe.getFullYear(),this.$M=qe.getMonth(),this.$D=qe.getDate(),this.$W=qe.getDay(),this.$H=qe.getHours(),this.$m=qe.getMinutes(),this.$s=qe.getSeconds(),this.$ms=qe.getMilliseconds()},Ye.$utils=function(){return Q},Ye.isValid=function(){return this.$d.toString()!==B},Ye.isSame=function(qe,et){var je=te(qe);return this.startOf(et)<=je&&je<=this.endOf(et)},Ye.isAfter=function(qe,et){return te(qe)<this.startOf(et)},Ye.isBefore=function(qe,et){return this.endOf(et)<te(qe)},Ye.$g=function(qe,et,je){return Q.u(qe)?this[et]:this.set(je,qe)},Ye.unix=function(){return Math.floor(this.valueOf()/1e3)},Ye.valueOf=function(){return this.$d.getTime()},Ye.startOf=function(qe,et){var je=this,Ke=!!Q.u(et)||et,Je=Q.p(qe),at=function(ft,He){var le=Q.w(je.$u?Date.UTC(je.$y,He,ft):new Date(je.$y,He,ft),je);return Ke?le:le.endOf(A)},nt=function(ft,He){return Q.w(je.toDate()[ft].apply(je.toDate("s"),(Ke?[0,0,0,0]:[23,59,59,999]).slice(He)),je)},ct=this.$W,pt=this.$M,rt=this.$D,ht="set"+(this.$u?"UTC":"");switch(Je){case E:return Ke?at(1,0):at(31,11);case M:return Ke?at(1,pt):at(0,pt+1);case _:var yt=this.$locale().weekStart||0,wt=(ct<yt?ct+7:ct)-yt;return at(Ke?rt-wt:rt+(6-wt),pt);case A:case R:return nt(ht+"Hours",0);case C:return nt(ht+"Minutes",1);case w:return nt(ht+"Seconds",2);case x:return nt(ht+"Milliseconds",3);default:return this.clone()}},Ye.endOf=function(qe){return this.startOf(qe,!1)},Ye.$set=function(qe,et){var je,Ke=Q.p(qe),Je="set"+(this.$u?"UTC":""),at=(je={},je[A]=Je+"Date",je[R]=Je+"Date",je[M]=Je+"Month",je[E]=Je+"FullYear",je[C]=Je+"Hours",je[w]=Je+"Minutes",je[x]=Je+"Seconds",je[g]=Je+"Milliseconds",je)[Ke],nt=Ke===A?this.$D+(et-this.$W):et;if(Ke===M||Ke===E){var ct=this.clone().set(R,1);ct.$d[at](nt),ct.init(),this.$d=ct.set(R,Math.min(this.$D,ct.daysInMonth())).$d}else at&&this.$d[at](nt);return this.init(),this},Ye.set=function(qe,et){return this.clone().$set(qe,et)},Ye.get=function(qe){return this[Q.p(qe)]()},Ye.add=function(qe,et){var je,Ke=this;qe=Number(qe);var Je=Q.p(et),at=function(pt){var rt=te(Ke);return Q.w(rt.date(rt.date()+Math.round(pt*qe)),Ke)};if(Je===M)return this.set(M,this.$M+qe);if(Je===E)return this.set(E,this.$y+qe);if(Je===A)return at(1);if(Je===_)return at(7);var nt=(je={},je[w]=m,je[C]=f,je[x]=d,je)[Je]||1,ct=this.$d.getTime()+qe*nt;return Q.w(ct,this)},Ye.subtract=function(qe,et){return this.add(-1*qe,et)},Ye.format=function(qe){var et=this,je=this.$locale();if(!this.isValid())return je.invalidDate||B;var Ke=qe||"YYYY-MM-DDTHH:mm:ssZ",Je=Q.z(this),at=this.$H,nt=this.$m,ct=this.$M,pt=je.weekdays,rt=je.months,ht=je.meridiem,yt=function(He,le,be,we){return He&&(He[le]||He(et,Ke))||be[le].slice(0,we)},wt=function(He){return Q.s(at%12||12,He,"0")},ft=ht||function(He,le,be){var we=He<12?"AM":"PM";return be?we.toLowerCase():we};return Ke.replace(F,function(He,le){return le||function(be){switch(be){case"YY":return String(et.$y).slice(-2);case"YYYY":return Q.s(et.$y,4,"0");case"M":return ct+1;case"MM":return Q.s(ct+1,2,"0");case"MMM":return yt(je.monthsShort,ct,rt,3);case"MMMM":return yt(rt,ct);case"D":return et.$D;case"DD":return Q.s(et.$D,2,"0");case"d":return String(et.$W);case"dd":return yt(je.weekdaysMin,et.$W,pt,2);case"ddd":return yt(je.weekdaysShort,et.$W,pt,3);case"dddd":return pt[et.$W];case"H":return String(at);case"HH":return Q.s(at,2,"0");case"h":return wt(1);case"hh":return wt(2);case"a":return ft(at,nt,!0);case"A":return ft(at,nt,!1);case"m":return String(nt);case"mm":return Q.s(nt,2,"0");case"s":return String(et.$s);case"ss":return Q.s(et.$s,2,"0");case"SSS":return Q.s(et.$ms,3,"0");case"Z":return Je}return null}(He)||Je.replace(":","")})},Ye.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ye.diff=function(qe,et,je){var Ke,Je=this,at=Q.p(et),nt=te(qe),ct=(nt.utcOffset()-this.utcOffset())*m,pt=this-nt,rt=function(){return Q.m(Je,nt)};switch(at){case E:Ke=rt()/12;break;case M:Ke=rt();break;case P:Ke=rt()/3;break;case _:Ke=(pt-ct)/6048e5;break;case A:Ke=(pt-ct)/864e5;break;case C:Ke=pt/f;break;case w:Ke=pt/m;break;case x:Ke=pt/d;break;default:Ke=pt}return je?Ke:Q.a(Ke)},Ye.daysInMonth=function(){return this.endOf(M).$D},Ye.$locale=function(){return q[this.$L]},Ye.locale=function(qe,et){if(!qe)return this.$L;var je=this.clone(),Ke=J(qe,et,!0);return Ke&&(je.$L=Ke),je},Ye.clone=function(){return Q.w(this.$d,this)},Ye.toDate=function(){return new Date(this.valueOf())},Ye.toJSON=function(){return this.isValid()?this.toISOString():null},Ye.toISOString=function(){return this.$d.toISOString()},Ye.toString=function(){return this.$d.toUTCString()},Ve}(),Xe=me.prototype;return te.prototype=Xe,[["$ms",g],["$s",x],["$m",w],["$H",C],["$W",A],["$M",M],["$y",E],["$D",R]].forEach(function(Ve){Xe[Ve[1]]=function(Ye){return this.$g(Ye,Ve[0],Ve[1])}}),te.extend=function(Ve,Ye){return Ve.$i||(Ve(Ye,me,te),Ve.$i=!0),te},te.locale=J,te.isDayjs=Z,te.unix=function(Ve){return te(1e3*Ve)},te.en=q[G],te.Ls=q,te.p={},te})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);class Sun{static deg2Rad(s){return Math.PI*s/180}static rad2Deg(s){return 180*s/Math.PI}static fixValue(s,d,m){for(;s<d;)s+=m-d;for(;s>=m;)s-=m-d;return s}static calculate(s,d,m,f,g,x=90.5){const w=dayjs(s).dayOfYear(),C=m/15;let A;f?A=w+(6-C)/24:A=w+(18-C)/24;const _=.9856*A-3.289;let M=_+1.916*Math.sin(this.deg2Rad(_))+.02*Math.sin(this.deg2Rad(2*_))+282.634;M=this.fixValue(M,0,360);let P=this.rad2Deg(Math.atan(.91764*Math.tan(this.deg2Rad(M))));P=this.fixValue(P,0,360);const E=Math.floor(M/90)*90,R=Math.floor(P/90)*90;P=P+(E-R),P=P/15;const B=.39782*Math.sin(this.deg2Rad(M)),z=Math.cos(Math.asin(B)),F=(Math.cos(this.deg2Rad(x))-B*Math.sin(this.deg2Rad(d)))/(z*Math.cos(this.deg2Rad(d)));let I;f?I=360-this.rad2Deg(Math.acos(F)):I=this.rad2Deg(Math.acos(F)),I=I/15;let W=I+P-.06571*A-6.622-C;s=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0));const G=new Date(s.getTime()+W*60*60*1e3);return W=(g(G).getTime()-s.getTime())/(60*60*1e3),W=this.fixValue(W,0,24),new Date(s.getTime()+W*60*60*1e3)}}const defaultValues$1=()=>createExample$2(7,void 0),stringFormat$1=()=>{const a=getDateService();return createExample$2(7,s=>a.format(s,`MMM DD
YYYY`))};function createExample$2(a,s){const d=new PlotModel,m=new Date(2e3,0,1),f=DateTimeAxis.toDouble(m),g=f+a;return d.axes.push(new DateTimeAxis({position:AxisPosition.Bottom,minimum:f,maximum:g,stringFormatter:s})),d.axes.push(new DateTimeAxis({position:AxisPosition.Left,minimum:f,maximum:g,stringFormatter:s})),d}function daylightSavingsBreak(){const a=new PlotModel,s=new DateTimeAxis;s.position=AxisPosition.Bottom,a.axes.push(s),a.axes.push(new LinearAxis);const d=new LineSeries;d.markerType=MarkerType.Circle,a.series.push(d);const m=new Date(Date.UTC(2013,2,31,0,0,0));for(let f=0;f<400;f+=10){const g=new Date(m.getTime()+f*6e4);d.points.push(DateTimeAxis.createDataPoint(g,f))}return a}function dateTimeAxisPlotModel(){const a=new Date(2010,0,1),s=new Date(2015,0,1),d=3600*24*14,m=getDateService(),f=[];let g=a;const x=new Random;for(;g<=s;)f.push({date:g,value:x.next()}),g=m.addTimespan(g,TimeSpan.fromSeconds(d));const w=new PlotModel({title:"DateTime axis"}),C=new DateTimeAxis({firstDayOfWeek:DayOfWeek.Monday,position:AxisPosition.Bottom});w.axes.push(C);const A=new LinearAxis;w.axes.push(A);const _=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6),markerStroke:OxyColors.ForestGreen,markerType:MarkerType.Plus,strokeThickness:1,dataFieldX:"date",dataFieldY:"value",itemsSource:f});return w.series.push(_),w}function sunriseAndSunsetInOslo(){const a=new Date().getFullYear(),d=createSunData(a,59.91,10.75,C=>{const A=isDaylightSaving(C)?2:1;return new Date(C.getTime()+A*60*60*1e3)}),m=new PlotModel({title:"Sunrise and sunset in Oslo",subtitle:"UTC time"}),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=new DateTimeAxis({firstDayOfWeek:DayOfWeek.Monday,intervalType:DateTimeIntervalType.Months,majorGridlineStyle:LineStyle.Solid,position:AxisPosition.Bottom,stringFormatter:C=>f[C.getMonth()]});m.axes.push(g);const x=new TimeSpanAxis({majorGridlineStyle:LineStyle.Solid,maximum:86400,minimum:0,stringFormatter:C=>formatTimeSpan(C,"hh:mm")});m.axes.push(x);const w=new AreaSeries({itemsSource:d,dataFieldX:"Day",dataFieldY:"Sunrise",dataFieldX2:"Day",dataFieldY2:"Sunset",fill:OxyColor.fromArgb(128,255,255,0),color:OxyColors.Black});return m.series.push(w),m}function labelFormatter(){const a=new PlotModel({title:"Using LabelFormatter to format labels by day of week"});a.axes.push(new DateTimeAxis({labelFormatter:d=>DateTimeAxis.toDateTime(d).getDay().toString().substring(0,3)}));const s=new LineSeries;a.series.push(s);for(let d=0;d<7;d++){const m=new Date(2014,9,10);m.setDate(m.getDate()+d);const f=DateTimeAxis.toDouble(m),g=Math.sin(d*d);s.points.push(new DataPoint(f,g))}return a}function createSunData(a,s,d,m){const f=[];let g=new Date(a,0,1);const x=TimeSpan.fromMinutes(g.getTimezoneOffset()),w=getDateService();for(;g.getFullYear()===a;){let C=Sun.calculate(g,s,d,!0,m);C=w.addTimespan(C,x);let A=Sun.calculate(g,s,d,!1,m);A=w.addTimespan(A,x),f.push({Day:g,Sunrise:w.diff(C,g),Sunset:w.diff(A,g)}),g=w.addTimespan(g,TimeSpan.fromDays(1))}return f}function isDaylightSaving(a){const s=new Date(a.getFullYear(),2,31,2,0,0);s.setDate(s.getDate()-s.getDay());const d=new Date(a.getFullYear(),9,31,3,0,0);return d.setDate(d.getDate()-d.getDay()),a>=s&&a<=d}const category$I="DateTimeAxis",DateTimeAxisExamples={category:category$I,tags:["Axes"],examples:[{title:"Default StringFormat",example:{model:defaultValues$1}},{title:"StringFormat 'MMM DD\\nYYYY'",example:{model:stringFormat$1}},{title:"TimeZone adjustments",example:{model:daylightSavingsBreak}},{title:"DateTime axis",example:{model:dateTimeAxisPlotModel}},{title:"Sunrise and sunset in Oslo",example:{model:sunriseAndSunsetInOslo}},{title:"LabelFormatter",example:{model:labelFormatter}}]};function stringFormat(){return createExample$1(123456.78901234567,1.2345678901234567e6,void 0)}function stringFormatF2(){return createExample$1(123456.78901234567,1.2345678901234567e6,(a,s)=>a.toFixed(2))}function tickStyleNone(){return createTickStyleModel(TickStyle.None)}function tickStyleCrossing(){return createTickStyleModel(TickStyle.Crossing)}function tickStyleInside(){return createTickStyleModel(TickStyle.Inside)}function tickStyleOutside(){return createTickStyleModel(TickStyle.Outside)}function gridlinesNone(){return createGridlinesModel("None",LineStyle.None,LineStyle.None)}function gridlinesHorizontal(){return createGridlinesModel("Horizontal",LineStyle.Solid,LineStyle.None)}function gridlinesVertical(){return createGridlinesModel("Vertical",LineStyle.None,LineStyle.Solid)}function gridlinesBoth(){return createGridlinesModel("Both",LineStyle.Solid,LineStyle.Solid)}function createExample$1(a,s,d){const m=new PlotModel;return m.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:a,maximum:s,stringFormatter:d})),m.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:a,maximum:s,stringFormatter:d})),m}function createTickStyleModel(a){const s=new PlotModel({title:`TickStyle: ${a}`});return s.axes.push(new LinearAxis({position:AxisPosition.Bottom,tickStyle:a,majorGridlineStyle:LineStyle.None,minorGridlineStyle:LineStyle.None,maximumPadding:0,minimumPadding:0})),s.axes.push(new LinearAxis({position:AxisPosition.Left,tickStyle:a,majorGridlineStyle:LineStyle.None,minorGridlineStyle:LineStyle.None,maximumPadding:0,minimumPadding:0})),s}function createGridlinesModel(a,s,d){const m=new PlotModel({title:`Gridlines: ${a}`});return m.axes.push(new LinearAxis({position:AxisPosition.Bottom,majorGridlineStyle:d,minorGridlineStyle:d===LineStyle.Solid?LineStyle.Dot:LineStyle.None,maximumPadding:0,minimumPadding:0})),m.axes.push(new LinearAxis({position:AxisPosition.Left,majorGridlineStyle:s,minorGridlineStyle:s===LineStyle.Solid?LineStyle.Dot:LineStyle.None,maximumPadding:0,minimumPadding:0})),m}const category$H="LinearAxis",LinearAxisExamples={category:category$H,tags:["Axes"],examples:[{title:"Default StringFormat ('g6')",example:{model:stringFormat}},{title:"StringFormat = 'f2'",example:{model:stringFormatF2}},{title:"TickStyle: None",example:{model:tickStyleNone}},{title:"TickStyle: Crossing",example:{model:tickStyleCrossing}},{title:"TickStyle: Inside",example:{model:tickStyleInside}},{title:"TickStyle: Outside",example:{model:tickStyleOutside}},{title:"Gridlines: None",example:{model:gridlinesNone}},{title:"Gridlines: Horizontal",example:{model:gridlinesHorizontal}},{title:"Gridlines: Vertical",example:{model:gridlinesVertical}},{title:"Gridlines: Both",example:{model:gridlinesBoth}}]};function peaks$1(){return _createHeatMapPeaks()}function interpolated(){return _createExample("Interpolated",!0)}function interpolatedCartesian(){const a=_createExample("Interpolated, cartesian axes",!0);return a.plotType=PlotType.Cartesian,a}function interpolatedWithNanValue(){const a=_createExample("Interpolated including two NaN values",!0),s=a.series[0];return s.data[0][1]=Number.NaN,s.data[1][0]=Number.NaN,a}function interpolatedWithNanValueFlat(){const a=_createExample("Interpolated including two NaN values, otherwise 4.71",!0),d=a.series[0].data,m=4.71;return d[0][0]=m,d[0][1]=m,d[0][2]=m,d[1][0]=m,d[1][1]=m,d[1][2]=m,d[0][1]=Number.NaN,d[1][0]=Number.NaN,a}function notInterpolated(){return _createExample("Not interpolated values",!1)}function notInterpolatedWithNanValue(){const a=_createExample("Not interpolated values including two NaN values",!1),s=a.axes[0];s.invalidNumberColor=OxyColors.Transparent;const d=a.series[0];return d.data[0][1]=Number.NaN,d.data[1][0]=Number.NaN,a}function notInterpolatedWithNanValueFlat(){const a=_createExample("Not interpolated values including two NaN values, otherwise 4.71",!1),s=a.axes[0];s.invalidNumberColor=OxyColors.Transparent;const d=a.series[0];if(!d.data)return a;const m=4.71;return d.data[0][0]=m,d.data[0][1]=m,d.data[0][2]=m,d.data[1][0]=m,d.data[1][1]=m,d.data[1][2]=m,d.data[0][1]=Number.NaN,d.data[1][0]=Number.NaN,a}function notInterpolatedReversedX(){const a=_createExample("Reversed x-axis",!1);return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,startPosition:1,endPosition:0})),a}function x0GreaterThanX1(){const a=_createExample("X0>X1",!1),s=a.series[0],d=s.x0;return s.x0=s.x1,s.x1=d,a}function reversedX_X0GreaterThanX1(){const a=_createExample("Reversed x-axis, X0>X1",!1);a.axes.push(new LinearAxis({position:AxisPosition.Bottom,startPosition:1,endPosition:0}));const s=a.series[0],d=s.x0;return s.x0=s.x1,s.x1=d,a}function notInterpolatedReversedY(){const a=_createExample("Reversed y-axis",!1);return a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0})),a}function y0GreaterThanY1(){const a=_createExample("Y0>Y1",!1),s=a.series[0],d=s.y0;return s.y0=s.y1,s.y1=d,a}function reversedY_Y0GreaterThanY1(){const a=_createExample("Reversed y-axis, Y0>Y1",!1);a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0}));const s=a.series[0],d=s.y0;return s.y0=s.y1,s.y1=d,a}function notInterpolatedReversedXY(){const a=_createExample("Reversed x- and y-axis",!1);return a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,startPosition:1,endPosition:0})),a}function diagonal(){const a=[[1,0,0],[0,1,0],[0,0,1]],s=new PlotModel({title:"Diagonal (center defined)"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black}));const d=new HeatMapSeries({coordinateDefinition:HeatMapCoordinateDefinition.Center,x0:.5,x1:2.5,y0:2.5,y1:.5,data:a,interpolate:!1});return s.series.push(d),s}function diagonal2(){const a=[[1,0,0],[0,1,0],[0,0,1]],s=new PlotModel({title:"Diagonal (edge defined)"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black}));const d=new HeatMapSeries({coordinateDefinition:HeatMapCoordinateDefinition.Edge,x0:0,x1:3,y0:3,y1:0,data:a,interpolate:!1});return s.series.push(d),s}function diagonal_6X6(){const a=Array(6).fill(Array(6).fill(0));a[0][0]=1,a[1][1]=1,a[2][2]=1,a[3][3]=1,a[4][4]=1,a[5][5]=1;const s=new PlotModel({title:"Diagonal 66"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black}));const d=new HeatMapSeries({x0:0,x1:5,y0:5,y1:0,data:a,interpolate:!1});return s.series.push(d),s}function confusionMatrix(){let a=[[1,0,0],[0,.8,.2],[0,0,1]];a=a[0].map((C,A)=>a.map(_=>_[A]));const s=["class A","class B","class C"],d=new PlotModel({title:"Confusion Matrix"}),m=OxyPalette.interpolate(50,OxyColors.White,OxyColors.Black),f=new LinearColorAxis({position:AxisPosition.Right,palette:m,highColor:OxyColors.White,lowColor:OxyColors.White});d.axes.push(f);const g=new CategoryAxis({position:AxisPosition.Top,title:"Actual class"});g.labels.push(...s),d.axes.push(g);const x=new CategoryAxis({position:AxisPosition.Left,title:"Predicted class",angle:-90,startPosition:1,endPosition:0});x.labels.push(...s),d.axes.push(x);const w=new HeatMapSeries({data:a,interpolate:!1,labelFontSize:.25,x0:0,x1:a[0].length-1,y0:0,y1:a.length-1});return d.series.push(w),d}function logXInterpolated(){const a=Array(11).fill(0).map(()=>Array(21).fill(0)),s=Math.pow(2,.1);for(let f=0;f<11;f++)for(let g=0;g<21;g++)a[f][g]=Math.pow(s,f)*g/40;const d=new PlotModel({title:"Logarithmic X, interpolated"});d.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom})),d.axes.push(new LinearAxis({position:AxisPosition.Left})),d.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.gray(500),highColor:OxyColors.White,lowColor:OxyColors.Black}));const m=new HeatMapSeries({x0:1,x1:2,y0:0,y1:20,data:a,interpolate:!0});return d.series.push(m),d}function logXNotInterpolated(){const a=Array(11).fill(0).map(()=>Array(21).fill(0)),s=Math.pow(2,.1);for(let f=0;f<11;f++)for(let g=0;g<21;g++)a[f][g]=Math.pow(s,f)*g/40;const d=new PlotModel({title:"Logarithmic X, discrete rectangles"});d.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom})),d.axes.push(new LinearAxis({position:AxisPosition.Left})),d.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.gray(500),highColor:OxyColors.White,lowColor:OxyColors.Black}));const m=new HeatMapSeries({x0:1,x1:2,y0:0,y1:20,data:a,interpolate:!1,renderMethod:HeatMapRenderMethod.Rectangles,labelFontSize:.4});return d.series.push(m),d}function normal_6X4(){return _create6X4("Normal 64 Heatmap")}function _createHeatMapPeaks(a,s=!0,d=100){const w=(E,R)=>3*(1-E)*(1-E)*Math.exp(-(E*E)-(R+1)*(R+1))-10*(E/5-E*E*E-R*R*R*R*R)*Math.exp(-E*E-R*R)-.3333333333333333*Math.exp(-(E+1)*(E+1)-R*R),C=ArrayBuilder.createVector(-3.1,3.1,d),A=ArrayBuilder.createVector(-3,3,d),_=ArrayBuilder.evaluate(w,C,A),M=new PlotModel({title:"Peaks"});M.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:a??OxyPalettes.jet(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black}));const P=new HeatMapSeries({x0:-3.1,x1:3.1,y0:-3,y1:3,data:_});if(M.series.push(P),s){const E=new ContourSeries({color:OxyColors.Black,fontSize:0,contourLevelStep:1,labelBackground:OxyColors.Undefined,columnCoordinates:A,rowCoordinates:C,data:_});M.series.push(E)}return M}function _create6X4(a){const s=new TwoDimensionalArray(6,4);for(let m=1;m<=6;m++)for(let f=1;f<=4;f++)s.set(m-1,f-1,m*f);const d=new PlotModel({title:a,subtitle:"Note the positions of the axes"});return d.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(500),highColor:OxyColors.White,lowColor:OxyColors.Black})),d.series.push(new HeatMapSeries({x0:1,x1:6,y0:1,y1:4,data:s.toArray(),interpolate:!0,labelFontSize:.2})),d}function _createExample(a,s){const d=[[0,.2,.4],[.1,.3,.2]],m=new PlotModel({title:"HeatMapSeries",subtitle:a});m.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.rainbow(500),highColor:OxyColors.Gray,lowColor:OxyColors.Black}));const f=new HeatMapSeries({coordinateDefinition:HeatMapCoordinateDefinition.Center,x0:.5,x1:1.5,y0:.5,y1:2.5,data:d,interpolate:s,labelFontSize:.2});return m.series.push(f),m}const HeatMapSeriesExamples={createPeaks:_createHeatMapPeaks},category$G="HeatMapSeries",HeatMapSeriesExamples$1={category:category$G,tags:["Series"],examples:[{title:"Peaks",example:{model:peaks$1}},{title:"23, interpolated",example:{model:interpolated}},{title:"23, interpolated, cartesian axes",example:{model:interpolatedCartesian}},{title:"23, interpolated with two NaN values",example:{model:interpolatedWithNanValue}},{title:"23, interpolated with two NaN values, flat data",example:{model:interpolatedWithNanValueFlat}},{title:"23, not interpolated",example:{model:notInterpolated}},{title:"23, not interpolated with two NaN values",example:{model:notInterpolatedWithNanValue}},{title:"23, not interpolated with two NaN values, flat data",example:{model:notInterpolatedWithNanValueFlat}},{title:"23, reversed x-axis",example:{model:notInterpolatedReversedX}},{title:"23, X0>X1",example:{model:x0GreaterThanX1}},{title:"23, reversed x-axis, X0>X1",example:{model:reversedX_X0GreaterThanX1}},{title:"23, reversed y-axis",example:{model:notInterpolatedReversedY}},{title:"23, Y0>Y1",example:{model:y0GreaterThanY1}},{title:"23, reversed y-axis, Y0>Y1",example:{model:reversedY_Y0GreaterThanY1}},{title:"2x3, reversed x- and y-axis",example:{model:notInterpolatedReversedXY}},{title:"33, diagonal (center defined)",example:{model:diagonal}},{title:"33, diagonal (edge defined)",example:{model:diagonal2}},{title:"66, diagonal",example:{model:diagonal_6X6}},{title:"Confusion matrix",example:{model:confusionMatrix}},{title:"Logarithmic X, interpolated",example:{model:logXInterpolated}},{title:"Logarithmic X, discrete rectangles",example:{model:logXNotInterpolated}},{title:"64, not transposed",example:{model:normal_6X4}}]};function defaultPalette(){const a=HeatMapSeriesExamples.createPeaks(void 0,!1);return a.axes.length=0,a.axes.push(new LinearColorAxis({position:AxisPosition.Right})),a}function jet200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(200),!1)}function jet20(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(20),!1)}function hue400(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hue(400),!1)}function hueDistinct200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hueDistinct(200),!1)}function hueDistinctReverse200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hueDistinct(200).reverse(),!1)}function hot200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hot(200),!1)}function hot64(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hot64,!1)}function hot30(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.hot(30),!1)}function blueWhiteRed200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.blueWhiteRed(200),!1)}function blueWhiteRed40(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.blueWhiteRed(40),!1)}function blackWhiteRed500(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.blackWhiteRed(500),!1)}function blackWhiteRed3(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.blackWhiteRed(3),!1)}function cool200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.cool(200),!1)}function rainbow200(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.rainbow(200),!1)}function viridis(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.viridis(),!1)}function plasma(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.plasma(),!1)}function magma(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.magma(),!1)}function inferno(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.inferno(),!1)}function cividis(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.cividis(),!1)}function viridis10(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.viridis(10),!1)}function rainbow7(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.rainbow(7),!1)}function vertical_6(){return HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(6),!1)}function vertical_Reverse_6(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(6),!1),s=a.axes[0];return s.startPosition=1,s.endPosition=0,a}function horizontal_6(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(6),!1),s=a.axes[0];return s.position=AxisPosition.Top,a}function horizontal_Reverse_6(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(6),!1),s=a.axes[0];return s.position=AxisPosition.Top,s.startPosition=1,s.endPosition=0,a}function renderAsImage_Horizontal(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(1e3),!1),s=a.axes[0];return s.renderAsImage=!0,s.position=AxisPosition.Top,a}function renderAsImage_Horizontal_Reversed(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(1e3),!1),s=a.axes[0];return s.renderAsImage=!0,s.position=AxisPosition.Top,s.startPosition=1,s.endPosition=0,a}function renderAsImage_Vertical(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(1e3),!1),s=a.axes[0];return s.renderAsImage=!0,a}function renderAsImage_Vertical_Reversed(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(1e3),!1),s=a.axes[0];return s.renderAsImage=!0,s.startPosition=1,s.endPosition=0,a}function vertical_Short(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(600),!1),s=a.axes[0];return s.startPosition=.02,s.endPosition=.5,a}function position_None(){const a=HeatMapSeriesExamples.createPeaks(OxyPalettes.jet(600),!1),s=a.axes[0];return s.position=AxisPosition.None,a}const category$F="LinearColorAxis",LinearColorAxisExamples={category:category$F,tags:["Axes"],examples:[{title:"Default palette",example:{model:defaultPalette}},{title:"Jet (200 colors) palette",example:{model:jet200}},{title:"Jet (20 colors) palette",example:{model:jet20}},{title:"Hue (400 colors) palette",example:{model:hue400}},{title:"Hue distinct (200 colors) palette",example:{model:hueDistinct200}},{title:"Hue distinct reversed (200 colors) palette",example:{model:hueDistinctReverse200}},{title:"Hot (200 colors) palette",example:{model:hot200}},{title:"Hot (64 colors) palette",example:{model:hot64}},{title:"Hot (30 colors) palette",example:{model:hot30}},{title:"Blue-white-red (200 colors) palette",example:{model:blueWhiteRed200}},{title:"Blue-white-red (40 colors) palette",example:{model:blueWhiteRed40}},{title:"Black-white-red (500 colors) palette",example:{model:blackWhiteRed500}},{title:"Black-white-red (3 colors) palette",example:{model:blackWhiteRed3}},{title:"Cool (200 colors) palette",example:{model:cool200}},{title:"Rainbow (200 colors) palette",example:{model:rainbow200}},{title:"Viridis palette",example:{model:viridis}},{title:"Plasma palette",example:{model:plasma}},{title:"Magma palette",example:{model:magma}},{title:"Inferno palette",example:{model:inferno}},{title:"Cividis palette",example:{model:cividis}},{title:"Viridis (10 colors) palette",example:{model:viridis10}},{title:"Rainbow (7 colors) palette",example:{model:rainbow7}},{title:"Vertical (6 colors)",example:{model:vertical_6}},{title:"Vertical reverse (6 colors)",example:{model:vertical_Reverse_6}},{title:"Horizontal (6 colors)",example:{model:horizontal_6}},{title:"Horizontal reverse (6 colors)",example:{model:horizontal_Reverse_6}},{title:"RenderAsImage (horizontal)",example:{model:renderAsImage_Horizontal}},{title:"RenderAsImage (horizontal reversed)",example:{model:renderAsImage_Horizontal_Reversed}},{title:"RenderAsImage (vertical)",example:{model:renderAsImage_Vertical}},{title:"RenderAsImage (vertical reversed)",example:{model:renderAsImage_Vertical_Reversed}},{title:"Short vertical",example:{model:vertical_Short}},{title:"Position None",example:{model:position_None}}]};function defaultValues(){const a=new PlotModel;return a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left})),a}function amdahlsLaw(){const a=new PlotModel({title:"Amdahl's law"}),s=new Legend({legendTitle:"Parallel portion"});a.legends.push(s);const d=(f,g)=>1/(1-f+f/g),m=f=>{const g=new LineSeries({title:f.toFixed(0)});for(let x=1;x<=65536;x*=2)g.points.push(new DataPoint(x,d(f,x)));return g};return a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,title:"Number of processors",base:2,majorGridlineStyle:LineStyle.Solid,tickStyle:TickStyle.None})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:20,minorStep:2,majorStep:2,title:"Speedup",stringFormatter:f=>f.toFixed(2).toString(),majorGridlineStyle:LineStyle.Solid,tickStyle:TickStyle.None})),a.series.push(m(.5)),a.series.push(m(.75)),a.series.push(m(.9)),a.series.push(m(.95)),a}function richterMagnitudes(){const a=new PlotModel({title:"The Richter magnitude scale",plotMargins:new OxyThickness(80,0,80,40)}),s=new Legend({legendPlacement:LegendPlacement.Inside,legendPosition:LegendPosition.TopCenter,legendOrientation:LegendOrientation.Horizontal,legendSymbolLength:24});a.legends.push(s),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Richter magnitude scale",majorGridlineStyle:LineStyle.None,tickStyle:TickStyle.None}));const d=new LineSeries({title:"Frequency",color:OxyColor.fromUInt32(4282150046),strokeThickness:3,markerStroke:OxyColor.fromUInt32(4282150046),markerFill:OxyColors.White,markerType:MarkerType.Circle,markerSize:4,markerStrokeThickness:3});d.points.push(new DataPoint(1.5,8e3*365*100)),d.points.push(new DataPoint(2.5,1e3*365*100)),d.points.push(new DataPoint(3.5,49e3*100)),d.points.push(new DataPoint(4.5,6200*100)),d.points.push(new DataPoint(5.5,800*100)),d.points.push(new DataPoint(6.5,120*100)),d.points.push(new DataPoint(7.5,18*100)),d.points.push(new DataPoint(8.5,1*100)),d.points.push(new DataPoint(9.5,1/20*100)),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left,title:"Frequency / 100 yr",useSuperExponentialFormat:!0,majorGridlineStyle:LineStyle.None,tickStyle:TickStyle.Outside})),a.series.push(d);const m=new LineSeries({title:"Energy",color:OxyColor.fromUInt32(4288572476),strokeThickness:3,markerStroke:OxyColor.fromUInt32(4288572476),markerFill:OxyColors.White,markerType:MarkerType.Circle,markerSize:4,markerStrokeThickness:3});return m.points.push(new DataPoint(1.5,11e6)),m.points.push(new DataPoint(2.5,36e7)),m.points.push(new DataPoint(3.5,11e9)),m.points.push(new DataPoint(4.5,36e10)),m.points.push(new DataPoint(5.5,11e12)),m.points.push(new DataPoint(6.5,36e13)),m.points.push(new DataPoint(7.5,11e15)),m.points.push(new DataPoint(8.5,36e16)),m.points.push(new DataPoint(9.5,11e18)),m.yAxisKey="energyAxis",a.axes.push(new LogarithmicAxis({position:AxisPosition.Right,title:"Energy / J",key:"energyAxis",useSuperExponentialFormat:!0,majorGridlineStyle:LineStyle.None,tickStyle:TickStyle.Outside})),a.series.push(m),a}const absoluteMaximum=()=>{const a=new PlotModel({title:"AbsoluteMaximum = 1000"});return a.axes.push(new LogarithmicAxis({position:AxisPosition.Left,minimum:.1,maximum:1e3,absoluteMaximum:1e3})),a.series.push(new FunctionSeries({f:Math.exp,x0:0,x1:Math.log(900),n:100})),a},axisChangedEventHAndler=()=>{const a=new PlotModel({title:"AxisChanged event handler"});let s=0;const d=new LogarithmicAxis({position:AxisPosition.Left,minimum:.1,maximum:1e3});return d.axisChanged=(m,f)=>{a.subtitle="Changed "+s+++" times. ActualMaximum="+d.actualMaximum},a.axes.push(d),a.series.push(new FunctionSeries({f:Math.exp,x0:0,x1:Math.log(900),n:100})),a},negativeValues=()=>{const a=new PlotModel({title:"LogarithmicAxis",subtitle:"LineSeries with negative values"});return a.axes.push(new LogarithmicAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.series.push(new FunctionSeries({f:s=>Math.sin(s),x0:0,x1:40,n:1e3})),a};function tickCalculation(){const a=new PlotModel({title:"Tick calculation for different bases"});return a.axes.push(new LogarithmicAxis({title:"Base 10",position:AxisPosition.Left,minimum:20,maximum:2e4,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new LogarithmicAxis({title:"Base 7",position:AxisPosition.Bottom,base:7,minimum:2,maximum:1e4,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new LogarithmicAxis({title:"Base 5.5",position:AxisPosition.Top,base:5.5,minimum:1,maximum:100,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new LogarithmicAxis({title:"Base 2",position:AxisPosition.Right,base:2,minimum:1,maximum:1e6,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a}const category$E="LogarithmicAxis",LogarithmicAxisExamples={category:category$E,tags:["Axes"],examples:[{title:"LogarithmicAxis with default values",example:{model:defaultValues}},{title:"Amdahl's Law",example:{model:amdahlsLaw}},{title:"Richter magnitudes",example:{model:richterMagnitudes}},{title:"LogarithmicAxis with AbsoluteMaximum",example:{model:absoluteMaximum}},{title:"LogarithmicAxis with AxisChanged event handler",example:{model:axisChangedEventHAndler}},{title:"Negative values",example:{model:negativeValues}},{title:"Tick calculation",example:{model:tickCalculation}}]};function archimedeanSpiral(){const a=new PlotModel({title:"Polar plot",subtitle:"Archimedean spiral with equation r() =  for 0 <  < 6",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({majorStep:Math.PI/4,minorStep:Math.PI/16,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:"",minimum:0,maximum:2*Math.PI})),a.axes.push(new MagnitudeAxis({majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:0,t1:Math.PI*6,dt:.01})),a}function archimedeanSpiral2(){const a=archimedeanSpiral();a.title+="(reversed angle axis)";const s=a.axes[0];return s.startAngle=360,s.endAngle=0,a}function archimedeanSpiral3(){const a=archimedeanSpiral();a.title+=" (axis Minimum = 10 and Maximum = 20)";const s=a.axes[1];return s.minimum=10,s.maximum=20,a}function offsetAngles(){const a=new PlotModel({title:"Offset angle axis",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)}),s=new AngleAxis({minimum:0,maximum:Math.PI*2,majorStep:Math.PI/4,minorStep:Math.PI/16,stringFormatter:d=>d.toFixed(2),startAngle:30,endAngle:390});return a.axes.push(s),a.axes.push(new MagnitudeAxis),a.series.push(new FunctionSeries({fx:d=>d,fy:d=>d,t0:0,t1:Math.PI*6,dt:.01})),a.mouseDown=(d,m)=>{let f=0;m.changedButton===OxyMouseButton.Left&&(f=15),m.changedButton===OxyMouseButton.Right&&(f=-15),Math.abs(f)>Number.EPSILON&&(s.startAngle+=f,s.endAngle+=f,a.invalidatePlot(!1),m.handled=!0)},a}function semiCircle(){const a=new PlotModel({title:"Semi-circle polar plot",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({minimum:0,maximum:180,majorStep:45,minorStep:9,startAngle:0,endAngle:180,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new MagnitudeAxis({minimum:0,maximum:1,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.series.push(circleFunctionSeries()),a}function semiCircleOffsetAngleAxisRange(){const a=new PlotModel({title:"Semi-circle polar plot",subtitle:"Angle axis range offset to -180 - 180",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({minimum:-180,maximum:180,majorStep:45,minorStep:9,startAngle:0,endAngle:360,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new MagnitudeAxis({minimum:0,maximum:1,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.series.push(circleFunctionSeries()),a}function eastWestDirections(){const a=new PlotModel({title:"East/west directions",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new AngleAxis({minimum:0,maximum:360,majorStep:30,minorStep:30,startAngle:-90,endAngle:270,labelFormatter:s=>s>0&&s<180?`${s}E`:s>180?`${360-s}W`:s.toString(),majorGridlineStyle:LineStyle.Dot,minorGridlineStyle:LineStyle.None})),a.axes.push(new MagnitudeAxis({minimum:0,maximum:1,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.series.push(circleFunctionSeries()),a}function semiCircleFullPlotArea(){const a=new PlotModel({title:"Semi-circle polar plot filling the plot area",subtitle:"The center can be moved using the right mouse button",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(1)});return a.axes.push(new AngleAxisFullPlotArea({minimum:0,maximum:180,majorStep:45,minorStep:9,startAngle:0,endAngle:180,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.axes.push(new MagnitudeAxisFullPlotArea({minimum:0,maximum:1,midShiftH:0,midShiftV:.9,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a.series.push(circleFunctionSeries()),a}function archimedeanSpiralFullPlotArea(){const a=createFullPlotAreaPlotModel();return a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:0,t1:Math.PI*6,dt:.01})),a}function spiralWithNegativeMinium(){const a=createFullPlotAreaPlotModel();return a.title+=" with a negative minimum",a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:-Math.PI*6,t1:Math.PI*6,dt:.01})),a}function spiralWithPositiveMinium(){const a=createFullPlotAreaPlotModel();return a.title+=" with a positive minimum",a.series.push(new FunctionSeries({fx:s=>s,fy:s=>s,t0:Math.PI*6,t1:Math.PI*12,dt:.01})),a}function createFullPlotAreaPlotModel(){const a=new PlotModel({title:"Polar plot filling the plot area",subtitle:"The center can be move using the right mouse button",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(1)});return a.axes.push(new AngleAxisFullPlotArea({majorStep:Math.PI/4,minorStep:Math.PI/16,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:"",minimum:0,maximum:2*Math.PI})),a.axes.push(new MagnitudeAxisFullPlotArea({midShiftH:-.1,midShiftV:-.25,majorGridlineStyle:LineStyle.Solid,minorGridlineStyle:LineStyle.Solid})),a}const circleFunctionSeries=()=>new FunctionSeries({fx:a=>Math.sin(a/180*Math.PI),fy:a=>a,t0:0,t1:180,dt:.01}),category$D="Polar Plots",PolarPlotExamples={category:category$D,tags:["Axes"],examples:[{title:"Spiral",example:{model:archimedeanSpiral}},{title:"Spiral2",example:{model:archimedeanSpiral2}},{title:"Spiral with magnitude axis min and max",example:{model:archimedeanSpiral3}},{title:"Angle axis with offset angle",example:{model:offsetAngles}},{title:"Semi-circle",example:{model:semiCircle}},{title:"Semi-circle offset angle axis range",example:{model:semiCircleOffsetAngleAxisRange}},{title:"East/west directions",example:{model:eastWestDirections}},{title:"Semi-circle full plot area",example:{model:semiCircleFullPlotArea}},{title:"Spiral full plot area",example:{model:archimedeanSpiralFullPlotArea}},{title:"Spiral full plot area with negative minimum",example:{model:spiralWithNegativeMinium}},{title:"Spiral full plot area with positive minimum",example:{model:spiralWithPositiveMinium}}]};function reversedHorizontalRangeColorAxis(){return rangeColorAxis(AxisPosition.Top,!0)}function reversedVerticalRangeColorAxis(){return rangeColorAxis(AxisPosition.Right,!0)}function horizontalRangeColorAxis(){return rangeColorAxis(AxisPosition.Top,!1)}function verticalRangeColorAxis(){return rangeColorAxis(AxisPosition.Right,!1)}function rangeColorAxis(a,s){const m=s?"ScatterSeries and Reversed RangeColorAxis (n=1000)":"ScatterSeries and RangeColorAxis (n=1000)",f=new PlotModel({title:m,background:OxyColors.LightGray});f.axes.push(new LinearAxis({position:AxisPosition.Bottom})),f.axes.push(new LinearAxis({position:AxisPosition.Left}));const g=new RangeColorAxis({position:a,maximum:2,minimum:-2});g.addRange(0,.5,OxyColors.Blue),g.addRange(-.2,-.1,OxyColors.Red),s&&(g.startPosition=1,g.endPosition=0),f.axes.push(g);const x=new ScatterSeries({markerType:MarkerType.Square,markerSize:6}),w=new Random;for(let C=0;C<1e3;C++){const A=w.next()*2.2-1.1;x.points.push({x:A,y:w.next(),value:A})}return f.series.push(x),f}const category$C="RangeColorAxis",RangeColorAxisExamples={category:category$C,tags:["Axes"],examples:[{title:"ScatterSeries with Reversed RangeColorAxis (Horizontal)",example:{model:reversedHorizontalRangeColorAxis}},{title:"ScatterSeries with Reversed  RangeColorAxis (Vertical)",example:{model:reversedVerticalRangeColorAxis}},{title:"ScatterSeries with RangeColorAxis (Horizontal)",example:{model:horizontalRangeColorAxis}},{title:"ScatterSeries with RangeColorAxis (Vertical)",example:{model:verticalRangeColorAxis}}]};function timeSpanaxisPlotModelDefault(){return timeSpanAxisPlotModel(void 0)}function timeSpanaxisPlotModel1(){return timeSpanAxisPlotModel(a=>`${formatTimeSpan(a,"hh:mm")}`)}function timeSpanAxisPlotModel(a){const f=[];let g=0;const x=new Random;for(;g<=86400;)f.push({time:g,value:x.next()}),g+=3600;const w=new PlotModel({title:"TimeSpan axis"}),C=new TimeSpanAxis({position:AxisPosition.Bottom,stringFormatter:a});w.axes.push(C);const A=new LinearAxis({position:AxisPosition.Left});w.axes.push(A);const _=new LineSeries({color:OxyColor.fromArgb(255,78,154,6),markerFill:OxyColor.fromArgb(255,78,154,6),markerStroke:OxyColors.ForestGreen,markerType:MarkerType.Plus,strokeThickness:1,dataFieldX:"time",dataFieldY:"value",itemsSource:f});return w.series.push(_),w}const category$B="TimeSpanAxis",TimeSpanAxisExamples={category:category$B,tags:["Axes"],examples:[{title:"Default StringFormat",example:{model:timeSpanaxisPlotModelDefault}},{title:"StringFormat = 'h:mm'",example:{model:timeSpanaxisPlotModel1}}]},Axes=[AxisExamples,CartesianAxesExamples,CategoryAxisExamples,CategoryColorAxisExamples,CustomAxisExamples,DateTimeAxisExamples,LinearAxisExamples,LinearColorAxisExamples,LogarithmicAxisExamples,PolarPlotExamples,RangeColorAxisExamples,TimeSpanAxisExamples];function filteringInvalidPoints(){const a=new PlotModel({title:"Filtering NaN points"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new LineSeries;return s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(1,0)),s.points.push(new DataPoint(2,10)),s.points.push(new DataPoint(NaN,20)),s.points.push(new DataPoint(3,10)),s.points.push(new DataPoint(4,0)),s.points.push(new DataPoint(4.5,NaN)),s.points.push(new DataPoint(5,0)),s.points.push(new DataPoint(7,7)),s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(7,0)),s.points.push(new DataPoint(NaN,NaN)),a.series.push(s),a}function filteringInvalidPointsAreaSeries(){const a=new PlotModel({title:"Filtering NaN points in an AreaSeries"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new AreaSeries;return s.points.push(new DataPoint(1,0)),s.points.push(new DataPoint(2,10)),s.points.push(new DataPoint(3,10)),s.points.push(new DataPoint(4,0)),s.points.push(new DataPoint(5,0)),s.points.push(new DataPoint(6,7)),s.points.push(new DataPoint(7,7)),s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(8,0)),s.points.push(new DataPoint(9,0)),s.points.push(new DataPoint(NaN,NaN)),s.points2.push(new DataPoint(1,10)),s.points2.push(new DataPoint(2,110)),s.points2.push(new DataPoint(3,110)),s.points2.push(new DataPoint(4,10)),s.points2.push(new DataPoint(5,10)),s.points2.push(new DataPoint(6,17)),s.points2.push(new DataPoint(7,17)),s.points2.push(new DataPoint(NaN,NaN)),s.points2.push(new DataPoint(NaN,NaN)),s.points2.push(new DataPoint(8,10)),s.points2.push(new DataPoint(9,10)),s.points2.push(new DataPoint(NaN,NaN)),a.series.push(s),a}function filteringUndefinedPoints(){const a=new PlotModel({title:"Filtering undefined points"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new LineSeries;return s.points.push(DataPoint.Undefined),s.points.push(new DataPoint(1,0)),s.points.push(new DataPoint(2,10)),s.points.push(DataPoint.Undefined),s.points.push(new DataPoint(3,10)),s.points.push(new DataPoint(4,0)),s.points.push(DataPoint.Undefined),s.points.push(new DataPoint(5,0)),s.points.push(new DataPoint(7,7)),s.points.push(DataPoint.Undefined),s.points.push(DataPoint.Undefined),s.points.push(new DataPoint(7,0)),s.points.push(DataPoint.Undefined),a.series.push(s),a}function filteringInvalidPointsLog(){const a=new PlotModel({title:"Filtering invalid points on logarithmic axes"});a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Left}));const s=new LineSeries;return s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(1,1)),s.points.push(new DataPoint(10,10)),s.points.push(new DataPoint(0,20)),s.points.push(new DataPoint(100,2)),s.points.push(new DataPoint(1e3,12)),s.points.push(new DataPoint(4.5,0)),s.points.push(new DataPoint(1e4,4)),s.points.push(new DataPoint(1e5,14)),s.points.push(new DataPoint(NaN,NaN)),s.points.push(new DataPoint(1e6,5)),s.points.push(new DataPoint(NaN,NaN)),a.series.push(s),a}function filteringPointsOutsideRange(){const a=new PlotModel({title:"Filtering points outside (-1,1)"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,filterMinValue:-1,filterMaxValue:1})),a.axes.push(new LinearAxis({position:AxisPosition.Left,filterMinValue:-1,filterMaxValue:1}));const s=new LineSeries;for(let d=0;d<200;d+=.01)s.points.push(new DataPoint(.01*d*Math.sin(d),.01*d*Math.cos(d)));return a.series.push(s),a}const category$A="Filtering data points",FilteringExamples={category:category$A,examples:[{title:"Filtering NaN points",example:{model:filteringInvalidPoints}},{title:"Filtering NaN points with AreaSeries",example:{model:filteringInvalidPointsAreaSeries}},{title:"Filtering undefined points",example:{model:filteringUndefinedPoints}},{title:"Filtering invalid points (log axis)",example:{model:filteringInvalidPointsLog}},{title:"Filtering points outside (-1,1)",example:{model:filteringPointsOutsideRange}}]},n$2=1e5;function usingIDataPoint(){const a=[];for(let d=0;d<n$2;d++){const m=d/(n$2-1);a.push(new DataPoint(m,y$1(m)))}const s=new PlotModel({title:"Using IDataPoint"});return s.series.push(new LineSeries({itemsSource:a})),s}function usingIDataPointProvider(){const a=[];for(let d=0;d<n$2;d++){const m=d/(n$2-1);a.push(new PointType1(m,y$1(m)))}const s=new PlotModel({title:"Items implementing IDataPointProvider"});return s.series.push(new LineSeries({itemsSource:a})),s}function usingMappingProperty(){const a=[];for(let d=0;d<n$2;d++){const m=d/(n$2-1);a.push(new PointType2(m,y$1(m)))}const s=new PlotModel({title:"Using Mapping property"});return s.series.push(new LineSeries({itemsSource:a,mapping:d=>new DataPoint(d.abscissa,d.ordinate)})),s}function usingReflection(){const a=[];for(let d=0;d<n$2;d++){const m=d/(n$2-1);a.push(new PointType2(m,y$1(m)))}const s=new PlotModel({title:"Using reflection (slow)"});return s.series.push(new LineSeries({itemsSource:a,dataFieldX:"abscissa",dataFieldY:"ordinate"})),s}class PointType1{constructor(s,d){this.abscissa=s,this.ordinate=d}getDataPoint(){return new DataPoint(this.abscissa,this.ordinate)}}class PointType2{constructor(s,d){this.abscissa=s,this.ordinate=d}}function y$1(a){return Math.sin(3/a)*Math.sin(5/(1-a))}const category$z="ItemsSource",ItemsSourceExamples={category:category$z,examples:[{title:"List<DataPoint>",example:{model:usingIDataPoint}},{title:"Items implementing IDataPointProvider",example:{model:usingIDataPointProvider}},{title:"Mapping property",example:{model:usingMappingProperty}},{title:"Using reflection (slow)",example:{model:usingReflection}}]},legendRightTopInside=()=>{const a=createModel$1(),s=new Legend({legendPlacement:LegendPlacement.Inside,legendPosition:LegendPosition.RightTop,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendRightTopOutside=()=>{const a=createModel$1(),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.RightTop,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendBottomLeftHorizontal=()=>{const a=createModel$1(4),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomLeft,legendOrientation:LegendOrientation.Horizontal,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendTopLeftVertical=()=>{const a=createModel$1(4),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.TopLeft,legendOrientation:LegendOrientation.Vertical,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendDefault=()=>{const a=createModel$1(),s=new Legend;return a.legends.push(s),a},legendItemSpacing=()=>{const a=createModel$1(),s=new Legend({legendItemSpacing:100,legendPosition:LegendPosition.BottomLeft,legendOrientation:LegendOrientation.Horizontal,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendLineSpacingVertical=()=>{const a=createModel$1(),s=new Legend({legendLineSpacing:30,legendPosition:LegendPosition.TopLeft,legendOrientation:LegendOrientation.Vertical,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendLineSpacingHorizontal=()=>{const a=createModel$1(),s=new Legend({legendLineSpacing:30,legendPosition:LegendPosition.TopLeft,legendOrientation:LegendOrientation.Horizontal,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendColumnSpacing=()=>{const a=createModel$1(60),s=new Legend({legendColumnSpacing:100,legendPosition:LegendPosition.TopRight,legendOrientation:LegendOrientation.Vertical,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendHidden=()=>{const a=createModel$1(),s=new Legend({legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a.isLegendVisible=!1,a},legendGrayscale=()=>{const a=createModel$1();a.defaultColors=[OxyColors.Black,OxyColors.Gray];const s=new Legend({legendSymbolLength:32,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},clippedLegends=()=>{const a=createModel$1(1);a.series[0].title="1234567890 abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ 1234567890 abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ";const s=new Legend({legendPlacement:LegendPlacement.Inside,legendPosition:LegendPosition.RightTop,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},clippedLegendsOutside=()=>{const a=clippedLegends();return a.legends[0].legendPlacement=LegendPlacement.Outside,a.legends[0].legendPosition=LegendPosition.RightTop,a.legends[0].legendMaxWidth=200,a},clippedLegendsRight=()=>{const a=clippedLegends();return a.legends[0].legendPlacement=LegendPlacement.Outside,a.legends[0].legendPosition=LegendPosition.TopRight,a};function createModel$1(a=20){const s=new PlotModel;s.title="LineSeries";for(let d=1;d<=a;d++){const m=new LineSeries;m.title="Series "+d,s.series.push(m);for(let f=0;f<2*Math.PI;f+=.1)m.points.push(new DataPoint(f,Math.sin(f*d)/d+d))}return s}const legendBottomCenterOutsideWithMaxHeight=()=>{const a=createModel$1(),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Vertical,legendMaxHeight:75,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},legendDefaultFontSize=()=>{const a=createModel$1(),s=new Legend({legendFontSize:NaN,legendTitle:"Title in DefaultFontSize",legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a.defaultFontSize=20,a},singleLegendWithSeriesGroupsHorizontal=()=>{const a=createModel$1(21);for(let d=0;d<7;d++)a.series[d].seriesGroupName="group 1";for(let d=7;d<14;d++)a.series[d].seriesGroupName="group 2";for(let d=14;d<21;d++)a.series[d].seriesGroupName="group 3";const s=new Legend({legendFontSize:NaN,legendTitle:"Legend with groups of Series",legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black,groupNameFont:"Segoe UI Black",legendPosition:LegendPosition.TopLeft,legendOrientation:LegendOrientation.Horizontal});return a.legends.push(s),a},singleLegendWithSeriesGroups=()=>{const a=createModel$1(21);for(let d=0;d<7;d++)a.series[d].seriesGroupName="group 1";for(let d=7;d<14;d++)a.series[d].seriesGroupName="group 2";for(let d=14;d<21;d++)a.series[d].seriesGroupName="group 3";const s=new Legend({legendFontSize:NaN,legendTitle:"Legend with groups of Series",legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a},singleLegendWithSeriesGroupsMaxHeight=()=>{const a=createModel$1(21);for(let d=0;d<7;d++)a.series[d].seriesGroupName="group 1";for(let d=7;d<14;d++)a.series[d].seriesGroupName="group 2";for(let d=14;d<21;d++)a.series[d].seriesGroupName="group 3";const s=new Legend({legendFontSize:NaN,legendTitle:"Legend with groups of Series",legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black,legendMaxHeight:275});return a.legends.push(s),a},multipleLegendsWithSeriesGroups=()=>{const a=createModel$1(21);for(let m=0;m<7;m++)a.series[m].seriesGroupName="group 1",a.series[m].legendKey="Legend 1";for(let m=7;m<14;m++)a.series[m].seriesGroupName="group 2",a.series[m].legendKey="Legend 1";for(let m=14;m<21;m++)a.series[m].seriesGroupName="group 3",a.series[m].legendKey="Legend 2";const s=new Legend({key:"Legend 1",legendFontSize:NaN,legendTitle:"Legend 1 Series",legendPlacement:LegendPlacement.Inside,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black}),d=new Legend({key:"Legend 2",legendFontSize:NaN,legendTitle:"Legend 2 Series",legendPlacement:LegendPlacement.Outside,legendBackground:OxyColor.fromAColor(200,OxyColors.White),legendBorder:OxyColors.Black});return a.legends.push(s),a.legends.push(d),a},legendFullWidth=()=>{const a=createModel$1(21),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.TopCenter,legendOrientation:LegendOrientation.Horizontal,allowUseFullExtent:!0}),d=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,allowUseFullExtent:!0});return a.plotMargins=new OxyThickness(50),a.legends.push(s),a.legends.push(d),a.invalidatePlot(!0),a},legendFullHeight=()=>{const a=createModel$1(21),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.LeftTop,legendOrientation:LegendOrientation.Vertical,allowUseFullExtent:!0}),d=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.RightTop,legendOrientation:LegendOrientation.Vertical,allowUseFullExtent:!0});return a.legends.push(s),a.legends.push(d),a},legendShowingInvisibleSeries=()=>createModelWithInvisibleSeries(!0),legendNotShowingInvisibleSeries=()=>createModelWithInvisibleSeries(!1),createModelWithInvisibleSeries=a=>{const s=createModel$1(),d=new Legend({showInvisibleSeries:a});s.legends.push(d);for(let m=0;m<s.series.length;m+=2)s.series[m].isVisible=!1;return s.invalidatePlot(!1),s},category$y="Legends",LegendExamples={category:category$y,tags:["Legends"],examples:[{title:"Legend at right top inside",example:{model:legendRightTopInside}},{title:"Legend at right top outside",example:{model:legendRightTopOutside}},{title:"Legend at BottomLeft outside horizontal",example:{model:legendBottomLeftHorizontal}},{title:"Legend at TopLeft outside vertical",example:{model:legendTopLeftVertical}},{title:"Legend at default position",example:{model:legendDefault}},{title:"LegendItemSpacing (only for horizontal orientation)",example:{model:legendItemSpacing}},{title:"LegendLineSpacing (vertical legend orientation)",example:{model:legendLineSpacingVertical}},{title:"LegendLineSpacing (horizontal legend orientation)",example:{model:legendLineSpacingHorizontal}},{title:"LegendColumnSpacing (only for vertical orientation)",example:{model:legendColumnSpacing}},{title:"Hidden Legend",example:{model:legendHidden}},{title:"Grayscale colors",example:{model:legendGrayscale}},{title:"Clipped legends",example:{model:clippedLegends}},{title:"Clipped legends RightTop outside with MaxWidth",example:{model:clippedLegendsOutside}},{title:"Clipped legends TopRight outside",example:{model:clippedLegendsRight}},{title:"LegendMaxHeight (vertical legend orientation)",example:{model:legendBottomCenterOutsideWithMaxHeight}},{title:"Legend with DefaultFontSize",example:{model:legendDefaultFontSize}},{title:"Legend with grouped Series Horizontal",example:{model:singleLegendWithSeriesGroupsHorizontal}},{title:"Legend with grouped Series",example:{model:singleLegendWithSeriesGroups}},{title:"Legend with grouped Series and MaxHeight",example:{model:singleLegendWithSeriesGroupsMaxHeight}},{title:"Multiple Legends with grouped Series",example:{model:multipleLegendsWithSeriesGroups}},{title:"Full width legend",example:{model:legendFullWidth}},{title:"Full height legend",example:{model:legendFullHeight}},{title:"Legend showing invisible series",example:{model:legendShowingInvisibleSeries}},{title:"Legend not showing invisible series",example:{model:legendNotShowingInvisibleSeries}}]};function mouseEvents(){const a=new PlotModel({title:"Mouse events",subtitle:"Left click and drag"}),s=new LinearAxis({position:AxisPosition.Left,minimum:-1,maximum:1}),d=new LinearAxis({position:AxisPosition.Bottom,minimum:-1,maximum:1});a.axes.push(s),a.axes.push(d);let m;return a.mouseDown=(f,g)=>{g.changedButton===OxyMouseButton.Left&&(m=new LineSeries({title:"LineSeries"+(a.series.length+1),markerType:MarkerType.None,strokeThickness:2}),m.points.push(d.inverseTransformPoint(g.position.x,g.position.y,s)),a.series.push(m),a.invalidatePlot(!1),g.handled=!0)},a.mouseMove=(f,g)=>{m!==void 0&&(m.points.push(d.inverseTransformPoint(g.position.x,g.position.y,s)),a.invalidatePlot(!1),g.handled=!0)},a.mouseUp=(f,g)=>{m!==void 0&&(m=void 0,g.handled=!0)},a}function mouseDownEventHitTestResult(){const a=new PlotModel({title:"MouseDown HitTestResult",subtitle:"Reports the index of the nearest point."}),s=new LineSeries;s.points.push(new DataPoint(0,10)),s.points.push(new DataPoint(10,40)),s.points.push(new DataPoint(40,20)),s.points.push(new DataPoint(60,30)),a.series.push(s),s.mouseDown=(m,f)=>{a.subtitle="Index of nearest point in LineSeries: "+Math.round(f.hitTestResult.index||0),a.invalidatePlot(!1)};const d=new ScatterSeries;return d.points.push({x:0,y:15}),d.points.push({x:10,y:45}),d.points.push({x:40,y:25}),d.points.push({x:60,y:35}),a.series.push(d),d.mouseDown=(m,f)=>{a.subtitle="Index of nearest point in ScatterSeries: "+Math.round(f.hitTestResult.index||0),a.invalidatePlot(!1)},a}function mouseDownEvent(){const a=new PlotModel({title:"MouseDown",subtitle:"Left click to edit or add points."}),s=new LineSeries({title:"LineSeries1",markerType:MarkerType.Circle,markerSize:6,strokeThickness:1.5});s.points.push(new DataPoint(0,10)),s.points.push(new DataPoint(10,40)),s.points.push(new DataPoint(40,20)),s.points.push(new DataPoint(60,30)),a.series.push(s);let d=-1;return s.mouseDown=(m,f)=>{if(f.changedButton===OxyMouseButton.Left){const g=Math.round(f.hitTestResult.index);if(s.transform(s.points[g]).minus(f.position).length<10)d=g;else{const w=f.hitTestResult.index+1;s.points.splice(w,0,s.inverseTransform(f.position)),d=w}s.lineStyle=LineStyle.DashDot,a.invalidatePlot(!1),f.handled=!0}},s.mouseMove=(m,f)=>{d>=0&&(s.points[d]=s.inverseTransform(f.position),a.invalidatePlot(!1),f.handled=!0)},s.mouseUp=(m,f)=>{d=-1,s.lineStyle=LineStyle.Solid,a.invalidatePlot(!1),f.handled=!0},a.mouseDown=(m,f)=>{f.changedButton===OxyMouseButton.Left&&(s.points.push(s.inverseTransform(f.position)),d=s.points.length-1,a.invalidatePlot(!1),f.handled=!0)},a}function addAnnotations(){const a=new PlotModel({title:"Add arrow annotations",subtitle:"Press and drag the left mouse button"}),s=new LinearAxis({position:AxisPosition.Bottom}),d=new LinearAxis({position:AxisPosition.Left});a.axes.push(s),a.axes.push(d),a.series.push(new FunctionSeries({f:f=>Math.sin(f/4)*Math.acos(Math.sin(f)),x0:0,x1:Math.PI*8,n:2e3,title:"sin(x/4)*acos(sin(x))"}));let m=null;return a.mouseDown=(f,g)=>{g.changedButton===OxyMouseButton.Left&&(m=new ArrowAnnotation,m.startPoint=m.endPoint=s.inverseTransformPoint(g.position.x,g.position.y,d),a.annotations.push(m),g.handled=!0)},a.mouseMove=(f,g)=>{m&&(m.endPoint=s.inverseTransformPoint(g.position.x,g.position.y,d),m.text=`Y = ${m.endPoint.y.toFixed(3)}`,a.invalidatePlot(!1),g.handled=!0)},a.mouseUp=(f,g)=>{m&&(m=null,g.handled=!0)},a}function lineAnnotation(){const a=new PlotModel({title:"LineAnnotation",subtitle:"Click and drag the annotation line."});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:80})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=new LineAnnotation({type:LineAnnotationType.Vertical,x:4});return s.mouseDown=(d,m)=>{m.changedButton===OxyMouseButton.Left&&(s.strokeThickness*=5,a.invalidatePlot(!1),m.handled=!0)},s.mouseMove=(d,m)=>{s.x=s.inverseTransform(m.position).x,a.invalidatePlot(!1),m.handled=!0},s.mouseUp=(d,m)=>{s.strokeThickness/=5,a.invalidatePlot(!1),m.handled=!0},a.annotations.push(s),a}function arrowAnnotation(){const a=new PlotModel({title:"ArrowAnnotation",subtitle:"Click and drag the arrow."});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-40,maximum:60})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=new ArrowAnnotation({startPoint:new DataPoint(8,4),endPoint:new DataPoint(0,0),text:"Move me!"});let d=DataPoint.Undefined,m=!1,f=!1,g=OxyColors.White;return s.mouseDown=(x,w)=>{w.changedButton===OxyMouseButton.Left&&(d=s.inverseTransform(w.position),m=w.hitTestResult.index!==2,f=w.hitTestResult.index!==1,g=s.color,s.color=OxyColors.Red,a.invalidatePlot(!1),w.handled=!0)},s.mouseMove=(x,w)=>{const C=s.inverseTransform(w.position),A=C.x-d.x,_=C.y-d.y;m&&(s.startPoint=new DataPoint(s.startPoint.x+A,s.startPoint.y+_)),f&&(s.endPoint=new DataPoint(s.endPoint.x+A,s.endPoint.y+_)),d=C,a.invalidatePlot(!1),w.handled=!0},s.mouseUp=(x,w)=>{s.color=g},a.annotations.push(s),a}function polygonAnnotation(){const a=new PlotModel({title:"PolygonAnnotation",subtitle:"Click the polygon"});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-20,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:20}));const s=new PolygonAnnotation({text:"Polygon 1"});s.points.push(new DataPoint(4,-2),new DataPoint(8,-4),new DataPoint(17,7),new DataPoint(5,8),new DataPoint(2,5));let d=1;return s.mouseDown=(m,f)=>{f.changedButton===OxyMouseButton.Left&&(s.text="Hit # "+d++,a.invalidatePlot(!1),f.handled=!0)},a.annotations.push(s),a}function textAnnotation(){const a=new PlotModel({title:"TextAnnotation",subtitle:"Click the text"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=new TextAnnotation({textPosition:new DataPoint(4,-2),text:"Click here"});return s.mouseDown=(d,m)=>{console.log("mouseDown"),m.changedButton===OxyMouseButton.Left&&(s.background=s.background.isUndefined()?OxyColors.LightGreen:OxyColors.Undefined,a.invalidatePlot(!1),m.handled=!0)},a.annotations.push(s),a}async function imageAnnotation(){const a=new PlotModel({title:"ImageAnnotation",subtitle:"Click the image"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-20,maximum:20})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10}));const s=window.oxyPlotImg;if(!s)throw new Error("window.oxyPlotImg not set");const d=await getImageService().load(s),m=new ImageAnnotation({imageSource:d,x:new PlotLength(4,PlotLengthUnit.Data),y:new PlotLength(2,PlotLengthUnit.Data),horizontalAlignment:HorizontalAlignment.Right});return a.annotations.push(m),m.mouseDown=(f,g)=>{g.changedButton===OxyMouseButton.Left&&(m.horizontalAlignment=m.horizontalAlignment===HorizontalAlignment.Right?HorizontalAlignment.Left:HorizontalAlignment.Right,a.invalidatePlot(!1),g.handled=!0)},a}function addSeriesByMouseDownEvent(){const a=new PlotModel({title:"MouseDown",subtitle:"Left click to add series."}),s=new Legend({legendSymbolLength:40});return a.legends.push(s),a.mouseDown=(d,m)=>{if(m.changedButton===OxyMouseButton.Left){const f=a.series.length+1;a.series.push(new FunctionSeries({f:g=>Math.sin(f*g),x0:0,x1:10,n:1e3})),a.invalidatePlot(!0),m.handled=!0}},a}function selectRange(){const a=new PlotModel({title:"Select range",subtitle:"Left click and drag to select a range."});a.series.push(new FunctionSeries({f:Math.cos,x0:0,x1:40,dx:.1}));const s=new RectangleAnnotation({fill:OxyColor.fromAColor(120,OxyColors.SkyBlue),minimumX:0,maximumX:0});a.annotations.push(s);let d=Number.NaN;return a.mouseDown=(m,f)=>{f.changedButton===OxyMouseButton.Left&&(d=s.inverseTransform(f.position).x,s.minimumX=d,s.maximumX=d,a.invalidatePlot(!0),f.handled=!0)},a.mouseMove=(m,f)=>{if(!Number.isNaN(d)){const g=s.inverseTransform(f.position).x;s.minimumX=Math.min(g,d),s.maximumX=Math.max(g,d),s.text=` cos(x) dx =  ${Math.sin(s.maximumX)-round(Math.sin(s.minimumX),2)}`,a.subtitle=`Integrating from ${s.minimumX.toFixed(2)} to ${s.maximumX.toFixed(2)}`,a.invalidatePlot(!0),f.handled=!0}},a.mouseUp=(m,f)=>{d=Number.NaN},a}function hover(){const a=new PlotModel({title:"Hover"});let s=null;return a.mouseEnter=(d,m)=>{a.subtitle="The mouse entered",s=new LineSeries,a.series.push(s),a.invalidatePlot(!1),m.handled=!0},a.mouseMove=(d,m)=>{s&&s.xAxis&&(s.points.push(s.inverseTransform(m.position)),a.invalidatePlot(!1))},a.mouseLeave=(d,m)=>{a.subtitle="The mouse left",a.invalidatePlot(!1),m.handled=!0},a}function touch(){const a=new PlotModel({title:"Touch"}),s=new LineSeries;return a.series.push(s),a.touchStarted=(d,m)=>{a.subtitle="The touch gesture started",a.invalidatePlot(!1),m.handled=!0},a.touchDelta=(d,m)=>{s.points.push(s.inverseTransform(m.position)),a.invalidatePlot(!1)},a.touchCompleted=(d,m)=>{a.subtitle="The touch gesture completed",a.invalidatePlot(!1),m.handled=!0},a}function touchSeries(){const a=new PlotModel({title:"Touch on a LineSeries"}),s=new LineSeries;return s.points.push(new DataPoint(0,0)),s.points.push(new DataPoint(10,10)),a.series.push(s),s.touchStarted=(d,m)=>{a.subtitle="The touch gesture started on the LineSeries",a.invalidatePlot(!1),m.handled=!0},s.touchDelta=(d,m)=>{s.points.push(s.inverseTransform(m.position)),a.invalidatePlot(!1)},s.touchCompleted=(d,m)=>{a.subtitle="The touch gesture completed",a.invalidatePlot(!1),m.handled=!0},a}function rectangleAnnotationClick(){const a=new PlotModel({title:"RectangleAnnotation click"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new RectangleAnnotation({minimumX:10,maximumX:60,minimumY:10,maximumY:20});a.annotations.push(s);let d=0;return s.mouseDown=(m,f)=>{s.text="Clicked "+ ++d+" times.",a.invalidatePlot(!1)},a}function clickingOnAnAnnotation$1(){const a=new PlotModel({title:"Clicking on an annotation",subtitle:"Click on the rectangles"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new RectangleAnnotation({fill:OxyColors.Green,text:"RectangleAnnotation 1",minimumX:25,maximumX:75,minimumY:20,maximumY:40});a.annotations.push(s);const d=new RectangleAnnotation({fill:OxyColors.SkyBlue,text:"RectangleAnnotation 2",minimumX:25,maximumX:75,minimumY:60,maximumY:80});a.annotations.push(d);const m=(f,g)=>{a.subtitle="You clicked "+f.text,a.invalidatePlot(!1)};return s.mouseDown=m,d.mouseDown=m,a}const category$x="Mouse Events",MouseEventExamples={category:category$x,examples:[{title:"PlotModel mouse events",example:{model:mouseEvents}},{title:"MouseDown event and HitTestResult",example:{model:mouseDownEventHitTestResult}},{title:"LineSeries and PlotModel MouseDown event",example:{model:mouseDownEvent}},{title:"Add arrow annotations",example:{model:addAnnotations}},{title:"LineAnnotation",example:{model:lineAnnotation}},{title:"ArrowAnnotation",example:{model:arrowAnnotation}},{title:"PolygonAnnotation",example:{model:polygonAnnotation}},{title:"TextAnnotation",example:{model:textAnnotation}},{title:"ImageAnnotation",example:{model:imageAnnotation}},{title:"Add Series",example:{model:addSeriesByMouseDownEvent}},{title:"Select range",example:{model:selectRange}},{title:"Hover",example:{model:hover}},{title:"Touch",example:{model:touch}},{title:"Touch on a LineSeries",example:{model:touchSeries}},{title:"RectangleAnnotation click",example:{model:rectangleAnnotationClick}},{title:"Clicking on an annotation",example:{model:clickingOnAnAnnotation$1}}]};function lineSeries1M(){const a=new PlotModel({title:"LineSeries, 1M points"}),s=new LineSeries;return addDataPoints(s.points,1e6),a.series.push(s),a}function lineSeries1MSpeed(){const a=new PlotModel({title:"LineSeries, 1M points"}),s=new LineSeries({edgeRenderingMode:EdgeRenderingMode.PreferSpeed});return addDataPoints(s.points,1e6),a.series.push(s),a}function lineSeries(){const a=new PlotModel({title:"LineSeries, 100k points"}),s=new LineSeries;return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeriesDashedLines(){const a=new PlotModel({title:"LineSeries, 100k points",subtitle:"LineStyle = Dash"}),s=new LineSeries({lineStyle:LineStyle.Dash});return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeries1WithMarkers(){const a=new PlotModel({title:"LineSeries, 100k points",subtitle:"MarkerType = Square"}),s=new LineSeries({markerType:MarkerType.Square});return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeries1WithMarkersLowRes(){const a=new PlotModel({title:"LineSeries, 100k points, markers, lower resolution",subtitle:"MarkerType = Square, MarkerResolution = 3"}),s=new LineSeries({markerType:MarkerType.Square,markerResolution:3});return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeriesRoundLineJoins(){const a=new PlotModel({title:"LineSeries, 100k points",subtitle:"LineJoin = Round"}),s=new LineSeries({lineJoin:LineJoin.Round});return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeriesItemsSourceList(){const a=new PlotModel({title:"LineSeries, 100k points by ItemsSource set to a List<DataPoint>"}),s=new LineSeries,d=[];return addDataPoints(d,1e5),s.itemsSource=d,a.series.push(s),a}function lineSeriesItemsSourceMapping(){const a=new PlotModel({title:"LineSeries, 100k points by ItemsSource and Mapping",subtitle:"Using the Mapping function"}),s=new LineSeries,d=[];addDataPoints(d,1e5);const m=d.map(f=>new OxyRect(f.x,f.y,0,0));return s.itemsSource=m,s.mapping=f=>new DataPoint(f.left,f.top),a.series.push(s),a}function lineSeriesItemsSourceReflection(){const a=new PlotModel({title:"LineSeries, 100k points, ItemsSource with reflection",subtitle:"DataFieldX and DataFieldY"}),s=new LineSeries,d=[];addDataPoints(d,1e5);const m=d.map(f=>new OxyRect(f.x,f.y,0,0));return s.itemsSource=m,s.dataFieldX="left",s.dataFieldY="top",a.series.push(s),a}function lineSeriesThick(){const a=new PlotModel({title:"LineSeries, 100k points (thick)",subtitle:"StrokeThickness = 10"}),s=new LineSeries({strokeThickness:10});return addDataPoints(s.points,1e5),a.series.push(s),a}function lineSeries2MiterLineJoins(){const a=new PlotModel({title:"LineSeries, 3k points, miter line joins",subtitle:"LineJoin = Miter"}),s=new LineSeries({lineJoin:LineJoin.Miter,strokeThickness:8});for(let d=0;d<3e3;d++)s.points.push(new DataPoint(d,d%2));return a.series.push(s),a}function lineSeries2RoundLineJoins(){const a=new PlotModel({title:"LineSeries, 3k points, round line joins",subtitle:"LineJoin = Round"}),s=new LineSeries({lineJoin:LineJoin.Round,strokeThickness:8});for(let d=0;d<3e3;d++)s.points.push(new DataPoint(d,d%2));return a.series.push(s),a}function lineSeries2BevelLineJoins(){const a=new PlotModel({title:"LineSeries, 3k points, bevel line joins",subtitle:"LineJoin = Bevel"}),s=new LineSeries({lineJoin:LineJoin.Bevel,strokeThickness:8});for(let d=0;d<3e3;d++)s.points.push(new DataPoint(d,d%2));return a.series.push(s),a}function scatterSeriesSquares(){const a=new PlotModel({title:"ScatterSeries (squares)"}),s=new ScatterSeries;return addScatterPoints(s.points,2e3),a.series.push(s),a}function scatterSeriesSquaresOutline(){const a=new PlotModel({title:"ScatterSeries (squares with outline)",subtitle:"MarkerStroke = Black"}),s=new ScatterSeries({markerStroke:OxyColors.Black});return addScatterPoints(s.points,2e3),a.series.push(s),a}function scatterSeriesSquaresOutlineOnly(){const a=new PlotModel({title:"ScatterSeries (squares without fill color)",subtitle:"MarkerFill = Transparent, MarkerStroke = Black"}),s=new ScatterSeries({markerFill:OxyColors.Transparent,markerStroke:OxyColors.Black});return addScatterPoints(s.points,2e3),a.series.push(s),a}function scatterSeriesItemsSourceReflection(){const a=new PlotModel({title:"ScatterSeries (by ItemsSource)",subtitle:"DataFieldX = 'X', DataFieldY = 'Y'"});return a.series.push(new ScatterSeries({itemsSource:getPoints(2e3),dataFieldX:"X",dataFieldY:"Y"})),a}function scatterSeriesCircles(){const a=new PlotModel({title:"ScatterSeries (circles)",subtitle:"MarkerType = Circle"}),s=new ScatterSeries({markerType:MarkerType.Circle});return addScatterPoints(s.points,2e3),a.series.push(s),a}function scatterSeriesCirclesOutline(){const a=new PlotModel({title:"ScatterSeries (circles with outline)",subtitle:"MarkerType = Circle, MarkerStroke = Black"}),s=new ScatterSeries({markerType:MarkerType.Circle,markerStroke:OxyColors.Black});return addScatterPoints(s.points,2e3),a.series.push(s),a}function scatterSeriesCrosses(){const a=new PlotModel({title:"ScatterSeries (cross)",subtitle:"MarkerType = Cross"}),s=new ScatterSeries({markerType:MarkerType.Cross,markerFill:OxyColors.Undefined,markerStroke:OxyColors.Black});return addScatterPoints(s.points,2e3),a.series.push(s),a}function linearAxisNoGridlines(){const a=new PlotModel({title:"LinearAxis (no gridlines)"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:100,majorStep:1,minorStep:1})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:100,majorStep:1,minorStep:1})),a}function linearAxisSolidGridlines(){const a=new PlotModel({title:"LinearAxis (solid gridlines)"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Solid})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Solid})),a}function linearAxisDashedGridlines(){const a=new PlotModel({title:"LinearAxis (dashed gridlines)"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Dash})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Dash})),a}function linearAxisDottedGridlines(){const a=new PlotModel({title:"LinearAxis (dotted gridlines)"});return a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Dot})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:0,maximum:100,majorStep:1,minorStep:1,majorGridlineStyle:LineStyle.Dot})),a}function intOverflow10k(){return intOverflow(1e4)}function intOverflow50k(){return intOverflow(5e4)}function intOverflow100k(){return intOverflow(1e5)}function intOverflow(a){const s=new PlotModel({title:"int overflow",subtitle:`n = ${a}`}),d=new LineSeries;let m=0;for(let f=0;f<a;f++)d.points.push(new DataPoint(f,m+=f*f));return s.series.push(d),s}function getPoints(a){const s=[];return addDataPoints(s,a),s}function addDataPoints(a,s){for(let d=0;d<s;d++){const m=Math.PI*10*d/(s-1);a.push(new DataPoint(m*Math.cos(m),m*Math.sin(m)))}}function addScatterPoints(a,s){for(let d=0;d<s;d++){const m=Math.PI*10*d/(s-1);a.push({x:m*Math.cos(m),y:m*Math.sin(m)})}}const category$w="Performance",PerformanceExamples={category:category$w,examples:[{title:"LineSeries, 1M points",example:{model:lineSeries1M}},{title:"LineSeries, 1M points, EdgeRenderingMode==PreferSpeed",example:{model:lineSeries1MSpeed}},{title:"LineSeries, 100k points",example:{model:lineSeries}},{title:"LineSeries, 100k points (dashed line)",example:{model:lineSeriesDashedLines}},{title:"LineSeries, 100k points, markers",example:{model:lineSeries1WithMarkers}},{title:"LineSeries, 100k points, markers, lower resolution",example:{model:lineSeries1WithMarkersLowRes}},{title:"LineSeries, 100k points, round line joins",example:{model:lineSeriesRoundLineJoins}},{title:"LineSeries, 100k points by ItemsSource set to a List<DataPoint>",example:{model:lineSeriesItemsSourceList}},{title:"LineSeries, 100k points by ItemsSource and Mapping",example:{model:lineSeriesItemsSourceMapping}},{title:"LineSeries, 100k points by ItemsSource and reflection",example:{model:lineSeriesItemsSourceReflection}},{title:"LineSeries, 100k points (thick)",example:{model:lineSeriesThick}},{title:"LineSeries, 3k points, miter line joins",example:{model:lineSeries2MiterLineJoins}},{title:"LineSeries, 3k points, round line joins",example:{model:lineSeries2RoundLineJoins}},{title:"LineSeries, 3k points, bevel line joins",example:{model:lineSeries2BevelLineJoins}},{title:"ScatterSeries (squares)",example:{model:scatterSeriesSquares}},{title:"ScatterSeries (squares with outline)",example:{model:scatterSeriesSquaresOutline}},{title:"ScatterSeries (squares without fill color)",example:{model:scatterSeriesSquaresOutlineOnly}},{title:"ScatterSeries by ItemsSource and reflection",example:{model:scatterSeriesItemsSourceReflection}},{title:"ScatterSeries (circles)",example:{model:scatterSeriesCircles}},{title:"ScatterSeries (circles with outline)",example:{model:scatterSeriesCirclesOutline}},{title:"ScatterSeries (cross)",example:{model:scatterSeriesCrosses}},{title:"LinearAxis (no gridlines)",example:{model:linearAxisNoGridlines}},{title:"LinearAxis (solid gridlines)",example:{model:linearAxisSolidGridlines}},{title:"LinearAxis (dashed gridlines)",example:{model:linearAxisDashedGridlines}},{title:"LinearAxis (dotted gridlines)",example:{model:linearAxisDottedGridlines}},{title:"int overflow (10k)",example:{model:intOverflow10k}},{title:"int overflow (50k)",example:{model:intOverflow50k}},{title:"int overflow (100k)",example:{model:intOverflow100k}}]};function basicExample(){const a=new PlotModel({title:"Basic Controller example",subtitle:"Panning with left mouse button"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new PlotController;return s.unbindAll(),ControllerExtensions.bindMouseDown(s,OxyMouseButton.Left,PlotCommands.panAt),{model:()=>a,controller:()=>s}}function hoverTracking(){const a=new PlotModel({title:"Show tracker without clicking"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.series.push(FunctionSeries.fromFxFyN(d=>Math.cos(d)*5+Math.cos(d*50),d=>Math.sin(d)*5+Math.sin(d*50),0,Math.PI*2,2e4));const s=new PlotController;return ControllerExtensions.bindMouseEnter(s,PlotCommands.hoverPointsOnlyTrack),{model:()=>a,controller:()=>s}}function mouseHandlingExample(){const a=new PlotModel({title:"Mouse handling example"}),s=new ScatterSeries;a.series.push(s);const d=new DelegatePlotCommand((f,g,x)=>{x.handled=!0;const w=s.inverseTransform(x.position);s.points.push({x:w.x,y:w.y}),a.invalidatePlot(!0)}),m=new PlotController;return ControllerExtensions.bindMouseDown(m,OxyMouseButton.Left,d),{model:()=>a,controller:()=>m}}function clickingOnAnAnnotation(){const a=new PlotModel({title:"Clicking on an annotation",subtitle:"Click on the rectangles"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=new RectangleAnnotation({fill:OxyColors.Green,text:"RectangleAnnotation 1",minimumX:25,maximumX:75,minimumY:20,maximumY:40});a.annotations.push(s);const d=new RectangleAnnotation({fill:OxyColors.SkyBlue,text:"RectangleAnnotation 2",minimumX:25,maximumX:75,minimumY:60,maximumY:80});a.annotations.push(d);const m=(x,w)=>{a.subtitle="You clicked "+x.text,a.invalidatePlot(!1)};s.mouseDown=m,d.mouseDown=m;const f=new PlotController,g=new DelegatePlotCommand((x,w,C)=>{const A=new HitTestArguments(C.position,10),_=x.actualModel.hitTest(A).find(M=>M.element instanceof RectangleAnnotation);_&&(C.handled=!0,a.subtitle="You clicked "+_.element.text,a.invalidatePlot(!1))});return f.bindMouseDown(new OxyMouseDownGesture(OxyMouseButton.Left),g),{model:()=>a,controller:()=>f}}function preferringAnAxisForManipulation(){function a(m,f,g=1){const x=new ZoomStepManipulator(m,f.delta*.001*g,OxyModifierKeysExtensions.isControlDown(f));x.axisPreference=AxisPreference.X,x.started(f)}const s=new PlotModel({title:"Preferring an axis for manipulation",subtitle:"Mouse wheel over plot area prefers X axis"});s.axes.push(new LinearAxis({position:AxisPosition.Bottom})),s.axes.push(new LinearAxis({position:AxisPosition.Left})),s.series.push(FunctionSeries.fromDx(Math.cos,-7,7,.01));const d=new PlotController;return d.unbindAll(),ControllerExtensions.bindMouseWheel(d,new DelegatePlotCommand((m,f,g)=>a(m,g))),ControllerExtensions.bindMouseWheel(d,new DelegatePlotCommand((m,f,g)=>a(m,g,.1)),OxyModifierKeys.Control),{model:()=>s,controller:()=>d}}function showHideLegend(){const a=new PlotModel({title:"Show/Hide Legend",subtitle:"Click on the rectangles"}),s=3;for(let C=1;C<=s;C++){const A=new LineSeries({title:"Series "+C});a.series.push(A);for(let _=0;_<2*Math.PI;_+=.1)A.points.push(new DataPoint(_,Math.sin(_*C)/C+C))}const d=new Legend;a.legends.push(d);const m=new RectangleAnnotation({fill:OxyColors.Green,text:"Show Legend",minimumX:.5,maximumX:1.5,minimumY:.2,maximumY:.4});a.annotations.push(m);const f=new RectangleAnnotation({fill:OxyColors.SkyBlue,text:"Hide Legend",minimumX:.5,maximumX:1.5,minimumY:.6,maximumY:.8});a.annotations.push(f);const g=(C,A)=>{const _=C.text;_==="Show Legend"?a.isLegendVisible=!0:_==="Hide Legend"&&(a.isLegendVisible=!1),a.subtitle="You clicked "+C.text,a.invalidatePlot(!1)};m.mouseDown=g,f.mouseDown=g;const x=new PlotController,w=new DelegatePlotCommand((C,A,_)=>{const M=new HitTestArguments(_.position,10),P=C.actualModel.hitTest(M).find(E=>E.element instanceof RectangleAnnotation);P&&(_.handled=!0,a.subtitle="You clicked "+P.element.text,a.invalidatePlot(!1))});return x.bindMouseDown(new OxyMouseDownGesture(OxyMouseButton.Left),w),{model:()=>a,controller:()=>x}}const category$v="PlotController examples",PlotControllerExamples={category:category$v,examples:[{title:"Basic controller example",example:basicExample()},{title:"Show tracker without clicking",example:hoverTracking()},{title:"Mouse handling example",example:mouseHandlingExample()},{title:"Clicking on an annotation",example:clickingOnAnAnnotation()},{title:"Preferring an axis for manipulation",example:preferringAnAxisForManipulation()},{title:"Show/Hide Legend",example:showHideLegend()}]};function title(){const a=new PlotModel({title:"Title"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titleAndSubtitle(){const a=new PlotModel({title:"Title",subtitle:"Subtitle"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titleAndSubtitleWithSubSuperscript(){const a=new PlotModel({title:"Title with^{super}_{sub}script",subtitle:"Subtitle with^{super}_{sub}script"});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titlePadding0(){const a=new PlotModel({title:"TitlePadding = 0",subtitle:"This controls the distance between the titles and the plot area. The default value is 6",titlePadding:0});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titlePadding100(){const a=new PlotModel({title:"TitlePadding = 100",titlePadding:100});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titlesCenteredWithinView(){const a=new PlotModel({title:"Title",subtitle:"Subtitle",titleHorizontalAlignment:TitleHorizontalAlignment.CenteredWithinView});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titleClippingOff(){const a=new PlotModel({title:"This is a very long title to illustrate that title clipping is necessary, because currently it's not clipped.",clipTitle:!1});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function titleClipping60(){const a=new PlotModel({title:"This is a very long title, that shows that title clippling is working with crrently 60% of title area",titleClippingLength:.6});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundUndefined(){const a=new PlotModel({title:"Background = Undefined",background:OxyColors.Undefined});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundWhite50(){const a=new PlotModel({title:"Background = 50% White",background:OxyColor.fromAColor(128,OxyColors.White)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundTransparent(){const a=new PlotModel({title:"Background = Transparent",background:OxyColors.Transparent});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundLightGray(){const a=new PlotModel({title:"Background = LightSkyBlue",background:OxyColors.LightSkyBlue});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundWhite(){const a=new PlotModel({title:"Background = White",background:OxyColors.White});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function backgroundBlack(){const a=new PlotModel({title:"Background = Black",background:OxyColors.Black,textColor:OxyColors.White,titleColor:OxyColors.White,plotAreaBorderColor:OxyColors.White});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,ticklineColor:OxyColors.White})),a.axes.push(new LinearAxis({position:AxisPosition.Left,ticklineColor:OxyColors.White})),a}function plotAreaBorderThickness2(){const a=new PlotModel({title:"PlotAreaBorderThickness = 2",plotAreaBorderThickness:new OxyThickness(2)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function plotAreaBorderThickness1001(){const a=new PlotModel({title:"PlotAreaBorderThickness = (1,0,0,1)",plotAreaBorderThickness:new OxyThickness(1,0,0,1)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function plotAreaBorderThickness4114(){const a=new PlotModel({title:"PlotAreaBorderThickness = (4,1,1,4)",plotAreaBorderThickness:new OxyThickness(4,1,1,4)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function plotAreaBorderThickness0(){const a=new PlotModel({title:"PlotAreaBorderThickness = 0",plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a}function plotAreaBorderThickness0AxisLineThickness1(){const a=new PlotModel({title:"PlotAreaBorderThickness = 0",subtitle:"AxislineThickness = 1, AxislineColor = OxyColors.Blue, AxislineStyle = LineStyle.Solid",plotAreaBorderThickness:new OxyThickness(0)});return a.axes.push(new LinearAxis({position:AxisPosition.Bottom,axislineThickness:1,axislineColor:OxyColors.Blue,axislineStyle:LineStyle.Solid})),a.axes.push(new LinearAxis({position:AxisPosition.Left,axislineThickness:1,axislineColor:OxyColors.Blue,axislineStyle:LineStyle.Solid})),a}function invalidAxisKey(){const a=new PlotModel;return a.axes.push(new LinearAxis),a.series.push(new LineSeries({xAxisKey:"invalidKey"})),a}function exceptionClipping(){const a=new PlotModel,s=new DelegateAnnotation(d=>{throw d.pushClip(new OxyRect(50,50,50,50)),new Error("This Exception should be completely visible and not clipped by the previously pushed clipping rectangle.")});return a.annotations.push(s),a}function unbalancedClippingPush(){const a=new PlotModel,s=new DelegateAnnotation(async d=>{d.pushClip(new OxyRect(50,50,50,50))});return a.annotations.push(s),a}function unbalancedClippingPop(){const a=new PlotModel,s=new DelegateAnnotation(async d=>{d.popClip()});return a.annotations.push(s),a}const category$u="PlotModel examples",PlotModelExamples={category:category$u,examples:[{title:"Title",example:{model:title}},{title:"Title and Subtitle",example:{model:titleAndSubtitle}},{title:"Sub- and superscript in titles",example:{model:titleAndSubtitleWithSubSuperscript}},{title:"TitlePadding = 0",example:{model:titlePadding0}},{title:"TitlePadding = 100",example:{model:titlePadding100}},{title:"TitleHorizontalAlignment = CenteredWithinView",example:{model:titlesCenteredWithinView}},{title:"TitleClippingOff",example:{model:titleClippingOff}},{title:"TitleClipping60",example:{model:titleClipping60}},{title:"Background = Undefined (default)",example:{model:backgroundUndefined}},{title:"Background = 50% White",example:{model:backgroundWhite50}},{title:"Background = Transparent",example:{model:backgroundTransparent}},{title:"Background = LightSkyBlue",example:{model:backgroundLightGray}},{title:"Background = White",example:{model:backgroundWhite}},{title:"Background = Black",example:{model:backgroundBlack}},{title:"PlotAreaBorderThickness = 2",example:{model:plotAreaBorderThickness2}},{title:"PlotAreaBorderThickness = (1,0,0,1)",example:{model:plotAreaBorderThickness1001}},{title:"PlotAreaBorderThickness = (4,1,1,4)",example:{model:plotAreaBorderThickness4114}},{title:"PlotAreaBorderThickness = 0",example:{model:plotAreaBorderThickness0}},{title:"PlotAreaBorderThickness / AxisLine",example:{model:plotAreaBorderThickness0AxisLineThickness1}},{title:"Exception handling (invalid XAxisKey)",example:{model:invalidAxisKey}},{title:"Exception handling (with clipping)",example:{model:exceptionClipping}},{title:"Unbalanced clipping (push)",example:{model:unbalancedClippingPush}},{title:"Unbalanced clipping (pop)",example:{model:unbalancedClippingPop}}]};function drawTextColors(){const a=new PlotModel,s="Arial",d=32,m=FontWeights.Bold,f=d*1.6,g=20;let x=20-f;return a.annotations.push(new DelegateAnnotation(async w=>{await w.drawText(new ScreenPoint(g,x+=f),"Black",OxyColors.Black,s,d,m),await w.drawText(new ScreenPoint(g,x+=f),"Red",OxyColors.Red,s,d,m),await w.drawText(new ScreenPoint(g,x+=f),"Green",OxyColors.Green,s,d,m),await w.drawText(new ScreenPoint(g,x+=f),"Blue",OxyColors.Blue,s,d,m),await RenderingExtensions.fillRectangle(w,new OxyRect(g,x+f+15,200,10),OxyColors.Black,EdgeRenderingMode.Adaptive),await w.drawText(new ScreenPoint(g,x+f),"Yellow 50%",OxyColor.fromAColor(128,OxyColors.Yellow),s,d,m)})),a}function drawTextFonts(){const a=new PlotModel,s=20,d=s*1.6,m=20;let f=20-d;return a.annotations.push(new DelegateAnnotation(async g=>{await g.drawText(new ScreenPoint(m,f+=d),"Default font",OxyColors.Black,void 0,s),await g.drawText(new ScreenPoint(m,f+=d),"Helvetica",OxyColors.Black,"Helvetica",s),await g.drawText(new ScreenPoint(m,f+=d),"Arial",OxyColors.Black,"Arial",s),await g.drawText(new ScreenPoint(m,f+=d),"Courier",OxyColors.Black,"Courier",s),await g.drawText(new ScreenPoint(m,f+=d),"Courier New",OxyColors.Black,"Courier New",s),await g.drawText(new ScreenPoint(m,f+=d),"Times",OxyColors.Black,"Times",s),await g.drawText(new ScreenPoint(m,f+d),"Times New Roman",OxyColors.Black,"Times New Roman",s)})),a}function drawTextFontSizes(){const a=new PlotModel,s=20;let d=20;return a.annotations.push(new DelegateAnnotation(async m=>{for(const f of[10,16,24,36,48])await m.drawText(new ScreenPoint(s,d),`${f}pt`,OxyColors.Black,"Arial",f),await m.drawText(new ScreenPoint(s+200,d),`${f}pt`,OxyColors.Black,"Arial",f,FontWeights.Bold),d+=f*1.6})),a}function drawTextRotation(){const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{const d=new ScreenPoint(200,200);await RenderingExtensions.fillCircle(s,d,3,OxyColors.Blue,EdgeRenderingMode.Adaptive);for(let m=0;m<360;m+=45)await s.drawText(d,`Rotation ${m}`,OxyColors.Black,void 0,20,void 0,m)})),a}function drawTextAlignment(){const a=new PlotModel,s=20;return a.annotations.push(new DelegateAnnotation(async d=>{for(let m=HorizontalAlignment.Left;m<=HorizontalAlignment.Right;m++)for(let f=VerticalAlignment.Top;f<=VerticalAlignment.Bottom;f++){const g=new ScreenPoint((m+1)*200+20,(f+1)*s*3+20);await RenderingExtensions.fillCircle(d,g,3,OxyColors.Blue,EdgeRenderingMode.Adaptive);const x=getEnumName(HorizontalAlignment,m),w=getEnumName(VerticalAlignment,f);await d.drawText(g,`${x}-${w}`,OxyColors.Black,void 0,s,void 0,0,m,f)}})),a}function drawTextMultiLineAlignment(){const a=new PlotModel,s=20;return a.annotations.push(new DelegateAnnotation(async d=>{for(let m=HorizontalAlignment.Left;m<=HorizontalAlignment.Right;m++){const f=getEnumName(HorizontalAlignment,m);for(let g=VerticalAlignment.Top;g<=VerticalAlignment.Bottom;g++){const x=getEnumName(VerticalAlignment,g),w=(m+1)*200+20,C=(g+1)*s*6+20,A=new ScreenPoint(w,C);await RenderingExtensions.fillCircle(d,A,3,OxyColors.Blue,EdgeRenderingMode.Adaptive),await d.drawText(A,`${f}
${x}`,OxyColors.Black,void 0,s,void 0,0,m,g)}}})),a}function mathTextRotation(){const a=new PlotModel,s="Arial",d=24,m=FontWeights.Normal;return a.annotations.push(new DelegateAnnotation(async f=>{const g=new ScreenPoint(200,200),x=new ScreenPoint(400,200);await RenderingExtensions.fillCircle(f,g,3,OxyColors.Blue,EdgeRenderingMode.Adaptive);for(let w=0;w<360;w+=45){const C="     A_{2}^{3}B";await MathRenderingExtensions.drawMathText(f,g,C,OxyColors.Black,s,d,m,w,HorizontalAlignment.Left,VerticalAlignment.Middle);const A=await MathRenderingExtensions.measureMathText(f,C,s,d,m),_=OxySizeExtensions.getPolygon(A,g,w,HorizontalAlignment.Left,VerticalAlignment.Middle);await f.drawPolygon(_,OxyColors.Undefined,OxyColors.Blue,1,EdgeRenderingMode.Adaptive);const M="     A B";await f.drawText(x,M,OxyColors.Red,s,d,m,w,HorizontalAlignment.Left,VerticalAlignment.Middle);const P=f.measureText(M,s,d,m),E=OxySizeExtensions.getPolygon(P,x,w,HorizontalAlignment.Left,VerticalAlignment.Middle);await f.drawPolygon(E,OxyColors.Undefined,OxyColors.Blue,1,EdgeRenderingMode.Adaptive)}})),a}function drawMathTextAlignment(){const a="A_{2}^{3}B",s=new PlotModel,d="Arial",m=20,f=FontWeights.Normal;return s.annotations.push(new DelegateAnnotation(async g=>{for(let x=HorizontalAlignment.Left;x<=HorizontalAlignment.Right;x++)for(let w=VerticalAlignment.Top;w<=VerticalAlignment.Bottom;w++){const C=new ScreenPoint((x+1)*200+20,(w+1)*m*3+20);await RenderingExtensions.fillCircle(g,C,3,OxyColors.Blue,EdgeRenderingMode.Adaptive),await MathRenderingExtensions.drawMathText(g,C,a,OxyColors.Black,d,m,f,0,x,w)}})),s}function drawTextAlignmentRotation(){const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let d=HorizontalAlignment.Left;d<=HorizontalAlignment.Right;d++)for(let m=VerticalAlignment.Top;m<=VerticalAlignment.Bottom;m++){const f=(d+2)*130,g=(m+2)*130,x=new ScreenPoint(f,g);await RenderingExtensions.fillCircle(s,x,3,OxyColors.Blue,EdgeRenderingMode.Adaptive);for(let w=0;w<360;w+=90)await s.drawText(x,`R${w.toString().padStart(3,"0")}`,OxyColors.Black,void 0,20,void 0,w,d,m)}})),a}function drawMultilineTextAlignmentRotation(){const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let d=HorizontalAlignment.Left;d<=HorizontalAlignment.Right;d++){const m=getEnumName(HorizontalAlignment,d);for(let f=VerticalAlignment.Top;f<=VerticalAlignment.Bottom;f++){const g=getEnumName(VerticalAlignment,f),x=(d+2)*170,w=(f+2)*170,C=new ScreenPoint(x,w);await RenderingExtensions.fillCircle(s,C,3,OxyColors.Blue,EdgeRenderingMode.Adaptive);for(let A=0;A<360;A+=90)await s.drawText(C,`R${A.toString().padStart(3,"0")}
${m}
${g}`,OxyColors.Black,void 0,20,void 0,A,d,f)}}})),a}function drawTextMaxSize(){const a=new PlotModel,s="Arial",d=32,m=FontWeights.Bold,f=d*1.6,g=20,x=200;let w=20;const C=["iii","jjj","OxyPlot","Bottom","100","KML"];return a.annotations.push(new DelegateAnnotation(async A=>{for(const _ of C){const M=A.measureText(_,s,d,m),P=new ScreenPoint(g,w);await A.drawText(P,_,OxyColors.Black,s,d,m,void 0,void 0,void 0,M);const E=new OxyRect(P.x,P.y,M.width,M.height);await A.drawRectangle(E,OxyColors.Undefined,OxyColors.Black,1,EdgeRenderingMode.Adaptive);const R=new ScreenPoint(x,w),B=new OxySize(M.width/2,M.height/2);await A.drawText(R,_,OxyColors.Black,s,d,m,void 0,void 0,void 0,B);const z=new OxyRect(R.x,R.y,B.width,B.height);await A.drawRectangle(z,OxyColors.Undefined,OxyColors.Black,1,EdgeRenderingMode.Adaptive),w+=f}})),a}function measureText(){const a=new PlotModel,s="Arial",d=["OxyPlot","MMM","III","jikq","gh","123","!#$&"],m=[10,20,40,60];return a.annotations.push(new DelegateAnnotation(async f=>{let g=5;for(const x of m){let w=5,C=0;for(const A of d){const _=f.measureText(A,s,x,FontWeights.Normal);C=Math.max(C,_.width),await f.drawRectangle(new OxyRect(g,w,_.width,_.height),OxyColors.LightYellow,OxyColors.Black,1,EdgeRenderingMode.Adaptive),await f.drawText(new ScreenPoint(g,w),A,OxyColors.Black,s,x),w+=_.height+20}g+=C+20}})),a}const clipping=()=>{const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{const d=async L=>{const W=new OxyPen(OxyColors.Black,2,LineStyle.Dash);await RenderingExtensions.drawLine(s,L.left,L.top,L.right,L.top,W,EdgeRenderingMode.Automatic),await RenderingExtensions.drawLine(s,L.right,L.top,L.right,L.bottom,W,EdgeRenderingMode.Automatic),await RenderingExtensions.drawLine(s,L.right,L.bottom,L.left,L.bottom,W,EdgeRenderingMode.Automatic),await RenderingExtensions.drawLine(s,L.left,L.bottom,L.left,L.top,W,EdgeRenderingMode.Automatic)};let m=20;const f=60,g=40,x=20,w=20,C=200;let A=OxyRect.Empty;const _=async L=>{await RenderingExtensions.drawCircle2(s,L,g*.58,OxyColors.CornflowerBlue,OxyColors.Undefined,0,EdgeRenderingMode.Automatic)},M=async L=>{const W=new ScreenPoint(x+g+w+C,m);await s.drawText(W,L,OxyColors.Black,void 0,12,void 0,void 0,void 0,VerticalAlignment.Middle)},P=async L=>{const W=new ScreenPoint(x+g+w,m);await s.drawText(W,L,OxyColors.Black,void 0,12,void 0,void 0,void 0,VerticalAlignment.Middle)},E=async(L,W)=>{await s.drawText(new ScreenPoint(W,15),L,OxyColors.Black,void 0,12,700)},R=()=>{m+=f,A=new OxyRect(x,m-g/2,g,g)};await E("Actual",x),await E("Test Case",x+g+w),await E("Expected",x+g+w+C),R(),s.pushClip(A),s.popClip(),await _(A.center),await P(`1. Push clipping rectangle
2. Pop clipping rectangle
3. Draw circle`),await M("The circle should be fully drawn."),R(),s.pushClip(A),await _(A.center),s.popClip(),await d(A),await P(`1. Push clipping rectangle
2. Draw Circle`),await M("The circle should be clipped."),R();let B=A.deflate(new OxyThickness(A.height*.25));s.pushClip(A),s.pushClip(B),await _(A.center),s.popClip(),s.popClip(),await d(A),await d(B),await P(`1. Push large clipping rectangle
2. Push small clipping rectangle
3. Draw Circle`),await M("The circle should be clipped to the small clipping rectangle."),R(),B=A.deflate(new OxyThickness(A.height*.25)),s.pushClip(B),s.pushClip(A),await _(A.center),s.popClip(),s.popClip(),await d(A),await d(B),await P(`1. Push small clipping rectangle
2. Push large clipping rectangle
3. Draw Circle`),await M("The circle should be clipped to the small clipping rectangle."),R(),B=A.offset(A.width/2,A.height/2).deflate(new OxyThickness(A.height*.25)),s.pushClip(A),s.pushClip(B),await _(A.center),s.popClip(),s.popClip(),await d(A),await d(B),await P(`1. Push large clipping rectangle
2. Push small clipping rectangle
3. Draw Circle`),await M("The circle should be clipped to the intersection of the clipping rectangles."),R(),B=A.offset(A.width/2,A.height/2).deflate(new OxyThickness(A.height*.25)),s.pushClip(A),s.pushClip(B),s.popClip(),await _(A.center),s.popClip(),await d(A),await d(B),await P(`1. Push large clipping rectangle
2. Push small clipping rectangle
3. Pop small clipping rectangle
4. Draw Circle`),await M("The circle should be clipped to the large clipping rectangle."),R();const z=A.offset(A.width/3,A.height/3).deflate(new OxyThickness(A.height*.25)),F=A.offset(-A.width/3,-A.height/3).deflate(new OxyThickness(A.height*.25));s.pushClip(z),s.pushClip(F),await _(A.center),s.popClip(),s.popClip(),await d(z),await d(F),await P(`1. Push clipping rectangle
2. Push second clipping rectangle
3. Draw Circle`),await M("The circle should not be drawn at all."),R();const I=RenderingExtensions.autoResetClip(s,A);await s.drawText(A.center,"OxyPlot",OxyColors.CornflowerBlue,void 0,15,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle),I.dispose(),await d(A),await P(`1. Push clipping rectangle
2. Draw Text`),await M("The text should be clipped.")})),a},GRID_SIZE=40,TILE_SIZE=30,THICKNESS_STEPS=10,THICKNESS_STEP=.5,OFFSET_LEFT=200,OFFSET_TOP=20,FILL_COLOR=OxyColors.LightBlue,rectangles=()=>{const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let m=0;m<THICKNESS_STEPS;m++){const f=OFFSET_LEFT+m*GRID_SIZE+TILE_SIZE/2,g=m*THICKNESS_STEP;await s.drawText(new ScreenPoint(f,OFFSET_TOP/2),g.toString(),OxyColors.Black,void 0,10,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle)}const d=getEnumKeys(EdgeRenderingMode);for(const m of d){const f=OFFSET_TOP+m*GRID_SIZE;await s.drawText(new ScreenPoint(10,f+10),EdgeRenderingMode[m],OxyColors.Black,void 0,10,void 0,void 0,void 0,VerticalAlignment.Middle);for(let g=0;g<THICKNESS_STEPS;g++){const x=OFFSET_LEFT+g*GRID_SIZE,w=new OxyRect(x,f,TILE_SIZE,TILE_SIZE),C=g*THICKNESS_STEP;await s.drawRectangle(w,FILL_COLOR,OxyColors.Black,C,m)}}})),a},lines=()=>{const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let m=0;m<THICKNESS_STEPS;m++){const f=OFFSET_LEFT+m*GRID_SIZE+TILE_SIZE/2,g=m*THICKNESS_STEP;await s.drawText(new ScreenPoint(f,OFFSET_TOP/2),g.toString(),OxyColors.Black,void 0,10,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle)}const d=getEnumKeys(EdgeRenderingMode);for(const m of d){const f=OFFSET_TOP+m*GRID_SIZE;await s.drawText(new ScreenPoint(10,f+10),EdgeRenderingMode[m],OxyColors.Black,void 0,10,void 0,void 0,void 0,VerticalAlignment.Middle);for(let g=0;g<THICKNESS_STEPS;g++){const x=OFFSET_LEFT+g*GRID_SIZE,w=new ScreenPoint(x,f),C=new ScreenPoint(x,f+TILE_SIZE),A=new ScreenPoint(x+TILE_SIZE,f),_=new ScreenPoint(x+TILE_SIZE,f+TILE_SIZE),M=new ScreenPoint(x,f+TILE_SIZE/2),P=g*THICKNESS_STEP;await s.drawLine([C,w,A],OxyColors.Black,P,m),await s.drawLine([M,_,w],OxyColors.Black,P,m,void 0,LineJoin.Bevel)}}})),a},polygons=()=>{const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let m=0;m<THICKNESS_STEPS;m++){const f=OFFSET_LEFT+m*GRID_SIZE+TILE_SIZE/2,g=m*THICKNESS_STEP;await s.drawText(new ScreenPoint(f,OFFSET_TOP/2),g.toString(),OxyColors.Black,void 0,10,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle)}const d=getEnumKeys(EdgeRenderingMode);for(const m of d){const f=OFFSET_TOP+m*GRID_SIZE;await s.drawText(new ScreenPoint(10,f+10),EdgeRenderingMode[m],OxyColors.Black,void 0,10,void 0,void 0,void 0,VerticalAlignment.Middle);for(let g=0;g<THICKNESS_STEPS;g++){const x=OFFSET_LEFT+g*GRID_SIZE,w=[new ScreenPoint(x+TILE_SIZE*.4,f),new ScreenPoint(x+TILE_SIZE,f+TILE_SIZE*.2),new ScreenPoint(x+TILE_SIZE*.9,f+TILE_SIZE*.8),new ScreenPoint(x+TILE_SIZE*.5,f+TILE_SIZE),new ScreenPoint(x,f+TILE_SIZE*.6)],C=g*THICKNESS_STEP;await s.drawPolygon(w,FILL_COLOR,OxyColors.Black,C,m)}}})),a},ellipses=()=>{const a=new PlotModel;return a.annotations.push(new DelegateAnnotation(async s=>{for(let m=0;m<THICKNESS_STEPS;m++){const f=OFFSET_LEFT+m*GRID_SIZE+TILE_SIZE/2,g=m*THICKNESS_STEP;await s.drawText(new ScreenPoint(f,OFFSET_TOP/2),g.toString(),OxyColors.Black,void 0,10,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle)}const d=getEnumKeys(EdgeRenderingMode);for(const m of d){const f=OFFSET_TOP+m*GRID_SIZE;await s.drawText(new ScreenPoint(10,f+10),EdgeRenderingMode[m],OxyColors.Black,void 0,10,void 0,void 0,void 0,VerticalAlignment.Middle);for(let g=0;g<THICKNESS_STEPS;g++){const x=OFFSET_LEFT+g*GRID_SIZE,w=new OxyRect(x,f+TILE_SIZE*.1,TILE_SIZE,TILE_SIZE*.8),C=g*THICKNESS_STEP;await s.drawEllipse(w,FILL_COLOR,OxyColors.Black,C,m)}}})),a},lineJoins=()=>{const d=[135,90,45,22.5],m=140,f=90,g=50,x=50,w=new PlotModel;return w.annotations.push(new DelegateAnnotation(async C=>{let A=0,_=0;const M=getEnumKeys(LineJoin);for(const P of M){const E=new ScreenPoint(m*(A+.5)+g,x/2);await C.drawText(E,LineJoin[P],OxyColors.Black,void 0,12,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle),A++}for(const P of d){A=0;const E=f*_+x,R=P/2/360*2*Math.PI,B=Math.sin(R)*60,z=Math.cos(R)*60,F=new ScreenPoint(15,E);await C.drawText(F,P.toString()+"",OxyColors.Black,void 0,12);for(const I of M){const L=m*(A+.5)+g,W=new ScreenPoint(L,E),G=new ScreenPoint(L-B,E+z),q=new ScreenPoint(L+B,E+z);await C.drawLine([G,W,q],OxyColors.CornflowerBlue,15,EdgeRenderingMode.PreferGeometricAccuracy,void 0,I),A++}_++}})),w},ellipseDrawing=()=>{const g=new PlotModel;return g.annotations.push(new DelegateAnnotation(async x=>{const w=new OxyRect(60,20,600,200),C=new Array(200),A=(w.left+w.right)/2,_=(w.top+w.bottom)/2,M=(w.right-w.left)/2,P=(w.bottom-w.top)/2;for(let E=0;E<200;E++){const R=Math.PI*2*E/199;C[E]=new ScreenPoint(A+M*Math.cos(R),_+P*Math.sin(R))}await x.drawPolygon(C,OxyColors.Undefined,OxyColors.Black,4,EdgeRenderingMode.PreferGeometricAccuracy),await x.drawEllipse(w,OxyColors.Undefined,OxyColors.White,2,EdgeRenderingMode.PreferGeometricAccuracy),await x.drawText(new ScreenPoint(360,120),"The white ellipse (drawn by Renderer) should match the black ellipse (drawn as Path).",OxyColors.Black,void 0,12,void 0,void 0,HorizontalAlignment.Center,VerticalAlignment.Middle)})),g},category$t="9 Rendering capabilities",RenderingCapabilities={category:category$t,examples:[{title:"DrawText - Colors",example:{model:drawTextColors}},{title:"DrawText - Fonts",example:{model:drawTextFonts}},{title:"DrawText - Font sizes",example:{model:drawTextFontSizes}},{title:"DrawText - Rotation",example:{model:drawTextRotation}},{title:"DrawText - Alignment",example:{model:drawTextAlignment}},{title:"DrawText - Multi-line Alignment",example:{model:drawTextMultiLineAlignment}},{title:"DrawMathText - Rotation",example:{model:mathTextRotation}},{title:"DrawMathText - Alignment",example:{model:drawMathTextAlignment}},{title:"DrawText - Alignment/Rotation",example:{model:drawTextAlignmentRotation}},{title:"DrawText - Multi-line Alignment/Rotation",example:{model:drawMultilineTextAlignmentRotation}},{title:"DrawText - MaxSize",example:{model:drawTextMaxSize}},{title:"MeasureText",example:{model:measureText}},{title:"Clipping",example:{model:clipping}},{title:"Rectangles - EdgeRenderingMode",example:{model:rectangles}},{title:"Lines - EdgeRenderingMode",example:{model:lines}},{title:"Polygons - EdgeRenderingMode",example:{model:polygons}},{title:"Ellipses - EdgeRenderingMode",example:{model:ellipses}},{title:"LineJoin",example:{model:lineJoins}},{title:"Ellipse Drawing",example:{model:ellipseDrawing}}]};function noInterpolation(){const a=new PlotModel({title:"No tracker interpolation",subtitle:"Used for discrete values or scatter plots."}),s=new Legend({legendSymbolLength:30});a.legends.push(s);const d=new LineSeries({title:"Series 1",canTrackerInterpolatePoints:!1,color:OxyColors.SkyBlue,markerType:MarkerType.Circle,markerSize:6,markerStroke:OxyColors.White,markerFill:OxyColors.SkyBlue,markerStrokeThickness:1.5});for(let m=0;m<63;m++){const f=Math.round(Math.sqrt(m)*Math.cos(m*.1)),g=Math.round(Math.sqrt(m)*Math.sin(m*.1));d.points.push(new DataPoint(f,g))}return a.series.push(d),a}function trackerChangedEvent(){const a=new PlotModel({title:"Handling the TrackerChanged event",subtitle:"Press the left mouse button to test the tracker."});return a.series.push(FunctionSeries.fromN(Math.sin,0,10,100)),a.trackerChanged=(s,d)=>{a.subtitle=d.hitResult?"Tracker item index = "+d.hitResult.index:"Not tracking",a.invalidatePlot(!1)},a}function trackerFiresDistance(){const a=new PlotModel({title:"Specified distance of the tracker fires",subtitle:"Press the left mouse button to test the tracker."});a.series.push(FunctionSeries.fromN(Math.sin,0,10,100));const s=new PlotController;return s.unbindViewCommand(PlotCommands.snapTrack),s.unbindViewCommand(PlotCommands.snapTrackTouch),ControllerExtensions.bindMouseDown(s,OxyMouseButton.Left,new DelegatePlotCommand((d,m,f)=>m.addMouseManipulator(d,new TrackerManipulator(d,{snap:!0,pointsOnly:!1,firesDistance:2,checkDistanceBetweenPoints:!0}),f))),ControllerExtensions.bindTouchDown(s,new DelegatePlotCommand((d,m,f)=>m.addTouchManipulator(d,new TouchTrackerManipulator(d,{snap:!0,pointsOnly:!1,firesDistance:2}),f))),{model:()=>a,controller:()=>s}}const category$s="Tracker",TrackerExamples={category:category$s,examples:[{title:"No interpolation",example:{model:noInterpolation}},{title:"TrackerChangedEvent",example:{model:trackerChangedEvent}},{title:"Specified distance of the tracker fires",example:trackerFiresDistance()}]},Exps=[FilteringExamples,ItemsSourceExamples,LegendExamples,MouseEventExamples,PerformanceExamples,PlotControllerExamples,PlotModelExamples,RenderingCapabilities,TrackerExamples],points=[{x:589.3649979,y:16.10595703},{x:437.9979935,y:16.10595703},{x:400.4249954,y:16.10595703},{x:399.1255264,y:16.05047607},{x:397.463356,y:15.92333984},{x:393.5852432,y:15.69073486},{x:389.8589859,y:15.88067627},{x:388.3866653,y:16.28186035},{x:387.3529739,y:16.96594238},{x:386.8373489,y:18.53930664},{x:387.2163773,y:20.51794434},{x:387.9814529,y:22.51843262},{x:388.6240005,y:24.15698242},{x:395.958992,y:45.09094238},{x:399.2686234,y:54.89562988},{x:402.1330338,y:64.90338135},{x:404.5822525,y:75.06884766},{x:406.6462479,y:85.34680176},{x:409.7385635,y:106.0593262},{x:411.6500015,y:126.6789551},{x:412.0961685,y:137.0930786},{x:412.0253677,y:147.4713135},{x:411.4655228,y:157.8103638},{x:410.4446182,y:168.1069336},{x:408.9906387,y:178.3577881},{x:407.1315689,y:188.5595703},{x:404.8953629,y:198.7091064},{x:402.3099747,y:208.8029785},{x:392.9860001,y:237.2509766},{x:392.1175613,y:240.0527954},{x:391.2060013,y:243.0959473},{x:390.5509415,y:246.1691284},{x:390.4520035,y:249.0609741},{x:391.406044,y:252.6694336},{x:393.1980057,y:256.0982056},{x:395.3566971,y:259.3631287},{x:397.4109879,y:262.47995},{x:411.7649918,y:287.7079468},{x:426.5997696,y:312.9102173},{x:441.8913651,y:337.8200684},{x:457.3402786,y:362.6333923},{x:472.6469803,y:387.5459595},{x:478.0007401,y:395.7557983},{x:483.6958694,y:403.8400879},{x:489.2894974,y:411.9628296},{x:494.3389969,y:420.2879639},{x:494.9800491,y:421.8480225},{x:495.4455032,y:423.6903687},{x:496.1577225,y:427.7724609},{x:497.0915604,y:431.6355591},{x:497.8341141,y:433.2041321},{x:498.8629837,y:434.3809509},{x:500.0935135,y:434.9877625},{x:501.7391434,y:435.3059082},{x:505.7623367,y:435.3148193},{x:509.9061356,y:434.8848267},{x:511.7024612,y:434.6542969},{x:513.1439896,y:434.4929504},{x:520.0768509,y:434.1251831},{x:527.3961258,y:434.1952209},{x:534.6892776,y:434.728363},{x:541.544014,y:435.7499695},{x:544.2357864,y:436.3025513},{x:547.021492,y:437.0792236},{x:549.6099319,y:438.2590027},{x:551.7099686,y:440.0209656},{x:552.7028275,y:441.4446106},{x:553.2691116,y:442.791626},{x:553.4498978,y:444.0619202},{x:553.2864456,y:445.2554626},{x:552.0910721,y:447.4119873},{x:550.0122147,y:449.2607117},{x:547.3790359,y:450.8010864},{x:544.5206985,y:452.0325928},{x:541.766304,y:452.9547119},{x:539.445015,y:453.5669556},{x:539.445015,y:454.6409607},{x:542.6554031,y:455.4246521},{x:546.0063553,y:455.8735962},{x:549.2799149,y:456.4869385},{x:552.2580032,y:457.7639465},{x:554.3335648,y:459.5966797},{x:555.6600418,y:461.8208313},{x:556.278389,y:464.282959},{x:556.2294998,y:466.8295898},{x:555.55439,y:469.307251},{x:554.2939529,y:471.5625},{x:552.4892044,y:473.4418945},{x:550.1809769,y:474.7919617},{x:547.1414261,y:475.8059387},{x:543.8482132,y:476.5288391},{x:537.2979813,y:477.0559692},{x:535.5239944,y:476.8666077},{x:533.5114822,y:476.5535889},{x:531.5334549,y:476.4162598},{x:529.8629837,y:476.7539673},{x:529.0471268,y:477.3421631},{x:528.5394363,y:478.1289673},{x:528.1448441,y:480.0927124},{x:528.071846,y:482.2338257},{x:527.7129593,y:484.1409607},{x:526.901741,y:485.4877014},{x:525.8139114,y:486.4950867},{x:523.0528641,y:487.6643372},{x:519.9188919,y:487.9933777},{x:516.9010086,y:487.8269653},{x:511.7325516,y:486.9451599},{x:506.4563065,y:485.4539185},{x:501.155159,y:483.4500427},{x:495.912117,y:481.0302124},{x:485.9321365,y:475.3295898},{x:481.3610916,y:472.2423096},{x:477.1800003,y:469.125946},{x:465.3709793,y:459.3179626},{x:464.3509598,y:458.3116455},{x:463.1867142,y:457.1624451},{x:461.9141312,y:456.2180176},{x:460.5689774,y:455.8259583},{x:459.6923904,y:456.0762939},{x:458.8656693,y:456.7503662},{x:457.3631058,y:458.907959},{x:456.063179,y:461.3753052},{x:455.4898758,y:462.436554},{x:454.9679642,y:463.2289734},{x:453.0795364,y:465.3183289},{x:450.8528519,y:467.2734985},{x:448.3575516,y:468.9848328},{x:445.6630936,y:470.3425903},{x:442.83918,y:471.2370605},{x:439.9552689,y:471.5585938},{x:437.0810318,y:471.1974487},{x:434.2859879,y:470.0439453},{x:432.4744034,y:468.6621399},{x:431.3244705,y:467.0726013},{x:430.7551956,y:465.3302612},{x:430.6856155,y:463.4900818},{x:431.0347672,y:461.6070251},{x:431.7216873,y:459.7360229},{x:433.7849808,y:456.2499695},{x:438.1093216,y:450.118988},{x:441.4749832,y:444.3893433},{x:444.0351639,y:438.28302},{x:445.0610428,y:434.845459},{x:445.9430008,y:431.0219727},{x:446.6270218,y:428.7687378},{x:447.4476395,y:426.4767151},{x:447.9032059,y:424.1760559},{x:447.492012,y:421.8969727},{x:445.6156082,y:418.2295837},{x:443.3608475,y:414.6139832},{x:438.1008682,y:407.5364685},{x:432.48069,y:400.6614685},{x:427.2689896,y:393.9859619},{x:389.1699905,y:339.2359619},{x:374.5550003,y:318.3009644},{x:372.5515823,y:314.8404541},{x:370.2787552,y:310.9485779},{x:367.7467728,y:307.2946777},{x:366.3868484,y:305.7660828},{x:364.9659805,y:304.5479736},{x:363.9477615,y:304.0406799},{x:363.082222,y:304.0159912},{x:361.6236038,y:304.9024658},{x:360.2191849,y:306.1834412},{x:359.4213638,y:306.651886},{x:358.4979935,y:306.8349609},{x:356.6694107,y:306.4464722},{x:354.9371109,y:305.5308228},{x:353.2544937,y:304.4515076},{x:351.5749893,y:303.5719604},{x:343.4895706,y:301.1234131},{x:335.0169449,y:299.8048401},{x:326.3076553,y:299.5128174},{x:317.5122147,y:300.1439514},{x:308.7811966,y:301.5948486},{x:300.2651443,y:303.762085},{x:292.1145401,y:306.5422668},{x:284.4799881,y:309.8319702},{x:282.3371964,y:310.7483521},{x:279.925972,y:311.644928},{x:274.7942581,y:313.5763245},{x:270.0769119,y:316.0212708},{x:268.1836319,y:317.559845},{x:266.7659988,y:319.3749695},{x:271.6227798,y:320.1968384},{x:276.5877457,y:321.7830811},{x:281.472847,y:323.7190247},{x:286.090004,y:325.5899658},{x:298.3649979,y:330.7419739},{x:310.3880997,y:336.8226929},{x:321.8024063,y:343.941803},{x:332.2509842,y:352.2089539},{x:339.2033768,y:358.533844},{x:342.4841385,y:361.901825},{x:345.4439774,y:365.5359497},{x:346.445076,y:367.0002136},{x:347.3386307,y:368.7592163},{x:347.6443558,y:370.5680847},{x:347.4267044,y:371.4147034},{x:346.8819962,y:372.1819458},{x:345.387001,y:372.7861023},{x:343.5981216,y:372.4627075},{x:341.8064041,y:371.7001953},{x:340.3029861,y:370.986969},{x:336.1688919,y:369.4472046},{x:331.5998611,y:368.1002197},{x:326.9541702,y:367.1023254},{x:322.5899734,y:366.6099548},{x:324.6785049,y:369.6851501},{x:327.4601212,y:372.3129578},{x:330.467659,y:374.7735291},{x:333.2339859,y:377.3469543},{x:338.3369217,y:383.6273193},{x:342.70298,y:390.7063293},{x:344.4534683,y:394.4726563},{x:345.8323135,y:398.3514099},{x:346.7769547,y:402.3135376},{x:347.2249832,y:406.3299561},{x:346.8078384,y:412.0097046},{x:345.1297989,y:416.5983276},{x:342.383522,y:420.1838074},{x:338.7616043,y:422.8540955},{x:334.4566727,y:424.6971741},{x:329.6613541,y:425.8010559},{x:324.5682449,y:426.2536621},{x:319.3700027,y:426.1429749},{x:315.144783,y:425.6447144},{x:311.0141983,y:424.7691345},{x:303.0388565,y:422.0056763},{x:295.4478226,y:418.0917969},{x:288.2450027,y:413.2668457},{x:281.4342422,y:407.769989},{x:275.0194168,y:401.8405762},{x:269.0043716,y:395.717804},{x:263.393013,y:389.6409607},{x:255.0782547,y:379.5436707},{x:247.6409988,y:368.3999634},{x:244.4098587,y:362.5210571},{x:241.5882645,y:356.4829712},{x:239.2395096,y:350.3198853},{x:237.4270096,y:344.0659485},{x:236.2694168,y:338.2407532},{x:235.5486526,y:332.3677368},{x:235.0773697,y:320.528717},{x:235.3326797,y:308.6495667},{x:235.6340103,y:296.8309631},{x:233.1889725,y:297.9562988},{x:230.9140091,y:299.4570923},{x:226.5090103,y:302.6929626},{x:206.6489944,y:315.875946},{x:157.2670059,y:346.7819519},{x:136.8219986,y:360.059967},{x:132.2092514,y:363.0340881},{x:130.0033798,y:364.6920166},{x:128.1559982,y:366.6599731},{x:127.0190811,y:368.5368958},{x:126.298027,y:370.4631348},{x:125.9532547,y:372.4280701},{x:125.9451218,y:374.4211121},{x:126.7804031,y:378.4490356},{x:128.4870071,y:382.4620972},{x:130.748024,y:386.3754272},{x:133.2466202,y:390.104248},{x:135.6659012,y:393.5636902},{x:137.689003,y:396.6689453},{x:139.2043839,y:400.197052},{x:139.5524673,y:402.0329285},{x:139.5626297,y:403.8374634},{x:139.1861954,y:405.551239},{x:138.3745499,y:407.1148682},{x:137.0790329,y:408.4689026},{x:135.2509995,y:409.5539551},{x:132.8812943,y:410.31427},{x:130.5507584,y:410.5262146},{x:128.270546,y:410.2424316},{x:126.0518265,y:409.5155334},{x:123.9057388,y:408.3982239},{x:121.8434372,y:406.9431458},{x:118.0148697,y:403.2301941},{x:114.6553879,y:398.7979126},{x:111.8542252,y:394.0675049},{x:109.7006912,y:389.4601135},{x:108.2840042,y:385.3969727},{x:107.7778549,y:382.5092468},{x:107.3788681,y:379.2887268},{x:106.6309433,y:376.2470703},{x:105.0779953,y:373.8959656},{x:103.1701126,y:372.6677246},{x:100.7825394,y:371.7599487},{x:95.13137054,y:370.6252136},{x:89.25051117,y:369.9303284},{x:86.57584381,y:369.5724182},{x:84.26599884,y:369.1139526},{x:78.20024872,y:367.3027649},{x:71.70685577,y:364.820343},{x:65.1133194,y:361.6892395},{x:58.74712372,y:357.9318237},{x:52.93579102,y:353.5706482},{x:48.00682831,y:348.6281433},{x:45.97557068,y:345.9458923},{x:44.28772736,y:343.1267395},{x:42.98422241,y:340.1734924},{x:42.10599518,y:337.0889587},{x:41.90753937,y:335.2592163},{x:42.08698273,y:333.7605286},{x:43.18836975,y:331.3730774},{x:44.62782288,y:329.1598206},{x:45.6230011,y:326.3539734},{x:45.62973022,y:324.9945984},{x:45.33054352,y:323.6192627},{x:44.36862183,y:320.8330994},{x:43.98298645,y:319.4284058},{x:43.84563446,y:318.0201111},{x:44.09512329,y:316.6112671},{x:44.86999512,y:315.2049561},{x:45.80908966,y:314.2088623},{x:46.79941559,y:313.5540161},{x:48.9025116,y:313.1113892},{x:51.11682129,y:313.5637512},{x:53.37987518,y:314.5978394},{x:57.8022995,y:317.1580811},{x:59.83672333,y:318.0577087},{x:61.6700058,y:318.2859497},{x:62.82819366,y:317.6254883},{x:63.23600006,y:316.3283386},{x:63.24330902,y:314.8067627},{x:63.20000458,y:313.4729614},{x:63.68109894,y:310.3050232},{x:64.93375397,y:307.6513367},{x:67.09728241,y:305.979187},{x:68.56415558,y:305.6572571},{x:70.31099701,y:305.7559509},{x:73.2078476,y:306.4935913},{x:76.04866791,y:307.6478271},{x:81.46486664,y:310.9243164},{x:86.36489105,y:315.0218811},{x:90.55399323,y:319.3769531},{x:92.14154816,y:321.4163208},{x:93.72263336,y:323.6399536},{x:95.39614105,y:325.7593689},{x:97.26099396,y:327.4859619},{x:98.87421417,y:328.2453918},{x:100.5960007,y:328.4575806},{x:104.1259995,y:328.1189575},{x:107.9671097,y:328.0540771},{x:112.0256271,y:328.345459},{x:116.0258255,y:328.4305725},{x:119.6919937,y:327.7469482},{x:122.6980515,y:326.2321777},{x:125.5723801,y:324.1764526},{x:128.3242722,y:321.9129944},{x:130.9630051,y:319.7749634},{x:158.6139908,y:297.5969543},{x:183.9269943,y:278.8919678},{x:215.7729874,y:251.3609619},{x:222.6591263,y:245.7957153},{x:229.6908646,y:240.2703247},{x:236.5836563,y:234.5932617},{x:243.0529861,y:228.572937},{x:246.137764,y:224.8230591},{x:248.7661209,y:220.4605103},{x:251.0138321,y:215.6484985},{x:252.9567337,y:210.5499878},{x:256.2312393,y:200.1459351},{x:257.7144547,y:195.1665039},{x:259.1959915,y:190.5529785},{x:263.9845047,y:175.0708008},{x:267.8167191,y:159.2056274},{x:270.6394424,y:143.0612183},{x:272.3993607,y:126.7412109},{x:273.043251,y:110.3493042},{x:272.5178299,y:93.98913574},{x:270.7698441,y:77.76446533},{x:267.7460098,y:61.77893066},{x:260.9010086,y:28.45196533},{x:260.3377457,y:25.5088501},{x:259.7099991,y:22.24182129},{x:258.5879898,y:19.265625},{x:257.7073746,y:18.07867432},{x:256.5419998,y:17.19494629},{x:254.5226212,y:16.44396973},{x:252.1078568,y:16.0401001},{x:246.5816116,y:15.96911621},{x:240.9423294,y:16.37298584},{x:238.3862076,y:16.56274414},{x:236.1689835,y:16.64294434},{x:185.1770096,y:17.17895508},{x:0,y:16.64294434},{x:0,y:.53894043},{x:188.9400101,y:.53894043},{x:242.0799942,y:.53894043},{x:244.6571732,y:.474975586},{x:247.5546951,y:.33001709},{x:253.8458633,y:.078552246},{x:260.0235977,y:.347839355},{x:262.779335,y:.853759766},{x:265.1579971,y:1.70098877},{x:266.7366104,y:2.746398926},{x:268.0821915,y:4.172119141},{x:270.1900101,y:7.797119141},{x:271.7128067,y:11.84075928},{x:272.8819962,y:15.56799316},{x:276.034523,y:25.44775391},{x:279.0441055,y:35.50836182},{x:281.6616287,y:45.66326904},{x:283.6380081,y:55.82598877},{x:285.7761917,y:72.32995605},{x:287.0616837,y:88.9072876},{x:287.4597855,y:105.5118408},{x:286.9358597,y:122.0977173},{x:285.4552994,y:138.6187744},{x:282.9833755,y:155.0289917},{x:279.4855118,y:171.2824097},{x:274.9270096,y:187.3329468},{x:271.4097672,y:198.2474976},{x:267.3623734,y:209.4165039},{x:262.4050369,y:220.1444092},{x:259.4664688,y:225.1257324},{x:256.1579971,y:229.7359619},{x:249.3205032,y:237.2365723},{x:241.720253,y:244.1188354},{x:233.794136,y:250.6709595},{x:225.9790115,y:257.1809692},{x:195.5280228,y:282.9415894},{x:164.2490005,y:307.6559448},{x:141.1689987,y:324.8109741},{x:133.2555008,y:330.7440796},{x:129.0609055,y:333.3323975},{x:124.5289993,y:335.2859497},{x:122.1544113,y:335.8482361},{x:119.7157364,y:336.0837402},{x:114.7126236,y:335.969696},{x:109.6527023,y:335.7345581},{x:104.6689987,y:336.1689453},{x:102.779686,y:336.7739563},{x:100.6949997,y:337.5380859},{x:98.61257172,y:337.9761353},{x:96.73000336,y:337.6029663},{x:94.59128571,y:335.8127136},{x:92.66425323,y:333.2740784},{x:90.92359161,y:330.5338745},{x:89.34400177,y:328.1389465},{x:87.08150482,y:325.4346313},{x:84.48600006,y:322.8813171},{x:78.90499115,y:318.3849487},{x:77.3181076,y:317.091217},{x:75.22336578,y:315.5139465},{x:73.02420807,y:314.5059509},{x:72.01151276,y:314.4819031},{x:71.12400055,y:314.9199524},{x:70.59803009,y:315.7275085},{x:70.51831818,y:316.7388916},{x:71.29537201,y:319.0906982},{x:72.65048981,y:321.4106445},{x:73.77899933,y:323.1339722},{x:77.82125092,y:329.0054626},{x:80.16477203,y:331.7309265},{x:82.71099091,y:334.177948},{x:84.92420197,y:335.9799805},{x:87.10187531,y:337.9599609},{x:88.68236542,y:340.2526855},{x:89.07314301,y:341.5584412},{x:89.10399628,y:342.9929504},{x:89.61742401,y:343.8485413},{x:89.34513092,y:344.4684448},{x:88.5472641,y:344.7538757},{x:87.48400116,y:344.605957},{x:85.91378021,y:343.8370972},{x:84.39550018,y:342.7818298},{x:81.58899689,y:340.4889526},{x:78.80124664,y:338.1679382},{x:75.64672089,y:335.4441223},{x:68.57024384,y:329.6803589},{x:64.81476593,y:327.0864868},{x:61.02541351,y:324.9821167},{x:57.28540802,y:323.5902405},{x:53.6780014,y:323.1339722},{x:55.6113739,y:326.1587524},{x:58.03131866,y:328.9006653},{x:63.8632431,y:333.7370911},{x:70.23856354,y:338.0457153},{x:76.22199249,y:342.2289734},{x:77.03455353,y:342.7995605},{x:78.11525726,y:343.5061951},{x:80.57563019,y:345.232605},{x:82.59217072,y:347.217926},{x:83.11811066,y:348.24823},{x:83.15399933,y:349.2719727},{x:82.68766022,y:350.0397949},{x:81.87210846,y:350.3486328},{x:79.6248703,y:349.9825745},{x:77.27544403,y:348.9604797},{x:76.33216095,y:348.4492188},{x:75.68700409,y:348.0689697},{x:66.5876236,y:342.1790771},{x:61.90306854,y:339.4937744},{x:56.897995,y:337.35495},{x:55.17505646,y:336.726532},{x:53.01000214,y:336.1444702},{x:51.04743958,y:336.2538757},{x:50.34353638,y:336.7695007},{x:49.93199921,y:337.6999512},{x:50.0814743,y:339.3566589},{x:51.06142426,y:341.0038757},{x:52.65550232,y:342.6039124},{x:54.64737701,y:344.1190796},{x:58.95914459,y:346.743988},{x:60.84635162,y:347.7783203},{x:62.26599884,y:348.5769653},{x:70.1079483,y:352.9052734},{x:78.1873703,y:356.6586914},{x:86.4916153,y:359.8837585},{x:95.00800323,y:362.6269531},{x:96.84983063,y:363.0866394},{x:98.97579193,y:363.5275574},{x:103.6091232,y:364.5426941},{x:107.965889,y:366.0517273},{x:109.7461472,y:367.1099854},{x:111.1039963,y:368.43396},{x:112.0068741,y:370.5414429},{x:112.4139938,y:373.21521},{x:112.6441269,y:375.9950867},{x:113.0159988,y:378.4209595},{x:113.902565,y:381.2496643},{x:115.2284775,y:384.6081543},{x:116.9393082,y:388.2300415},{x:118.980629,y:391.8488464},{x:121.2979813,y:395.1981506},{x:123.8369522,y:398.0115662},{x:126.5430984,y:400.022644},{x:129.3619919,y:400.9649658},{x:128.5566483,y:397.5397949},{x:126.8852463,y:394.5133362},{x:124.8594742,y:391.6261902},{x:122.9910049,y:388.6189575},{x:120.504631,y:382.5281982},{x:119.1972427,y:376.1178589},{x:119.0547104,y:372.875061},{x:119.2897568,y:369.6510315},{x:119.9299698,y:366.4787292},{x:121.0029984,y:363.3909607},{x:122.9761124,y:359.8041687},{x:125.5510788,y:356.6000061},{x:128.5915298,y:353.7098083},{x:131.9611282,y:351.0648499},{x:139.1423569,y:346.2359619},{x:146.0040054,y:341.5639648},{x:153.3126602,y:336.4172363},{x:160.8510056,y:331.6148376},{x:176.060997,y:322.2139587},{x:223.2120132,y:292.0619507},{x:241.0090103,y:281.0089722},{x:244.4554214,y:278.2832642},{x:248.0213699,y:275.5827026},{x:251.8383865,y:273.5125122},{x:253.8821487,y:272.9029541},{x:256.038002,y:272.677948},{x:255.5765762,y:275.73526},{x:254.4421158,y:278.3285828},{x:252.9171219,y:280.7803345},{x:251.2840042,y:283.4129639},{x:249.1513138,y:287.4288635},{x:247.2273636,y:291.7029724},{x:245.725502,y:296.1263123},{x:244.8589859,y:300.5899658},{x:244.4298477,y:307.2876587},{x:244.5635757,y:313.9535828},{x:245.2291336,y:320.570282},{x:246.3955154,y:327.1204224},{x:248.0315933,y:333.5866089},{x:250.1063919,y:339.951416},{x:252.5888138,y:346.1975098},{x:255.4478531,y:352.3074646},{x:262.1715469,y:364.0494385},{x:270.0290298,y:375.0382385},{x:278.7719803,y:385.1347656},{x:288.1519852,y:394.1999512},{x:294.92173,y:399.6752014},{x:302.1428604,y:404.5257263},{x:309.7718277,y:408.7135925},{x:317.7649918,y:412.2009583},{x:322.0982132,y:413.5901184},{x:326.4935989,y:414.2129517},{x:328.6687698,y:414.1019592},{x:330.8044205,y:413.6372986},{x:332.8823013,y:412.7649841},{x:334.8839798,y:411.4309692},{x:336.700325,y:409.4726868},{x:337.756813,y:407.2593689},{x:338.1652908,y:404.8675537},{x:338.0374832,y:402.3738403},{x:337.4851761,y:399.8547668},{x:336.6201553,y:397.3868713},{x:334.3989944,y:392.9109497},{x:331.2719803,y:388.0760193},{x:327.7468643,y:383.5949097},{x:319.7087479,y:375.5498352},{x:310.6974869,y:368.4870605},{x:301.1259842,y:362.1179504},{x:289.341011,y:355.3789673},{x:288.3749161,y:354.5166321},{x:287.4871292,y:353.3829651},{x:287.1665115,y:352.1690369},{x:287.3716812,y:351.5917053},{x:287.9019852,y:351.0659485},{x:290.0786819,y:350.5000305},{x:292.8593826,y:350.8098145},{x:295.6623917,y:351.5259399},{x:297.9060135,y:352.1789551},{x:300.6676102,y:353.0059814},{x:303.7700882,y:354.0613708},{x:310.5398636,y:356.3453369},{x:313.9782486,y:357.3178101},{x:317.2997208,y:358.0065918},{x:320.3897781,y:358.2836609},{x:323.1339798,y:358.0209656},{x:311.4509048,y:349.4853516},{x:299.2507401,y:341.6953125},{x:286.5124283,y:334.8171387},{x:273.215004,y:329.0169678},{x:258.7229996,y:323.8179626},{x:257.2878494,y:323.337738},{x:255.7744827,y:322.6670837},{x:254.4943924,y:321.7168884},{x:253.7590103,y:320.3979492},{x:253.827034,y:319.0723267},{x:254.5322647,y:317.7234802},{x:255.711647,y:316.3885193},{x:257.2022476,y:315.1045837},{x:260.465126,y:312.8383789},{x:261.9114456,y:311.9303589},{x:263.0170059,y:311.2219543},{x:271.8112259,y:305.8678284},{x:281.198616,y:301.1617126},{x:290.8884659,y:297.0829773},{x:300.590004,y:293.6109619},{x:310.0823746,y:291.1308289},{x:319.4608536,y:289.9150696},{x:328.9314041,y:289.7652893},{x:338.6999893,y:290.4829712},{x:354.2659988,y:293.3499451},{x:355.8602982,y:293.1119995},{x:357.197731,y:292.2803345},{x:358.3595047,y:291.0731506},{x:359.4267349,y:289.7085876},{x:360.4805679,y:288.4048157},{x:361.6021194,y:287.3800049},{x:362.8725357,y:286.8523254},{x:364.3729935,y:287.0399475},{x:365.9158707,y:287.8427734},{x:367.3995438,y:289.0066833},{x:370.1699905,y:292.0510864},{x:372.6456985,y:295.4399109},{x:374.788002,y:298.4399719},{x:394.8579788,y:325.8149719},{x:397.3873978,y:329.0663757},{x:399.9987259,y:332.6233521},{x:402.1026993,y:336.3991089},{x:402.7802811,y:338.3419189},{x:403.109993,y:340.3069458},{x:403.7992325,y:340.2913818},{x:404.1172256,y:340.3743286},{x:404.2001114,y:340.691864},{x:404.1839981,y:341.3799744},{x:405.9170609,y:342.5977478},{x:407.5672379,y:344.3135681},{x:410.6323624,y:348.6974487},{x:413.4063187,y:353.4481201},{x:414.6925125,y:355.6223755},{x:415.9159927,y:357.4819641},{x:446.1409988,y:402.5239563},{x:447.8941116,y:404.6854248},{x:449.9755325,y:406.9086609},{x:454.483345,y:411.5653381},{x:456.5896683,y:414.0111694},{x:458.3842239,y:416.5435791},{x:459.7070389,y:419.1687927},{x:460.3980179,y:421.8929749},{x:460.330513,y:423.2209473},{x:459.8673782,y:424.4043274},{x:458.1563797,y:426.4813232},{x:456.0694046,y:428.4118958},{x:454.4110184,y:430.4839478},{x:453.6341629,y:432.6287231},{x:453.2503738,y:434.9552002},{x:452.6709671,y:439.6079712},{x:451.6133499,y:443.3995361},{x:450.0984573,y:447.2178345},{x:448.1988602,y:450.8544312},{x:445.9870071,y:454.1009521},{x:445.2327957,y:454.9499512},{x:444.120369,y:456.1347046},{x:441.6337357,y:459.0782166},{x:440.6658401,y:460.6203003},{x:440.1524734,y:462.0648193},{x:440.2967911,y:463.3034973},{x:441.3020096,y:464.2279663},{x:443.0089798,y:464.4325867},{x:444.7705154,y:463.7559509},{x:446.3872757,y:462.6180725},{x:447.6599808,y:461.4389648},{x:449.96418,y:458.7336426},{x:451.896492,y:455.7789612},{x:454.7979813,y:449.3179626},{x:455.2873001,y:447.6248474},{x:455.8775101,y:445.8508301},{x:456.8382034,y:444.3796387},{x:458.4389725,y:443.5949707},{x:460.0345535,y:443.7620239},{x:461.7698441,y:444.6128235},{x:463.5780106,y:445.9676208},{x:465.3921585,y:447.6465759},{x:468.7708817,y:451.2580566},{x:470.2016678,y:452.8309631},{x:471.3709793,y:454.0089722},{x:478.8518143,y:460.0104675},{x:486.9943924,y:465.3340759},{x:495.4878006,y:470.1171265},{x:504.0210037,y:474.4969482},{x:509.5540848,y:477.1457214},{x:515.2860184,y:479.3189697},{x:516.4008255,y:479.6032104},{x:517.6022415,y:479.6870728},{x:518.5872879,y:479.3061523},{x:519.0529861,y:478.1959534},{x:518.8626175,y:476.8864441},{x:518.1857986,y:475.7019958},{x:515.84095,y:473.7122192},{x:512.9545975,y:472.234314},{x:510.4629593,y:471.2759705},{x:507.6074905,y:470.256958},{x:504.0599442,y:468.8930969},{x:496.255867,y:465.2143555},{x:492.682869,y:462.9411621},{x:489.7850418,y:460.4066467},{x:487.9041214,y:457.6316223},{x:487.4518509,y:456.1604309},{x:487.3819656,y:454.6369629},{x:491.1286697,y:455.6597595},{x:494.7612381,y:457.2131958},{x:498.3274002,y:458.9732666},{x:501.8750076,y:460.6159668},{x:508.6896439,y:463.2619934},{x:515.7986526,y:465.5415649},{x:523.0577469,y:467.2131042},{x:530.3230057,y:468.0349731},{x:536.5177689,y:468.0764465},{x:542.669014,y:467.3979492},{x:543.9200516,y:466.9833069},{x:545.0242386,y:466.2348328},{x:545.5588455,y:465.2004089},{x:545.1009598,y:463.927948},{x:544.175972,y:463.0953064},{x:542.9511795,y:462.4622803},{x:539.9430008,y:461.6712036},{x:536.7585526,y:461.3072815},{x:534.0799637,y:461.1229553},{x:520.8706131,y:459.9545898},{x:514.2815628,y:459.0859985},{x:507.7789993,y:457.8509521},{x:506.4525833,y:457.5542603},{x:504.8121414,y:457.1582336},{x:501.1944656,y:455.9819641},{x:499.5198441,y:455.1585083},{x:498.1362991,y:454.1494141},{x:497.1952591,y:452.9331055},{x:496.8479691,y:451.4879456},{x:497.117012,y:450.6549377},{x:497.8393021,y:450.1732788},{x:500.1341019,y:449.9840698},{x:502.7133255,y:450.3605652},{x:503.7911453,y:450.5859985},{x:504.557991,y:450.7429504},{x:511.3823318,y:451.3563843},{x:518.3227615,y:451.0169373},{x:525.2244949,y:449.9740295},{x:531.932991,y:448.4769592},{x:532.8128738,y:448.2760315},{x:534.1250076,y:447.9761353},{x:537.3393631,y:447.0833435},{x:538.8882523,y:446.4923706},{x:540.1627884,y:445.8063354},{x:540.9862747,y:445.0262146},{x:541.1820145,y:444.1529541},{x:540.6489334,y:443.4705505},{x:539.4853592,y:443.0022888},{x:537.8792191,y:442.7068176},{x:536.0183792,y:442.5428467},{x:532.2842484,y:442.4439392},{x:530.7866898,y:442.4263916},{x:529.7860184,y:442.3749695},{x:522.7177811,y:441.8120117},{x:515.5401077,y:441.6993408},{x:501.2470169,y:442.2559509},{x:498.6232986,y:442.5908508},{x:495.6024857,y:442.9595947},{x:492.7076492,y:442.7930298},{x:491.4709549,y:442.3311157},{x:490.4619827,y:441.5219727},{x:489.3800125,y:439.9010925},{x:488.6179276,y:438.0290833},{x:487.6418533,y:433.8266907},{x:486.7113724,y:429.5046997},{x:486.0061722,y:427.4831848},{x:485.0039749,y:425.6529541},{x:464.5570145,y:397.51297},{x:441.859993,y:359.0939636},{x:419.5407486,y:322.4837036},{x:397.7539749,y:285.5569458},{x:392.6534195,y:277.3995361},{x:387.2727432,y:269.1647034},{x:382.4174271,y:260.6722412},{x:380.4385147,y:256.2730713},{x:378.8929825,y:251.7419434},{x:378.4342422,y:247.8017578},{x:378.8919754,y:243.618103},{x:379.8762283,y:239.4705811},{x:380.9969864,y:235.6389771},{x:388.6119766,y:208.7999878},{x:391.0815811,y:198.9997559},{x:393.3593521,y:188.8963623},{x:395.3594131,y:178.5748901},{x:396.9958572,y:168.1204834},{x:398.1828384,y:157.6182251},{x:398.8344498,y:147.1533203},{x:398.8647842,y:136.8108521},{x:398.1879959,y:126.6759644},{x:395.2633438,y:103.3844604},{x:393.3301468,y:91.60638428},{x:390.9952469,y:79.85656738},{x:388.1928177,y:68.22253418},{x:384.8570328,y:56.79168701},{x:380.9220352,y:45.65136719},{x:376.3219986,y:34.88897705},{x:371.1558609,y:23.22259521},{x:366.6760025,y:11.27197266},{x:365.8827591,y:9.214355469},{x:365.0445023,y:6.805603027},{x:364.7049942,y:4.406799316},{x:364.892189,y:3.323974609},{x:365.4079971,y:2.378967285},{x:366.5955276,y:1.439331055},{x:368.2348099,y:.826660156},{x:372.3311234,y:.333557129},{x:376.6218643,y:.40246582},{x:378.5041885,y:.4921875},{x:380.0319901,y:.535949707},{x:420.2889786,y:0},{x:527.1040115,y:0},{x:558.0751419,y:.09362793},{x:573.5140457,y:.204589844},{x:588.6629715,y:.352966309},{x:588.6629715,y:.352966309}],lineaPoints=points.map(a=>new DataPoint(a.x,a.y));function numericOdeSolvers1(){return numericOdeSolvers("Numeric ODE solvers","y'=y, y(0)=1",0,1,Math.exp,(a,s)=>s)}function numericOdeSolvers2(){return numericOdeSolvers("Numeric ODE solvers","y'=x, y(0)=0",0,0,a=>.5*a*a,(a,s)=>a)}function numericOdeSolvers3(){return numericOdeSolvers("Numeric ODE solvers","y'=cos(x), y(0)=0",0,0,Math.sin,(a,s)=>Math.cos(a))}function trainSchedule(){const a=new PlotModel({title:"Train schedule",subtitle:"Bergensbanen (Oslo-Bergen, Norway)",isLegendVisible:!1,plotAreaBorderColor:OxyColors.LightGray}),s=new LinearAxis({position:AxisPosition.Left,minimum:-20,maximum:540,title:"Distance from Oslo S",isAxisVisible:!0});a.axes.push(s);const d=new CustomAxis({majorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColors.LightGray,minimum:s.minimum,maximum:s.maximum,position:AxisPosition.Right,isPanEnabled:!1,isZoomEnabled:!1,majorTickSize:0});s.axisChanged=(_,M)=>{d.minimum=s.actualMinimum,d.maximum=s.actualMaximum},a.axes.push(d),a.axes.push(new TimeSpanAxis({position:AxisPosition.Bottom,minimum:0,maximum:TimeSpanAxis.toDouble(TimeSpan.fromHours(24)),stringFormatter:_=>Math.abs(_.hours).toString().padStart(2,"0"),title:"Time",majorStep:TimeSpanAxis.toDouble(TimeSpan.fromHours(1)),minorStep:TimeSpanAxis.toDouble(TimeSpan.fromMinutes(10)),tickStyle:TickStyle.None,majorGridlineStyle:LineStyle.Solid,majorGridlineColor:OxyColors.LightGray,minorGridlineStyle:LineStyle.Solid,minorGridlineColor:OxyColor.fromArgb(255,240,240,240)}));const m=`Stasjon;km;moh;609;61;601;1405;607;603;63;605;62;602;608;604;64;610;1404;606
Oslo;0.00;4.0;0631;0811;1037;;1227;1437;1609;2311;1432;1736;1956;2210;2236;2348;;0626
Lysaker;7.00;7.5;0642;0822;1048;;1238;1448;1620;2322;1420;1724;1944;2158;2224;;;
Asker;23.83;104.6;0653;0832;1059;;1249;1458;1630;2334;1409;1713;1932;2144;2214;2324;;0555
Drammen;52.86;2.2;0708;0846;1115;;1303;1513;1645;2351;1354;1701;1914;2125;2201;2307;;0540
Hokksund;70.22;8.0;;;1136;;1320;1531;;0007;;1638;1854;2111;2140;;;0525
Vikersund;95.91;67.1;;;1158;;1349;1552;;0029;;1617;1833;2048;;;;0503
Hnefoss;124.21;96.8;0804;0937;1222;;1414;1619;1736;0056;1304;1555;1811;2025;2100;2201;;0442
Fl;186.64;155.0;;;1314;;;1712;;;;1503;1715;1934;;2108;;0349
Nesbyen;220.06;168.8;;1045;1340;;1532;1744;1845;0223;1152;1436;1643;1909;1949;2041;;0321
Gol;237.02;207.4;0930;1100;1354;;1545;1800;1900;0239;1141;1423;1630;1858;1938;2028;;0308
l;262.85;436.6;0950;1123;1419;1520;1608;1832;1921;0305;1121;1400;1609;1833;1919;2007;1957;0246
Geilo;287.38;794.2;1013;1145;1442;1545;1630;1855;1942;0328;1059;1339;1547;1812;1857;1946;1939;0224
Ustaoset;299.31;990.6;;1156;1454;1556;1643;1905;1953;0341;1048;1326;1536;1800;1845;;1927;0209
Haugastl;310.14;988.0;1042;;1505;1606;1655;1916;;0352;;1315;1527;1750;;1922;;0158
Finse;336.74;1222.2;1108;1224;1526;1626;1717;1937;2021;0417;1019;1254;1508;1730;1818;1900;1854;0138
Hallingskeid;357.44;1110.1;1123;;1538;1637;1732;1950;;;;1239;1454;1711;;1842;1839;
Myrdal;370.44;866.8;1137;1253;1551;1650;1746;2003;2045;0445;0953;1225;1440;1657;1752;1828;1825;0105
;370.44;866.8;1220;1258;1556;1652;1751;2004;2047;0445;0950;1220;1439;1652;1750;1823;1822;0101
// Upsete;376.79;850.2;;;;;;;;;;;;;;;;
// Mjlfjell;388.86;627.2;;;;;;;;;;;;;;;;
Voss;419.96;56.5;1312;1343;1640;1738;1836;2048;2130;0537;0910;1139;1355;1608;1710;1736;1740;0015
Dale;459;43.4;;;;;1903;;2156;0608;0836;1109;;;;;;2344
Vaksdal;475.17;16.0;;;;;;;;0626;;;;;;;;2326
Arna;501.43;8.0;1410;1441;1740;1840;1935;2155;2228;0644;0806;1037;1248;1506;1606;1618;1637;2307
Bergen;526.64;3.9;1422;1442;1752;1850;1945;2204;2235;0656;0758;1028;1240;1458;1558;1610;1628;2258
`.split(`
`),f=m[0];m.splice(0,1);const g=f.split(";"),x=g.length-3,w=new LineSeries({strokeThickness:0,markerType:MarkerType.Circle,markerFill:OxyColor.fromAColor(200,OxyColors.Black),markerSize:4}),C=new Array(x);for(let _=0;_<C.length;_++)C[_]=new LineSeries({title:g[3+_],color:OxyColor.fromAColor(180,OxyColors.Black),strokeThickness:2,trackerStringFormatter:M=>`Train ${M.title}
Time: ${formatTimeSpan(M.xValue,"hh:mm:ss")}
Distance from Oslo S: ${M.yValue.toFixed(1)} km`}),a.series.push(C[_]);for(const _ of m){if(!_||_.startsWith("//"))continue;const M=_.split(";"),P=M[0],E=parseFloat(M[1]);P&&(d.majorTicks.push(E),d.labels.push(P));for(let R=0;R<C.length;R++){const B=M[R+3];if(!B)continue;const z=parseInt(B),F=TimeSpan.from(0,Math.floor(z/100),z%100,0),I=TimeSpanAxis.toDouble(F);C[R].points.push(new DataPoint(I,E)),w.points.push(new DataPoint(I,E))}}const A=TimeSpanAxis.toDouble(TimeSpan.fromHours(24));for(const _ of a.series)if(_ instanceof DataPointSeries){for(let M=0;M+1<_.points.length;M++)if(Math.abs(_.points[M].x-_.points[M+1].x)>A/2){let P=_.points[M].x;P>A/2&&(P-=A);let E=_.points[M+1].x;E>A/2&&(E-=A);const R=_.points[M].y+(_.points[M+1].y-_.points[M].y)/(E-P)*(0-P);_.points.splice(M+1,0,new DataPoint(P<E?0:A,R)),_.points.splice(M+1,0,new DataPoint(Number.NaN,R)),_.points.splice(M+1,0,new DataPoint(P<E?A:0,R)),M+=3}}return console.log(d),a.series.push(w),a}function laLineaAreaSeries(){const a=new PlotModel({title:"La Linea",plotType:PlotType.Cartesian,background:OxyColor.fromRgb(84,98,207)});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-500,maximum:1e3}));const s=new AreaSeries({fill:OxyColors.White,strokeThickness:0});return s.points.push(...lineaPoints),a.series.push(s),a}function laLinea(){const a=new PlotModel({title:"La Linea",plotType:PlotType.Cartesian,background:OxyColor.fromRgb(84,98,207)});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-500,maximum:1e3}));const s=new LineSeries({color:OxyColors.White,strokeThickness:1.5});return s.points.push(...lineaPoints),a.series.push(s),a}function conwayLife(){const a=new PlotModel({title:"Conway's Game of Life",subtitle:"Click the mouse to step to the next generation."});a.axes.push(new LinearAxis({position:AxisPosition.Left,startPosition:1,endPosition:0})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom}));const s=40,d=40;let m=create2DArray(d,s,0);const f=new MatrixSeries({matrix:m}),g=(_,M)=>{m[_][M]=m[_][M+1]=m[_][M+2]=1},x=(_,M)=>{m[_][M]=m[_+1][M+1]=m[_+1][M+2]=m[_+2][M]=m[_+2][M+1]=1},w=(_,M)=>{m[_][M+1]=m[_][M+2]=m[_+1][M]=m[_+1][M+1]=m[_+2][M+1]=1};g(2,10),x(2,2),w(20,20),a.series.push(f);let C=0;const A=()=>{const _=create2DArray(d,s,0);for(let M=1;M<s-1;M++)for(let P=1;P<d-1;P++){const E=m[M-1][P-1]+m[M-1][P]+m[M-1][P+1]+m[M][P-1]+m[M][P+1]+m[M+1][P-1]+m[M+1][P]+m[M+1][P+1];if(m[M][P]===0&&E===3){_[M][P]=1;continue}m[M][P]===1&&(E===2||E===3)&&(_[M][P]=1)}C++,f.title="Generation "+C,f.matrix=m=_,a.invalidatePlot(!0)};return a.mouseDown=(_,M)=>{M.changedButton===OxyMouseButton.Left&&(A(),M.handled=!0)},a}function elephantCurve(){const a=Math.sin,s=f=>-27/5*a(3/2-30*f)-16/3*a(9/8-29*f)-29/5*a(5/4-27*f)-8/3*a(1/4-26*f)-25/7*a(1/3-25*f)-31/4*a(4/7-22*f)-25/4*a(4/3-20*f)-33/2*a(2/3-19*f)-67/4*a(6/5-16*f)-100/11*a(1/4-10*f)-425/7*a(1-4*f)+149/4*a(8*f)+1172/3*a(f+21/5)+661/11*a(2*f+3)+471/8*a(3*f+10/7)+211/7*a(5*f+13/4)+39/4*a(6*f+10/7)+139/10*a(7*f+7/6)+77/3*a(9*f+18/7)+135/8*a(11*f+1/2)+23/4*a(12*f+8/5)+95/4*a(13*f+4)+31/4*a(14*f+3/5)+67/11*a(15*f+7/3)+127/21*a(17*f+17/4)+95/8*a(18*f+7/8)+32/11*a(21*f+8/3)+81/10*a(23*f+45/11)+13/3*a(24*f+13/4)+7/4*a(28*f+3/2)+11/5*a(31*f+5/2)+1/3*a(32*f+12/5)+13/4*a(33*f+22/5)+14/3*a(34*f+9/4)+9/5*a(35*f+8/5)+17/9*a(36*f+22/5)+1/3*a(37*f+15/7)+3/2*a(38*f+39/10)+4/3*a(39*f+7/2)+5/3*a(40*f+17/6),d=f=>-13/7*a(1/2-40*f)-31/8*a(1/11-34*f)-12/5*a(1/4-31*f)-9/4*a(4/3-29*f)-5/3*a(4/3-28*f)-11/2*a(6/5-26*f)-17/7*a(3/2-25*f)-5/2*a(1-24*f)-39/7*a(1-19*f)-59/5*a(2/3-18*f)-179/9*a(13/12-12*f)-103/2*a(1/10-9*f)-356/5*a(1-5*f)-429/2*a(20/19-f)+288/5*a(2*f+10/3)+53/6*a(3*f+5/2)+351/7*a(4*f+5/2)+201/4*a(6*f+17/7)+167/3*a(7*f+19/5)+323/5*a(8*f+1/4)+153/7*a(10*f+2/3)+71/5*a(11*f+6/5)+47/12*a(13*f+11/5)+391/26*a(14*f+2)+164/11*a(15*f+1/7)+11/2*a(16*f+2/3)+31/3*a(17*f+1/7)+54/11*a(20*f+1/4)+43/5*a(21*f+13/3)+13/5*a(22*f+3/2)+17/5*a(23*f+11/5)+19/10*a(27*f+4)+15/2*a(30*f+55/18)+4/3*a(32*f+3/5)+5/3*a(33*f+4)+27/7*a(35*f+13/6)+1/4*a(36*f+43/11)+16/5*a(37*f+9/2)+20/19*a(38*f+23/6)+8/3*a(39*f+4/7),m=new PlotModel({title:"Elephant curve",plotType:PlotType.Cartesian});return m.series.push(FunctionSeries.fromFxFyN(s,d,0,Math.PI*2,1e3)),m}function piCurve(){const a=Math.sin,s=f=>17/31*a(235/57-32*f)+19/17*a(192/55-30*f)+47/32*a(69/25-29*f)+35/26*a(75/34-27*f)+6/31*a(23/10-26*f)+35/43*a(10/33-25*f)+126/43*a(421/158-24*f)+143/57*a(35/22-22*f)+106/27*a(84/29-21*f)+88/25*a(23/27-20*f)+74/27*a(53/22-19*f)+44/53*a(117/25-18*f)+126/25*a(88/49-17*f)+79/11*a(43/26-16*f)+43/12*a(41/17-15*f)+47/27*a(244/81-14*f)+8/5*a(79/19-13*f)+373/46*a(109/38-12*f)+1200/31*a(133/74-11*f)+67/24*a(157/61-10*f)+583/28*a(13/8-8*f)+772/35*a(59/16-7*f)+3705/46*a(117/50-6*f)+862/13*a(19/8-5*f)+6555/34*a(157/78-3*f)+6949/13*a(83/27-f)-6805/54*a(2*f+1/145)-5207/37*a(4*f+49/74)-1811/58*a(9*f+55/43)-63/20*a(23*f+2/23)-266/177*a(28*f+13/18)-2/21*a(31*f+7/16),d=f=>70/37*a(65/32-32*f)+11/12*a(98/41-31*f)+26/29*a(35/12-30*f)+54/41*a(18/7-29*f)+177/71*a(51/19-27*f)+59/34*a(125/33-26*f)+49/29*a(18/11-25*f)+151/75*a(59/22-24*f)+52/9*a(118/45-22*f)+52/33*a(133/52-21*f)+37/45*a(61/14-20*f)+143/46*a(144/41-19*f)+254/47*a(19/52-18*f)+246/35*a(92/25-17*f)+722/111*a(176/67-16*f)+136/23*a(3/19-15*f)+273/25*a(32/21-13*f)+229/33*a(117/28-12*f)+19/4*a(43/11-11*f)+135/8*a(23/10-10*f)+205/6*a(33/23-8*f)+679/45*a(55/12-7*f)+101/8*a(11/12-6*f)+2760/59*a(40/11-5*f)+1207/18*a(21/23-4*f)+8566/27*a(39/28-3*f)+12334/29*a(47/37-2*f)+15410/39*a(185/41-f)-596/17*a(9*f+3/26)-247/28*a(14*f+25/21)-458/131*a(23*f+21/37)-41/36*a(28*f+7/8),m=new PlotModel({title:"PI curve",plotType:PlotType.Cartesian});return m.series.push(FunctionSeries.fromFxFyN(s,d,0,Math.PI*2,1e3)),m}function numericOdeSolvers(a,s,d,m,f,g){const x=new PlotModel({title:a,subtitle:s}),w=new Legend({legendPosition:LegendPosition.BottomCenter,legendPlacement:LegendPlacement.Outside,legendOrientation:LegendOrientation.Horizontal});x.legends.push(w);const C=FunctionSeries.fromN(f,0,4,100);Object.assign(C,{title:"Exact solution",strokeThickness:5}),x.series.push(C);const A=new LineSeries({title:"Euler, h=0.25",markerType:MarkerType.Circle,markerFill:OxyColors.Black});A.points.push(...euler(g,d,m,4,.25)),x.series.push(A);const _=new LineSeries({title:"Heun, h=0.25",markerType:MarkerType.Circle,markerFill:OxyColors.Black});_.points.push(...heun(g,d,m,4,.25)),x.series.push(_);const M=new LineSeries({title:"Midpoint, h=0.25",markerType:MarkerType.Circle,markerFill:OxyColors.Black});M.points.push(...midpoint(g,d,m,4,.25)),x.series.push(M);const P=new LineSeries({title:"RK4, h=0.25",markerType:MarkerType.Circle,markerFill:OxyColors.Black});return P.points.push(...rungeKutta4(g,d,m,4,.25)),x.series.push(P),x.axes.push(new LinearAxis({position:AxisPosition.Left})),x}function euler(a,s,d,m,f){const g=[];let x=d;for(let w=s;w<m+f/2;w+=f)g.push(new DataPoint(w,x)),x+=f*a(w,x);return g}function heun(a,s,d,m,f){const g=[];let x=d;for(let w=s;w<m+f/2;w+=f){g.push(new DataPoint(w,x));const C=x+f*a(w,x);x=x+f/2*(a(w,x)+a(w+f,C))}return g}function midpoint(a,s,d,m,f){const g=[];let x=d;for(let w=s;w<m+f/2;w+=f)g.push(new DataPoint(w,x)),x+=f*a(w+f/2,x+f/2*a(w,x));return g}function rungeKutta4(a,s,d,m,f){const g=[];let x=d;for(let w=s;w<m+f/2;w+=f){g.push(new DataPoint(w,x));const C=f*a(w,x),A=f*a(w+f/2,x+C/2),_=f*a(w+f/2,x+A/2),M=f*a(w+f,x+_);x+=(C+2*A+2*_+M)/6}return g}class CustomAxis extends LinearAxis{constructor(d){super(d);$t(this,"majorTicks",[]);$t(this,"minorTicks",[]);$t(this,"labels",[])}getTickValues(){const d=this.majorTicks.filter(g=>g>=this.actualMinimum&&g<=this.actualMaximum),m=this.minorTicks.filter(g=>g>=this.actualMinimum&&g<=this.actualMaximum);return{majorTickValues:d,minorTickValues:m,majorLabelValues:d}}formatValueOverride(d){return this.labels[this.majorTicks.indexOf(d)]}}const category$r="Misc",MiscExamples={category:category$r,examples:[{title:"Numeric ODE solvers (y'=y)",example:{model:numericOdeSolvers1}},{title:"Numeric ODE solvers (y'=x)",example:{model:numericOdeSolvers2}},{title:"Numeric ODE solvers (y'=cos(x))",example:{model:numericOdeSolvers3}},{title:"Train schedule",example:{model:trainSchedule}},{title:"La Linea (AreaSeries)",example:{model:laLineaAreaSeries}},{title:"La Linea (LineSeries)",example:{model:laLinea}},{title:"Conway's Game of Life",example:{model:conwayLife}},{title:"Elephant curve",example:{model:elephantCurve}},{title:"PI curve",example:{model:piCurve}}]};function test1(){const a=new PlotModel({title:"XKCD style plot",subtitle:"Install the 'Humor Sans' font for the best experience"});a.renderingDecorator=d=>new XkcdRenderingDecorator(d);const s=FunctionSeries.fromN(Math.sin,0,10,50,"sin(x)");return a.series.push(s),a}function test2(){const a=new PlotModel({title:"Test #2"});a.renderingDecorator=w=>new XkcdRenderingDecorator(w),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:8,title:"INTENSITY"})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"TIME"}));const s=new LineSeries({color:OxyColors.Cyan,strokeThickness:4}),d=new LineSeries({color:OxyColors.White,strokeThickness:14}),m=new LineSeries({color:OxyColors.Red,strokeThickness:4}),f=257,g=1,x=9;for(let w=0;w<f;w++){const C=g+(x-g)*w/(f-1),A=1.5+10*(Math.sin(C)*Math.sin(C)/Math.sqrt(C))*Math.exp(-.5*(C-5)*(C-5)),_=3+10*(Math.sin(C)*Math.sin(C)/Math.sqrt(C))*Math.exp(-.5*(C-7)*(C-7));s.points.push(new DataPoint(C,A)),d.points.push(new DataPoint(C,_)),m.points.push(new DataPoint(C,_))}return a.series.push(s,d,m),a}function test3(){const a=new PlotModel({title:"Test #3"});a.renderingDecorator=x=>new XkcdRenderingDecorator(x);const s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});a.legends.push(s);const d=new BarSeries({title:"Series 1",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1,xAxisKey:"x",yAxisKey:"y"});d.items.push(new BarItem({value:25})),d.items.push(new BarItem({value:137})),d.items.push(new BarItem({value:18})),d.items.push(new BarItem({value:40}));const m=new BarSeries({title:"Series 2",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1,xAxisKey:"x",yAxisKey:"y"});m.items.push(new BarItem({value:12})),m.items.push(new BarItem({value:14})),m.items.push(new BarItem({value:120})),m.items.push(new BarItem({value:26}));const f=new CategoryAxis({position:AxisPosition.Bottom,key:"y"});f.labels.push("Category A","Category B","Category C","Category D");const g=new LinearAxis({position:AxisPosition.Left,minimumPadding:0,maximumPadding:.06,absoluteMinimum:0,key:"x"});return a.series.push(d),a.series.push(m),a.axes.push(f),a.axes.push(g),a}const category$q="XKCD",XkcdExamples={category:category$q,examples:[{title:"XKCD Test #1",example:{model:test1}},{title:"XKCD Test #2",example:{model:test2}},{title:"XKCD Test #3",example:{model:test3}}]},Misc=[MiscExamples,XkcdExamples];class HighLowItemGenerator{static mrProcess(s,d=100,m=.5,f=.7,g=.01){let x=d;const w=[],C=new Date;for(let A=0;A<s;A++){const _=-g*(x-d)+this.randomNormal(0,m),M=-g*(x-d)+this.randomNormal(0,f),P=-g*(x-d)+this.randomNormal(0,f),E=x,R=x=x+_,B=this.min(E,R,E+M,E+P),z=this.max(E,R,E+M,E+P),F=new Date(C.getTime()+A*1e3),I=DateTimeAxis.toDouble(F);w.push(createHighLowItem(I,z,B,E,R))}return w}static min(s,d,m,f){return Math.min(s,Math.min(d,Math.min(m,f)))}static max(s,d,m,f){return Math.max(s,Math.max(d,Math.max(m,f)))}static randomNormal(s,d){return this.inverseCumNormal(this.rand.next(),s,d)}static inverseCumNormal(s,d,m){const f=-39.69683028665376,g=220.9460984245205,x=-275.9285104469687,w=138.357751867269,C=-30.66479806614716,A=2.506628277459239,_=-54.47609879822406,M=161.5858368580409,P=-155.6989798598866,E=66.80131188771972,R=-13.28068155288572,B=-.007784894002430293,z=-.3223964580411365,F=-2.400758277161838,I=-2.549732539343734,L=4.374664141464968,W=2.938163982698783,G=.007784695709041462,q=.3224671290700398,K=2.445134137142996,Z=3.754408661907416,J=.02425,te=1-J;let Q,me;return s<J?(Q=Math.sqrt(-2*Math.log(s)),Q=(((((B*Q+z)*Q+F)*Q+I)*Q+L)*Q+W)/((((G*Q+q)*Q+K)*Q+Z)*Q+1)):s<=te?(Q=s-.5,me=Q*Q,Q=(((((f*me+g)*me+x)*me+w)*me+C)*me+A)*Q/(((((_*me+M)*me+P)*me+E)*me+R)*me+1)):(Q=Math.sqrt(-2*Math.log(1-s)),Q=-(((((B*Q+z)*Q+F)*Q+I)*Q+L)*Q+W)/((((G*Q+q)*Q+K)*Q+Z)*Q+1)),me=(this.cumN0(Q)-s)*Math.sqrt(2)*Math.sqrt(Math.PI)*Math.exp(.5*Q*Q),Q-=me/(1+.5*Q*me),d+Q*m}static cumN0(s){const d=.31938153,m=-.356563782,f=1.781477937,g=-1.821255978,x=1.330274429,w=.2316419,C=.39894228;if(s>=0){const A=1/(1+w*s);return 1-C*Math.exp(-s*s/2)*A*(A*(A*(A*(A*x+g)+f)+m)+d)}else{const A=1/(1-w*s);return C*Math.exp(-s*s/2)*A*(A*(A*(A*(A*x+g)+f)+m)+d)}}}$t(HighLowItemGenerator,"rand",new Random);function largeDataSetWide(){const a=new PlotModel({title:"Large Data Set (wide window)"}),s=new DateTimeAxis({position:AxisPosition.Bottom});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});a.axes.push(d);const m=1e5,f=HighLowItemGenerator.mrProcess(m),g=new CandleStickSeries({color:OxyColors.Black,increasingColor:OxyColors.DarkGreen,decreasingColor:OxyColors.Red,dataFieldX:"Time",dataFieldHigh:"H",dataFieldLow:"L",dataFieldOpen:"O",dataFieldClose:"C",trackerStringFormatter:A=>`High: ${A.high.toFixed(2)}
Low: ${A.low.toFixed(2)}
Open: ${A.open.toFixed(2)}
Close: ${A.close.toFixed(2)}`,itemsSource:f}),x=m-200,w=70;s.minimum=f[x].x,s.maximum=f[x+w].x;const C=f.slice(x,x+w);return d.minimum=Math.min(...C.map(A=>A.low)),d.maximum=Math.max(...C.map(A=>A.high)),a.series.push(g),s.axisChanged=(A,_)=>_adjustYExtent(g,s,d),a}function largeDataSetNarrow(){const a=new PlotModel({title:"Large Data Set (narrow window)"}),s=new DateTimeAxis({position:AxisPosition.Bottom});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});a.axes.push(d);const m=1e5,f=HighLowItemGenerator.mrProcess(m),g=new CandleStickSeries({color:OxyColors.Black,increasingColor:OxyColors.DarkGreen,decreasingColor:OxyColors.Red,trackerStringFormatter:x=>`High: ${x.high.toFixed(2)}
Low: ${x.low.toFixed(2)}
Open: ${x.open.toFixed(2)}
Close: ${x.close.toFixed(2)}`,itemsSource:f});return s.minimum=f[0].x,s.maximum=f[29].x,d.minimum=f.slice(0,30).map(x=>x.low).reduce((x,w)=>Math.min(x,w)),d.maximum=f.slice(0,30).map(x=>x.high).reduce((x,w)=>Math.max(x,w)),a.series.push(g),s.axisChanged=(x,w)=>_adjustYExtent(g,s,d),a}function smallDataSet(){const a=new PlotModel({title:"Small Data Set"}),s=new DateTimeAxis({position:AxisPosition.Bottom});a.axes.push(s);const d=new LinearAxis({position:AxisPosition.Left});a.axes.push(d);const m=100,f=HighLowItemGenerator.mrProcess(m),g=new CandleStickSeries({color:OxyColors.Black,increasingColor:OxyColors.DarkGreen,decreasingColor:OxyColors.Red,dataFieldX:"X",dataFieldHigh:"High",dataFieldLow:"Low",dataFieldOpen:"Open",dataFieldClose:"Close",trackerStringFormatter:x=>`High: ${x.high.toFixed(2)}
Low: ${x.low.toFixed(2)}
Open: ${x.open.toFixed(2)}
Close: ${x.close.toFixed(2)}`,itemsSource:f});return a.series.push(g),s.axisChanged=(x,w)=>_adjustYExtent(g,s,d),a}function simpleExample(){const a=DateTimeAxis.toDouble(new Date(2016,1,1)),s=new PlotModel({title:"Simple CandleStickSeries example"});s.axes.push(new DateTimeAxis({position:AxisPosition.Bottom,minimum:a-7,maximum:a+7})),s.axes.push(new LinearAxis({position:AxisPosition.Left}));const d=new CandleStickSeries;return d.items.push(createHighLowItem(a,100,80,92,94)),d.items.push(createHighLowItem(a+1,102,77,94,93)),d.items.push(createHighLowItem(a+2,99,85,93,93)),s.series.push(d),s}function _adjustYExtent(a,s,d){const m=s.actualMinimum,f=s.actualMaximum,g=a.findByX(m),x=a.findByX(f,g);let w=Number_MAX_VALUE,C=Number_MIN_VALUE;for(let M=g;M<=x;M++){const P=a.items[M];w=Math.min(w,P.low),C=Math.max(C,P.high)}const _=(C-w)*.1;d.zoom(w-_,C+_)}const category$p="CandleStickSeries",CandleStickSeriesExamples={category:category$p,tags:["Series"],examples:[{title:"Large Data Set (wide window)",example:{model:largeDataSetWide}},{title:"Large Data Set (narrow window)",example:{model:largeDataSetNarrow}},{title:"Small Set",example:{model:smallDataSet}},{title:"Simple CandleStickSeries example",example:{model:simpleExample}}]};function highLowSeries(){const a=new PlotModel({title:"HighLowSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new HighLowSeries({title:"HighLowSeries 1",color:OxyColors.Black}),m=new Random(314);let f=100;for(let g=0;g<24;g++){f=f+m.next()+.1;const x=f+10+m.next()*10,w=f-(10+m.next()*10),C=w+m.next()*(x-w),A=w+m.next()*(x-w);d.items.push({x:g,high:x,low:w,open:C,close:A})}return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,maximumPadding:.3,minimumPadding:.3})),a}function highLowSeriesDateTimeAxis(){const a=new PlotModel,s=DateTimeAxis.toDouble(new Date(2013,5,4)),d=getDateService(),m=new DateTimeAxis({position:AxisPosition.Bottom,minimum:s-.9,maximum:s+1.9,intervalType:DateTimeIntervalType.Days,majorStep:1,minorStep:1,stringFormatter:g=>d.format(g,"YYYY-MM-DD")});a.axes.push(m);const f=new HighLowSeries({trackerStringFormatter:g=>`X: ${d.format(g.xValue,"YYYY-MM-DD")}
High: ${g.high.toFixed(2)}
Low: ${g.low.toFixed(2)}
Open: ${g.open.toFixed(2)}
Close: ${g.close.toFixed(2)}`});return f.items.push(createHighLowItem(s,14,10,13,12.4)),f.items.push(createHighLowItem(s+1,17,8,12.4,16.3)),a.series.push(f),a}const category$o="HighLowSeries",HighLowSeriesExamples={category:category$o,tags:["Series"],examples:[{title:"HighLowSeries",example:{model:highLowSeries}},{title:"HighLowSeries (DateTime axis)",example:{model:highLowSeriesDateTimeAxis}}]};class OhlcvItemGenerator{static mrProcess(s,d=100,m=500,f=.5,g=.75,x=.01){let w=d;const C=[],A=new Date;for(let _=0;_<s;_++){const M=-x*(w-d)+this.randomNormal(0,f),P=w,R=(w=w+M)-P,B=m*Math.exp(Math.abs(R)/f),F=((R<0?-Math.min(-R/g,1):Math.min(R/g,1))+1)/2,I=F*B,L=(1-F)*B,W=new Date(A.getTime()+_*1e3),G=DateTimeAxis.toDouble(W);C.push(new OhlcvItem(G,I,L))}return C}static min(s,d,m,f){return Math.min(s,Math.min(d,Math.min(m,f)))}static max(s,d,m,f){return Math.max(s,Math.max(d,Math.max(m,f)))}static randomNormal(s,d){return HighLowItemGenerator.inverseCumNormal(this.rand.next(),s,d)}}$t(OhlcvItemGenerator,"rand",new Random);function justVolumeCombinedFixed(){return _createVolumeSeries("Just Volume (combined)",VolumeStyle.Combined,!1)}function justVolumeCombinedNatural(){return _createVolumeSeries("Just Volume (combined)",VolumeStyle.Combined,!0)}function justVolumeStackedFixed(){return _createVolumeSeries("Just Volume (stacked)",VolumeStyle.Stacked,!1)}function justVolumeStackedNatural(){return _createVolumeSeries("Just Volume (stacked)",VolumeStyle.Stacked,!0)}function justVolumePositiveNegativeFixed(){return _createVolumeSeries("Just Volume (+/-)",VolumeStyle.PositiveNegative,!1)}function justVolumePositiveNegativeNatural(){return _createVolumeSeries("Just Volume (+/-)",VolumeStyle.PositiveNegative,!0)}function _createVolumeSeries(a,s,d=!1,m=1e4){m=201;const f=new PlotModel({title:a}),g=new VolumeSeries({positiveColor:OxyColors.DarkGreen,negativeColor:OxyColors.Red,positiveHollow:!1,negativeHollow:!1,volumeStyle:s,title:"VolumeSeries"});for(const P of OhlcvItemGenerator.mrProcess(m))g.append(P);const x=m-200,w=m-120,C=g.items[x].x,A=g.items[w].x,_=new DateTimeAxis({position:AxisPosition.Bottom,minimum:C,maximum:A}),M=new LinearAxis({position:AxisPosition.Left,startPosition:0,endPosition:1,minimum:d?NaN:0,maximum:d?NaN:1e4});switch(s){case VolumeStyle.Combined:case VolumeStyle.Stacked:f.axes.push(_),f.axes.push(M);break;case VolumeStyle.PositiveNegative:M.minimum=d?NaN:-1e4,f.axes.push(_),f.axes.push(M);break}return f.series.push(g),f}const category$n="VolumeSeries",VolumeSeriesExamples={category:category$n,tags:["Series"],examples:[{title:"Just Volume (combined), fixed axis",example:{model:justVolumeCombinedFixed}},{title:"Just Volume (combined), natural axis",example:{model:justVolumeCombinedNatural}},{title:"Just Volume (stacked), fixed axis",example:{model:justVolumeStackedFixed}},{title:"Just Volume (stacked), natural axis",example:{model:justVolumeStackedNatural}},{title:"Just Volume (+/-), fixed axis",example:{model:justVolumePositiveNegativeFixed}},{title:"Just Volume (+/-), natural axis",example:{model:justVolumePositiveNegativeNatural}}]},FinancialSeries=[CandleStickSeriesExamples,HighLowSeriesExamples,VolumeSeriesExamples];function defaultStyle$2(){const a=new PlotModel({title:"AreaSeries with default style"});return a.series.push(createExampleAreaSeries()),a}function differentColors$1(){const a=new PlotModel({title:"AreaSeries with different stroke colors"}),s=createExampleAreaSeries();return s.color=OxyColors.Red,s.color2=OxyColors.Blue,a.series.push(s),a}function crossingLines(){const a=new PlotModel({title:"AreaSeries with crossing lines"}),s=new AreaSeries;return s.points.push(new DataPoint(0,50)),s.points.push(new DataPoint(10,140)),s.points.push(new DataPoint(20,60)),s.points2.push(new DataPoint(0,60)),s.points2.push(new DataPoint(5,80)),s.points2.push(new DataPoint(20,70)),a.series.push(s),a}function trackerFormatString$2(){const a=new PlotModel({title:"AreaSeries with custom TrackerFormatString"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"X-axis"})),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Y-axis"}));const s=createExampleAreaSeries();return s.title="X={2:0.0} Y={4:0.0}",s.trackerStringFormatter=d=>`X=${d.xValue.toFixed(1)} Y=${d.yValue.toFixed(1)}`,a.series.push(s),a}function constantBaseline(){const a=new PlotModel({title:"AreaSeries with constant baseline",subtitle:"Empty Points2, ConstantY2 = 0 (default)"}),s=new AreaSeries;return s.points.push(new DataPoint(0,50)),s.points.push(new DataPoint(10,140)),s.points.push(new DataPoint(20,60)),a.series.push(s),a}function constantBaselineNaN(){const a=new PlotModel({title:"AreaSeries with constant baseline",subtitle:"Empty Points2, ConstantY2 = NaN"}),s=new AreaSeries;return s.points.push(new DataPoint(0,50)),s.points.push(new DataPoint(10,140)),s.points.push(new DataPoint(20,60)),s.constantY2=Number.NaN,a.series.push(s),a}function constantBaselineItemsSource(){const a=new PlotModel({title:"AreaSeries with constant baseline",subtitle:"ItemsSource and DataField2 not set, ConstantY2 = -20"}),s=new AreaSeries,d=[new DataPoint(0,50),new DataPoint(10,140),new DataPoint(20,60)];return s.itemsSource=d,s.dataFieldX="x",s.dataFieldY="y",s.constantY2=-20,a.series.push(s),a}function lineSeriesAndAreaSeries(){const a=new PlotModel({title:"LineSeries and AreaSeries"}),s=new LinearAxis({position:AxisPosition.Bottom});a.axes.push(s);const d=new LinearAxis;a.axes.push(d);const m=new AreaSeries({fill:OxyColors.LightBlue,dataFieldX2:"Time",dataFieldY2:"Minimum",color:OxyColors.Red,strokeThickness:0,markerFill:OxyColors.Transparent,dataFieldX:"Time",dataFieldY:"Maximum"});m.points2.push(new DataPoint(0,-5.04135905692417)),m.points2.push(new DataPoint(2.5,-4.91731850813018)),m.points2.push(new DataPoint(5,-4.45266314658926)),m.points2.push(new DataPoint(7.5,-3.87303874542613)),m.points2.push(new DataPoint(10,-3.00101110255393)),m.points2.push(new DataPoint(12.5,-2.17980725503518)),m.points2.push(new DataPoint(15,-1.67332229254456)),m.points2.push(new DataPoint(17.5,-1.10537158549082)),m.points2.push(new DataPoint(20,-.6145459544447)),m.points2.push(new DataPoint(22.5,.120028106039404)),m.points2.push(new DataPoint(25,1.06357270435597)),m.points2.push(new DataPoint(27.5,1.87301405606466)),m.points2.push(new DataPoint(30,2.57569854952195)),m.points2.push(new DataPoint(32.5,3.59165537664278)),m.points2.push(new DataPoint(35,4.87991958133872)),m.points2.push(new DataPoint(37.5,6.36214537958714)),m.points2.push(new DataPoint(40,7.62564585126268)),m.points2.push(new DataPoint(42.5,8.69606320261772)),m.points2.push(new DataPoint(45,10.0118704438265)),m.points2.push(new DataPoint(47.5,11.0434480519236)),m.points2.push(new DataPoint(50,11.9794171576758)),m.points2.push(new DataPoint(52.5,12.9591851832621)),m.points2.push(new DataPoint(55,14.172107889304)),m.points2.push(new DataPoint(57.5,15.5520057698488)),m.points2.push(new DataPoint(60,17.2274942386092)),m.points2.push(new DataPoint(62.5,18.6983982186757)),m.points2.push(new DataPoint(65,20.4560332001448)),m.points2.push(new DataPoint(67.5,22.4867327382261)),m.points2.push(new DataPoint(70,24.5319674302041)),m.points2.push(new DataPoint(72.5,26.600547815813)),m.points2.push(new DataPoint(75,28.5210891459701)),m.points2.push(new DataPoint(77.5,30.6793080755413)),m.points2.push(new DataPoint(80,33.0546651200646)),m.points2.push(new DataPoint(82.5,35.3256065179713)),m.points2.push(new DataPoint(85,37.6336074839968)),m.points2.push(new DataPoint(87.5,40.2012266359763)),m.points2.push(new DataPoint(90,42.8923555399256)),m.points2.push(new DataPoint(92.5,45.8665211907432)),m.points2.push(new DataPoint(95,48.8200195945427)),m.points2.push(new DataPoint(97.5,51.8304284402311)),m.points2.push(new DataPoint(100,54.6969868542147)),m.points2.push(new DataPoint(102.5,57.7047292990632)),m.points2.push(new DataPoint(105,60.4216644602929)),m.points2.push(new DataPoint(107.5,62.926258762519)),m.points2.push(new DataPoint(110,65.1829734629407)),m.points2.push(new DataPoint(112.5,67.2365592083133)),m.points2.push(new DataPoint(115,69.5713628691022)),m.points2.push(new DataPoint(117.5,71.7267046705944)),m.points2.push(new DataPoint(120,73.633463102781)),m.points2.push(new DataPoint(122.5,75.4660150158061)),m.points2.push(new DataPoint(125,77.5669292504745)),m.points2.push(new DataPoint(127.5,79.564218544664)),m.points2.push(new DataPoint(130,81.8631309028078)),m.points2.push(new DataPoint(132.5,83.9698189969034)),m.points2.push(new DataPoint(135,86.3847886532009)),m.points2.push(new DataPoint(137.5,88.5559348267764)),m.points2.push(new DataPoint(140,91.0455050418365)),m.points2.push(new DataPoint(142.5,93.6964157585504)),m.points2.push(new DataPoint(145,96.284336864941)),m.points2.push(new DataPoint(147.5,98.7508602689723)),m.points2.push(new DataPoint(150,100.904510594255)),m.points2.push(new DataPoint(152.5,103.266136681506)),m.points2.push(new DataPoint(155,105.780951269521)),m.points2.push(new DataPoint(157.5,108.032859257065)),m.points2.push(new DataPoint(160,110.035478448093)),m.points2.push(new DataPoint(162.5,112.10655731615)),m.points2.push(new DataPoint(165,114.37480786097)),m.points2.push(new DataPoint(167.5,116.403992550869)),m.points2.push(new DataPoint(170,118.61663988727)),m.points2.push(new DataPoint(172.5,120.538730287384)),m.points2.push(new DataPoint(175,122.515721057177)),m.points2.push(new DataPoint(177.5,124.474386629124)),m.points2.push(new DataPoint(180,126.448283293214)),m.points2.push(new DataPoint(182.5,128.373811322299)),m.points2.push(new DataPoint(185,130.33627914667)),m.points2.push(new DataPoint(187.5,132.487933658477)),m.points2.push(new DataPoint(190,134.716989778456)),m.points2.push(new DataPoint(192.5,136.817287595392)),m.points2.push(new DataPoint(195,139.216488664698)),m.points2.push(new DataPoint(197.5,141.50803227574)),m.points2.push(new DataPoint(200,143.539586683614)),m.points2.push(new DataPoint(202.5,145.535911545221)),m.points2.push(new DataPoint(205,147.516964978686)),m.points2.push(new DataPoint(207.5,149.592416731684)),m.points2.push(new DataPoint(210,151.600983566512)),m.points2.push(new DataPoint(212.5,153.498210993362)),m.points2.push(new DataPoint(215,155.512606828247)),m.points2.push(new DataPoint(217.5,157.426564302774)),m.points2.push(new DataPoint(220,159.364474964172)),m.points2.push(new DataPoint(222.5,161.152806492128)),m.points2.push(new DataPoint(225,162.679069434562)),m.points2.push(new DataPoint(227.5,163.893622036741)),m.points2.push(new DataPoint(230,165.475827621238)),m.points2.push(new DataPoint(232.5,167.303960444734)),m.points2.push(new DataPoint(235,169.259393394952)),m.points2.push(new DataPoint(237.5,171.265193646758)),m.points2.push(new DataPoint(240,173.074304345192)),m.points2.push(new DataPoint(242.5,174.975492766814)),m.points2.push(new DataPoint(245,176.684088218484)),m.points2.push(new DataPoint(247.5,178.406887247603)),m.points.push(new DataPoint(0,5.0184649433561)),m.points.push(new DataPoint(2.5,5.27685959268215)),m.points.push(new DataPoint(5,5.81437064628786)),m.points.push(new DataPoint(7.5,6.51022475040994)),m.points.push(new DataPoint(10,7.49921246878766)),m.points.push(new DataPoint(12.5,8.41941631823751)),m.points.push(new DataPoint(15,9.09826907222079)),m.points.push(new DataPoint(17.5,9.89500750098145)),m.points.push(new DataPoint(20,10.6633345249404)),m.points.push(new DataPoint(22.5,11.6249613445368)),m.points.push(new DataPoint(25,12.8816391467497)),m.points.push(new DataPoint(27.5,13.9665185705603)),m.points.push(new DataPoint(30,14.8501816818724)),m.points.push(new DataPoint(32.5,16.0683128022441)),m.points.push(new DataPoint(35,17.5378799723172)),m.points.push(new DataPoint(37.5,19.1262752954039)),m.points.push(new DataPoint(40,20.4103953650735)),m.points.push(new DataPoint(42.5,21.5430627723891)),m.points.push(new DataPoint(45,22.9105459463366)),m.points.push(new DataPoint(47.5,23.9802361888719)),m.points.push(new DataPoint(50,24.8659461235003)),m.points.push(new DataPoint(52.5,25.7303194442439)),m.points.push(new DataPoint(55,26.7688545912359)),m.points.push(new DataPoint(57.5,28.0545112571933)),m.points.push(new DataPoint(60,29.7036634266394)),m.points.push(new DataPoint(62.5,31.2273634344467)),m.points.push(new DataPoint(65,33.1038196356519)),m.points.push(new DataPoint(67.5,35.2639893610328)),m.points.push(new DataPoint(70,37.434293559489)),m.points.push(new DataPoint(72.5,39.7109359368267)),m.points.push(new DataPoint(75,41.7573881676222)),m.points.push(new DataPoint(77.5,44.0460374479862)),m.points.push(new DataPoint(80,46.5098714746581)),m.points.push(new DataPoint(82.5,48.7754012129155)),m.points.push(new DataPoint(85,51.1619816926597)),m.points.push(new DataPoint(87.5,53.9036778414639)),m.points.push(new DataPoint(90,56.7448825012636)),m.points.push(new DataPoint(92.5,59.9294987878434)),m.points.push(new DataPoint(95,63.0148831289797)),m.points.push(new DataPoint(97.5,66.0721745989622)),m.points.push(new DataPoint(100,68.8980036274521)),m.points.push(new DataPoint(102.5,71.7719322611447)),m.points.push(new DataPoint(105,74.4206055336728)),m.points.push(new DataPoint(107.5,76.816198386632)),m.points.push(new DataPoint(110,79.0040432726983)),m.points.push(new DataPoint(112.5,80.9617606926066)),m.points.push(new DataPoint(115,83.1345574620341)),m.points.push(new DataPoint(117.5,85.0701022046479)),m.points.push(new DataPoint(120,86.8557530286516)),m.points.push(new DataPoint(122.5,88.5673387745243)),m.points.push(new DataPoint(125,90.6003321543338)),m.points.push(new DataPoint(127.5,92.439864576254)),m.points.push(new DataPoint(130,94.5383744861178)),m.points.push(new DataPoint(132.5,96.4600166864507)),m.points.push(new DataPoint(135,98.6091052949006)),m.points.push(new DataPoint(137.5,100.496459351478)),m.points.push(new DataPoint(140,102.705767030085)),m.points.push(new DataPoint(142.5,105.009994476992)),m.points.push(new DataPoint(145,107.31287026052)),m.points.push(new DataPoint(147.5,109.584842542272)),m.points.push(new DataPoint(150,111.641435600837)),m.points.push(new DataPoint(152.5,113.988459973544)),m.points.push(new DataPoint(155,116.50349048027)),m.points.push(new DataPoint(157.5,118.753612704274)),m.points.push(new DataPoint(160,120.801728924085)),m.points.push(new DataPoint(162.5,122.902486914165)),m.points.push(new DataPoint(165,125.104391935796)),m.points.push(new DataPoint(167.5,127.06056966547)),m.points.push(new DataPoint(170,129.217086578495)),m.points.push(new DataPoint(172.5,131.151968896274)),m.points.push(new DataPoint(175,133.159906275133)),m.points.push(new DataPoint(177.5,135.065263957561)),m.points.push(new DataPoint(180,137.041870026822)),m.points.push(new DataPoint(182.5,138.937477489811)),m.points.push(new DataPoint(185,140.776914926282)),m.points.push(new DataPoint(187.5,142.786975776398)),m.points.push(new DataPoint(190,144.862762377347)),m.points.push(new DataPoint(192.5,146.89654967049)),m.points.push(new DataPoint(195,149.204343821204)),m.points.push(new DataPoint(197.5,151.369748673527)),m.points.push(new DataPoint(200,153.324438580137)),m.points.push(new DataPoint(202.5,155.173148715344)),m.points.push(new DataPoint(205,157.0501827528)),m.points.push(new DataPoint(207.5,159.109122278359)),m.points.push(new DataPoint(210,161.044446932778)),m.points.push(new DataPoint(212.5,162.942364031841)),m.points.push(new DataPoint(215,164.966769883021)),m.points.push(new DataPoint(217.5,166.89711806788)),m.points.push(new DataPoint(220,168.906874949069)),m.points.push(new DataPoint(222.5,170.85692034995)),m.points.push(new DataPoint(225,172.602125010408)),m.points.push(new DataPoint(227.5,173.964258466598)),m.points.push(new DataPoint(230,175.629908385654)),m.points.push(new DataPoint(232.5,177.495778359378)),m.points.push(new DataPoint(235,179.432933300749)),m.points.push(new DataPoint(237.5,181.400180771342)),m.points.push(new DataPoint(240,183.232300309899)),m.points.push(new DataPoint(242.5,185.225502661441)),m.points.push(new DataPoint(245,186.979590140413)),m.points.push(new DataPoint(247.5,188.816640077725)),m.title="Maximum/Minimum",a.series.push(m);const f=new LineSeries({color:OxyColors.Blue,markerFill:OxyColors.Transparent,dataFieldX:"Time",dataFieldY:"Value"});return f.points.push(new DataPoint(0,-.011447056784037)),f.points.push(new DataPoint(2.5,.179770542275985)),f.points.push(new DataPoint(5,.6808537498493)),f.points.push(new DataPoint(7.5,1.31859300249191)),f.points.push(new DataPoint(10,2.24910068311687)),f.points.push(new DataPoint(12.5,3.11980453160117)),f.points.push(new DataPoint(15,3.71247338983811)),f.points.push(new DataPoint(17.5,4.39481795774531)),f.points.push(new DataPoint(20,5.02439428524784)),f.points.push(new DataPoint(22.5,5.87249472528812)),f.points.push(new DataPoint(25,6.97260592555283)),f.points.push(new DataPoint(27.5,7.91976631331247)),f.points.push(new DataPoint(30,8.71294011569719)),f.points.push(new DataPoint(32.5,9.82998408944345)),f.points.push(new DataPoint(35,11.208899776828)),f.points.push(new DataPoint(37.5,12.7442103374955)),f.points.push(new DataPoint(40,14.0180206081681)),f.points.push(new DataPoint(42.5,15.1195629875034)),f.points.push(new DataPoint(45,16.4612081950815)),f.points.push(new DataPoint(47.5,17.5118421203978)),f.points.push(new DataPoint(50,18.4226816405881)),f.points.push(new DataPoint(52.5,19.344752313753)),f.points.push(new DataPoint(55,20.47048124027)),f.points.push(new DataPoint(57.5,21.8032585135211)),f.points.push(new DataPoint(60,23.4655788326243)),f.points.push(new DataPoint(62.5,24.9628808265612)),f.points.push(new DataPoint(65,26.7799264178984)),f.points.push(new DataPoint(67.5,28.8753610496295)),f.points.push(new DataPoint(70,30.9831304948466)),f.points.push(new DataPoint(72.5,33.1557418763199)),f.points.push(new DataPoint(75,35.1392386567962)),f.points.push(new DataPoint(77.5,37.3626727617638)),f.points.push(new DataPoint(80,39.7822682973613)),f.points.push(new DataPoint(82.5,42.0505038654434)),f.points.push(new DataPoint(85,44.3977945883283)),f.points.push(new DataPoint(87.5,47.0524522387201)),f.points.push(new DataPoint(90,49.8186190205946)),f.points.push(new DataPoint(92.5,52.8980099892933)),f.points.push(new DataPoint(95,55.9174513617612)),f.points.push(new DataPoint(97.5,58.9513015195966)),f.points.push(new DataPoint(100,61.7974952408334)),f.points.push(new DataPoint(102.5,64.738330780104)),f.points.push(new DataPoint(105,67.4211349969828)),f.points.push(new DataPoint(107.5,69.8712285745755)),f.points.push(new DataPoint(110,72.0935083678195)),f.points.push(new DataPoint(112.5,74.0991599504599)),f.points.push(new DataPoint(115,76.3529601655682)),f.points.push(new DataPoint(117.5,78.3984034376212)),f.points.push(new DataPoint(120,80.2446080657163)),f.points.push(new DataPoint(122.5,82.0166768951652)),f.points.push(new DataPoint(125,84.0836307024042)),f.points.push(new DataPoint(127.5,86.002041560459)),f.points.push(new DataPoint(130,88.2007526944628)),f.points.push(new DataPoint(132.5,90.2149178416771)),f.points.push(new DataPoint(135,92.4969469740507)),f.points.push(new DataPoint(137.5,94.5261970891274)),f.points.push(new DataPoint(140,96.875636035961)),f.points.push(new DataPoint(142.5,99.3532051177711)),f.points.push(new DataPoint(145,101.798603562731)),f.points.push(new DataPoint(147.5,104.167851405622)),f.points.push(new DataPoint(150,106.272973097546)),f.points.push(new DataPoint(152.5,108.627298327525)),f.points.push(new DataPoint(155,111.142220874895)),f.points.push(new DataPoint(157.5,113.39323598067)),f.points.push(new DataPoint(160,115.418603686089)),f.points.push(new DataPoint(162.5,117.504522115157)),f.points.push(new DataPoint(165,119.739599898383)),f.points.push(new DataPoint(167.5,121.732281108169)),f.points.push(new DataPoint(170,123.916863232882)),f.points.push(new DataPoint(172.5,125.845349591829)),f.points.push(new DataPoint(175,127.837813666155)),f.points.push(new DataPoint(177.5,129.769825293343)),f.points.push(new DataPoint(180,131.745076660018)),f.points.push(new DataPoint(182.5,133.655644406055)),f.points.push(new DataPoint(185,135.556597036476)),f.points.push(new DataPoint(187.5,137.637454717438)),f.points.push(new DataPoint(190,139.789876077902)),f.points.push(new DataPoint(192.5,141.856918632941)),f.points.push(new DataPoint(195,144.210416242951)),f.points.push(new DataPoint(197.5,146.438890474634)),f.points.push(new DataPoint(200,148.432012631876)),f.points.push(new DataPoint(202.5,150.354530130282)),f.points.push(new DataPoint(205,152.283573865743)),f.points.push(new DataPoint(207.5,154.350769505022)),f.points.push(new DataPoint(210,156.322715249645)),f.points.push(new DataPoint(212.5,158.220287512602)),f.points.push(new DataPoint(215,160.239688355634)),f.points.push(new DataPoint(217.5,162.161841185327)),f.points.push(new DataPoint(220,164.135674956621)),f.points.push(new DataPoint(222.5,166.004863421039)),f.points.push(new DataPoint(225,167.640597222485)),f.points.push(new DataPoint(227.5,168.928940251669)),f.points.push(new DataPoint(230,170.552868003446)),f.points.push(new DataPoint(232.5,172.399869402056)),f.points.push(new DataPoint(235,174.346163347851)),f.points.push(new DataPoint(237.5,176.33268720905)),f.points.push(new DataPoint(240,178.153302327545)),f.points.push(new DataPoint(242.5,180.100497714128)),f.points.push(new DataPoint(245,181.831839179449)),f.points.push(new DataPoint(247.5,183.611763662664)),f.title="Average",a.series.push(f),a}function createExampleAreaSeries(){const a=new AreaSeries;return a.points.push(new DataPoint(0,50)),a.points.push(new DataPoint(10,40)),a.points.push(new DataPoint(20,60)),a.points2.push(new DataPoint(0,60)),a.points2.push(new DataPoint(5,80)),a.points2.push(new DataPoint(20,70)),a}const category$m="AreaSeries",AreaSeriesExamples={category:category$m,tags:["Series"],examples:[{title:"Default style",example:{model:defaultStyle$2}},{title:"Different stroke colors",example:{model:differentColors$1}},{title:"Crossing lines",example:{model:crossingLines}},{title:"Custom TrackerFormatString",example:{model:trackerFormatString$2}},{title:"Constant baseline (empty Points2)",example:{model:constantBaseline}},{title:"Constant baseline (empty Points2, ConstantY2=NaN)",example:{model:constantBaselineNaN}},{title:"Constant baseline (ItemsSource and DataField2 not set)",example:{model:constantBaselineItemsSource}},{title:"LineSeries and AreaSeries",example:{model:lineSeriesAndAreaSeries}}]};function withLabels(){const a=new PlotModel;a.title="With labels";const s=(x,w)=>x.value.toString(),d=new Random(1),m=[new BarSeries({labelStringFormatter:s,labelPlacement:LabelPlacement.Base,textColor:OxyColors.White,title:"Base"}),new BarSeries({labelStringFormatter:s,labelPlacement:LabelPlacement.Inside,textColor:OxyColors.White,title:"Inside"}),new BarSeries({labelStringFormatter:s,labelPlacement:LabelPlacement.Middle,textColor:OxyColors.White,title:"Middle"}),new BarSeries({labelStringFormatter:s,labelPlacement:LabelPlacement.Outside,title:"Outside"})];for(let x=0;x<4;x++)for(const w of m)w.items.push(BarItem.fromValue(d.next(-100,100)));const f=new CategoryAxis;f.position=AxisPosition.Left,f.labels.push("Category A","Category B","Category C","Category D");const g=new LinearAxis;g.position=AxisPosition.Bottom,g.minimumPadding=.06,g.maximumPadding=.06,g.extraGridlines=[0];for(const x of m)a.series.push(x);return a.axes.push(f),a.axes.push(g),a}function withLabelsAtAnAngle(){const a=withLabels();for(const s of a.series)s.labelAngle=-45;return a}const stackedSeries=()=>createSimpleModel(!0,"Simple stacked model"),multipleValueAxes=()=>{const a=new PlotModel({title:"Multiple Value Axes"}),s=new CategoryAxis({position:AxisPosition.Left}),d=new LinearAxis({title:"Value Axis 1",position:AxisPosition.Bottom,minimumPadding:.06,maximumPadding:.06,extraGridlines:[0],endPosition:.5,key:"x1"}),m=new LinearAxis({title:"Value Axis 2",position:AxisPosition.Bottom,minimumPadding:.06,maximumPadding:.06,extraGridlines:[0],startPosition:.5,key:"x2"});a.axes.push(s,d,m);const f=[new BarSeries({xAxisKey:"x1"}),new BarSeries({xAxisKey:"x1"}),new BarSeries({xAxisKey:"x2"}),new BarSeries({xAxisKey:"x2"})],g=new Random(1);for(const x of f){for(let w=0;w<4;w++)x.items.push(BarItem.fromValue(g.next(-100,100)));a.series.push(x)}return a},stackedMultipleValueAxes=()=>{const a=multipleValueAxes();a.title=`Stacked, ${a.title}`;for(const s of a.series)s.isStacked=!0;return a},multipleCategoryAxes=()=>{const a=new PlotModel({title:"Multiple Category Axes"});a.legends.push(new Legend({isLegendVisible:!0,legendPosition:LegendPosition.TopLeft,legendPlacement:LegendPlacement.Inside}));const s=new LinearAxis({position:AxisPosition.Bottom,key:"x",extraGridlines:[0]}),d=new CategoryAxis({title:"Category Axis 1",position:AxisPosition.Left,minimumPadding:.06,maximumPadding:.06,endPosition:.5,key:"y1"}),m=new CategoryAxis({title:"Category Axis 2",position:AxisPosition.Left,minimumPadding:.06,maximumPadding:.06,startPosition:.5,key:"y2"});a.axes.push(s,d,m);const f=[new BarSeries({yAxisKey:"y1",xAxisKey:"x",renderInLegend:!0,title:"Y1A"}),new BarSeries({yAxisKey:"y1",xAxisKey:"x",renderInLegend:!0,title:"Y1B"}),new BarSeries({yAxisKey:"y2",xAxisKey:"x",renderInLegend:!0,title:"Y2A"}),new BarSeries({yAxisKey:"y2",xAxisKey:"x",renderInLegend:!0,title:"Y2B"})],g=new Random;for(const x of f){for(let w=0;w<4;w++)x.items.push(BarItem.fromValue(g.next(-100,100)));a.series.push(x)}return a},stackedMultipleCategoryAxes=()=>{const a=multipleCategoryAxes();a.title=`Stacked, ${a.title}`;for(const s of a.series)s.isStacked=!0;return a},emptySeries=()=>{const a=new PlotModel({title:"Empty series"}),s=new BarSeries({title:"Series 1"}),d=new BarSeries({title:"Series 2"}),m=new CategoryAxis({position:AxisPosition.Left}),f=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0});return a.series.push(s,d),a.axes.push(m,f),a},noCategoryAxisDefined=()=>{const a=new PlotModel({title:"No category axis defined"}),s=new BarSeries({title:"Series 1",itemsSource:[BarItem.fromValue(25),BarItem.fromValue(137)]}),d=new BarSeries({title:"Series 2",itemsSource:[BarItem.fromValue(52),BarItem.fromValue(317)]}),m=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0});return a.series.push(s,d),a.axes.push(m),a},bindingItemsSource=()=>{const a=[{label:"Apples",value1:37,value2:12,value3:19},{label:"Pears",value1:7,value2:21,value3:9},{label:"Bananas",value1:23,value2:2,value3:29}],s=new PlotModel({title:"Binding to ItemsSource"}),d=new Legend({legendPlacement:LegendPlacement.Outside});s.legends.push(d);const m=new CategoryAxis({position:AxisPosition.Left,labelField:"label",itemsSource:a,majorStep:1,minorStep:1});s.axes.push(m);const f=new LinearAxis({position:AxisPosition.Bottom,absoluteMinimum:0,minimumPadding:0});s.axes.push(f);const g=new BarSeries({fillColor:OxyColor.fromArgb(255,78,154,6),valueField:"value1",title:"2009",itemsSource:a});s.series.push(g);const x=new BarSeries({fillColor:OxyColor.fromArgb(255,200,141,0),valueField:"value2",title:"2010",itemsSource:a});s.series.push(x);const w=new BarSeries({fillColor:OxyColor.fromArgb(255,204,0,0),valueField:"value3",title:"2011",itemsSource:a});return s.series.push(w),s},bindingToItemsSourceArray=()=>{const a=new PlotModel({title:"Binding to ItemsSource",subtitle:"The items are defined by an array of BarItem/ColumnItem"});return a.series.push(new BarSeries({title:"Series 1",itemsSource:[new BarItem({value:25}),new BarItem({value:137})]})),a.series.push(new BarSeries({title:"Series 2",itemsSource:[new BarItem({value:52}),new BarItem({value:317})]})),a.axes.push(new CategoryAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0})),a},bindingToItemsSourceListT=()=>{const a=new PlotModel({title:"Binding to ItemsSource",subtitle:"The items are defined by a List of BarItem/ColumnItem"});return a.series.push(new BarSeries({title:"Series 1",itemsSource:[new BarItem({value:25}),new BarItem({value:137})]})),a.series.push(new BarSeries({title:"Series 2",itemsSource:[new BarItem({value:52}),new BarItem({value:317})]})),a.axes.push(new CategoryAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0})),a},bindingToItemsSourceReflection=()=>{const a=new PlotModel({title:"Binding to ItemsSource",subtitle:"Reflect by 'ValueField'"});return a.series.push(new BarSeries({title:"Series 1",valueField:"value1",itemsSource:[{value1:25},{value1:137}]})),a.series.push(new BarSeries({title:"Series 2",valueField:"value1",itemsSource:[{value1:52},{value1:317}]})),a.axes.push(new CategoryAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0})),a},definedByItems=()=>{const a=new PlotModel({title:"Defined by Items",subtitle:"The items are added to the `Items` property."}),s=new BarSeries({title:"Series 1"});s.items.push(new BarItem({value:25}),new BarItem({value:137}));const d=new BarSeries({title:"Series 2"});return d.items.push(new BarItem({value:52}),new BarItem({value:317})),a.series.push(s,d),a.axes.push(new CategoryAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0})),a};function emptyCategoryAxis(){const a=new PlotModel({title:"Empty category axis"}),s=new BarSeries({title:"Series 1"});s.items.push(new BarItem({value:25})),s.items.push(new BarItem({value:137})),s.items.push(new BarItem({value:18})),s.items.push(new BarItem({value:40}));const d=new BarSeries({title:"Series 2"});d.items.push(new BarItem({value:-12})),d.items.push(new BarItem({value:-14})),d.items.push(new BarItem({value:-120})),d.items.push(new BarItem({value:-26}));const m=new CategoryAxis({position:AxisPosition.Left}),f=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.06,maximumPadding:.06,extraGridlines:[0],extraGridlineStyle:LineStyle.Solid,extraGridlineColor:OxyColors.Black,extraGridlineThickness:1});return a.series.push(s,d),a.axes.push(m,f),a}function withNegativeValue(){return createModelWithNegativeValues(!1,"With negative values")}function stackedWithNegativeValue(){return createModelWithNegativeValues(!0,"Stacked with negative values")}function mixedWithLineSeries(){const a=createSimpleModel(!1,"Mixed with LineSeries");a.title="Mixed with LineSeries";const s=new LineSeries({title:"LineSeries 1"});return s.points.push(new DataPoint(25,0)),s.points.push(new DataPoint(137,1)),s.points.push(new DataPoint(18,2)),s.points.push(new DataPoint(40,3)),a.series.push(s),a}function noAxes(){const a=createSimpleModel(!1,"No axes defined");return a.axes.length=0,a}function stackedNoAxes(){const a=createSimpleModel(!0,"Stacked and no axes defined");return a.axes.length=0,a}function logAxisBaseValue(){const a=new PlotModel({title:"Logarithmic axis"}),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});a.legends.push(s);const d=new BarSeries({title:"Series 1",baseValue:.1,strokeColor:OxyColors.Black,strokeThickness:1});d.items.push(new BarItem({value:25})),d.items.push(new BarItem({value:37})),d.items.push(new BarItem({value:18})),d.items.push(new BarItem({value:40}));const m=new CategoryAxis({position:AxisPosition.Left});return m.labels.push("Category A","Category B","Category C","Category D"),a.series.push(d),a.axes.push(m),a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,minimum:.1,minimumPadding:0,absoluteMinimum:0})),a}function logAxisBaseLine(){const a=new PlotModel({title:"Logarithmic axis"}),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});a.legends.push(s);const d=new BarSeries({title:"Series 1",baseLine:.1,strokeColor:OxyColors.Black,strokeThickness:1});d.items.push(new BarItem({value:25})),d.items.push(new BarItem({value:37})),d.items.push(new BarItem({value:18})),d.items.push(new BarItem({value:40}));const m=new CategoryAxis({position:AxisPosition.Left});return m.labels.push("Category A","Category B","Category C","Category D"),a.series.push(d),a.axes.push(m),a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,minimumPadding:0,absoluteMinimum:0})),a}function logAxisNotStacked(){const a=new PlotModel({title:"Logarithmic axis"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=[{label:"Apples",value1:37,value2:12,value3:19},{label:"Pears",value1:7,value2:21,value3:9},{label:"Bananas",value1:23,value2:2,value3:29}];return a.series.push(new BarSeries({title:"2009",itemsSource:d,valueField:"value1"})),a.series.push(new BarSeries({title:"2010",itemsSource:d,valueField:"value2"})),a.series.push(new BarSeries({title:"2011",itemsSource:d,valueField:"value3"})),a.axes.push(new CategoryAxis({position:AxisPosition.Left,itemsSource:d,labelField:"label"})),a.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom,minimum:1})),a}function logAxisStacked(){const a=logAxisNotStacked();for(const s of a.series)s instanceof BarSeries&&(s.isStacked=!0);return a}function histogram3(){return createHistogram(1e5,5)}function histogram20(){return createHistogram(1e5,20)}function histogram200(){return createHistogram(1e5,200)}function histogramStandardNormalDistribution(){return createNormalDistributionHistogram(1e5,2e3)}function differentColors(){const a=new PlotModel({title:"Different colors within the same series"}),s=new BarSeries({title:"Series 1"});s.items.push(new BarItem({value:1,color:OxyColors.Red})),s.items.push(new BarItem({value:2,color:OxyColors.Green})),s.items.push(new BarItem({value:1,color:OxyColors.Blue}));const d=new CategoryAxis({title:"Category",position:AxisPosition.Left});return d.labels.push("A","B","C"),a.axes.push(d),a.series.push(s),a}function stackingGroups(){const a=new PlotModel({title:"Stacking groups"}),s=new BarSeries({title:"Series 1",stackGroup:"1",isStacked:!0});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",stackGroup:"2",isStacked:!0});d.items.push(new BarItem({value:2})),d.items.push(new BarItem({value:1})),a.series.push(d);const m=new BarSeries({title:"Series 3",stackGroup:"1",isStacked:!0});m.items.push(new BarItem({value:3})),m.items.push(new BarItem({value:1})),a.series.push(m);const f=new CategoryAxis({title:"Category",position:AxisPosition.Left});return f.labels.push("A","B"),a.axes.push(f),a}function differentWidths(){const a=new PlotModel({title:"Different widths",subtitle:"Series1=0.6 and Series2=0.3"}),s=new BarSeries({title:"Series 1",barWidth:.6});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",barWidth:.3});d.items.push(new BarItem({value:3})),d.items.push(new BarItem({value:1})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function differentWidthsStacked(){const a=new PlotModel({title:"Different widths (stacked)"}),s=new BarSeries({title:"Series 1",isStacked:!0,barWidth:.6});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",isStacked:!0,barWidth:.3});d.items.push(new BarItem({value:3})),d.items.push(new BarItem({value:1})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function invalidValues(){const a=new PlotModel({title:"Invalid values",subtitle:"Series 1 contains a NaN value for category B."}),s=new BarSeries({title:"Series 1"});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:NaN})),a.series.push(s);const d=new BarSeries({title:"Series 2"});d.items.push(new BarItem({value:3})),d.items.push(new BarItem({value:1})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function missingValues(){const a=new PlotModel({title:"Missing values",subtitle:"Series 1 contains only one item with CategoryIndex = 1"}),s=new BarSeries({title:"Series 1"});s.items.push(new BarItem({value:1,categoryIndex:1})),a.series.push(s);const d=new BarSeries({title:"Series 2"});d.items.push(new BarItem({value:3})),d.items.push(new BarItem({value:1.2})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function categoryIndex(){const a=new PlotModel({title:"CategoryIndex",subtitle:"Setting CategoryIndex = 0 for both items in the series."}),s=new BarSeries({title:"Series 1",strokeThickness:1});s.items.push(new BarItem({value:1,categoryIndex:0})),s.items.push(new BarItem({value:2,categoryIndex:0})),a.series.push(s);const d=new CategoryAxis({title:"Category",position:AxisPosition.Left});return d.labels.push("A","B"),a.axes.push(d),a}function categoryIndexStacked(){const a=new PlotModel({title:"CategoryIndex (stacked)",subtitle:"Setting CategoryIndex = 0 for both items in the series."}),s=new BarSeries({title:"Series 1",isStacked:!0,strokeThickness:1});s.items.push(new BarItem({value:1,categoryIndex:0})),s.items.push(new BarItem({value:2,categoryIndex:0})),a.series.push(s);const d=new CategoryAxis({title:"Category",position:AxisPosition.Left});return d.labels.push("A","B"),a.axes.push(d),a}function baseValue(){const a=new PlotModel({title:"BaseValue",subtitle:"BaseValue = -1"}),s=new BarSeries({title:"Series 1",baseValue:-1});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",baseValue:-1});d.items.push(new BarItem({value:4})),d.items.push(new BarItem({value:7})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function baseValueStacked(){const a=new PlotModel({title:"BaseValue (stacked)",subtitle:"BaseValue = -1"}),s=new BarSeries({title:"Series 1",isStacked:!0,baseValue:-1});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",isStacked:!0,baseValue:-1});d.items.push(new BarItem({value:4})),d.items.push(new BarItem({value:7})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function baseValueOverlaping(){const a=new PlotModel({title:"BaseValue (overlaping)",subtitle:"BaseValue = -1"}),s=new BarSeries({title:"Series 1",isStacked:!0,overlapsStack:!0,baseValue:-1});s.items.push(new BarItem({value:1})),s.items.push(new BarItem({value:2})),a.series.push(s);const d=new BarSeries({title:"Series 2",isStacked:!0,overlapsStack:!0,baseValue:-1,barWidth:.5});d.items.push(new BarItem({value:4})),d.items.push(new BarItem({value:7})),a.series.push(d);const m=new CategoryAxis({title:"Category",position:AxisPosition.Left});return m.labels.push("A","B"),a.axes.push(m),a}function baseValueLabels(){const a=new PlotModel({title:"BaseValue with Labels"});for(const d of getEnumKeys(LabelPlacement)){const m=new BarSeries({title:d.toString(),baseValue:-25,labelPlacement:d,labelStringFormatter:BarSeriesLabelStringFormatter});m.items.push(new BarItem({value:-40})),m.items.push(new BarItem({value:-25})),m.items.push(new BarItem({value:-10})),m.items.push(new BarItem({value:0})),m.items.push(new BarItem({value:10})),a.series.push(m)}const s=new CategoryAxis({title:"Category",position:AxisPosition.Left,startPosition:1,endPosition:0});return s.labels.push("A","B","C","D","E"),a.axes.push(s),a.legends.push(new Legend),a}function stackedLabels(){const a=new PlotModel({title:"Stacked with Labels"});let s=0;for(const d of getEnumKeys(LabelPlacement)){const m=new CategoryAxis({title:"Category",position:AxisPosition.Left,startPosition:1-s*.25,endPosition:.75-s*.25,key:`C${s}`}),f=new BarSeries({title:d.toString(),labelPlacement:d,labelStringFormatter:BarSeriesLabelStringFormatter,isStacked:!0,yAxisKey:m.key});f.items.push(new BarItem({value:5})),f.items.push(new BarItem({value:10})),f.items.push(new BarItem({value:15})),a.series.push(f);const g=new BarSeries({title:d.toString(),labelPlacement:d,labelStringFormatter:BarSeriesLabelStringFormatter,isStacked:!0,yAxisKey:m.key});g.items.push(new BarItem({value:15})),g.items.push(new BarItem({value:10})),g.items.push(new BarItem({value:5})),a.series.push(g),m.labels.push("A","B","C"),a.axes.push(m),s++}return a.legends.push(new Legend),a}function gapWidth0(){return createGapWidthModel(0,"GapWidth 0%")}function gapWidth100(){return createGapWidthModel(1,"GapWidth 100% (default)")}function gapWidth200(){return createGapWidthModel(2,"GapWidth 200%")}function allInOne(){const a=new PlotModel({title:"All in one"}),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});a.legends.push(s);const d=new CategoryAxis({position:AxisPosition.Left,gapWidth:.01});d.labels.push("Category A","Category B","Category C","Category D"),a.axes.push(d);const m=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.06,maximumPadding:.06,extraGridlines:[0],extraGridlineStyle:LineStyle.Solid,extraGridlineColor:OxyColors.Black,extraGridlineThickness:1});a.axes.push(m);const f=0,g=1,x=2,w=3,C=new BarSeries({title:"Series 1",isStacked:!0,strokeColor:OxyColors.Black,strokeThickness:1,stackGroup:"3"});C.items.push(new BarItem({value:25}),new BarItem({value:137}),new BarItem({value:18}),new BarItem({value:40})),a.series.push(C);const A=new BarSeries({title:"Series 2",isStacked:!0,strokeColor:OxyColors.Black,strokeThickness:1,stackGroup:"3"});A.items.push(new BarItem({value:-12}),new BarItem({value:-14}),new BarItem({value:-120}),new BarItem({value:-26})),a.series.push(A);const _=new BarSeries({title:"Series 3",isStacked:!0,strokeColor:OxyColors.Black,strokeThickness:1,stackGroup:"5",isVisible:!1});_.items.push(new BarItem({value:21}),new BarItem({value:8}),new BarItem({value:48}),new BarItem({value:3})),a.series.push(_);const M=new BarSeries({title:"Series 4",isStacked:!0,strokeColor:OxyColors.Black,strokeThickness:1,stackGroup:"5",labelStringFormatter:BarSeriesLabelStringFormatter,labelPlacement:LabelPlacement.Middle});M.items.push(new BarItem({value:-8,categoryIndex:f}),new BarItem({value:-8,categoryIndex:f}),new BarItem({value:-8,categoryIndex:f}),new BarItem({value:-21,categoryIndex:g}),new BarItem({value:-3,categoryIndex:x}),new BarItem({value:-48,categoryIndex:w}),new BarItem({value:8,categoryIndex:f}),new BarItem({value:21,categoryIndex:g}),new BarItem({value:3,categoryIndex:x}),new BarItem({value:48,categoryIndex:w})),a.series.push(M);const P=new BarSeries({title:"Series 5",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1});P.items.push(new BarItem({value:17,categoryIndex:f}),new BarItem({value:179,categoryIndex:g}),new BarItem({value:45,categoryIndex:x}),new BarItem({value:65,categoryIndex:w}),new BarItem({value:97,categoryIndex:f}),new BarItem({value:21,categoryIndex:w})),a.series.push(P);const E=new BarSeries({title:"Series 6",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1,labelStringFormatter:BarSeriesLabelStringFormatter,labelPlacement:LabelPlacement.Base});E.items.push(new BarItem({value:7}),new BarItem({value:54}),new BarItem({value:68}),new BarItem({value:12})),a.series.push(E);const R=new BarSeries({title:"Series 7",isStacked:!0,overlapsStack:!0,strokeColor:OxyColors.Black,strokeThickness:1,labelStringFormatter:BarSeriesLabelStringFormatter,labelPlacement:LabelPlacement.Base,stackGroup:"3",barWidth:.5});return R.items.push(new BarItem({value:10}),new BarItem({value:80}),new BarItem({value:100,categoryIndex:w})),a.series.push(R),a}const BarSeriesLabelStringFormatter=a=>a.value.toString();function createGapWidthModel(a,s){const d=createSimpleModel(!1,s);return d.axes[0].gapWidth=a,d}function createSimpleModel(a,s){const d=new PlotModel({title:s}),m=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});d.legends.push(m);const f=new BarSeries({title:"Series 1",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});f.items.push(BarItem.fromValue(25)),f.items.push(BarItem.fromValue(137)),f.items.push(BarItem.fromValue(18)),f.items.push(BarItem.fromValue(40));const g=new BarSeries({title:"Series 2",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});g.items.push(BarItem.fromValue(12)),g.items.push(BarItem.fromValue(14)),g.items.push(BarItem.fromValue(120)),g.items.push(BarItem.fromValue(26));const x=new CategoryAxis({position:AxisPosition.Left});x.labels.push("Category A","Category B","Category C","Category D");const w=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:.06,absoluteMinimum:0});return d.series.push(f,g),d.axes.push(x,w),d}function createModelWithNegativeValues(a,s){const d=new PlotModel({title:s}),m=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});d.legends.push(m);const f=new BarSeries({title:"Series 1",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});f.items.push(BarItem.fromValue(25)),f.items.push(BarItem.fromValue(137)),f.items.push(BarItem.fromValue(18)),f.items.push(BarItem.fromValue(40));const g=new BarSeries({title:"Series 2",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});g.items.push(BarItem.fromValue(-12)),g.items.push(BarItem.fromValue(-14)),g.items.push(BarItem.fromValue(-120)),g.items.push(BarItem.fromValue(-26));const x=new BarSeries({title:"Series 3",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});x.items.push(BarItem.fromValue(21)),x.items.push(BarItem.fromValue(8)),x.items.push(BarItem.fromValue(48)),x.items.push(BarItem.fromValue(3));const w=new BarSeries({title:"Series 4",isStacked:a,strokeColor:OxyColors.Black,strokeThickness:1});w.items.push(BarItem.fromValue(-8)),w.items.push(BarItem.fromValue(-21)),w.items.push(BarItem.fromValue(-3)),w.items.push(BarItem.fromValue(-48));const C=new CategoryAxis({position:AxisPosition.Left});C.labels.push("Category A","Category B","Category C","Category D");const A=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.06,maximumPadding:.06,extraGridlines:[0],extraGridlineStyle:LineStyle.Solid,extraGridlineColor:OxyColors.Black,extraGridlineThickness:1});return d.series.push(f,g,x,w),d.axes.push(C,A),d}function createHistogram(a,s){const d=[];for(let x=0;x<s;x++)d.push({label:x.toString(),value:0});const m=new Random;for(let x=0;x<a;x++){const w=m.next(0,s-1);d[w].value++}const f=new PlotModel;f.title=`Histogram (bins=${s}, n=${a})`,f.subtitle="Pseudorandom numbers";const g=new BarSeries;return g.itemsSource=d,g.valueField="value",s<100&&(g.labelStringFormatter=(x,w)=>w[0].toString()),f.series.push(g),f.axes.push(new CategoryAxis({position:AxisPosition.Left,itemsSource:d,labelField:"label",gapWidth:0})),f.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:.1,absoluteMinimum:0})),f}function createNormalDistributionHistogram(a,s){const d=[];for(let A=0;A<s;A++){const _=-10+20*A/(d.length-1);d.push({label:_.toFixed(1),value:0})}const g=new Random(31);for(let A=0;A<a;A++){const _=g.next(),M=g.next(),P=Math.sqrt(-2*Math.log(_))*Math.cos(2*Math.PI*M),E=Math.round((P- -10)/20*(d.length-1));E>=0&&E<d.length&&d[E].value++}const x=new PlotModel;x.title=`Histogram (bins=${s}, n=${a})`,x.subtitle="Standard normal distribution by Box-Muller transform";const w=new BarSeries;w.itemsSource=d,w.valueField="value",x.series.push(w);const C=new CategoryAxis({position:AxisPosition.Left,gapWidth:0});return C.labels.push(...d.map(A=>A.label)),C.isAxisVisible=!1,x.axes.push(C),x.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-10,maximum:10})),x.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,absoluteMinimum:0})),x}const category$l="BarSeries",BarSeriesExamples={category:category$l,tags:["Series"],examples:[{title:"With labels",example:{model:withLabels}},{title:"With labels (at an angle)",example:{model:withLabelsAtAnAngle}},{title:"Stacked",example:{model:stackedSeries}},{title:"Multiple Value Axes",example:{model:multipleValueAxes}},{title:"Stacked, Multiple Value Axes",example:{model:stackedMultipleValueAxes}},{title:"Multiple Category Axes",example:{model:multipleCategoryAxes}},{title:"Stacked, Multiple Category Axes",example:{model:stackedMultipleCategoryAxes}},{title:"Empty series",example:{model:emptySeries}},{title:"No category axis defined",example:{model:noCategoryAxisDefined}},{title:"Binding to ItemsSource",example:{model:bindingItemsSource}},{title:"Binding to ItemsSource (array)",example:{model:bindingToItemsSourceArray}},{title:"Binding to ItemsSource (list)",example:{model:bindingToItemsSourceListT}},{title:"Binding to ItemsSource (reflection)",example:{model:bindingToItemsSourceReflection}},{title:"Defined by Items",example:{model:definedByItems}},{title:"Empty category axis",example:{model:emptyCategoryAxis}},{title:"With negative values",example:{model:withNegativeValue}},{title:"Stacked with negative values",example:{model:stackedWithNegativeValue}},{title:"Mixed with LineSeries",example:{model:mixedWithLineSeries}},{title:"No axes defined",example:{model:noAxes}},{title:"Stacked and no axes defined",example:{model:stackedNoAxes}},{title:"Logarithmic axis (Base Value)",example:{model:logAxisBaseValue}},{title:"Logarithmic axis (Base Line)",example:{model:logAxisBaseLine}},{title:"Logarithmic axis (not stacked)",example:{model:logAxisNotStacked}},{title:"Logarithmic axis (stacked series)",example:{model:logAxisStacked}},{title:"Histogram (bins=5)",example:{model:histogram3}},{title:"Histogram (bins=20)",example:{model:histogram20}},{title:"Histogram (bins=200)",example:{model:histogram200}},{title:"Histogram (standard normal distribution)",example:{model:histogramStandardNormalDistribution}},{title:"Different colors within the same series",example:{model:differentColors}},{title:"Different stacking groups",example:{model:stackingGroups}},{title:"Different widths",example:{model:differentWidths}},{title:"Different widths (stacked)",example:{model:differentWidthsStacked}},{title:"Invalid values",example:{model:invalidValues}},{title:"Missing values",example:{model:missingValues}},{title:"CategoryIndex",example:{model:categoryIndex}},{title:"CategoryIndex (stacked)",example:{model:categoryIndexStacked}},{title:"BaseValue",example:{model:baseValue}},{title:"BaseValue (stacked)",example:{model:baseValueStacked}},{title:"BaseValue (overlaping)",example:{model:baseValueOverlaping}},{title:"BaseValue (labels)",example:{model:baseValueLabels}},{title:"Stacked (labels)",example:{model:stackedLabels}},{title:"GapWidth 0%",example:{model:gapWidth0}},{title:"GapWidth 100% (default)",example:{model:gapWidth100}},{title:"GapWidth 200%",example:{model:gapWidth200}},{title:"All in one",example:{model:allInOne}}]};function boxPlot(){const s=new PlotModel({title:"BoxPlot (n=10)"}),d=new Legend({legendPlacement:LegendPlacement.Outside});s.legends.push(d);const m=new BoxPlotSeries({title:"BoxPlotSeries",boxWidth:.3}),f=new Random(31);for(let g=0;g<10;g++){const x=g,w=5+f.next(15),C=[];for(let L=0;L<w;L++)C.push(f.next(0,20));C.sort();const A=getMedian(C),_=C.reduce((L,W)=>L+W,0)/C.length,M=C.length%2,P=getMedian(C.slice(0,(C.length+M)/2)),E=getMedian(C.slice((C.length-M)/2)),B=(E-P)*1.5;let z=E+B;z=maxValueOfArray(C.filter(L=>L<=z));let F=P-B;F=minValueOfArray(C.filter(L=>L>=F));const I=[z+f.next(1,10),F-f.next(1,10)];m.items.push({x,lowerWhisker:F,boxBottom:P,median:A,boxTop:E,upperWhisker:z,mean:_,outliers:I})}return s.series.push(m),s.axes.push(new LinearAxis({position:AxisPosition.Left})),s.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.1,maximumPadding:.1})),s}function getMedian(a){const s=[...a].sort((m,f)=>m-f),d=s.length;return d%2===1?s[(d-1)/2]:.5*s[d/2]+.5*s[d/2-1]}function boxPlot2(){const a=boxPlot(),s=a.series[0];return s.showMedianAsDot=!0,s.outlierType=MarkerType.Cross,s.fill=OxyColors.Black,s.showBox=!1,s.whiskerWidth=0,a}function boxPlot3(){const a=boxPlot(),s=a.series[0];return s.lineStyle=LineStyle.Dash,a}function outlierTypeCross(){const a=boxPlot(),s=a.series[0];return s.outlierType=MarkerType.Cross,a}function outlierTypeCustom(){const a=boxPlot(),s=a.series[0];return s.outlierType=MarkerType.Custom,s.outlierOutline=[new ScreenPoint(-1,-1),new ScreenPoint(1,1),new ScreenPoint(-1,1),new ScreenPoint(1,-1)],a}function michelsonMorleyExperiment(){const a=new PlotModel,s=new BoxPlotSeries({title:"Results",stroke:OxyColors.Black,strokeThickness:1,outlierSize:2,boxWidth:.4,items:[]});s.items.push({x:0,lowerWhisker:740,boxBottom:850,median:945,boxTop:980,upperWhisker:1070,outliers:[650]}),s.items.push({x:1,lowerWhisker:750,boxBottom:805,median:845,boxTop:890,upperWhisker:970,outliers:[]}),s.items.push({x:2,lowerWhisker:845,boxBottom:847,median:855,boxTop:880,upperWhisker:910,outliers:[640,950,970]}),s.items.push({x:3,lowerWhisker:720,boxBottom:760,median:820,boxTop:870,upperWhisker:910,outliers:[]}),s.items.push({x:4,lowerWhisker:730,boxBottom:805,median:807,boxTop:870,upperWhisker:950,outliers:[]}),a.series.push(s),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Horizontal,lineStyle:LineStyle.Solid,y:792.458,text:"true speed"}));const d=new CategoryAxis({title:"Experiment No."});return d.labels.push("1","2","3","4","5"),a.axes.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Speed of light (km/s minus 299,000)",majorStep:100,minorStep:100})),a}function boxPlotSeries_DateTimeAxis(){const a=getDateService(),s=new PlotModel,d=DateTimeAxis.toDouble(new Date(2013,5,4));s.axes.push(new DateTimeAxis({position:AxisPosition.Bottom,minimum:d-.9,maximum:d+1.9,intervalType:DateTimeIntervalType.Days,majorStep:1,minorStep:1,stringFormatter:f=>a.format(f,"YYYY-MM-DD")}));const m=new BoxPlotSeries({trackerStringFormatter:f=>`X: ${a.format(f.xValue,"YYYY-MM-DD")}
Upper Whisker: ${f.upperWhisker.toFixed(2)}
Third Quartil: ${f.boxTop.toFixed(2)}
Median: ${f.median.toFixed(2)}
First Quartil: ${f.boxBottom.toFixed(2)}
Lower Whisker: ${f.lowerWhisker.toFixed(2)}
Mean: ${f.mean.toFixed(2)}`,items:[]});return m.items.push({x:d,lowerWhisker:10,boxBottom:14,median:16,boxTop:20,upperWhisker:22,mean:17,outliers:[23.5]}),m.items.push({x:d+1,lowerWhisker:11,boxBottom:13,median:14,boxTop:15,upperWhisker:18,outliers:[23.4]}),s.series.push(m),s}const category$k="BoxPlotSeries",BoxPlotSeriesExamples={category:category$k,tags:["Series"],examples:[{title:"BoxPlot",example:{model:boxPlot}},{title:"BoxPlot (minimal data/ink ratio)",example:{model:boxPlot2}},{title:"BoxPlot (dashed line)",example:{model:boxPlot3}},{title:"Outlier type = Cross",example:{model:outlierTypeCross}},{title:"Outlier type = Custom",example:{model:outlierTypeCustom}},{title:"Michelson-Morley experiment",example:{model:michelsonMorleyExperiment}},{title:"BoxPlot (DateTime axis)",example:{model:boxPlotSeries_DateTimeAxis}}]},peaks=(a,s)=>3*(1-a)*(1-a)*Math.exp(-(a*a)-(s+1)*(s+1))-10*(a/5-a*a*a-s*s*s*s*s)*Math.exp(-a*a-s*s)-1/3*Math.exp(-(a+1)*(a+1)-s*s),openContours=(a,s)=>a*a/(s*s+1)+s*s/(a*a+1),createVector=(a,s,d)=>ArrayBuilder.createVectorWithStep(a,s,d);function peaksModel(){const a=new PlotModel({title:"Peaks"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05)});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksLabelStep1LevelStepPI2(){const a=new PlotModel({title:"Peaks LabelStep = 1, ContourLevelStep = PI/2"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),contourLevelStep:Math.PI/2,labelStep:1});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksLabelStep2(){const a=new PlotModel({title:"Peaks LabelStep = 2, ContourLevelStep = 0.5"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),contourLevelStep:.5,labelStep:2});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksLabelStep2LevelStep033(){const a=new PlotModel({title:"Peaks LabelStep = 2, ContourLevelStep = 0.33"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),contourLevelStep:.33,labelStep:2});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksLabelStep3(){const a=new PlotModel({title:"Peaks LabelStep = 3, ContourLevelStep = 1"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),labelStep:3});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksMultiLabel(){const a=new PlotModel({title:"Peaks MultiLabel"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),multiLabel:!0});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksLabelSpacing400(){const a=new PlotModel({title:"Peaks LabelSpacing = 400"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),multiLabel:!0,labelSpacing:400});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function peaksWithColors(){const a=new PlotModel({title:"Peaks"}),s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3.1,3.1,.05),contourColors:[OxyColors.SeaGreen,OxyColors.RoyalBlue,OxyColors.IndianRed]});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function wideArrayPeaks(){const a=new PlotModel({title:"Peaks"});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-3.16262,maximum:3.162}));const s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-1,1,.05)});return s.data=ArrayBuilder.evaluate(peaks,s.columnCoordinates,s.rowCoordinates),a.subtitle=`${s.data.length}${s.data[0].length}`,a.series.push(s),a}function openContoursModel(){const a=new PlotModel,s=new ContourSeries({columnCoordinates:createVector(-3,3,.05),rowCoordinates:createVector(-3,3,.05)});return s.data=ArrayBuilder.evaluate(openContours,s.columnCoordinates,s.rowCoordinates),a.series.push(s),a}function logPeaks(){const a=(f,g)=>peaks(Math.log(f)/10,Math.log(g)/10),s=new PlotModel,d=createVector(-3,3,.05);for(let f=0;f<d.length;f++)d[f]=Math.exp(d[f]*10);const m=new ContourSeries({columnCoordinates:d,rowCoordinates:d});return m.data=ArrayBuilder.evaluate(a,m.columnCoordinates,m.rowCoordinates),s.series.push(m),s.axes.push(new LogarithmicAxis({position:AxisPosition.Bottom})),s.axes.push(new LogarithmicAxis({position:AxisPosition.Left})),s}const category$j="ContourSeries",ContourSeriesExamples={category:category$j,tags:["Series"],examples:[{title:"Peaks",example:{model:peaksModel}},{title:"Peaks LabelStep = 1, ContourLevelStep = PI/2",example:{model:peaksLabelStep1LevelStepPI2}},{title:"Peaks LabelStep = 2, ContourLevelStep = 0.5",example:{model:peaksLabelStep2}},{title:"Peaks LabelStep = 2, ContourLevelStep = 0.33",example:{model:peaksLabelStep2LevelStep033}},{title:"Peaks LabelStep = 3, ContourLevelStep = 1",example:{model:peaksLabelStep3}},{title:"Peaks MultiLabel",example:{model:peaksMultiLabel}},{title:"Peaks LabelSpacing = 400",example:{model:peaksLabelSpacing400}},{title:"Peaks (different contour colors)",example:{model:peaksWithColors}},{title:"Peaks (wide array)",example:{model:wideArrayPeaks}},{title:"Open Contours",example:{model:openContoursModel}},{title:"Logarithmic Peaks",example:{model:logPeaks}}]};function getErrorBarSeries(){const a=new PlotModel({title:"ErrorBarSeries"}),s=new Legend({legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter,legendOrientation:LegendOrientation.Horizontal,legendBorderThickness:0});a.legends.push(s);const d=new ErrorBarSeries({title:"Series 1",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1});d.items.push(new ErrorBarItem({value:25,error:2})),d.items.push(new ErrorBarItem({value:137,error:25})),d.items.push(new ErrorBarItem({value:18,error:4})),d.items.push(new ErrorBarItem({value:40,error:29}));const m=new ErrorBarSeries({title:"Series 2",isStacked:!1,strokeColor:OxyColors.Black,strokeThickness:1});m.items.push(new ErrorBarItem({value:35,error:20})),m.items.push(new ErrorBarItem({value:17,error:7})),m.items.push(new ErrorBarItem({value:118,error:44})),m.items.push(new ErrorBarItem({value:49,error:29}));const f=new CategoryAxis({position:AxisPosition.Left});f.labels.push("Category A"),f.labels.push("Category B"),f.labels.push("Category C"),f.labels.push("Category D");const g=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:0,maximumPadding:.06,absoluteMinimum:0});return a.series.push(d),a.series.push(m),a.axes.push(f),a.axes.push(g),a}function getErrorBarSeriesThickErrorLines(){const a=getErrorBarSeries();for(const s of a.series)s instanceof ErrorBarSeries&&(s.errorWidth=0,s.errorStrokeThickness=4);return a}const category$i="ErrorBarSeries",ErrorBarSeriesExamples={category:category$i,tags:["Series"],examples:[{title:"ErrorBarSeries",example:{model:getErrorBarSeries}},{title:"ErrorBarSeries (thick error lines)",example:{model:getErrorBarSeriesThickErrorLines}}]};function extrapolatedLineSeries(){const a=new PlotModel({title:"Line Fit"}),s=new ScatterSeries({title:"Data"});s.points.push({x:3,y:1.4}),s.points.push({x:4,y:1.3}),s.points.push({x:5,y:1.6}),s.points.push({x:6,y:2.3}),s.points.push({x:7,y:2.2}),s.points.push({x:8,y:2.5}),s.points.push({x:9,y:2.9}),s.points.push({x:10,y:3.1}),s.points.push({x:11,y:3.1}),s.points.push({x:12,y:3.8}),a.series.push(s);const{slope:d,intercept:m}=calculateLinearRegressionParameters(s.points),f=new ExtrapolationLineSeries({title:"Fit",color:OxyColors.Black,lineStyle:LineStyle.Solid,extrapolationColor:OxyColors.DarkGray,extrapolationLineStyle:LineStyle.Dash,strokeThickness:3,ignoreExtraplotationForScaling:!0});f.intervals.push(new DataRange(Number.NEGATIVE_INFINITY,minValueOfArray(s.points.map(w=>w.x)))),f.intervals.push(new DataRange(maxValueOfArray(s.points.map(w=>w.x)),Number.POSITIVE_INFINITY));const g=Array.from({length:200},(w,C)=>C-100).map(w=>new DataPoint(w,d*w+m));f.points.push(...g),a.series.push(f);const x=new Legend({legendPosition:LegendPosition.BottomRight});return a.legends.push(x),a}function interpolationStyleLineSeries(){const a=new PlotModel({title:"Interpolation"}),s=new ExtrapolationLineSeries({title:"Third Order Polynomial",color:OxyColors.Black,lineStyle:LineStyle.Dash,extrapolationColor:OxyColors.Gray,extrapolationLineStyle:LineStyle.Dot,strokeThickness:3});s.intervals.push(new DataRange(Number.NEGATIVE_INFINITY,-15)),s.intervals.push(new DataRange(10,30)),s.intervals.push(new DataRange(55,Number.POSITIVE_INFINITY));const d=[.1,-6,-12,0],m=(x,w)=>w.reduce((C,A)=>C*x+A,0),f=Array.from({length:100},(x,w)=>w-30).map(x=>new DataPoint(x,m(x,d)));s.points.push(...f),a.series.push(s);const g=new Legend({legendPosition:LegendPosition.TopCenter});return a.legends.push(g),a}function twoColorLineSeriesReversed$2(){return PlotModelUtilities.reverseYAxis(interpolationStyleLineSeries())}function intersectingIntervals(){const a=new PlotModel({title:"Intersecting Intervals"}),s=new DataRange(-20,20),d=new DataRange(0,30),m=new DataRange(10,40),f=new ExtrapolationLineSeries({title:`Overlapping intervals ${s}, ${d}, ${m}`,color:OxyColors.Black,lineStyle:LineStyle.Solid,extrapolationColor:OxyColors.Gray,extrapolationLineStyle:LineStyle.Dot,strokeThickness:3});f.intervals.push(s,d,m);const g=[.1,-6,-12,0],x=(A,_)=>_.reduce((M,P)=>M*A+P,0),w=Array.from({length:100},(A,_)=>_-30).map(A=>new DataPoint(A,x(A,g)));f.points.push(...w),a.series.push(f);const C=new Legend({legendPosition:LegendPosition.TopCenter});return a.legends.push(C),a}function customDashes(){const a=new PlotModel({title:"Custom Dashes"}),s=new ExtrapolationLineSeries({title:"y = 5",color:OxyColors.Black,lineStyle:LineStyle.Dash,dashes:[5,1],extrapolationColor:OxyColors.Gray,extrapolationLineStyle:LineStyle.Dot,extrapolationDashes:[1,5],strokeThickness:3});s.intervals.push(new DataRange(Number.NEGATIVE_INFINITY,0));const d=Array.from({length:200},(f,g)=>g-100).map(f=>new DataPoint(f,5));s.points.push(...d),a.series.push(s);const m=new Legend({legendPosition:LegendPosition.TopCenter});return a.legends.push(m),a}function manyIntervals(){const a=new PlotModel({title:"ManyIntervals"}),s=new ExtrapolationLineSeries({title:"y = x",color:OxyColors.Red,lineStyle:LineStyle.Solid,extrapolationLineStyle:LineStyle.Solid,strokeThickness:3,ignoreExtraplotationForScaling:!0});s.intervals.push(new DataRange(-1e3,1e4)),Array.from({length:98},(g,x)=>new DataRange(1e3*x,1e3*x+500)).forEach(g=>s.intervals.push(g)),s.intervals.push(new DataRange(2e5,Number.POSITIVE_INFINITY));const m=Array.from({length:1e5},(g,x)=>new DataPoint(x,x));s.points.push(...m),a.series.push(s);const f=new Legend({legendPosition:LegendPosition.TopCenter});return a.legends.push(f),a}function mooresLaw(){const a=new PlotModel({title:"Moore's Law"}),s=new ScatterSeries({title:"Data"});s.points.push(...getPointForMooresLaw()),a.series.push(s),a.axes.push(new LinearAxis({title:"Year",position:AxisPosition.Bottom})),a.axes.push(new LogarithmicAxis({title:"Transistors (in thousands)",position:AxisPosition.Left}));const{slope:d,intercept:m}=calculateLinearRegressionParameters(s.points.map(w=>({x:w.x,y:Math.log10(w.y)}))),f=new ExtrapolationLineSeries({title:"Fit and Extrapolation",color:OxyColors.Black,lineStyle:LineStyle.Solid,extrapolationColor:OxyColors.Blue,extrapolationLineStyle:LineStyle.Dot,strokeThickness:3});f.intervals.push(new DataRange(2015,Number.POSITIVE_INFINITY));const g=Array.from({length:55},(w,C)=>C+1970).map(w=>new DataPoint(w,Math.pow(10,d*w+m)));f.points.push(...g),a.series.push(f);const x=new Legend({legendPosition:LegendPosition.TopCenter});return a.legends.push(x),a}function calculateLinearRegressionParameters(a){if(a===void 0)throw new Error("points is undefined");if(a.length<2)throw new Error("at least two points required");const s=a.reduce((w,C)=>w+C.x,0)/a.length,d=a.reduce((w,C)=>w+C.y,0)/a.length,m=covariance(a,s,d),f=variance2(a.map(w=>w.x)),g=m/f,x=d-g*s;return{slope:g,intercept:x}}function covariance(a,s,d){let m=a.reduce((f,g)=>f+g.x*g.y,0);return m-=a.length*s*d,m/=a.length-1,m}function variance2(a){const s=a.reduce((m,f)=>m+f,0)/a.length;let d=a.reduce((m,f)=>m+f*f,0);return d-=a.length*s*s,d/=a.length-1,d}function getPointForMooresLaw(){return[{x:1971.875,y:2.30824152676},{x:1972.30769231,y:3.55452235561},{x:1974.32692308,y:6.09756235221},{x:1979.56730769,y:29.1637757405},{x:1982.30769231,y:135.772714211},{x:1985.91346154,y:273.841963426},{x:1986.25,y:109.411381058},{x:1988.65384615,y:121.881418484},{x:1989.47115385,y:1207.90074743},{x:1990.57692308,y:1207.90074743},{x:1992.40384615,y:1207.90074743},{x:1992.69230769,y:3105.90022362},{x:1992.69230769,y:1113.97385999},{x:1993.02884615,y:1715.43789634},{x:1993.41346154,y:3105.90022362},{x:1993.41346154,y:922.239565104},{x:1994.71153846,y:1910.95297497},{x:1994.71153846,y:2788.12666541},{x:1995.43269231,y:9646.61619911},{x:1995.72115385,y:3105.90022362},{x:1996.15384615,y:5473.70326288},{x:1996.34615385,y:6792.52507006},{x:1996.34615385,y:3651.74127255},{x:1996.44230769,y:4293.51021008},{x:1996.82692308,y:9646.61619911},{x:1997.35576923,y:5473.70326288},{x:1997.45192308,y:3554.52235561},{x:1997.54807692,y:8896.4911282},{x:1997.64423077,y:7566.6953714},{x:1998.89423077,y:15261.3780258},{x:1999.13461538,y:9389.79801048},{x:1999.18269231,y:6978.3058486},{x:1999.47115385,y:9389.79801048},{x:1999.47115385,y:21673.9216957},{x:2000.19230769,y:22266.7201035},{x:2000.67307692,y:28387.3596476},{x:2000.67307692,y:37180.2666391},{x:2001.10576923,y:29163.7757405},{x:2001.20192308,y:42550.6550247},{x:2001.68269231,y:25482.9674798},{x:2001.82692308,y:37180.2666391},{x:2002.40384615,y:55730.6040127},{x:2002.78846154,y:38197.1754928},{x:2002.88461538,y:220673.406908},{x:2003.41346154,y:151247.254531},{x:2003.50961538,y:54246.9093701},{x:2003.65384615,y:106498.563535},{x:2004.80769231,y:125214.968907},{x:2004.80769231,y:106498.563535},{x:2004.80769231,y:273841.963426},{x:2005.72115385,y:232909.659246},{x:2005.81730769,y:112403.866377},{x:2005.96153846,y:305052.789027},{x:2006.05769231,y:115478.198469},{x:2006.875,y:378551.524926},{x:2006.875,y:155383.983127},{x:2006.92307692,y:245824.406892},{x:2006.97115385,y:296931.48482},{x:2006.97115385,y:582941.534714},{x:2007.06730769,y:151247.254531},{x:2007.64423077,y:582941.534714},{x:2007.74038462,y:232909.659246},{x:2007.78846154,y:805842.187761},{x:2007.83653846,y:115478.198469},{x:2007.98076923,y:509367.521678},{x:2008.22115385,y:445079.406236},{x:2008.46153846,y:410469.838044},{x:2009.18269231,y:457252.669897},{x:2009.27884615,y:784388.558145},{x:2009.66346154,y:230824152676e-5},{x:2009.71153846,y:191095297497e-5},{x:2010.19230769,y:410469.838044},{x:2010.38461538,y:13097472643e-4},{x:2011.16,y:117e4},{x:2011.32,y:26e5},{x:2011.9,y:12e5},{x:2012.4,y:24e5},{x:2012.41,y:23e5},{x:2012.7,y:21e5},{x:2012.9,y:12e5},{x:2013.4,y:5e6},{x:2013.8,y:43e5},{x:2014.16,y:43e5},{x:2014.5,y:42e5},{x:2014.8,y:26e5},{x:2014.81,y:38e5},{x:2014.82,y:57e5}]}const category$h="ExtrapolationLineSeries",ExtrapolationLineSeriesExamples={category:category$h,tags:["Series"],examples:[{title:"Line Fit (Ignore Extrapolation For Scaling)",example:{model:extrapolatedLineSeries}},{title:"Interpolation",example:{model:interpolationStyleLineSeries}},{title:"Interpolation (Y Axis reversed)",example:{model:twoColorLineSeriesReversed$2}},{title:"Intersecting Intervals",example:{model:intersectingIntervals}},{title:"Custom Dashes",example:{model:customDashes}},{title:"Many Intervals",example:{model:manyIntervals}},{title:"Moore's Law",example:{model:mooresLaw}}]};function squareWave(){return _createSquareWave(25)}function clover(){return _createParametricPlot(a=>2*Math.cos(2*a)*Math.cos(a),a=>2*Math.cos(2*a)*Math.sin(a),0,Math.PI*2,1e3,"Parametric function","Using the CartesianAxes property","2cos(2t)cos(t) , 2cos(2t)sin(t)")}function parametricFunction2(){return _createParametricPlot(a=>3*Math.sin(5*a),a=>3*Math.cos(3*a),0,Math.PI*2,1e3,"Parametric function",void 0,"3sin(5t) , 3cos(3t)")}function parametricFunction3(){return _createParametricPlot(a=>2*Math.cos(a)+Math.cos(8*a),a=>2*Math.sin(a)+Math.sin(8*a),0,Math.PI*2,1e3,"Parametric function",void 0,"2cos(t)+cos(8t) , 2sin(t)+sin(8t)")}function lemniscateOfBernoulli(){return _createParametricPlot(s=>1*Math.sqrt(2)*Math.cos(s)/(Math.sin(s)*Math.sin(s)+1),s=>1*Math.sqrt(2)*Math.cos(s)*Math.sin(s)/(Math.sin(s)*Math.sin(s)+1),0,Math.PI*2,1e3,"Lemniscate of Bernoulli")}function lemniscateOfGerono(){return _createParametricPlot(a=>Math.cos(a),a=>Math.sin(2*a)/2,0,Math.PI*2,1e3,"Lemniscate of Gerono")}function lissajousFigure(){const d=Math.PI/2;return _createParametricPlot(m=>Math.sin(3*m+d),m=>Math.sin(2*m),0,Math.PI*2,1e3,"Lissajous figure",void 0,"a=3, b=2,  = /2")}function roseCurve(){const a=new PlotModel({title:"Rose curve",plotType:PlotType.Polar,plotAreaBorderThickness:new OxyThickness(0)});a.axes.push(new AngleAxis({minimum:0,maximum:Math.PI*2,majorStep:Math.PI/4,minorStep:Math.PI/16,majorGridlineStyle:LineStyle.Solid,formatAsFractions:!0,fractionUnit:Math.PI,fractionUnitSymbol:""})),a.axes.push(new MagnitudeAxis({majorGridlineStyle:LineStyle.Solid}));const s=4,d=3,m=d/s;return a.series.push(new FunctionSeries({fx:f=>Math.sin(m*f),fy:f=>f,t0:0,t1:Math.PI*2*s,n:1e3,title:`d=${s}, n=${d}`})),a}function limaconOfPascal(){const a=new PlotModel({title:"Limaon of Pascal",plotType:PlotType.Cartesian});for(let s=4;s<=4;s++)for(let d=0;d<=10;d++)a.series.push(new FunctionSeries({fx:m=>s/2+d*Math.cos(m)+s/2*Math.cos(2*m),fy:m=>d*Math.sin(m)+s/2*Math.sin(2*m),t0:0,t1:Math.PI*2,n:1e3,title:`a=${s}, b=${d}`}));return a}function descartesFolium(){const a=new PlotModel({title:"Folium of Descartes",plotType:PlotType.Cartesian});a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-3,maximum:3})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-3,maximum:3}));const s=1;return a.series.push(new FunctionSeries({fx:d=>3*s*d/(Math.pow(d,3)+1),fy:d=>3*s*Math.pow(d,2)/(Math.pow(d,3)+1),t0:-30,t1:30,n:1001,title:`a=${s}`})),a}function trisectrixOfMaclaurin(){const a=new PlotModel({title:"Trisectrix of Maclaurin",plotType:PlotType.Cartesian}),s=1;return a.series.push(new FunctionSeries({fx:d=>s*(d*d-3)/(d*d+1),fy:d=>s*d*(d*d-3)/(d*d+1),t0:-5,t1:5,n:1e3})),a}function fermatsSpiral(){const a=new PlotModel({title:"Fermat's spiral",plotType:PlotType.Cartesian}),s=1;return a.series.push(new FunctionSeries({fx:d=>s*Math.sqrt(d)*Math.cos(d),fy:d=>s*Math.sqrt(d)*Math.sin(d),t0:0,t1:20,n:1e3})),a.series.push(new FunctionSeries({fx:d=>-s*Math.sqrt(d)*Math.cos(d),fy:d=>-s*Math.sqrt(d)*Math.sin(d),t0:0,t1:20,n:1e3})),a}function fishCurve(){const a=new PlotModel({title:"Fish curve",plotType:PlotType.Cartesian});for(let s=.1;s<1;s+=.1)a.series.push(new FunctionSeries({fx:d=>s*(Math.cos(d)-Math.sin(d)*Math.sin(d)/Math.sqrt(2)),fy:d=>s*Math.cos(d)*Math.sin(d),t0:0,t1:2*Math.PI,n:1e3}));return a}function heavisideStepFunction(){const a=new PlotModel({title:"Heaviside step function",plotType:PlotType.Cartesian});return a.series.push(new FunctionSeries({f:s=>Math.abs(s)<1e-8?NaN:s<0?0:1,x0:-2,x1:2,dx:.001})),a.annotations.push(new LineAnnotation({type:LineAnnotationType.Vertical,color:a.defaultColors[0],x:0,minimumY:0,maximumY:1})),a}function functionSeries(){const a=new PlotModel({title:"Trigonometric functions",subtitle:"Example using the FunctionSeries",plotType:PlotType.Cartesian,plotAreaBackground:OxyColors.White});return a.series.push(new FunctionSeries({f:Math.sin,x0:-10,x1:10,dx:.1,title:"sin(x)"})),a.series.push(new FunctionSeries({f:Math.cos,x0:-10,x1:10,dx:.1,title:"cos(x)"})),a.series.push(new FunctionSeries({fx:s=>5*Math.cos(s),fy:s=>5*Math.sin(s),t0:0,t1:2*Math.PI,n:1e3,title:"cos(t),sin(t)"})),a}function squirqle(){const a=new PlotModel({title:"Squirqle",plotType:PlotType.Cartesian});return a.series.push(_createSuperellipseSeries(4,1,1)),a}function superellipse20(){const a=new PlotModel({title:"Superellipse",plotType:PlotType.Cartesian}),s=_createSuperellipseSeries(20,1,1);return s.markerType=MarkerType.Circle,a.series.push(s),a}function lameCurves(){const a=new PlotModel({title:"Lam curves",plotType:PlotType.Cartesian}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);for(let d=.25;d<2;d+=.25)a.series.push(_createSuperellipseSeries(d,1,1));for(let d=2;d<=8+1e-6;d+=1)a.series.push(_createSuperellipseSeries(d,1,1));return a}function _createSquareWave(a=25){const s=new PlotModel({title:"Square wave (Gibbs phenomenon)"}),d=f=>{let g=0;for(let x=0;x<a;x++){const w=x*2+1;g+=Math.sin(w*f)/w}return g},m=new FunctionSeries({f:d,x0:-10,x1:10,dx:1e-4,title:`sin(x)+sin(3x)/3+sin(5x)/5+...+sin(${2*a-1})/${2*a-1}`});return s.series.push(m),s.subtitle=`n = ${m.points.length}`,s.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-4,maximum:4})),s.axes.push(new LinearAxis({position:AxisPosition.Bottom})),s}function _createSuperellipseSeries(a,s,d){return new FunctionSeries({fx:m=>s*Math.sign(Math.cos(m))*Math.pow(Math.abs(Math.cos(m)),2/a),fy:m=>d*Math.sign(Math.sin(m))*Math.pow(Math.abs(Math.sin(m)),2/a),t0:0,t1:Math.PI*2,n:101,title:`n=${a}, a=${s}, b=${d}`})}function _createParametricPlot(a,s,d,m,f,g,x,w){const C=new PlotModel({title:g,subtitle:x,plotType:PlotType.Cartesian});return C.series.push(new FunctionSeries({fx:a,fy:s,t0:d,t1:m,n:f,title:w})),C}const category$g="FunctionSeries",FunctionSeriesExamples={category:category$g,tags:["Series"],examples:[{title:"Square wave",example:{model:squareWave}},{title:"Parametric function 1",example:{model:clover}},{title:"Parametric function 2",example:{model:parametricFunction2}},{title:"Parametric function 3",example:{model:parametricFunction3}},{title:"Lemniscate of Bernoulli",example:{model:lemniscateOfBernoulli}},{title:"Lemniscate of Gerono",example:{model:lemniscateOfGerono}},{title:"Lissajous figure",example:{model:lissajousFigure}},{title:"Rose curve",example:{model:roseCurve}},{title:"Limaon of Pascal",example:{model:limaconOfPascal}},{title:"Folium of Descartes",example:{model:descartesFolium}},{title:"Trisectrix of Maclaurin",example:{model:trisectrixOfMaclaurin}},{title:"Fermat's spiral",example:{model:fermatsSpiral}},{title:"Fish curve",example:{model:fishCurve}},{title:"Heaviside step function",example:{model:heavisideStepFunction}},{title:"FunctionSeries",example:{model:functionSeries}},{title:"Squirqle",example:{model:squirqle}},{title:"Superellipse n=20",example:{model:superellipse20}},{title:"Lam curves",example:{model:lameCurves}}]};function exponentialDistribution(){return createExponentialDistribution()}function exponentialDistributionLogarithmicAxis(){return createExponentialDistribution(!0)}function exponentialDistributionLogarithmicAxisWithBaseValue(){return createExponentialDistribution(!0,1,1e4,.1)}function histogramLabelPlacement(){const a=new PlotModel({title:"Label Placement"}),s=new HistogramSeries({labelPlacement:LabelPlacement.Base,labelStringFormatter:g=>"Base",strokeThickness:1,labelMargin:5}),d=new HistogramSeries({labelPlacement:LabelPlacement.Inside,labelStringFormatter:g=>"Inside",strokeThickness:1,labelMargin:5}),m=new HistogramSeries({labelPlacement:LabelPlacement.Middle,labelStringFormatter:g=>"Middle",strokeThickness:1,labelMargin:5}),f=new HistogramSeries({labelPlacement:LabelPlacement.Outside,labelStringFormatter:g=>"Outside",strokeThickness:1,labelMargin:5});return s.items.push(new HistogramItem(1,2,4,4)),s.items.push(new HistogramItem(2,3,-4,4)),d.items.push(new HistogramItem(3,4,2,2)),d.items.push(new HistogramItem(4,5,-2,2)),m.items.push(new HistogramItem(5,6,3,3)),m.items.push(new HistogramItem(6,7,-3,3)),f.items.push(new HistogramItem(7,8,1,1)),f.items.push(new HistogramItem(8,9,-1,-1)),a.series.push(s),a.series.push(d),a.series.push(m),a.series.push(f),a}function labelPlacementReversed(){const a=histogramLabelPlacement();return PlotModelUtilities.reverseYAxis(a),a}function labelFormatString$1(){const a=createDisconnectedBins(),s=a.series[0];return s.labelStringFormatter=d=>`Start: ${d.rangeStart.toFixed(2)}
End: ${d.rangeEnd.toFixed(2)}
Value: ${d.value.toFixed(2)}
Area: ${d.area.toFixed(2)}
Count: ${d.count}`,s.labelPlacement=LabelPlacement.Inside,a}function customBins(){return createExponentialDistributionCustomBins()}function disconnectedBins(){return createDisconnectedBins()}function normalDistribution(){return createNormalDistribution()}function individualBinColors(){return createIndividualBinColors()}function customItemMapping(){const a=new PlotModel({title:"Custom Item Mapping"}),s=new HistogramSeries({mapping:d=>d,trackerStringFormatter:d=>d.item.description});return s.items.push(new CustomHistogramItem(1,2,4,4,"Item 1")),s.items.push(new CustomHistogramItem(2,3,-4,4,"Item 2")),s.items.push(new CustomHistogramItem(3,4,2,2,"Item 3")),s.items.push(new CustomHistogramItem(4,5,-2,2,"Item 4")),a.series.push(s),a}class CustomHistogramItem extends HistogramItem{constructor(s,d,m,f,g){super(s,d,m,f),this.description=g}}function createExponentialDistribution(a=!1,s=1,d=1e4,m=0){const f=new PlotModel({title:a?"Exponential Distribution (logarithmic)":"Exponential Distribution",subtitle:`Uniformly distributed bins (${d} samples)`});f.axes.push(a?new LogarithmicAxis({position:AxisPosition.Left,title:"Frequency"}):new LinearAxis({position:AxisPosition.Left,title:"Frequency"})),f.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"x"}));const g=new Random(1),x=new HistogramSeries,w=new BinningOptions(BinningOutlierMode.CountOutliers,BinningIntervalType.InclusiveLowerBound,BinningExtremeValueMode.ExcludeExtremeValues),C=HistogramHelpers.createUniformBins(0,5,15);return x.items.push(...HistogramHelpers.collect(sampleExps(g,s,d),C,w)),x.strokeThickness=1,x.baseValue=m,x.negativeFillColor=OxyColors.Red,f.series.push(x),f}function createExponentialDistributionCustomBins(a=1,s=5e4){const d=new PlotModel({title:"Exponential Distribution",subtitle:`Custom bins (${s} samples)`});d.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Frequency"})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"x"}));const m=new Random(1),f=new HistogramSeries,g=new BinningOptions(BinningOutlierMode.CountOutliers,BinningIntervalType.InclusiveLowerBound,BinningExtremeValueMode.ExcludeExtremeValues);return f.items.push(...HistogramHelpers.collect(sampleExps(m,a,s),[0,.1,.2,.3,.4,.5,.75,1,2,3,4,5],g)),f.strokeThickness=1,f.fillColor=OxyColors.Purple,d.series.push(f),d}function createNormalDistribution(a=0,s=1,d=1e6){const m=new PlotModel({title:`Normal Distribution (=${a}, =${s})`,subtitle:`95% of the distribution (${d} samples)`});m.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Frequency"})),m.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"x"}));const f=new Random(1),g=new HistogramSeries,x=new BinningOptions(BinningOutlierMode.CountOutliers,BinningIntervalType.InclusiveLowerBound,BinningExtremeValueMode.ExcludeExtremeValues),w=HistogramHelpers.createUniformBins(-s*4,s*4,100);g.items.push(...HistogramHelpers.collect(sampleNormal(f,a,s,d),w,x)),g.strokeThickness=1;const C=a+1.96*s,A=a-1.96*s,_=OxyColors.DarkRed,M=OxyColors.DarkRed;return g.colorMapping=P=>P.rangeCenter>C?_:P.rangeCenter<A?M:g.actualFillColor,m.series.push(g),m}function createDisconnectedBins(){const a=new PlotModel({title:"Disconnected Bins"});a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Representation"})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"x"}));const s=new HistogramSeries;return s.items.push(new HistogramItem(0,.5,10,7),new HistogramItem(.75,1,10,7)),s.labelStringFormatter=d=>d.toFixed(2),s.labelPlacement=LabelPlacement.Middle,a.series.push(s),a}function createIndividualBinColors(a=1,s=1e4){const d=new PlotModel({title:"Individual Bin Colors",subtitle:"Minimum is Red, Maximum is Green"});d.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Frequency"})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Observation"}));const m=new Random(1),f=new HistogramSeries({fillColor:OxyColors.Gray,renderInLegend:!0,title:"Measurements"}),g=new BinningOptions(BinningOutlierMode.CountOutliers,BinningIntervalType.InclusiveLowerBound,BinningExtremeValueMode.ExcludeExtremeValues),x=HistogramHelpers.createUniformBins(0,10,20),w=HistogramHelpers.collect(sampleUniform(m,0,10,1e3),x,g).sort((C,A)=>C.count-A.count);return w[0].color=OxyColors.Red,w[w.length-1].color=OxyColors.Green,f.items.push(...w),f.strokeThickness=1,d.series.push(f),d}function sampleExps(a,s,d){const m=[];for(let f=0;f<d;f++)m.push(sampleExp(a,s));return m}function sampleExp(a,s){return Math.log(1-a.next())/-s}function sampleNormal(a,s,d,m){const f=[];for(let g=0;g<m;g++)f.push(sampleNormalSingle(a,s,d));return f}function sampleNormalSingle(a,s,d){const m=1-a.next(),f=a.next();return Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*f)*d+s}function sampleUniform(a,s,d,m){const f=[];for(let g=0;g<m;g++)f.push(a.next()*(d-s)+s);return f}const category$f="HistogramSeries",HistogramSeriesExamples={category:category$f,tags:["Series"],examples:[{title:"Exponential Distribution",example:{model:exponentialDistribution}},{title:"Exponential Distribution (logarithmic)",example:{model:exponentialDistributionLogarithmicAxis}},{title:"Exponential Distribution (logarithmic,with BaseValue)",example:{model:exponentialDistributionLogarithmicAxisWithBaseValue}},{title:"Label Placement",example:{model:histogramLabelPlacement}},{title:"Label Placement (reversed Y Axis)",example:{model:labelPlacementReversed}},{title:"Label Format String",example:{model:labelFormatString$1}},{title:"Custom Bins",example:{model:customBins}},{title:"Disconnected Bins",example:{model:disconnectedBins}},{title:"Normal Distribution Three Colors",example:{model:normalDistribution}},{title:"Individual Bin Colors",example:{model:individualBinColors}},{title:"Custom Item Mapping",example:{model:customItemMapping}}]};function intervalBarSeries(){const a=new PlotModel({title:"IntervalBarSeries"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new IntervalBarSeries({title:"IntervalBarSeries 1"});d.items.push(new IntervalBarItem({start:6,end:8})),d.items.push(new IntervalBarItem({start:4,end:8})),d.items.push(new IntervalBarItem({start:5,end:11})),d.items.push(new IntervalBarItem({start:4,end:12})),a.series.push(d);const m=new IntervalBarSeries({title:"IntervalBarSeries 2"});m.items.push(new IntervalBarItem({start:8,end:9})),m.items.push(new IntervalBarItem({start:8,end:10})),m.items.push(new IntervalBarItem({start:11,end:12})),m.items.push(new IntervalBarItem({start:12,end:12.5})),a.series.push(m);const f=new CategoryAxis({position:AxisPosition.Left});f.labels.push("Activity A"),f.labels.push("Activity B"),f.labels.push("Activity C"),f.labels.push("Activity D");const g=new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.1,maximumPadding:.1});return a.axes.push(f),a.axes.push(g),a}function intervalBarSeriesWithLabels(){const a=new PlotModel({title:"IntervalBarSeries"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new IntervalBarSeries({title:"IntervalBarSeries 1",labelPlacement:LabelPlacement.Outside});d.items.push(new IntervalBarItem({start:6,end:8,categoryIndex:0})),d.items.push(new IntervalBarItem({start:10,end:12,categoryIndex:0})),a.series.push(d);const m=new IntervalBarSeries({title:"IntervalBarSeries 2",labelPlacement:LabelPlacement.Inside});m.items.push(new IntervalBarItem({start:4,end:8,categoryIndex:1})),m.items.push(new IntervalBarItem({start:10,end:12,categoryIndex:1})),a.series.push(m);const f=new IntervalBarSeries({title:"IntervalBarSeries 3",labelPlacement:LabelPlacement.Middle});f.items.push(new IntervalBarItem({start:5,end:11,categoryIndex:2})),f.items.push(new IntervalBarItem({start:13,end:17,categoryIndex:2})),a.series.push(f);const g=new IntervalBarSeries({title:"IntervalBarSeries 4",labelPlacement:LabelPlacement.Base,textColor:OxyColors.White});g.items.push(new IntervalBarItem({start:4,end:12,categoryIndex:3})),g.items.push(new IntervalBarItem({start:13,end:17,categoryIndex:3})),a.series.push(g);const x=new IntervalBarSeries({title:"IntervalBarSeries 5",labelPlacement:LabelPlacement.Outside,labelAngle:-45});x.items.push(new IntervalBarItem({start:6,end:8,categoryIndex:4})),x.items.push(new IntervalBarItem({start:10,end:12,categoryIndex:4})),a.series.push(x);const w=new IntervalBarSeries({title:"IntervalBarSeries 6",labelPlacement:LabelPlacement.Inside,labelAngle:-45});w.items.push(new IntervalBarItem({start:4,end:8,categoryIndex:5})),w.items.push(new IntervalBarItem({start:10,end:12,categoryIndex:5})),a.series.push(w);const C=new IntervalBarSeries({title:"IntervalBarSeries 7",labelPlacement:LabelPlacement.Middle,labelAngle:-45});C.items.push(new IntervalBarItem({start:5,end:11,categoryIndex:6})),C.items.push(new IntervalBarItem({start:13,end:17,categoryIndex:6})),a.series.push(C);const A=new IntervalBarSeries({title:"IntervalBarSeries 8",labelPlacement:LabelPlacement.Base,labelAngle:-45});A.items.push(new IntervalBarItem({start:4,end:12,categoryIndex:7})),A.items.push(new IntervalBarItem({start:13,end:17,categoryIndex:7})),a.series.push(A);const _=new CategoryAxis({key:"CategoryAxis",position:AxisPosition.Left,startPosition:1,endPosition:0});_.labels.push("Label Outside"),_.labels.push("Label Inside"),_.labels.push("Label Middle"),_.labels.push("Label Base"),_.labels.push("Label Outside (angled)"),_.labels.push("Label Inside (angled)"),_.labels.push("Label Middle (angled)"),_.labels.push("Label Base (angled)");const M=new LinearAxis({key:"ValueAxis",position:AxisPosition.Bottom,minimumPadding:.1,maximumPadding:.1});return a.axes.push(_),a.axes.push(M),a}const category$e="IntervalBarSeries",IntervalBarSeriesExamples={category:category$e,tags:["Series"],examples:[{title:"IntervalBarSeries",example:{model:intervalBarSeries}},{title:"IntervalBarSeries with various label types",example:{model:intervalBarSeriesWithLabels}}]};function defaultStyle$1(){const a=new PlotModel({title:"LinearBarSeries with default style"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=_createExampleLinearBarSeries();return s.title="LinearBarSeries",a.series.push(s),a}function withStroke(){const a=new PlotModel({title:"LinearBarSeries with stroke"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=_createExampleLinearBarSeries();return s.title="LinearBarSeries",s.fillColor=OxyColor.parse("#454CAF50"),s.strokeColor=OxyColor.parse("#4CAF50"),s.strokeThickness=1,a.series.push(s),a}function withNegativeColors(){return _createWithNegativeColors()}function withNegativeColorsLogarithmic(){return _createWithNegativeColors(!0)}function withBaseValue(){return _createWithNegativeColors(void 0,50)}function withBaseValueLogarithmic(){return _createWithNegativeColors(!0,50)}function _createWithNegativeColors(a=!1,s=0){const d=new PlotModel({title:a?"LinearBarSeries with stroke (logarithmic)":"LinearBarSeries with stroke"});d.axes.push(new LinearAxis({position:AxisPosition.Bottom})),d.axes.push(a?new LogarithmicAxis({position:AxisPosition.Left}):new LinearAxis({position:AxisPosition.Left}));const m=_createExampleLinearBarSeriesWithNegativeValues();return m.title="LinearBarSeries",m.fillColor=OxyColor.parse("#454CAF50"),m.strokeColor=OxyColor.parse("#4CAF50"),m.negativeFillColor=OxyColor.parse("#45BF360C"),m.negativeStrokeColor=OxyColor.parse("#BF360C"),m.strokeThickness=1,m.baseValue=s,d.series.push(m),d}function _createExampleLinearBarSeries(){const a=new LinearBarSeries,s=new Random;let d=s.next(10,31);for(let m=0;m<=50;m++)a.points.push(new DataPoint(m,d)),d+=s.next(-5,5);return a}function _createExampleLinearBarSeriesWithNegativeValues(){const a=new LinearBarSeries,s=new Random;for(let d=0;d<=50;d++){const m=-200+s.next(0,1e3);a.points.push(new DataPoint(d,m))}return a}const category$d="LinearBarSeries",LinearBarSeriesExamples={category:category$d,tags:["Series"],examples:[{title:"Default style",example:{model:defaultStyle$1}},{title:"With stroke",example:{model:withStroke}},{title:"With negative colors",example:{model:withNegativeColors}},{title:"With negative colors (logaritmic)",example:{model:withNegativeColorsLogarithmic}},{title:"With BaseValue",example:{model:withBaseValue}},{title:"With BaseValue (Logarithmic)",example:{model:withBaseValueLogarithmic}}]};function defaultStyle(){const a=new PlotModel({title:"LineSeries with default style"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=createExampleLineSeries();return s.title="LineSeries 1",a.series.push(s),a}function customStyle(){const a=new PlotModel({title:"LineSeries with custom style"}),s=new Legend({legendSymbolLength:24});a.legends.push(s),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const d=createExampleLineSeries();return d.title="LineSeries 1",d.toolTip="This is a tooltip for a LineSeries 1",d.color=OxyColors.SkyBlue,d.strokeThickness=3,d.lineStyle=LineStyle.Dash,d.markerType=MarkerType.Circle,d.markerSize=5,d.markerStroke=OxyColors.White,d.markerFill=OxyColors.SkyBlue,d.markerStrokeThickness=1.5,a.series.push(d),a}function twoLineSeries(){const a=new PlotModel({title:"Two LineSeries"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=createExampleLineSeries();s.title="LineSeries 1",a.series.push(s);const d=createExampleLineSeries(41);return d.title="LineSeries 2",a.series.push(d),a}function isVisibleFalse(){const a=new PlotModel({title:"LineSeries with IsVisible = false",subtitle:"Click to change the IsVisible property for LineSeries 2"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:0,maximum:50}));const s=createExampleLineSeries(38);s.title="LineSeries 1",a.series.push(s);const d=createExampleLineSeries(39);return d.title="LineSeries 2",d.isVisible=!1,a.series.push(d),a.mouseDown=(m,f)=>{d.isVisible=!d.isVisible,a.invalidatePlot(!0)},a}function trackerFormatString$1(){const a=new PlotModel({title:"LineSeries with custom TrackerFormatString",subtitle:'TrackerFormatString = "X={2:0.0} Y={4:0.0}"'});a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left}));const s=createExampleLineSeries();return s.trackerStringFormatter=d=>"X="+d.xValue.toFixed(1)+" Y="+d.yValue.toFixed(1),a.series.push(s),a}function customMarkers(){const a=new PlotModel({title:"LineSeries with custom markers"}),s=new Legend({legendSymbolLength:30});a.legends.push(s);const d=6,m=[];for(let g=0;g<d;g++){const x=Math.PI*(4*g/(d-1)-.5),w=1;m[g]=new ScreenPoint(Math.cos(x)*w,Math.sin(x)*w)}const f=createExampleLineSeries(39);return f.title="LineSeries 1",f.markerType=MarkerType.Custom,f.markerSize=8,f.markerOutline=m,a.series.push(f),a}function markerTypes$1(){const a=createModel("LineSeries with different MarkerType",MarkerType.Custom),s=new Legend({legendBackground:OxyColor.fromAColor(220,OxyColors.White),legendBorder:OxyColors.Black,legendBorderThickness:1});a.legends.push(s);let d=0;for(const m of a.series){const f=m;f.color=OxyColors.Red,f.markerStroke=OxyColors.Black,f.markerFill=OxyColors.Green,f.markerType=d++,f.title=MarkerType[f.markerType]}return a}function labels(){const a=new PlotModel({title:"LineSeries with labels",subtitle:"Use the 'labelFormatString' property"}),s=new Legend({legendSymbolLength:24});a.legends.push(s),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.axes.push(new LinearAxis({position:AxisPosition.Left,maximumPadding:.1}));const d=createExampleLineSeries();return d.labelStringFormatter=(m,f)=>f[1].toString(),d.markerType=MarkerType.Circle,a.series.push(d),a}function lineStyles(){const a=createModel("LineSeries with LineStyle",LineStyle.None),s=new Legend({legendPlacement:LegendPlacement.Outside,legendSymbolLength:50});a.legends.push(s);let d=0;for(const m of a.series){const f=m;f.color=OxyColors.Red,f.lineStyle=d++,f.title=LineStyle[f.lineStyle]}return a}function smooth(){const a=new PlotModel({title:"LineSeries with interpolation",subtitle:"InterpolationAlgorithm = CanonicalSpline"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=createExampleLineSeries();return d.markerType=MarkerType.Circle,d.interpolationAlgorithm=InterpolationAlgorithms.CanonicalSpline,a.series.push(d),a}function customLineLegendPosition(){const a=new PlotModel({title:"LineSeries with LineLegendPosition"});a.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimumPadding:.05,maximumPadding:.05})),a.axes.push(new LinearAxis({position:AxisPosition.Left,minimumPadding:.05,maximumPadding:.05}));const s=createExampleLineSeries();s.title="Start",s.markerType=MarkerType.Circle,s.lineLegendPosition=LineLegendPosition.Start,a.series.push(s);const d=createExampleLineSeries(41);return d.title="End",d.markerType=MarkerType.Circle,d.lineLegendPosition=LineLegendPosition.End,a.series.push(d),a}function customLineLegendPositionReversed(){return PlotModelUtilities.reverseXAxis(customLineLegendPosition())}function brokenLine(){const a=new PlotModel({title:"LineSeries with broken lines"}),s=createExampleLineSeries();s.points[3]=DataPoint.Undefined,s.points[7]=DataPoint.Undefined,s.brokenLineColor=OxyColors.Gray,s.brokenLineThickness=.5,s.brokenLineStyle=LineStyle.Solid,a.series.push(s);const d=createExampleLineSeries(49);return d.points[3]=DataPoint.Undefined,d.points[7]=DataPoint.Undefined,d.brokenLineColor=OxyColors.Automatic,d.brokenLineThickness=1,d.brokenLineStyle=LineStyle.Dot,a.series.push(d),a}function withoutDecimator(){const a=new PlotModel({title:"LineSeries without Decimator"}),s=createSeriesSuitableForDecimation();return a.series.push(s),a}function withXDecimator(){const a=new PlotModel({title:"LineSeries with X Decimator"}),s=createSeriesSuitableForDecimation();return s.decimator=Decimator.decimate,a.series.push(s),a}function canonicalSplineInterpolation(){const a=createRandomPoints();return new PlotModel({title:"Canonical spline interpolation",series:[new LineSeries({itemsSource:a,title:"Default (0.5)",interpolationAlgorithm:InterpolationAlgorithms.CanonicalSpline,markerType:MarkerType.Circle,markerFill:OxyColors.Black}),new LineSeries({itemsSource:a,title:"0.1",interpolationAlgorithm:new CanonicalSpline(.1)}),new LineSeries({itemsSource:a,title:"1.0",interpolationAlgorithm:new CanonicalSpline(1)})]})}function catmullRomInterpolation(){const a=createRandomPoints();return new PlotModel({title:"Catmull-Rom interpolation",series:[new LineSeries({itemsSource:a,title:"Standard",interpolationAlgorithm:InterpolationAlgorithms.CatmullRomSpline,markerType:MarkerType.Circle,markerFill:OxyColors.Black}),new LineSeries({itemsSource:a,title:"Chordal",interpolationAlgorithm:InterpolationAlgorithms.ChordalCatmullRomSpline}),new LineSeries({itemsSource:a,title:"Uniform",interpolationAlgorithm:InterpolationAlgorithms.UniformCatmullRomSpline})]})}function markerColorOptions(){createRandomPoints();const a=new PlotModel({title:"Marker color options"}),s=createExampleLineSeries(1);s.markerType=MarkerType.Circle,a.series.push(s);const d=createExampleLineSeries(4);d.markerType=MarkerType.Square,d.color=OxyColors.LightBlue,a.series.push(d);const m=createExampleLineSeries(13);m.markerType=MarkerType.Square,m.markerFill=OxyColors.Black,a.series.push(m);const f=createExampleLineSeries(5);return f.markerType=MarkerType.Square,f.markerFill=OxyColors.OrangeRed,f.color=OxyColors.Orange,a.series.push(f),a}function createRandomPoints(a=50){const s=new Random,d=[];for(let m=0;m<a;m++)m<5?d.push(new DataPoint(m,0)):m<10?d.push(new DataPoint(m,1)):m<12?d.push(new DataPoint(m,0)):d.push(new DataPoint(m,s.next()));return d}function createExampleLineSeries(a=13){const s=new LineSeries,d=new Random(a);let m=d.next(10,30);for(let f=0;f<=100;f+=10)s.points.push(new DataPoint(f,m)),m+=d.next(-5,5);return s}function createModel(a,s=20){const d=new PlotModel({title:a});for(let m=1;m<=s;m++){const f=new LineSeries({title:"Series "+m});d.series.push(f);for(let g=0;g<2*Math.PI;g+=.1)f.points.push(new DataPoint(g,Math.sin(g*m)/(m+1)+m))}return d}function createSeriesSuitableForDecimation(){const a=new LineSeries,s=2e4;for(let d=0;d<s;d++)a.points.push(new DataPoint(d/s,Math.sin(d)));return a}const category$c="LineSeries",LineSeriesExamples={category:category$c,tags:["Series"],examples:[{title:"Default style",example:{model:defaultStyle}},{title:"Custom style",example:{model:customStyle}},{title:"Two LineSeries",example:{model:twoLineSeries}},{title:"Visibility",example:{model:isVisibleFalse}},{title:"Custom TrackerFormatString",example:{model:trackerFormatString$1}},{title:"Custom markers",example:{model:customMarkers}},{title:"Marker types",example:{model:markerTypes$1}},{title:"Labels",example:{model:labels}},{title:"LineStyle",example:{model:lineStyles}},{title:"Interpolation",example:{model:smooth}},{title:"LineLegendPosition",example:{model:customLineLegendPosition}},{title:"LineLegendPosition (reversed X Axis)",example:{model:customLineLegendPositionReversed}},{title:"Broken lines",example:{model:brokenLine}},{title:"Without Decimator",example:{model:withoutDecimator}},{title:"With X Decimator",example:{model:withXDecimator}},{title:"Canonical spline interpolation",example:{model:canonicalSplineInterpolation}},{title:"Catmull-Rom interpolation",example:{model:catmullRomInterpolation}},{title:"Marker color options",example:{model:markerColorOptions}}]};function pieSeries(){return createExample()}function insideLabelColor(){const a=createExample(),s=a.series[0];return s.insideLabelColor=OxyColors.White,a}function createExample(){const a=new PlotModel({title:"World population by continent"}),s=new PieSeries({strokeThickness:2,insideLabelPosition:.8,angleSpan:360,startAngle:0});return s.slices.push({label:"Africa",value:1030,isExploded:!0}),s.slices.push({label:"Americas",value:929,isExploded:!0}),s.slices.push({label:"Asia",value:4157}),s.slices.push({label:"Europe",value:739,isExploded:!0}),s.slices.push({label:"Oceania",value:35,isExploded:!0}),a.series.push(s),a}const category$b="PieSeries",PieSeriesExamples={category:category$b,tags:["Series"],examples:[{title:"PieSeries",example:{model:pieSeries}},{title:"PieSeries with inside label color",example:{model:insideLabelColor}}]};function rectangleBarSeries(){const a=new PlotModel({title:"RectangleBarSeries"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new RectangleBarSeries({title:"RectangleBarSeries 1"}),m=g=>(g.color||(g.color=OxyColors.Automatic),g);d.items.push(m({x0:2,x1:8,y0:1,y1:4})),d.items.push(m({x0:6,x1:12,y0:6,y1:7})),a.series.push(d);const f=new RectangleBarSeries({title:"RectangleBarSeries 2"});return f.items.push(m({x0:2,x1:8,y0:-4,y1:-1})),f.items.push(m({x0:6,x1:12,y0:-7,y1:-6})),a.series.push(f),a}const category$a="RectangleBarSeries",RectangleBarSeriesExamples={category:category$a,tags:["Series"],examples:[{title:"RectangleBarSeries",example:{model:rectangleBarSeries}}]};function fromItems$1(){const s=new PlotModel({title:"RectangleSeries"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(100)}));const d=new RectangleSeries({labelFontSize:12});for(let m=9;m>=0;m--)d.items.push(new RectangleItem(-m*.5,m*.5,m*m,m*(m+3),m));return s.series.push(d),s}function fromItemsSource$1(){const s=new PlotModel({title:"RectangleSeries"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.jet(100)}));const d=[];for(let m=0;m<10;m++)d.push({x:m,value:m});return s.series.push(new RectangleSeries({itemsSource:d,mapping:m=>{const f=m;return new RectangleItem(f.x,f.x*2,f.x,f.x*2,f.value)}})),s}const category$9="RectangleSeries",RectangleSeriesExamples={category:category$9,tags:["Series"],examples:[{title:"RectangleSeries",example:{model:fromItems$1}},{title:"RectangleSeries from ItemsSource and Mapping",example:{model:fromItemsSource$1}}]};function correlatedScatter(){return createCorrelatedScatter(1e3)}function randomScatter1(){return randomScatter(32768,0)}function randomScatter2(){return randomScatter(32768,2)}function randomScatter4(){return randomScatter(32768,4)}function randomScatter6(){return randomScatter(32768,6)}function randomScatter8(){return randomScatter(32768,8)}function randomScatter10(){return randomScatter(32768,10)}function twoScatterSeries(){const a=new PlotModel({title:"Two ScatterSeries (with and without values)",subtitle:"With values (squares), without values (triangles)"}),s=new LinearColorAxis({position:AxisPosition.Right,key:"ColorAxis",palette:OxyPalettes.jet(30),minimum:-1,maximum:1});return a.axes.push(s),a.series.push(createRandomScatterSeries(50,MarkerType.Triangle,!1,!1,void 0)),a.series.push(createRandomScatterSeries(50,MarkerType.Square,!1,!0,s)),a}function labelFormatString(){const a=new PlotModel({title:"ScatterSeries with LabelFormatString"}),s=createRandomScatterSeries(50,MarkerType.Square,!1,!1,void 0);return s.labelStringFormatter=(d,m)=>round(m[1],3).toString(),a.series.push(s),a}function createRandomScatterSeries(a,s,d,m,f){const g=new ScatterSeries({markerType:s,markerSize:6,colorAxisKey:f!==void 0?f.key:void 0}),x=new Random;for(let w=0;w<a;w++){let C;d&&(C=x.next()*5+5);let A;m&&(A=x.next()*2.2-1.1);const _={x:x.next()*2.2-1.1,y:x.next(),size:C,value:A};g.points.push(_)}return g}function randomSize(){return createRandomSizeModel(1e3,8)}function createRandomSizeModel(a,s){const d=new PlotModel({title:`ScatterSeries with random MarkerSize (n=${a})`,subtitle:`BinSize = ${s}`}),m=new ScatterSeries({title:"Series 1",markerStrokeThickness:0,binSize:s}),f=new Random;for(let g=0;g<a;g++)m.points.push({x:f.next(),y:f.next(),size:4+10*f.next()});return d.series.push(m),d}function randomWithFit(){const s=new PlotModel({title:"Random data (n=20)"}),d=new Legend({legendPosition:LegendPosition.LeftTop});s.legends.push(d);const m=new ScatterSeries({title:"Measurements"}),f=new Random;let g=0,x=0;for(let A=0;A<20;A++){g+=2+f.next()*10,x+=1+f.next();const _={x:g,y:x};m.points.push(_)}s.series.push(m);const[w,C]=leastSquaresFit(m.points);return s.annotations.push(new LineAnnotation({slope:w,intercept:C,text:"Least squares fit"})),s}function leastSquaresFit(a){let s=0,d=0,m=0,f=0,g=0;for(const A of a)s+=A.x,d+=A.y,m+=A.x*A.y,f+=A.x*A.x,g++;const x=s*s-g*f,w=1/x*(s*d-g*m),C=1/x*(s*m-f*d);return[w,C]}function markerTypes(){const a=new PlotModel({title:"Marker types"}),s=new Random;return a.series.push(createRandomScatterSeriesWithMarker(s,10,"Circle",MarkerType.Circle)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Cross",MarkerType.Cross)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Diamond",MarkerType.Diamond)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Plus",MarkerType.Plus)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Square",MarkerType.Square)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Star",MarkerType.Star)),a.series.push(createRandomScatterSeriesWithMarker(s,10,"Triangle",MarkerType.Triangle)),a}function dataPoints(){const a=new PlotModel({title:"ScatterSeries (n=1000)",subtitle:"The scatter points are added to the Points collection."}),s=new ScatterSeries;return s.points.push(...createRandomScatterPoints(1e3)),a.series.push(s),a}function fromItemsSource(){const a=new PlotModel({title:"ScatterSeries (n=1000)",subtitle:"The scatter points are defined in the ItemsSource property."});return a.series.push(new ScatterSeries({itemsSource:createRandomScatterPoints(1e3)})),a}function fromMapping(){const a=new PlotModel({title:"ScatterSeries (n=1000)",subtitle:"The scatter points are defined by a mapping from the ItemsSource."});return a.series.push(new ScatterSeries({itemsSource:createRandomDataPoints(1e3),mapping:s=>s})),a}function fromItemsSourceReflection(){const a=new PlotModel({title:"ScatterSeries (n=1000)",subtitle:"The scatter points are defined by reflection from the ItemsSource."});return a.series.push(new ScatterSeries({itemsSource:createRandomDataPoints(1e3),dataFieldX:"x",dataFieldY:"y"})),a}function colorMapRainbow16(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.rainbow(16),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapHue30(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.hue(30),MarkerType.Star,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapHot64(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.hot(64),MarkerType.Triangle,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapCool32(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.cool(32),MarkerType.Circle,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapGray32(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.gray(32),MarkerType.Diamond,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapJet32(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.jet(32),MarkerType.Plus,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapHot64Extreme(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.hot(64),MarkerType.Square,AxisPosition.Right,OxyColors.Magenta,OxyColors.Green)}function colorMapHot64ExtremeTopLegend(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.hot(64),MarkerType.Cross,AxisPosition.Top,OxyColors.Magenta,OxyColors.Green)}function colorMapHot16Big(){return createRandomScatterSeriesWithColorAxisPlotModel(31e3,OxyPalettes.hot(16),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapBlueWhiteRed3(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.blueWhiteRed(3),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapBlueWhiteRed9(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.blueWhiteRed(9),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapBlueWhiteRed256(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.blueWhiteRed(256),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapBlackWhiteRed9(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.blackWhiteRed(9),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapBlackWhiteRed9TopLegend(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.blackWhiteRed(9),MarkerType.Square,AxisPosition.Top,OxyColors.Undefined,OxyColors.Undefined)}function colorMapViridis(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.viridis(),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapPlasma(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.plasma(),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapMagma(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.magma(),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapInferno(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.inferno(),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function colorMapCividis(){return createRandomScatterSeriesWithColorAxisPlotModel(2500,OxyPalettes.cividis(),MarkerType.Square,AxisPosition.Right,OxyColors.Undefined,OxyColors.Undefined)}function singleSelectItems(){const a=randomScatter(10,8);a.subtitle="Click to select a point",a.selectionColor=OxyColors.Red;const s=a.series[0];return s.selectionMode=SelectionMode.Single,s.selectItem(3),s.selectItem(5),s.mouseDown=(d,m)=>{const f=m.hitTestResult.index;s.selectItem(f),a.invalidatePlot(!1),m.handled=!0},a.mouseDown=(d,m)=>{s.clearSelection(),a.invalidatePlot(!1),m.handled=!0},a}function multiSelectItems(){const a=randomScatter(10,8);a.subtitle="Click to toggle point selection",a.selectionColor=OxyColors.Red;const s=a.series[0];return s.selectionMode=SelectionMode.Multiple,s.selectItem(3),s.selectItem(5),s.mouseDown=(d,m)=>{const f=m.hitTestResult.index;s.isItemSelected(f)?s.unselectItem(f):s.selectItem(f),a.invalidatePlot(!1),m.handled=!0},a.mouseDown=(d,m)=>{s.clearSelection(),a.invalidatePlot(!1),m.handled=!0},a}function allSelected(){return createAllSelectedModel(!1)}function allSelectedWithTracker(){return createAllSelectedModel(!0)}function trackerFormatString(){const a=new PlotModel({title:"TrackerFormatString"}),s=new ScatterSeries({trackerStringFormatter:m=>m.item.sum.toString(),dataFieldX:"x",dataFieldY:"y"}),d=[new MyPoint(10,40),new MyPoint(40,20),new MyPoint(60,30)];return s.itemsSource=d,a.series.push(s),a}function createAllSelectedModel(a){const s=randomScatter(10,8);s.subtitle="Click to select all points",s.selectionColor=OxyColors.Red;const d=s.series[0];return d.selectionMode=SelectionMode.All,d.mouseDown=(m,f)=>{d.select(),s.invalidatePlot(!1),f.handled=!a},s.mouseDown=(m,f)=>{f.hitTestResult!==void 0&&a||(d.clearSelection(),s.invalidatePlot(!1),f.handled=!0)},s}class MyPoint{constructor(s,d){this.x=s,this.y=d}get sum(){return this.x+this.y}}function randomScatter(a,s){const d=new PlotModel({title:`ScatterSeries (n=${a})`,subtitle:s>0?`BinSize = ${s}`:"No 'binning'"}),m=new ScatterSeries({title:"Series 1",markerType:MarkerType.Diamond,markerStrokeThickness:0,binSize:s}),f=new Random;for(let g=0;g<a;g++)m.points.push({x:f.next(),y:f.next()});return d.series.push(m),d}function createRandomScatterSeriesWithColorAxisPlotModel(a,s,d,m,f,g){const x=new PlotModel({title:`ScatterSeries (n=${a})`,background:OxyColors.LightGray}),w=new LinearColorAxis({position:m,palette:s,minimum:-1,maximum:1,highColor:f,lowColor:g});return x.axes.push(w),x.series.push(createRandomScatterSeries(a,d,!1,!0,w)),x}function createCorrelatedScatter(a){const s=new PlotModel({title:`Correlated ScatterSeries (n=${a})`}),d=new ScatterSeries({title:"Series 1",markerType:MarkerType.Diamond,markerStrokeThickness:0}),m=new Random;for(let f=0;f<a;f++){const g=getNormalDistributedValue(m),x=2*g*g+getNormalDistributedValue(m);d.points.push({x:g,y:x})}return s.series.push(d),s}function createRandomScatterSeriesWithMarker(a,s,d,m){const f=new ScatterSeries({title:d,markerType:m,markerStroke:OxyColors.Black,markerStrokeThickness:1});for(let g=0;g<s;g++){const x=a.next()*10,w=a.next()*10,C={x,y:w};f.points.push(C)}return f}function getNormalDistributedValue(a){const s=a.next(),d=a.next();return Math.sqrt(-2*Math.log(s))*Math.sin(2*Math.PI*d)}function createRandomDataPoints(a){return createRandomScatterPoints(a).map(s=>new DataPoint(s.x,s.y))}function createRandomScatterPoints(a){const s=new Random,d=[];for(let m=0;m<a;m++){const f=s.next()*10,g=s.next()*10,x={x:f,y:g};d.push(x)}return d}const category$8="ScatterSeries",ScatterSeriesExamples={category:category$8,tags:["Series"],examples:[{title:"Correlated points",example:{model:correlatedScatter}},{title:"Random points",example:{model:randomScatter1}},{title:"Random points (BinSize=2)",example:{model:randomScatter2}},{title:"Random points (BinSize=4)",example:{model:randomScatter4}},{title:"Random points (BinSize=6)",example:{model:randomScatter6}},{title:"Random points (BinSize=8)",example:{model:randomScatter8}},{title:"Random points (BinSize=10)",example:{model:randomScatter10}},{title:"Two ScatterSeries",example:{model:twoScatterSeries}},{title:"LabelFormatString",example:{model:labelFormatString}},{title:"Random points with random size",example:{model:randomSize}},{title:"Random points with least squares fit",example:{model:randomWithFit}},{title:"Marker types",example:{model:markerTypes}},{title:"ScatterSeries.Points",example:{model:dataPoints}},{title:"ScatterSeries.ItemsSource",example:{model:fromItemsSource}},{title:"ScatterSeries.ItemsSource + Mapping",example:{model:fromMapping}},{title:"ScatterSeries.ItemsSource + reflection",example:{model:fromItemsSourceReflection}},{title:"ScatterSeries with ColorAxis Rainbow(16)",example:{model:colorMapRainbow16}},{title:"ScatterSeries with ColorAxis Hue(30) Star",example:{model:colorMapHue30}},{title:"ScatterSeries with ColorAxis Hot(64)",example:{model:colorMapHot64}},{title:"ScatterSeries with ColorAxis Cool(32)",example:{model:colorMapCool32}},{title:"ScatterSeries with ColorAxis Gray(32)",example:{model:colorMapGray32}},{title:"ScatterSeries with ColorAxis Jet(32)",example:{model:colorMapJet32}},{title:"ScatterSeries with ColorAxis Hot with extreme colors",example:{model:colorMapHot64Extreme}},{title:"ScatterSeries with ColorAxis Hot (top legend)",example:{model:colorMapHot64ExtremeTopLegend}},{title:"ScatterSeries with ColorAxis Hot(16) N=31000",example:{model:colorMapHot16Big}},{title:"ScatterSeries with ColorAxis BlueWhiteRed (3)",example:{model:colorMapBlueWhiteRed3}},{title:"ScatterSeries with ColorAxis BlueWhiteRed (9)",example:{model:colorMapBlueWhiteRed9}},{title:"ScatterSeries with ColorAxis BlueWhiteRed (256)",example:{model:colorMapBlueWhiteRed256}},{title:"ScatterSeries with ColorAxis BlackWhiteRed (9)",example:{model:colorMapBlackWhiteRed9}},{title:"ScatterSeries with ColorAxis BlackWhiteRed (9) top legend",example:{model:colorMapBlackWhiteRed9TopLegend}},{title:"ScatterSeries with ColorAxis Viridis",example:{model:colorMapViridis}},{title:"ScatterSeries with ColorAxis Plasma",example:{model:colorMapPlasma}},{title:"ScatterSeries with ColorAxis Magma",example:{model:colorMapMagma}},{title:"ScatterSeries with ColorAxis Inferno",example:{model:colorMapInferno}},{title:"ScatterSeries with ColorAxis Cividis",example:{model:colorMapCividis}},{title:"ScatterSeries with single-selected items",example:{model:singleSelectItems}},{title:"ScatterSeries with multi-selected items",example:{model:multiSelectItems}},{title:"ScatterSeries with SelectionMode.All (no tracker)",example:{model:allSelected}},{title:"ScatterSeries with SelectionMode.All (with tracker)",example:{model:allSelectedWithTracker}},{title:"TrackerFormatString",example:{model:trackerFormatString}}]};function stairStepSeries(){return createExampleModel$1(new StairStepSeries)}function stairStepSeriesWithLabels(){return createExampleModel$1(new StairStepSeries({labelStringFormatter:(a,s)=>`${round(s[1],2)}`}))}function stairStepSeriesWithMarkers(){return createExampleModel$1(new StairStepSeries({color:OxyColors.SkyBlue,markerType:MarkerType.Circle,markerSize:6,markerStroke:OxyColors.White,markerFill:OxyColors.SkyBlue,markerStrokeThickness:1.5}))}function stairStepSeriesThinVertical(){return createExampleModel$1(new StairStepSeries({strokeThickness:3,verticalStrokeThickness:.4,markerType:MarkerType.None}))}function stairStepSeriesDashedVertical(){return createExampleModel$1(new StairStepSeries({verticalLineStyle:LineStyle.Dash,markerType:MarkerType.None}))}function stairStepSeriesWithInvalidPoints(){const a=new PlotModel({title:"StairStepSeries with invalid points",subtitle:"Horizontal lines do not continue"});return populateInvalidPointExampleModel(a,s=>DataPoint.Undefined),a}function stairStepSeriesWithInvalidY(){const a=new PlotModel({title:"StairStepSeries with invalid Y",subtitle:"Horizontal lines continue until X of point with invalid Y"});return populateInvalidPointExampleModel(a,s=>new DataPoint(s,NaN)),a}function stairStepSeriesWithNonmonotonicX(){const a=new PlotModel({title:"StairStepSeries with non-monotonic X",subtitle:"Lines form a boxed I-beam"}),s=new StairStepSeries({markerType:MarkerType.Circle,verticalLineStyle:LineStyle.Dash,verticalStrokeThickness:4,points:[new DataPoint(1,1),new DataPoint(3,1),new DataPoint(2,3),new DataPoint(1,3),new DataPoint(3,3)]});a.series.push(s);const d=new StairStepSeries({markerType:MarkerType.Circle,verticalLineStyle:LineStyle.Dash,verticalStrokeThickness:4,points:[new DataPoint(1,0),new DataPoint(2,0),new DataPoint(0,0),new DataPoint(4,0),new DataPoint(4,4)]});a.series.push(d);const m=new StairStepSeries({markerType:MarkerType.Circle,verticalLineStyle:LineStyle.Dash,verticalStrokeThickness:4,points:[new DataPoint(3,4),new DataPoint(2,4),new DataPoint(4,4),new DataPoint(0,4),new DataPoint(0,0)]});return a.series.push(m),a}function createExampleModel$1(a){const s=new PlotModel({title:"StairStepSeries"}),d=new Legend({legendSymbolLength:24});s.legends.push(d),a.title="sin(x)";for(let m=0;m<Math.PI*2;m+=.5)a.points.push(new DataPoint(m,Math.sin(m)));return s.series.push(a),s}function populateInvalidPointExampleModel(a,s){a.legends.push(new Legend({legendOrientation:LegendOrientation.Horizontal,legendPlacement:LegendPlacement.Outside,legendPosition:LegendPosition.BottomCenter}));const d=new StairStepSeries({title:"Invalid First Point",markerType:MarkerType.Circle,points:[s(0),new DataPoint(1,3.5),new DataPoint(2,4),new DataPoint(3,4.5)]});a.series.push(d);const m=new StairStepSeries({title:"Invalid Second Point",markerType:MarkerType.Circle,points:[new DataPoint(0,2),s(1),new DataPoint(2,3),new DataPoint(3,3.5)]});a.series.push(m);const f=new StairStepSeries({title:"Invalid Penultimate Point",markerType:MarkerType.Circle,points:[new DataPoint(0,1),new DataPoint(1,1.5),s(2),new DataPoint(3,2.5)]});a.series.push(f);const g=new StairStepSeries({title:"Invalid Last Point",markerType:MarkerType.Circle,points:[new DataPoint(0,0),new DataPoint(1,.5),new DataPoint(2,1),s(3)]});a.series.push(g)}const category$7="StairStepSeries",StairStepSeriesExamples={category:category$7,tags:["Series"],examples:[{title:"StairStepSeries",example:{model:stairStepSeries}},{title:"StairStepSeries with labels",example:{model:stairStepSeriesWithLabels}},{title:"StairStepSeries with markers",example:{model:stairStepSeriesWithMarkers}},{title:"StairStepSeries with thin vertical lines",example:{model:stairStepSeriesThinVertical}},{title:"StairStepSeries with dashed vertical lines",example:{model:stairStepSeriesDashedVertical}},{title:"StairStepSeries with invalid points",example:{model:stairStepSeriesWithInvalidPoints}},{title:"StairStepSeries with invalid Y",example:{model:stairStepSeriesWithInvalidY}},{title:"StairStepSeries with non-monotonic X",example:{model:stairStepSeriesWithNonmonotonicX}}]};function stemSeries(){return createExampleModel(new StemSeries({color:OxyColors.SkyBlue,markerType:MarkerType.Circle,markerSize:6,markerStroke:OxyColors.White,markerStrokeThickness:1.5}))}function createExampleModel(a){const s=new PlotModel({title:"StemSeries"}),d=new Legend({legendSymbolLength:24});s.legends.push(d),a.title="sin(x)";for(let m=0;m<Math.PI*2;m+=.1)a.points.push(new DataPoint(m,Math.sin(m)));return s.series.push(a),s}const category$6="StemSeries",StemSeriesExamples={category:category$6,tags:["Series"],examples:[{title:"StemSeries",example:{model:stemSeries}}]};function threeColorLineSeries(){const a=new PlotModel({title:"ThreeColorLineSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new ThreeColorLineSeries({title:"Temperature at Eidesmoen, December 1986.",trackerStringFormatter:f=>`December ${round(f.xValue,0)}: ${f.yValue.toFixed(1)} C`,markerSize:4,markerStroke:OxyColors.Black,markerStrokeThickness:1.5,markerType:MarkerType.Circle,interpolationAlgorithm:InterpolationAlgorithms.CanonicalSpline,strokeThickness:3}),m=[5,0,7,7,4,3,5,5,11,4,2,3,2,1,0,2,-1,0,0,-3,-6,-13,-10,-10,0,-4,-5,-4,3,0,-5];for(let f=0;f<m.length;f++)d.points.push(new DataPoint(f+1,m[f]));return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C",extraGridlines:[0]})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Date"})),a}function twoColorLineSeriesReversed$1(){const a=threeColorLineSeries();return PlotModelUtilities.reverseYAxis(a),a}const category$5="ThreeColorLineSeries",ThreeColorLineSeriesExamples={category:category$5,tags:["Series"],examples:[{title:"Temperatures",example:{model:threeColorLineSeries}},{title:"Temperatures (Y Axis reversed)",example:{model:twoColorLineSeriesReversed$1}}]};function tornadoDiagram1(){const a=new PlotModel({title:"Tornado diagram 1"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new BarSeries({title:"High",isStacked:!0,fillColor:OxyColor.fromRgb(216,82,85),baseValue:7,strokeColor:OxyColors.Black,strokeThickness:1});d.items.push(new BarItem({value:1})),d.items.push(new BarItem({value:1})),d.items.push(new BarItem({value:4})),d.items.push(new BarItem({value:5}));const m=new BarSeries({title:"Low",isStacked:!0,fillColor:OxyColor.fromRgb(84,138,209),baseValue:7,strokeColor:OxyColors.Black,strokeThickness:1});m.items.push(new BarItem({value:-1})),m.items.push(new BarItem({value:-3})),m.items.push(new BarItem({value:-2})),m.items.push(new BarItem({value:-3}));const f=new CategoryAxis({position:AxisPosition.Left});f.labels.push("F/X rate"),f.labels.push("Inflation"),f.labels.push("Price"),f.labels.push("Conversion");const g=new LinearAxis({position:AxisPosition.Bottom,extraGridlines:[7]});return a.series.push(d),a.series.push(m),a.axes.push(f),a.axes.push(g),a}function tornadoDiagram2(){const a=new PlotModel({title:"Tornado diagram 2"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new TornadoBarSeries({title:"TornadoBarSeries",baseValue:7});d.items.push(new TornadoBarItem({minimum:6,maximum:8})),d.items.push(new TornadoBarItem({minimum:4,maximum:8})),d.items.push(new TornadoBarItem({minimum:5,maximum:11})),d.items.push(new TornadoBarItem({minimum:4,maximum:12}));const m=new CategoryAxis({position:AxisPosition.Left});m.labels.push("F/X rate"),m.labels.push("Inflation"),m.labels.push("Price"),m.labels.push("Conversion");const f=new LinearAxis({position:AxisPosition.Bottom,extraGridlines:[7],minimumPadding:.1,maximumPadding:.1});return a.series.push(d),a.axes.push(m),a.axes.push(f),a}function tornadoDiagramWithLabels(){const a=new PlotModel({title:"Tornado Diagram"}),s=new Legend({legendPlacement:LegendPlacement.Outside});a.legends.push(s);const d=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Outside});d.items.push(new TornadoBarItem({minimum:6,maximum:8,categoryIndex:0}));const m=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Inside});m.items.push(new TornadoBarItem({minimum:4,maximum:8,categoryIndex:1}));const f=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Middle});f.items.push(new TornadoBarItem({minimum:5,maximum:11,categoryIndex:2}));const g=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Base});g.items.push(new TornadoBarItem({minimum:4,maximum:12,categoryIndex:3}));const x=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Outside,labelAngle:-45});x.items.push(new TornadoBarItem({minimum:6,maximum:8,categoryIndex:4}));const w=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Inside,labelAngle:-45});w.items.push(new TornadoBarItem({minimum:4,maximum:8,categoryIndex:5}));const C=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Middle,labelAngle:-45});C.items.push(new TornadoBarItem({minimum:5,maximum:11,categoryIndex:6}));const A=new TornadoBarSeries({baseValue:7,labelPlacement:LabelPlacement.Base,labelAngle:-45});A.items.push(new TornadoBarItem({minimum:4,maximum:12,categoryIndex:7}));const _=new CategoryAxis({position:AxisPosition.Left,startPosition:1,endPosition:0});_.labels.push("Labels Outside"),_.labels.push("Labels Inside"),_.labels.push("Labels Middle"),_.labels.push("Labels Base"),_.labels.push("Labels Outside (angled)"),_.labels.push("Labels Inside (angled)"),_.labels.push("Labels Middle (angled)"),_.labels.push("Labels Base (angled)");const M=new LinearAxis({position:AxisPosition.Bottom,extraGridlines:[7],minimumPadding:.1,maximumPadding:.1});return a.series.push(d),a.series.push(m),a.series.push(f),a.series.push(g),a.series.push(x),a.series.push(w),a.series.push(C),a.series.push(A),a.axes.push(_),a.axes.push(M),a}const category$4="TornadoBarSeries",TornadoBarSeriesExamples={category:category$4,tags:["Series"],examples:[{title:"Tornado diagram 1",example:{model:tornadoDiagram1}},{title:"Tornado diagram 2",example:{model:tornadoDiagram2}},{title:"Tornado diagram with various label types",example:{model:tornadoDiagramWithLabels}}]};function twoColorAreaSeries(){const a=new PlotModel({title:"TwoColorAreaSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new TwoColorAreaSeries({title:"Temperature at Eidesmoen, December 1986.",trackerStringFormatter:f=>`December ${round(f.xValue,0)}: ${f.yValue.toFixed(1)} C`,color:OxyColors.Tomato,color2:OxyColors.LightBlue,markerFill:OxyColors.Tomato,markerFill2:OxyColors.LightBlue,strokeThickness:2,limit:-1,markerType:MarkerType.Circle,markerSize:3}),m=[5,0,7,7,4,3,5,5,11,4,2,3,2,1,0,2,-1,0,0,-3,-6,-13,-10,-10,0,-4,-5,-4,3,0,-5];for(let f=0;f<m.length;f++)d.points.push(new DataPoint(f+1,m[f]));return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C",extraGridlines:[0]})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Date"})),a}function twoColorAreaSeries2(){const a=new PlotModel({title:"TwoColorAreaSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new TwoColorAreaSeries({title:"Temperature at Eidesmoen, December 1986.",trackerStringFormatter:f=>`December ${round(f.xValue,0)}: ${f.yValue.toFixed(1)} C`,color:OxyColors.Black,color2:OxyColors.Brown,markerFill:OxyColors.Red,fill:OxyColors.Tomato,fill2:OxyColors.LightBlue,markerFill2:OxyColors.Blue,markerStroke:OxyColors.Brown,markerStroke2:OxyColors.Black,strokeThickness:2,limit:0,markerType:MarkerType.Circle,markerSize:3}),m=[5,0,7,7,4,3,5,5,11,4,2,3,2,1,0,2,-1,0,0,-3,-6,-13,-10,-10,0,-4,-5,-4,3,0,-5];for(let f=0;f<m.length;f++)d.points.push(new DataPoint(f+1,m[f]));return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C",extraGridlines:[0]})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Date"})),a}function twoColorAreaSeries3(){const a=new PlotModel({title:"TwoColorAreaSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new TwoColorAreaSeries({title:"Temperature at Eidesmoen, December 1986.",trackerStringFormatter:f=>`December ${round(f.xValue,0)}: ${f.yValue.toFixed(1)} C`,color:OxyColors.Black,color2:OxyColors.Brown,markerFill:OxyColors.Red,fill:OxyColors.Tomato,fill2:OxyColors.LightBlue,markerFill2:OxyColors.Blue,markerStroke:OxyColors.Brown,markerStroke2:OxyColors.Black,strokeThickness:1,limit:0,interpolationAlgorithm:InterpolationAlgorithms.CanonicalSpline,markerType:MarkerType.Circle,markerSize:1}),m=[5,0,7,7,4,3,5,5,11,4,2,3,2,1,0,2,-1,0,0,-3,-6,-13,-10,-10,0,-4,-5,-4,3,0,-5];for(let f=0;f<m.length;f++)d.points.push(new DataPoint(f+1,m[f]));return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C",extraGridlines:[0]})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Date"})),a}function twoColorAreaSeriesTwoPolygons(){const a=new PlotModel({title:"Two polygons"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new TwoColorAreaSeries({color:OxyColors.Tomato,color2:OxyColors.LightBlue,markerFill:OxyColors.Tomato,markerFill2:OxyColors.LightBlue,strokeThickness:2,markerType:MarkerType.Circle,markerSize:3});return d.points.push(new DataPoint(0,3),new DataPoint(1,5),new DataPoint(2,1),new DataPoint(3,0),new DataPoint(4,3)),d.points2.push(new DataPoint(0,-3),new DataPoint(1,-1),new DataPoint(2,0),new DataPoint(3,-6),new DataPoint(4,-4)),a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a}const category$3="TwoColorAreaSeries",TwoColorAreaSeriesExamples={category:category$3,tags:["Series"],examples:[{title:"Temperatures",example:{model:twoColorAreaSeries}},{title:"Temperatures ver2",example:{model:twoColorAreaSeries2}},{title:"Temperatures ver3",example:{model:twoColorAreaSeries3}},{title:"Two polygons",example:{model:twoColorAreaSeriesTwoPolygons}}]};function twoColorLineSeries(){const a=new PlotModel({title:"TwoColorLineSeries"}),s=new Legend({legendSymbolLength:24});a.legends.push(s);const d=new TwoColorLineSeries({title:"Temperature at Eidesmoen, December 1986.",trackerStringFormatter:f=>`December ${round(f.xValue,0)}: ${f.yValue.toFixed(1)} C`,color:OxyColors.Red,color2:OxyColors.LightBlue,strokeThickness:3,limit:0,interpolationAlgorithm:InterpolationAlgorithms.CanonicalSpline,markerType:MarkerType.Circle,markerSize:4,markerStroke:OxyColors.Black,markerStrokeThickness:1.5}),m=[5,0,7,7,4,3,5,5,11,4,2,3,2,1,0,2,-1,0,0,-3,-6,-13,-10,-10,0,-4,-5,-4,3,0,-5];for(let f=0;f<m.length;f++)d.points.push(new DataPoint(f+1,m[f]));return a.series.push(d),a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Temperature",unit:"C",extraGridlines:[0]})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom,title:"Date"})),a}function twoColorLineSeriesReversed(){const a=twoColorLineSeries();return PlotModelUtilities.reverseYAxis(a),a}const category$2="TwoColorLineSeries",TwoColorLineSeriesExamples={category:category$2,tags:["Series"],examples:[{title:"Temperatures",example:{model:twoColorLineSeries}},{title:"Temperatures (Y Axis reversed)",example:{model:twoColorLineSeriesReversed}}]};function fromItems(){const{model:a}=getModel(!0);return a}function fromItemsVeeness(){const{model:a,series:s}=getModel(!0);return s.arrowVeeness=2,a}function fromItemsVectorOriginAndLabelPosition(){const{model:a,series:s}=getModel(!0);return s.arrowLabelPosition=.25,s.arrowStartPosition=.5,a}function fromItemsWithoutColorAxis(){const{model:a}=getModel(!1);return a}function vectorField(){const a=new PlotModel({title:"Peaks (Gradient)"}),s=new VectorSeries,d=ArrayBuilder.createVectorWithStep(-3,3,.25),m=ArrayBuilder.createVectorWithStep(-3.1,3.1,.25);return s.arrowVeeness=1,s.arrowStartPosition=.5,s.itemsSource=d.flatMap(f=>m.map(g=>({origin:new DataPoint(f,g),direction:new DataVector(dpeaksdx(f,g)/40,dpeaksdy(f,g)/40),value:NaN}))),a.series.push(s),a}function logarithmicYAxis(){const s=new PlotModel({title:"VectorSeries"}),d=new Random,m=100,f=100,g=50;s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:OxyPalettes.cool(10),minimum:0,maximum:g})),s.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-g,maximum:m+g})),s.axes.push(new LogarithmicAxis({position:AxisPosition.Left,minimum:1,maximum:f+g}));const x=new VectorSeries({labelFontSize:12});for(let w=99;w>=0;w--){const C=d.next()*Math.PI*2,A=d.next()*g,_=new DataPoint(d.next()*m,d.next()*f+1),M=new DataVector(Math.cos(C)*A,Math.sin(C)*A);x.items.push({origin:_,direction:M,value:A})}return s.series.push(x),s}const dpeaksdx=(a,s)=>-10*((1/5-3*Math.pow(a,2))*Math.exp(-Math.pow(a,2)-Math.pow(s,2))-2*a*(a/5-Math.pow(a,3)-Math.pow(s,5))*Math.exp(-Math.pow(a,2)-Math.pow(s,2)))+.6666666666666666*(1+a)*Math.exp(-Math.pow(1+a,2)-Math.pow(s,2))+3*(-2*(1-a)*Math.exp(-Math.pow(a,2)-Math.pow(1+s,2))-2*a*Math.pow(1-a,2)*Math.exp(-Math.pow(a,2)-Math.pow(1+s,2))),dpeaksdy=(a,s)=>-10*(-5*Math.pow(s,4)*Math.exp(-Math.pow(a,2)-Math.pow(s,2))-2*s*(a/5-Math.pow(a,3)-Math.pow(s,5))*Math.exp(-Math.pow(a,2)-Math.pow(s,2)))+.6666666666666666*s*Math.exp(-Math.pow(1+a,2)-Math.pow(s,2))-6*Math.pow(1-a,2)*(1+s)*Math.exp(-Math.pow(a,2)-Math.pow(1+s,2));function getModel(a){const d=new PlotModel({title:"VectorSeries (Veeness = 2)"}),m=new Random,f=100,g=100,x=10;a&&d.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:new OxyPalette(OxyPalettes.cool(10).colors.map(C=>OxyColor.fromAColor(100,C))),minimum:0,maximum:x})),d.axes.push(new LinearAxis({position:AxisPosition.Bottom,minimum:-x,maximum:f+x})),d.axes.push(new LinearAxis({position:AxisPosition.Left,minimum:-x,maximum:g+x}));const w=new VectorSeries({labelFontSize:12});for(let C=99;C>=0;C--){const A=m.next()*Math.PI*2,_=m.next()*x,M=new DataPoint(m.next()*f,m.next()*g),P=new DataVector(Math.cos(A)*_,Math.sin(A)*_);w.items.push({origin:M,direction:P,value:_})}return d.series.push(w),{model:d,series:w}}const category$1="VectorSeries",VectorSeriesExamples={category:category$1,tags:["Series"],examples:[{title:"VectorSeries",example:{model:fromItems}},{title:"VectorSeries (Veeness = 2)",example:{model:fromItemsVeeness}},{title:"VectorSeries (Vector Origin and Label position)",example:{model:fromItemsVectorOriginAndLabelPosition}},{title:"VectorSeries (without ColorAxis)",example:{model:fromItemsWithoutColorAxis}},{title:"Vector Field",example:{model:vectorField}},{title:"VectorSeries on Log Axis",example:{model:logarithmicYAxis}}]},Series=[...FinancialSeries,AreaSeriesExamples,BarSeriesExamples,BoxPlotSeriesExamples,ContourSeriesExamples,ErrorBarSeriesExamples,ExtrapolationLineSeriesExamples,FunctionSeriesExamples,HeatMapSeriesExamples$1,HistogramSeriesExamples,IntervalBarSeriesExamples,LinearBarSeriesExamples,LineSeriesExamples,PieSeriesExamples,RectangleBarSeriesExamples,RectangleSeriesExamples,ScatterSeriesExamples,StairStepSeriesExamples,StemSeriesExamples,ThreeColorLineSeriesExamples,TornadoBarSeriesExamples,TwoColorAreaSeriesExamples,TwoColorLineSeriesExamples,VectorSeriesExamples];function invisibleContourSeries(){const a=new PlotModel;a.title="Invisible contour series";const s=new ContourSeries;return s.isVisible=!1,s.columnCoordinates=ArrayBuilder.createVectorWithStep(-1,1,.05),s.rowCoordinates=ArrayBuilder.createVectorWithStep(-1,1,.05),s.data=ArrayBuilder.evaluate((d,m)=>d+m,s.columnCoordinates,s.rowCoordinates),a.series.push(s),a}function stairStepSeries_NullReferenceException(){const a=new PlotModel;return a.title="StairStepSeries NullReferenceException",a.series.push(new StairStepSeries),a}function heatMapSeriesInterpolationColor(){const a=[[10,0,-10],[0,0,0]],s=new PlotModel({title:"HeatMapSeries"});s.axes.push(new LinearColorAxis({position:AxisPosition.Right,palette:new OxyPalette([OxyColors.Red,OxyColors.Green,OxyColors.Blue])}));const d=new HeatMapSeries({coordinateDefinition:HeatMapCoordinateDefinition.Center,x0:0,x1:3,y0:0,y1:2,data:a,interpolate:!1,labelFontSize:.2});return s.series.push(d),s}function peaks400(){return HeatMapSeriesExamples.createPeaks(void 0,!0,400)}function updatingHeatMapSeries1(){const a=HeatMapSeriesExamples.createPeaks();a.title="Updating HeatMapSeries",a.subtitle="Click the heat map to change the Maximum of the color axis.";const s=a.axes[0],d=a.series[0];return d.onMouseDown=m=>{s.maximum=isNaN(s.maximum)?10:NaN,a.invalidatePlot(!0)},a}function updatingHeatMapSeries2(){const a=HeatMapSeriesExamples.createPeaks();a.title="Updating HeatMapSeries",a.subtitle="Click the heat map to change the Maximum of the color axis and invoke the Invalidate method on the HeatMapSeries.";const s=a.axes[0],d=a.series[0];return d.onMouseDown=m=>{s.maximum=isNaN(s.maximum)?10:NaN,d.invalidate(),a.invalidatePlot(!0)},a}function reducedColorSaturation(){const a=new PlotModel;a.title="Reduced color saturation",a.axes.push(new CategoryAxis({position:AxisPosition.Bottom})),a.defaultColors=a.defaultColors.map(d=>OxyColorExtensions.changeSaturation(d,.5));const s=new Random;for(let d=0;d<a.defaultColors.length;d++){const m=new BarSeries;m.items.push(BarItem.fromValue(50+s.next()*50)),m.items.push(BarItem.fromValue(40+s.next()*50)),a.series.push(m)}return a}function mediumIntensityColors(){const a=new PlotModel;a.title="Medium intensity colors",a.axes.push(new CategoryAxis({position:AxisPosition.Bottom})),a.defaultColors=[OxyColor.fromRgb(114,114,114),OxyColor.fromRgb(241,89,95),OxyColor.fromRgb(121,195,106),OxyColor.fromRgb(89,154,211),OxyColor.fromRgb(249,166,90),OxyColor.fromRgb(158,102,171),OxyColor.fromRgb(205,112,88),OxyColor.fromRgb(215,127,179)];const s=new Random;for(let d=0;d<a.defaultColors.length;d++){const m=new BarSeries;m.items.push(BarItem.fromValue(50+s.next()*50)),m.items.push(BarItem.fromValue(40+s.next()*50)),a.series.push(m)}return a}function brewerColors4(){const a=new PlotModel;a.title="Brewer colors (Accent scheme)",a.axes.push(new CategoryAxis({position:AxisPosition.Bottom})),a.defaultColors=[OxyColor.fromRgb(127,201,127),OxyColor.fromRgb(190,174,212),OxyColor.fromRgb(253,192,134),OxyColor.fromRgb(255,255,153)];const s=new Random;for(let d=0;d<a.defaultColors.length;d++){const m=new BarSeries;m.items.push(BarItem.fromValue(50+s.next()*50)),m.items.push(BarItem.fromValue(40+s.next()*50)),a.series.push(m)}return a}function brewerColors6(){const a=new PlotModel;a.title="Brewer colors (Paired scheme)",a.axes.push(new CategoryAxis({position:AxisPosition.Bottom})),a.defaultColors=[OxyColor.fromRgb(166,206,227),OxyColor.fromRgb(31,120,180),OxyColor.fromRgb(178,223,138),OxyColor.fromRgb(51,160,44),OxyColor.fromRgb(251,154,153),OxyColor.fromRgb(227,26,28)];const s=new Random;for(let d=0;d<a.defaultColors.length;d++){const m=new BarSeries;m.items.push(BarItem.fromValue(50+s.next()*50)),m.items.push(BarItem.fromValue(40+s.next()*50)),a.series.push(m)}return a}function sameColorOfLineSeriesAndAxisTitleAndLabels(){const a=new PlotModel;a.title="Same color of LineSeries and axis title & labels";const s=OxyColors.IndianRed;return a.axes.push(new LinearAxis({position:AxisPosition.Left,title:"Axis 1",titleColor:s,textColor:s})),a.axes.push(new LinearAxis({position:AxisPosition.Bottom})),a.series.push(new LineSeries({title:"LineSeries 1",color:s,itemsSource:[new DataPoint(0,0),new DataPoint(10,3),new DataPoint(20,2)]})),a}function polarPlotWithArrows(){const a=new PlotModel;return a.title="Custom arrow series",a.plotType=PlotType.Polar,a.plotAreaBorderColor=OxyColors.Undefined,a.axes.push(new AngleAxis({minimum:0,maximum:360,majorStep:30,minorStep:30,majorGridlineStyle:LineStyle.Dash})),a.axes.push(new MagnitudeAxis({minimum:0,maximum:5,majorStep:1,minorStep:1,angle:90,majorGridlineStyle:LineStyle.Dash})),a.series.push(new ArrowSeries549839({endPoint:new DataPoint(1,40)})),a.series.push(new ArrowSeries549839({endPoint:new DataPoint(2,75)})),a.series.push(new ArrowSeries549839({endPoint:new DataPoint(3,110)})),a.series.push(new ArrowSeries549839({endPoint:new DataPoint(4,140)})),a.series.push(new ArrowSeries549839({endPoint:new DataPoint(5,180)})),a}function markerTypeCircleProblem(){const a=new PlotModel({plotType:PlotType.Cartesian,plotAreaBorderThickness:new OxyThickness(0)}),s=new Legend;s.legendSymbolLength=30;const d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=getDateService(),f=new DateTimeAxis({position:AxisPosition.Bottom,tickStyle:TickStyle.None,axislineStyle:LineStyle.Solid,axislineColor:OxyColor.fromRgb(153,153,153),stringFormatter:(w,C)=>d[w.getMonth()]+m.format(w,"d HH"),intervalType:DateTimeIntervalType.Hours}),g=new LinearAxis({position:AxisPosition.Left,minimum:.001,maximum:3,majorGridlineStyle:LineStyle.Solid,tickStyle:TickStyle.None,intervalLength:50});a.axes.push(f),a.axes.push(g);const x=new LineSeries({color:OxyColor.fromRgb(44,169,173),strokeThickness:1,markerType:MarkerType.Circle,markerStroke:OxyColors.Blue,markerFill:OxyColors.SkyBlue,markerSize:2,dataFieldX:"Date",dataFieldY:"Value",trackerStringFormatter:w=>`Date: ${m.format(w.xValue,"DD HH")}
Value: ${w.yValue}`});return x.points.push(new DataPoint(.1,.7)),x.points.push(new DataPoint(.6,.9)),x.points.push(new DataPoint(1,.85)),x.points.push(new DataPoint(1.4,.95)),x.points.push(new DataPoint(1.8,1.2)),x.points.push(new DataPoint(2.2,1.7)),x.points.push(new DataPoint(2.6,1.7)),x.points.push(new DataPoint(3,.7)),a.series.push(x),a}class ArrowSeries549839 extends XYAxisSeries{constructor(d){super(d);$t(this,"defaultColor",OxyColors.Undefined);$t(this,"startPoint",DataPoint.Zero);$t(this,"endPoint",DataPoint.Zero);$t(this,"color");$t(this,"strokeThickness");this.color=OxyColors.Automatic,this.strokeThickness=2,d&&Object.assign(this,d)}setDefaultValues(){this.color.isAutomatic()&&(this.defaultColor=this.plotModel.getDefaultColor())}get actualColor(){return this.color.getActualColor(this.defaultColor)}async render(d){const m=this.transform(this.startPoint),f=this.transform(this.endPoint),g=f.minus(m),x=new ScreenVector(g.y,-g.x),w=f.minusVector(g.times(.2)).plus(x.times(.1)),C=f.minusVector(g.times(.2)).minusVector(x.times(.1));await d.drawLineSegments([m,f,f,w,f,C],this.actualColor,this.strokeThickness,this.edgeRenderingMode)}}const category="Z0 Discussions",DiscussionExamples={category,examples:[{title:"#445576: Invisible contour series",example:{model:invisibleContourSeries}},{title:"#461507: StairStepSeries NullReferenceException",example:{model:stairStepSeries_NullReferenceException}},{title:"#501409: Heatmap interpolation color",example:{model:heatMapSeriesInterpolationColor}},{title:"#522598: Peaks 400x400",example:{model:peaks400}},{title:"#474875: Updating HeatMapSeries 1",example:{model:updatingHeatMapSeries1}},{title:"#474875: Updating HeatMapSeries 2",example:{model:updatingHeatMapSeries2}},{title:"#539104: Reduced color saturation",example:{model:reducedColorSaturation}},{title:"#539104: Medium intensity colors",example:{model:mediumIntensityColors}},{title:"#539104: Brewer colors (4)",example:{model:brewerColors4}},{title:"#539104: Brewer colors (6)",example:{model:brewerColors6}},{title:"#542701: Same color of LineSeries and axis title & labels",example:{model:sameColorOfLineSeriesAndAxisTitleAndLabels}},{title:"#549839: Polar plot with custom arrow series",example:{model:polarPlotWithArrows}},{title:"MarkerType = Circle problem",example:{model:markerTypeCircleProblem}}]},Discussions=[DiscussionExamples],allExampleCats=[...Annotations,...Axes,...Discussions,...CustomSeries,...Exps,...Misc,...Series,...ShowCases];let finalExamples=[];for(const a of allExampleCats){const s=finalExamples.find(d=>d.category===a.category);s?s.examples.push(...a.examples):finalExamples.push(a)}finalExamples=sortArray(finalExamples,[["category","ASC"]]);const examples=finalExamples;function u(a,s,...d){if(a in s){let f=s[a];return typeof f=="function"?f(...d):f}let m=new Error(`Tried to handle "${a}" but there is no handler defined. Only defined handlers are: ${Object.keys(s).map(f=>`"${f}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(m,u),m}var N=(a=>(a[a.None=0]="None",a[a.RenderStrategy=1]="RenderStrategy",a[a.Static=2]="Static",a))(N||{}),S=(a=>(a[a.Unmount=0]="Unmount",a[a.Hidden=1]="Hidden",a))(S||{});function H({visible:a=!0,features:s=0,ourProps:d,theirProps:m,...f}){var g;let x=j(m,d),w=Object.assign(f,{props:x});if(a||s&2&&x.static)return y(w);if(s&1){let C=(g=x.unmount)==null||g?0:1;return u(C,{0(){return null},1(){return y({...f,props:{...x,hidden:!0,style:{display:"none"}}})}})}return y(w)}function y({props:a,attrs:s,slots:d,slot:m,name:f}){var g,x;let{as:w,...C}=T$1(a,["unmount","static"]),A=(g=d.default)==null?void 0:g.call(d,m),_={};if(m){let M=!1,P=[];for(let[E,R]of Object.entries(m))typeof R=="boolean"&&(M=!0),R===!0&&P.push(E);M&&(_["data-headlessui-state"]=P.join(" "))}if(w==="template"){if(A=b$1(A??[]),Object.keys(C).length>0||Object.keys(s).length>0){let[M,...P]=A??[];if(!v(M)||P.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${f} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(C).concat(Object.keys(s)).map(B=>B.trim()).filter((B,z,F)=>F.indexOf(B)===z).sort((B,z)=>B.localeCompare(z)).map(B=>`  - ${B}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(B=>`  - ${B}`).join(`
`)].join(`
`));let E=j((x=M.props)!=null?x:{},C),R=cloneVNode(M,E);for(let B in E)B.startsWith("on")&&(R.props||(R.props={}),R.props[B]=E[B]);return R}return Array.isArray(A)&&A.length===1?A[0]:A}return h(w,Object.assign({},C,_),{default:()=>A})}function b$1(a){return a.flatMap(s=>s.type===Fragment?b$1(s.children):[s])}function j(...a){if(a.length===0)return{};if(a.length===1)return a[0];let s={},d={};for(let m of a)for(let f in m)f.startsWith("on")&&typeof m[f]=="function"?(d[f]!=null||(d[f]=[]),d[f].push(m[f])):s[f]=m[f];if(s.disabled||s["aria-disabled"])return Object.assign(s,Object.fromEntries(Object.keys(d).map(m=>[m,void 0])));for(let m in d)Object.assign(s,{[m](f,...g){let x=d[m];for(let w of x){if(f instanceof Event&&f.defaultPrevented)return;w(f,...g)}}});return s}function T$1(a,s=[]){let d=Object.assign({},a);for(let m of s)m in d&&delete d[m];return d}function v(a){return a==null?!1:typeof a.type=="string"||typeof a.type=="object"||typeof a.type=="function"}let e=0;function n$1(){return++e}function t(){return n$1()}var o$1=(a=>(a.Space=" ",a.Enter="Enter",a.Escape="Escape",a.Backspace="Backspace",a.Delete="Delete",a.ArrowLeft="ArrowLeft",a.ArrowUp="ArrowUp",a.ArrowRight="ArrowRight",a.ArrowDown="ArrowDown",a.Home="Home",a.End="End",a.PageUp="PageUp",a.PageDown="PageDown",a.Tab="Tab",a))(o$1||{});function o(a){var s;return a==null||a.value==null?null:(s=a.value.$el)!=null?s:a.value}let n=Symbol("Context");var l=(a=>(a[a.Open=1]="Open",a[a.Closed=2]="Closed",a[a.Closing=4]="Closing",a[a.Opening=8]="Opening",a))(l||{});function p(){return inject(n,null)}function c(a){provide(n,a)}function r(a,s){if(a)return a;let d=s??"button";if(typeof d=="string"&&d.toLowerCase()==="button")return"button"}function b(a,s){let d=ref(r(a.value.type,a.value.as));return onMounted(()=>{d.value=r(a.value.type,a.value.as)}),watchEffect(()=>{var m;d.value||o(s)&&o(s)instanceof HTMLButtonElement&&!((m=o(s))!=null&&m.hasAttribute("type"))&&(d.value="button")}),d}var $=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))($||{});let T=Symbol("DisclosureContext");function O(a){let s=inject(T,null);if(s===null){let d=new Error(`<${a} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,O),d}return s}let k=Symbol("DisclosurePanelContext");function U(){return inject(k,null)}let V=defineComponent({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(a,{slots:s,attrs:d}){let m=ref(a.defaultOpen?0:1),f=ref(null),g=ref(null),x={buttonId:ref(`headlessui-disclosure-button-${t()}`),panelId:ref(`headlessui-disclosure-panel-${t()}`),disclosureState:m,panel:f,button:g,toggleDisclosure(){m.value=u(m.value,{0:1,1:0})},closeDisclosure(){m.value!==1&&(m.value=1)},close(w){x.closeDisclosure();let C=w?w instanceof HTMLElement?w:w.value instanceof HTMLElement?o(w):o(x.button):o(x.button);C==null||C.focus()}};return provide(T,x),c(computed(()=>u(m.value,{0:l.Open,1:l.Closed}))),()=>{let{defaultOpen:w,...C}=a,A={open:m.value===0,close:x.close};return H({theirProps:C,ourProps:{},slot:A,slots:s,attrs:d,name:"Disclosure"})}}}),X=defineComponent({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(a,{attrs:s,slots:d,expose:m}){let f=O("DisclosureButton"),g=U(),x=computed(()=>g===null?!1:g.value===f.panelId.value);onMounted(()=>{x.value||a.id!==null&&(f.buttonId.value=a.id)}),onUnmounted(()=>{x.value||(f.buttonId.value=null)});let w=ref(null);m({el:w,$el:w}),x.value||watchEffect(()=>{f.button.value=w.value});let C=b(computed(()=>({as:a.as,type:s.type})),w);function A(){var P;a.disabled||(x.value?(f.toggleDisclosure(),(P=o(f.button))==null||P.focus()):f.toggleDisclosure())}function _(P){var E;if(!a.disabled)if(x.value)switch(P.key){case o$1.Space:case o$1.Enter:P.preventDefault(),P.stopPropagation(),f.toggleDisclosure(),(E=o(f.button))==null||E.focus();break}else switch(P.key){case o$1.Space:case o$1.Enter:P.preventDefault(),P.stopPropagation(),f.toggleDisclosure();break}}function M(P){switch(P.key){case o$1.Space:P.preventDefault();break}}return()=>{var P;let E={open:f.disclosureState.value===0},{id:R,...B}=a,z=x.value?{ref:w,type:C.value,onClick:A,onKeydown:_}:{id:(P=f.buttonId.value)!=null?P:R,ref:w,type:C.value,"aria-expanded":f.disclosureState.value===0,"aria-controls":f.disclosureState.value===0||o(f.panel)?f.panelId.value:void 0,disabled:a.disabled?!0:void 0,onClick:A,onKeydown:_,onKeyup:M};return H({ourProps:z,theirProps:B,slot:E,attrs:s,slots:d,name:"DisclosureButton"})}}}),Y=defineComponent({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:s,slots:d,expose:m}){let f=O("DisclosurePanel");onMounted(()=>{a.id!==null&&(f.panelId.value=a.id)}),onUnmounted(()=>{f.panelId.value=null}),m({el:f.panel,$el:f.panel}),provide(k,f.panelId);let g=p(),x=computed(()=>g!==null?(g.value&l.Open)===l.Open:f.disclosureState.value===0);return()=>{var w;let C={open:f.disclosureState.value===0,close:f.close},{id:A,..._}=a,M={id:(w=f.panelId.value)!=null?w:A,ref:f.panel};return H({ourProps:M,theirProps:_,slot:C,attrs:s,slots:d,features:N.RenderStrategy|N.Static,visible:x.value,name:"DisclosurePanel"})}}});function render(a,s){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}var duration$1={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal,function(){var d,m,f=1e3,g=6e4,x=36e5,w=864e5,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A=31536e6,_=2628e6,M=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,P={years:A,months:_,days:w,hours:x,minutes:g,seconds:f,milliseconds:1,weeks:6048e5},E=function(q){return q instanceof W},R=function(q,K,Z){return new W(q,Z,K.$l)},B=function(q){return m.p(q)+"s"},z=function(q){return q<0},F=function(q){return z(q)?Math.ceil(q):Math.floor(q)},I=function(q){return Math.abs(q)},L=function(q,K){return q?z(q)?{negative:!0,format:""+I(q)+K}:{negative:!1,format:""+q+K}:{negative:!1,format:""}},W=function(){function q(Z,J,te){var Q=this;if(this.$d={},this.$l=te,Z===void 0&&(this.$ms=0,this.parseFromMilliseconds()),J)return R(Z*P[B(J)],this);if(typeof Z=="number")return this.$ms=Z,this.parseFromMilliseconds(),this;if(typeof Z=="object")return Object.keys(Z).forEach(function(Ve){Q.$d[B(Ve)]=Z[Ve]}),this.calMilliseconds(),this;if(typeof Z=="string"){var me=Z.match(M);if(me){var Xe=me.slice(2).map(function(Ve){return Ve!=null?Number(Ve):0});return this.$d.years=Xe[0],this.$d.months=Xe[1],this.$d.weeks=Xe[2],this.$d.days=Xe[3],this.$d.hours=Xe[4],this.$d.minutes=Xe[5],this.$d.seconds=Xe[6],this.calMilliseconds(),this}}return this}var K=q.prototype;return K.calMilliseconds=function(){var Z=this;this.$ms=Object.keys(this.$d).reduce(function(J,te){return J+(Z.$d[te]||0)*P[te]},0)},K.parseFromMilliseconds=function(){var Z=this.$ms;this.$d.years=F(Z/A),Z%=A,this.$d.months=F(Z/_),Z%=_,this.$d.days=F(Z/w),Z%=w,this.$d.hours=F(Z/x),Z%=x,this.$d.minutes=F(Z/g),Z%=g,this.$d.seconds=F(Z/f),Z%=f,this.$d.milliseconds=Z},K.toISOString=function(){var Z=L(this.$d.years,"Y"),J=L(this.$d.months,"M"),te=+this.$d.days||0;this.$d.weeks&&(te+=7*this.$d.weeks);var Q=L(te,"D"),me=L(this.$d.hours,"H"),Xe=L(this.$d.minutes,"M"),Ve=this.$d.seconds||0;this.$d.milliseconds&&(Ve+=this.$d.milliseconds/1e3,Ve=Math.round(1e3*Ve)/1e3);var Ye=L(Ve,"S"),qe=Z.negative||J.negative||Q.negative||me.negative||Xe.negative||Ye.negative,et=me.format||Xe.format||Ye.format?"T":"",je=(qe?"-":"")+"P"+Z.format+J.format+Q.format+et+me.format+Xe.format+Ye.format;return je==="P"||je==="-P"?"P0D":je},K.toJSON=function(){return this.toISOString()},K.format=function(Z){var J=Z||"YYYY-MM-DDTHH:mm:ss",te={Y:this.$d.years,YY:m.s(this.$d.years,2,"0"),YYYY:m.s(this.$d.years,4,"0"),M:this.$d.months,MM:m.s(this.$d.months,2,"0"),D:this.$d.days,DD:m.s(this.$d.days,2,"0"),H:this.$d.hours,HH:m.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:m.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:m.s(this.$d.seconds,2,"0"),SSS:m.s(this.$d.milliseconds,3,"0")};return J.replace(C,function(Q,me){return me||String(te[Q])})},K.as=function(Z){return this.$ms/P[B(Z)]},K.get=function(Z){var J=this.$ms,te=B(Z);return te==="milliseconds"?J%=1e3:J=te==="weeks"?F(J/P[te]):this.$d[te],J||0},K.add=function(Z,J,te){var Q;return Q=J?Z*P[B(J)]:E(Z)?Z.$ms:R(Z,this).$ms,R(this.$ms+Q*(te?-1:1),this)},K.subtract=function(Z,J){return this.add(Z,J,!0)},K.locale=function(Z){var J=this.clone();return J.$l=Z,J},K.clone=function(){return R(this.$ms,this)},K.humanize=function(Z){return d().add(this.$ms,"ms").locale(this.$l).fromNow(!Z)},K.valueOf=function(){return this.asMilliseconds()},K.milliseconds=function(){return this.get("milliseconds")},K.asMilliseconds=function(){return this.as("milliseconds")},K.seconds=function(){return this.get("seconds")},K.asSeconds=function(){return this.as("seconds")},K.minutes=function(){return this.get("minutes")},K.asMinutes=function(){return this.as("minutes")},K.hours=function(){return this.get("hours")},K.asHours=function(){return this.as("hours")},K.days=function(){return this.get("days")},K.asDays=function(){return this.as("days")},K.weeks=function(){return this.get("weeks")},K.asWeeks=function(){return this.as("weeks")},K.months=function(){return this.get("months")},K.asMonths=function(){return this.as("months")},K.years=function(){return this.get("years")},K.asYears=function(){return this.as("years")},q}(),G=function(q,K,Z){return q.add(K.years()*Z,"y").add(K.months()*Z,"M").add(K.days()*Z,"d").add(K.hours()*Z,"h").add(K.minutes()*Z,"m").add(K.seconds()*Z,"s").add(K.milliseconds()*Z,"ms")};return function(q,K,Z){d=Z,m=Z().$utils(),Z.duration=function(Q,me){var Xe=Z.locale();return R(Q,{$l:Xe},me)},Z.isDuration=E;var J=K.prototype.add,te=K.prototype.subtract;K.prototype.add=function(Q,me){return E(Q)?G(this,Q,1):J.bind(this)(Q,me)},K.prototype.subtract=function(Q,me){return E(Q)?G(this,Q,-1):te.bind(this)(Q,me)}}})})(duration$1);var durationExports=duration$1.exports;const duration=getDefaultExportFromCjs(durationExports);var dayOfYear$1={exports:{}};(function(a,s){(function(d,m){a.exports=m()})(commonjsGlobal,function(){return function(d,m,f){m.prototype.dayOfYear=function(g){var x=Math.round((f(this).startOf("day")-f(this).startOf("year"))/864e5)+1;return g==null?x:this.add(g-x,"day")}}})})(dayOfYear$1);var dayOfYearExports=dayOfYear$1.exports;const dayOfYear=getDefaultExportFromCjs(dayOfYearExports);function toOxyMouseEventArgs(a){return{position:new ScreenPoint(a.offsetX,a.offsetY),modifierKeys:convertModifiers(a),handled:!1}}function toOxyMouseDownEventArgs(a){const s=toOxyMouseEventArgs(a);return s.clickCount=a.detail,s.changedButton=convertMouseButtons(a),s}function toOxyMouseWheelEventArgs(a){const s=toOxyMouseEventArgs(a);return s.delta=a.deltaY!=0?-a.deltaY:a.deltaX,s}function convertModifiers(a){let s=OxyModifierKeys.None;return a.ctrlKey&&(s|=OxyModifierKeys.Control),a.shiftKey&&(s|=OxyModifierKeys.Shift),a.altKey&&(s|=OxyModifierKeys.Alt),a.metaKey&&(s|=OxyModifierKeys.Windows),s}function convertMouseButtons(a){return a.button===0?OxyMouseButton.Left:a.button===1?OxyMouseButton.Middle:a.button===2?OxyMouseButton.Right:a.button===3?OxyMouseButton.XButton1:a.button===4?OxyMouseButton.XButton2:OxyMouseButton.None}let cachedContext=null;function getCanvasContext(){if(cachedContext)return cachedContext;const a=document.createElement("canvas");if(cachedContext=a==null?void 0:a.getContext("2d"),!cachedContext)throw new Error("Could not get canvas context");return cachedContext}let styleConverter=null;const getFont=(a,s,d)=>(styleConverter||(styleConverter=new OxyStyleToCanvasStyleConverter),styleConverter.convertFont(a,s,d||FontWeights.Normal));function canvasTextMeasurer(a){a=a||getCanvasContext();function s(d,m,f,g){if(!a)throw new Error("Could not get canvas context");a.font=getFont(m,f,g);const x=a.measureText(d);return new OxySize(x.width,f)}return{measureText:s}}class OxyStyleToCanvasStyleConverter{convertLineJoin(s){switch(s=s||LineJoin.Miter,s){case LineJoin.Miter:return"miter";case LineJoin.Bevel:return"bevel";case LineJoin.Round:return"round"}}convertStrokeOrFillStyle(s){return s.toRgba()}convertFont(s,d,m){let f="";return(m||FontWeights.Normal)>FontWeights.Normal&&(f+="bold "),f+=`${d||12}px `,s&&(f+=`"${s}" `),f.trim()}}class CanvasRenderContext extends ClippingRenderContext{constructor(d){super();$t(this,"ctx");$t(this,"_textMeasurer");$t(this,"styleConverter",new OxyStyleToCanvasStyleConverter);$t(this,"_ctxInitStyles");this.canvas=d;const m=d.getContext("2d");if(!m)throw new Error("Could not get canvas context");this.ctx=m,this._ctxInitStyles={fillStyle:m.fillStyle,strokeStyle:m.strokeStyle,lineJoin:m.lineJoin,lineWidth:m.lineWidth},this._textMeasurer=canvasTextMeasurer(m)}async drawImage(d,m,f,g,x,w,C,A,_,M,P){if(M<=0)return;this.resetStyles();const E=this.ctx;if(!d.uri){const R=new Blob([d.data],{type:"image/png"}),B=await createImageBitmap(R);E.imageSmoothingEnabled=P,E.drawImage(B,m,f,g,x,w,C,A,_);return}return new Promise(R=>{const B=new Image(d.width,d.height),z=btoa(String.fromCharCode(...d.data));B.src=`data:image/png;base64,${z}`,B.onerror=F=>{console.log("error loading image",F),R()},B.onload=()=>{E.imageSmoothingEnabled=P,E.drawImage(B,m,f,g,x,w,C,A,_),R()}})}async drawLineSegments(d,m,f,g,x,w){if(d.length<2||m.isInvisible()||f==0)return;this.resetStyles();const C=this.ctx;C.beginPath(),this.applyLineStyle(m,f,g,x,w);for(let A=0;A<d.length;A+=2){const _=d[A],M=d[A+1];this.drawPoints([_,M])}C.stroke()}async drawLine(d,m,f,g,x,w){if(d.length<2||m.isInvisible()||f==0)return;this.resetStyles();const C=this.ctx;C.beginPath(),this.applyLineStyle(m,f,g,x,w),this.drawPoints(d),C.stroke()}async drawPolygon(d,m,f,g,x,w,C){if(m.isInvisible()&&!(f.isVisible()||g<=0)||d.length<2)return;this.resetStyles();const A=this.ctx;A.beginPath(),this.applyPolygonStyle(m,f,g,x,w,C),this.drawPoints(d),A.closePath(),m.isVisible()&&A.fill(),f.isVisible()&&g>0&&A.stroke()}async drawPolygons(d,m,f,g,x,w,C){if(m.isInvisible()&&!(f.isVisible()||g<=0)||d.length===0)return;this.resetStyles();const A=this.ctx;this.applyPolygonStyle(m,f,g,x,w,C);for(const _ of d)_.length<2||(A.beginPath(),this.drawPoints(_),A.closePath(),m.isVisible()&&A.fill(),f.isVisible()&&g>0&&A.stroke())}async drawText(d,m,f,g,x,w,C,A,_,M){if(!m||f.isInvisible())return;isNullOrUndef(A)&&(A=HorizontalAlignment.Left),isNullOrUndef(_)&&(_=VerticalAlignment.Top),this.resetStyles();const P=this.ctx;x=x||12,w=w||FontWeights.Normal,this.applyTextStyle(f,g,x,w),P.save(),P.translate(d.x,d.y),C&&P.rotate(C*(Math.PI/180));const E=StringHelper.splitLines(m),R=[];for(const F of E){const I=this.measureText(F,g,x,w);R.push(I)}const B=R.reduce((F,I)=>F+I.height,0);let z=0;P.textBaseline="middle",_===VerticalAlignment.Top?z=0:_===VerticalAlignment.Middle?z=-B/2:_===VerticalAlignment.Bottom&&(z=-B);for(let F=0;F<E.length;F++){const I=E[F];let L=0;const W=R[F];A===HorizontalAlignment.Center?L=-W.width/2:A===HorizontalAlignment.Right&&(L=-W.width),P.fillText(I,L,z+W.height/2,M==null?void 0:M.width),z+=W.height}P.restore()}measureText(d,m,f,g){return this._textMeasurer.measureText(d,m,f,g)}setClip(d){this.ctx.save();const m=new Path2D;m.rect(d.left,d.top,d.width,d.height),this.ctx.clip(m)}resetClip(){this.ctx.restore()}resetStyles(){const d=this.ctx;d.setLineDash([]),Object.assign(d,this._ctxInitStyles)}applyLineStyle(d,m,f,g,x){const w=this.ctx;g&&g.length>0&&w.setLineDash(g),w.lineWidth=m,w.lineJoin=this.styleConverter.convertLineJoin(x),w.strokeStyle=this.styleConverter.convertStrokeOrFillStyle(d)}applyPolygonStyle(d,m,f,g,x,w){m.isVisible()&&f>0&&this.applyLineStyle(m,f,g,x,w),d.isVisible()&&(this.ctx.fillStyle=this.styleConverter.convertStrokeOrFillStyle(d))}applyTextStyle(d,m,f,g){const x=this.ctx;x.fillStyle=this.styleConverter.convertStrokeOrFillStyle(d),x.font=this.styleConverter.convertFont(m,f,g)}drawPoints(d){this.ctx.moveTo(d[0].x,d[0].y);for(let m=1;m<d.length;m++){const f=d[m];this.ctx.lineTo(f.x,f.y)}}}class WebPlotView{constructor(s){$t(this,"_view");$t(this,"_tooltip");$t(this,"_renderContext");$t(this,"_drawCtx");$t(this,"_styleConverter",new OxyStyleToCanvasStyleConverter);$t(this,"_zoomRectangle");$t(this,"_model");$t(this,"controller");$t(this,"defaultController");$t(this,"_throttleRender",this.throttle(()=>this.renderCore(!1),16));if(this._view=s,this._drawCtx=this._view.getContext("2d"),!this._drawCtx)throw new Error("Could not get 2d context");this._tooltip=document.createElement("div"),this._tooltip.style.position="absolute",this._tooltip.style.zIndex="100",this._tooltip.style.backgroundColor="#FFFFA0E0",this._tooltip.style.border="1px solid black",this._tooltip.style.padding="8px",this._tooltip.style.visibility="hidden",this._tooltip.style.pointerEvents="none",document.body.appendChild(this._tooltip),this._renderContext=new CanvasRenderContext(this._view),this.addViewEvents()}get tooltip(){return this._tooltip}addViewEvents(){const s=this._view;s.addEventListener("contextmenu",function(d){d.preventDefault()}),s.addEventListener("resize",async()=>{await this.render(!1)}),s.onmousedown=d=>{this.actualController.handleMouseDown(this,toOxyMouseDownEventArgs(d))},s.onmousemove=d=>{this.actualController.handleMouseMove(this,toOxyMouseEventArgs(d))},s.onmouseup=d=>{this.actualController.handleMouseUp(this,toOxyMouseEventArgs(d))},s.onmouseenter=d=>{this.actualController.handleMouseEnter(this,toOxyMouseEventArgs(d))},s.onmouseleave=d=>{this.actualController.handleMouseLeave(this,toOxyMouseEventArgs(d))},s.onwheel=d=>{this.actualController.handleMouseWheel(this,toOxyMouseWheelEventArgs(d))}}get clientArea(){return new OxyRect(0,0,this._view.width,this._view.height)}get model(){return this._model}set model(s){const d=this._model;this._model=s,this.onModelChanged(d,s)}get actualModel(){return this._model}get actualController(){return this.controller?this.controller:this.defaultController?this.defaultController:(this.defaultController=new PlotController,this.defaultController)}hideTracker(){this._tooltip.style.visibility="hidden"}showTracker(s){if(!(s!=null&&s.position))return;const d=s.toString()||"";if(d.trim().length===0)return;const m=this._view.offsetTop,f=this._view.offsetLeft;this._tooltip.innerText=d,this._tooltip.style.top=`${m+s.position.y}px`,this._tooltip.style.left=`${f+s.position.x}px`,this._tooltip.style.visibility="visible"}hideZoomRectangle(){this._zoomRectangle=void 0}showZoomRectangle(s){this._zoomRectangle=s}invalidatePlot(s){this.render(s)}setClipboardText(s){try{navigator.clipboard.writeText(s)}catch(d){console.error(d)}}setCursorType(s){switch(s){case CursorType.Default:this._view.style.cursor="default";break;case CursorType.Pan:this._view.style.cursor="grab";break;case CursorType.ZoomRectangle:this._view.style.cursor="move";break;case CursorType.ZoomHorizontal:this._view.style.cursor="ew-resize";break;case CursorType.ZoomVertical:this._view.style.cursor="ns-resize";break;default:this._view.style.cursor="default";break}}onModelChanged(s,d){s&&s.attachPlotView(void 0),d&&d.attachPlotView(this),this.invalidatePlot(!0)}async render(s){if(this._model){if(s){await this.renderCore(s);return}this._throttleRender()}}async renderCore(s){const d=this._view,m=this._model;if(this._drawCtx.reset(),!!m&&(m.update(s||!1),m.background.isUndefined()||(this._drawCtx.fillStyle=this._styleConverter.convertStrokeOrFillStyle(m.background),this._drawCtx.fillRect(0,0,d.width,d.height)),await m.render(this._renderContext,new OxyRect(0,0,d.width,d.height)),this._zoomRectangle&&this._zoomRectangle.equals(OxyRect.Empty))){const f=OxyColor.parse("#40FFFF00"),g=OxyColors.Black;await this._renderContext.drawRectangle(this._zoomRectangle,f,g,1,EdgeRenderingMode.Automatic)}}throttle(s,d){let m=!1;return function(){m||(s&&s(),m=!0,setTimeout(function(){m=!1},d))}}}const oxyPlotImg="/assets/OxyPlot-4SQiqpWf.png",_hoisted_1={class:"flex py-4"},_hoisted_2={class:"w-[300px]"},_hoisted_3={class:"overflow-x-hidden overflow-y-auto mt-2",style:{"max-height":"calc(100vh - 100px)"}},_hoisted_4=["onClick"],_hoisted_5={class:"flex-grow ml-4"},_hoisted_6=createBaseVNode("canvas",{id:"plotView",class:"border border-gray-200 rounded-lg shadow",style:{width:"800px",height:"600px"}},null,-1),_hoisted_7={class:"flex justify-end mt-2"},_hoisted_8={key:0,class:"flex items-center"},_hoisted_9=["disabled"],_hoisted_10=createBaseVNode("label",{class:"ml-1 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",for:"chkTransposed"},"Transposed",-1),_hoisted_11={key:1,class:"flex items-center ml-2"},_hoisted_12=["disabled"],_hoisted_13=createBaseVNode("label",{class:"ml-1 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",for:"chkReversed"},"Reversed",-1),_sfc_main=defineComponent({__name:"App",setup(a){window.oxyPlotImg=oxyPlotImg,dayjs.extend(duration),dayjs.extend(dayOfYear);let s=null;const d=ref(null),m=ref(""),f=ref(!1),g=ref(!1),x=ref(!1),w=ref(!1);let C=null;const A=computed(()=>{if(!m.value)return examples;const R=[],B=m.value.toLowerCase();function z(F,I){return(I.title||"").toLowerCase().includes(B)||(F.tags||[]).some(L=>L.toLowerCase().includes(B))}for(const F of examples){const I=F.examples.filter(L=>z(F,L));I.length>0&&R.push({category:F.category,examples:I})}return R});watch([f,x],async(R,B)=>{if(!d.value)return;const z=await P(d.value);z&&await E(z)});function _(){if(s)return s;const R=document.getElementById("plotView"),B=R.clientWidth,z=R.clientHeight,F=window.devicePixelRatio||1;return R.width=B*F,R.height=z*F,R.style.width=B+"px",R.style.height=z+"px",s=R,s}async function M(R,B){if(toRaw(d.value)===B)return;const z=await P(B);z&&(d.value=B,g.value=PlotModelUtilities.isTransposable(z.model),w.value=PlotModelUtilities.isReversible(z.model),await E(z))}async function P(R){let B=null;try{B=await R.example.model()}catch(F){return console.error(F),alert(F),null}if(!B)return null;f.value&&PlotModelUtilities.isTransposable(B)&&PlotModelUtilities.transpose(B),x.value&&PlotModelUtilities.isReversible(B)&&PlotModelUtilities.reverseAllAxes(B);let z;return R.example.controller&&(z=R.example.controller()),{model:B,controller:z}}async function E(R){const B=R.model;if(B){if(!C){const z=_();C=new WebPlotView(z)}C.model=B,C.controller=R.controller}}return(R,B)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":B[0]||(B[0]=z=>m.value=z),placeholder:"Filter",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[vModelText,m.value]]),createBaseVNode("div",_hoisted_3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,z=>(openBlock(),createBlock(unref(V),{as:"div",class:"mt-2 mr-1",key:z.category},{default:withCtx(({open:F})=>[createVNode(unref(X),{class:"flex w-full justify-between rounded-lg bg-purple-100 px-4 py-2 text-left text-sm font-medium text-purple-900 hover:bg-purple-200 focus:outline-none focus-visible:ring focus-visible:ring-purple-500/75"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(z.category)+" ("+toDisplayString(z.examples.length)+")",1),createVNode(unref(render),{class:normalizeClass([F?"rotate-180 transform":"","h-5 w-5 text-purple-500"])},null,8,["class"])]),_:2},1024),createVNode(unref(Y),{class:"px-4 pb-2 text-sm text-gray-500"},{default:withCtx(()=>[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.examples,I=>(openBlock(),createElementBlock("li",{key:I.title,class:"my-2 cursor-pointer"},[createBaseVNode("div",{onClick:L=>M(z,I),class:normalizeClass({"text-sky-500 font-bold":toRaw(d.value)===I})},toDisplayString(I.title),11,_hoisted_4)]))),128))])]),_:2},1024)]),_:2},1024))),128))])]),createBaseVNode("div",_hoisted_5,[_hoisted_6,createBaseVNode("div",_hoisted_7,[d.value?(openBlock(),createElementBlock("div",_hoisted_8,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[1]||(B[1]=z=>f.value=z),type:"checkbox",disabled:!g.value,id:"chkTransposed",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,_hoisted_9),[[vModelCheckbox,f.value]]),_hoisted_10])):createCommentVNode("",!0),d.value?(openBlock(),createElementBlock("div",_hoisted_11,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[2]||(B[2]=z=>x.value=z),disabled:!w.value,type:"checkbox",id:"chkReversed",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,_hoisted_12),[[vModelCheckbox,x.value]]),_hoisted_13])):createCommentVNode("",!0)])])]))}});createApp(_sfc_main).mount("#app");
